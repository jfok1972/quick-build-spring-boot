var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=='function'?Object.defineProperty:function(b,c,a){a=a;if(b==Array.prototype||b==Object.prototype){return}b[c]=a.value};$jscomp.getGlobal=function(a){return typeof window!='undefined'&&window===a?a:typeof global!='undefined'&&global!=null?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(i,f,j,k){if(!f){return}var a=$jscomp.global;var b=i.split('.');for(var e=0;e<b.length-1;e++){var d=b[e];if(!(d in a)){a[d]={}}a=a[d]}var g=b[b.length-1];var h=a[g];var c=f(h);if(c==h||c==null){return}$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})};$jscomp.polyfill('Array.prototype.copyWithin',function(a){if(a){return a}var b=function(d,c,b){var e=this.length;d=Number(d);c=Number(c);b=Number(b!=null?b:e);if(d<c){b=Math.min(b,e);while(c<b){if(c in this){this[d++]=this[c++]}else {delete this[d++];c++}}}else {b=Math.min(b,e+c-d);d+=b-c;while(b>c){if(--b in this){this[--d]=this[b]}else {delete this[d]}}}return this};return b},'es6','es3');$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global['Symbol']){$jscomp.global['Symbol']=$jscomp.Symbol}};$jscomp.Symbol=function(){var a=0;function Symbol(b){return $jscomp.SYMBOL_PREFIX+(b||'')+a++}return Symbol}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global['Symbol'].iterator;if(!a){a=$jscomp.global['Symbol'].iterator=$jscomp.global['Symbol']('iterator')}if(typeof Array.prototype[a]!='function'){$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}})}$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){if(b<a.length){return {done:!1,value:a[b++]}}else {return {done:!0}}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};a[$jscomp.global['Symbol'].iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();if(a instanceof String){a=a+''}var c=0;var b={next:function(){if(c<a.length){var e=c++;return {value:d(e,a[e]),done:!1}}b.next=function(){return {done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill('Array.prototype.entries',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b,c){return [b,c]})};return b},'es6','es3');$jscomp.polyfill('Array.prototype.fill',function(a){if(a){return a}var b=function(f,c,b){var d=this.length||0;if(c<0){c=Math.max(0,d+c)}if(b==null||b>d){b=d}b=Number(b);if(b<0){b=Math.max(0,d+b)}for(var e=Number(c||0);e<b;e++){this[e]=f}return this};return b},'es6','es3');$jscomp.findInternal=function(a,d,e){if(a instanceof String){a=String(a)}var f=a.length;for(var b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a)){return {i:b,v:c}}}return {i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).v};return b},'es6','es3');$jscomp.polyfill('Array.prototype.findIndex',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).i};return b},'es6','es3');$jscomp.polyfill('Array.from',function(a){if(a){return a}var b=function(b,c,g){$jscomp.initSymbolIterator();c=c!=null?c:function(d){return d};var e=[];var f=b[Symbol.iterator];if(typeof f=='function'){b=f.call(b);var h;var j=0;while(!(h=b.next()).done){e.push(c.call(g,h.value,j++))}}else {var i=b.length;for(var d=0;d<i;d++){e.push(c.call(g,b[d],d))}}return e};return b},'es6','es3');$jscomp.polyfill('Object.is',function(a){if(a){return a}var b=function(b,c){if(b===c){return b!==0||1/b===1/c}else {return b!==b&&c!==c}};return b},'es6','es3');$jscomp.polyfill('Array.prototype.includes',function(a){if(a){return a}var b=function(d,g){var c=this;if(c instanceof String){c=String(c)}var f=c.length;var b=g||0;if(b<0){b=Math.max(b+f,0)}for(;b<f;b++){var e=c[b];if(e===d||Object.is(e,d)){return !0}}return !1};return b},'es7','es3');$jscomp.polyfill('Array.prototype.keys',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b){return b})};return b},'es6','es3');$jscomp.polyfill('Array.of',function(a){if(a){return a}var b=function(b){return Array.from(arguments)};return b},'es6','es3');$jscomp.polyfill('Array.prototype.values',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(c,b){return b})};return b},'es8','es3');$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill('Promise',function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE){return c}function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){if(this.batch_==null){this.batch_=[];this.asyncExecuteBatch_()}this.batch_.push(a);return this};AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global['setTimeout'];AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)};AsyncExecutor.prototype.executeBatch_=function(){while(this.batch_&&this.batch_.length){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var d=b[a];b[a]=null;try{d()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b={PENDING:0,FULFILLED:1,REJECTED:2};var a=function(d){this.state_=b.PENDING;this.result_=undefined;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{d(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this;var a=!1;function firstCallWins(d){return function(e){if(!a){a=!0;d.call(b,e)}}}return {resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this){this.reject_(new TypeError('A Promise cannot resolve to itself'))}else {if(b instanceof a){this.settleSameAsPromise_(b)}else {if(isObject(b)){this.resolveToNonPromiseObj_(b)}else {this.fulfill_(b)}}}};a.prototype.resolveToNonPromiseObj_=function(b){var a=undefined;try{a=b.then}catch(f){this.reject_(f);return}if(typeof a=='function'){this.settleSameAsThenable_(a,b)}else {this.fulfill_(b)}};function isObject(a){switch(typeof a){case 'object':return a!=null;case 'function':return !0;default:return !1;}}a.prototype.reject_=function(a){this.settle_(b.REJECTED,a)};a.prototype.fulfill_=function(a){this.settle_(b.FULFILLED,a)};a.prototype.settle_=function(d,a){if(this.state_!=b.PENDING){throw new Error('Cannot settle('+d+', '+a+'): Promise already settled in state'+this.state_)}this.state_=d;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){for(var a=0;a<this.onSettledCallbacks_.length;++a){d.asyncExecute(this.onSettledCallbacks_[a])}this.onSettledCallbacks_=null}};var d=new AsyncExecutor();a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,d){var a=this.createResolveAndReject_();try{b.call(d,a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.then=function(f,g){var b;var d;var e=new a(function(a,e){b=a;d=e});function createCallback(a,e){if(typeof a=='function'){return function(h){try{b(a(h))}catch(i){d(i)}}}else {return e}}this.callWhenSettled_(createCallback(f,b),createCallback(g,d));return e};a.prototype['catch']=function(a){return this.then(undefined,a)};a.prototype.callWhenSettled_=function(e,f){var a=this;function callback(){switch(a.state_){case b.FULFILLED:e(a.result_);break;case b.REJECTED:f(a.result_);break;default:throw new Error('Unexpected state: '+a.state_);}}if(this.onSettledCallbacks_==null){d.asyncExecute(callback)}else {this.onSettledCallbacks_.push(callback)}};function resolvingPromise(b){if(b instanceof a){return b}else {return new a(function(a,d){a(b)})}}a['resolve']=resolvingPromise;a['reject']=function(b){return new a(function(d,a){a(b)})};a['race']=function(b){return new a(function(e,f){var d=$jscomp.makeIterator(b);for(var a=d.next();!a.done;a=d.next()){resolvingPromise(a.value).callWhenSettled_(e,f)}})};a['all']=function(e){var d=$jscomp.makeIterator(e);var b=d.next();if(b.done){return resolvingPromise([])}else {return new a(function(g,h){var a=[];var f=0;function onFulfilled(b){return function(d){a[b]=d;f--;if(f==0){g(a)}}}do{a.push(undefined);f++;resolvingPromise(b.value).callWhenSettled_(onFulfilled(a.length-1),h);b=d.next()}while(!b.done)})}};return a},'es6','es3');$jscomp.polyfill('Promise.prototype.finally',function(a){if(a){return a}var b=function(b){return this.then(function(d){var c=Promise.resolve(b());return c.then(function(){return d})},function(d){var c=Promise.resolve(b());return c.then(function(){throw d})})};return b},'es9','es3');$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0};var a={};try{a.__proto__=b;return a.a}catch(c){}return !1};$jscomp.setPrototypeOf=typeof Object.setPrototypeOf=='function'?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b){throw new TypeError(a+' is not extensible')}return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(a instanceof Object){return}throw new TypeError('Iterator result '+a+' is not an object')};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=undefined;this.nextAddress=1;this.catchAddress_=0;this.finallyAddress_=0;this.abruptCompletion_=null;this.finallyContexts_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_){throw new TypeError('Generator is already running')}this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype['return']=function(a){this.abruptCompletion_={'return':a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(b,a){this.nextAddress=a;return {value:b}};$jscomp.generator.Context.prototype.yieldAll=function(d,b){var c=$jscomp.makeIterator(d);var a=c.next();$jscomp.generator.ensureIteratorResultIsObject_(a);if(a.done){this.yieldResult=a.value;this.nextAddress=b;return}this.yieldAllIterator_=c;return this.yield(a.value,b)};$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(b,a){this.catchAddress_=b;if(a!=undefined){this.finallyAddress_=a}};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(b,a){this.nextAddress=b;this.catchAddress_=a||0};$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;var b=this.abruptCompletion_.exception;this.abruptCompletion_=null;return b};$jscomp.generator.Context.prototype.enterFinallyBlock=function(c,b,a){if(!a){this.finallyContexts_=[this.abruptCompletion_]}else {this.finallyContexts_[a]=this.abruptCompletion_}this.catchAddress_=c||0;this.finallyAddress_=b||0};$jscomp.generator.Context.prototype.leaveFinallyBlock=function(d,c){var b=this.finallyContexts_.splice(c||0)[0];var a=this.abruptCompletion_=this.abruptCompletion_||b;if(a){if(a.isException){return this.jumpToErrorHandler_()}if(a.jumpTo!=undefined&&this.finallyAddress_<a.jumpTo){this.nextAddress=a.jumpTo;this.abruptCompletion_=null}else {this.nextAddress=this.finallyAddress_}}else {this.nextAddress=d}};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a){this.properties_.push(b)}this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){while(this.properties_.length>0){var a=this.properties_.pop();if(a in this.object_){return a}}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context();this.program_=a};$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_){return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_)}this.context_.next_(a);return this.nextStep_()};$jscomp.generator.Engine_.prototype.return_=function(b){this.context_.start_();var a=this.context_.yieldAllIterator_;if(a){var c='return' in a?a['return']:function(a){return {value:a,done:!0}};return this.yieldAllStep_(c,b,this.context_['return'])}this.context_['return'](b);return this.nextStep_()};$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_){return this.yieldAllStep_(this.context_.yieldAllIterator_['throw'],a,this.context_.next_)}this.context_.throw_(a);return this.nextStep_()};$jscomp.generator.Engine_.prototype.yieldAllStep_=function(d,e,c){try{var a=d.call(this.context_.yieldAllIterator_,e);$jscomp.generator.ensureIteratorResultIsObject_(a);if(!a.done){this.context_.stop_();return a}var b=a.value}catch(f){this.context_.yieldAllIterator_=null;this.context_.throw_(f);return this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,b);return this.nextStep_()};$jscomp.generator.Engine_.prototype.nextStep_=function(){while(this.context_.nextAddress){try{var b=this.program_(this.context_);if(b){this.context_.stop_();return {value:b.value,done:!1}}}catch(c){this.context_.yieldResult=undefined;this.context_.throw_(c)}}this.context_.stop_();if(this.context_.abruptCompletion_){var a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException){throw a.exception}return {value:a['return'],done:!0}}return {value:undefined,done:!0}};$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this['throw']=function(b){return a.throw_(b)};this['return']=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(b,c){var a=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(c));if($jscomp.setPrototypeOf){$jscomp.setPrototypeOf(a,b.prototype)}return a};$jscomp.asyncExecutePromiseGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a['throw'](b)}return new Promise(function(b,c){function handleGeneratorRecord(d){if(d.done){b(d.value)}else {Promise.resolve(d.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}}handleGeneratorRecord(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={};var b=Object.create(new $jscomp.global['Proxy'](a,{'get':function(d,e,c){return d==a&&e=='q'&&c==b}}));return b['q']===!0}catch(c){return !1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};$jscomp.polyfill('WeakMap',function(c){function isConformant(){if(!c||!Object.seal){return !1}try{var b=Object.seal({});var d=Object.seal({});var a=new c([[b,2],[d,3]]);if(a.get(b)!=2||a.get(d)!=3){return !1}a['delete'](b);a.set(d,4);return !a.has(b)&&a.get(d)==4}catch(e){return !1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE){return c}}else {if(isConformant()){return c}}var a='$jscomp_hidden_'+Math.random();function insert(b){if(!$jscomp.owns(b,a)){var d={};$jscomp.defineProperty(b,a,{value:d})}}function patch(a){var b=Object[a];if(b){Object[a]=function(d){insert(d);return b(d)}}}patch('freeze');patch('preventExtensions');patch('seal');var d=0;var b=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=$jscomp.makeIterator(a);var b;while(!(b=f.next()).done){var e=b.value;this.set(e[0],e[1])}}};b.prototype.set=function(b,d){insert(b);if(!$jscomp.owns(b,a)){throw new Error('WeakMap key fail: '+b)}b[a][this.id_]=d;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:undefined};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype['delete']=function(b){if(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_)){return !1}return delete b[a][this.id_]};return b},'es6','es3');$jscomp.MapEntry=function(){this.previous;this.next;this.head;this.key;this.value};$jscomp.polyfill('Map',function(b){function isConformant(){if($jscomp.ASSUME_NO_NATIVE_MAP||!b||typeof b!='function'||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var e=Object.seal({x:4});var c=new b($jscomp.makeIterator([[e,'s']]));if(c.get(e)!='s'||c.size!=1||c.get({x:4})||c.set({x:4},'t')!=c||c.size!=2){return !1}var d=c.entries();var a=d.next();if(a.done||a.value[0]!=e||a.value[1]!='s'){return !1}a=d.next();if(a.done||a.value[0].x!=4||a.value[1]!='t'||!d.next().done){return !1}return !0}catch(i){return !1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE){return b}}else {if(isConformant()){return b}}$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=new WeakMap();var a=function(a){this.data_={};this.head_=f();this.size=0;if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.set(d[0],d[1])}}};a.prototype.set=function(d,e){d=d===0?0:d;var a=c(this,d);if(!a.list){a.list=this.data_[a.id]=[]}if(!a.entry){a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:d,value:e};a.list.push(a.entry);this.head_.previous.next=a.entry;this.head_.previous=a.entry;this.size++}else {a.entry.value=e}return this};a.prototype['delete']=function(d){var a=c(this,d);if(a.entry&&a.list){a.list.splice(a.index,1);if(!a.list.length){delete this.data_[a.id]}a.entry.previous.next=a.entry.next;a.entry.next.previous=a.entry.previous;a.entry.head=null;this.size--;return !0}return !1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};a.prototype.has=function(a){return !!c(this,a).entry};a.prototype.get=function(d){var a=c(this,d).entry;return a&&a.value};a.prototype.entries=function(){return d(this,function(a){return [a.key,a.value]})};a.prototype.keys=function(){return d(this,function(a){return a.key})};a.prototype.values=function(){return d(this,function(a){return a.value})};a.prototype.forEach=function(e,d){var f=this.entries();var c;while(!(c=f.next()).done){var a=c.value;e.call(d,a[1],a[0],this)}};a.prototype[Symbol.iterator]=a.prototype.entries;var c=function(g,e){var f=h(e);var a=g.data_[f];if(a&&$jscomp.owns(g.data_,f)){for(var d=0;d<a.length;d++){var c=a[d];if(e!==e&&c.key!==c.key||e===c.key){return {id:f,list:a,index:d,entry:c}}}}return {id:f,list:a,index:-1,entry:undefined}};var d=function(c,d){var a=c.head_;return $jscomp.iteratorPrototype(function(){if(a){while(a.head!=c.head_){a=a.previous}while(a.next!=a.head){a=a.next;return {done:!1,value:d(a)}}a=null}return {done:!0,value:void 0}})};var f=function(){var a={};a.previous=a.next=a.head=a;return a};var g=0;var h=function(a){var c=a&&typeof a;if(c=='object'||c=='function'){a=a;if(!e.has(a)){var d=''+ ++g;e.set(a,d);return d}return e.get(a)}return 'p_'+a};return a},'es6','es3');$jscomp.polyfill('Math.acosh',function(a){if(a){return a}var b=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};return b},'es6','es3');$jscomp.polyfill('Math.asinh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.log1p',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var f=b;var g=1;var c=b;var d=0;var e=1;while(d!=c){f*=b;e*=-1;c=(d=c)+e*f/++g}return c}return Math.log(1+b)};return b},'es6','es3');$jscomp.polyfill('Math.atanh',function(b){if(b){return b}var a=Math.log1p;var c=function(c){c=Number(c);return (a(c)-a(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.cbrt',function(a){if(a){return a}var b=function(b){if(b===0){return b}b=Number(b);var c=Math.pow(Math.abs(b),1/3);return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.clz32',function(a){if(a){return a}var b=function(b){b=Number(b)>>>0;if(b===0){return 32}var c=0;if((b&4.29490176E9)===0){b<<=16;c+=16}if((b&4.27819008E9)===0){b<<=8;c+=8}if((b&4.02653184E9)===0){b<<=4;c+=4}if((b&3.221225472E9)===0){b<<=2;c+=2}if((b&2.147483648E9)===0){c++}return c};return b},'es6','es3');$jscomp.polyfill('Math.cosh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);return (b(c)+b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.expm1',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var e=b;var f=1;var c=b;var d=0;while(d!=c){e*=b/++f;c=(d=c)+e}return c}return Math.exp(b)-1};return b},'es6','es3');$jscomp.polyfill('Math.hypot',function(a){if(a){return a}var b=function(d,e,h){d=Number(d);e=Number(e);var b,g,f;var c=Math.max(Math.abs(d),Math.abs(e));for(b=2;b<arguments.length;b++){c=Math.max(c,Math.abs(arguments[b]))}if(c>1.0E100||c<1.0E-100){if(!c){return c}d=d/c;e=e/c;f=d*d+e*e;for(b=2;b<arguments.length;b++){g=Number(arguments[b])/c;f+=g*g}return Math.sqrt(f)*c}else {f=d*d+e*e;for(b=2;b<arguments.length;b++){g=Number(arguments[b]);f+=g*g}return Math.sqrt(f)}};return b},'es6','es3');$jscomp.polyfill('Math.imul',function(a){if(a){return a}var b=function(b,c){b=Number(b);c=Number(c);var f=b>>>16&65535;var d=b&65535;var g=c>>>16&65535;var e=c&65535;var h=f*e+d*g<<16>>>0;return d*e+h|0};return b},'es6','es3');$jscomp.polyfill('Math.log10',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN10};return b},'es6','es3');$jscomp.polyfill('Math.log2',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN2};return b},'es6','es3');$jscomp.polyfill('Math.sign',function(a){if(a){return a}var b=function(b){b=Number(b);return b===0||isNaN(b)?b:b>0?1:-1};return b},'es6','es3');$jscomp.polyfill('Math.sinh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);if(c===0){return c}return (b(c)-b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.tanh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.exp(-2*Math.abs(b));var d=(1-c)/(1+c);return b<0?-d:d};return b},'es6','es3');$jscomp.polyfill('Math.trunc',function(a){if(a){return a}var b=function(b){b=Number(b);if(isNaN(b)||b===Infinity||b===-Infinity||b===0){return b}var c=Math.floor(Math.abs(b));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Number.EPSILON',function(a){return Math.pow(2,-52)},'es6','es3');$jscomp.polyfill('Number.MAX_SAFE_INTEGER',function(){return 9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.MIN_SAFE_INTEGER',function(){return -9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.isFinite',function(a){if(a){return a}var b=function(b){if(typeof b!=='number'){return !1}return !isNaN(b)&&b!==Infinity&&b!==-Infinity};return b},'es6','es3');$jscomp.polyfill('Number.isInteger',function(a){if(a){return a}var b=function(b){if(!Number.isFinite(b)){return !1}return b===Math.floor(b)};return b},'es6','es3');$jscomp.polyfill('Number.isNaN',function(a){if(a){return a}var b=function(b){return typeof b==='number'&&isNaN(b)};return b},'es6','es3');$jscomp.polyfill('Number.isSafeInteger',function(a){if(a){return a}var b=function(b){return Number.isInteger(b)&&Math.abs(b)<=Number.MAX_SAFE_INTEGER};return b},'es6','es3');$jscomp.polyfill('Number.parseFloat',function(a){return a||parseFloat},'es6','es3');$jscomp.polyfill('Number.parseInt',function(a){return a||parseInt},'es6','es3');$jscomp.assign=typeof Object.assign=='function'?Object.assign:function(d,e){for(var c=1;c<arguments.length;c++){var a=arguments[c];if(!a){continue}for(var b in a){if($jscomp.owns(a,b)){d[b]=a[b]}}}return d};$jscomp.polyfill('Object.assign',function(a){return a||$jscomp.assign},'es6','es3');$jscomp.polyfill('Object.entries',function(a){if(a){return a}var b=function(c){var d=[];for(var b in c){if($jscomp.owns(c,b)){d.push([b,c[b]])}}return d};return b},'es8','es3');$jscomp.polyfill('Object.getOwnPropertySymbols',function(a){if(a){return a}return function(){return []}},'es6','es5');$jscomp.polyfill('Reflect.ownKeys',function(b){if(b){return b}var a='jscomp_symbol_';function isSymbol(c){return c.substring(0,a.length)==a}var c=function(e){var f=[];var c=Object.getOwnPropertyNames(e);var d=Object.getOwnPropertySymbols(e);for(var a=0;a<c.length;a++){(isSymbol(c[a])?d:f).push(c[a])}return f.concat(d)};return c},'es6','es5');$jscomp.polyfill('Object.getOwnPropertyDescriptors',function(a){if(a){return a}var b=function(e){var d={};var c=Reflect.ownKeys(e);for(var b=0;b<c.length;b++){d[c[b]]=Object.getOwnPropertyDescriptor(e,c[b])}return d};return b},'es8','es5');$jscomp.polyfill('Object.setPrototypeOf',function(a){return a||$jscomp.setPrototypeOf},'es6','es5');$jscomp.polyfill('Object.values',function(a){if(a){return a}var b=function(b){var c=[];for(var d in b){if($jscomp.owns(b,d)){c.push(b[d])}}return c};return b},'es8','es3');$jscomp.polyfill('Reflect.apply',function(a){if(a){return a}var c=Function.prototype.apply;var b=function(e,d,b){return c.call(e,d,b)};return b},'es6','es3');$jscomp.objectCreate=$jscomp.ASSUME_ES5||typeof Object.create=='function'?Object.create:function(b){var a=function(){};a.prototype=b;return new a()};$jscomp.construct=function(){function reflectConstructWorks(){function Base(){}function Derived(){}new Base();Reflect.construct(Base,[],Derived);return new Base() instanceof Base}if(typeof Reflect!='undefined'&&Reflect.construct){if(reflectConstructWorks()){return Reflect.construct}var b=Reflect.construct;var a=function(e,d,a){var c=b(e,d);if(a){Reflect.setPrototypeOf(c,a.prototype)}return c};return a}function construct(b,d,a){if(a===undefined){a=b}var f=a.prototype||Object.prototype;var c=$jscomp.objectCreate(f);var e=Function.prototype.apply;var g=e.call(b,c,d);return g||c}return construct}();$jscomp.polyfill('Reflect.construct',function(a){return $jscomp.construct},'es6','es3');$jscomp.polyfill('Reflect.defineProperty',function(a){if(a){return a}var b=function(e,d,c){try{Object.defineProperty(e,d,c);var b=Object.getOwnPropertyDescriptor(e,d);if(!b){return !1}return b.configurable===(c.configurable||!1)&&b.enumerable===(c.enumerable||!1)&&('value' in b?b.value===c.value&&b.writable===(c.writable||!1):b.get===c.get&&b.set===c.set)}catch(f){return !1}};return b},'es6','es5');$jscomp.polyfill('Reflect.deleteProperty',function(a){if(a){return a}var b=function(c,b){if(!$jscomp.owns(c,b)){return !0}try{return delete c[b]}catch(d){return !1}};return b},'es6','es3');$jscomp.polyfill('Reflect.getOwnPropertyDescriptor',function(a){return a||Object.getOwnPropertyDescriptor},'es6','es5');$jscomp.polyfill('Reflect.getPrototypeOf',function(a){return a||Object.getPrototypeOf},'es6','es5');$jscomp.findDescriptor=function(d,c){var a=d;while(a){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b){return b}a=Reflect.getPrototypeOf(a)}return undefined};$jscomp.polyfill('Reflect.get',function(a){if(a){return a}var b=function(d,c,e){if(arguments.length<=2){return d[c]}var b=$jscomp.findDescriptor(d,c);if(b){return b.get?b.get.call(e):b.value}return undefined};return b},'es6','es5');$jscomp.polyfill('Reflect.has',function(a){if(a){return a}var b=function(c,b){return b in c};return b},'es6','es3');$jscomp.polyfill('Reflect.isExtensible',function(a){if(a){return a}if($jscomp.ASSUME_ES5||typeof Object.isExtensible=='function'){return Object.isExtensible}return function(){return !0}},'es6','es3');$jscomp.polyfill('Reflect.preventExtensions',function(a){if(a){return a}if(!($jscomp.ASSUME_ES5||typeof Object.preventExtensions=='function')){return function(){return !1}}var b=function(b){Object.preventExtensions(b);return !Object.isExtensible(b)};return b},'es6','es3');$jscomp.polyfill('Reflect.set',function(a){if(a){return a}var b=function(b,d,e,f){var c=$jscomp.findDescriptor(b,d);if(!c){if(Reflect.isExtensible(b)){b[d]=e;return !0}return !1}if(c.set){c.set.call(arguments.length>3?f:b,e);return !0}else {if(c.writable&&!Object.isFrozen(b)){b[d]=e;return !0}}return !1};return b},'es6','es5');$jscomp.polyfill('Reflect.setPrototypeOf',function(a){if(a){return a}else {if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;var c=function(c,d){try{b(c,d);return !0}catch(e){return !1}};return c}else {return null}}},'es6','es5');$jscomp.polyfill('Set',function(b){function isConformant(){if($jscomp.ASSUME_NO_NATIVE_SET||!b||typeof b!='function'||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var d=Object.seal({x:4});var c=new b($jscomp.makeIterator([d]));if(!c.has(d)||c.size!=1||c.add(d)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2){return !1}var e=c.entries();var a=e.next();if(a.done||a.value[0]!=d||a.value[1]!=d){return !1}a=e.next();if(a.done||a.value[0]==d||a.value[0].x!=4||a.value[1]!=a.value[0]){return !1}return e.next().done}catch(f){return !1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE){return b}}else {if(isConformant()){return b}}$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map();if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}this.size=this.map_.size};a.prototype.add=function(a){a=a===0?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype['delete']=function(c){var a=this.map_['delete'](c);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};a.prototype.keys=a.prototype.values;a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(c,a){var d=this;this.map_.forEach(function(e){return c.call(a,e,e,d)})};return a},'es6','es3');$jscomp.checkStringArgs=function(a,c,b){if(a==null){throw new TypeError("The 'this' value for String.prototype."+b+' must not be null or undefined')}if(c instanceof RegExp){throw new TypeError('First argument to String.prototype.'+b+' must not be a regular expression')}return a+''};$jscomp.polyfill('String.prototype.codePointAt',function(a){if(a){return a}var b=function(b){var e=$jscomp.checkStringArgs(this,null,'codePointAt');var f=e.length;b=Number(b)||0;if(!(b>=0&&b<f)){return void 0}b=b|0;var c=e.charCodeAt(b);if(c<55296||c>56319||b+1===f){return c}var d=e.charCodeAt(b+1);if(d<56320||d>57343){return c}return (c-55296)*1024+d+9216};return b},'es6','es3');$jscomp.polyfill('String.prototype.endsWith',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'endsWith');b=b+'';if(c===void 0){c=d.length}var f=Math.max(0,Math.min(c|0,d.length));var e=b.length;while(e>0&&f>0){if(d[--f]!=b[--e]){return !1}}return e<=0};return b},'es6','es3');$jscomp.polyfill('String.fromCodePoint',function(a){if(a){return a}var b=function(e){var c='';for(var d=0;d<arguments.length;d++){var b=Number(arguments[d]);if(b<0||b>1114111||b!==Math.floor(b)){throw new RangeError('invalid_code_point '+b)}if(b<=65535){c+=String.fromCharCode(b)}else {b-=65536;c+=String.fromCharCode(b>>>10&1023|55296);c+=String.fromCharCode(b&1023|56320)}}return c};return b},'es6','es3');$jscomp.polyfill('String.prototype.includes',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'includes');return d.indexOf(b,c||0)!==-1};return b},'es6','es3');$jscomp.polyfill('String.prototype.repeat',function(a){if(a){return a}var b=function(b){var c=$jscomp.checkStringArgs(this,null,'repeat');if(b<0||b>1342177279){throw new RangeError('Invalid count value')}b=b|0;var d='';while(b){if(b&1){d+=c}if(b>>>=1){c+=c}}return d};return b},'es6','es3');$jscomp.stringPadding=function(c,a){var b=c!==undefined?String(c):' ';if(!(a>0)||!b){return ''}var d=Math.ceil(a/b.length);return b.repeat(d).substring(0,a)};$jscomp.polyfill('String.prototype.padEnd',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return b+$jscomp.stringPadding(c,e)};return b},'es8','es3');$jscomp.polyfill('String.prototype.padStart',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return $jscomp.stringPadding(c,e)+b};return b},'es8','es3');$jscomp.polyfill('String.prototype.startsWith',function(a){if(a){return a}var b=function(b,g){var c=$jscomp.checkStringArgs(this,b,'startsWith');b=b+'';var h=c.length;var e=b.length;var f=Math.max(0,Math.min(g|0,c.length));var d=0;while(d<e&&f<h){if(c[f++]!=b[d++]){return !1}}return d>=e};return b},'es6','es3');$jscomp.arrayFromIterator=function(c){var b;var a=[];while(!(b=c.next()).done){a.push(b.value)}return a};$jscomp.arrayFromIterable=function(a){if(a instanceof Array){return a}else {return $jscomp.arrayFromIterator($jscomp.makeIterator(a))}};$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var e=$jscomp.setPrototypeOf;e(a,b)}else {for(var c in b){if(c=='prototype'){continue}if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);if(d){Object.defineProperty(a,c,d)}}else {a[c]=b[c]}}}a.superClass_=b.prototype};$jscomp.polyfill('WeakSet',function(a){function isConformant(){if(!a||!Object.seal){return !1}try{var c=Object.seal({});var d=Object.seal({});var b=new a([c]);if(!b.has(c)||b.has(d)){return !1}b['delete'](c);b.add(d);return !b.has(c)&&b.has(d)}catch(e){return !1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE){return a}}else {if(isConformant()){return a}}var b=function(b){this.map_=new WeakMap();if(b){$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=$jscomp.makeIterator(b);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}};b.prototype.add=function(b){this.map_.set(b,!0);return this};b.prototype.has=function(b){return this.map_.has(b)};b.prototype['delete']=function(b){return this.map_['delete'](b)};return b},'es6','es3');try{if(Array.prototype.values.toString().indexOf('[native code]')==-1){delete Array.prototype.values}}catch(a){}(function(b,a){typeof exports==='object'&&typeof module!=='undefined'?a(exports):typeof define==='function'&&define.amd?define(['exports'],a):a(b.echarts={})})(this,function(d){var bV;if(typeof window!=='undefined'){bV=window.__DEV__}else {if(typeof global!=='undefined'){bV=global.__DEV__}}if(typeof bV==='undefined'){bV=!0}var a=bV;var mo=2311;var hY=function(){return mo++};var fa={};if(typeof navigator==='undefined'){fa={browser:{},os:{},node:!0,canvasSupported:!0,svgSupported:!0}}else {fa=detect(navigator.userAgent)}var f=fa;function detect(b){var h={};var a={};var c=b.match(/Firefox\/([\d.]+)/);var f=b.match(/MSIE\s([\d.]+)/)||b.match(/Trident\/.+?rv:(([\d.]+))/);var e=b.match(/Edge\/([\d.]+)/);var g=/micromessenger/i.test(b);if(c){a.firefox=!0;a.version=c[1]}if(f){a.ie=!0;a.version=f[1]}if(e){a.edge=!0;a.version=e[1]}if(g){a.weChat=!0}return {browser:a,os:h,node:!1,canvasSupported:!!document.createElement('canvas').getContext,svgSupported:typeof SVGRect!=='undefined',touchEventsSupported:'ontouchstart' in window&&!a.ie&&!a.edge,pointerEventsSupported:'onpointerdown' in window&&(a.edge||a.ie&&a.version>=11)}}var f6={'[object Function]':1,'[object RegExp]':1,'[object Date]':1,'[object Error]':1,'[object CanvasGradient]':1,'[object CanvasPattern]':1,'[object Image]':1,'[object Canvas]':1};var k4={'[object Int8Array]':1,'[object Uint8Array]':1,'[object Uint8ClampedArray]':1,'[object Int16Array]':1,'[object Uint16Array]':1,'[object Int32Array]':1,'[object Uint32Array]':1,'[object Float32Array]':1,'[object Float64Array]':1};var cm=Object.prototype.toString;var bC=Array.prototype;var kn=bC.forEach;var kO=bC.filter;var bz=bC.slice;var l4=bC.map;var kP=bC.reduce;var eX={};function $override(a,b){eX[a]=b}function clone(a){if(a==null||typeof a!='object'){return a}var c=a;var e=cm.call(a);if(e==='[object Array]'){c=[];for(var b=0,g=a.length;b<g;b++){c[b]=clone(a[b])}}else {if(k4[e]){var h=a.constructor;if(a.constructor.from){c=h.from(a)}else {c=new h(a.length);for(var b=0,g=a.length;b<g;b++){c[b]=clone(a[b])}}}else {if(!f6[e]&&!isPrimitive(a)&&!isDom(a)){c={};for(var f in a){if(a.hasOwnProperty(f)){c[f]=clone(a[f])}}}}}return c}function merge(e,c,g){if(!isObject(c)||!isObject(e)){return g?clone(c):e}for(var f in c){if(c.hasOwnProperty(f)){var b=e[f];var a=c[f];if(isObject(a)&&isObject(b)&&!isArray(a)&&!isArray(b)&&!isDom(a)&&!isDom(b)&&!isBuiltInObject(a)&&!isBuiltInObject(b)&&!isPrimitive(a)&&!isPrimitive(b)){merge(b,a,g)}else {if(g||!(f in e)){e[f]=clone(c[f],!0)}}}}return e}function mergeAll(a,e){var b=a[0];for(var c=1,f=a.length;c<f;c++){b=merge(b,a[c],e)}return b}function extend(c,a){for(var b in a){if(a.hasOwnProperty(b)){c[b]=a[b]}}return c}function defaults(c,b,e){for(var a in b){if(b.hasOwnProperty(a)&&(e?b[a]!=null:c[a]==null)){c[a]=b[a]}}return c}var a6=function(){return eX.createCanvas()};eX.createCanvas=function(){return document.createElement('canvas')};var e6;function getContext(){if(!e6){e6=a6().getContext('2d')}return e6}function indexOf(a,c){if(a){if(a.indexOf){return a.indexOf(c)}for(var b=0,e=a.length;b<e;b++){if(a[b]===c){return b}}}return -1}function inherits(a,c){var b=a.prototype;function F(){}F.prototype=c.prototype;a.prototype=new F();for(var e in b){a.prototype[e]=b[e]}a.prototype.constructor=a;a.superClass=c}function mixin(b,a,c){b='prototype' in b?b.prototype:b;a='prototype' in a?a.prototype:a;defaults(b,a,c)}function isArrayLike(a){if(!a){return}if(typeof a=='string'){return !1}return typeof a.length=='number'}function each$1(a,b,e){if(!(a&&b)){return}if(a.forEach&&a.forEach===kn){a.forEach(b,e)}else {if(a.length===+a.length){for(var c=0,g=a.length;c<g;c++){b.call(e,a[c],c,a)}}else {for(var f in a){if(a.hasOwnProperty(f)){b.call(e,a[f],f,a)}}}}}function map(a,c,e){if(!(a&&c)){return}if(a.map&&a.map===l4){return a.map(c,e)}else {var f=[];for(var b=0,g=a.length;b<g;b++){f.push(c.call(e,a[b],b,a))}return f}}function reduce(a,e,b,f){if(!(a&&e)){return}if(a.reduce&&a.reduce===kP){return a.reduce(e,b,f)}else {for(var c=0,g=a.length;c<g;c++){b=e.call(f,b,a[c],c,a)}return b}}function filter(a,c,e){if(!(a&&c)){return}if(a.filter&&a.filter===kO){return a.filter(c,e)}else {var f=[];for(var b=0,g=a.length;b<g;b++){if(c.call(e,a[b],b,a)){f.push(a[b])}}return f}}function find(a,c,e){if(!(a&&c)){return}for(var b=0,f=a.length;b<f;b++){if(c.call(e,a[b],b,a)){return a[b]}}}function bind(c,a){var b=bz.call(arguments,2);return function(){return c.apply(a,b.concat(bz.call(arguments)))}}function curry(b){var a=bz.call(arguments,1);return function(){return b.apply(this,a.concat(bz.call(arguments)))}}function isArray(a){return cm.call(a)==='[object Array]'}function isFunction(a){return typeof a==='function'}function isString(a){return cm.call(a)==='[object String]'}function isObject(a){var b=typeof a;return b==='function'||!!a&&b=='object'}function isBuiltInObject(a){return !!f6[cm.call(a)]}function isDom(a){return typeof a==='object'&&typeof a.nodeType==='number'&&typeof a.ownerDocument==='object'}function eqNaN(a){return a!==a}function retrieve(c){for(var a=0,b=arguments.length;a<b;a++){if(arguments[a]!=null){return arguments[a]}}}function retrieve2(a,b){return a!=null?a:b}function retrieve3(a,b,c){return a!=null?a:b!=null?b:c}function slice(){return Function.call.apply(bz,arguments)}function normalizeCssArray(a){if(typeof a==='number'){return [a,a,a,a]}var b=a.length;if(b===2){return [a[0],a[1],a[0],a[1]]}else {if(b===3){return [a[0],a[1],a[2],a[1]]}}return a}function assert(a,b){if(!a){throw new Error(b)}}var gE='__ec_primitive__';function setAsPrimitive(a){a[gE]=!0}function isPrimitive(a){return a[gE]}function HashMap(a){a&&each$1(a,function(b,c){this.set(c,b)},this)}var dA='_ec_';var ix=4;HashMap.prototype={constructor:HashMap,get:function(a){return this[dA+a]},set:function(b,a){this[dA+b]=a;return a},each:function(b,c){c!==void 0&&(b=bind(b,c));for(var a in this){this.hasOwnProperty(a)&&b(this[a],a.slice(ix))}},removeKey:function(a){delete this[dA+a]}};function createHashMap(a){return new HashMap(a)}function noop(){}var mL=(Object.freeze||Object)({$override:$override,clone:clone,merge:merge,mergeAll:mergeAll,extend:extend,defaults:defaults,createCanvas:a6,getContext:getContext,indexOf:indexOf,inherits:inherits,mixin:mixin,isArrayLike:isArrayLike,each:each$1,map:map,reduce:reduce,filter:filter,find:find,bind:bind,curry:curry,isArray:isArray,isFunction:isFunction,isString:isString,isObject:isObject,isBuiltInObject:isBuiltInObject,isDom:isDom,eqNaN:eqNaN,retrieve:retrieve,retrieve2:retrieve2,retrieve3:retrieve3,slice:slice,normalizeCssArray:normalizeCssArray,assert:assert,setAsPrimitive:setAsPrimitive,isPrimitive:isPrimitive,createHashMap:createHashMap,noop:noop});var g_=typeof Float32Array==='undefined'?Array:Float32Array;function create(b,c){var a=new g_(2);if(b==null){b=0}if(c==null){c=0}a[0]=b;a[1]=c;return a}function copy(a,b){a[0]=b[0];a[1]=b[1];return a}function clone$1(b){var a=new g_(2);a[0]=b[0];a[1]=b[1];return a}function set(a,b,c){a[0]=b;a[1]=c;return a}function add(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a}function scaleAndAdd(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;return a}function sub(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}function len(a){return Math.sqrt(lenSquare(a))}var mD=len;function lenSquare(a){return a[0]*a[0]+a[1]*a[1]}var kN=lenSquare;function mul(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a}function div(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a}function dot(a,b){return a[0]*b[0]+a[1]*b[1]}function scale(a,c,b){a[0]=c[0]*b;a[1]=c[1]*b;return a}function normalize(a,c){var b=len(c);if(b===0){a[0]=0;a[1]=0}else {a[0]=c[0]/b;a[1]=c[1]/b}return a}function distance(a,b){return Math.sqrt((a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1]))}var aZ=distance;function distanceSquare(a,b){return (a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1])}var al=distanceSquare;function negate(a,b){a[0]=-b[0];a[1]=-b[1];return a}function lerp(b,a,c,e){b[0]=a[0]+e*(c[0]-a[0]);b[1]=a[1]+e*(c[1]-a[1]);return b}function applyTransform(b,c,a){var e=c[0];var f=c[1];b[0]=a[0]*e+a[2]*f+a[4];b[1]=a[1]*e+a[3]*f+a[5];return b}function min(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a}function max(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a}var mK=(Object.freeze||Object)({create:create,copy:copy,clone:clone$1,set:set,add:add,scaleAndAdd:scaleAndAdd,sub:sub,len:len,length:mD,lenSquare:lenSquare,lengthSquare:kN,mul:mul,div:div,dot:dot,scale:scale,normalize:normalize,distance:distance,dist:aZ,distanceSquare:distanceSquare,distSquare:al,negate:negate,lerp:lerp,applyTransform:applyTransform,min:min,max:max});function Draggable(){this.on('mousedown',this._dragStart,this);this.on('mousemove',this._drag,this);this.on('mouseup',this._dragEnd,this);this.on('globalout',this._dragEnd,this)}Draggable.prototype={constructor:Draggable,_dragStart:function(b){var a=b.target;if(a&&a.draggable){this._draggingTarget=a;a.dragging=!0;this._x=b.offsetX;this._y=b.offsetY;this.dispatchToElement(param(a,b),'dragstart',b.event)}},_drag:function(a){var c=this._draggingTarget;if(c){var f=a.offsetX;var g=a.offsetY;var h=f-this._x;var i=g-this._y;this._x=f;this._y=g;c.drift(h,i,a);this.dispatchToElement(param(c,a),'drag',a.event);var b=this.findHover(f,g,c).target;var e=this._dropTarget;this._dropTarget=b;if(c!==b){if(e&&b!==e){this.dispatchToElement(param(e,a),'dragleave',a.event)}if(b&&b!==e){this.dispatchToElement(param(b,a),'dragenter',a.event)}}}},_dragEnd:function(a){var b=this._draggingTarget;if(b){b.dragging=!1}this.dispatchToElement(param(b,a),'dragend',a.event);if(this._dropTarget){this.dispatchToElement(param(this._dropTarget,a),'drop',a.event)}this._draggingTarget=null;this._dropTarget=null}};function param(b,a){return {target:b,topTarget:a&&a.topTarget}}var g3=Array.prototype.slice;var s=function(){this._$handlers={}};s.prototype={constructor:s,one:function(a,c,f){var b=this._$handlers;if(!c||!a){return this}if(!b[a]){b[a]=[]}for(var e=0;e<b[a].length;e++){if(b[a][e].h===c){return this}}b[a].push({h:c,one:!0,ctx:f||this});return this},on:function(a,c,f){var b=this._$handlers;if(!c||!a){return this}if(!b[a]){b[a]=[]}for(var e=0;e<b[a].length;e++){if(b[a][e].h===c){return this}}b[a].push({h:c,one:!1,ctx:f||this});return this},isSilent:function(a){var b=this._$handlers;return b[a]&&b[a].length},off:function(a,e){var b=this._$handlers;if(!a){this._$handlers={};return this}if(e){if(b[a]){var f=[];for(var c=0,g=b[a].length;c<g;c++){if(b[a][c]['h']!=e){f.push(b[a][c])}}b[a]=f}if(b[a]&&b[a].length===0){delete b[a]}}else {delete b[a]}return this},trigger:function(f){if(this._$handlers[f]){var c=arguments;var e=c.length;if(e>3){c=g3.call(c,1)}var b=this._$handlers[f];var g=b.length;for(var a=0;a<g;){switch(e){case 1:b[a]['h'].call(b[a]['ctx']);break;case 2:b[a]['h'].call(b[a]['ctx'],c[1]);break;case 3:b[a]['h'].call(b[a]['ctx'],c[1],c[2]);break;default:b[a]['h'].apply(b[a]['ctx'],c);break;}if(b[a]['one']){b.splice(a,1);g--}else {a++}}}return this},triggerWithContext:function(g){if(this._$handlers[g]){var a=arguments;var f=a.length;if(f>4){a=g3.call(a,1,a.length-1)}var e=a[a.length-1];var c=this._$handlers[g];var h=c.length;for(var b=0;b<h;){switch(f){case 1:c[b]['h'].call(e);break;case 2:c[b]['h'].call(e,a[1]);break;case 3:c[b]['h'].call(e,a[1],a[2]);break;default:c[b]['h'].apply(e,a);break;}if(c[b]['one']){c.splice(b,1);h--}else {b++}}}return this}};var hJ='silent';function makeEventPacket(c,b,a){return {type:c,event:a,target:b.target,topTarget:b.topTarget,cancelBubble:!1,offsetX:a.zrX,offsetY:a.zrY,gestureEvent:a.gestureEvent,pinchX:a.pinchX,pinchY:a.pinchY,pinchScale:a.pinchScale,wheelDelta:a.zrDelta,zrByTouch:a.zrByTouch,which:a.which}}function EmptyProxy(){}EmptyProxy.prototype.dispose=function(){};var kK=['click','dblclick','mousewheel','mouseout','mouseup','mousedown','mousemove','contextmenu'];var bf=function(e,c,a,b){s.call(this);this.storage=e;this.painter=c;this.painterRoot=b;a=a||new EmptyProxy();this.proxy=a;a.handler=this;this._hovered={};this._lastTouchMoment;this._lastX;this._lastY;Draggable.call(this);each$1(kK,function(f){a.on&&a.on(f,this[f],this)},this)};bf.prototype={constructor:bf,mousemove:function(e){var h=e.zrX;var i=e.zrY;var b=this._hovered;var a=b.target;if(a&&!a.__zr){b=this.findHover(b.x,b.y);a=b.target}var f=this._hovered=this.findHover(h,i);var c=f.target;var g=this.proxy;g.setCursor&&g.setCursor(c?c.cursor:'default');if(a&&c!==a){this.dispatchToElement(b,'mouseout',e)}this.dispatchToElement(f,'mousemove',e);if(c&&c!==a){this.dispatchToElement(f,'mouseover',e)}},mouseout:function(b){this.dispatchToElement(this._hovered,'mouseout',b);var a=b.toElement||b.relatedTarget;var c;do{a=a&&a.parentNode}while(a&&a.nodeType!=9&&!(c=a===this.painterRoot));!c&&this.trigger('globalout',{event:b})},resize:function(a){this._hovered={}},dispatch:function(c,b){var a=this[c];a&&a.call(this,b)},dispose:function(){this.proxy.dispose();this.storage=this.proxy=this.painter=null},setCursorStyle:function(b){var a=this.proxy;a.setCursor&&a.setCursor(b)},dispatchToElement:function(f,c,g){f=f||{};var a=f.target;if(a&&a.silent){return}var e='on'+c;var b=makeEventPacket(c,f,g);while(a){a[e]&&(b.cancelBubble=a[e].call(a,b));a.trigger(c,b);a=a.parent;if(b.cancelBubble){break}}if(!b.cancelBubble){this.trigger(c,b);this.painter&&this.painter.eachOtherLayer(function(a){if(typeof a[e]=='function'){a[e].call(a,b)}if(a.trigger){a.trigger(c,b)}})}},findHover:function(f,g,h){var b=this.storage.getDisplayList();var c={x:f,y:g};for(var a=b.length-1;a>=0;a--){var e;if(b[a]!==h&&!b[a].ignore&&(e=isHover(b[a],f,g))){!c.topTarget&&(c.topTarget=b[a]);if(e!==hJ){c.target=b[a];break}}}return c}};each$1(['click','mousedown','mouseup','mousewheel','dblclick','contextmenu'],function(a){bf.prototype[a]=function(b){var e=this.findHover(b.zrX,b.zrY);var c=e.target;if(a==='mousedown'){this._downEl=c;this._downPoint=[b.zrX,b.zrY];this._upEl=c}else {if(a==='mosueup'){this._upEl=c}else {if(a==='click'){if(this._downEl!==this._upEl||!this._downPoint||aZ(this._downPoint,[b.zrX,b.zrY])>4){return}this._downPoint=null}}}this.dispatchToElement(e,a,b)}});function isHover(b,e,f){if(b[b.rectHover?'rectContain':'contain'](e,f)){var a=b;var c;while(a){if(a.clipPath&&!a.clipPath.contain(e,f)){return !1}if(a.silent){c=!0}a=a.parent}return c?hJ:!0}return !1}mixin(bf,s);mixin(bf,Draggable);var k$=typeof Float32Array==='undefined'?Array:Float32Array;function create$1(){var a=new k$(6);identity(a);return a}function identity(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a}function copy$1(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function mul$1(c,a,b){var e=a[0]*b[0]+a[2]*b[1];var f=a[1]*b[0]+a[3]*b[1];var g=a[0]*b[2]+a[2]*b[3];var h=a[1]*b[2]+a[3]*b[3];var i=a[0]*b[4]+a[2]*b[5]+a[4];var j=a[1]*b[4]+a[3]*b[5]+a[5];c[0]=e;c[1]=f;c[2]=g;c[3]=h;c[4]=i;c[5]=j;return c}function translate(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4]+c[0];a[5]=b[5]+c[1];return a}function rotate(a,e,h){var i=e[0];var k=e[2];var f=e[4];var j=e[1];var l=e[3];var g=e[5];var c=Math.sin(h);var b=Math.cos(h);a[0]=i*b+j*c;a[1]=-i*c+j*b;a[2]=k*b+l*c;a[3]=-k*c+b*l;a[4]=b*f+c*g;a[5]=b*g-c*f;return a}function scale$1(a,b,f){var c=f[0];var e=f[1];a[0]=b[0]*c;a[1]=b[1]*e;a[2]=b[2]*c;a[3]=b[3]*e;a[4]=b[4]*c;a[5]=b[5]*e;return a}function invert(b,c){var e=c[0];var g=c[2];var i=c[4];var f=c[1];var h=c[3];var j=c[5];var a=e*h-f*g;if(!a){return null}a=1/a;b[0]=h*a;b[1]=-f*a;b[2]=-g*a;b[3]=e*a;b[4]=(g*j-h*i)*a;b[5]=(f*i-e*j)*a;return b}var mE=(Object.freeze||Object)({create:create$1,identity:identity,copy:copy$1,mul:mul$1,translate:translate,rotate:rotate,scale:scale$1,invert:invert});var es=identity;var ho=5.0E-5;function isNotAroundZero(a){return a>ho||a<-ho}var R=function(a){a=a||{};if(!a.position){this.position=[0,0]}if(a.rotation==null){this.rotation=0}if(!a.scale){this.scale=[1,1]}this.origin=this.origin||null};var P=R.prototype;P.transform=null;P.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.position[0])||isNotAroundZero(this.position[1])||isNotAroundZero(this.scale[0]-1)||isNotAroundZero(this.scale[1]-1)};P.updateTransform=function(){var b=this.parent;var e=b&&b.transform;var c=this.needLocalTransform();var a=this.transform;if(!(c||e)){a&&es(a);return}a=a||create$1();if(c){this.getLocalTransform(a)}else {es(a)}if(e){if(c){mul$1(a,b.transform,a)}else {copy$1(a,b.transform)}}this.transform=a;this.invTransform=this.invTransform||create$1();invert(this.invTransform,a)};P.getLocalTransform=function(a){return R.getLocalTransform(this,a)};P.setTransform=function(c){var b=this.transform;var a=c.dpr||1;if(b){c.setTransform(a*b[0],a*b[1],a*b[2],a*b[3],a*b[4],a*b[5])}else {c.setTransform(a,0,0,a,0,0)}};P.restoreTransform=function(a){var b=a.dpr||1;a.setTransform(b,0,0,b,0,0)};var gG=[];P.decomposeTransform=function(){if(!this.transform){return}var e=this.parent;var a=this.transform;if(e&&e.transform){mul$1(gG,e.invTransform,a);a=gG}var b=a[0]*a[0]+a[1]*a[1];var c=a[2]*a[2]+a[3]*a[3];var f=this.position;var g=this.scale;if(isNotAroundZero(b-1)){b=Math.sqrt(b)}if(isNotAroundZero(c-1)){c=Math.sqrt(c)}if(a[0]<0){b=-b}if(a[3]<0){c=-c}f[0]=a[4];f[1]=a[5];g[0]=b;g[1]=c;this.rotation=Math.atan2(-a[1]/c,a[0]/b)};P.getGlobalScale=function(){var a=this.transform;if(!a){return [1,1]}var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);var c=Math.sqrt(a[2]*a[2]+a[3]*a[3]);if(a[0]<0){b=-b}if(a[3]<0){c=-c}return [b,c]};P.transformCoordToLocal=function(c,e){var a=[c,e];var b=this.invTransform;if(b){applyTransform(a,a,b)}return a};P.transformCoordToGlobal=function(c,e){var a=[c,e];var b=this.transform;if(b){applyTransform(a,a,b)}return a};R.getLocalTransform=function(c,a){a=a||[];es(a);var b=c.origin;var g=c.scale||[1,1];var f=c.rotation||0;var e=c.position||[0,0];if(b){a[4]-=b[0];a[5]-=b[1]}scale$1(a,a,g);if(f){rotate(a,a,f)}if(b){a[4]+=b[0];a[5]+=b[1]}a[4]+=e[0];a[5]+=e[1];return a};var cY={linear:function(a){return a},quadraticIn:function(a){return a*a},quadraticOut:function(a){return a*(2-a)},quadraticInOut:function(a){if((a*=2)<1){return 0.5*a*a}return -0.5*(--a*(a-2)-1)},cubicIn:function(a){return a*a*a},cubicOut:function(a){return --a*a*a+1},cubicInOut:function(a){if((a*=2)<1){return 0.5*a*a*a}return 0.5*((a-=2)*a*a+2)},quarticIn:function(a){return a*a*a*a},quarticOut:function(a){return 1- --a*a*a*a},quarticInOut:function(a){if((a*=2)<1){return 0.5*a*a*a*a}return -0.5*((a-=2)*a*a*a-2)},quinticIn:function(a){return a*a*a*a*a},quinticOut:function(a){return --a*a*a*a*a+1},quinticInOut:function(a){if((a*=2)<1){return 0.5*a*a*a*a*a}return 0.5*((a-=2)*a*a*a*a+2)},sinusoidalIn:function(a){return 1-Math.cos(a*Math.PI/2)},sinusoidalOut:function(a){return Math.sin(a*Math.PI/2)},sinusoidalInOut:function(a){return 0.5*(1-Math.cos(Math.PI*a))},exponentialIn:function(a){return a===0?0:Math.pow(1024,a-1)},exponentialOut:function(a){return a===1?1:1-Math.pow(2,-10*a)},exponentialInOut:function(a){if(a===0){return 0}if(a===1){return 1}if((a*=2)<1){return 0.5*Math.pow(1024,a-1)}return 0.5*(-Math.pow(2,-10*(a-1))+2)},circularIn:function(a){return 1-Math.sqrt(1-a*a)},circularOut:function(a){return Math.sqrt(1- --a*a)},circularInOut:function(a){if((a*=2)<1){return -0.5*(Math.sqrt(1-a*a)-1)}return 0.5*(Math.sqrt(1-(a-=2)*a)+1)},elasticIn:function(b){var e;var a=0.1;var c=0.4;if(b===0){return 0}if(b===1){return 1}if(!a||a<1){a=1;e=c/4}else {e=c*Math.asin(1/a)/(2*Math.PI)}return -(a*Math.pow(2,10*(b-=1))*Math.sin((b-e)*(2*Math.PI)/c))},elasticOut:function(b){var e;var a=0.1;var c=0.4;if(b===0){return 0}if(b===1){return 1}if(!a||a<1){a=1;e=c/4}else {e=c*Math.asin(1/a)/(2*Math.PI)}return a*Math.pow(2,-10*b)*Math.sin((b-e)*(2*Math.PI)/c)+1},elasticInOut:function(a){var e;var b=0.1;var c=0.4;if(a===0){return 0}if(a===1){return 1}if(!b||b<1){b=1;e=c/4}else {e=c*Math.asin(1/b)/(2*Math.PI)}if((a*=2)<1){return -0.5*(b*Math.pow(2,10*(a-=1))*Math.sin((a-e)*(2*Math.PI)/c))}return b*Math.pow(2,-10*(a-=1))*Math.sin((a-e)*(2*Math.PI)/c)*0.5+1},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){var b=1.70158;return --a*a*((b+1)*a+b)+1},backInOut:function(a){var b=1.70158*1.525;if((a*=2)<1){return 0.5*(a*a*((b+1)*a-b))}return 0.5*((a-=2)*a*((b+1)*a+b)+2)},bounceIn:function(a){return 1-cY.bounceOut(1-a)},bounceOut:function(a){if(a<1/2.75){return 7.5625*a*a}else {if(a<2/2.75){return 7.5625*(a-=1.5/2.75)*a+0.75}else {if(a<2.5/2.75){return 7.5625*(a-=2.25/2.75)*a+0.9375}else {return 7.5625*(a-=2.625/2.75)*a+0.984375}}}},bounceInOut:function(a){if(a<0.5){return cY.bounceIn(a*2)*0.5}return cY.bounceOut(a*2-1)*0.5+0.5}};function Clip(a){this._target=a.target;this._life=a.life||1000;this._delay=a.delay||0;this._initialized=!1;this.loop=a.loop==null?!1:a.loop;this.gap=a.gap||0;this.easing=a.easing||'Linear';this.onframe=a.onframe;this.ondestroy=a.ondestroy;this.onrestart=a.onrestart;this._pausedTime=0;this._paused=!1}Clip.prototype={constructor:Clip,step:function(b,f){if(!this._initialized){this._startTime=b+this._delay;this._initialized=!0}if(this._paused){this._pausedTime+=f;return}var a=(b-this._startTime-this._pausedTime)/this._life;if(a<0){return}a=Math.min(a,1);var c=this.easing;var e=typeof c=='string'?cY[c]:c;var g=typeof e==='function'?e(a):a;this.fire('frame',g);if(a==1){if(this.loop){this.restart(b);return 'restart'}this._needsRemove=!0;return 'destroy'}return null},restart:function(a){var b=(a-this._startTime-this._pausedTime)%this._life;this._startTime=a-b+this.gap;this._pausedTime=0;this._needsRemove=!1},fire:function(a,b){a='on'+a;if(this[a]){this[a](this._target,b)}},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var gU=function(){this.head=null;this.tail=null;this._len=0};var bv=gU.prototype;bv.insert=function(b){var a=new hP(b);this.insertEntry(a);return a};bv.insertEntry=function(a){if(!this.head){this.head=this.tail=a}else {this.tail.next=a;a.prev=this.tail;a.next=null;this.tail=a}this._len++};bv.remove=function(a){var c=a.prev;var b=a.next;if(c){c.next=b}else {this.head=b}if(b){b.prev=c}else {this.tail=c}a.next=a.prev=null;this._len--};bv.len=function(){return this._len};bv.clear=function(){this.head=this.tail=null;this._len=0};var hP=function(a){this.value=a;this.next;this.prev};var e8=function(a){this._list=new gU();this._map={};this._maxSize=a||10;this._lastRemovedEntry=null};var eD=e8.prototype;eD.put=function(e,h){var c=this._list;var f=this._map;var g=null;if(f[e]==null){var i=c.len();var a=this._lastRemovedEntry;if(i>=this._maxSize&&i>0){var b=c.head;c.remove(b);delete f[b.key];g=b.value;this._lastRemovedEntry=b}if(a){a.value=h}else {a=new hP(h)}a.key=e;c.insertEntry(a);f[e]=a}return g};eD.get=function(c){var a=this._map[c];var b=this._list;if(a!=null){if(a!==b.tail){b.remove(a);b.insertEntry(a)}return a.value}};eD.clear=function(){this._list.clear();this._map={}};var gf={'transparent':[0,0,0,0],'aliceblue':[240,248,255,1],'antiquewhite':[250,235,215,1],'aqua':[0,255,255,1],'aquamarine':[127,255,212,1],'azure':[240,255,255,1],'beige':[245,245,220,1],'bisque':[255,228,196,1],'black':[0,0,0,1],'blanchedalmond':[255,235,205,1],'blue':[0,0,255,1],'blueviolet':[138,43,226,1],'brown':[165,42,42,1],'burlywood':[222,184,135,1],'cadetblue':[95,158,160,1],'chartreuse':[127,255,0,1],'chocolate':[210,105,30,1],'coral':[255,127,80,1],'cornflowerblue':[100,149,237,1],'cornsilk':[255,248,220,1],'crimson':[220,20,60,1],'cyan':[0,255,255,1],'darkblue':[0,0,139,1],'darkcyan':[0,139,139,1],'darkgoldenrod':[184,134,11,1],'darkgray':[169,169,169,1],'darkgreen':[0,100,0,1],'darkgrey':[169,169,169,1],'darkkhaki':[189,183,107,1],'darkmagenta':[139,0,139,1],'darkolivegreen':[85,107,47,1],'darkorange':[255,140,0,1],'darkorchid':[153,50,204,1],'darkred':[139,0,0,1],'darksalmon':[233,150,122,1],'darkseagreen':[143,188,143,1],'darkslateblue':[72,61,139,1],'darkslategray':[47,79,79,1],'darkslategrey':[47,79,79,1],'darkturquoise':[0,206,209,1],'darkviolet':[148,0,211,1],'deeppink':[255,20,147,1],'deepskyblue':[0,191,255,1],'dimgray':[105,105,105,1],'dimgrey':[105,105,105,1],'dodgerblue':[30,144,255,1],'firebrick':[178,34,34,1],'floralwhite':[255,250,240,1],'forestgreen':[34,139,34,1],'fuchsia':[255,0,255,1],'gainsboro':[220,220,220,1],'ghostwhite':[248,248,255,1],'gold':[255,215,0,1],'goldenrod':[218,165,32,1],'gray':[128,128,128,1],'green':[0,128,0,1],'greenyellow':[173,255,47,1],'grey':[128,128,128,1],'honeydew':[240,255,240,1],'hotpink':[255,105,180,1],'indianred':[205,92,92,1],'indigo':[75,0,130,1],'ivory':[255,255,240,1],'khaki':[240,230,140,1],'lavender':[230,230,250,1],'lavenderblush':[255,240,245,1],'lawngreen':[124,252,0,1],'lemonchiffon':[255,250,205,1],'lightblue':[173,216,230,1],'lightcoral':[240,128,128,1],'lightcyan':[224,255,255,1],'lightgoldenrodyellow':[250,250,210,1],'lightgray':[211,211,211,1],'lightgreen':[144,238,144,1],'lightgrey':[211,211,211,1],'lightpink':[255,182,193,1],'lightsalmon':[255,160,122,1],'lightseagreen':[32,178,170,1],'lightskyblue':[135,206,250,1],'lightslategray':[119,136,153,1],'lightslategrey':[119,136,153,1],'lightsteelblue':[176,196,222,1],'lightyellow':[255,255,224,1],'lime':[0,255,0,1],'limegreen':[50,205,50,1],'linen':[250,240,230,1],'magenta':[255,0,255,1],'maroon':[128,0,0,1],'mediumaquamarine':[102,205,170,1],'mediumblue':[0,0,205,1],'mediumorchid':[186,85,211,1],'mediumpurple':[147,112,219,1],'mediumseagreen':[60,179,113,1],'mediumslateblue':[123,104,238,1],'mediumspringgreen':[0,250,154,1],'mediumturquoise':[72,209,204,1],'mediumvioletred':[199,21,133,1],'midnightblue':[25,25,112,1],'mintcream':[245,255,250,1],'mistyrose':[255,228,225,1],'moccasin':[255,228,181,1],'navajowhite':[255,222,173,1],'navy':[0,0,128,1],'oldlace':[253,245,230,1],'olive':[128,128,0,1],'olivedrab':[107,142,35,1],'orange':[255,165,0,1],'orangered':[255,69,0,1],'orchid':[218,112,214,1],'palegoldenrod':[238,232,170,1],'palegreen':[152,251,152,1],'paleturquoise':[175,238,238,1],'palevioletred':[219,112,147,1],'papayawhip':[255,239,213,1],'peachpuff':[255,218,185,1],'peru':[205,133,63,1],'pink':[255,192,203,1],'plum':[221,160,221,1],'powderblue':[176,224,230,1],'purple':[128,0,128,1],'red':[255,0,0,1],'rosybrown':[188,143,143,1],'royalblue':[65,105,225,1],'saddlebrown':[139,69,19,1],'salmon':[250,128,114,1],'sandybrown':[244,164,96,1],'seagreen':[46,139,87,1],'seashell':[255,245,238,1],'sienna':[160,82,45,1],'silver':[192,192,192,1],'skyblue':[135,206,235,1],'slateblue':[106,90,205,1],'slategray':[112,128,144,1],'slategrey':[112,128,144,1],'snow':[255,250,250,1],'springgreen':[0,255,127,1],'steelblue':[70,130,180,1],'tan':[210,180,140,1],'teal':[0,128,128,1],'thistle':[216,191,216,1],'tomato':[255,99,71,1],'turquoise':[64,224,208,1],'violet':[238,130,238,1],'wheat':[245,222,179,1],'white':[255,255,255,1],'whitesmoke':[245,245,245,1],'yellow':[255,255,0,1],'yellowgreen':[154,205,50,1]};function clampCssByte(a){a=Math.round(a);return a<0?0:a>255?255:a}function clampCssAngle(a){a=Math.round(a);return a<0?0:a>360?360:a}function clampCssFloat(a){return a<0?0:a>1?1:a}function parseCssInt(a){if(a.length&&a.charAt(a.length-1)==='%'){return clampCssByte(parseFloat(a)/100*255)}return clampCssByte(parseInt(a,10))}function parseCssFloat(a){if(a.length&&a.charAt(a.length-1)==='%'){return clampCssFloat(parseFloat(a)/100)}return clampCssFloat(parseFloat(a))}function cssHueToRgb(b,c,a){if(a<0){a+=1}else {if(a>1){a-=1}}if(a*6<1){return b+(c-b)*a*6}if(a*2<1){return c}if(a*3<2){return b+(c-b)*(2/3-a)*6}return b}function lerpNumber(a,b,c){return a+(b-a)*c}function setRgba(a,f,e,c,b){a[0]=f;a[1]=e;a[2]=c;a[3]=b;return a}function copyRgba(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}var gX=new e8(20);var cc=null;function putToCache(b,a){if(cc){copyRgba(cc,a)}cc=gX.put(b,cc||a.slice())}function parse(f,a){if(!f){return}a=a||[];var h=gX.get(f);if(h){return copyRgba(a,h)}f=f+'';var e=f.replace(/ /g,'').toLowerCase();if(e in gf){copyRgba(a,gf[e]);putToCache(f,a);return a}if(e.charAt(0)==='#'){if(e.length===4){var b=parseInt(e.substr(1),16);if(!(b>=0&&b<=4095)){setRgba(a,0,0,0,1);return}setRgba(a,(b&3840)>>4|(b&3840)>>8,b&240|(b&240)>>4,b&15|(b&15)<<4,1);putToCache(f,a);return a}else {if(e.length===7){var b=parseInt(e.substr(1),16);if(!(b>=0&&b<=16777215)){setRgba(a,0,0,0,1);return}setRgba(a,(b&16711680)>>16,(b&65280)>>8,b&255,1);putToCache(f,a);return a}}return}var g=e.indexOf('('),j=e.indexOf(')');if(g!==-1&&j+1===e.length){var k=e.substr(0,g);var c=e.substr(g+1,j-(g+1)).split(',');var i=1;switch(k){case 'rgba':if(c.length!==4){setRgba(a,0,0,0,1);return};i=parseCssFloat(c.pop());case 'rgb':if(c.length!==3){setRgba(a,0,0,0,1);return};setRgba(a,parseCssInt(c[0]),parseCssInt(c[1]),parseCssInt(c[2]),i);putToCache(f,a);return a;case 'hsla':if(c.length!==4){setRgba(a,0,0,0,1);return};c[3]=parseCssFloat(c[3]);hsla2rgba(c,a);putToCache(f,a);return a;case 'hsl':if(c.length!==3){setRgba(a,0,0,0,1);return};hsla2rgba(c,a);putToCache(f,a);return a;default:return;}}setRgba(a,0,0,0,1);return}function hsla2rgba(a,b){var g=(parseFloat(a[0])%360+360)%360/360;var h=parseCssFloat(a[1]);var c=parseCssFloat(a[2]);var e=c<=0.5?c*(h+1):c+h-c*h;var f=c*2-e;b=b||[];setRgba(b,clampCssByte(cssHueToRgb(f,e,g+1/3)*255),clampCssByte(cssHueToRgb(f,e,g)*255),clampCssByte(cssHueToRgb(f,e,g-1/3)*255),1);if(a.length===4){b[3]=a[3]}return b}function rgba2hsla(e){if(!e){return}var i=e[0]/255;var h=e[1]/255;var g=e[2]/255;var f=Math.min(i,h,g);var a=Math.max(i,h,g);var b=a-f;var o=(a+f)/2;var c;var j;if(b===0){c=0;j=0}else {if(o<0.5){j=b/(a+f)}else {j=b/(2-a-f)}var m=((a-i)/6+b/2)/b;var l=((a-h)/6+b/2)/b;var k=((a-g)/6+b/2)/b;if(i===a){c=k-l}else {if(h===a){c=1/3+m-k}else {if(g===a){c=2/3+l-m}}}if(c<0){c+=1}if(c>1){c-=1}}var n=[c*360,j,o];if(e[3]!=null){n.push(e[3])}return n}function lift(e,c){var a=parse(e);if(a){for(var b=0;b<3;b++){if(c<0){a[b]=a[b]*(1-c)|0}else {a[b]=(255-a[b])*c+a[b]|0}}return stringify(a,a.length===4?'rgba':'rgb')}}function toHex(b){var a=parse(b);if(a){return ((1<<24)+(a[0]<<16)+(a[1]<<8)+ +a[2]).toString(16).slice(1)}}function fastLerp(g,b,a){if(!(b&&b.length)||!(g>=0&&g<=1)){return}a=a||[];var h=g*(b.length-1);var i=Math.floor(h);var j=Math.ceil(h);var e=b[i];var c=b[j];var f=h-i;a[0]=clampCssByte(lerpNumber(e[0],c[0],f));a[1]=clampCssByte(lerpNumber(e[1],c[1],f));a[2]=clampCssByte(lerpNumber(e[2],c[2],f));a[3]=clampCssFloat(lerpNumber(e[3],c[3],f));return a}var j2=fastLerp;function lerp$1(g,a,k){if(!(a&&a.length)||!(g>=0&&g<=1)){return}var e=g*(a.length-1);var h=Math.floor(e);var i=Math.ceil(e);var c=parse(a[h]);var b=parse(a[i]);var f=e-h;var j=stringify([clampCssByte(lerpNumber(c[0],b[0],f)),clampCssByte(lerpNumber(c[1],b[1],f)),clampCssByte(lerpNumber(c[2],b[2],f)),clampCssFloat(lerpNumber(c[3],b[3],f))],'rgba');return k?{color:j,leftIndex:h,rightIndex:i,value:e}:j}var lG=lerp$1;function modifyHSL(a,b,e,c){a=parse(a);if(a){a=rgba2hsla(a);b!=null&&(a[0]=clampCssAngle(b));e!=null&&(a[1]=parseCssFloat(e));c!=null&&(a[2]=parseCssFloat(c));return stringify(hsla2rgba(a),'rgba')}}function modifyAlpha(a,b){a=parse(a);if(a&&b!=null){a[3]=clampCssFloat(b);return stringify(a,'rgba')}}function stringify(a,b){if(!a||!a.length){return}var c=a[0]+','+a[1]+','+a[2];if(b==='rgba'||b==='hsva'||b==='hsla'){c+=','+a[3]}return b+'('+c+')'}var mQ=(Object.freeze||Object)({parse:parse,lift:lift,toHex:toHex,fastLerp:fastLerp,fastMapToColor:j2,lerp:lerp$1,mapToColor:lG,modifyHSL:modifyHSL,modifyAlpha:modifyAlpha,stringify:stringify});var ec=Array.prototype.slice;function defaultGetter(a,b){return a[b]}function defaultSetter(a,c,b){a[c]=b}function interpolateNumber(a,c,b){return (c-a)*b+a}function interpolateString(b,c,a){return a>0.5?c:b}function interpolateArray(c,h,f,g,i){var e=c.length;if(i==1){for(var a=0;a<e;a++){g[a]=interpolateNumber(c[a],h[a],f)}}else {var j=e&&c[0].length;for(var a=0;a<e;a++){for(var b=0;b<j;b++){g[a][b]=interpolateNumber(c[a][b],h[a][b],f)}}}}function fillArr(b,c,h){var g=b.length;var f=c.length;if(g!==f){var i=g>f;if(i){b.length=f}else {for(var a=g;a<f;a++){b.push(h===1?c[a]:ec.call(c[a]))}}}var j=b[0]&&b[0].length;for(var a=0;a<b.length;a++){if(h===1){if(isNaN(b[a])){b[a]=c[a]}}else {for(var e=0;e<j;e++){if(isNaN(b[a][e])){b[a][e]=c[a][e]}}}}}function isArraySame(b,c,g){if(b===c){return !0}var f=b.length;if(f!==c.length){return !1}if(g===1){for(var a=0;a<f;a++){if(b[a]!==c[a]){return !1}}}else {var h=b[0].length;for(var a=0;a<f;a++){for(var e=0;e<h;e++){if(b[a][e]!==c[a][e]){return !1}}}}return !0}function catmullRomInterpolateArray(c,g,h,i,l,j,k,f,m){var e=c.length;if(m==1){for(var a=0;a<e;a++){f[a]=catmullRomInterpolate(c[a],g[a],h[a],i[a],l,j,k)}}else {var n=c[0].length;for(var a=0;a<e;a++){for(var b=0;b<n;b++){f[a][b]=catmullRomInterpolate(c[a][b],g[a][b],h[a][b],i[a][b],l,j,k)}}}}function catmullRomInterpolate(f,a,b,g,j,h,i){var c=(b-f)*0.5;var e=(g-a)*0.5;return (2*(a-b)+c+e)*i+(-3*(a-b)-2*c-e)*h+c*j+a}function cloneValue(a){if(isArrayLike(a)){var e=a.length;if(isArrayLike(a[0])){var c=[];for(var b=0;b<e;b++){c.push(ec.call(a[b]))}return c}return ec.call(a)}return a}function rgba2String(a){a[0]=Math.floor(a[0]);a[1]=Math.floor(a[1]);a[2]=Math.floor(a[2]);return 'rgba('+a.join(',')+')'}function getArrayDim(a){var b=a[a.length-1].value;return isArrayLike(b&&b[0])?2:1}function createTrackClip(j,r,G,f,l,F){var y=j._getter;var C=j._setter;var H=r==='spline';var c=f.length;if(!c){return}var I=f[0].value;var g=isArrayLike(I);var k=!1;var p=!1;var m=g?getArrayDim(f):0;var v;f.sort(function(a,b){return a.time-b.time});v=f[c-1].time;var i=[];var b=[];var x=f[0].value;var A=!0;for(var e=0;e<c;e++){i.push(f[e].time/v);var h=f[e].value;if(!(g&&isArraySame(h,x,m)||!g&&h===x)){A=!1}x=h;if(typeof h=='string'){var B=parse(h);if(B){h=B;k=!0}else {p=!0}}b.push(h)}if(!F&&A){return}var q=b[c-1];for(var e=0;e<c-1;e++){if(g){fillArr(b[e],q,m)}else {if(isNaN(b[e])&&!isNaN(q)&&!p&&!k){b[e]=q}}}g&&fillArr(y(j._target,l),q,m);var w=0;var z=0;var D;var a;var t;var n;var o;var u;if(k){var s=[0,0,0,0]}var J=function(v,q){var e;if(q<0){e=0}else {if(q<z){D=Math.min(w+1,c-1);for(e=D;e>=0;e--){if(i[e]<=q){break}}e=Math.min(e,c-2)}else {for(e=w;e<c;e++){if(i[e]>q){break}}e=Math.min(e-1,c-2)}}w=e;z=q;var x=i[e+1]-i[e];if(x===0){return}else {a=(q-i[e])/x}if(H){n=b[e];t=b[e===0?e:e-1];o=b[e>c-2?c-1:e+1];u=b[e>c-3?c-1:e+2];if(g){catmullRomInterpolateArray(t,n,o,u,a,a*a,a*a*a,y(v,l),m)}else {var h;if(k){h=catmullRomInterpolateArray(t,n,o,u,a,a*a,a*a*a,s,1);h=rgba2String(s)}else {if(p){return interpolateString(n,o,a)}else {h=catmullRomInterpolate(t,n,o,u,a,a*a,a*a*a)}}C(v,l,h)}}else {if(g){interpolateArray(b[e],b[e+1],a,y(v,l),m)}else {var h;if(k){interpolateArray(b[e],b[e+1],a,s,1);h=rgba2String(s)}else {if(p){return interpolateString(b[e],b[e+1],a)}else {h=interpolateNumber(b[e],b[e+1],a)}}C(v,l,h)}}};var E=new Clip({target:j._target,life:v,loop:j._loop,delay:j._delay,onframe:J,ondestroy:G});if(r&&r!=='spline'){E.easing=r}return E}var eC=function(c,e,a,b){this._tracks={};this._target=c;this._loop=e||!1;this._getter=a||defaultGetter;this._setter=b||defaultSetter;this._clipCount=0;this._delay=0;this._doneList=[];this._onframeList=[];this._clipList=[]};eC.prototype={when:function(f,c){var b=this._tracks;for(var a in c){if(!c.hasOwnProperty(a)){continue}if(!b[a]){b[a]=[];var e=this._getter(this._target,a);if(e==null){continue}if(f!==0){b[a].push({time:0,value:cloneValue(e)})}}b[a].push({time:f,value:c[a]})}return this},during:function(a){this._onframeList.push(a);return this},pause:function(){for(var a=0;a<this._clipList.length;a++){this._clipList[a].pause()}this._paused=!0},resume:function(){for(var a=0;a<this._clipList.length;a++){this._clipList[a].resume()}this._paused=!1},isPaused:function(){return !!this._paused},_doneCallback:function(){this._tracks={};this._clipList.length=0;var b=this._doneList;var c=b.length;for(var a=0;a<c;a++){b[a].call(this)}},start:function(j,g){var f=this;var a=0;var h=function(){a--;if(!a){f._doneCallback()}};var b;for(var e in this._tracks){if(!this._tracks.hasOwnProperty(e)){continue}var c=createTrackClip(this,j,h,this._tracks[e],e,g);if(c){this._clipList.push(c);a++;if(this.animation){this.animation.addClip(c)}b=c}}if(b){var i=b.onframe;b.onframe=function(c,b){i(c,b);for(var a=0;a<f._onframeList.length;a++){f._onframeList[a](c,b)}}}if(!a){this._doneCallback()}return this},stop:function(f){var a=this._clipList;var c=this.animation;for(var b=0;b<a.length;b++){var e=a[b];if(f){e.onframe(this._target,1)}c&&c.removeClip(e)}a.length=0},delay:function(a){this._delay=a;return this},done:function(a){if(a){this._doneList.push(a)}return this},getClips:function(){return this._clipList}};var h3=1;if(typeof window!=='undefined'){h3=Math.max(window.devicePixelRatio||1,1)}var g4=0;var b4=h3;var fd=function(){};if(g4===1){fd=function(){for(var a in arguments){throw new Error(arguments[a])}}}else {if(g4>1){fd=function(){for(var a in arguments){console.log(arguments[a])}}}}var ay=fd;var cn=function(){this.animators=[]};cn.prototype={constructor:cn,animate:function(h,l){var e;var j=!1;var c=this;var k=this.__zr;if(h){var f=h.split('.');var b=c;j=f[0]==='shape';for(var i=0,m=f.length;i<m;i++){if(!b){continue}b=b[f[i]]}if(b){e=b}}else {e=c}if(!e){ay('Property "'+h+'" is not existed in element '+c.id);return}var g=c.animators;var a=new eC(e,l);a.during(function(a){c.dirty(j)}).done(function(){g.splice(indexOf(g,a),1)});g.push(a);if(k){k.animation.addAnimator(a)}return a},stopAnimation:function(c){var a=this.animators;var e=a.length;for(var b=0;b<e;b++){a[b].stop(c)}a.length=0;return this},animateTo:function(j,e,b,c,a,i){if(isString(b)){a=c;c=b;b=0}else {if(isFunction(c)){a=c;c='linear';b=0}else {if(isFunction(b)){a=b;b=0}else {if(isFunction(e)){a=e;e=500}else {if(!e){e=500}}}}}this.stopAnimation();this._animateToShallow('',this,j,e,b);var f=this.animators.slice();var g=f.length;function done(){g--;if(!g){a&&a()}}if(!g){a&&a()}for(var h=0;h<f.length;h++){f[h].done(done).start(c,i)}},_animateToShallow:function(c,i,b,f,j){var h={};var g=0;for(var a in b){if(!b.hasOwnProperty(a)){continue}if(i[a]!=null){if(isObject(b[a])&&!isArrayLike(b[a])){this._animateToShallow(c?c+'.'+a:a,i[a],b[a],f,j)}else {h[a]=b[a];g++}}else {if(b[a]!=null){if(!c){this.attr(a,b[a])}else {var e={};e[c]={};e[c][a]=b[a];this.attr(e)}}}}if(g>0){this.animate(c,!1).when(f==null?500:f,h).delay(j||0)}return this}};var af=function(a){R.call(this,a);s.call(this,a);cn.call(this,a);this.id=a.id||hY()};af.prototype={type:'element',name:'',__zr:null,ignore:!1,clipPath:null,drift:function(b,c){switch(this.draggable){case 'horizontal':c=0;break;case 'vertical':b=0;break;}var a=this.transform;if(!a){a=this.transform=[1,0,0,1,0,0]}a[4]+=b;a[5]+=c;this.decomposeTransform();this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(b,a){},attrKV:function(a,c){if(a==='position'||a==='scale'||a==='origin'){if(c){var b=this[a];if(!b){b=this[a]=[]}b[0]=c[0];b[1]=c[1]}}else {this[a]=c}},hide:function(){this.ignore=!0;this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1;this.__zr&&this.__zr.refresh()},attr:function(a,c){if(typeof a==='string'){this.attrKV(a,c)}else {if(isObject(a)){for(var b in a){if(a.hasOwnProperty(b)){this.attrKV(b,a[b])}}}}this.dirty(!1);return this},setClipPath:function(a){var b=this.__zr;if(b){a.addSelfToZr(b)}if(this.clipPath&&this.clipPath!==a){this.removeClipPath()}this.clipPath=a;a.__zr=b;a.__clipTarget=this;this.dirty(!1)},removeClipPath:function(){var a=this.clipPath;if(a){if(a.__zr){a.removeSelfFromZr(a.__zr)}a.__zr=null;a.__clipTarget=null;this.clipPath=null;this.dirty(!1)}},addSelfToZr:function(b){this.__zr=b;var a=this.animators;if(a){for(var c=0;c<a.length;c++){b.animation.addAnimator(a[c])}}if(this.clipPath){this.clipPath.addSelfToZr(b)}},removeSelfFromZr:function(c){this.__zr=null;var a=this.animators;if(a){for(var b=0;b<a.length;b++){c.animation.removeAnimator(a[b])}}if(this.clipPath){this.clipPath.removeSelfFromZr(c)}}};mixin(af,cn);mixin(af,R);mixin(af,s);var b5=applyTransform;var cN=Math.min;var cM=Math.max;function BoundingRect(c,e,b,a){if(b<0){c=c+b;b=-b}if(a<0){e=e+a;a=-a}this.x=c;this.y=e;this.width=b;this.height=a}BoundingRect.prototype={constructor:BoundingRect,union:function(a){var b=cN(a.x,this.x);var c=cN(a.y,this.y);this.width=cM(a.x+a.width,this.x+this.width)-b;this.height=cM(a.y+a.height,this.y+this.height)-c;this.x=b;this.y=c},applyTransform:function(){var b=[];var c=[];var a=[];var e=[];return function(f){if(!f){return}b[0]=a[0]=this.x;b[1]=e[1]=this.y;c[0]=e[0]=this.x+this.width;c[1]=a[1]=this.y+this.height;b5(b,b,f);b5(c,c,f);b5(a,a,f);b5(e,e,f);this.x=cN(b[0],c[0],a[0],e[0]);this.y=cN(b[1],c[1],a[1],e[1]);var g=cM(b[0],c[0],a[0],e[0]);var h=cM(b[1],c[1],a[1],e[1]);this.width=g-this.x;this.height=h-this.y}}(),calculateTransform:function(c){var b=this;var e=c.width/b.width;var f=c.height/b.height;var a=create$1();translate(a,a,[-b.x,-b.y]);scale$1(a,a,[e,f]);translate(a,a,[c.x,c.y]);return a},intersect:function(a){if(!a){return !1}if(!(a instanceof BoundingRect)){a=BoundingRect.create(a)}var b=this;var c=b.x;var e=b.x+b.width;var f=b.y;var g=b.y+b.height;var h=a.x;var i=a.x+a.width;var j=a.y;var k=a.y+a.height;return !(e<h||i<c||g<j||k<f)},contain:function(b,c){var a=this;return b>=a.x&&b<=a.x+a.width&&c>=a.y&&c<=a.y+a.height},clone:function(){return new BoundingRect(this.x,this.y,this.width,this.height)},copy:function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height},plain:function(){return {x:this.x,y:this.y,width:this.width,height:this.height}}};BoundingRect.create=function(a){return new BoundingRect(a.x,a.y,a.width,a.height)};var b=function(a){a=a||{};af.call(this,a);for(var b in a){if(a.hasOwnProperty(b)){this[b]=a[b]}}this._children=[];this.__storage=null;this.__dirty=!0};b.prototype={constructor:b,isGroup:!0,type:'group',silent:!1,children:function(){return this._children.slice()},childAt:function(a){return this._children[a]},childOfName:function(c){var b=this._children;for(var a=0;a<b.length;a++){if(b[a].name===c){return b[a]}}},childCount:function(){return this._children.length},add:function(a){if(a&&a!==this&&a.parent!==this){this._children.push(a);this._doAdd(a)}return this},addBefore:function(a,b){if(a&&a!==this&&a.parent!==this&&b&&b.parent===this){var c=this._children;var e=c.indexOf(b);if(e>=0){c.splice(e,0,a);this._doAdd(a)}}return this},_doAdd:function(a){if(a.parent){a.parent.remove(a)}a.parent=this;var c=this.__storage;var e=this.__zr;if(c&&c!==a.__storage){c.addToStorage(a);if(a instanceof b){a.addChildrenToStorage(c)}}e&&e.refresh()},remove:function(a){var g=this.__zr;var c=this.__storage;var e=this._children;var f=indexOf(e,a);if(f<0){return this}e.splice(f,1);a.parent=null;if(c){c.delFromStorage(a);if(a instanceof b){a.delChildrenFromStorage(c)}}g&&g.refresh();return this},removeAll:function(){var e=this._children;var f=this.__storage;var a;var c;for(c=0;c<e.length;c++){a=e[c];if(f){f.delFromStorage(a);if(a instanceof b){a.delChildrenFromStorage(f)}}a.parent=null}e.length=0;return this},eachChild:function(f,c){var b=this._children;for(var a=0;a<b.length;a++){var e=b[a];f.call(c,e,a)}return this},traverse:function(e,c){for(var b=0;b<this._children.length;b++){var a=this._children[b];e.call(c,a);if(a.type==='group'){a.traverse(e,c)}}return this},addChildrenToStorage:function(e){for(var c=0;c<this._children.length;c++){var a=this._children[c];e.addToStorage(a);if(a instanceof b){a.addChildrenToStorage(e)}}},delChildrenFromStorage:function(e){for(var c=0;c<this._children.length;c++){var a=this._children[c];e.delFromStorage(a);if(a instanceof b){a.delChildrenFromStorage(e)}}},dirty:function(){this.__dirty=!0;this.__zr&&this.__zr.refresh();return this},getBoundingRect:function(i){var a=null;var b=new BoundingRect(0,0,0,0);var h=i||this._children;var j=[];for(var f=0;f<h.length;f++){var c=h[f];if(c.ignore||c.invisible){continue}var e=c.getBoundingRect();var g=c.getLocalTransform(j);if(g){b.copy(e);b.applyTransform(g);a=a||b.clone();a.union(b)}else {a=a||e.clone();a.union(e)}}return a||b}};inherits(b,af);var fK=32;var bt=7;function minRunLength(a){var b=0;while(a>=fK){b|=a&1;a>>=1}return a+b}function makeAscendingRun(b,c,f,e){var a=c+1;if(a===f){return 1}if(e(b[a++],b[c])<0){while(a<f&&e(b[a],b[a-1])<0){a++}reverseRun(b,c,a)}else {while(a<f&&e(b[a],b[a-1])>=0){a++}}return a-c}function reverseRun(a,c,b){b--;while(c<b){var e=a[c];a[c++]=a[b];a[b--]=e}}function binaryInsertionSort(b,i,k,c,j){if(c===i){c++}for(;c<k;c++){var h=b[c];var a=i;var g=c;var f;while(a<g){f=a+g>>>1;if(j(h,b[f])<0){g=f}else {a=f+1}}var e=c-a;switch(e){case 3:b[a+3]=b[a+2];case 2:b[a+2]=b[a+1];case 1:b[a+1]=b[a];break;default:while(e>0){b[a+e]=b[a+e-1];e--};}b[a]=h}}function gallopLeft(i,g,h,k,e,f){var b=0;var c=0;var a=1;if(f(i,g[h+e])>0){c=k-e;while(a<c&&f(i,g[h+e+a])>0){b=a;a=(a<<1)+1;if(a<=0){a=c}}if(a>c){a=c}b+=e;a+=e}else {c=e+1;while(a<c&&f(i,g[h+e-a])<=0){b=a;a=(a<<1)+1;if(a<=0){a=c}}if(a>c){a=c}var l=b;b=e-a;a=e-l}b++;while(b<a){var j=b+(a-b>>>1);if(f(i,g[h+j])>0){b=j+1}else {a=j}}return a}function gallopRight(i,g,h,k,e,f){var b=0;var c=0;var a=1;if(f(i,g[h+e])<0){c=e+1;while(a<c&&f(i,g[h+e-a])<0){b=a;a=(a<<1)+1;if(a<=0){a=c}}if(a>c){a=c}var l=b;b=e-a;a=e-l}else {c=k-e;while(a<c&&f(i,g[h+e+a])>=0){b=a;a=(a<<1)+1;if(a<=0){a=c}}if(a>c){a=c}b+=e;a+=e}b++;while(b<a){var j=b+(a-b>>>1);if(f(i,g[h+j])<0){a=j}else {b=j+1}}return a}function TimSort(a,g){var f=bt;var h;var c;var e=0;var b=[];h=[];c=[];function pushRun(f,b){h[e]=f;c[e]=b;e+=1}function mergeRuns(){while(e>1){var b=e-2;if(b>=1&&c[b-1]<=c[b]+c[b+1]||b>=2&&c[b-2]<=c[b]+c[b-1]){if(c[b-1]<c[b+1]){b--}}else {if(c[b]>c[b+1]){break}}mergeAt(b)}}function forceMergeRuns(){while(e>1){var b=e-2;if(b>0&&c[b-1]<c[b+1]){b--}mergeAt(b)}}function mergeAt(b){var j=h[b];var f=c[b];var k=h[b+1];var i=c[b+1];c[b]=f+i;if(b===e-3){h[b+1]=h[b+2];c[b+1]=c[b+2]}e--;var l=gallopRight(a[k],a,j,f,0,g);j+=l;f-=l;if(f===0){return}i=gallopLeft(a[j+f-1],a,k,i,i-1,g);if(i===0){return}if(f<=i){mergeLow(j,f,k,i)}else {mergeHigh(j,f,k,i)}}function mergeLow(p,i,q,m){var c=0;for(c=0;c<i;c++){b[c]=a[p+c]}var h=0;var l=q;var e=p;a[e++]=a[l++];if(--m===0){for(c=0;c<i;c++){a[e+c]=b[h+c]}return}if(i===1){for(c=0;c<m;c++){a[e+c]=a[l+c]}a[e+m]=b[h];return}var o=f;var j,k,n;while(1){j=0;k=0;n=!1;do{if(g(a[l],b[h])<0){a[e++]=a[l++];k++;j=0;if(--m===0){n=!0;break}}else {a[e++]=b[h++];j++;k=0;if(--i===1){n=!0;break}}}while((j|k)<o);if(n){break}do{j=gallopRight(a[l],b,h,i,0,g);if(j!==0){for(c=0;c<j;c++){a[e+c]=b[h+c]}e+=j;h+=j;i-=j;if(i<=1){n=!0;break}}a[e++]=a[l++];if(--m===0){n=!0;break}k=gallopLeft(b[h],a,l,m,0,g);if(k!==0){for(c=0;c<k;c++){a[e+c]=a[l+c]}e+=k;l+=k;m-=k;if(m===0){n=!0;break}}a[e++]=b[h++];if(--i===1){n=!0;break}o--}while(j>=bt||k>=bt);if(n){break}if(o<0){o=0}o+=2}f=o;f<1&&(f=1);if(i===1){for(c=0;c<m;c++){a[e+c]=a[l+c]}a[e+m]=b[h]}else {if(i===0){throw new Error()}else {for(c=0;c<i;c++){a[e+c]=b[h+c]}}}}function mergeHigh(r,i,s,e){var c=0;for(c=0;c<e;c++){b[c]=a[s+c]}var k=r+i-1;var o=e-1;var h=s+e-1;var j=0;var n=0;a[h--]=a[k--];if(--i===0){j=h-(e-1);for(c=0;c<e;c++){a[j+c]=b[c]}return}if(e===1){h-=i;k-=i;n=h+1;j=k+1;for(c=i-1;c>=0;c--){a[n+c]=a[j+c]}a[h]=b[o];return}var q=f;while(!0){var l=0;var m=0;var p=!1;do{if(g(b[o],a[k])<0){a[h--]=a[k--];l++;m=0;if(--i===0){p=!0;break}}else {a[h--]=b[o--];m++;l=0;if(--e===1){p=!0;break}}}while((l|m)<q);if(p){break}do{l=i-gallopRight(b[o],a,r,i,i-1,g);if(l!==0){h-=l;k-=l;i-=l;n=h+1;j=k+1;for(c=l-1;c>=0;c--){a[n+c]=a[j+c]}if(i===0){p=!0;break}}a[h--]=b[o--];if(--e===1){p=!0;break}m=e-gallopLeft(a[k],b,0,e,e-1,g);if(m!==0){h-=m;o-=m;e-=m;n=h+1;j=o+1;for(c=0;c<m;c++){a[n+c]=b[j+c]}if(e<=1){p=!0;break}}a[h--]=a[k--];if(--i===0){p=!0;break}q--}while(l>=bt||m>=bt);if(p){break}if(q<0){q=0}q+=2}f=q;if(f<1){f=1}if(e===1){h-=i;k-=i;n=h+1;j=k+1;for(c=i-1;c>=0;c--){a[n+c]=a[j+c]}a[h]=b[o]}else {if(e===0){throw new Error()}else {j=h-(e-1);for(c=0;c<e;c++){a[j+c]=b[c]}}}}this.mergeRuns=mergeRuns;this.forceMergeRuns=forceMergeRuns;this.pushRun=pushRun}function sort(e,g,a,f){if(!a){a=0}if(!f){f=e.length}var c=f-a;if(c<2){return}var b=0;if(c<fK){b=makeAscendingRun(e,a,f,g);binaryInsertionSort(e,a,f,a+b,g);return}var j=new TimSort(e,g);var i=minRunLength(c);do{b=makeAscendingRun(e,a,f,g);if(b<i){var h=c;if(h>i){h=i}binaryInsertionSort(e,a,a+h,a+b,g);b=h}j.pushRun(a,b);j.mergeRuns();c-=b;a+=b}while(c!==0);j.forceMergeRuns()}function shapeCompareFunc(a,b){if(a.zlevel===b.zlevel){if(a.z===b.z){return a.z2-b.z2}return a.z-b.z}return a.zlevel-b.zlevel}var eO=function(){this._roots=[];this._displayList=[];this._displayListLen=0};eO.prototype={constructor:eO,traverse:function(c,b){for(var a=0;a<this._roots.length;a++){this._roots[a].traverse(c,b)}},getDisplayList:function(b,a){a=a||!1;if(b){this.updateDisplayList(a)}return this._displayList},updateDisplayList:function(e){this._displayListLen=0;var c=this._roots;var b=this._displayList;for(var a=0,g=c.length;a<g;a++){this._updateAndAddDisplayable(c[a],null,e)}b.length=this._displayListLen;f.canvasSupported&&sort(b,shapeCompareFunc)},_updateAndAddDisplayable:function(a,c,h){if(a.ignore&&!h){return}a.beforeUpdate();if(a.__dirty){a.update()}a.afterUpdate();var f=a.clipPath;if(f){if(c){c=c.slice()}else {c=[]}var b=f;var g=a;while(b){b.parent=g;b.updateTransform();c.push(b);g=b;b=b.clipPath}}if(a.isGroup){var i=a._children;for(var e=0;e<i.length;e++){var j=i[e];if(a.__dirty){j.__dirty=!0}this._updateAndAddDisplayable(j,c,h)}a.__dirty=!1}else {a.__clipPaths=c;this._displayList[this._displayListLen++]=a}},addRoot:function(a){if(a.__storage===this){return}if(a instanceof b){a.addChildrenToStorage(this)}this.addToStorage(a);this._roots.push(a)},delRoot:function(a){if(a==null){for(var c=0;c<this._roots.length;c++){var e=this._roots[c];if(e instanceof b){e.delChildrenFromStorage(this)}}this._roots=[];this._displayList=[];this._displayListLen=0;return}if(a instanceof Array){for(var c=0,g=a.length;c<g;c++){this.delRoot(a[c])}return}var f=indexOf(this._roots,a);if(f>=0){this.delFromStorage(a);this._roots.splice(f,1);if(a instanceof b){a.delChildrenFromStorage(this)}}},addToStorage:function(a){a.__storage=this;a.dirty(!1);return this},delFromStorage:function(a){if(a){a.__storage=null}return this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:shapeCompareFunc};var b1=[['shadowBlur',0],['shadowOffsetX',0],['shadowOffsetY',0],['shadowColor','#000'],['lineCap','butt'],['lineJoin','miter'],['miterLimit',10]];var aW=function(b,a){this.extendFrom(b,!1);this.host=a};function createLinearGradient(i,a,b){var f=a.x==null?0:a.x;var c=a.x2==null?1:a.x2;var g=a.y==null?0:a.y;var e=a.y2==null?0:a.y2;if(!a.global){f=f*b.width+b.x;c=c*b.width+b.x;g=g*b.height+b.y;e=e*b.height+b.y}var h=i.createLinearGradient(f,g,c,e);return h}function createRadialGradient(j,a,b){var h=b.width;var g=b.height;var k=Math.min(h,g);var c=a.x==null?0.5:a.x;var e=a.y==null?0.5:a.y;var f=a.r==null?0.5:a.r;if(!a.global){c=c*h+b.x;e=e*g+b.y;f=f*k}var i=j.createRadialGradient(c,e,0,c,e,f);return i}aW.prototype={constructor:aW,host:null,fill:'#000',stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:'#000',textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:'inside',textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:'transparent',textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:'transparent',textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(c,g,i){var a=this;var b=i&&i.style;var e=!b;for(var h=0;h<b1.length;h++){var j=b1[h];var f=j[0];if(e||a[f]!==b[f]){c[f]=a[f]||j[1]}}if(e||a.fill!==b.fill){c.fillStyle=a.fill}if(e||a.stroke!==b.stroke){c.strokeStyle=a.stroke}if(e||a.opacity!==b.opacity){c.globalAlpha=a.opacity==null?1:a.opacity}if(e||a.blend!==b.blend){c.globalCompositeOperation=a.blend||'source-over'}if(this.hasStroke()){var k=a.lineWidth;c.lineWidth=k/(this.strokeNoScale&&g&&g.getLineScale?g.getLineScale():1)}},hasFill:function(){var a=this.fill;return a!=null&&a!=='none'},hasStroke:function(){var a=this.stroke;return a!=null&&a!=='none'&&this.lineWidth>0},extendFrom:function(a,c){if(a){for(var b in a){if(a.hasOwnProperty(b)&&(c===!0||(c===!1?!this.hasOwnProperty(b):a[b]!=null))){this[b]=a[b]}}}},set:function(a,b){if(typeof a==='string'){this[a]=b}else {this.extendFrom(a,!0)}},clone:function(){var a=new this.constructor();a.extendFrom(this,!0);return a},getGradient:function(h,c,g){var f=c.type==='radial'?createRadialGradient:createLinearGradient;var e=f(h,c,g);var b=c.colorStops;for(var a=0;a<b.length;a++){e.addColorStop(b[a].offset,b[a].color)}return e}};var ej=aW.prototype;for(var fi=0;fi<b1.length;fi++){var e7=b1[fi];if(!(e7[0] in ej)){ej[e7[0]]=e7[1]}}aW.getGradient=ej.getGradient;var eN=function(b,a){this.image=b;this.repeat=a;this.type='pattern'};eN.prototype.getCanvasPattern=function(a){return a.createPattern(this.image,this.repeat||'repeat')};function returnFalse(){return !1}function createDom(h,c,g){var b=a6();var f=c.getWidth();var e=c.getHeight();var a=b.style;a.position='absolute';a.left=0;a.top=0;a.width=f+'px';a.height=e+'px';b.width=f*g;b.height=e*g;b.setAttribute('data-zr-dom-id',h);return b}var bn=function(c,f,e){var b;e=e||b4;if(typeof c==='string'){b=createDom(c,f,e)}else {if(isObject(c)){b=c;c=b.id}}this.id=c;this.dom=b;var a=b.style;if(a){b.onselectstart=returnFalse;a['-webkit-user-select']='none';a['user-select']='none';a['-webkit-touch-callout']='none';a['-webkit-tap-highlight-color']='rgba(0,0,0,0)';a['padding']=0;a['margin']=0;a['border-width']=0}this.domBack=null;this.ctxBack=null;this.painter=f;this.config=null;this.clearColor=0;this.motionBlur=!1;this.lastFrameAlpha=0.7;this.dpr=e};bn.prototype={constructor:bn,elCount:0,__dirty:!0,initContext:function(){this.ctx=this.dom.getContext('2d');this.ctx.__currentValues={};this.ctx.dpr=this.dpr},createBackBuffer:function(){var a=this.dpr;this.domBack=createDom('back-'+this.id,this.painter,a);this.ctxBack=this.domBack.getContext('2d');this.ctxBack.__currentValues={};if(a!=1){this.ctxBack.scale(a,a)}},resize:function(e,c){var a=this.dpr;var f=this.dom;var g=f.style;var b=this.domBack;g.width=e+'px';g.height=c+'px';f.width=e*a;f.height=c*a;if(b){b.width=e*a;b.height=c*a;if(a!=1){this.ctxBack.scale(a,a)}}},clear:function(k){var g=this.dom;var a=this.ctx;var e=g.width;var c=g.height;var b=this.clearColor;var h=this.motionBlur&&!k;var j=this.lastFrameAlpha;var i=this.dpr;if(h){if(!this.domBack){this.createBackBuffer()}this.ctxBack.globalCompositeOperation='copy';this.ctxBack.drawImage(g,0,0,e/i,c/i)}a.clearRect(0,0,e,c);if(b){var f;if(b.colorStops){f=b.__canvasGradient||aW.getGradient(a,b,{x:0,y:0,width:e,height:c});b.__canvasGradient=f}else {if(b.image){f=eN.prototype.getCanvasPattern.call(b,a)}}a.save();a.fillStyle=f||b;a.fillRect(0,0,e,c);a.restore()}if(h){var l=this.domBack;a.save();a.globalAlpha=j;a.drawImage(l,0,0,e,c);a.restore()}}};var bY=typeof window!=='undefined'&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(a){setTimeout(a,16)};var dv=new e8(50);function findExistImage(a){if(typeof a==='string'){var b=dv.get(a);return b&&b.image}else {return a}}function createOrUpdateImage(b,a,f,h,g){if(!b){return a}else {if(typeof b==='string'){if(a&&a.__zrImageSrc===b||!f){return a}var c=dv.get(b);var e={hostEl:f,cb:h,cbPayload:g};if(c){a=c.image;!isImageReady(a)&&c.pending.push(e)}else {!a&&(a=new Image());a.onload=imageOnLoad;dv.put(b,a.__cachedImgObj={image:a,pending:[e]});a.src=a.__zrImageSrc=b}return a}else {return b}}}function imageOnLoad(){var a=this.__cachedImgObj;this.onload=this.__cachedImgObj=null;for(var c=0;c<a.pending.length;c++){var b=a.pending[c];var e=b.cb;e&&e(this,b.cbPayload);b.hostEl.dirty()}a.pending.length=0}function isImageReady(a){return a&&a.width&&a.height}var cd={};var c9=0;var jV=5000;var em=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;var bx='12px sans-serif';var ex={};function $override$1(a,b){ex[a]=b}function getWidth(g,b){b=b||bx;var c=g+':'+b;if(cd[c]){return cd[c]}var f=(g+'').split('\n');var a=0;for(var e=0,h=f.length;e<h;e++){a=Math.max(measureText(f[e],b).width,a)}if(c9>jV){c9=0;cd={}}c9++;cd[c]=a;return a}function getBoundingRect(h,f,c,a,b,g,e){return g?getRichTextRect(h,f,c,a,b,g,e):getPlainTextRect(h,f,c,a,b,e)}function getPlainTextRect(h,f,j,i,a,k){var c=parsePlainText(h,f,a,k);var b=getWidth(h,f);if(a){b+=a[1]+a[3]}var e=c.outerHeight;var l=adjustTextX(0,b,j);var m=adjustTextY(0,e,i);var g=new BoundingRect(l,m,b,e);g.lineHeight=c.lineHeight;return g}function getRichTextRect(k,i,e,f,g,j,h){var a=parseRichText(k,{rich:j,truncate:h,font:i,textAlign:e,textPadding:g});var c=a.outerWidth;var b=a.outerHeight;var l=adjustTextX(0,c,e);var m=adjustTextY(0,b,f);return new BoundingRect(l,m,c,b)}function adjustTextX(a,c,b){if(b==='right'){a-=c}else {if(b==='center'){a-=c/2}}return a}function adjustTextY(a,c,b){if(b==='middle'){a-=c/2}else {if(b==='bottom'){a-=c}}return a}function adjustTextPositionOnRect(k,j,a){var b=j.x;var c=j.y;var i=j.height;var g=j.width;var h=i/2;var f='left';var e='top';switch(k){case 'left':b-=a;c+=h;f='right';e='middle';break;case 'right':b+=a+g;c+=h;e='middle';break;case 'top':b+=g/2;c-=a;f='center';e='bottom';break;case 'bottom':b+=g/2;c+=i+a;f='center';break;case 'inside':b+=g/2;c+=h;f='center';e='middle';break;case 'insideLeft':b+=a;c+=h;e='middle';break;case 'insideRight':b+=g-a;c+=h;f='right';e='middle';break;case 'insideTop':b+=g/2;c+=a;f='center';break;case 'insideBottom':b+=g/2;c+=i-a;f='center';e='bottom';break;case 'insideTopLeft':b+=a;c+=a;break;case 'insideTopRight':b+=g-a;c+=a;f='right';break;case 'insideBottomLeft':b+=a;c+=i-a;e='bottom';break;case 'insideBottomRight':b+=g-a;c+=i-a;f='right';e='bottom';break;}return {x:b,y:c,textAlign:f,textVerticalAlign:e}}function truncateText(h,e,g,f,c){if(!e){return ''}var a=(h+'').split('\n');c=prepareTruncateOptions(e,g,f,c);for(var b=0,i=a.length;b<i;b++){a[b]=truncateSingleLine(a[b],c)}return a.join('\n')}function prepareTruncateOptions(e,g,c,a){a=extend({},a);a.font=g;var c=retrieve2(c,'...');a.maxIterations=retrieve2(a.maxIterations,2);var j=a.minChar=retrieve2(a.minChar,0);a.cnCharWidth=getWidth('',g);var h=a.ascCharWidth=getWidth('a',g);a.placeholder=retrieve2(a.placeholder,'');var b=e=Math.max(0,e-1);for(var i=0;i<j&&b>=h;i++){b-=h}var f=getWidth(c);if(f>b){c='';f=0}b=e-f;a.ellipsis=c;a.ellipsisWidth=f;a.contentWidth=b;a.containerWidth=e;return a}function truncateSingleLine(a,b){var g=b.containerWidth;var h=b.font;var e=b.contentWidth;if(!g){return ''}var c=getWidth(a,h);if(c<=g){return a}for(var f=0;;f++){if(c<=e||f>=b.maxIterations){a+=b.ellipsis;break}var i=f===0?estimateLength(a,e,b.ascCharWidth,b.cnCharWidth):c>0?Math.floor(a.length*e/c):0;a=a.substr(0,i);c=getWidth(a,h)}if(a===''){a=b.placeholder}return a}function estimateLength(e,g,f,h){var c=0;var a=0;for(var i=e.length;a<i&&c<g;a++){var b=e.charCodeAt(a);c+=0<=b&&b<=127?f:h}return a}function getLineHeight(a){return getWidth('',a)}function measureText(b,a){return ex.measureText(b,a)}ex.measureText=function(c,b){var a=getContext();a.font=b||bx;return a.measureText(c)};function parsePlainText(e,l,b,a){e!=null&&(e+='');var j=getLineHeight(l);var c=e?e.split('\n'):[];var k=c.length*j;var g=k;if(b){g+=b[0]+b[2]}if(e&&a){var h=a.outerHeight;var i=a.outerWidth;if(h!=null&&g>h){e='';c=[]}else {if(i!=null){var m=prepareTruncateOptions(i-(b?b[1]+b[3]:0),l,a.ellipsis,{minChar:a.minChar,placeholder:a.placeholder});for(var f=0,n=c.length;f<n;f++){c[f]=truncateSingleLine(c[f],m)}}}}return {lines:c,height:k,outerHeight:g,lineHeight:j}}function parseRichText(h,g){var c={lines:[],width:0,height:0};h!=null&&(h+='');if(!h){return c}var m=em.lastIndex=0;var v;while((v=em.exec(h))!=null){var D=v.index;if(D>m){pushTokens(c,h.substring(m,D))}pushTokens(c,v[2],v[1]);m=em.lastIndex}if(m<h.length){pushTokens(c,h.substring(m,h.length))}var E=c.lines;var y=0;var q=0;var z=[];var f=g.textPadding;var k=g.truncate;var p=k&&k.outerWidth;var o=k&&k.outerHeight;if(f){p!=null&&(p-=f[1]+f[3]);o!=null&&(o-=f[0]+f[2])}for(var i=0;i<E.length;i++){var x=E[i];var s=0;var t=0;for(var A=0;A<x.tokens.length;A++){var a=x.tokens[A];var e=a.styleName&&g.rich[a.styleName]||{};var j=a.textPadding=e.textPadding;var w=a.font=e.font||g.font;var r=a.textHeight=retrieve2(e.textHeight,getLineHeight(w));j&&(r+=j[0]+j[2]);a.height=r;a.lineHeight=retrieve3(e.textLineHeight,g.textLineHeight,r);a.textAlign=e&&e.textAlign||g.textAlign;a.textVerticalAlign=e&&e.textVerticalAlign||'middle';if(o!=null&&y+a.lineHeight>o){return {lines:[],width:0,height:0}}a.textWidth=getWidth(a.text,w);var b=e.textWidth;var B=b==null||b==='auto';if(typeof b==='string'&&b.charAt(b.length-1)==='%'){a.percentWidth=b;z.push(a);b=0}else {if(B){b=a.textWidth;var C=e.textBackgroundColor;var l=C&&C.image;if(l){l=findExistImage(l);if(isImageReady(l)){b=Math.max(b,l.width*r/l.height)}}}var u=j?j[1]+j[3]:0;b+=u;var n=p!=null?p-t:null;if(n!=null&&n<b){if(!B||n<u){a.text='';a.textWidth=b=0}else {a.text=truncateText(a.text,n-u,w,k.ellipsis,{minChar:k.minChar});a.textWidth=getWidth(a.text,w);b=a.textWidth+u}}}t+=a.width=b;e&&(s=Math.max(s,a.lineHeight))}x.width=t;x.lineHeight=s;y+=s;q=Math.max(q,t)}c.outerWidth=c.width=retrieve2(g.textWidth,q);c.outerHeight=c.height=retrieve2(g.textHeight,y);if(f){c.outerWidth+=f[1]+f[3];c.outerHeight+=f[0]+f[2]}for(var i=0;i<z.length;i++){var a=z[i];var F=a.percentWidth;a.width=parseInt(F,10)/100*q}return c}function pushTokens(l,j,k){var g=j==='';var i=j.split('\n');var b=l.lines;for(var c=0;c<i.length;c++){var f=i[c];var e={styleName:k,text:f,isLineHolder:!f&&!g};if(!c){var a=(b[b.length-1]||(b[0]={tokens:[]})).tokens;var h=a.length;h===1&&a[0].isLineHolder?a[0]=e:(f||!h||g)&&a.push(e)}else {b.push({tokens:[e]})}}}function makeFont(a){return (a.fontSize||a.fontFamily)&&[a.fontStyle,a.fontWeight,(a.fontSize||12)+'px',a.fontFamily||'sans-serif'].join(' ')||a.textFont||a.font}function buildPath(l,m){var i=m.x;var j=m.y;var b=m.width;var a=m.height;var e=m.r;var c;var f;var g;var h;if(b<0){i=i+b;b=-b}if(a<0){j=j+a;a=-a}if(typeof e==='number'){c=f=g=h=e}else {if(e instanceof Array){if(e.length===1){c=f=g=h=e[0]}else {if(e.length===2){c=g=e[0];f=h=e[1]}else {if(e.length===3){c=e[0];f=h=e[1];g=e[2]}else {c=e[0];f=e[1];g=e[2];h=e[3]}}}}else {c=f=g=h=0}}var k;if(c+f>b){k=c+f;c*=b/k;f*=b/k}if(g+h>b){k=g+h;g*=b/k;h*=b/k}if(f+g>a){k=f+g;f*=a/k;g*=a/k}if(c+h>a){k=c+h;c*=a/k;h*=a/k}l.moveTo(i+c,j);l.lineTo(i+b-f,j);f!==0&&l.quadraticCurveTo(i+b,j,i+b,j+f);l.lineTo(i+b,j+a-g);g!==0&&l.quadraticCurveTo(i+b,j+a,i+b-g,j+a);l.lineTo(i+h,j+a);h!==0&&l.quadraticCurveTo(i,j+a,i,j+a-h);l.lineTo(i,j+c);c!==0&&l.quadraticCurveTo(i,j,i+c,j)}var jm={left:1,right:1,center:1};var ie={top:1,bottom:1,middle:1};function normalizeTextStyle(a){normalizeStyle(a);each$1(a.rich,normalizeStyle);return a}function normalizeStyle(a){if(a){a.font=makeFont(a);var c=a.textAlign;c==='middle'&&(c='center');a.textAlign=c==null||jm[c]?c:'left';var b=a.textVerticalAlign||a.textBaseline;b==='center'&&(b='middle');a.textVerticalAlign=b==null||ie[b]?b:'top';var e=a.textPadding;if(e){a.textPadding=normalizeCssArray(a.textPadding)}}}function renderText(b,f,e,a,c){a.rich?renderRichText(b,f,e,a,c):renderPlainText(b,f,e,a,c)}function renderPlainText(h,b,y,a,x){var w=setCtx(b,'font',a.font||bx);var c=a.textPadding;var e=h.__textCotentBlock;if(!e||h.__dirty){e=h.__textCotentBlock=parsePlainText(y,w,c,a.truncate)}var k=e.outerHeight;var o=e.lines;var s=e.lineHeight;var g=getBoxPosition(k,a,x);var i=g.baseX;var u=g.baseY;var n=g.textAlign;var z=g.textVerticalAlign;applyTextRotation(b,a,x,i,u);var v=adjustTextY(u,k,z);var q=i;var f=v;var t=needDrawBackground(a);if(t||c){var A=getWidth(y,w);var l=A;c&&(l+=c[1]+c[3]);var B=adjustTextX(i,l,n);t&&drawBackground(h,b,a,B,v,l,k);if(c){q=getTextXForPadding(i,n,c);f+=c[0]}}setCtx(b,'textAlign',n||'left');setCtx(b,'textBaseline','middle');setCtx(b,'shadowBlur',a.textShadowBlur||0);setCtx(b,'shadowColor',a.textShadowColor||'transparent');setCtx(b,'shadowOffsetX',a.textShadowOffsetX||0);setCtx(b,'shadowOffsetY',a.textShadowOffsetY||0);f+=s/2;var r=a.textStrokeWidth;var m=getStroke(a.textStroke,r);var p=getFill(a.textFill);if(m){setCtx(b,'lineWidth',r);setCtx(b,'strokeStyle',m)}if(p){setCtx(b,'fillStyle',p)}for(var j=0;j<o.length;j++){m&&b.strokeText(o[j],q,f);p&&b.fillText(o[j],q,f);f+=s}}function renderRichText(a,g,f,c,e){var b=a.__textCotentBlock;if(!b||a.__dirty){b=a.__textCotentBlock=parseRichText(f,c)}drawRichText(a,g,b,c,e)}function drawRichText(l,h,f,b,C){var u=f.width;var v=f.outerWidth;var o=f.outerHeight;var p=b.textPadding;var k=getBoxPosition(o,b,C);var y=k.baseX;var z=k.baseY;var E=k.textAlign;var D=k.textVerticalAlign;applyTextRotation(h,b,C,y,z);var A=adjustTextX(y,v,E);var B=adjustTextY(z,o,D);var n=A;var g=B;if(p){n+=p[3];g+=p[0]}var x=n+u;needDrawBackground(b)&&drawBackground(l,h,b,A,B,v,o);for(var t=0;t<f.lines.length;t++){var s=f.lines[t];var m=s.tokens;var w=m.length;var i=s.lineHeight;var r=s.width;var c=0;var e=n;var q=x;var j=w-1;var a;while(c<w&&(a=m[c],!a.textAlign||a.textAlign==='left')){placeToken(l,h,a,b,i,g,e,'left');r-=a.width;e+=a.width;c++}while(j>=0&&(a=m[j],a.textAlign==='right')){placeToken(l,h,a,b,i,g,q,'right');r-=a.width;q-=a.width;j--}e+=(u-(e-n)-(x-q)-r)/2;while(c<=j){a=m[c];placeToken(l,h,a,b,i,g,e+a.width/2,'center');e+=a.width;c++}g+=i}}function applyTextRotation(g,f,a,c,e){if(a&&f.textRotation){var b=f.textOrigin;if(b==='center'){c=a.width/2+a.x;e=a.height/2+a.y}else {if(b){c=b[0]+a.x;e=b[1]+a.y}}g.translate(c,e);g.rotate(-f.textRotation);g.translate(-c,-e)}}function placeToken(p,b,a,e,m,j,f,h){var c=e.rich[a.styleName]||{};var k=a.textVerticalAlign;var g=j+m/2;if(k==='top'){g=j+a.height/2}else {if(k==='bottom'){g=j+m-a.height/2}}!a.isLineHolder&&needDrawBackground(c)&&drawBackground(p,b,c,h==='right'?f-a.width:h==='center'?f-a.width/2:f,g-a.height/2,a.width,a.height);var i=a.textPadding;if(i){f=getTextXForPadding(f,h,i);g-=a.height/2-i[2]-a.textHeight/2}setCtx(b,'shadowBlur',retrieve3(c.textShadowBlur,e.textShadowBlur,0));setCtx(b,'shadowColor',c.textShadowColor||e.textShadowColor||'transparent');setCtx(b,'shadowOffsetX',retrieve3(c.textShadowOffsetX,e.textShadowOffsetX,0));setCtx(b,'shadowOffsetY',retrieve3(c.textShadowOffsetY,e.textShadowOffsetY,0));setCtx(b,'textAlign',h);setCtx(b,'textBaseline','middle');setCtx(b,'font',a.font||bx);var n=getStroke(c.textStroke||e.textStroke,l);var o=getFill(c.textFill||e.textFill);var l=retrieve2(c.textStrokeWidth,e.textStrokeWidth);if(n){setCtx(b,'lineWidth',l);setCtx(b,'strokeStyle',n);b.strokeText(a.text,f,g)}if(o){setCtx(b,'fillStyle',o);b.fillText(a.text,f,g)}}function needDrawBackground(a){return a.textBackgroundColor||a.textBorderWidth&&a.textBorderColor}function drawBackground(n,a,b,j,k,i,h){var c=b.textBackgroundColor;var g=b.textBorderWidth;var f=b.textBorderColor;var m=isString(c);setCtx(a,'shadowBlur',b.textBoxShadowBlur||0);setCtx(a,'shadowColor',b.textBoxShadowColor||'transparent');setCtx(a,'shadowOffsetX',b.textBoxShadowOffsetX||0);setCtx(a,'shadowOffsetY',b.textBoxShadowOffsetY||0);if(m||g&&f){a.beginPath();var l=b.textBorderRadius;if(!l){a.rect(j,k,i,h)}else {buildPath(a,{x:j,y:k,width:i,height:h,r:l})}a.closePath()}if(m){setCtx(a,'fillStyle',c);a.fill()}else {if(isObject(c)){var e=c.image;e=createOrUpdateImage(e,null,n,onBgImageLoaded,c);if(e&&isImageReady(e)){a.drawImage(e,j,k,i,h)}}}if(g&&f){setCtx(a,'lineWidth',g);setCtx(a,'strokeStyle',f);a.stroke()}}function onBgImageLoaded(b,a){a.image=b}function getBoxPosition(k,a,b){var e=a.x||0;var f=a.y||0;var j=a.textAlign;var h=a.textVerticalAlign;if(b){var c=a.textPosition;if(c instanceof Array){e=b.x+parsePercent(c[0],b.width);f=b.y+parsePercent(c[1],b.height)}else {var g=adjustTextPositionOnRect(c,b,a.textDistance);e=g.x;f=g.y;j=j||g.textAlign;h=h||g.textVerticalAlign}var i=a.textOffset;if(i){e+=i[0];f+=i[1]}}return {baseX:e,baseY:f,textAlign:j,textVerticalAlign:h}}function setCtx(b,a,c){b[a]=c;return b[a]}function getStroke(a,b){return a==null||b<=0||a==='transparent'||a==='none'?null:a.image||a.colorStops?'#000':a}function getFill(a){return a==null||a==='none'?null:a.image||a.colorStops?'#000':a}function parsePercent(a,b){if(typeof a==='string'){if(a.lastIndexOf('%')>=0){return parseFloat(a)/100*b}return parseFloat(a)}return a}function getTextXForPadding(b,c,a){return c==='right'?b-a[1]:c==='center'?b+a[3]/2-a[1]/2:b+a[3]}function needDrawText(b,a){return b!=null&&(b||a.textBackgroundColor||a.textBorderWidth&&a.textBorderColor||a.textPadding)}var ey=new BoundingRect();var cI=function(){};cI.prototype={constructor:cI,drawRectText:function(e,b){var a=this.style;b=a.textRect||b;this.__dirty&&normalizeTextStyle(a,!0);var c=a.text;c!=null&&(c+='');if(!needDrawText(c,a)){return}e.save();var f=this.transform;if(!a.transformText){if(f){ey.copy(b);ey.applyTransform(f);b=ey}}else {this.setTransform(e)}renderText(this,e,c,a,b);e.restore()}};function Displayable(a){a=a||{};af.call(this,a);for(var b in a){if(a.hasOwnProperty(b)&&b!=='style'){this[b]=a[b]}}this.style=new aW(a.style,this);this._rect=null;this.__clipPaths=[]}Displayable.prototype={constructor:Displayable,type:'displayable',__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:'pointer',rectHover:!1,progressive:-1,beforeBrush:function(a){},afterBrush:function(a){},brush:function(b,a){},getBoundingRect:function(){},contain:function(a,b){return this.rectContain(a,b)},traverse:function(b,a){b.call(a,this)},rectContain:function(c,e){var a=this.transformCoordToLocal(c,e);var b=this.getBoundingRect();return b.contain(a[0],a[1])},dirty:function(){this.__dirty=!0;this._rect=null;this.__zr&&this.__zr.refresh()},animateStyle:function(a){return this.animate('style',a)},attrKV:function(b,a){if(b!=='style'){af.prototype.attrKV.call(this,b,a)}else {this.style.set(a)}},setStyle:function(b,a){this.style.set(b,a);this.dirty(!1);return this},useStyle:function(a){this.style=new aW(a,this);this.dirty(!1);return this}};inherits(Displayable,af);mixin(Displayable,cI);function ZImage(a){Displayable.call(this,a)}ZImage.prototype={constructor:ZImage,type:'image',brush:function(f,m){var a=this.style;var o=a.image;a.bind(f,this,m);var e=this._image=createOrUpdateImage(o,this._image,this,this.onload);if(!e||!isImageReady(e)){return}var i=a.x||0;var j=a.y||0;var c=a.width;var b=a.height;var k=e.width/e.height;if(c==null&&b!=null){c=b*k}else {if(b==null&&c!=null){b=c/k}else {if(c==null&&b==null){c=e.width;b=e.height}}}this.setTransform(f);if(a.sWidth&&a.sHeight){var g=a.sx||0;var h=a.sy||0;f.drawImage(e,g,h,a.sWidth,a.sHeight,i,j,c,b)}else {if(a.sx&&a.sy){var g=a.sx;var h=a.sy;var n=c-g;var l=b-h;f.drawImage(e,g,h,n,l,i,j,c,b)}else {f.drawImage(e,i,j,c,b)}}this.restoreTransform(f);if(a.text!=null){this.drawRectText(f,this.getBoundingRect())}},getBoundingRect:function(){var a=this.style;if(!this._rect){this._rect=new BoundingRect(a.x||0,a.y||0,a.width||0,a.height||0)}return this._rect}};inherits(ZImage,Displayable);var c6=5;function parseInt10(a){return parseInt(a,10)}function isLayerValid(a){if(!a){return !1}if(a.__builtin__){return !0}if(typeof a.resize!=='function'||typeof a.refresh!=='function'){return !1}return !0}function preProcessLayer(a){a.__unusedCount++}function postProcessLayer(a){if(a.__unusedCount==1){a.clear()}}var eZ=new BoundingRect(0,0,0,0);var eK=new BoundingRect(0,0,0,0);function isDisplayableCulled(a,c,b){eZ.copy(a.getBoundingRect());if(a.transform){eZ.applyTransform(a.transform)}eK.width=c;eK.height=b;return !eZ.intersect(eK)}function isClipPathChanged(a,b){if(a==b){return !1}if(!a||!b||a.length!==b.length){return !0}for(var c=0;c<a.length;c++){if(a[c]!==b[c]){return !0}}}function doClip(e,a){for(var c=0;c<e.length;c++){var b=e[c];b.setTransform(a);a.beginPath();b.buildPath(a,b.shape);a.clip();b.restoreTransform(a)}}function createRoot(c,b){var a=document.createElement('div');a.style.cssText=['position:relative','overflow:hidden','width:'+c+'px','height:'+b+'px','padding:0','margin:0','border-width:0'].join(';')+';';return a}var eM=function(a,i,b){this.type='canvas';var e=!a.nodeName||a.nodeName.toUpperCase()==='CANVAS';this._opts=b=extend({},b||{});this.dpr=b.devicePixelRatio||b4;this._singleCanvas=e;this.root=a;var c=a.style;if(c){c['-webkit-tap-highlight-color']='transparent';c['-webkit-user-select']=c['user-select']=c['-webkit-touch-callout']='none';a.innerHTML=''}this.storage=i;var g=this._zlevelList=[];var k=this._layers={};this._layerConfig={};if(!e){this._width=this._getSize(0);this._height=this._getSize(1);var h=this._domRoot=createRoot(this._width,this._height);a.appendChild(h)}else {if(b.width!=null){a.width=b.width}if(b.height!=null){a.height=b.height}var l=a.width;var j=a.height;this._width=l;this._height=j;var f=new bn(a,this,1);f.initContext();k[0]=f;g.push(0);this._domRoot=a}this._progressiveLayers=[];this._hoverlayer;this._hoverElements=[]};eM.prototype={constructor:eM,getType:function(){return 'canvas'},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var a=this.getViewportRoot();if(a){return {offsetLeft:a.offsetLeft||0,offsetTop:a.offsetTop||0}}},refresh:function(e){var f=this.storage.getDisplayList(!0);var c=this._zlevelList;this._paintList(f,e);for(var b=0;b<c.length;b++){var g=c[b];var a=this._layers[g];if(!a.__builtin__&&a.refresh){a.refresh()}}this.refreshHover();if(this._progressiveLayers.length){this._startProgessive()}return this},addHover:function(a,c){if(a.__hoverMir){return}var b=new a.constructor({style:a.style,shape:a.shape});b.__from=a;a.__hoverMir=b;b.setStyle(c);this._hoverElements.push(b)},removeHover:function(c){var e=c.__hoverMir;var a=this._hoverElements;var b=indexOf(a,e);if(b>=0){a.splice(b,1)}c.__hoverMir=null},clearHover:function(e){var a=this._hoverElements;for(var b=0;b<a.length;b++){var c=a[b].__from;if(c){c.__hoverMir=null}}a.length=0},refreshHover:function(){var e=this._hoverElements;var g=e.length;var a=this._hoverlayer;a&&a.clear();if(!g){return}sort(e,this.storage.displayableSortFunc);if(!a){a=this._hoverlayer=this.getLayer(100000)}var h={};a.ctx.save();for(var f=0;f<g;){var c=e[f];var b=c.__from;if(!(b&&b.__zr)){e.splice(f,1);b.__hoverMir=null;g--;continue}f++;if(!b.invisible){c.transform=b.transform;c.invTransform=b.invTransform;c.__clipPaths=b.__clipPaths;this._doPaintEl(c,a,!0,h)}}a.ctx.restore()},_startProgessive:function(){var a=this;if(!a._furtherProgressive){return}var b=a._progressiveToken=+new Date();a._progress++;bY(step);function step(){if(b===a._progressiveToken&&a.storage){a._doPaintList(a.storage.getDisplayList());if(a._furtherProgressive){a._progress++;bY(step)}else {a._progressiveToken=-1}}}},_clearProgressive:function(){this._progressiveToken=-1;this._progress=0;each$1(this._progressiveLayers,function(a){a.__dirty&&a.clear()})},_paintList:function(b,a){if(a==null){a=!1}this._updateLayerStatus(b);this._clearProgressive();this.eachBuiltinLayer(preProcessLayer);this._doPaintList(b,a);this.eachBuiltinLayer(postProcessLayer)},_doPaintList:function(n,h){var c;var f;var b;var m;var o=0;var a;var q=this._width;var p=this._height;var k;var j=this._progress;function flushProgressiveLayer(e){var a=b.dpr||1;b.save();b.globalAlpha=1;b.shadowBlur=0;c.__dirty=!0;b.setTransform(1,0,0,1,0,0);b.drawImage(e.dom,0,0,q*a,p*a);b.restore()}for(var g=0,r=n.length;g<r;g++){var e=n[g];var l=this._singleCanvas?0:e.zlevel;var i=e.__frame;if(i<0&&a){flushProgressiveLayer(a);a=null}if(f!==l){if(b){b.restore()}m={};f=l;c=this.getLayer(f);if(!c.__builtin__){ay('ZLevel '+f+' has been used by unkown layer '+c.id)}b=c.ctx;b.save();c.__unusedCount=0;if(c.__dirty||h){c.clear()}}if(!(c.__dirty||h)){continue}if(i>=0){if(!a){a=this._progressiveLayers[Math.min(o++,c6-1)];a.ctx.save();a.renderScope={};if(a&&a.__progress>a.__maxProgress){g=a.__nextIdxNotProg-1;continue}k=a.__progress;if(!a.__dirty){j=k}a.__progress=j+1}if(i===j){this._doPaintEl(e,a,!0,a.renderScope)}}else {this._doPaintEl(e,c,h,m)}e.__dirty=!1}if(a){flushProgressiveLayer(a)}b&&b.restore();this._furtherProgressive=!1;each$1(this._progressiveLayers,function(a){if(a.__maxProgress>=a.__progress){this._furtherProgressive=!0}},this)},_doPaintEl:function(a,e,h,b){var c=e.ctx;var g=a.transform;if((e.__dirty||h)&&!a.invisible&&a.style.opacity!==0&&!(g&&!g[0]&&!g[3])&&!(a.culling&&isDisplayableCulled(a,this._width,this._height))){var f=a.__clipPaths;if(b.prevClipLayer!==e||isClipPathChanged(f,b.prevElClipPaths)){if(b.prevElClipPaths){b.prevClipLayer.ctx.restore();b.prevClipLayer=b.prevElClipPaths=null;b.prevEl=null}if(f){c.save();doClip(f,c);b.prevClipLayer=e;b.prevElClipPaths=f}}a.beforeBrush&&a.beforeBrush(c);a.brush(c,b.prevEl||null);b.prevEl=a;a.afterBrush&&a.afterBrush(c)}},getLayer:function(b){if(this._singleCanvas){return this._layers[0]}var a=this._layers[b];if(!a){a=new bn('zr_'+b,this,this.dpr);a.__builtin__=!0;if(this._layerConfig[b]){merge(a,this._layerConfig[b],!0)}this.insertLayer(b,a);a.initContext()}return a},insertLayer:function(a,b){var g=this._layers;var e=this._zlevelList;var j=e.length;var h=null;var c=-1;var f=this._domRoot;if(g[a]){ay('ZLevel '+a+' has been used already');return}if(!isLayerValid(b)){ay('Layer of zlevel '+a+' is not valid');return}if(j>0&&a>e[0]){for(c=0;c<j-1;c++){if(e[c]<a&&e[c+1]>a){break}}h=g[e[c]]}e.splice(c+1,0,a);g[a]=b;if(!b.virtual){if(h){var i=h.dom;if(i.nextSibling){f.insertBefore(b.dom,i.nextSibling)}else {f.appendChild(b.dom)}}else {if(f.firstChild){f.insertBefore(b.dom,f.firstChild)}else {f.appendChild(b.dom)}}}},eachLayer:function(f,e){var c=this._zlevelList;var b;var a;for(a=0;a<c.length;a++){b=c[a];f.call(e,this._layers[b],b)}},eachBuiltinLayer:function(g,f){var e=this._zlevelList;var b;var c;var a;for(a=0;a<e.length;a++){c=e[a];b=this._layers[c];if(b.__builtin__){g.call(f,b,c)}}},eachOtherLayer:function(g,f){var e=this._zlevelList;var b;var c;var a;for(a=0;a<e.length;a++){c=e[a];b=this._layers[c];if(!b.__builtin__){g.call(f,b,c)}}},getLayers:function(){return this._layers},_updateLayerStatus:function(m){var p=this._layers;var c=this._progressiveLayers;var k={};var i={};this.eachBuiltinLayer(function(a,b){k[b]=a.elCount;a.elCount=0;a.__dirty=!1});each$1(c,function(a,b){i[b]=a.elCount;a.elCount=0;a.__dirty=!1});var g=0;var a;var j;var l=0;for(var f=0,r=m.length;f<r;f++){var b=m[f];var q=this._singleCanvas?0:b.zlevel;var e=p[q];var h=b.progressive;if(e){e.elCount++;e.__dirty=e.__dirty||b.__dirty}if(h>=0){if(j!==h){j=h;l++}var o=b.__frame=l-1;if(!a){var n=Math.min(g,c6-1);a=c[n];if(!a){a=c[n]=new bn('progressive',this,this.dpr);a.initContext()}a.__maxProgress=0}a.__dirty=a.__dirty||b.__dirty;a.elCount++;a.__maxProgress=Math.max(a.__maxProgress,o);if(a.__maxProgress>=a.__progress){e.__dirty=!0}}else {b.__frame=-1;if(a){a.__nextIdxNotProg=f;g++;a=null}}}if(a){g++;a.__nextIdxNotProg=f}this.eachBuiltinLayer(function(a,b){if(k[b]!==a.elCount){a.__dirty=!0}});c.length=Math.min(g,c6);each$1(c,function(a,c){if(i[c]!==a.elCount){b.__dirty=!0}if(a.__dirty){a.__progress=0}})},clear:function(){this.eachBuiltinLayer(this._clearLayer);return this},_clearLayer:function(a){a.clear()},configLayer:function(a,c){if(c){var b=this._layerConfig;if(!b[a]){b[a]=c}else {merge(b[a],c,!0)}var e=this._layers[a];if(e){merge(e,b[a],!0)}}},delLayer:function(a){var e=this._layers;var c=this._zlevelList;var b=e[a];if(!b){return}b.dom.parentNode.removeChild(b.dom);delete e[a];c.splice(indexOf(c,a),1)},resize:function(b,a){var c=this._domRoot;c.style.display='none';var e=this._opts;b!=null&&(e.width=b);a!=null&&(e.height=a);b=this._getSize(0);a=this._getSize(1);c.style.display='';if(this._width!=b||a!=this._height){c.style.width=b+'px';c.style.height=a+'px';for(var f in this._layers){if(this._layers.hasOwnProperty(f)){this._layers[f].resize(b,a)}}each$1(this._progressiveLayers,function(c){c.resize(b,a)});this.refresh(!0)}this._width=b;this._height=a;return this},clearLayer:function(b){var a=this._layers[b];if(a){a.clear()}},dispose:function(){this.root.innerHTML='';this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(c){c=c||{};if(this._singleCanvas){return this._layers[0].dom}var a=new bn('image',this,c.pixelRatio||this.dpr);a.initContext();a.clearColor=c.backgroundColor;a.clear();var g=this.storage.getDisplayList(!0);var i={};var b;var h=this;function findAndDrawOtherLayer(e,k){var i=h._zlevelList;if(e==null){e=-Infinity}var b;for(var f=0;f<i.length;f++){var g=i[f];var j=h._layers[g];if(!j.__builtin__&&g>e&&g<k){b=j;break}}if(b&&b.renderToCanvas){a.ctx.save();b.renderToCanvas(a.ctx);a.ctx.restore()}}for(var f=0;f<g.length;f++){var e=g[f];if(e.zlevel!==b){findAndDrawOtherLayer(b,e.zlevel);b=e.zlevel}this._doPaintEl(e,a,!0,i)}findAndDrawOtherLayer(b,Infinity);return a.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(b){var c=this._opts;var a=['width','height'][b];var g=['clientWidth','clientHeight'][b];var h=['paddingLeft','paddingTop'][b];var i=['paddingRight','paddingBottom'][b];if(c[a]!=null&&c[a]!=='auto'){return parseFloat(c[a])}var e=this.root;var f=document.defaultView.getComputedStyle(e);return (e[g]||parseInt10(f[a])||parseInt10(e.style[a]))-(parseInt10(f[h])||0)-(parseInt10(f[i])||0)|0},pathToImage:function(a,b){b=b||this.dpr;var i=document.createElement('canvas');var k=i.getContext('2d');var j=a.getBoundingRect();var e=a.style;var f=e.shadowBlur;var l=e.shadowOffsetX;var m=e.shadowOffsetY;var g=e.hasStroke()?e.lineWidth:0;var n=Math.max(g/2,-l+f);var s=Math.max(g/2,l+f);var o=Math.max(g/2,-m+f);var r=Math.max(g/2,m+f);var q=j.width+n+s;var p=j.height+o+r;i.width=q*b;i.height=p*b;k.scale(b,b);k.clearRect(0,0,q,p);k.dpr=b;var c={position:a.position,rotation:a.rotation,scale:a.scale};a.position=[n-j.x,o-j.y];a.rotation=0;a.scale=[1,1];a.updateTransform();if(a){a.brush(k)}var t=ZImage;var h=new t({style:{x:0,y:0,image:i}});if(c.position!=null){h.position=a.position=c.position}if(c.rotation!=null){h.rotation=a.rotation=c.rotation}if(c.scale!=null){h.scale=a.scale=c.scale}return h}};var d5=typeof window!=='undefined'&&!!window.addEventListener;var jG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;function getBoundingClientRect(a){return a.getBoundingClientRect?a.getBoundingClientRect():{left:0,top:0}}function clientToLocal(c,a,b,e){b=b||{};if(e||!f.canvasSupported){defaultGetZrXY(c,a,b)}else {if(f.browser.firefox&&a.layerX!=null&&a.layerX!==a.offsetX){b.zrX=a.layerX;b.zrY=a.layerY}else {if(a.offsetX!=null){b.zrX=a.offsetX;b.zrY=a.offsetY}else {defaultGetZrXY(c,a,b)}}}return b}function defaultGetZrXY(e,c,b){var a=getBoundingClientRect(e);b.zrX=c.clientX-a.left;b.zrY=c.clientY-a.top}function normalizeEvent(g,a,e){a=a||window.event;if(a.zrX!=null){return a}var c=a.type;var h=c&&c.indexOf('touch')>=0;if(!h){clientToLocal(g,a,a,e);a.zrDelta=a.wheelDelta?a.wheelDelta/120:-(a.detail||0)/3}else {var f=c!='touchend'?a.targetTouches[0]:a.changedTouches[0];f&&clientToLocal(g,f,a,e)}var b=a.button;if(a.which==null&&b!==undefined&&jG.test(a.type)){a.which=b&1?1:b&2?3:b&4?2:0}return a}function addEventListener(c,b,a){if(d5){c.addEventListener(b,a)}else {c.attachEvent('on'+b,a)}}function removeEventListener(c,b,a){if(d5){c.removeEventListener(b,a)}else {c.detachEvent('on'+b,a)}}var aA=d5?function(a){a.preventDefault();a.stopPropagation();a.cancelBubble=!0}:function(a){a.returnValue=!1;a.cancelBubble=!0};function notLeftMouse(a){return a.which>1}var ct=function(a){a=a||{};this.stage=a.stage||{};this.onframe=a.onframe||function(){};this._clips=[];this._running=!1;this._time;this._pausedTime;this._pauseStart;this._paused=!1;s.call(this)};ct.prototype={constructor:ct,addClip:function(a){this._clips.push(a)},addAnimator:function(b){b.animation=this;var c=b.getClips();for(var a=0;a<c.length;a++){this.addClip(c[a])}},removeClip:function(b){var a=indexOf(this._clips,b);if(a>=0){this._clips.splice(a,1)}},removeAnimator:function(b){var c=b.getClips();for(var a=0;a<c.length;a++){this.removeClip(c[a])}b.animation=null},_update:function(){var g=(new Date()).getTime()-this._pausedTime;var f=g-this._time;var b=this._clips;var c=b.length;var e=[];var h=[];for(var a=0;a<c;a++){var i=b[a];var j=i.step(g,f);if(j){e.push(j);h.push(i)}}for(var a=0;a<c;){if(b[a]._needsRemove){b[a]=b[c-1];b.pop();c--}else {a++}}c=e.length;for(var a=0;a<c;a++){h[a].fire(e[a])}this._time=g;this.onframe(f);this.trigger('frame',f);if(this.stage.update){this.stage.update()}},_startLoop:function(){var a=this;this._running=!0;function step(){if(a._running){bY(step);!a._paused&&a._update()}}bY(step)},start:function(){this._time=(new Date()).getTime();this._pausedTime=0;this._startLoop()},stop:function(){this._running=!1},pause:function(){if(!this._paused){this._pauseStart=(new Date()).getTime();this._paused=!0}},resume:function(){if(this._paused){this._pausedTime+=(new Date()).getTime()-this._pauseStart;this._paused=!1}},clear:function(){this._clips=[]},animate:function(c,a){a=a||{};var b=new eC(c,a.loop,a.getter,a.setter);this.addAnimator(b);return b}};mixin(ct,s);var d9=function(){this._track=[]};d9.prototype={constructor:d9,recognize:function(a,b,c){this._doTrack(a,b,c);return this._recognize(a)},clear:function(){this._track.length=0;return this},_doTrack:function(e,h,i){var b=e.touches;if(!b){return}var a={points:[],touches:[],target:h,event:e};for(var c=0,j=b.length;c<j;c++){var f=b[c];var g=clientToLocal(i,f,{});a.points.push([g.zrX,g.zrY]);a.touches.push(f)}this._track.push(a)},_recognize:function(c){for(var b in d6){if(d6.hasOwnProperty(b)){var a=d6[b](this._track,c);if(a){return a}}}}};function dist$1(a){var b=a[1][0]-a[0][0];var c=a[1][1]-a[0][1];return Math.sqrt(b*b+c*c)}function center(a){return [(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]}var d6={pinch:function(c,b){var g=c.length;if(!g){return}var a=(c[g-1]||{}).points;var f=(c[g-2]||{}).points||a;if(f&&f.length>1&&a&&a.length>1){var e=dist$1(a)/dist$1(f);!isFinite(e)&&(e=1);b.pinchScale=e;var h=center(a);b.pinchX=h[0];b.pinchY=h[1];return {type:'pinch',target:c[0].target,event:b}}}};var i9=300;var b3=['click','dblclick','mousewheel','mouseout','mouseup','mousedown','mousemove','contextmenu'];var dq=['touchstart','touchend','touchmove'];var jh={pointerdown:1,pointerup:1,pointermove:1,pointerout:1};var fz=map(b3,function(a){var b=a.replace('mouse','pointer');return jh[b]?b:a});function eventNameFix(a){return a==='mousewheel'&&f.browser.firefox?'DOMMouseScroll':a}function processGesture(c,b,f){var e=c._gestureMgr;f==='start'&&e.clear();var a=e.recognize(b,c.handler.findHover(b.zrX,b.zrY,null).target,c.dom);f==='end'&&e.clear();if(a){var g=a.type;b.gestureEvent=g;c.handler.dispatchToElement({target:a.target},g,a.event)}}function setTouchTimer(a){a._touching=!0;clearTimeout(a._touchTimer);a._touchTimer=setTimeout(function(){a._touching=!1},700)}var C={mousemove:function(a){a=normalizeEvent(this.dom,a);this.trigger('mousemove',a)},mouseout:function(b){b=normalizeEvent(this.dom,b);var a=b.toElement||b.relatedTarget;if(a!=this.dom){while(a&&a.nodeType!=9){if(a===this.dom){return}a=a.parentNode}}this.trigger('mouseout',b)},touchstart:function(a){a=normalizeEvent(this.dom,a);a.zrByTouch=!0;this._lastTouchMoment=new Date();processGesture(this,a,'start');C.mousemove.call(this,a);C.mousedown.call(this,a);setTouchTimer(this)},touchmove:function(a){a=normalizeEvent(this.dom,a);a.zrByTouch=!0;processGesture(this,a,'change');C.mousemove.call(this,a);setTouchTimer(this)},touchend:function(a){a=normalizeEvent(this.dom,a);a.zrByTouch=!0;processGesture(this,a,'end');C.mouseup.call(this,a);if(+new Date()-this._lastTouchMoment<i9){C.click.call(this,a)}setTouchTimer(this)},pointerdown:function(a){C.mousedown.call(this,a)},pointermove:function(a){if(!isPointerFromTouch(a)){C.mousemove.call(this,a)}},pointerup:function(a){C.mouseup.call(this,a)},pointerout:function(a){if(!isPointerFromTouch(a)){C.mouseout.call(this,a)}}};function isPointerFromTouch(b){var a=b.pointerType;return a==='pen'||a==='touch'}each$1(['click','mousedown','mouseup','mousewheel','dblclick','contextmenu'],function(a){C[a]=function(b){b=normalizeEvent(this.dom,b);this.trigger(a,b)}});function initDomHandler(a){each$1(dq,function(b){a._handlers[b]=bind(C[b],a)});each$1(fz,function(b){a._handlers[b]=bind(C[b],a)});each$1(b3,function(b){a._handlers[b]=makeMouseHandler(C[b],a)});function makeMouseHandler(c,b){return function(){if(b._touching){return}return c.apply(b,arguments)}}}function HandlerDomProxy(a){s.call(this);this.dom=a;this._touching=!1;this._touchTimer;this._gestureMgr=new d9();this._handlers={};initDomHandler(this);if(f.pointerEventsSupported){mountHandlers(fz,this)}else {if(f.touchEventsSupported){mountHandlers(dq,this)}mountHandlers(b3,this)}function mountHandlers(c,b){each$1(c,function(e){addEventListener(a,eventNameFix(e),b._handlers[e])},b)}}var fw=HandlerDomProxy.prototype;fw.dispose=function(){var b=b3.concat(dq);for(var a=0;a<b.length;a++){var c=b[a];removeEventListener(this.dom,eventNameFix(c),this._handlers[c])}};fw.setCursor=function(a){this.dom.style.cursor=a||'default'};mixin(HandlerDomProxy,s);var mJ=!f.canvasSupported;var cj={canvas:eM};var aM={};var eB='3.7.3';function init$1(c,b){var a=new eP(hY(),c,b);aM[a.id]=a;return a}function dispose$1(b){if(b){b.dispose()}else {for(var a in aM){if(aM.hasOwnProperty(a)){aM[a].dispose()}}aM={}}return this}function getInstance(a){return aM[a]}function registerPainter(b,a){cj[b]=a}function delInstance(a){delete aM[a]}var eP=function(l,h,e){e=e||{};this.dom=h;this.id=l;var g=this;var a=new eO();var b=e.renderer;if(mJ){if(!cj.vml){throw new Error("You need to require 'zrender/vml/vml' to support IE8")}b='vml'}else {if(!b||!cj[b]){b='canvas'}}var c=new cj[b](h,a,e);this.storage=a;this.painter=c;var k=!f.node?new HandlerDomProxy(c.getViewportRoot()):null;this.handler=new bf(a,c,k,c.root);this.animation=new ct({stage:{update:bind(this.flush,this)}});this.animation.start();this._needsRefresh;var i=a.delFromStorage;var j=a.addToStorage;a.delFromStorage=function(b){i.call(a,b);b&&b.removeSelfFromZr(g)};a.addToStorage=function(b){j.call(a,b);b.addSelfToZr(g)}};eP.prototype={constructor:eP,getId:function(){return this.id},add:function(a){this.storage.addRoot(a);this._needsRefresh=!0},remove:function(a){this.storage.delRoot(a);this._needsRefresh=!0},configLayer:function(b,a){this.painter.configLayer(b,a);this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1;this.painter.refresh();this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},flush:function(){if(this._needsRefresh){this.refreshImmediately()}if(this._needsRefreshHover){this.refreshHoverImmediately()}},addHover:function(b,a){if(this.painter.addHover){this.painter.addHover(b,a);this.refreshHover()}},removeHover:function(a){if(this.painter.removeHover){this.painter.removeHover(a);this.refreshHover()}},clearHover:function(){if(this.painter.clearHover){this.painter.clearHover();this.refreshHover()}},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1;this.painter.refreshHover&&this.painter.refreshHover()},resize:function(a){a=a||{};this.painter.resize(a.width,a.height);this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(b,a){return this.painter.pathToImage(b,a)},setCursorStyle:function(a){this.handler.setCursorStyle(a)},findHover:function(a,b){return this.handler.findHover(a,b)},on:function(b,a,c){this.handler.on(b,a,c)},off:function(b,a){this.handler.off(b,a)},trigger:function(a,b){this.handler.trigger(a,b)},clear:function(){this.storage.delRoot();this.painter.clear()},dispose:function(){this.animation.stop();this.clear();this.storage.dispose();this.painter.dispose();this.handler.dispose();this.animation=this.storage=this.painter=this.handler=null;delInstance(this.id)}};var mt=(Object.freeze||Object)({version:eB,init:init$1,dispose:dispose$1,getInstance:getInstance,registerPainter:registerPainter});var gb=1.0E-4;function _trim(a){return a.replace(/^\s+/,'').replace(/\s+$/,'')}function linearMap(c,b,a,g){var e=b[1]-b[0];var f=a[1]-a[0];if(e===0){return f===0?a[0]:(a[0]+a[1])/2}if(g){if(e>0){if(c<=b[0]){return a[0]}else {if(c>=b[1]){return a[1]}}}else {if(c>=b[0]){return a[0]}else {if(c<=b[1]){return a[1]}}}}else {if(c===b[0]){return a[0]}if(c===b[1]){return a[1]}}return (c-b[0])/e*f+a[0]}function parsePercent$1(a,b){switch(a){case 'center':case 'middle':a='50%';break;case 'left':case 'top':a='0%';break;case 'right':case 'bottom':a='100%';break;}if(typeof a==='string'){if(_trim(a).match(/%$/)){return parseFloat(a)/100*b}return parseFloat(a)}return a==null?NaN:+a}function round(b,a,c){if(a==null){a=10}a=Math.min(Math.max(0,a),20);b=(+b).toFixed(a);return c?b:+b}function asc(a){a.sort(function(b,c){return b-c});return a}function getPrecision(a){a=+a;if(isNaN(a)){return 0}var b=1;var c=0;while(Math.round(a*b)/b!==a){b*=10;c++}return c}function getPrecisionSafe(f){var a=f.toString();var e=a.indexOf('e');if(e>0){var b=+a.slice(e+1);return b<0?-b:0}else {var c=a.indexOf('.');return c<0?0:a.length-1-c}}function getPixelPrecision(b,a){var f=Math.log;var e=Math.LN10;var g=Math.floor(f(b[1]-b[0])/e);var h=Math.round(f(Math.abs(a[1]-a[0]))/e);var c=Math.min(Math.max(-g+h,0),20);return !isFinite(c)?20:c}function getPercentWithPrecision(e,j,n){if(!e[j]){return 0}var l=reduce(e,function(b,a){return b+(isNaN(a)?0:a)},0);if(l===0){return 0}var f=Math.pow(10,n);var h=map(e,function(a){return (isNaN(a)?0:a)/l*f*100});var m=f*100;var c=map(h,function(a){return Math.floor(a)});var i=reduce(c,function(a,b){return a+b},0);var b=map(h,function(a,b){return a-c[b]});while(i<m){var k=Number.NEGATIVE_INFINITY;var g=null;for(var a=0,o=b.length;a<o;++a){if(b[a]>k){k=b[a];g=a}}++c[g];b[g]=0;++i}return c[j]/f}var dr=9.007199254740991E15;function remRadian(b){var a=Math.PI*2;return (b%a+a)%a}function isRadianAroundZero(a){return a>-gb&&a<gb}var l9=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(b){if(b instanceof Date){return b}else {if(typeof b==='string'){var a=l9.exec(b);if(!a){return new Date(NaN)}if(!a[8]){return new Date(+a[1],+(a[2]||1)-1,+a[3]||1,+a[4]||0,+(a[5]||0),+a[6]||0,+a[7]||0)}else {var c=+a[4]||0;if(a[8].toUpperCase()!=='Z'){c-=a[8].slice(0,3)}return new Date(Date.UTC(+a[1],+(a[2]||1)-1,+a[3]||1,c,+(a[5]||0),+a[6]||0,+a[7]||0))}}else {if(b==null){return new Date(NaN)}}}return new Date(Math.round(b))}function quantity(a){return Math.pow(10,quantityExponent(a))}function quantityExponent(a){return Math.floor(Math.log(a)/Math.LN10)}function nice(c,g){var e=quantityExponent(c);var f=Math.pow(10,e);var b=c/f;var a;if(g){if(b<1.5){a=1}else {if(b<2.5){a=2}else {if(b<4){a=3}else {if(b<7){a=5}else {a=10}}}}}else {if(b<1){a=1}else {if(b<2){a=2}else {if(b<3){a=3}else {if(b<5){a=5}else {a=10}}}}}c=a*f;return e>=-20?+c.toFixed(e<0?-e:0):c}function reformIntervals(b){b.sort(function(a,c){return littleThan(a,c,0)?-1:1});var g=-Infinity;var h=1;for(var e=0;e<b.length;){var c=b[e].interval;var f=b[e].close;for(var a=0;a<2;a++){if(c[a]<=g){c[a]=g;f[a]=!a?1-h:1}g=c[a];h=f[a]}if(c[0]===c[1]&&f[0]*f[1]!==1){b.splice(e,1)}else {e++}}return b;function littleThan(c,e,a){return c.interval[a]<e.interval[a]||c.interval[a]===e.interval[a]&&(c.close[a]-e.close[a]===(!a?1:-1)||!a&&littleThan(c,e,1))}}function isNumeric(a){return a-parseFloat(a)>=0}var mG=(Object.freeze||Object)({linearMap:linearMap,parsePercent:parsePercent$1,round:round,asc:asc,getPrecision:getPrecision,getPrecisionSafe:getPrecisionSafe,getPixelPrecision:getPixelPrecision,getPercentWithPrecision:getPercentWithPrecision,MAX_SAFE_INTEGER:dr,remRadian:remRadian,isRadianAroundZero:isRadianAroundZero,parseDate:parseDate,quantity:quantity,nice:nice,reformIntervals:reformIntervals,isNumeric:isNumeric});function addCommas(a){if(isNaN(a)){return '-'}a=(a+'').split('.');return a[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,'$1,')+(a.length>1?'.'+a[1]:'')}function toCamelCase(a,b){a=(a||'').toLowerCase().replace(/-(.)/g,function(e,c){return c.toUpperCase()});if(b&&a){a=a.charAt(0).toUpperCase()+a.slice(1)}return a}var aE=normalizeCssArray;function encodeHTML(a){return String(a).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;')}var gp=['a','b','c','d','e','f','g'];var e$=function(b,a){return '{'+b+(a==null?'':a)+'}'};function formatTpl(b,a,j){if(!isArray(a)){a=[a]}var i=a.length;if(!i){return ''}var g=a[0].$vars||[];for(var h=0;h<g.length;h++){var k=gp[h];var c=e$(k,0);b=b.replace(e$(k),j?encodeHTML(c):c)}for(var e=0;e<i;e++){for(var f=0;f<g.length;f++){var c=a[e][g[f]];b=b.replace(e$(gp[f],e),j?encodeHTML(c):c)}}return b}function formatTplSimple(a,c,b){each$1(c,function(e,f){a=a.replace('{'+f+'}',b?encodeHTML(e):e)});return a}function getTooltipMarker(a,b){return a?'<span style="display:inline-block;margin-right:5px;'+'border-radius:10px;width:9px;height:9px;background-color:'+encodeHTML(a)+';'+(b||'')+'"></span>':''}var bW=function(a){return a<10?'0'+a:a};function formatTime(a,l,k){if(a==='week'||a==='month'||a==='quarter'||a==='half-year'||a==='year'){a='MM-dd\nyyyy'}var b=parseDate(l);var c=k?'UTC':'';var j=b['get'+c+'FullYear']();var e=b['get'+c+'Month']()+1;var f=b['get'+c+'Date']();var g=b['get'+c+'Hours']();var h=b['get'+c+'Minutes']();var i=b['get'+c+'Seconds']();a=a.replace('MM',bW(e)).replace('M',e).replace('yyyy',j).replace('yy',j%100).replace('dd',bW(f)).replace('d',f).replace('hh',bW(g)).replace('h',g).replace('mm',bW(h)).replace('m',h).replace('ss',bW(i)).replace('s',i);return a}function capitalFirst(a){return a?a.charAt(0).toUpperCase()+a.substr(1):a}var gl=truncateText;var lf=getBoundingRect;var mA=(Object.freeze||Object)({addCommas:addCommas,toCamelCase:toCamelCase,normalizeCssArray:aE,encodeHTML:encodeHTML,formatTpl:formatTpl,formatTplSimple:formatTplSimple,getTooltipMarker:getTooltipMarker,formatTime:formatTime,capitalFirst:capitalFirst,truncateText:gl,getTextRect:lf});var jW='.';var aI='___EC__COMPONENT__CONTAINER___';var dQ='\x00ec_\x00';function set$1(b,c,a){return b[dQ+c]=a}function get(a,b){return a[dQ+b]}function hasOwn(a,b){return a.hasOwnProperty(dQ+b)}function parseClassType$1(a){var b={main:'',sub:''};if(a){a=a.split(jW);b.main=a[0]||'';b.sub=a[1]||''}return b}function checkClassType(a){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(a),'componentType "'+a+'" illegal')}function enableClassExtend(b,c){b.$constructor=b;b.extend=function(f){if(a){each$1(c,function(a){if(!f[a]){console.warn('Method `'+a+'` should be implemented'+(f.type?' in '+f.type:'')+'.')}})}var g=this;var e=function(){if(!f.$constructor){g.apply(this,arguments)}else {f.$constructor.apply(this,arguments)}};extend(e.prototype,f);e.extend=this.extend;e.superCall=superCall;e.superApply=superApply;inherits(e,this);e.superClass=g;return e}}function superCall(b,a){var c=slice(arguments,2);return this.superClass.prototype[a].apply(b,c)}function superApply(b,a,c){return this.superClass.prototype[a].apply(b,c)}function enableClassManagement(b,e){e=e||{};var c={};b.registerClass=function(g,f){if(f){checkClassType(f);f=parseClassType$1(f);if(!f.sub){if(a){if(c[f.main]){console.warn(f.main+' exists.')}}c[f.main]=g}else {if(f.sub!==aI){var h=makeContainer(f);h[f.sub]=g}}}return g};b.getClass=function(g,f,h){var a=c[g];if(a&&a[aI]){a=f?a[f]:null}if(h&&!a){throw new Error(!f?g+'.'+'type should be specified.':'Component '+g+'.'+(f||'')+' not exists. Load it first.')}return a};b.getClassesByMainType=function(f){f=parseClassType$1(f);var g=[];var a=c[f.main];if(a&&a[aI]){each$1(a,function(c,a){a!==aI&&g.push(c)})}else {g.push(a)}return g};b.hasClass=function(a){a=parseClassType$1(a);return !!c[a.main]};b.getAllClassMainTypes=function(){var a=[];each$1(c,function(f,c){a.push(c)});return a};b.hasSubTypes=function(a){a=parseClassType$1(a);var f=c[a.main];return f&&f[aI]};b.parseClassType=parseClassType$1;function makeContainer(f){var a=c[f.main];if(!a||!a[aI]){a=c[f.main]={};a[aI]=!0}return a}if(e.registerWhenExtend){var f=b.extend;if(f){b.extend=function(a){var c=f.call(this,a);return b.registerClass(c,a.type)}}}return b}var a1=function(a){for(var b=0;b<a.length;b++){if(!a[b][1]){a[b][1]=a[b][0]}}return function(i,e,f){var g={};for(var b=0;b<a.length;b++){var c=a[b][1];if(e&&indexOf(e,c)>=0||f&&indexOf(f,c)<0){continue}var h=i.getShallow(c);if(h!=null){g[a[b][0]]=h}}return g}};var kI=a1([['lineWidth','width'],['stroke','color'],['opacity'],['shadowBlur'],['shadowOffsetX'],['shadowOffsetY'],['shadowColor']]);var j4={getLineStyle:function(c){var a=kI(this,c);var b=this.getLineDash(a.lineWidth);b&&(a.lineDash=b);return a},getLineDash:function(a){if(a==null){a=1}var b=this.get('type');var e=Math.max(a,2);var c=a*4;return b==='solid'||b==null?null:b==='dashed'?[c,c]:[e,e]}};var kF=a1([['fill','color'],['shadowBlur'],['shadowOffsetX'],['shadowOffsetY'],['opacity'],['shadowColor']]);var jY={getAreaStyle:function(a,b){return kF(this,a,b)}};var cO=Math.pow;var am=Math.sqrt;var cw=1.0E-8;var fZ=1.0E-4;var gW=am(3);var cy=1/3;var ab=create();var M=create();var br=create();function isAroundZero(a){return a>-cw&&a<cw}function isNotAroundZero$1(a){return a>cw||a<-cw}function cubicAt(c,e,f,g,a){var b=1-a;return b*b*(b*c+3*a*e)+a*a*(a*g+3*b*f)}function cubicDerivativeAt(f,c,e,g,a){var b=1-a;return 3*(((c-f)*b+2*(e-c)*a)*b+(g-e)*a*a)}function cubicRootAt(m,r,u,y,x,f){var e=y+3*(r-u)-m;var b=3*(u-r*2+m);var l=3*(r-m);var w=m-x;var c=b*b-3*e*l;var i=b*l-9*e*w;var z=l*l-3*b*w;var g=0;if(isAroundZero(c)&&isAroundZero(i)){if(isAroundZero(b)){f[0]=0}else {var a=-l/b;if(a>=0&&a<=1){f[g++]=a}}}else {var p=i*i-4*c*z;if(isAroundZero(p)){var v=i/c;var a=-b/e+v;var h=-v/2;if(a>=0&&a<=1){f[g++]=a}if(h>=0&&h<=1){f[g++]=h}}else {if(p>0){var t=am(p);var j=c*b+1.5*e*(-i+t);var k=c*b+1.5*e*(-i-t);if(j<0){j=-cO(-j,cy)}else {j=cO(j,cy)}if(k<0){k=-cO(-k,cy)}else {k=cO(k,cy)}var a=(-b-(j+k))/(3*e);if(a>=0&&a<=1){f[g++]=a}}else {var A=(2*c*b-3*e*i)/(2*am(c*c*c));var o=Math.acos(A)/3;var n=am(c);var q=Math.cos(o);var a=(-b-2*n*q)/(3*e);var h=(-b+n*(q+gW*Math.sin(o)))/(3*e);var s=(-b+n*(q-gW*Math.sin(o)))/(3*e);if(a>=0&&a<=1){f[g++]=a}if(h>=0&&h<=1){f[g++]=h}if(s>=0&&s<=1){f[g++]=s}}}}return g}function cubicExtrema(h,i,l,n,e){var b=6*l-12*i+6*h;var c=9*i+3*n-3*h-9*l;var m=3*i-3*h;var f=0;if(isAroundZero(c)){if(isNotAroundZero$1(b)){var a=-m/b;if(a>=0&&a<=1){e[f++]=a}}}else {var g=b*b-4*c*m;if(isAroundZero(g)){e[0]=-b/(2*c)}else {if(g>0){var k=am(g);var a=(-b+k)/(2*c);var j=(-b-k)/(2*c);if(a>=0&&a<=1){e[f++]=a}if(j>=0&&j<=1){e[f++]=j}}}}return f}function cubicSubdivide(g,h,i,m,b,a){var e=(h-g)*b+g;var f=(i-h)*b+h;var l=(m-i)*b+i;var c=(f-e)*b+e;var k=(l-f)*b+f;var j=(k-c)*b+c;a[0]=g;a[1]=e;a[2]=c;a[3]=j;a[4]=j;a[5]=k;a[6]=l;a[7]=m}function cubicProjectPoint(i,m,j,n,k,o,l,p,t,u,q){var b;var h=0.005;var a=Infinity;var f;var e;var c;var r;ab[0]=t;ab[1]=u;for(var g=0;g<1;g+=0.05){M[0]=cubicAt(i,j,k,l,g);M[1]=cubicAt(m,n,o,p,g);c=al(ab,M);if(c<a){b=g;a=c}}a=Infinity;for(var s=0;s<32;s++){if(h<fZ){break}f=b-h;e=b+h;M[0]=cubicAt(i,j,k,l,f);M[1]=cubicAt(m,n,o,p,f);c=al(M,ab);if(f>=0&&c<a){b=f;a=c}else {br[0]=cubicAt(i,j,k,l,e);br[1]=cubicAt(m,n,o,p,e);r=al(br,ab);if(e<=1&&r<a){b=e;a=r}else {h*=0.5}}}if(q){q[0]=cubicAt(i,j,k,l,b);q[1]=cubicAt(m,n,o,p,b)}return am(a)}function quadraticAt(c,e,f,a){var b=1-a;return b*(b*c+2*a*e)+a*a*f}function quadraticDerivativeAt(c,a,e,b){return 2*((1-b)*(a-c)+b*(e-a))}function quadraticRootAt(h,k,n,m,f){var c=h-2*k+n;var b=2*(k-h);var l=h-m;var e=0;if(isAroundZero(c)){if(isNotAroundZero$1(b)){var a=-l/b;if(a>=0&&a<=1){f[e++]=a}}}else {var g=b*b-4*c*l;if(isAroundZero(g)){var a=-b/(2*c);if(a>=0&&a<=1){f[e++]=a}}else {if(g>0){var j=am(g);var a=(-b+j)/(2*c);var i=(-b-j)/(2*c);if(a>=0&&a<=1){f[e++]=a}if(i>=0&&i<=1){f[e++]=i}}}}return e}function quadraticExtremum(b,c,e){var a=b+e-2*c;if(a===0){return 0.5}else {return (b-c)/a}}function quadraticSubdivide(c,e,i,f,a){var b=(e-c)*f+c;var h=(i-e)*f+e;var g=(h-b)*f+b;a[0]=c;a[1]=b;a[2]=g;a[3]=g;a[4]=h;a[5]=i}function quadraticProjectPoint(i,l,j,m,k,n,r,s,o){var b;var f=0.005;var a=Infinity;ab[0]=r;ab[1]=s;for(var c=0;c<1;c+=0.05){M[0]=quadraticAt(i,j,k,c);M[1]=quadraticAt(l,m,n,c);var e=al(ab,M);if(e<a){b=c;a=e}}a=Infinity;for(var q=0;q<32;q++){if(f<fZ){break}var h=b-f;var g=b+f;M[0]=quadraticAt(i,j,k,h);M[1]=quadraticAt(l,m,n,h);var e=al(M,ab);if(h>=0&&e<a){b=h;a=e}else {br[0]=quadraticAt(i,j,k,g);br[1]=quadraticAt(l,m,n,g);var p=al(br,ab);if(g<=1&&p<a){b=g;a=p}else {f*=0.5}}}if(o){o[0]=quadraticAt(i,j,k,b);o[1]=quadraticAt(l,m,n,b)}return am(a)}var y=Math.min;var x=Math.max;var ew=Math.sin;var et=Math.cos;var a$=Math.PI*2;var c1=create();var c4=create();var cA=create();function fromPoints(b,j,i){if(b.length===0){return}var a=b[0];var g=a[0];var f=a[0];var h=a[1];var e=a[1];var c;for(c=1;c<b.length;c++){a=b[c];g=y(g,a[0]);f=x(f,a[0]);h=y(h,a[1]);e=x(e,a[1])}j[0]=g;j[1]=h;i[0]=f;i[1]=e}function fromLine(c,f,e,g,b,a){b[0]=y(c,e);b[1]=y(f,g);a[0]=x(c,e);a[1]=x(f,g)}var h_=[];var h0=[];function fromCubic(e,g,l,n,m,o,f,h,b,a){var j=cubicExtrema;var k=cubicAt;var c;var i=j(e,l,m,f,h_);b[0]=Infinity;b[1]=Infinity;a[0]=-Infinity;a[1]=-Infinity;for(c=0;c<i;c++){var p=k(e,l,m,f,h_[c]);b[0]=y(p,b[0]);a[0]=x(p,a[0])}i=j(g,n,o,h,h0);for(c=0;c<i;c++){var q=k(g,n,o,h,h0[c]);b[1]=y(q,b[1]);a[1]=x(q,a[1])}b[0]=y(e,b[0]);a[0]=x(e,a[0]);b[0]=y(f,b[0]);a[0]=x(f,a[0]);b[1]=y(g,b[1]);a[1]=x(g,a[1]);b[1]=y(h,b[1]);a[1]=x(h,a[1])}function fromQuadratic(a,c,j,k,b,e,i,h){var f=quadraticExtremum;var g=quadraticAt;var n=x(y(f(a,j,b),1),0);var o=x(y(f(c,k,e),1),0);var l=g(a,j,b,n);var m=g(c,k,e,o);i[0]=y(a,b,l);i[1]=y(c,e,m);h[0]=x(a,b,l);h[1]=x(c,e,m)}function fromArc(i,j,g,h,a,b,k,e,c){var m=min;var l=max;var n=Math.abs(a-b);if(n%a$<1.0E-4&&n>1.0E-4){e[0]=i-g;e[1]=j-h;c[0]=i+g;c[1]=j+h;return}c1[0]=et(a)*g+i;c1[1]=ew(a)*h+j;c4[0]=et(b)*g+i;c4[1]=ew(b)*h+j;m(e,c1,c4);l(c,c1,c4);a=a%a$;if(a<0){a=a+a$}b=b%a$;if(b<0){b=b+a$}if(a>b&&!k){b+=a$}else {if(a<b&&k){a+=a$}}if(k){var o=b;b=a;a=o}for(var f=0;f<b;f+=Math.PI/2){if(f>a){cA[0]=et(f)*g+i;cA[1]=ew(f)*h+j;m(e,cA,e);l(c,cA,c)}}}var o={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7};var $=[];var ax=[];var aa=[];var _=[];var hd=Math.min;var hb=Math.max;var bD=Math.cos;var bH=Math.sin;var cs=Math.sqrt;var bi=Math.abs;var dR=typeof Float32Array!='undefined';var E=function(a){this._saveData=!(a||!1);if(this._saveData){this.data=[]}this._ctx=null};E.prototype={constructor:E,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(a,b){this._ux=bi(1/b4/a)||0;this._uy=bi(1/b4/b)||0},getContext:function(){return this._ctx},beginPath:function(a){this._ctx=a;a&&a.beginPath();a&&(this.dpr=a.dpr);if(this._saveData){this._len=0}if(this._lineDash){this._lineDash=null;this._dashOffset=0}return this},moveTo:function(a,b){this.addData(o.M,a,b);this._ctx&&this._ctx.moveTo(a,b);this._x0=a;this._y0=b;this._xi=a;this._yi=b;return this},lineTo:function(a,b){var c=bi(a-this._xi)>this._ux||bi(b-this._yi)>this._uy||this._len<5;this.addData(o.L,a,b);if(this._ctx&&c){this._needsDash()?this._dashedLineTo(a,b):this._ctx.lineTo(a,b)}if(c){this._xi=a;this._yi=b}return this},bezierCurveTo:function(c,f,e,g,a,b){this.addData(o.C,c,f,e,g,a,b);if(this._ctx){this._needsDash()?this._dashedBezierTo(c,f,e,g,a,b):this._ctx.bezierCurveTo(c,f,e,g,a,b)}this._xi=a;this._yi=b;return this},quadraticCurveTo:function(c,e,a,b){this.addData(o.Q,c,e,a,b);if(this._ctx){this._needsDash()?this._dashedQuadraticTo(c,e,a,b):this._ctx.quadraticCurveTo(c,e,a,b)}this._xi=a;this._yi=b;return this},arc:function(c,g,a,e,b,f){this.addData(o.A,c,g,a,a,e,b-e,0,f?0:1);this._ctx&&this._ctx.arc(c,g,a,e,b,f);this._xi=bD(b)*a+c;this._yi=bH(b)*a+c;return this},arcTo:function(b,e,c,f,a){if(this._ctx){this._ctx.arcTo(b,e,c,f,a)}return this},rect:function(c,e,b,a){this._ctx&&this._ctx.rect(c,e,b,a);this.addData(o.R,c,e,b,a);return this},closePath:function(){this.addData(o.Z);var a=this._ctx;var b=this._x0;var c=this._y0;if(a){this._needsDash()&&this._dashedLineTo(b,c);a.closePath()}this._xi=b;this._yi=c;return this},fill:function(a){a&&a.fill();this.toStatic()},stroke:function(a){a&&a.stroke();this.toStatic()},setLineDash:function(a){if(a instanceof Array){this._lineDash=a;this._dashIdx=0;var c=0;for(var b=0;b<a.length;b++){c+=a[b]}this._dashSum=c}return this},setLineDashOffset:function(a){this._dashOffset=a;return this},len:function(){return this._len},setData:function(c){var a=c.length;if(!(this.data&&this.data.length==a)&&dR){this.data=new Float32Array(a)}for(var b=0;b<a;b++){this.data[b]=c[b]}this._len=a},appendPath:function(b){if(!(b instanceof Array)){b=[b]}var h=b.length;var g=0;var c=this._len;for(var a=0;a<h;a++){g+=b[a].len()}if(dR&&this.data instanceof Float32Array){this.data=new Float32Array(c+g)}for(var a=0;a<h;a++){var f=b[a].data;for(var e=0;e<f.length;e++){this.data[c++]=f[e]}}this._len=c},addData:function(c){if(!this._saveData){return}var a=this.data;if(this._len+arguments.length>a.length){this._expandData();a=this.data}for(var b=0;b<arguments.length;b++){a[this._len++]=arguments[b]}this._prevCmd=c},_expandData:function(){if(!(this.data instanceof Array)){var b=[];for(var a=0;a<this._len;a++){b[a]=this.data[a]}this.data=b}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(g,h){var n=this._dashSum;var f=this._dashOffset;var m=this._lineDash;var q=this._ctx;var j=this._xi;var k=this._yi;var a=g-j;var b=h-k;var o=cs(a*a+b*b);var c=j;var e=k;var l;var p=m.length;var i;a/=o;b/=o;if(f<0){f=n+f}f%=n;c-=f*a;e-=f*b;while(a>0&&c<=g||a<0&&c>=g||a==0&&(b>0&&e<=h||b<0&&e>=h)){i=this._dashIdx;l=m[i];c+=a*l;e+=b*l;this._dashIdx=(i+1)%p;if(a>0&&c<j||a<0&&c>j||b>0&&e<k||b<0&&e>k){continue}q[i%2?'moveTo':'lineTo'](a>=0?hd(c,g):hb(c,g),b>=0?hd(e,h):hb(e,h))}a=c-g;b=e-h;this._dashOffset=-cs(a*a+b*b)},_dashedBezierTo:function(q,t,r,u,h,i){var v=this._dashSum;var e=this._dashOffset;var m=this._lineDash;var o=this._ctx;var p=this._xi;var s=this._yi;var a;var f;var g;var c=cubicAt;var l=0;var b=this._dashIdx;var w=m.length;var j;var k;var n=0;if(e<0){e=v+e}e%=v;for(a=0;a<1;a+=0.1){f=c(p,q,r,h,a+0.1)-c(p,q,r,h,a);g=c(s,t,u,i,a+0.1)-c(s,t,u,i,a);l+=cs(f*f+g*g)}for(;b<w;b++){n+=m[b];if(n>e){break}}a=(n-e)/l;while(a<=1){j=c(p,q,r,h,a);k=c(s,t,u,i,a);b%2?o.moveTo(j,k):o.lineTo(j,k);a+=m[b]/l;b=(b+1)%w}b%2!==0&&o.lineTo(h,i);f=h-j;g=i-k;this._dashOffset=-cs(f*f+g*g)},_dashedQuadraticTo:function(a,c,b,e){var f=b;var g=e;b=(b+2*a)/3;e=(e+2*c)/3;a=(this._xi+2*a)/3;c=(this._yi+2*c)/3;this._dashedBezierTo(a,c,b,e,f,g)},toStatic:function(){var a=this.data;if(a instanceof Array){a.length=this._len;if(dR){this.data=new Float32Array(a)}}},getBoundingRect:function(){$[0]=$[1]=aa[0]=aa[1]=Number.MAX_VALUE;ax[0]=ax[1]=_[0]=_[1]=-Number.MAX_VALUE;var b=this.data;var c=0;var e=0;var f=0;var g=0;for(var a=0;a<b.length;){var r=b[a++];if(a==1){c=b[a];e=b[a+1];f=c;g=e}switch(r){case o.M:f=b[a++];g=b[a++];c=f;e=g;aa[0]=f;aa[1]=g;_[0]=f;_[1]=g;break;case o.L:fromLine(c,e,b[a],b[a+1],aa,_);c=b[a++];e=b[a++];break;case o.C:fromCubic(c,e,b[a++],b[a++],b[a++],b[a++],b[a],b[a+1],aa,_);c=b[a++];e=b[a++];break;case o.Q:fromQuadratic(c,e,b[a++],b[a++],b[a],b[a+1],aa,_);c=b[a++];e=b[a++];break;case o.A:var j=b[a++];var k=b[a++];var l=b[a++];var m=b[a++];var h=b[a++];var i=b[a++]+h;var s=b[a++];var n=1-b[a++];if(a==1){f=bD(h)*l+j;g=bH(h)*m+k};fromArc(j,k,l,m,h,i,n,aa,_);c=bD(i)*l+j;e=bH(i)*m+k;break;case o.R:f=c=b[a++];g=e=b[a++];var q=b[a++];var p=b[a++];fromLine(f,g,f+q,g+p,aa,_);break;case o.Z:c=f;e=g;break;}min($,$,aa);max(ax,ax,_)}if(a===0){$[0]=$[1]=ax[0]=ax[1]=0}return new BoundingRect($[0],$[1],ax[0]-$[0],ax[1]-$[1])},rebuildPath:function(c){var b=this.data;var l,m;var e,f;var p,q;var A=this._ux;var B=this._uy;var r=this._len;for(var a=0;a<r;){var z=b[a++];if(a==1){e=b[a];f=b[a+1];l=e;m=f}switch(z){case o.M:l=e=b[a++];m=f=b[a++];c.moveTo(e,f);break;case o.L:p=b[a++];q=b[a++];if(bi(p-e)>A||bi(q-f)>B||a===r-1){c.lineTo(p,q);e=p;f=q};break;case o.C:c.bezierCurveTo(b[a++],b[a++],b[a++],b[a++],b[a++],b[a++]);e=b[a-2];f=b[a-1];break;case o.Q:c.quadraticCurveTo(b[a++],b[a++],b[a++],b[a++]);e=b[a-2];f=b[a-1];break;case o.A:var j=b[a++];var k=b[a++];var g=b[a++];var h=b[a++];var i=b[a++];var y=b[a++];var u=b[a++];var v=b[a++];var w=g>h?g:h;var s=g>h?1:g/h;var t=g>h?h/g:1;var x=Math.abs(g-h)>0.001;var n=i+y;if(x){c.translate(j,k);c.rotate(u);c.scale(s,t);c.arc(0,0,w,i,n,1-v);c.scale(1/s,1/t);c.rotate(-u);c.translate(-j,-k)}else {c.arc(j,k,w,i,n,1-v)};if(a==1){l=bD(i)*g+j;m=bH(i)*h+k};e=bD(n)*g+j;f=bH(n)*h+k;break;case o.R:l=e=b[a];m=f=b[a+1];c.rect(b[a++],b[a++],b[a++],b[a++]);break;case o.Z:c.closePath();e=l;f=m;}}}};E.CMD=o;function containStroke$1(b,h,c,i,j,e,f){if(j===0){return !1}var a=j;var g=0;var l=b;if(f>h+a&&f>i+a||f<h-a&&f<i-a||e>b+a&&e>c+a||e<b-a&&e<c-a){return !1}if(b!==c){g=(h-i)/(b-c);l=(b*i-c*h)/(b-c)}else {return Math.abs(e-b)<=a/2}var k=g*e-f+l;var m=k*k/(g*g+1);return m<=a/2*a/2}function containStroke$2(e,i,f,j,g,k,h,l,m,b,c){if(m===0){return !1}var a=m;if(c>i+a&&c>j+a&&c>k+a&&c>l+a||c<i-a&&c<j-a&&c<k-a&&c<l-a||b>e+a&&b>f+a&&b>g+a&&b>h+a||b<e-a&&b<f-a&&b<g-a&&b<h-a){return !1}var n=cubicProjectPoint(e,i,f,j,g,k,h,l,b,c,null);return n<=a/2}function containStroke$3(e,h,f,i,g,j,k,b,c){if(k===0){return !1}var a=k;if(c>h+a&&c>i+a&&c>j+a||c<h-a&&c<i-a&&c<j-a||b>e+a&&b>f+a&&b>g+a||b<e-a&&b<f-a&&b<g-a){return !1}var l=quadraticProjectPoint(e,h,f,i,g,j,b,c,null);return l<=a/2}var hQ=Math.PI*2;function normalizeRadian(a){a%=hQ;if(a<0){a+=hQ}return a}var bS=Math.PI*2;function containStroke$4(m,n,j,b,a,k,g,e,f){if(g===0){return !1}var h=g;e-=m;f-=n;var i=Math.sqrt(e*e+f*f);if(i-h>j||i+h<j){return !1}if(Math.abs(b-a)%bS<1.0E-4){return !0}if(k){var l=b;b=normalizeRadian(a);a=normalizeRadian(l)}else {b=normalizeRadian(b);a=normalizeRadian(a)}if(b>a){a+=bS}var c=Math.atan2(f,e);if(c<0){c+=bS}return c>=b&&c<=a||c+bS>=b&&c+bS<=a}function windingLine(g,a,h,b,j,c){if(c>a&&c>b||c<a&&c<b){return 0}if(b===a){return 0}var f=b<a?1:-1;var e=(c-a)/(b-a);if(e===1||e===0){f=b<a?0.5:-0.5}var i=e*(h-g)+g;return i>j?f:0}var aw=E.CMD;var bo=Math.PI*2;var lN=1.0E-4;function isAroundEqual(a,b){return Math.abs(a-b)<lN}var w=[-1,-1,-1];var K=[-1,-1];function swapExtrema(){var a=K[0];K[0]=K[1];K[1]=a}function windingCubic(o,c,p,f,q,g,r,e,t,b){if(b>c&&b>f&&b>g&&b>e||b<c&&b<f&&b<g&&b<e){return 0}var n=cubicRootAt(c,f,g,e,b,w);if(n===0){return 0}else {var i=0;var j=-1;var k,l;for(var m=0;m<n;m++){var h=w[m];var a=h===0||h===1?0.5:1;var s=cubicAt(o,p,q,r,h);if(s<t){continue}if(j<0){j=cubicExtrema(c,f,g,e,K);if(K[1]<K[0]&&j>1){swapExtrema()}k=cubicAt(c,f,g,e,K[0]);if(j>1){l=cubicAt(c,f,g,e,K[1])}}if(j==2){if(h<K[0]){i+=k<c?a:-a}else {if(h<K[1]){i+=l<k?a:-a}else {i+=e<l?a:-a}}}else {if(h<K[0]){i+=k<c?a:-a}else {i+=e<k?a:-a}}}return i}}function windingQuadratic(l,b,m,g,n,c,p,e){if(e>b&&e>g&&e>c||e<b&&e<g&&e<c){return 0}var k=quadraticRootAt(b,g,c,e,w);if(k===0){return 0}else {var h=quadraticExtremum(b,g,c);if(h>=0&&h<=1){var j=0;var o=quadraticAt(b,g,c,h);for(var f=0;f<k;f++){var a=w[f]===0||w[f]===1?0.5:1;var i=quadraticAt(l,m,n,w[f]);if(i<p){continue}if(w[f]<h){j+=o<b?a:-a}else {j+=c<o?a:-a}}return j}else {var a=w[0]===0||w[0]===1?0.5:1;var i=quadraticAt(l,m,n,w[0]);if(i<p){return 0}return c<b?a:-a}}}function windingArc(j,p,h,b,a,i,l,e){e-=p;if(e>h||e<-h){return 0}var g=Math.sqrt(h*h-e*e);w[0]=-g;w[1]=g;var m=Math.abs(b-a);if(m<1.0E-4){return 0}if(m%bo<1.0E-4){b=0;a=bo;var f=i?1:-1;if(l>=w[0]+j&&l<=w[1]+j){return f}else {return 0}}if(i){var g=b;b=normalizeRadian(a);a=normalizeRadian(g)}else {b=normalizeRadian(b);a=normalizeRadian(a)}if(b>a){a+=bo}var o=0;for(var k=0;k<2;k++){var n=w[k];if(n+j>l){var c=Math.atan2(e,n);var f=i?1:-1;if(c<0){c=bo+c}if(c>=b&&c<=a||c+bo>=b&&c+bo<=a){if(c>Math.PI/2&&c<Math.PI*1.5){f=-f}o+=f}}}return o}function containPath(b,k,n,h,f){var j=0;var e=0;var c=0;var i=0;var g=0;for(var a=0;a<b.length;){var v=b[a++];if(v===aw.M&&a>1){if(!n){j+=windingLine(e,c,i,g,h,f)}}if(a==1){e=b[a];c=b[a+1];i=e;g=c}switch(v){case aw.M:i=b[a++];g=b[a++];e=i;c=g;break;case aw.L:if(n){if(containStroke$1(e,c,b[a],b[a+1],k,h,f)){return !0}}else {j+=windingLine(e,c,b[a],b[a+1],h,f)||0};e=b[a++];c=b[a++];break;case aw.C:if(n){if(containStroke$2(e,c,b[a++],b[a++],b[a++],b[a++],b[a],b[a+1],k,h,f)){return !0}}else {j+=windingCubic(e,c,b[a++],b[a++],b[a++],b[a++],b[a],b[a+1],h,f)||0};e=b[a++];c=b[a++];break;case aw.Q:if(n){if(containStroke$3(e,c,b[a++],b[a++],b[a],b[a+1],k,h,f)){return !0}}else {j+=windingQuadratic(e,c,b[a++],b[a++],b[a],b[a+1],h,f)||0};e=b[a++];c=b[a++];break;case aw.A:var p=b[a++];var s=b[a++];var t=b[a++];var q=b[a++];var o=b[a++];var r=b[a++];var z=b[a++];var u=1-b[a++];var l=Math.cos(o)*t+p;var m=Math.sin(o)*q+s;if(a>1){j+=windingLine(e,c,l,m,h,f)}else {i=l;g=m};var w=(h-p)*q/t+p;if(n){if(containStroke$4(p,s,q,o,o+r,u,k,w,f)){return !0}}else {j+=windingArc(p,s,q,o,o+r,u,w,f)};e=Math.cos(o+r)*t+p;c=Math.sin(o+r)*q+s;break;case aw.R:i=e=b[a++];g=c=b[a++];var y=b[a++];var x=b[a++];var l=i+y;var m=g+x;if(n){if(containStroke$1(i,g,l,g,k,h,f)||containStroke$1(l,g,l,m,k,h,f)||containStroke$1(l,m,i,m,k,h,f)||containStroke$1(i,m,i,g,k,h,f)){return !0}}else {j+=windingLine(l,g,l,m,h,f);j+=windingLine(i,m,i,g,h,f)};break;case aw.Z:if(n){if(containStroke$1(e,c,i,g,k,h,f)){return !0}}else {j+=windingLine(e,c,i,g,h,f)};e=i;c=g;break;}}if(!n&&!isAroundEqual(c,g)){j+=windingLine(e,c,i,g,h,f)||0}return j!==0}function contain(a,b,c){return containPath(a,0,!1,b,c)}function containStroke(b,a,c,e){return containPath(b,a,!0,c,e)}var fR=eN.prototype.getCanvasPattern;var e9=Math.abs;var jv=new E(!0);function Path(a){Displayable.call(this,a);this.path=null}Path.prototype={constructor:Path,type:'path',__dirtyPath:!0,strokeContainThreshold:5,brush:function(a,r){var b=this.style;var c=this.path||jv;var h=b.hasStroke();var k=b.hasFill();var j=b.fill;var i=b.stroke;var m=k&&!!j.colorStops;var l=h&&!!i.colorStops;var q=k&&!!j.image;var p=h&&!!i.image;b.bind(a,this,r);this.setTransform(a);if(this.__dirty){var f;if(m){f=f||this.getBoundingRect();this._fillGradient=b.getGradient(a,j,f)}if(l){f=f||this.getBoundingRect();this._strokeGradient=b.getGradient(a,i,f)}}if(m){a.fillStyle=this._fillGradient}else {if(q){a.fillStyle=fR.call(j,a)}}if(l){a.strokeStyle=this._strokeGradient}else {if(p){a.strokeStyle=fR.call(i,a)}}var e=b.lineDash;var n=b.lineDashOffset;var g=!!a.setLineDash;var o=this.getGlobalScale();c.setScale(o[0],o[1]);if(this.__dirtyPath||e&&!g&&h){c.beginPath(a);if(e&&!g){c.setLineDash(e);c.setLineDashOffset(n)}this.buildPath(c,this.shape,!1);if(this.path){this.__dirtyPath=!1}}else {a.beginPath();this.path.rebuildPath(a)}k&&c.fill(a);if(e&&g){a.setLineDash(e);a.lineDashOffset=n}h&&c.stroke(a);if(e&&g){a.setLineDash([])}this.restoreTransform(a);if(b.text!=null){this.drawRectText(a,this.getBoundingRect())}},buildPath:function(c,b,a){},createPathProxy:function(){this.path=new E()},getBoundingRect:function(){var b=this._rect;var g=this.style;var h=!b;if(h){var f=this.path;if(!f){f=this.path=new E()}if(this.__dirtyPath){f.beginPath();this.buildPath(f,this.shape,!1)}b=f.getBoundingRect()}this._rect=b;if(g.hasStroke()){var a=this._rectWithStroke||(this._rectWithStroke=b.clone());if(this.__dirty||h){a.copy(b);var c=g.lineWidth;var e=g.strokeNoScale?this.getLineScale():1;if(!g.hasFill()){c=Math.max(c,this.strokeContainThreshold||4)}if(e>1.0E-10){a.width+=c/e;a.height+=c/e;a.x-=c/e/2;a.y-=c/e/2}}return a}return b},contain:function(b,c){var g=this.transformCoordToLocal(b,c);var i=this.getBoundingRect();var a=this.style;b=g[0];c=g[1];if(i.contain(b,c)){var h=this.path.data;if(a.hasStroke()){var e=a.lineWidth;var f=a.strokeNoScale?this.getLineScale():1;if(f>1.0E-10){if(!a.hasFill()){e=Math.max(e,this.strokeContainThreshold)}if(containStroke(h,e/f,b,c)){return !0}}}if(a.hasFill()){return contain(h,b,c)}}return !1},dirty:function(a){if(a==null){a=!0}if(a){this.__dirtyPath=a;this._rect=null}this.__dirty=!0;this.__zr&&this.__zr.refresh();if(this.__clipTarget){this.__clipTarget.dirty()}},animateShape:function(a){return this.animate('shape',a)},attrKV:function(b,a){if(b==='shape'){this.setShape(a);this.__dirtyPath=!0;this._rect=null}else {Displayable.prototype.attrKV.call(this,b,a)}},setShape:function(a,e){var b=this.shape;if(b){if(isObject(a)){for(var c in a){if(a.hasOwnProperty(c)){b[c]=a[c]}}}else {b[a]=e}this.dirty(!0)}return this},getLineScale:function(){var a=this.transform;return a&&e9(a[0]-1)>1.0E-10&&e9(a[3]-1)>1.0E-10?Math.sqrt(e9(a[0]*a[3]-a[2]*a[1])):1}};Path.extend=function(a){var c=function(f){Path.call(this,f);if(a.style){this.style.extendFrom(a.style,!1)}var b=a.shape;if(b){this.shape=this.shape||{};var e=this.shape;for(var c in b){if(!e.hasOwnProperty(c)&&b.hasOwnProperty(c)){e[c]=b[c]}}}a.init&&a.init.call(this,f)};inherits(c,Path);for(var b in a){if(b!=='style'&&b!=='shape'){c.prototype[b]=a[b]}}return c};inherits(Path,Displayable);var bm=E.CMD;var mH=[[],[],[]];var g$=Math.sqrt;var l2=Math.atan2;var kp=function(m,e){var a=m.data;var l;var g;var b;var f;var h;var c;var q=bm.M;var o=bm.C;var p=bm.L;var s=bm.R;var n=bm.A;var r=bm.Q;for(b=0,f=0;b<a.length;){l=a[b++];f=b;g=0;switch(l){case q:g=1;break;case p:g=1;break;case o:g=3;break;case r:g=2;break;case n:var t=e[4];var u=e[5];var i=g$(e[0]*e[0]+e[1]*e[1]);var j=g$(e[2]*e[2]+e[3]*e[3]);var k=l2(-e[1]/j,e[0]/i);a[b]*=i;a[b++]+=t;a[b]*=j;a[b++]+=u;a[b++]*=i;a[b++]*=j;a[b++]+=k;a[b++]+=k;b+=2;f=b;break;case s:c[0]=a[b++];c[1]=a[b++];applyTransform(c,c,e);a[f++]=c[0];a[f++]=c[1];c[0]+=a[b++];c[1]+=a[b++];applyTransform(c,c,e);a[f++]=c[0];a[f++]=c[1];}for(h=0;h<g;h++){var c=mH[h];c[0]=a[b++];c[1]=a[b++];applyTransform(c,c,e);a[f++]=c[0];a[f++]=c[1]}}};var fe=['m','M','l','L','v','V','h','H','z','Z','c','C','q','Q','t','T','s','S','a','A'];var eH=Math.sqrt;var cP=Math.sin;var cL=Math.cos;var c5=Math.PI;var h$=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])};var e2=function(a,b){return (a[0]*b[0]+a[1]*b[1])/(h$(a)*h$(b))};var hO=function(a,b){return (a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(e2(a,b))};function processArc(l,n,m,o,y,j,a,b,s,v,u){var g=s*(c5/180);var c=cL(g)*(l-m)/2+cP(g)*(n-o)/2;var e=-1*cP(g)*(l-m)/2+cL(g)*(n-o)/2;var k=c*c/(a*a)+e*e/(b*b);if(k>1){a*=eH(k);b*=eH(k)}var r=(y===j?-1:1)*eH((a*a*(b*b)-a*a*(e*e)-b*b*(c*c))/(a*a*(e*e)+b*b*(c*c)))||0;var h=r*a*e/b;var i=r*-b*c/a;var w=(l+m)/2+cL(g)*h-cP(g)*i;var x=(n+o)/2+cP(g)*h+cL(g)*i;var t=hO([1,0],[(c-h)/a,(e-i)/b]);var p=[(c-h)/a,(e-i)/b];var q=[(-1*c-h)/a,(-1*e-i)/b];var f=hO(p,q);if(e2(p,q)<=-1){f=c5}if(e2(p,q)>=1){f=0}if(j===0&&f>0){f=f-2*c5}if(j===1&&f<0){f=f+2*c5}u.addData(v,w,x,a,b,t,f,g,j)}function createPathProxyFromString(y){if(!y){return []}var x=y.replace(/-/g,' -').replace(/  /g,' ').replace(/ /g,',').replace(/,,/g,',');var o;for(o=0;o<fe.length;o++){x=x.replace(new RegExp(fe[o],'g'),'|'+fe[o])}var z=x.split('|');var c=0;var e=0;var g=new E();var h=E.CMD;var p;for(o=1;o<z.length;o++){var A=z[o];var q=A.charAt(0);var b=0;var a=A.slice(1).replace(/e,-/g,'e-').split(',');var f;if(a.length>0&&a[0]===''){a.shift()}for(var w=0;w<a.length;w++){a[w]=parseFloat(a[w])}while(b<a.length&&!isNaN(a[b])){if(isNaN(a[0])){break}var i;var j;var u;var v;var r;var s;var t;var k=c;var l=e;switch(q){case 'l':c+=a[b++];e+=a[b++];f=h.L;g.addData(f,c,e);break;case 'L':c=a[b++];e=a[b++];f=h.L;g.addData(f,c,e);break;case 'm':c+=a[b++];e+=a[b++];f=h.M;g.addData(f,c,e);q='l';break;case 'M':c=a[b++];e=a[b++];f=h.M;g.addData(f,c,e);q='L';break;case 'h':c+=a[b++];f=h.L;g.addData(f,c,e);break;case 'H':c=a[b++];f=h.L;g.addData(f,c,e);break;case 'v':e+=a[b++];f=h.L;g.addData(f,c,e);break;case 'V':e=a[b++];f=h.L;g.addData(f,c,e);break;case 'C':f=h.C;g.addData(f,a[b++],a[b++],a[b++],a[b++],a[b++],a[b++]);c=a[b-2];e=a[b-1];break;case 'c':f=h.C;g.addData(f,a[b++]+c,a[b++]+e,a[b++]+c,a[b++]+e,a[b++]+c,a[b++]+e);c+=a[b-2];e+=a[b-1];break;case 'S':i=c;j=e;var n=g.len();var m=g.data;if(p===h.C){i+=c-m[n-4];j+=e-m[n-3]};f=h.C;k=a[b++];l=a[b++];c=a[b++];e=a[b++];g.addData(f,i,j,k,l,c,e);break;case 's':i=c;j=e;var n=g.len();var m=g.data;if(p===h.C){i+=c-m[n-4];j+=e-m[n-3]};f=h.C;k=c+a[b++];l=e+a[b++];c+=a[b++];e+=a[b++];g.addData(f,i,j,k,l,c,e);break;case 'Q':k=a[b++];l=a[b++];c=a[b++];e=a[b++];f=h.Q;g.addData(f,k,l,c,e);break;case 'q':k=a[b++]+c;l=a[b++]+e;c+=a[b++];e+=a[b++];f=h.Q;g.addData(f,k,l,c,e);break;case 'T':i=c;j=e;var n=g.len();var m=g.data;if(p===h.Q){i+=c-m[n-4];j+=e-m[n-3]};c=a[b++];e=a[b++];f=h.Q;g.addData(f,i,j,c,e);break;case 't':i=c;j=e;var n=g.len();var m=g.data;if(p===h.Q){i+=c-m[n-4];j+=e-m[n-3]};c+=a[b++];e+=a[b++];f=h.Q;g.addData(f,i,j,c,e);break;case 'A':u=a[b++];v=a[b++];r=a[b++];s=a[b++];t=a[b++];k=c,l=e;c=a[b++];e=a[b++];f=h.A;processArc(k,l,c,e,s,t,u,v,r,f,g);break;case 'a':u=a[b++];v=a[b++];r=a[b++];s=a[b++];t=a[b++];k=c,l=e;c+=a[b++];e+=a[b++];f=h.A;processArc(k,l,c,e,s,t,u,v,r,f,g);break;}}if(q==='z'||q==='Z'){f=h.Z;g.addData(f)}p=f}g.toStatic();return g}function createPathOptions(c,a){var b=createPathProxyFromString(c);a=a||{};a.buildPath=function(e){if(e.setData){e.setData(b.data);var f=e.getContext();if(f){e.rebuildPath(f)}}else {var f=e;b.rebuildPath(f)}};a.applyTransform=function(e){kp(b,e);this.dirty(!0)};return a}function createFromString(b,a){return new Path(createPathOptions(b,a))}function extendFromString(b,a){return Path.extend(createPathOptions(b,a))}function mergePath$1(f,g){var e=[];var h=f.length;for(var c=0;c<h;c++){var a=f[c];if(!a.path){a.createPathProxy()}if(a.__dirtyPath){a.buildPath(a.path,a.shape,!0)}e.push(a.path)}var b=new Path(g);b.createPathProxy();b.buildPath=function(a){a.appendPath(e);var b=a.getContext();if(b){a.rebuildPath(b)}};return b}var e=function(a){Displayable.call(this,a)};e.prototype={constructor:e,type:'text',brush:function(c,e){var a=this.style;this.__dirty&&normalizeTextStyle(a,!0);a.fill=a.stroke=a.shadowBlur=a.shadowColor=a.shadowOffsetX=a.shadowOffsetY=null;var b=a.text;b!=null&&(b+='');a.bind(c,this,e);if(!needDrawText(b,a)){return}this.setTransform(c);renderText(this,c,b,a);this.restoreTransform(c)},getBoundingRect:function(){var a=this.style;this.__dirty&&normalizeTextStyle(a,!0);if(!this._rect){var e=a.text;e!=null?e+='':e='';var b=getBoundingRect(a.text+'',a.font,a.textAlign,a.textVerticalAlign,a.textPadding,a.rich);b.x+=a.x||0;b.y+=a.y||0;if(getStroke(a.textStroke,a.textStrokeWidth)){var c=a.textStrokeWidth;b.x-=c/2;b.y-=c/2;b.width+=c;b.height+=c}this._rect=b}return this._rect}};inherits(e,Displayable);var aT=Path.extend({type:'circle',shape:{cx:0,cy:0,r:0},buildPath:function(b,a,c){if(c){b.moveTo(a.cx+a.r,a.cy)}b.arc(a.cx,a.cy,a.r,0,Math.PI*2,!0)}});var an=[['shadowBlur',0],['shadowColor','#000'],['shadowOffsetX',0],['shadowOffsetY',0]];var dn=function(a){return f.browser.ie&&f.browser.version>=11?function(){var f=this.__clipPaths;var g=this.style;var i;if(f){for(var h=0;h<f.length;h++){var e=f[h];var c=e&&e.shape;var j=e&&e.type;if(c&&(j==='sector'&&c.startAngle===c.endAngle||j==='rect'&&(!c.width||!c.height))){for(var b=0;b<an.length;b++){an[b][2]=g[an[b][0]];g[an[b][0]]=an[b][1]}i=!0;break}}}a.apply(this,arguments);if(i){for(var b=0;b<an.length;b++){g[an[b][0]]=an[b][2]}}}:a};var as=Path.extend({type:'sector',shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:!0},brush:dn(Path.prototype.brush),buildPath:function(b,a){var e=a.cx;var f=a.cy;var c=Math.max(a.r0||0,0);var i=Math.max(a.r,0);var g=a.startAngle;var h=a.endAngle;var j=a.clockwise;var k=Math.cos(g);var l=Math.sin(g);b.moveTo(k*c+e,l*c+f);b.lineTo(k*i+e,l*i+f);b.arc(e,f,i,g,h,!j);b.lineTo(Math.cos(h)*c+e,Math.sin(h)*c+f);if(c!==0){b.arc(e,f,c,h,g,j)}b.closePath()}});var hW=Path.extend({type:'ring',shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(b,a){var c=a.cx;var e=a.cy;var f=Math.PI*2;b.moveTo(c+a.r,e);b.arc(c,e,a.r,0,f,!1);b.moveTo(c+a.r0,e);b.arc(c,e,a.r0,0,f,!0)}});function interpolate(f,a,b,g,j,h,i){var c=(b-f)*0.5;var e=(g-a)*0.5;return (2*(a-b)+c+e)*i+(-3*(a-b)-2*c-e)*h+c*j+a}var kZ=function(c,m){var a=c.length;var o=[];var l=0;for(var e=1;e<a;e++){l+=distance(c[e-1],c[e])}var f=l/2;f=f<a?a:f;for(var e=0;e<f;e++){var n=e/(f-1)*(m?a:a-1);var b=Math.floor(n);var g=n-b;var h;var p=c[b%a];var i;var j;if(!m){h=c[b===0?b:b-1];i=c[b>a-2?a-1:b+1];j=c[b>a-3?a-1:b+2]}else {h=c[(b-1+a)%a];i=c[(b+1)%a];j=c[(b+2)%a]}var k=g*g;var q=g*k;o.push([interpolate(h[0],p[0],i[0],j[0],g,k,q),interpolate(h[1],p[1],i[1],j[1],g,k,q)])}return o};var kY=function(b,u,r,k){var g=[];var j=[];var s=[];var t=[];var m;var l;var e,c;if(k){e=[Infinity,Infinity];c=[-Infinity,-Infinity];for(var a=0,f=b.length;a<f;a++){min(e,e,b[a]);max(c,c,b[a])}min(e,e,k[0]);max(c,c,k[1])}for(var a=0,f=b.length;a<f;a++){var n=b[a];if(r){m=b[a?a-1:f-1];l=b[(a+1)%f]}else {if(a===0||a===f-1){g.push(clone$1(b[a]));continue}else {m=b[a-1];l=b[a+1]}}sub(j,l,m);scale(j,j,u);var p=distance(n,m);var q=distance(n,l);var o=p+q;if(o!==0){p/=o;q/=o}scale(s,j,-p);scale(t,j,q);var h=add([],n,s);var i=add([],n,t);if(k){max(h,h,e);min(h,h,c);max(i,i,e);min(i,i,c)}g.push(h);g.push(i)}if(r){g.push(g.shift())}return g};function buildPath$1(c,g,e){var a=g.points;var f=g.smooth;if(a&&a.length>=2){if(f&&f!=='spline'){var i=kY(a,f,e,g.smoothConstraint);c.moveTo(a[0][0],a[0][1]);var h=a.length;for(var b=0;b<(e?h:h-1);b++){var j=i[b*2];var k=i[b*2+1];var l=a[(b+1)%h];c.bezierCurveTo(j[0],j[1],k[0],k[1],l[0],l[1])}}else {if(f==='spline'){a=kZ(a,e)}c.moveTo(a[0][0],a[0][1]);for(var b=1,m=a.length;b<m;b++){c.lineTo(a[b][0],a[b][1])}}e&&c.closePath()}}var J=Path.extend({type:'polygon',shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(b,a){buildPath$1(b,a,!0)}});var T=Path.extend({type:'polyline',shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:'#000',fill:null},buildPath:function(b,a){buildPath$1(b,a,!1)}});var k=Path.extend({type:'rect',shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(b,a){var f=a.x;var g=a.y;var e=a.width;var c=a.height;if(!a.r){b.rect(f,g,e,c)}else {buildPath(b,a)}b.closePath();return}});var L=Path.extend({type:'line',shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:'#000',fill:null},buildPath:function(f,b){var g=b.x1;var h=b.y1;var c=b.x2;var e=b.y2;var a=b.percent;if(a===0){return}f.moveTo(g,h);if(a<1){c=g*(1-a)+c*a;e=h*(1-a)+e*a}f.lineTo(c,e)},pointAt:function(b){var a=this.shape;return [a.x1*(1-b)+a.x2*b,a.y1*(1-b)+a.y2*b]}});var A=[];function someVectorAt(a,c,b){var e=a.cpx2;var f=a.cpy2;if(e===null||f===null){return [(b?cubicDerivativeAt:cubicAt)(a.x1,a.cpx1,a.cpx2,a.x2,c),(b?cubicDerivativeAt:cubicAt)(a.y1,a.cpy1,a.cpy2,a.y2,c)]}else {return [(b?quadraticDerivativeAt:quadraticAt)(a.x1,a.cpx1,a.x2,c),(b?quadraticDerivativeAt:quadraticAt)(a.y1,a.cpy1,a.y2,c)]}}var d3=Path.extend({type:'bezier-curve',shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:'#000',fill:null},buildPath:function(j,a){var k=a.x1;var l=a.y1;var f=a.x2;var g=a.y2;var c=a.cpx1;var e=a.cpy1;var h=a.cpx2;var i=a.cpy2;var b=a.percent;if(b===0){return}j.moveTo(k,l);if(h==null||i==null){if(b<1){quadraticSubdivide(k,c,f,b,A);c=A[1];f=A[2];quadraticSubdivide(l,e,g,b,A);e=A[1];g=A[2]}j.quadraticCurveTo(c,e,f,g)}else {if(b<1){cubicSubdivide(k,c,h,f,b,A);c=A[1];h=A[2];f=A[3];cubicSubdivide(l,e,i,g,b,A);e=A[1];i=A[2];g=A[3]}j.bezierCurveTo(c,e,h,i,f,g)}},pointAt:function(a){return someVectorAt(this.shape,a,!1)},tangentAt:function(b){var a=someVectorAt(this.shape,b,!0);return normalize(a,a)}});var h1=Path.extend({type:'arc',shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:!0},style:{stroke:'#000',fill:null},buildPath:function(e,a){var f=a.cx;var g=a.cy;var c=Math.max(a.r,0);var b=a.startAngle;var i=a.endAngle;var h=a.clockwise;var j=Math.cos(b);var k=Math.sin(b);e.moveTo(j*c+f,k*c+g);e.arc(f,g,c,b,i,!h)}});var gy=Path.extend({type:'compound',shape:{paths:null},_updatePathDirty:function(){var a=this.__dirtyPath;var c=this.shape.paths;for(var b=0;b<c.length;b++){a=a||c[b].__dirtyPath}this.__dirtyPath=a;this.__dirty=this.__dirty||a},beforeBrush:function(){this._updatePathDirty();var b=this.shape.paths||[];var c=this.getGlobalScale();for(var a=0;a<b.length;a++){if(!b[a].path){b[a].createPathProxy()}b[a].path.setScale(c[0],c[1])}},buildPath:function(e,c){var b=c.paths||[];for(var a=0;a<b.length;a++){b[a].buildPath(e,b[a].shape,!0)}},afterBrush:function(){var b=this.shape.paths||[];for(var a=0;a<b.length;a++){b[a].__dirtyPath=!1}},getBoundingRect:function(){this._updatePathDirty();return Path.prototype.getBoundingRect.call(this)}});var S=function(a){this.colorStops=a||[]};S.prototype={constructor:S,addColorStop:function(a,b){this.colorStops.push({offset:a,color:b})}};var a2=function(c,e,a,b,g,f){this.x=c==null?0:c;this.y=e==null?0:e;this.x2=a==null?1:a;this.y2=b==null?0:b;this.type='linear';this.global=f||!1;S.call(this,g)};a2.prototype={constructor:a2};inherits(a2,S);var b8=function(b,c,a,f,e){this.x=b==null?0.5:b;this.y=c==null?0.5:c;this.r=a==null?0.5:a;this.type='radial';this.global=e||!1;S.call(this,f)};b8.prototype={constructor:b8};inherits(b8,S);var bk=Math.round;var cD=Math.max;var cE=Math.min;var cv={};function extendShape(a){return Path.extend(a)}function extendPath(a,b){return extendFromString(a,b)}function makePath(e,g,a,f){var b=createFromString(e,g);var c=b.getBoundingRect();if(a){if(f==='center'){a=centerGraphic(a,c)}resizePath(b,a)}return b}function makeImage(c,a,e){var b=new ZImage({style:{image:c,x:a.x,y:a.y,width:a.width,height:a.height},onload:function(f){if(e==='center'){var g={width:f.width,height:f.height};b.setStyle(centerGraphic(a,g))}}});return b}function centerGraphic(a,e){var f=e.width/e.height;var b=a.height*f;var c;if(b<=a.width){c=a.height}else {b=a.width;c=b/f}var g=a.x+a.width/2;var h=a.y+a.height/2;return {x:g-b/2,y:h-c/2,width:b,height:c}}var ae=mergePath$1;function resizePath(a,c){if(!a.applyTransform){return}var b=a.getBoundingRect();var e=b.calculateTransform(c);a.applyTransform(e)}function subPixelOptimizeLine(b){var a=b.shape;var c=b.style.lineWidth;if(bk(a.x1*2)===bk(a.x2*2)){a.x1=a.x2=subPixelOptimize(a.x1,c,!0)}if(bk(a.y1*2)===bk(a.y2*2)){a.y1=a.y2=subPixelOptimize(a.y1,c,!0)}return b}function subPixelOptimizeRect(c){var a=c.shape;var b=c.style.lineWidth;var g=a.x;var h=a.y;var f=a.width;var e=a.height;a.x=subPixelOptimize(a.x,b,!0);a.y=subPixelOptimize(a.y,b,!0);a.width=Math.max(subPixelOptimize(g+f,b,!1)-a.x,f===0?0:1);a.height=Math.max(subPixelOptimize(h+e,b,!1)-a.y,e===0?0:1);return c}function subPixelOptimize(e,c,b){var a=bk(e*2);return (a+bk(c))%2===0?a/2:(a+(b?1:-1))/2}function hasFillOrStroke(a){return a!=null&&a!='none'}function liftColor(a){return typeof a==='string'?lift(a,-0.1):a}function cacheElementStl(a){if(a.__hoverStlDirty){var f=a.style.stroke;var g=a.style.fill;var b=a.__hoverStl;b.fill=b.fill||(hasFillOrStroke(g)?liftColor(g):null);b.stroke=b.stroke||(hasFillOrStroke(f)?liftColor(f):null);var e={};for(var c in b){if(b[c]!=null){e[c]=a.style[c]}}a.__normalStl=e;a.__hoverStlDirty=!1}}function doSingleEnterHover(a){if(a.__isHover){return}cacheElementStl(a);if(a.useHoverLayer){a.__zr&&a.__zr.addHover(a,a.__hoverStl)}else {var b=a.style;var c=b.insideRollbackOpt;c&&rollbackInsideStyle(b);b.extendFrom(a.__hoverStl);if(c){applyInsideStyle(b,b.insideOriginalTextPosition,c);if(b.textFill==null){b.textFill=c.autoColor}}a.dirty(!1);a.z2+=1}a.__isHover=!0}function doSingleLeaveHover(a){if(!a.__isHover){return}var b=a.__normalStl;if(a.useHoverLayer){a.__zr&&a.__zr.removeHover(a)}else {b&&a.setStyle(b);a.z2-=1}a.__isHover=!1}function doEnterHover(a){a.type==='group'?a.traverse(function(b){if(b.type!=='group'){doSingleEnterHover(b)}}):doSingleEnterHover(a)}function doLeaveHover(a){a.type==='group'?a.traverse(function(b){if(b.type!=='group'){doSingleLeaveHover(b)}}):doSingleLeaveHover(a)}function setElementHoverStl(a,b){a.__hoverStl=a.hoverStyle||b||{};a.__hoverStlDirty=!0;if(a.__isHover){cacheElementStl(a)}}function onElementMouseOver(a){if(this.__hoverSilentOnTouch&&a.zrByTouch){return}!this.__isEmphasis&&doEnterHover(this)}function onElementMouseOut(a){if(this.__hoverSilentOnTouch&&a.zrByTouch){return}!this.__isEmphasis&&doLeaveHover(this)}function enterEmphasis(){this.__isEmphasis=!0;doEnterHover(this)}function leaveEmphasis(){this.__isEmphasis=!1;doLeaveHover(this)}function setHoverStyle(a,b,c){a.__hoverSilentOnTouch=c&&c.hoverSilentOnTouch;a.type==='group'?a.traverse(function(e){if(e.type!=='group'){setElementHoverStl(e,b)}}):setElementHoverStl(a,b);a.on('mouseover',onElementMouseOver).on('mouseout',onElementMouseOut);a.on('emphasis',enterEmphasis).on('normal',leaveEmphasis)}function setLabelStyle(l,h,k,g,a,p,o){a=a||cv;var b=a.labelFetcher;var f=a.labelDataIndex;var i=a.labelDimIndex;var m=k.getShallow('show');var j=g.getShallow('show');var n=m||j?retrieve2(b?b.getFormattedLabel(f,'normal',null,i):null,a.defaultText):null;var e=m?n:null;var c=j?retrieve2(b?b.getFormattedLabel(f,'emphasis',null,i):null,n):null;if(e!=null||c!=null){setTextStyle(l,k,p,a);setTextStyle(h,g,o,a,!0)}l.text=e;h.text=c}function setTextStyle(a,c,b,f,e){setTextStyleCommon(a,c,f,e);b&&extend(a,b);a.host&&a.host.dirty&&a.host.dirty(!1);return a}function setText(a,f,b){var e={isRectText:!0};var c;if(b===!1){c=!0}else {e.autoColor=b}setTextStyleCommon(a,f,e,c);a.host&&a.host.dirty&&a.host.dirty(!1)}function setTextStyleCommon(c,a,b,e){b=b||cv;if(b.isRectText){var g=a.getShallow('position')||(e?null:'inside');g==='outside'&&(g='top');c.textPosition=g;c.textOffset=a.getShallow('offset');var h=a.getShallow('rotate');h!=null&&(h*=Math.PI/180);c.textRotation=h;c.textDistance=retrieve2(a.getShallow('distance'),e?null:5)}var l=a.ecModel;var k=l&&l.option.textStyle;var f=getRichItemNames(a);var i;if(f){i={};for(var j in f){if(f.hasOwnProperty(j)){var m=a.getModel(['rich',j]);setTokenTextStyle(i[j]={},m,k,b,e)}}}c.rich=i;setTokenTextStyle(c,a,k,b,e,!0);if(b.forceRich&&!b.textStyle){b.textStyle={}}return c}function getRichItemNames(a){var b;while(a&&a!==a.ecModel){var c=(a.option||cv).rich;if(c){b=b||{};for(var e in c){if(c.hasOwnProperty(e)){b[e]=1}}}a=a.parentModel}return b}function setTokenTextStyle(a,b,c,e,g,h){c=!g&&c||cv;a.textFill=getAutoColor(b.getShallow('color'),e)||c.color;a.textStroke=getAutoColor(b.getShallow('textBorderColor'),e)||c.textBorderColor;a.textStrokeWidth=retrieve2(b.getShallow('textBorderWidth'),c.textBorderWidth);if(!g){if(h){var f=a.textPosition;a.insideRollback=applyInsideStyle(a,f,e);a.insideOriginalTextPosition=f;a.insideRollbackOpt=e}if(a.textFill==null){a.textFill=e.autoColor}}a.fontStyle=b.getShallow('fontStyle')||c.fontStyle;a.fontWeight=b.getShallow('fontWeight')||c.fontWeight;a.fontSize=b.getShallow('fontSize')||c.fontSize;a.fontFamily=b.getShallow('fontFamily')||c.fontFamily;a.textAlign=b.getShallow('align');a.textVerticalAlign=b.getShallow('verticalAlign')||b.getShallow('baseline');a.textLineHeight=b.getShallow('lineHeight');a.textWidth=b.getShallow('width');a.textHeight=b.getShallow('height');a.textTag=b.getShallow('tag');if(!h||!e.disableBox){a.textBackgroundColor=getAutoColor(b.getShallow('backgroundColor'),e);a.textPadding=b.getShallow('padding');a.textBorderColor=getAutoColor(b.getShallow('borderColor'),e);a.textBorderWidth=b.getShallow('borderWidth');a.textBorderRadius=b.getShallow('borderRadius');a.textBoxShadowColor=b.getShallow('shadowColor');a.textBoxShadowBlur=b.getShallow('shadowBlur');a.textBoxShadowOffsetX=b.getShallow('shadowOffsetX');a.textBoxShadowOffsetY=b.getShallow('shadowOffsetY')}a.textShadowColor=b.getShallow('textShadowColor')||c.textShadowColor;a.textShadowBlur=b.getShallow('textShadowBlur')||c.textShadowBlur;a.textShadowOffsetX=b.getShallow('textShadowOffsetX')||c.textShadowOffsetX;a.textShadowOffsetY=b.getShallow('textShadowOffsetY')||c.textShadowOffsetY}function getAutoColor(b,a){return b!=='auto'?b:a&&a.autoColor?a.autoColor:null}function applyInsideStyle(a,b,c){var f=c.useInsideStyle;var e;if(a.textFill==null&&f!==!1&&(f===!0||c.isRectText&&b&&typeof b==='string'&&b.indexOf('inside')>=0)){e={textFill:null,textStroke:a.textStroke,textStrokeWidth:a.textStrokeWidth};a.textFill='#fff';if(a.textStroke==null){a.textStroke=c.autoColor;a.textStrokeWidth==null&&(a.textStrokeWidth=2)}}return e}function rollbackInsideStyle(b){var a=b.insideRollback;if(a){b.textFill=a.textFill;b.textStroke=a.textStroke;b.textStrokeWidth=a.textStrokeWidth}}function getFont(b,c){var a=c||c.getModel('textStyle');return [b.fontStyle||a&&a.getShallow('fontStyle')||'',b.fontWeight||a&&a.getShallow('fontWeight')||'',(b.fontSize||a&&a.getShallow('fontSize')||12)+'px',b.fontFamily||a&&a.getShallow('fontFamily')||'sans-serif'].join(' ')}function animateOrSetProps(l,e,i,a,c,b){if(typeof c==='function'){b=c;c=null}var j=a&&a.isAnimationEnabled();if(j){var h=l?'Update':'';var f=a.getShallow('animationDuration'+h);var k=a.getShallow('animationEasing'+h);var g=a.getShallow('animationDelay'+h);if(typeof g==='function'){g=g(c,a.getAnimationDelayParams?a.getAnimationDelayParams(e,c):null)}if(typeof f==='function'){f=f(c)}f>0?e.animateTo(i,f,g||0,k,b,!!b):(e.stopAnimation(),e.attr(i),b&&b())}else {e.stopAnimation();e.attr(i);b&&b()}}function updateProps(f,c,a,b,e){animateOrSetProps(!0,f,c,a,b,e)}function initProps(f,c,a,b,e){animateOrSetProps(!1,f,c,a,b,e)}function getTransform(a,c){var b=identity([]);while(a&&a!==c){mul$1(b,a.getLocalTransform(),b);a=a.parent}return b}function applyTransform$1(c,a,b){if(a&&!isArrayLike(a)){a=R.getLocalTransform(a)}if(b){a=invert([],a)}return applyTransform([],c,a)}function transformDirection(c,a,g){var e=a[4]===0||a[5]===0||a[0]===0?1:Math.abs(2*a[4]/a[0]);var f=a[4]===0||a[5]===0||a[2]===0?1:Math.abs(2*a[4]/a[2]);var b=[c==='left'?-e:c==='right'?e:0,c==='top'?-f:c==='bottom'?f:0];b=applyTransform$1(b,a,g);return Math.abs(b[0])>Math.abs(b[1])?b[0]>0?'right':'left':b[1]>0?'bottom':'top'}function groupTransition(a,b,c,f){if(!a||!b){return}function getElMap(g){var e={};g.traverse(function(h){if(!h.isGroup&&h.anid){e[h.anid]=h}});return e}function getAnimatableProps(e){var g={position:clone$1(e.position),rotation:e.rotation};if(e.shape){g.shape=extend({},e.shape)}return g}var e=getElMap(a);b.traverse(function(g){if(!g.isGroup&&g.anid){var h=e[g.anid];if(h){var i=getAnimatableProps(g);g.attr(getAnimatableProps(h));updateProps(g,i,c,g.dataIndex)}}})}function clipPointsByRect(b,a){return map(b,function(f){var c=f[0];c=cD(c,a.x);c=cE(c,a.x+a.width);var e=f[1];e=cD(e,a.y);e=cE(e,a.y+a.height);return [c,e]})}function clipRectByRect(a,b){var c=cD(a.x,b.x);var f=cE(a.x+a.width,b.x+b.width);var e=cD(a.y,b.y);var g=cE(a.y+a.height,b.y+b.height);if(f>=c&&g>=e){return {x:c,y:e,width:f-c,height:g-e}}}function createIcon(b,a,c){a=extend({rectHover:!0},a);var e=a.style={strokeNoScale:!0};c=c||{x:-1,y:-1,width:2,height:2};if(b){return b.indexOf('image://')===0?(e.image=b.slice(8),defaults(e,c),new ZImage(a)):makePath(b.replace('path://',''),a,c,'center')}}var O=(Object.freeze||Object)({extendShape:extendShape,extendPath:extendPath,makePath:makePath,makeImage:makeImage,mergePath:ae,resizePath:resizePath,subPixelOptimizeLine:subPixelOptimizeLine,subPixelOptimizeRect:subPixelOptimizeRect,subPixelOptimize:subPixelOptimize,setHoverStyle:setHoverStyle,setLabelStyle:setLabelStyle,setTextStyle:setTextStyle,setText:setText,getFont:getFont,updateProps:updateProps,initProps:initProps,getTransform:getTransform,applyTransform:applyTransform$1,transformDirection:transformDirection,groupTransition:groupTransition,clipPointsByRect:clipPointsByRect,clipRectByRect:clipRectByRect,createIcon:createIcon,Group:b,Image:ZImage,Text:e,Circle:aT,Sector:as,Ring:hW,Polygon:J,Polyline:T,Rect:k,Line:L,BezierCurve:d3,Arc:h1,CompoundPath:gy,LinearGradient:a2,RadialGradient:b8,BoundingRect:BoundingRect});var lx=['textStyle','color'];var ka={getTextColor:function(b){var a=this.ecModel;return this.getShallow('color')||(!b&&a?a.get(lx):null)},getFont:function(){return getFont({fontStyle:this.getShallow('fontStyle'),fontWeight:this.getShallow('fontWeight'),fontSize:this.getShallow('fontSize'),fontFamily:this.getShallow('fontFamily')},this.ecModel)},getTextRect:function(a){return getBoundingRect(a,this.getFont(),this.getShallow('align'),this.getShallow('verticalAlign')||this.getShallow('baseline'),this.getShallow('padding'),this.getShallow('rich'),this.getShallow('truncateText'))}};var kH=a1([['fill','color'],['stroke','borderColor'],['lineWidth','borderWidth'],['opacity'],['shadowBlur'],['shadowOffsetX'],['shadowOffsetY'],['shadowColor'],['textPosition'],['textAlign']]);var j3={getItemStyle:function(c,e){var b=kH(this,c,e);var a=this.getBorderLineDash();a&&(b.lineDash=a);return b},getBorderLineDash:function(){var a=this.get('borderType');return a==='solid'||a==null?null:a==='dashed'?[5,5]:[1,1]}};var cQ=mixin;function Model(c,a,b){this.parentModel=a;this.ecModel=b;this.option=c}Model.prototype={constructor:Model,init:null,mergeOption:function(a){merge(this.option,a,!0)},get:function(a,b){if(a==null){return this.option}return doGet(this.option,this.parsePath(a),!b&&getParent(this,a))},getShallow:function(b,f){var a=this.option;var c=a==null?a:a[b];var e=!f&&getParent(this,b);if(c==null&&e){c=e.getShallow(b)}return c},getModel:function(a,b){var e=a==null?this.option:doGet(this.option,a=this.parsePath(a));var c;b=b||(c=getParent(this,a))&&c.getModel(a);return new Model(e,b,this.ecModel)},isEmpty:function(){return this.option==null},restoreData:function(){},clone:function(){var a=this.constructor;return new a(clone(this.option))},setReadOnly:function(a){},parsePath:function(a){if(typeof a==='string'){a=a.split('.')}return a},customizeGetParent:function(a){set$1(this,'getParent',a)},isAnimationEnabled:function(){if(!f.node){if(this.option.animation!=null){return !!this.option.animation}else {if(this.parentModel){return this.parentModel.isAnimationEnabled()}}}}};function doGet(a,b,e){for(var c=0;c<b.length;c++){if(!b[c]){continue}a=a&&typeof a==='object'?a[b[c]]:null;if(a==null){break}}if(a==null&&e){a=e.get(b)}return a}function getParent(a,c){var b=get(a,'getParent');return b?b.call(a,c):a.parentModel}enableClassExtend(Model);cQ(Model,j4);cQ(Model,jY);cQ(Model,ka);cQ(Model,j3);var au=each$1;var a9=isObject;function normalizeToArray(a){return a instanceof Array?a:a==null?[]:[a]}function defaultEmphasis(a,g){if(a){var e=a.emphasis=a.emphasis||{};var f=a.normal=a.normal||{};for(var c=0,h=g.length;c<h;c++){var b=g[c];if(!e.hasOwnProperty(b)&&f.hasOwnProperty(b)){e[b]=f[b]}}}}var fC=['fontStyle','fontWeight','fontSize','fontFamily','rich','tag','color','textBorderColor','textBorderWidth','width','height','lineHeight','align','verticalAlign','baseline','shadowColor','shadowBlur','shadowOffsetX','shadowOffsetY','textShadowColor','textShadowBlur','textShadowOffsetX','textShadowOffsetY','backgroundColor','borderColor','borderWidth','borderRadius','padding'];function getDataItemValue(a){return a&&(a.value==null?a:a.value)}function isDataItemOption(a){return a9(a)&&!(a instanceof Array)}function converDataValue(a,b){var c=b&&b.type;if(c==='ordinal'){return a}if(c==='time'&&typeof a!=='number'&&a!=null&&a!=='-'){a=+parseDate(a)}return a==null||a===''?NaN:+a}var dB={getDataParams:function(a,c){var b=this.getData(c);var g=this.getRawValue(a,c);var f=b.getRawIndex(a);var i=b.getName(a,!0);var h=b.getRawDataItem(a);var e=b.getItemVisual(a,'color');return {componentType:this.mainType,componentSubType:this.subType,seriesType:this.mainType==='series'?this.subType:null,seriesIndex:this.seriesIndex,seriesId:this.id,seriesName:this.name,name:i,dataIndex:f,data:h,dataType:c,value:g,color:e,marker:getTooltipMarker(e),$vars:['seriesName','name','value']}},getFormattedLabel:function(e,c,f,g,i){c=c||'normal';var j=this.getData(f);var h=j.getItemModel(e);var a=this.getDataParams(e,f);if(g!=null&&a.value instanceof Array){a.value=a.value[g]}var b=h.get([i||'label',c,'formatter']);if(typeof b==='function'){a.status=c;return b(a)}else {if(typeof b==='string'){return formatTpl(b,a)}}},getRawValue:function(e,b){var c=this.getData(b);var a=c.getRawDataItem(e);if(a!=null){return a9(a)&&!(a instanceof Array)?a.value:a}},formatTooltip:noop};function mappingToExists(c,b){b=(b||[]).slice();var a=map(c||[],function(a,e){return {exist:a}});au(b,function(f,h){if(!a9(f)){return}for(var e=0;e<a.length;e++){if(!a[e].option&&f.id!=null&&a[e].exist.id===f.id+''){a[e].option=f;b[h]=null;return}}for(var e=0;e<a.length;e++){var g=a[e].exist;if(!a[e].option&&(g.id==null||f.id==null)&&f.name!=null&&!isIdInner(f)&&!isIdInner(g)&&g.name===f.name+''){a[e].option=f;b[h]=null;return}}});au(b,function(f,h){if(!a9(f)){return}var e=0;for(;e<a.length;e++){var g=a[e].exist;if(!a[e].option&&!isIdInner(g)&&f.id==null){a[e].option=f;break}}if(e>=a.length){a.push({option:f})}});return a}function makeIdAndName(b){var a=createHashMap();au(b,function(e,f){var c=e.exist;c&&a.set(c.id,e)});au(b,function(e,f){var c=e.option;assert(!c||c.id==null||!a.get(c.id)||a.get(c.id)===e,'id duplicates: '+(c&&c.id));c&&c.id!=null&&a.set(c.id,e);!e.keyInfo&&(e.keyInfo={})});au(b,function(g,i){var f=g.exist;var e=g.option;var c=g.keyInfo;if(!a9(e)){return}c.name=e.name!=null?e.name+'':f?f.name:'\x00-';if(f){c.id=f.id}else {if(e.id!=null){c.id=e.id+''}else {var h=0;do{c.id='\x00'+c.name+'\x00'+h++}while(a.get(c.id))}}a.set(c.id,g)})}function isIdInner(a){return a9(a)&&a.id&&(a.id+'').indexOf('\x00_ec_\x00')===0}function compressBatches(c,e){var a={};var b={};makeMap(c||[],a);makeMap(e||[],b,a);return [mapToArray(a),mapToArray(b)];function makeMap(f,l,k){for(var a=0,n=f.length;a<n;a++){var h=f[a].seriesId;var j=normalizeToArray(f[a].dataIndex);var b=k&&k[h];for(var i=0,m=j.length;i<m;i++){var g=j[i];if(b&&b[g]){b[g]=null}else {(l[h]||(l[h]={}))[g]=1}}}}function mapToArray(b,h){var f=[];for(var a in b){if(b.hasOwnProperty(a)&&b[a]!=null){if(h){f.push(+a)}else {var g=mapToArray(b[a],!0);g.length&&f.push({seriesId:a,dataIndex:g})}}}return f}}function queryDataIndex(b,a){if(a.dataIndexInside!=null){return a.dataIndexInside}else {if(a.dataIndex!=null){return isArray(a.dataIndex)?map(a.dataIndex,function(c){return b.indexOfRawIndex(c)}):b.indexOfRawIndex(a.dataIndex)}else {if(a.name!=null){return isArray(a.name)?map(a.name,function(c){return b.indexOfName(c)}):b.indexOfName(a.name)}}}}var eh=function(){var a=0;return function(){var b='\x00__ec_prop_getter_'+a++;return function(a){return a[b]||(a[b]={})}}}();function parseFinder(g,a,c){if(isString(a)){var f={};f[a+'Index']=0;a=f}var b=c&&c.defaultMainType;if(b&&!has(a,b+'Index')&&!has(a,b+'Id')&&!has(a,b+'Name')){a[b+'Index']=0}var e={};au(a,function(b,h){var b=a[h];if(h==='dataIndex'||h==='dataIndexInside'){e[h]=b;return}var k=h.match(/^(\w+)(Index|Id|Name)$/)||[];var f=k[1];var i=(k[2]||'').toLowerCase();if(!f||!i||b==null||i==='index'&&b==='none'||c&&c.includeMainTypes&&indexOf(c.includeMainTypes,f)<0){return}var j={mainType:f};if(i!=='index'||b!=='all'){j[i]=b}var l=g.queryComponents(j);e[f+'Models']=l;e[f+'Model']=l[0]});return e}function dataDimToCoordDim(b,a){var e=b.dimensions;a=b.getDimension(a);for(var c=0;c<e.length;c++){var f=b.getDimensionInfo(e[c]);if(f.name===a){return f.coordDim}}}function coordDimToDataDim(b,c){var a=[];au(b.dimensions,function(f){var e=b.getDimensionInfo(f);if(e.coordDim===c){a[e.coordDimIndex]=e.name}});return a}function otherDimToDataDim(b,c){var a=[];au(b.dimensions,function(h){var f=b.getDimensionInfo(h);var g=f.otherDims;var e=g[c];if(e!=null&&e!==!1){a[e]=f.name}});return a}function has(a,b){return a&&a.hasOwnProperty(b)}var mU=0;var lM='_';function getUID(a){return [a||'',mU++,Math.random()].join(lM)}function enableSubTypeDefaulter(a){var b={};a.registerSubTypeDefaulter=function(c,e){c=parseClassType$1(c);b[c.main]=e};a.determineSubType=function(f,g){var c=g.type;if(!c){var e=parseClassType$1(f).main;if(a.hasSubTypes(f)&&b[e]){c=b[e](g)}}return c};return a}function enableTopologicalTravel(b,a){b.topologicalTravel=function(i,l,m,n){if(!i.length){return}var k=makeDepndencyGraph(l);var f=k.graph;var g=k.noEntryList;var c={};each$1(i,function(e){c[e]=!0});while(g.length){var e=g.pop();var j=f[e];var h=!!c[e];if(h){m.call(n,e,j.originalDeps.slice());delete c[e]}each$1(j.successor,h?removeEdgeAndAdd:removeEdge)}each$1(c,function(){throw new Error('Circle dependency may exists')});function removeEdge(c){f[c].entryCount--;if(f[c].entryCount===0){g.push(c)}}function removeEdgeAndAdd(e){c[e]=!0;removeEdge(e)}};function makeDepndencyGraph(e){var c={};var f=[];each$1(e,function(h){var g=createDependencyGraphItem(c,h);var j=g.originalDeps=a(h);var i=getAvailableDependencies(j,e);g.entryCount=i.length;if(g.entryCount===0){f.push(h)}each$1(i,function(f){if(indexOf(g.predecessor,f)<0){g.predecessor.push(f)}var i=createDependencyGraphItem(c,f);if(indexOf(i.successor,f)<0){i.successor.push(h)}})});return {graph:c,noEntryList:f}}function createDependencyGraphItem(c,e){if(!c[e]){c[e]={predecessor:[],successor:[]}}return c[e]}function getAvailableDependencies(f,e){var c=[];each$1(f,function(g){indexOf(e,g)>=0&&c.push(g)});return c}}var cV=each$1;var f$=['left','right','top','bottom','width','height'];var aP=[['width','left','right'],['height','top','bottom']];function boxLayout(h,i,e,g,f){var b=0;var c=0;if(g==null){g=Infinity}if(f==null){f=Infinity}var a=0;i.eachChild(function(k,s){var p=k.position;var j=k.getBoundingRect();var o=i.childAt(s+1);var l=o&&o.getBoundingRect();var m;var n;if(h==='horizontal'){var q=j.width+(l?-l.x+j.x:0);m=b+q;if(m>g||k.newline){b=0;m=q;c+=a+e;a=j.height}else {a=Math.max(a,j.height)}}else {var r=j.height+(l?-l.y+j.y:0);n=c+r;if(n>f||k.newline){b+=a+e;c=0;n=r;a=j.width}else {a=Math.max(a,j.width)}}if(k.newline){return}p[0]=b;p[1]=c;h==='horizontal'?b=m+e:c=n+e})}var bU=boxLayout;var m7=curry(boxLayout,'vertical');var m6=curry(boxLayout,'horizontal');function getAvailableSize(a,j,b){var e=j.width;var c=j.height;var h=parsePercent$1(a.x,e);var i=parsePercent$1(a.y,c);var f=parsePercent$1(a.x2,e);var g=parsePercent$1(a.y2,c);(isNaN(h)||isNaN(parseFloat(a.x)))&&(h=0);(isNaN(f)||isNaN(parseFloat(a.x2)))&&(f=e);(isNaN(i)||isNaN(parseFloat(a.y)))&&(i=0);(isNaN(g)||isNaN(parseFloat(a.y2)))&&(g=c);b=aE(b||0);return {width:Math.max(f-h-b[1]-b[3],0),height:Math.max(g-i-b[0]-b[2],0)}}function getLayoutRect(c,o,e){e=aE(e||0);var g=o.width;var f=o.height;var h=parsePercent$1(c.left,g);var i=parsePercent$1(c.top,f);var n=parsePercent$1(c.right,g);var m=parsePercent$1(c.bottom,f);var b=parsePercent$1(c.width,g);var a=parsePercent$1(c.height,f);var k=e[2]+e[0];var j=e[1]+e[3];var l=c.aspect;if(isNaN(b)){b=g-n-j-h}if(isNaN(a)){a=f-m-k-i}if(l!=null){if(isNaN(b)&&isNaN(a)){if(l>g/f){b=g*0.8}else {a=f*0.8}}if(isNaN(b)){b=l*a}if(isNaN(a)){a=b/l}}if(isNaN(h)){h=g-n-b-j}if(isNaN(i)){i=f-m-a-k}switch(c.left||c.right){case 'center':h=g/2-b/2-e[3];break;case 'right':h=g-b-j;break;}switch(c.top||c.bottom){case 'middle':case 'center':i=f/2-a/2-e[0];break;case 'bottom':i=f-a-k;break;}h=h||0;i=i||0;if(isNaN(b)){b=g-j-h-(n||0)}if(isNaN(a)){a=f-k-i-(m||0)}var p=new BoundingRect(h+e[3],i+e[0],b,a);p.margin=e;return p}function positionElement(c,e,l,n,b){var j=!b||!b.hv||b.hv[0];var k=!b||!b.hv||b.hv[1];var f=b&&b.boundingMode||'all';if(!j&&!k){return}var a;if(f==='raw'){a=c.type==='group'?new BoundingRect(0,0,+e.width||0,+e.height||0):c.getBoundingRect()}else {a=c.getBoundingRect();if(c.needLocalTransform()){var m=c.getLocalTransform();a=a.clone();a.applyTransform(m)}}e=getLayoutRect(defaults({width:a.width,height:a.height},e),l,n);var g=c.position;var h=j?e.x-a.x:0;var i=k?e.y-a.y:0;c.attr('position',f==='raw'?[h,i]:[g[0]+h,g[1]+i])}function sizeCalculable(a,b){return a[aP[b][0]]!=null||a[aP[b][1]]!=null&&a[aP[b][2]]!=null}function mergeLayoutParam(a,c,e){!isObject(e)&&(e={});var b=e.ignoreSize;!isArray(b)&&(b=[b,b]);var f=merge$$1(aP[0],0);var g=merge$$1(aP[1],1);copy(aP[0],a,f);copy(aP[1],a,g);function merge$$1(f,n){var h={};var j=0;var g={};var m=0;var l=2;cV(f,function(b){g[b]=a[b]});cV(f,function(b){hasProp(c,b)&&(h[b]=g[b]=c[b]);hasValue(h,b)&&j++;hasValue(g,b)&&m++});if(b[n]){if(hasValue(c,f[1])){g[f[2]]=null}else {if(hasValue(c,f[2])){g[f[1]]=null}}return g}if(m===l||!j){return g}else {if(j>=l){return h}else {for(var k=0;k<f.length;k++){var i=f[k];if(!hasProp(h,i)&&hasProp(a,i)){h[i]=a[i];break}}return h}}}function hasProp(f,b){return f.hasOwnProperty(b)}function hasValue(f,b){return f[b]!=null&&f[b]!=='auto'}function copy(g,f,b){cV(g,function(h){f[h]=b[h]})}}function getLayoutParams(a){return copyLayoutParams({},a)}function copyLayoutParams(b,a){a&&b&&cV(f$,function(c){a.hasOwnProperty(c)&&(b[c]=a[c])});return b}var jZ={getBoxLayoutParams:function(){return {left:this.get('left'),top:this.get('top'),right:this.get('right'),bottom:this.get('bottom'),width:this.get('width'),height:this.get('height')}}};var lW=Array.prototype.push;var g=Model.extend({type:'component',id:'',name:'',mainType:'',subType:'',componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(e,a,c,b){Model.call(this,e,a,c,b);this.uid=getUID('componentModel')},init:function(b,c,a,e){this.mergeDefaultAndTheme(b,a)},mergeDefaultAndTheme:function(a,f){var b=this.layoutMode;var c=b?getLayoutParams(a):{};var e=f.getTheme();merge(a,e.get(this.mainType));merge(a,this.getDefaultOption());if(b){mergeLayoutParam(a,c,b)}},mergeOption:function(b,c){merge(this.option,b,!0);var a=this.layoutMode;if(a){mergeLayoutParam(this.option,b,a)}},optionUpdated:function(a,b){},getDefaultOption:function(){if(!hasOwn(this,'__defaultOption')){var c=[];var a=this.constructor;while(a){var f=a.prototype.defaultOption;f&&c.push(f);a=a.superClass}var b={};for(var e=c.length-1;e>=0;e--){b=merge(b,c[e],!0)}set$1(this,'__defaultOption',b)}return get(this,'__defaultOption')},getReferringComponents:function(a){return this.ecModel.queryComponents({mainType:a,index:this.get(a+'Index',!0),id:this.get(a+'Id',!0)})}});enableClassManagement(g,{registerWhenExtend:!0});enableSubTypeDefaulter(g);enableTopologicalTravel(g,getDependencies);function getDependencies(b){var a=[];each$1(g.getClassesByMainType(b),function(c){lW.apply(a,c.prototype.dependencies||[])});return map(a,function(a){return parseClassType$1(a).main})}mixin(g,jZ);var hn='';if(typeof navigator!=='undefined'){hn=navigator.platform||''}var kk={color:['#c23531','#2f4554','#61a0a8','#d48265','#91c7ae','#749f83','#ca8622','#bda29a','#6e7074','#546570','#c4ccd3'],textStyle:{fontFamily:hn.match(/^Win/)?'Microsoft YaHei':'sans-serif',fontSize:12,fontStyle:'normal',fontWeight:'normal'},blendMode:null,animation:'auto',animationDuration:1000,animationDurationUpdate:300,animationEasing:'exponentialOut',animationEasingUpdate:'cubicOut',animationThreshold:2000,progressiveThreshold:3000,progressive:400,hoverLayerThreshold:3000,useUTC:!1};var dm={clearColorPalette:function(){set$1(this,'colorIdx',0);set$1(this,'colorNameMap',{})},getColorFromPalette:function(b,a){a=a||this;var f=get(a,'colorIdx')||0;var c=get(a,'colorNameMap')||set$1(a,'colorNameMap',{});if(c.hasOwnProperty(b)){return c[b]}var e=this.get('color',!0)||[];if(!e.length){return}var g=e[f];if(b){c[b]=g}set$1(a,'colorIdx',(f+1)%e.length);return g}};var z=each$1;var ap=filter;var hT=map;var er=isArray;var g6=indexOf;var ef=isObject;var ds='\x00_ec_inner';var d4=Model.extend({constructor:d4,init:function(e,c,a,b){a=a||{};this.option=null;this._theme=new Model(a);this._optionManager=b},setOption:function(a,b){assert(!(ds in a),'please use chart.getOption()');this._optionManager.setOption(a,b);this.resetOption(null)},resetOption:function(a){var b=!1;var c=this._optionManager;if(!a||a==='recreate'){var g=c.mountOption(a==='recreate');if(!this.option||a==='recreate'){initBase.call(this,g)}else {this.restoreData();this.mergeOption(g)}b=!0}if(a==='timeline'||a==='media'){this.restoreData()}if(!a||a==='recreate'||a==='timeline'){var e=c.getTimelineOption(this);e&&(this.mergeOption(e),b=!0)}if(!a||a==='recreate'||a==='media'){var f=c.getMediaOption(this,this._api);if(f.length){z(f,function(c){this.mergeOption(c,b=!0)},this)}}return b},mergeOption:function(e){var b=this.option;var a=this._componentsMap;var c=[];z(e,function(f,a){if(f==null){return}if(!g.hasClass(a)){b[a]=b[a]==null?clone(f):merge(b[a],f,!0)}else {c.push(a)}});g.topologicalTravel(c,g.getAllClassMainTypes(),visitComponent,this);this._seriesIndices=this._seriesIndices||[];function visitComponent(c,j){var h=normalizeToArray(e[c]);var f=mappingToExists(a.get(c),h);makeIdAndName(f);z(f,function(a,f){var b=a.option;if(ef(b)){a.keyInfo.mainType=c;a.keyInfo.subType=determineSubType(c,b,a.exist)}});var i=getComponentsByTypes(a,j);b[c]=[];a.set(c,[]);z(f,function(k,m){var f=k.exist;var h=k.option;assert(ef(h)||f,'Empty component definition');if(!h){f.mergeOption({},this);f.optionUpdated({},!1)}else {var n=g.getClass(c,k.keyInfo.subType,!0);if(f&&f instanceof n){f.name=k.keyInfo.name;f.mergeOption(h,this);f.optionUpdated(h,!1)}else {var l=extend({dependentModels:i,componentIndex:m},k.keyInfo);f=new n(h,this,this,l);extend(f,l);f.init(h,this,this,l);f.optionUpdated(null,!0)}}a.get(c)[m]=f;b[c][m]=f.option},this);if(c==='series'){this._seriesIndices=createSeriesIndices(a.get('series'))}}},getOption:function(){var a=clone(this.option);z(a,function(b,e){if(g.hasClass(e)){var b=normalizeToArray(b);for(var c=b.length-1;c>=0;c--){if(isIdInner(b[c])){b.splice(c,1)}}a[e]=b}});delete a[ds];return a},getTheme:function(){return this._theme},getComponent:function(b,c){var a=this._componentsMap.get(b);if(a){return a[c||0]}},queryComponents:function(b){var j=b.mainType;if(!j){return []}var e=b.index;var g=b.id;var f=b.name;var a=this._componentsMap.get(j);if(!a||!a.length){return []}var c;if(e!=null){if(!er(e)){e=[e]}c=ap(hT(e,function(c){return a[c]}),function(a){return !!a})}else {if(g!=null){var i=er(g);c=ap(a,function(a){return i&&g6(g,a.id)>=0||!i&&a.id===g})}else {if(f!=null){var h=er(f);c=ap(a,function(a){return h&&g6(f,a.name)>=0||!h&&a.name===f})}else {c=a.slice()}}}return filterBySubType(c,b)},findComponents:function(a){var f=a.query;var b=a.mainType;var c=getQueryCond(f);var e=c?this.queryComponents(c):this._componentsMap.get(b);return doFilter(filterBySubType(e,a));function getQueryCond(c){var e=b+'Index';var g=b+'Id';var f=b+'Name';return c&&(c[e]!=null||c[g]!=null||c[f]!=null)?{mainType:b,index:c[e],id:c[g],name:c[f]}:null}function doFilter(b){return a.filter?ap(b,a.filter):b}},eachComponent:function(a,b,c){var e=this._componentsMap;if(typeof a==='function'){c=b;b=a;e.each(function(f,e){z(f,function(g,h){b.call(c,e,g,h)})})}else {if(isString(a)){z(e.get(a),b,c)}else {if(ef(a)){var f=this.findComponents(a);z(f,b,c)}}}},getSeriesByName:function(b){var a=this._componentsMap.get('series');return ap(a,function(a){return a.name===b})},getSeriesByIndex:function(a){return this._componentsMap.get('series')[a]},getSeriesByType:function(a){var b=this._componentsMap.get('series');return ap(b,function(b){return b.subType===a})},getSeries:function(){return this._componentsMap.get('series').slice()},eachSeries:function(b,a){assertSeriesInitialized(this);z(this._seriesIndices,function(c){var e=this._componentsMap.get('series')[c];b.call(a,e,c)},this)},eachRawSeries:function(b,a){z(this._componentsMap.get('series'),b,a)},eachSeriesByType:function(b,c,a){assertSeriesInitialized(this);z(this._seriesIndices,function(e){var f=this._componentsMap.get('series')[e];if(f.subType===b){c.call(a,f,e)}},this)},eachRawSeriesByType:function(b,c,a){return z(this.getSeriesByType(b),c,a)},isSeriesFiltered:function(a){assertSeriesInitialized(this);return indexOf(this._seriesIndices,a.componentIndex)<0},getCurrentSeriesIndices:function(){return (this._seriesIndices||[]).slice()},filterSeries:function(c,b){assertSeriesInitialized(this);var a=ap(this._componentsMap.get('series'),c,b);this._seriesIndices=createSeriesIndices(a)},restoreData:function(){var a=this._componentsMap;this._seriesIndices=createSeriesIndices(a.get('series'));var b=[];a.each(function(c,a){b.push(a)});g.topologicalTravel(b,g.getAllClassMainTypes(),function(b,c){z(a.get(b),function(a){a.restoreData()})})}});function mergeTheme(a,b){each$1(b,function(e,c){if(!g.hasClass(c)){if(typeof e==='object'){a[c]=!a[c]?clone(e):merge(a[c],e,!1)}else {if(a[c]==null){a[c]=e}}}})}function initBase(a){a=a;this.option={};this.option[ds]=1;this._componentsMap=createHashMap({series:[]});this._seriesIndices=null;mergeTheme(a,this._theme.option);merge(a,kk,!1);this.mergeOption(a)}function getComponentsByTypes(c,a){if(!isArray(a)){a=a?[a]:[]}var b={};z(a,function(e){b[e]=(c.get(e)||[]).slice()});return b}function determineSubType(c,a,b){var e=a.type?a.type:b?b.subType:g.determineSubType(c,a);return e}function createSeriesIndices(a){return hT(a,function(b){return b.componentIndex})||[]}function filterBySubType(a,b){return b.hasOwnProperty('subType')?ap(a,function(c){return c.subType===b.subType}):a}function assertSeriesInitialized(b){if(a){if(!b._seriesIndices){throw new Error('Option should contains series.')}}}mixin(d4,dm);var j1=['getDom','getZr','getWidth','getHeight','getDevicePixelRatio','dispatchAction','isDisposed','on','off','getDataURL','getConnectedDataURL','getModel','getOption','getViewOfComponentModel','getViewOfSeriesModel'];function ExtensionAPI(a){each$1(j1,function(b){this[b]=bind(a[b],a)},this)}var c8={};function CoordinateSystemManager(){this._coordinateSystems=[]}CoordinateSystemManager.prototype={constructor:CoordinateSystemManager,create:function(b,c){var a=[];each$1(c8,function(e,g){var f=e.create(b,c);a=a.concat(f||[])});this._coordinateSystems=a},update:function(a,b){each$1(this._coordinateSystems,function(c){c.update&&c.update(a,b)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}};CoordinateSystemManager.register=function(b,a){c8[b]=a};CoordinateSystemManager.get=function(a){return c8[a]};var cW=each$1;var aR=clone;var c0=map;var hz=merge;var lQ=/^(min|max)?(.+)$/;function OptionManager(a){this._api=a;this._timelineOptions=[];this._mediaList=[];this._mediaDefault;this._currentMediaIndices=[];this._optionBackup;this._newBaseOption}OptionManager.prototype={constructor:OptionManager,setOption:function(c,e){c=aR(c,!0);var b=this._optionBackup;var a=parseRawOption.call(this,c,e,!b);this._newBaseOption=a.baseOption;if(b){mergeOption(b.baseOption,a.baseOption);if(a.timelineOptions.length){b.timelineOptions=a.timelineOptions}if(a.mediaList.length){b.mediaList=a.mediaList}if(a.mediaDefault){b.mediaDefault=a.mediaDefault}}else {this._optionBackup=a}},mountOption:function(b){var a=this._optionBackup;this._timelineOptions=c0(a.timelineOptions,aR);this._mediaList=c0(a.mediaList,aR);this._mediaDefault=aR(a.mediaDefault);this._currentMediaIndices=[];return aR(b?a.baseOption:this._newBaseOption)},getTimelineOption:function(e){var c;var a=this._timelineOptions;if(a.length){var b=e.getComponent('timeline');if(b){c=aR(a[b.getCurrentIndex()],!0)}}return c},getMediaOption:function(j){var h=this._api.getWidth();var g=this._api.getHeight();var b=this._mediaList;var e=this._mediaDefault;var a=[];var f=[];if(!b.length&&!e){return f}for(var c=0,i=b.length;c<i;c++){if(applyMediaQuery(b[c].query,h,g)){a.push(c)}}if(!a.length&&e){a=[-1]}if(a.length&&!indicesEquals(a,this._currentMediaIndices)){f=c0(a,function(a){return aR(a===-1?e.option:b[a].option)})}this._currentMediaIndices=a;return f}};function parseRawOption(b,h,i){var c=[];var f=[];var e;var a;var g=b.timeline;if(b.baseOption){a=b.baseOption}if(g||b.options){a=a||{};c=(b.options||[]).slice()}if(b.media){a=a||{};var j=b.media;cW(j,function(a){if(a&&a.option){if(a.query){f.push(a)}else {if(!e){e=a}}}})}if(!a){a=b}if(!a.timeline){a.timeline=g}cW([a].concat(c).concat(map(f,function(a){return a.option})),function(a){cW(h,function(c){c(a,i)})});return {baseOption:a,timelineOptions:c,mediaDefault:e,mediaList:f}}function applyMediaQuery(f,c,b){var e={width:c,height:b,aspectratio:c/b};var a=!0;each$1(f,function(j,k){var g=k.match(lQ);if(!g||!g[1]||!g[2]){return}var h=g[1];var i=g[2].toLowerCase();if(!compare(e[i],j,h)){a=!1}});return a}function compare(b,a,c){if(c==='min'){return b>=a}else {if(c==='max'){return b<=a}else {return b===a}}}function indicesEquals(a,b){return a.join(',')===b.join(',')}function mergeOption(b,a){a=a||{};cW(a,function(c,f){if(c==null){return}var e=b[f];if(!g.hasClass(f)){b[f]=hz(e,c,!0)}else {c=normalizeToArray(c);e=normalizeToArray(e);var h=mappingToExists(e,c);b[f]=c0(h,function(e){return e.option&&e.exist?hz(e.exist,e.option,!0):e.exist||e.option})}})}var av=each$1;var ba=isObject;var f_=['areaStyle','lineStyle','nodeStyle','linkStyle','chordStyle','label','labelLine'];function compatItemStyle(b){var f=b&&b.itemStyle;if(!f){return}for(var g=0,h=f_.length;g<h;g++){var a=f_[g];var e=f.normal;var c=f.emphasis;if(e&&e[a]){b[a]=b[a]||{};if(!b[a].normal){b[a].normal=e[a]}else {merge(b[a].normal,e[a])}e[a]=null}if(c&&c[a]){b[a]=b[a]||{};if(!b[a].emphasis){b[a].emphasis=c[a]}else {merge(b[a].emphasis,c[a])}c[a]=null}}}function compatTextStyle(f,a){var b=ba(f)&&f[a];var c=ba(b)&&b.textStyle;if(c){for(var e=0,g=fC.length;e<g;e++){var a=fC[e];if(c.hasOwnProperty(a)){b[a]=c[a]}}}}function compatLabelTextStyle(a){if(ba(a)){compatTextStyle(a,'normal');compatTextStyle(a,'emphasis')}}function processSeries(b){if(!ba(b)){return}compatItemStyle(b);compatLabelTextStyle(b.label);compatLabelTextStyle(b.upperLabel);compatLabelTextStyle(b.edgeLabel);var e=b.markPoint;compatItemStyle(e);compatLabelTextStyle(e&&e.label);var f=b.markLine;compatItemStyle(b.markLine);compatLabelTextStyle(f&&f.label);var i=b.markArea;compatLabelTextStyle(i&&i.label);compatTextStyle(b,'axisLabel');compatTextStyle(b,'title');compatTextStyle(b,'detail');var g=b.data;if(g){for(var a=0;a<g.length;a++){compatItemStyle(g[a]);compatLabelTextStyle(g[a]&&g[a].label)}}var e=b.markPoint;if(e&&e.data){var h=e.data;for(var a=0;a<h.length;a++){compatItemStyle(h[a]);compatLabelTextStyle(h[a]&&h[a].label)}}var f=b.markLine;if(f&&f.data){var c=f.data;for(var a=0;a<c.length;a++){if(isArray(c[a])){compatItemStyle(c[a][0]);compatLabelTextStyle(c[a][0]&&c[a][0].label);compatItemStyle(c[a][1]);compatLabelTextStyle(c[a][1]&&c[a][1].label)}else {compatItemStyle(c[a]);compatLabelTextStyle(c[a]&&c[a].label)}}}}function toArr(a){return isArray(a)?a:a?[a]:[]}function toObj(a){return (isArray(a)?a[0]:a)||{}}var k9=function(a,c){av(toArr(a.series),function(b){ba(b)&&processSeries(b)});var b=['xAxis','yAxis','radiusAxis','angleAxis','singleAxis','parallelAxis','radar'];c&&b.push('valueAxis','categoryAxis','logAxis','timeAxis');av(b,function(b){av(toArr(a[b]),function(e){if(e){compatTextStyle(e,'axisLabel');compatTextStyle(e.axisPointer,'label')}})});av(toArr(a.parallel),function(e){var b=e&&e.parallelAxisDefault;compatTextStyle(b,'axisLabel');compatTextStyle(b&&b.axisPointer,'label')});av(toArr(a.calendar),function(b){compatTextStyle(b,'dayLabel');compatTextStyle(b,'monthLabel');compatTextStyle(b,'yearLabel')});av(toArr(a.radar),function(b){compatTextStyle(b,'name')});av(toArr(a.geo),function(b){if(ba(b)){compatLabelTextStyle(b.label);av(toArr(b.regions),function(e){compatLabelTextStyle(e.label)})}});compatLabelTextStyle(toObj(a.timeline).label);compatTextStyle(toObj(a.axisPointer),'label');compatTextStyle(toObj(a.tooltip).axisPointer,'label')};function get$1(e,b){b=b.split(',');var a=e;for(var c=0;c<b.length;c++){a=a&&a[b[c]];if(a==null){break}}return a}function set$2(g,a,h,f){a=a.split(',');var b=g;var e;for(var c=0;c<a.length-1;c++){e=a[c];if(b[e]==null){b[e]={}}b=b[e]}if(f||b[a[c]]==null){b[a[c]]=h}}function compatLayoutProperties(a){each$1(i5,function(b){if(b[0] in a&&!(b[1] in a)){a[b[1]]=a[b[0]]}})}var i5=[['x','left'],['y','top'],['x2','right'],['y2','bottom']];var ip=['grid','geo','parallel','legend','toolbox','title','visualMap','dataZoom','timeline'];var fx=['bar','boxplot','candlestick','chord','effectScatter','funnel','gauge','lines','graph','heatmap','line','map','parallel','pie','radar','sankey','scatter','treemap'];var gc=function(a,b){k9(a,b);a.series=normalizeToArray(a.series);each$1(a.series,function(c){if(!isObject(c)){return}var e=c.type;if(e==='pie'||e==='gauge'){if(c.clockWise!=null){c.clockwise=c.clockWise}}if(e==='gauge'){var g=get$1(c,'pointer.color');g!=null&&set$2(c,'itemStyle.normal.color',g)}for(var f=0;f<fx.length;f++){if(fx[f]===c.type){compatLayoutProperties(c);break}}});if(a.dataRange){a.visualMap=a.dataRange}each$1(ip,function(e){var c=a[e];if(c){if(!isArray(c)){c=[c]}each$1(c,function(c){compatLayoutProperties(c)})}})};var r=g.extend({type:'series.__base__',seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:'itemStyle.normal.color',layoutMode:null,init:function(c,f,b,g){this.seriesIndex=this.componentIndex;this.mergeDefaultAndTheme(c,b);var e=this.getInitialData(c,b);if(a){assert(e,'getInitialData returned invalid data.')}set$1(this,'dataBeforeProcessed',e);this.restoreData()},mergeDefaultAndTheme:function(a,f){var b=this.layoutMode;var e=b?getLayoutParams(a):{};var c=this.subType;if(g.hasClass(c)){c+='Series'}merge(a,f.getTheme().get(this.subType));merge(a,this.getDefaultOption());defaultEmphasis(a.label,['show']);this.fillDataTextStyle(a.data);if(b){mergeLayoutParam(a,e,b)}},mergeOption:function(a,e){a=merge(this.option,a,!0);this.fillDataTextStyle(a.data);var c=this.layoutMode;if(c){mergeLayoutParam(this.option,a,c)}var b=this.getInitialData(a,e);if(b){set$1(this,'data',b);set$1(this,'dataBeforeProcessed',b.cloneShallow())}},fillDataTextStyle:function(a){if(a){var c=['show'];for(var b=0;b<a.length;b++){if(a[b]&&a[b].label){defaultEmphasis(a[b].label,c)}}}},getInitialData:function(){},getData:function(a){var b=get(this,'data');return a==null?b:b.getLinkedData(a)},setData:function(a){set$1(this,'data',a)},getRawData:function(){return get(this,'dataBeforeProcessed')},coordDimToDataDim:function(a){return coordDimToDataDim(this.getData(),a)},dataDimToCoordDim:function(a){return dataDimToCoordDim(this.getData(),a)},getBaseAxis:function(){var a=this.coordinateSystem;return a&&a.getBaseAxis&&a.getBaseAxis()},formatTooltip:function(e,g,k){function formatArrayValue(h){var a=reduce(h,function(b,i,f){var a=c.getDimensionInfo(f);return b|=a&&a.tooltip!==!1&&a.tooltipName!=null},0);var f=[];var b=otherDimToDataDim(c,'tooltip');b.length?each$1(b,function(a){setEachItem(c.get(a,e),a)}):each$1(h,setEachItem);function setEachItem(i,m){var b=c.getDimensionInfo(m);if(!b||b.otherDims.tooltip===!1){return}var j=b.type;var l=(a?'- '+(b.tooltipName||b.name)+': ':'')+(j==='ordinal'?i+'':j==='time'?g?'':formatTime('yyyy/MM/dd hh:mm:ss',i):addCommas(i));l&&f.push(encodeHTML(l))}return (a?'<br/>':'')+f.join(a?'<br/>':', ')}var c=get(this,'data');var h=this.getRawValue(e);var f=isArray(h)?formatArrayValue(h):encodeHTML(addCommas(h));var j=c.getName(e);var b=c.getItemVisual(e,'color');if(isObject(b)&&b.colorStops){b=(b.colorStops[0]||{}).color}b=b||'transparent';var i=getTooltipMarker(b);var a=this.name;if(a==='\x00-'){a=''}a=a?encodeHTML(a)+(!g?'<br/>':': '):'';return !g?a+i+(j?encodeHTML(j)+': '+f:f):i+a+f},isAnimationEnabled:function(){if(f.node){return !1}var a=this.getShallow('animation');if(a){if(this.getData().count()>this.getShallow('animationThreshold')){a=!1}}return a},restoreData:function(){set$1(this,'data',get(this,'dataBeforeProcessed').cloneShallow())},getColorFromPalette:function(c,b){var e=this.ecModel;var a=dm.getColorFromPalette.call(this,c,b);if(!a){a=e.getColorFromPalette(c,b)}return a},getAxisTooltipData:null,getTooltipPosition:null});mixin(r,dB);mixin(r,dm);var ad=function(){this.group=new b();this.uid=getUID('viewComponent')};ad.prototype={constructor:ad,init:function(a,b){},render:function(a,b,e,c){},dispose:function(){}};var dJ=ad.prototype;dJ.updateView=dJ.updateLayout=dJ.updateVisual=function(a,b,e,c){};enableClassExtend(ad);enableClassManagement(ad,{registerWhenExtend:!0});function Chart(){this.group=new b();this.uid=getUID('viewChart')}Chart.prototype={type:'chart',init:function(a,b){},render:function(a,b,e,c){},highlight:function(a,c,e,b){toggleHighlight(a.getData(),b,'emphasis')},downplay:function(a,c,e,b){toggleHighlight(a.getData(),b,'normal')},remove:function(a,b){this.group.removeAll()},dispose:function(){}};var ed=Chart.prototype;ed.updateView=ed.updateLayout=ed.updateVisual=function(a,b,e,c){this.render(a,b,e,c)};function elSetState(a,c){if(a){a.trigger(c);if(a.type==='group'){for(var b=0;b<a.childCount();b++){elSetState(a.childAt(b),c)}}}}function toggleHighlight(a,e,c){var b=queryDataIndex(a,e);if(b!=null){each$1(normalizeToArray(b),function(b){elSetState(a.getItemGraphicEl(b),c)})}else {a.eachItemGraphicEl(function(b){elSetState(b,c)})}}enableClassExtend(Chart,['dispose']);enableClassManagement(Chart,{registerWhenExtend:!0});var cf='\x00__throttleOriginMethod';var hV='\x00__throttleRate';var go='\x00__throttleType';function throttle(m,e,l){var c;var h=0;var i=0;var a=null;var f;var j;var k;var b;e=e||0;function exec(){i=(new Date()).getTime();a=null;m.apply(j,k||[])}var g=function(){c=(new Date()).getTime();j=this;k=arguments;var n=b||e;var g=b||l;b=null;f=c-(g?h:i)-n;clearTimeout(a);if(g){a=setTimeout(exec,n)}else {if(f>=0){exec()}else {a=setTimeout(exec,-f)}}h=c};g.clear=function(){if(a){clearTimeout(a);a=null}};g.debounceNextCall=function(a){b=a};return g}function createOrUpdate(g,f,c,b){var a=g[f];if(!a){return}var e=a[cf]||a;var h=a[go];var i=a[hV];if(i!==c||h!==b){if(c==null||!b){return g[f]=e}a=g[f]=throttle(e,c,b==='debounce');a[cf]=e;a[go]=b;a[hV]=c}return a}function clear(c,b){var a=c[b];if(a&&a[cf]){c[b]=a[cf]}}var lp=function(a){function encodeColor(b){var f=(b.visualColorAccessPath||'itemStyle.normal.color').split('.');var c=b.getData();var e=b.get(f)||b.getColorFromPalette(b.get('name'));c.setVisual('color',e);if(!a.isSeriesFiltered(b)){if(typeof e==='function'&&!(e instanceof S)){c.each(function(f){c.setItemVisual(f,'color',e(b.getDataParams(f)))})}c.each(function(g){var h=c.getItemModel(g);var e=h.get(f,!0);if(e!=null){c.setItemVisual(g,'color',e)}})}}a.eachRawSeries(encodeColor)};var c2=Math.PI;var j5=function(f,a){a=a||{};defaults(a,{text:'loading',color:'#c23531',textColor:'#000',maskColor:'rgba(255, 255, 255, 0.8)',zlevel:0});var h=new k({style:{fill:a.maskColor},zlevel:a.zlevel,z:10000});var e=new h1({shape:{startAngle:-c2/2,endAngle:-c2/2+0.1,r:10},style:{stroke:a.color,lineCap:'round',lineWidth:5},zlevel:a.zlevel,z:10001});var g=new k({style:{fill:'none',text:a.text,textPosition:'right',textDistance:10,textFill:a.textColor},zlevel:a.zlevel,z:10001});e.animateShape(!0).when(1000,{endAngle:c2*3/2}).start('circularInOut');e.animateShape(!0).when(1000,{startAngle:c2*3/2}).delay(300).start('circularInOut');var c=new b();c.add(e);c.add(g);c.add(h);c.resize=function(){var c=f.getWidth()/2;var i=f.getHeight()/2;e.setShape({cx:c,cy:i});var b=e.shape.r;g.setShape({x:c-b,y:i-b,width:b*2,height:b*2});h.setShape({x:0,y:0,width:f.getWidth(),height:f.getHeight()})};c.resize();return c};var t=each$1;var gg=g.parseClassType;var hF='3.8.4';var d$={zrender:'3.7.3'};var fm=1000;var h8=5000;var fr=1000;var fq=2000;var ft=3000;var id=4000;var iC=5000;var be={PROCESSOR:{FILTER:fm,STATISTIC:h8},VISUAL:{LAYOUT:fr,GLOBAL:fq,CHART:ft,COMPONENT:id,BRUSH:iC}};var I='__flagInMainProcess';var c7='__hasGradientOrPatternBg';var aH='__optionUpdated';var gT=/^[a-zA-Z0-9_]+$/;function createRegisterEventWithLowercaseName(a){return function(b,e,c){b=b&&b.toLowerCase();s.prototype[a].call(this,b,e,c)}}function MessageCenter(){s.call(this)}MessageCenter.prototype.on=createRegisterEventWithLowercaseName('on');MessageCenter.prototype.off=createRegisterEventWithLowercaseName('off');MessageCenter.prototype.one=createRegisterEventWithLowercaseName('one');mixin(MessageCenter,s);function ECharts(g,b,c){c=c||{};if(typeof b==='string'){b=gF[b]}this.id;this.group;this._dom=g;var e='canvas';if(a){e=(typeof window==='undefined'?global:window).__ECHARTS__DEFAULT__RENDERER__||e}var f=this._zr=init$1(g,{renderer:c.renderer||e,devicePixelRatio:c.devicePixelRatio,width:c.width,height:c.height});this._throttledZrFlush=throttle(bind(f.flush,f),17);var b=clone(b);b&&gc(b,!0);this._theme=b;this._chartsViews=[];this._chartsMap={};this._componentsViews=[];this._componentsMap={};this._coordSysMgr=new CoordinateSystemManager();this._api=createExtensionAPI(this);s.call(this);this._messageCenter=new MessageCenter();this._initEvents();this.resize=bind(this.resize,this);this._pendingActions=[];function prioritySortFunc(a,e){return a.prio-e.prio}sort(bA,prioritySortFunc);sort(dh,prioritySortFunc);f.animation.on('frame',this._onframe,this);setAsPrimitive(this)}var i=ECharts.prototype;i._onframe=function(){if(this[aH]){var a=this[aH].silent;this[I]=!0;a5.prepareAndUpdate.call(this);this[I]=!1;this[aH]=!1;flushPendingActions.call(this,a);triggerUpdatedEvent.call(this,a)}};i.getDom=function(){return this._dom};i.getZr=function(){return this._zr};i.setOption=function(i,b,f){if(a){assert(!this[I],'`setOption` should not be called during main process.')}var c;if(isObject(b)){f=b.lazyUpdate;c=b.silent;b=b.notMerge}this[I]=!0;if(!this._model||b){var e=new OptionManager(this._api);var g=this._theme;var h=this._model=new d4(null,null,g,e);h.init(null,null,g,e)}this._model.setOption(i,fp);if(f){this[aH]={silent:c};this[I]=!1}else {a5.prepareAndUpdate.call(this);this._zr.flush();this[aH]=!1;this[I]=!1;flushPendingActions.call(this,c);triggerUpdatedEvent.call(this,c)}};i.setTheme=function(){console.log('ECharts#setTheme() is DEPRECATED in ECharts 3.0')};i.getModel=function(){return this._model};i.getOption=function(){return this._model&&this._model.getOption()};i.getWidth=function(){return this._zr.getWidth()};i.getHeight=function(){return this._zr.getHeight()};i.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1};i.getRenderedCanvas=function(a){if(!f.canvasSupported){return}a=a||{};a.pixelRatio=a.pixelRatio||1;a.backgroundColor=a.backgroundColor||this._model.get('backgroundColor');var b=this._zr;var c=b.storage.getDisplayList();each$1(c,function(b){b.stopAnimation(!0)});return b.painter.getRenderedCanvas(a)};i.getSvgDataUrl=function(){if(!f.svgSupported){return}var a=this._zr;var b=a.storage.getDisplayList();each$1(b,function(a){a.stopAnimation(!0)});return a.painter.pathToSvg()};i.getDataURL=function(a){a=a||{};var c=a.excludeComponents;var e=this._model;var b=[];var f=this;t(c,function(c){e.eachComponent({mainType:c},function(g){var e=f._componentsMap[g.__viewId];if(!e.group.ignore){b.push(e);e.group.ignore=!0}})});var g=this._zr.painter.getType()==='svg'?this.getSvgDataUrl():this.getRenderedCanvas(a).toDataURL('image/'+(a&&a.type||'png'));t(b,function(b){b.group.ignore=!1});return g};i.getConnectedDataURL=function(a){if(!f.canvasSupported){return}var l=this.group;var n=Math.min;var m=Math.max;var h=Infinity;if(b6[l]){var c=h;var e=h;var j=-h;var i=-h;var k=[];var b=a&&a.pixelRatio||1;each$1(aO,function(f,h){if(f.group===l){var g=f.getRenderedCanvas(clone(a));var b=f.getDom().getBoundingClientRect();c=n(b.left,c);e=n(b.top,e);j=m(b.right,j);i=m(b.bottom,i);k.push({dom:g,left:b.left,top:b.top})}});c*=b;e*=b;j*=b;i*=b;var q=j-c;var p=i-e;var g=a6();g.width=q;g.height=p;var o=init$1(g);t(k,function(f){var g=new ZImage({style:{x:f.left*b-c,y:f.top*b-e,image:f.dom}});o.add(g)});o.refreshImmediately();return g.toDataURL('image/'+(a&&a.type||'png'))}else {return this.getDataURL(a)}};i.convertToPixel=curry(doConvertPixel,'convertToPixel');i.convertFromPixel=curry(doConvertPixel,'convertFromPixel');function doConvertPixel(b,c,j){var h=this._model;var f=this._coordSysMgr.getCoordinateSystems();var i;c=parseFinder(h,c);for(var e=0;e<f.length;e++){var g=f[e];if(g[b]&&(i=g[b](h,c,j))!=null){return i}}if(a){console.warn('No coordinate system that supports '+b+' found by the given finder.')}}i.containPixel=function(b,e){var f=this._model;var c;b=parseFinder(f,b);each$1(b,function(g,f){f.indexOf('Models')>=0&&each$1(g,function(j){var i=j.coordinateSystem;if(i&&i.containPoint){c|=!!i.containPoint(e)}else {if(f==='seriesModels'){var h=this._chartsMap[j.__viewId];if(h&&h.containPoint){c|=h.containPoint(e,j)}else {if(a){console.warn(f+': '+(h?'The found component do not support containPoint.':'No view mapping to the found component.'))}}}else {if(a){console.warn(f+': containPoint is not supported')}}}},this)},this);return !!c};i.getVisual=function(b,g){var h=this._model;b=parseFinder(h,b,{defaultMainType:'series'});var f=b.seriesModel;if(a){if(!f){console.warn('There is no specified seires model')}}var c=f.getData();var e=b.hasOwnProperty('dataIndexInside')?b.dataIndexInside:b.hasOwnProperty('dataIndex')?c.indexOfRawIndex(b.dataIndex):null;return e!=null?c.getItemVisual(e,g):c.getVisual(g)};i.getViewOfComponentModel=function(a){return this._componentsMap[a.__viewId]};i.getViewOfSeriesModel=function(a){return this._chartsMap[a.__viewId]};var a5={update:function(j){var a=this._model;var e=this._api;var g=this._coordSysMgr;var c=this._zr;if(!a){return}a.restoreData();g.create(this._model,this._api);processData.call(this,a,e);stackSeriesData.call(this,a);g.update(a,e);doVisualEncoding.call(this,a,j);doRender.call(this,a,j);var b=a.get('backgroundColor')||'transparent';var i=c.painter;if(i.isSingleCanvas&&i.isSingleCanvas()){c.configLayer(0,{clearColor:b})}else {if(!f.canvasSupported){var h=parse(b);b=stringify(h,'rgb');if(h[3]===0){b='transparent'}}if(b.colorStops||b.image){c.configLayer(0,{clearColor:b});this[c7]=!0;this._dom.style.background='transparent'}else {if(this[c7]){c.configLayer(0,{clearColor:null})}this[c7]=!1;this._dom.style.background=b}}t(dD,function(b){b(a,e)})},updateView:function(b){var a=this._model;if(!a){return}a.eachSeries(function(a){a.getData().clearAllVisual()});doVisualEncoding.call(this,a,b);invokeUpdateMethod.call(this,'updateView',a,b)},updateVisual:function(b){var a=this._model;if(!a){return}a.eachSeries(function(a){a.getData().clearAllVisual()});doVisualEncoding.call(this,a,b,!0);invokeUpdateMethod.call(this,'updateVisual',a,b)},updateLayout:function(b){var a=this._model;if(!a){return}doLayout.call(this,a,b);invokeUpdateMethod.call(this,'updateLayout',a,b)},prepareAndUpdate:function(b){var a=this._model;prepareView.call(this,'component',a);prepareView.call(this,'chart',a);a5.update.call(this,b)}};function updateDirectly(b,i,c,a,h){var f=b._model;if(!a){t(b._componentsViews.concat(b._chartsViews),callView);return}var e={};e[a+'Id']=c[a+'Id'];e[a+'Index']=c[a+'Index'];e[a+'Name']=c[a+'Name'];var g={mainType:a,query:e};h&&(g.subType=h);f&&f.eachComponent(g,function(e,f){callView(b[a==='series'?'_chartsMap':'_componentsMap'][e.__viewId])},b);function callView(e){e&&e.__alive&&e[i]&&e[i](e.__model,f,b._api,c)}}i.resize=function(b){if(a){assert(!this[I],'`resize` should not be called during main process.')}this[I]=!0;this._zr.resize(b);var e=this._model&&this._model.resetOption('media');var f=e?'prepareAndUpdate':'update';a5[f].call(this);this._loadingFX&&this._loadingFX.resize();this[I]=!1;var c=b&&b.silent;flushPendingActions.call(this,c);triggerUpdatedEvent.call(this,c)};i.showLoading=function(b,c){if(isObject(b)){c=b;b=''}b=b||'default';this.hideLoading();if(!dN[b]){if(a){console.warn('Loading effects '+b+' not exists.')}return}var e=dN[b](this._api,c);var f=this._zr;this._loadingFX=e;f.add(e)};i.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX);this._loadingFX=null};i.makeActionFromEvent=function(a){var b=extend({},a);b.type=cb[a.type];return b};i.dispatchAction=function(b,a){if(!isObject(a)){a={silent:!!a}}if(!cJ[b.type]){return}if(!this._model){return}if(this[I]){this._pendingActions.push(b);return}doDispatchAction.call(this,b,a.silent);if(a.flush){this._zr.flush(!0)}else {if(a.flush!==!1&&f.browser.weChat){this._throttledZrFlush()}}flushPendingActions.call(this,a.silent);triggerUpdatedEvent.call(this,a.silent)};function doDispatchAction(c,n){var f=c.type;var m=c.escapeConnect;var i=cJ[f];var h=i.actionInfo;var b=(h.update||'update').split(':');var e=b.pop();b=b[0]!=null&&gg(b[0]);this[I]=!0;var k=[c];var l=!1;if(c.batch){l=!0;k=map(c.batch,function(a){a=defaults(extend({},a),c);a.batch=null;return a})}var g=[];var a;var j=f==='highlight'||f==='downplay';t(k,function(f){a=i.action(f,this._model,this._api);a=a||extend({},f);a.type=h.event||a.type;g.push(a);if(j){updateDirectly(this,e,f,'series')}else {if(b){updateDirectly(this,e,f,b.main,b.sub)}}},this);if(e!=='none'&&!j&&!b){if(this[aH]){a5.prepareAndUpdate.call(this,c);this[aH]=!1}else {a5[e].call(this,c)}}if(l){a={type:h.event||f,escapeConnect:m,batch:g}}else {a=g[0]}this[I]=!1;!n&&this._messageCenter.trigger(a.type,a)}function flushPendingActions(c){var a=this._pendingActions;while(a.length){var b=a.shift();doDispatchAction.call(this,b,c)}}function triggerUpdatedEvent(a){!a&&this.trigger('updated')}i.on=createRegisterEventWithLowercaseName('on');i.off=createRegisterEventWithLowercaseName('off');i.one=createRegisterEventWithLowercaseName('one');function invokeUpdateMethod(c,a,e){var b=this._api;t(this._componentsViews,function(f){var g=f.__model;f[c](g,a,b,e);updateZ(g,f)},this);a.eachSeries(function(f,h){var g=this._chartsMap[f.__viewId];g[c](f,a,b,e);updateZ(f,g);updateProgressiveAndBlend(f,g)},this);updateHoverLayerStatus(this._zr,a);t(dD,function(f){f(a,b)})}function prepareView(i,f){var e=i==='component';var b=e?this._componentsViews:this._chartsViews;var g=e?this._componentsMap:this._chartsMap;var h=this._zr;for(var a=0;a<b.length;a++){b[a].__alive=!1}f[e?'eachComponent':'eachSeries'](function(l,c){if(e){if(l==='series'){return}}else {c=l}var k='_ec_'+c.id+'_'+c.type;var a=g[k];if(!a){var j=gg(c.type);var m=e?ad.getClass(j.main,j.sub):Chart.getClass(j.sub);if(m){a=new m();a.init(f,this._api);g[k]=a;b.push(a);h.add(a.group)}else {return}}c.__viewId=a.__id=k;a.__alive=!0;a.__model=c;a.group.__ecComponentInfo={mainType:c.mainType,index:c.componentIndex}},this);for(var a=0;a<b.length;){var c=b[a];if(!c.__alive){h.remove(c.group);c.dispose(f,this._api);b.splice(a,1);delete g[c.__id];c.__id=c.group.__ecComponentInfo=null}else {a++}}}function processData(a,b){t(dh,function(c){c.func(a,b)})}function stackSeriesData(b){var a={};b.eachSeries(function(g){var c=g.get('stack');var e=g.getData();if(c&&e.type==='list'){var f=a[c];if(a.hasOwnProperty(c)&&f){e.stackedOn=f}a[c]=e}})}function doLayout(a,b){var c=this._api;t(bA,function(e){if(e.isLayout){e.func(a,c,b)}})}function doVisualEncoding(a,c,b){var e=this._api;a.clearColorPalette();a.eachSeries(function(e){e.clearColorPalette()});t(bA,function(f){(!b||!f.isLayout)&&f.func(a,e,c)})}function doRender(a,c){var b=this._api;t(this._componentsViews,function(e){var f=e.__model;e.render(f,a,b,c);updateZ(f,e)},this);t(this._chartsViews,function(b){b.__alive=!1},this);a.eachSeries(function(e,g){var f=this._chartsMap[e.__viewId];f.__alive=!0;f.render(e,a,b,c);f.group.silent=!!e.get('silent');updateZ(e,f);updateProgressiveAndBlend(e,f)},this);updateHoverLayerStatus(this._zr,a);t(this._chartsViews,function(e){if(!e.__alive){e.remove(a,b)}},this)}var i6=['click','dblclick','mouseover','mouseout','mousemove','mousedown','mouseup','globalout','contextmenu'];i._initEvents=function(){t(i6,function(a){this._zr.on(a,function(f){var g=this.getModel();var b=f.target;var c;if(a==='globalout'){c={}}else {if(b&&b.dataIndex!=null){var e=b.dataModel||g.getSeriesByIndex(b.seriesIndex);c=e&&e.getDataParams(b.dataIndex,b.dataType)||{}}else {if(b&&b.eventData){c=extend({},b.eventData)}}}if(c){c.event=f;c.type=a;this.trigger(a,c)}},this)},this);t(cb,function(b,a){this._messageCenter.on(a,function(c){this.trigger(a,c)},this)},this)};i.isDisposed=function(){return this._disposed};i.clear=function(){this.setOption({series:[]},!0)};i.dispose=function(){if(this._disposed){if(a){console.warn('Instance '+this.id+' has been disposed')}return}this._disposed=!0;var c=this._api;var b=this._model;t(this._componentsViews,function(a){a.dispose(b,c)});t(this._chartsViews,function(a){a.dispose(b,c)});this._zr.dispose();delete aO[this.id]};mixin(ECharts,s);function updateHoverLayerStatus(e,c){var b=e.storage;var a=0;b.traverse(function(b){if(!b.isGroup){a++}});if(a>c.get('hoverLayerThreshold')&&!f.node){b.traverse(function(a){if(!a.isGroup){a.useHoverLayer=!0}})}}function updateProgressiveAndBlend(c,g){var h=0;g.group.traverse(function(a){if(a.type!=='group'&&!a.ignore){h++}});var i=+c.get('progressive');var b=h>c.get('progressiveThreshold')&&i&&!f.node;if(b){g.group.traverse(function(a){if(!a.isGroup){a.progressive=b?Math.floor(h++/i):-1;if(b){a.stopAnimation(!0)}}})}var e=c.get('blendMode')||null;if(a){if(!f.canvasSupported&&e&&e!=='source-over'){console.warn('Only canvas support blendMode')}}g.group.traverse(function(a){if(!a.isGroup){a.setStyle('blend',e)}})}function updateZ(b,e){var c=b.get('z');var a=b.get('zlevel');e.group.traverse(function(f){if(f.type!=='group'){c!=null&&(f.z=c);a!=null&&(f.zlevel=a)}})}function createExtensionAPI(a){var b=a._coordSysMgr;return extend(new ExtensionAPI(a),{getCoordinateSystems:bind(b.getCoordinateSystems,b),getComponentByElement:function(b){while(b){var c=b.__ecComponentInfo;if(c!=null){return a._model.getComponent(c.mainType,c.index)}b=b.parent}}})}var cJ={};var cb={};var dh=[];var fp=[];var dD=[];var bA=[];var gF={};var dN={};var aO={};var b6={};var mC=new Date()-0;var lg=new Date()-0;var b2='_echarts_instance_';var gv={};function enableConnect(a){var c=0;var e=1;var f=2;var b='__connectUpdateStatus';function updateConnectedChartsStatus(e,g){for(var c=0;c<e.length;c++){var f=e[c];f[b]=g}}each$1(cb,function(h,g){a._messageCenter.on(g,function(j){if(b6[a.group]&&a[b]!==c){if(j&&j.escapeConnect){return}var k=a.makeActionFromEvent(j);var i=[];each$1(aO,function(b){if(b!==a&&b.group===a.group){i.push(b)}});updateConnectedChartsStatus(i,c);t(i,function(c){if(c[b]!==e){c.dispatchAction(k)}});updateConnectedChartsStatus(i,f)}})})}function init(b,g,e){if(a){if(eB.replace('.','')-0<d$.zrender.replace('.','')-0){throw new Error('zrender/src '+eB+' is too old for ECharts '+hF+'. Current version need ZRender '+d$.zrender+'+')}if(!b){throw new Error('Initialize failed: invalid dom.')}}var f=getInstanceByDom(b);if(f){if(a){console.warn('There is a chart instance already initialized on the dom.')}return f}if(a){if(isDom(b)&&b.nodeName.toUpperCase()!=='CANVAS'&&(!b.clientWidth&&(!e||e.width==null)||!b.clientHeight&&(!e||e.height==null))){console.warn("Can't get dom width or height")}}var c=new ECharts(b,g,e);c.id='ec_'+mC++;aO[c.id]=c;if(b.setAttribute){b.setAttribute(b2,c.id)}else {b[b2]=c.id}enableConnect(c);return c}function connect(a){if(isArray(a)){var b=a;a=null;each$1(b,function(b){if(b.group!=null){a=b.group}});a=a||'g_'+lg++;each$1(b,function(b){b.group=a})}b6[a]=!0;return a}function disConnect(a){b6[a]=!1}var lC=disConnect;function dispose(a){if(typeof a==='string'){a=aO[a]}else {if(!(a instanceof ECharts)){a=getInstanceByDom(a)}}if(a instanceof ECharts&&!a.isDisposed()){a.dispose()}}function getInstanceByDom(a){var b;if(a.getAttribute){b=a.getAttribute(b2)}else {b=a[b2]}return aO[b]}function getInstanceById(a){return aO[a]}function registerTheme(b,a){gF[b]=a}function registerPreprocessor(a){fp.push(a)}function registerProcessor(b,c){if(typeof b==='function'){c=b;b=fm}if(a){if(isNaN(b)){throw new Error('Unkown processor priority')}}dh.push({prio:b,func:c})}function registerPostUpdate(a){dD.push(a)}function registerAction(a,b,e){if(typeof b==='function'){e=b;b=''}var c=isObject(a)?a.type:[a,a={event:b}][0];a.event=(a.event||c).toLowerCase();b=a.event;assert(gT.test(c)&&gT.test(b));if(!cJ[c]){cJ[c]={action:e,actionInfo:a}}cb[b]=c}function registerCoordinateSystem(b,a){CoordinateSystemManager.register(b,a)}function getCoordinateSystemDimensions(b){var a=CoordinateSystemManager.get(b);if(a){return a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice()}}function registerLayout(b,c){if(typeof b==='function'){c=b;b=fr}if(a){if(isNaN(b)){throw new Error('Unkown layout priority')}}bA.push({prio:b,func:c,isLayout:!0})}function registerVisual(b,c){if(typeof b==='function'){c=b;b=ft}if(a){if(isNaN(b)){throw new Error('Unkown visual priority')}}bA.push({prio:b,func:c})}function registerLoading(b,a){dN[b]=a}function extendComponentModel(a){return g.extend(a)}function extendComponentView(a){return ad.extend(a)}function extendSeriesModel(a){return r.extend(a)}function extendChartView(a){return Chart.extend(a)}function setCanvasCreator(a){$override('createCanvas',a)}function registerMap(c,a,b){if(a.geoJson&&!a.features){b=a.specialAreas;a=a.geoJson}if(typeof a==='string'){a=typeof JSON!=='undefined'&&JSON.parse?JSON.parse(a):(new Function('return ('+a+');'))()}gv[c]={geoJson:a,specialAreas:b}}function getMap(a){return gv[a]}registerVisual(fq,lp);registerPreprocessor(gc);registerLoading('default',j5);registerAction({type:'highlight',event:'highlight',update:'highlight'},noop);registerAction({type:'downplay',event:'downplay',update:'downplay'},noop);var md={};function defaultKeyGetter(a){return a}function DataDiffer(f,e,b,a,c){this._old=f;this._new=e;this._oldKeyGetter=b||defaultKeyGetter;this._newKeyGetter=a||defaultKeyGetter;this.context=c}DataDiffer.prototype={constructor:DataDiffer,add:function(a){this._add=a;return this},update:function(a){this._update=a;return this},remove:function(a){this._remove=a;return this},execute:function(){var j=this._old;var l=this._new;var k={};var c={};var i=[];var g=[];var b;initIndexMap(j,k,i,'_oldKeyGetter',this);initIndexMap(l,c,g,'_newKeyGetter',this);for(b=0;b<j.length;b++){var e=i[b];var a=c[e];if(a!=null){var f=a.length;if(f){f===1&&(c[e]=null);a=a.unshift()}else {c[e]=null}this._update&&this._update(a,b)}else {this._remove&&this._remove(b)}}for(var b=0;b<g.length;b++){var e=g[b];if(c.hasOwnProperty(e)){var a=c[e];if(a==null){continue}if(!a.length){this._add&&this._add(a)}else {for(var h=0,f=a.length;h<f;h++){this._add&&this._add(a[h])}}}}}};function initIndexMap(f,e,i,g,h){for(var a=0;a<f.length;a++){var c='_ec_'+h[g](f[a],a);var b=e[c];if(b==null){i.push(c);e[c]=a}else {if(!b.length){e[c]=b=[b]}b.push(a)}}}var eg=isObject;var eo='undefined';var cB=typeof window===eo?global:window;var lZ={'float':typeof cB.Float64Array===eo?Array:cB.Float64Array,'int':typeof cB.Int32Array===eo?Array:cB.Int32Array,'ordinal':Array,'number':Array,'time':Array};var ir=['stackedOn','hasItemOption','_nameList','_idList','_rawData'];function transferProperties(b,a){each$1(ir.concat(a.__wrappedMethods||[]),function(c){if(a.hasOwnProperty(c)){b[c]=a[c]}});b.__wrappedMethods=a.__wrappedMethods}function DefaultDataProvider(a){this._array=a||[]}DefaultDataProvider.prototype.pure=!1;DefaultDataProvider.prototype.count=function(){return this._array.length};DefaultDataProvider.prototype.getItem=function(a){return this._array[a]};var l=function(c,h){c=c||['x','y'];var f={};var g=[];for(var e=0;e<c.length;e++){var b;var a={};if(typeof c[e]==='string'){b=c[e];a={name:b,coordDim:b,coordDimIndex:0,stackable:!1,type:'number'}}else {a=c[e];b=a.name;a.type=a.type||'number';if(!a.coordDim){a.coordDim=b;a.coordDimIndex=0}}a.otherDims=a.otherDims||{};g.push(b);f[b]=a}this.dimensions=g;this._dimensionInfos=f;this.hostModel=h;this.dataType;this.indices=[];this._storage={};this._nameList=[];this._idList=[];this._optionModels=[];this.stackedOn=null;this._visual={};this._layout={};this._itemVisuals=[];this._itemLayouts=[];this._graphicEls=[];this._rawData;this._extent};var c=l.prototype;c.type='list';c.hasItemOption=!0;c.getDimension=function(a){if(!isNaN(a)){a=this.dimensions[a]||a}return a};c.getDimensionInfo=function(a){return clone(this._dimensionInfos[this.getDimension(a)])};c.initData=function(c,f,k){c=c||[];var q=isArray(c);if(q){c=new DefaultDataProvider(c)}if(a){if(!q&&(typeof c.getItem!='function'||typeof c.count!='function')){throw new Error('Inavlid data provider.')}}this._rawData=c;var n=this._storage={};var x=this.indices=[];var h=this.dimensions;var p=this._dimensionInfos;var o=c.count();var s=[];var i={};var m;f=f||[];for(var b=0;b<h.length;b++){var r=p[h[b]];r.otherDims.itemName===0&&(m=b);var w=lZ[r.type];n[h[b]]=new w(o)}var t=this;if(!k){t.hasItemOption=!1}k=k||function(b,g,h,e){var a=getDataItemValue(b);if(isDataItemOption(b)){t.hasItemOption=!0}return converDataValue(a instanceof Array?a[e]:a,p[g])};for(var b=0;b<o;b++){var e=c.getItem(b);for(var l=0;l<h.length;l++){var u=h[l];var v=n[u];v[b]=k(e,u,b,l)}x.push(b)}for(var b=0;b<o;b++){var e=c.getItem(b);if(!f[b]&&e){if(e.name!=null){f[b]=e.name}else {if(m!=null){f[b]=n[h[m]][b]}}}var g=f[b]||'';var j=e&&e.id;if(!j&&g){i[g]=i[g]||0;j=g;if(i[g]>0){j+='__ec__'+i[g]}i[g]++}j&&(s[b]=j)}this._nameList=f;this._idList=s};c.count=function(){return this.indices.length};c.get=function(c,i,j){var h=this._storage;var g=this.indices[i];if(g==null||!h[c]){return NaN}var b=h[c][g];if(j){var f=this._dimensionInfos[c];if(f&&f.stackable){var a=this.stackedOn;while(a){var e=a.get(c,i);if(b>=0&&e>0||b<=0&&e<0){b+=e}a=a.stackedOn}}}return b};c.getValues=function(a,b,f){var e=[];if(!isArray(a)){f=b;b=a;a=this.dimensions}for(var c=0,g=a.length;c<g;c++){e.push(this.get(a[c],b,f))}return e};c.hasValue=function(e){var b=this.dimensions;var c=this._dimensionInfos;for(var a=0,f=b.length;a<f;a++){if(c[b[a]].type!=='ordinal'&&isNaN(this.get(b[a],e))){return !1}}return !0};c.getDataExtent=function(a,c,i){a=this.getDimension(a);var k=this._storage[a];var j=this.getDimensionInfo(a);c=j&&j.stackable&&c;var h=(this._extent||(this._extent={}))[a+!!c];var b;if(h){return h}if(k){var g=Infinity;var f=-Infinity;for(var e=0,l=this.count();e<l;e++){b=this.get(a,e,c);if(!i||i(b,a,e)){b<g&&(g=b);b>f&&(f=b)}}return this._extent[a+!!c]=[g,f]}else {return [Infinity,-Infinity]}};c.getSum=function(c,g){var f=this._storage[c];var e=0;if(f){for(var a=0,h=this.count();a<h;a++){var b=this.get(c,a,g);if(!isNaN(b)){e+=b}}}return e};c.indexOf=function(h,g){var f=this._storage;var b=f[h];var c=this.indices;if(b){for(var a=0,i=c.length;a<i;a++){var e=c[a];if(b[e]===g){return a}}}return -1};c.indexOfName=function(f){var b=this.indices;var c=this._nameList;for(var a=0,g=b.length;a<g;a++){var e=b[a];if(c[e]===f){return a}}return -1};c.indexOfRawIndex=function(a){var c=this.indices;var g=c[a];if(g!=null&&g===a){return a}var f=0;var e=c.length-1;while(f<=e){var b=(f+e)/2|0;if(c[b]<a){f=b+1}else {if(c[b]>a){e=b-1}else {return b}}}return -1};c.indicesOfNearest=function(i,m,l,e){var k=this._storage;var j=k[i];var a=[];if(!j){return a}if(e==null){e=Infinity}var f=Number.MAX_VALUE;var h=-1;for(var c=0,n=this.count();c<n;c++){var b=m-this.get(i,c,l);var g=Math.abs(b);if(b<=e&&g<=f){if(g<f||b>=0&&h<0){f=g;h=b;a.length=0}a.push(c)}}return a};c.getRawIndex=function(b){var a=this.indices[b];return a==null?-1:a};c.getRawDataItem=function(a){return this._rawData.getItem(this.getRawIndex(a))};c.getName=function(a){return this._nameList[this.indices[a]]||''};c.getId=function(a){return this._idList[this.indices[a]]||this.getRawIndex(a)+''};function normalizeDimensions(a){if(!isArray(a)){a=[a]}return a}c.each=function(a,f,e,c){if(typeof a==='function'){c=e;e=f;f=a;a=[]}a=map(normalizeDimensions(a),this.getDimension,this);var h=[];var i=a.length;var j=this.indices;c=c||this;for(var b=0;b<j.length;b++){switch(i){case 0:f.call(c,b);break;case 1:f.call(c,this.get(a[0],b,e),b);break;case 2:f.call(c,this.get(a[0],b,e),this.get(a[1],b,e),b);break;default:for(var g=0;g<i;g++){h[g]=this.get(a[g],b,e)};h[g]=b;f.apply(c,h);}}};c.filterSelf=function(a,e,g,c){if(typeof a==='function'){c=g;g=e;e=a;a=[]}a=map(normalizeDimensions(a),this.getDimension,this);var k=[];var j=[];var i=a.length;var l=this.indices;c=c||this;for(var b=0;b<l.length;b++){var h;if(!i){h=e.call(c,b)}else {if(i===1){h=e.call(c,this.get(a[0],b,g),b)}else {for(var f=0;f<i;f++){j[f]=this.get(a[f],b,g)}j[f]=b;h=e.apply(c,j)}}if(h){k.push(l[b])}}this.indices=k;this._extent={};return this};c.mapArray=function(a,b,c,e){if(typeof a==='function'){e=c;c=b;b=a;a=[]}var f=[];this.each(a,function(){f.push(b&&b.apply(this,arguments))},c,e);return f};function cloneListForMapAndSample(a,i){var e=a.dimensions;var f=new l(map(e,a.getDimensionInfo,a),a.hostModel);transferProperties(f,a);var h=f._storage={};var c=a._storage;for(var g=0;g<e.length;g++){var b=e[g];var j=c[b];if(indexOf(i,b)>=0){h[b]=new j.constructor(c[b].length)}else {h[b]=c[b]}}return f}c.map=function(a,e,i,f){a=map(normalizeDimensions(a),this.getDimension,this);var b=cloneListForMapAndSample(this,a);var g=b.indices=this.indices;var h=b._storage;var c=[];this.each(a,function(){var n=arguments[arguments.length-1];var b=e&&e.apply(this,arguments);if(b!=null){if(typeof b==='number'){c[0]=b;b=c}for(var j=0;j<b.length;j++){var m=a[j];var k=h[m];var l=g[n];if(k){k[l]=b[j]}}}},i,f);return b};c.downSample=function(b,s,q,p){var h=cloneListForMapAndSample(this,[b]);var m=this._storage;var j=h._storage;var o=this.indices;var r=h.indices=[];var g=[];var k=[];var c=Math.floor(1/s);var l=j[b];var i=this.count();for(var a=0;a<m[b].length;a++){j[b][a]=m[b][a]}for(var a=0;a<i;a+=c){if(c>i-a){c=i-a;g.length=c}for(var f=0;f<c;f++){var e=o[a+f];g[f]=l[e];k[f]=e}var n=q(g);var e=k[p(g,n)||0];l[e]=n;r.push(e)}return h};c.getItemModel=function(b){var a=this.hostModel;b=this.indices[b];return new Model(this._rawData.getItem(b),a,a&&a.ecModel)};c.diff=function(a){var f=this._idList;var e=a&&a._idList;var b;var c='e\x00\x00';return new DataDiffer(a?a.indices:[],this.indices,function(f){return (b=e[f])!=null?b:c+f},function(e){return (b=f[e])!=null?b:c+e})};c.getVisual=function(b){var a=this._visual;return a&&a[b]};c.setVisual=function(a,c){if(eg(a)){for(var b in a){if(a.hasOwnProperty(b)){this.setVisual(b,a[b])}}return}this._visual=this._visual||{};this._visual[a]=c};c.setLayout=function(a,c){if(eg(a)){for(var b in a){if(a.hasOwnProperty(b)){this.setLayout(b,a[b])}}return}this._layout[a]=c};c.getLayout=function(a){return this._layout[a]};c.getItemLayout=function(a){return this._itemLayouts[a]};c.setItemLayout=function(b,a,c){this._itemLayouts[b]=c?extend(this._itemLayouts[b]||{},a):a};c.clearItemLayouts=function(){this._itemLayouts.length=0};c.getItemVisual=function(f,b,e){var a=this._itemVisuals[f];var c=a&&a[b];if(c==null&&!e){return this.getVisual(b)}return c};c.setItemVisual=function(e,a,f){var b=this._itemVisuals[e]||{};this._itemVisuals[e]=b;if(eg(a)){for(var c in a){if(a.hasOwnProperty(c)){b[c]=a[c]}}return}b[a]=f};c.clearAllVisual=function(){this._visual={};this._itemVisuals=[]};var ii=function(a){a.seriesIndex=this.seriesIndex;a.dataIndex=this.dataIndex;a.dataType=this.dataType};c.setItemGraphicEl=function(c,a){var b=this.hostModel;if(a){a.dataIndex=c;a.dataType=this.dataType;a.seriesIndex=b&&b.seriesIndex;if(a.type==='group'){a.traverse(ii,a)}}this._graphicEls[c]=a};c.getItemGraphicEl=function(a){return this._graphicEls[a]};c.eachItemGraphicEl=function(a,b){each$1(this._graphicEls,function(c,e){if(c){a&&a.call(b,c,e)}})};c.cloneShallow=function(){var b=map(this.dimensions,this.getDimensionInfo,this);var a=new l(b,this.hostModel);a._storage=this._storage;transferProperties(a,this);a.indices=this.indices.slice();if(this._extent){a._extent=extend({},this._extent)}return a};c.wrapMethod=function(a,c){var b=this[a];if(typeof b!=='function'){return}this.__wrappedMethods=this.__wrappedMethods||[];this.__wrappedMethods.push(a);this[a]=function(){var e=b.apply(this,arguments);return c.apply(this,[e].concat(slice(arguments)))}};c.TRANSFERABLE_METHODS=['cloneShallow','downSample','map'];c.CHANGABLE_METHODS=['filterSelf'];var cX=each$1;var cr=isString;var gY=defaults;var lw={tooltip:1,label:1,itemName:1};function completeDimensions(i,m,e){m=m||[];e=e||{};i=(i||[]).slice();var l=(e.dimsDef||[]).slice();var o=createHashMap(e.encodeDef);var j=createHashMap();var p=createHashMap();var b=[];var c=e.dimCount;if(c==null){var q=retrieveValue(m[0]);c=Math.max(isArray(q)&&q.length||1,i.length,l.length);cX(i,function(b){var a=b.dimsDef;a&&(c=Math.max(c,a.length))})}for(var f=0;f<c;f++){var n=cr(l[f])?{name:l[f]}:l[f]||{};var k=n.name;var a=b[f]={otherDims:{}};if(k!=null&&j.get(k)==null){a.name=a.tooltipName=k;j.set(k,f)}n.type!=null&&(a.type=n.type)}o.each(function(a,f){a=o.set(f,normalizeToArray(a).slice());cX(a,function(g,h){cr(g)&&(g=j.get(g));if(g!=null&&g<c){a[h]=g;applyDim(b[g],f,h)}})});var h=0;cX(i,function(a,l){var f;var a;var c;var g;if(cr(a)){f=a;a={}}else {f=a.name;a=clone(a);c=a.dimsDef;g=a.otherDims;a.name=a.coordDim=a.coordDimIndex=a.dimsDef=a.otherDims=null}var j=normalizeToArray(o.get(f));if(!j.length){for(var k=0;k<(c&&c.length||1);k++){while(h<b.length&&b[h].coordDim!=null){h++}h<b.length&&j.push(h++)}}cX(j,function(k,j){var h=b[k];applyDim(gY(h,a),f,j);if(h.name==null&&c){h.name=h.tooltipName=c[j]}g&&gY(h.otherDims,g)})});var s=e.extraPrefix||'value';for(var g=0;g<c;g++){var a=b[g]=b[g]||{};var r=a.coordDim;r==null&&(a.coordDim=genName(s,p,e.extraFromZero),a.coordDimIndex=0,a.isExtraCoord=!0);a.name==null&&(a.name=genName(a.coordDim,j));a.type==null&&kJ(m,g)&&(a.type='ordinal')}return b;function applyDim(b,a,c){if(lw[a]){b.otherDims[a]=c}else {b.coordDim=a;b.coordDimIndex=c;p.set(a,!0)}}function genName(a,b,f){if(f||b.get(a)!=null){var c=0;while(b.get(a+c)!=null){c++}a+=c}b.set(a,!0);return a}}var kJ=completeDimensions.guessOrdinal=function(c,e){for(var b=0,f=c.length;b<f;b++){var a=retrieveValue(c[b]);if(!isArray(a)){return !1}var a=a[e];if(a!=null&&isFinite(a)&&a!==''){return !1}else {if(cr(a)&&a!=='-'){return !0}}}return !1};function retrieveValue(a){return isArray(a)?a:isObject(a)?a.value:a}function firstDataNotNull(b){var a=0;while(a<b.length&&b[a]==null){a++}return b[a]}function ifNeedCompleteOrdinalData(b){var a=firstDataNotNull(b);return a!=null&&!isArray(getDataItemValue(a))}function createListFromArray(b,f,q){b=b||[];if(a){if(!isArray(b)){throw new Error('Invalid data.')}}var m=f.get('coordinateSystem');var n=mc[m];var h=CoordinateSystemManager.get(m);var j={encodeDef:f.get('encode'),dimsDef:f.get('dimensions')};var e=n&&n(b,f,q,j);var c=e&&e.dimensions;if(!c){c=h&&(h.getDimensionsInfo?h.getDimensionsInfo():h.dimensions.slice())||['x','y'];c=completeDimensions(c,b,j)}var k=e?e.categoryIndex:-1;var g=new l(c,f);var p=createNameList(e,b);var i={};var o=k>=0&&ifNeedCompleteOrdinalData(b)?function(e,i,h,a){if(isDataItemOption(e)){g.hasItemOption=!0}return a===k?h:converDataValue(getDataItemValue(e),c[a])}:function(l,h,n,k){var m=getDataItemValue(l);var a=converDataValue(m&&m[k],c[k]);if(isDataItemOption(l)){g.hasItemOption=!0}var j=e&&e.categoryAxesModels;if(j&&j[h]){if(typeof a==='string'){i[h]=i[h]||j[h].getCategories();a=indexOf(i[h],a);if(a<0&&!isNaN(a)){a=+a}}}return a};g.hasItemOption=!1;g.initData(b,p,o);return g}function isStackable(a){return a!=='category'&&a!=='time'}function getDimTypeByAxis(a){return a==='category'?'ordinal':a==='time'?'time':'float'}var mc={cartesian2d:function(o,b,n,m){var l=map(['xAxis','yAxis'],function(a){return n.queryComponents({mainType:a,index:b.get(a+'Index'),id:b.get(a+'Id')})[0]});var f=l[0];var g=l[1];if(a){if(!f){throw new Error('xAxis "'+retrieve(b.get('xAxisIndex'),b.get('xAxisId'),0)+'" not found')}if(!g){throw new Error('yAxis "'+retrieve(b.get('xAxisIndex'),b.get('yAxisId'),0)+'" not found')}}var h=f.get('type');var i=g.get('type');var e=[{name:'x',type:getDimTypeByAxis(h),stackable:isStackable(h)},{name:'y',type:getDimTypeByAxis(i),stackable:isStackable(i)}];var j=h==='category';var k=i==='category';e=completeDimensions(e,o,m);var c={};if(j){c.x=f}if(k){c.y=g}return {dimensions:e,categoryIndex:j?0:k?1:-1,categoryAxesModels:c}},singleAxis:function(k,g,j,i){var b=j.queryComponents({mainType:'singleAxis',index:g.get('singleAxisIndex'),id:g.get('singleAxisId')})[0];if(a){if(!b){throw new Error('singleAxis should be specified.')}}var c=b.get('type');var h=c==='category';var e=[{name:'single',type:getDimTypeByAxis(c),stackable:isStackable(c)}];e=completeDimensions(e,k,i);var f={};if(h){f.single=b}return {dimensions:e,categoryIndex:h?0:-1,categoryAxesModels:f}},polar:function(o,k,n,m){var l=n.queryComponents({mainType:'polar',index:k.get('polarIndex'),id:k.get('polarId')})[0];var e=l.findAxisModel('angleAxis');var c=l.findAxisModel('radiusAxis');if(a){if(!e){throw new Error('angleAxis option not found')}if(!c){throw new Error('radiusAxis option not found')}}var f=c.get('type');var g=e.get('type');var h=[{name:'radius',type:getDimTypeByAxis(f),stackable:isStackable(f)},{name:'angle',type:getDimTypeByAxis(g),stackable:isStackable(g)}];var j=g==='category';var i=f==='category';h=completeDimensions(h,o,m);var b={};if(i){b.radius=c}if(j){b.angle=e}return {dimensions:h,categoryIndex:j?1:i?0:-1,categoryAxesModels:b}},geo:function(b,c,e,a){return {dimensions:completeDimensions([{name:'lng'},{name:'lat'}],b,a)}}};function createNameList(a,c){var b=[];var h=a&&a.dimensions[a.categoryIndex];var f;if(h){f=a.categoryAxesModels[h.name]}if(f){var g=f.getCategories();if(g){var i=c.length;if(isArray(c[0])&&c[0].length>1){b=[];for(var e=0;e<i;e++){b[e]=g[c[e][a.categoryIndex||0]]}}else {b=g.slice(0)}}}return b}function Scale(a){this._setting=a||{};this._extent=[Infinity,-Infinity];this._interval=0;this.init&&this.init.apply(this,arguments)}Scale.prototype.parse=function(a){return a};Scale.prototype.getSetting=function(a){return this._setting[a]};Scale.prototype.contain=function(b){var a=this._extent;return b>=a[0]&&b<=a[1]};Scale.prototype.normalize=function(b){var a=this._extent;if(a[1]===a[0]){return 0.5}return (b-a[0])/(a[1]-a[0])};Scale.prototype.scale=function(b){var a=this._extent;return b*(a[1]-a[0])+a[0]};Scale.prototype.unionExtent=function(b){var a=this._extent;b[0]<a[0]&&(a[0]=b[0]);b[1]>a[1]&&(a[1]=b[1])};Scale.prototype.unionExtentFromData=function(a,b){this.unionExtent(a.getDataExtent(b,!0))};Scale.prototype.getExtent=function(){return this._extent.slice()};Scale.prototype.setExtent=function(b,c){var a=this._extent;if(!isNaN(b)){a[0]=b}if(!isNaN(c)){a[1]=c}};Scale.prototype.getTicksLabels=function(){var b=[];var c=this.getTicks();for(var a=0;a<c.length;a++){b.push(this.getLabel(c[a]))}return b};Scale.prototype.isBlank=function(){return this._isBlank},Scale.prototype.setBlank=function(a){this._isBlank=a};enableClassExtend(Scale);enableClassManagement(Scale,{registerWhenExtend:!0});var ei=Scale.prototype;var dX=Scale.extend({type:'ordinal',init:function(a,b){this._data=a;this._extent=b||[0,a.length-1]},parse:function(a){return typeof a==='string'?indexOf(this._data,a):Math.round(a)},contain:function(a){a=this.parse(a);return ei.contain.call(this,a)&&this._data[a]!=null},normalize:function(a){return ei.normalize.call(this,this.parse(a))},scale:function(a){return Math.round(ei.scale.call(this,a))},getTicks:function(){var c=[];var b=this._extent;var a=b[0];while(a<=b[1]){c.push(a);a++}return c},getLabel:function(a){return this._data[a]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(a,b){this.unionExtent(a.getDataExtent(b,!1))},niceTicks:noop,niceExtent:noop});dX.create=function(){return new dX()};var dT=round;function intervalScaleNiceTicks(c,i,f,e){var b={};var j=c[1]-c[0];var a=b.interval=nice(j/i,!0);if(f!=null&&a<f){a=b.interval=f}if(e!=null&&a>e){a=b.interval=e}var g=b.intervalPrecision=getIntervalPrecision(a);var h=b.niceTickExtent=[dT(Math.ceil(c[0]/a)*a,g),dT(Math.floor(c[1]/a)*a,g)];fixExtent(h,c);return b}function getIntervalPrecision(a){return getPrecisionSafe(a)+2}function clamp(a,c,b){a[c]=Math.max(Math.min(a[c],b[1]),b[0])}function fixExtent(a,b){!isFinite(a[0])&&(a[0]=b[0]);!isFinite(a[1])&&(a[1]=b[1]);clamp(a,0,b);clamp(a,1,b);if(a[0]>a[1]){a[0]=a[1]}}function intervalScaleGetTicks(f,e,c,g){var a=[];if(!f){return a}var h=10000;if(e[0]<c[0]){a.push(e[0])}var b=c[0];while(b<=c[1]){a.push(b);b=dT(b+f,g);if(b===a[a.length-1]){break}if(a.length>h){return []}}if(e[1]>(a.length?a[a.length-1]:c[1])){a.push(e[1])}return a}var d7=round;var Q=Scale.extend({type:'interval',_interval:0,_intervalPrecision:2,setExtent:function(b,c){var a=this._extent;if(!isNaN(b)){a[0]=parseFloat(b)}if(!isNaN(c)){a[1]=parseFloat(c)}},unionExtent:function(b){var a=this._extent;b[0]<a[0]&&(a[0]=b[0]);b[1]>a[1]&&(a[1]=b[1]);Q.prototype.setExtent.call(this,a[0],a[1])},getInterval:function(){return this._interval},setInterval:function(a){this._interval=a;this._niceExtent=this._extent.slice();this._intervalPrecision=getIntervalPrecision(a)},getTicks:function(){return intervalScaleGetTicks(this._interval,this._extent,this._niceExtent,this._intervalPrecision)},getTicksLabels:function(){var b=[];var c=this.getTicks();for(var a=0;a<c.length;a++){b.push(this.getLabel(c[a]))}return b},getLabel:function(b,c){if(b==null){return ''}var a=c&&c.precision;if(a==null){a=getPrecisionSafe(b)||0}else {if(a==='auto'){a=this._intervalPrecision}}b=d7(b,a,!0);return addCommas(b)},niceTicks:function(c,g,f){c=c||5;var a=this._extent;var b=a[1]-a[0];if(!isFinite(b)){return}if(b<0){b=-b;a.reverse()}var e=intervalScaleNiceTicks(a,c,g,f);this._intervalPrecision=e.intervalPrecision;this._interval=e.interval;this._niceExtent=e.niceTickExtent},niceExtent:function(b){var a=this._extent;if(a[0]===a[1]){if(a[0]!==0){var e=a[0];if(!b.fixMax){a[1]+=e/2;a[0]-=e/2}else {a[0]-=e/2}}else {a[1]=1}}var f=a[1]-a[0];if(!isFinite(f)){a[0]=0;a[1]=1}this.niceTicks(b.splitNumber,b.minInterval,b.maxInterval);var c=this._interval;if(!b.fixMin){a[0]=d7(Math.floor(a[0]/c)*c)}if(!b.fixMax){a[1]=d7(Math.ceil(a[1]/c)*c)}}});Q.create=function(){return new Q()};var iY=Q.prototype;var hm=Math.ceil;var ha=Math.floor;var a8=1000;var a7=a8*60;var bI=a7*60;var m=bI*24;var mx=function(e,f,a,c){while(a<c){var b=a+c>>>1;if(e[b][1]<f){a=b+1}else {c=b}}return a};var en=Q.extend({type:'time',getLabel:function(c){var a=this._stepLvl;var b=new Date(c);return formatTime(a[0],b,this.getSetting('useUTC'))},niceExtent:function(b){var a=this._extent;if(a[0]===a[1]){a[0]-=m;a[1]+=m}if(a[1]===-Infinity&&a[0]===Infinity){var e=new Date();a[1]=+new Date(e.getFullYear(),e.getMonth(),e.getDate());a[0]=a[1]-m}this.niceTicks(b.splitNumber,b.minInterval,b.maxInterval);var c=this._interval;if(!b.fixMin){a[0]=round(ha(a[0]/c)*c)}if(!b.fixMax){a[1]=round(hm(a[1]/c)*c)}},niceTicks:function(f,h,g){f=f||10;var b=this._extent;var l=b[1]-b[0];var c=l/f;if(h!=null&&c<h){c=h}if(g!=null&&c>g){c=g}var j=d8.length;var o=mx(d8,c,0,j);var i=d8[Math.min(o,j-1)];var a=i[1];if(i[0]==='year'){var m=l/a;var n=nice(m/f,!0);a*=n}var e=this.getSetting('useUTC')?0:(new Date(+b[0]||+b[1])).getTimezoneOffset()*60*1000;var k=[Math.round(hm((b[0]-e)/a)*a+e),Math.round(ha((b[1]-e)/a)*a+e)];fixExtent(k,b);this._stepLvl=i;this._interval=a;this._niceExtent=k},parse:function(a){return +parseDate(a)}});each$1(['contain','normalize'],function(a){en.prototype[a]=function(b){return iY[a].call(this,this.parse(b))}});var d8=[['hh:mm:ss',a8],['hh:mm:ss',a8*5],['hh:mm:ss',a8*10],['hh:mm:ss',a8*15],['hh:mm:ss',a8*30],['hh:mm\nMM-dd',a7],['hh:mm\nMM-dd',a7*5],['hh:mm\nMM-dd',a7*10],['hh:mm\nMM-dd',a7*15],['hh:mm\nMM-dd',a7*30],['hh:mm\nMM-dd',bI],['hh:mm\nMM-dd',bI*2],['hh:mm\nMM-dd',bI*6],['hh:mm\nMM-dd',bI*12],['MM-dd\nyyyy',m],['MM-dd\nyyyy',m*2],['MM-dd\nyyyy',m*3],['MM-dd\nyyyy',m*4],['MM-dd\nyyyy',m*5],['MM-dd\nyyyy',m*6],['week',m*7],['MM-dd\nyyyy',m*10],['week',m*14],['week',m*21],['month',m*31],['week',m*42],['month',m*62],['week',m*42],['quarter',m*380/4],['month',m*31*4],['month',m*31*5],['half-year',m*380/2],['month',m*31*8],['month',m*31*10],['year',m*380]];en.create=function(a){return new en({useUTC:a.ecModel.get('useUTC')})};var ck=Scale.prototype;var bZ=Q.prototype;var iX=getPrecisionSafe;var jw=round;var ll=Math.floor;var lH=Math.ceil;var cH=Math.pow;var X=Math.log;var eE=Scale.extend({type:'log',base:10,$constructor:function(){Scale.apply(this,arguments);this._originalScale=new Q()},getTicks:function(){var a=this._originalScale;var c=this._extent;var b=a.getExtent();return map(bZ.getTicks.call(this),function(f){var e=round(cH(this.base,f));e=f===c[0]&&a.__fixMin?fixRoundingError(e,b[0]):e;e=f===c[1]&&a.__fixMax?fixRoundingError(e,b[1]):e;return e},this)},getLabel:bZ.getLabel,scale:function(a){a=ck.scale.call(this,a);return cH(this.base,a)},setExtent:function(a,b){var c=this.base;a=X(a)/X(c);b=X(b)/X(c);bZ.setExtent.call(this,a,b)},getExtent:function(){var e=this.base;var a=ck.getExtent.call(this);a[0]=cH(e,a[0]);a[1]=cH(e,a[1]);var b=this._originalScale;var c=b.getExtent();b.__fixMin&&(a[0]=fixRoundingError(a[0],c[0]));b.__fixMax&&(a[1]=fixRoundingError(a[1],c[1]));return a},unionExtent:function(a){this._originalScale.unionExtent(a);var b=this.base;a[0]=X(a[0])/X(b);a[1]=X(a[1])/X(b);ck.unionExtent.call(this,a)},unionExtentFromData:function(a,b){this.unionExtent(a.getDataExtent(b,!0,function(c){return c>0}))},niceTicks:function(e){e=e||10;var b=this._extent;var c=b[1]-b[0];if(c===Infinity||c<=0){return}var a=quantity(c);var g=e/c*a;if(g<=0.5){a*=10}while(!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0){a*=10}var f=[round(lH(b[0]/a)*a),round(ll(b[1]/a)*a)];this._interval=a;this._niceExtent=f},niceExtent:function(a){bZ.niceExtent.call(this,a);var b=this._originalScale;b.__fixMin=a.fixMin;b.__fixMax=a.fixMax}});each$1(['contain','normalize'],function(a){eE.prototype[a]=function(b){b=X(b)/X(this.base);return ck[a].call(this,b)}});eE.create=function(){return new eE()};function fixRoundingError(b,a){return jw(b,iX(a))}function getScaleExtent(j,g){var i=j.type;var c=g.getMin();var b=g.getMax();var m=c!=null;var l=b!=null;var f=j.getExtent();var h;var e;var k;if(i==='ordinal'){h=(g.get('data')||[]).length}else {e=g.get('boundaryGap');if(!isArray(e)){e=[e||0,e||0]}if(typeof e[0]==='boolean'){if(a){console.warn('Boolean type for boundaryGap is only '+'allowed for ordinal axis. Please use string in '+'percentage instead, e.g., "20%". Currently, '+'boundaryGap is set to be 0.')}e=[0,0]}e[0]=parsePercent$1(e[0],1);e[1]=parsePercent$1(e[1],1);k=f[1]-f[0]||Math.abs(f[0])}if(c==null){c=i==='ordinal'?h?0:NaN:f[0]-e[0]*k}if(b==null){b=i==='ordinal'?h?h-1:NaN:f[1]+e[1]*k}if(c==='dataMin'){c=f[0]}else {if(typeof c==='function'){c=c({min:f[0],max:f[1]})}}if(b==='dataMax'){b=f[1]}else {if(typeof b==='function'){b=b({min:f[0],max:f[1]})}}(c==null||!isFinite(c))&&(c=NaN);(b==null||!isFinite(b))&&(b=NaN);j.setBlank(eqNaN(c)||eqNaN(b));if(g.getNeedCrossZero()){if(c>0&&b>0&&!m){c=0}if(c<0&&b<0&&!l){b=0}}return [c,b]}function niceScaleExtent(b,a){var f=getScaleExtent(b,a);var i=a.getMin()!=null;var h=a.getMax()!=null;var g=a.get('splitNumber');if(b.type==='log'){b.base=a.get('logBase')}var c=b.type;b.setExtent(f[0],f[1]);b.niceExtent({splitNumber:g,fixMin:i,fixMax:h,minInterval:c==='interval'||c==='time'?a.get('minInterval'):null,maxInterval:c==='interval'||c==='time'?a.get('maxInterval'):null});var e=a.get('interval');if(e!=null){b.setInterval&&b.setInterval(e)}}function createScaleByModel(b,a){a=a||b.get('type');if(a){switch(a){case 'category':return new dX(b.getCategories(),[Infinity,-Infinity]);case 'value':return new Q();default:return (Scale.getClass(a)||Q).create(b);}}}function ifAxisCrossZero(e){var a=e.scale.getExtent();var c=a[0];var b=a[1];return !(c>0&&b>0||c<0&&b<0)}function getAxisLabelInterval(i,h,n,m,l){var c;var e=0;var g=0;var k=(m-l)/180*Math.PI;var b=1;if(h.length>40){b=Math.floor(h.length/40)}for(var f=0;f<i.length;f+=b){var j=i[f];var a=getBoundingRect(h[f],n,'center','top');a.x+=j*Math.cos(k);a.y+=j*Math.sin(k);a.width*=1.3;a.height*=1.3;if(!c){c=a.clone()}else {if(c.intersect(a)){g++;e=Math.max(e,g)}else {c.union(a);g=0}}}if(e===0&&b>1){return b}return (e+1)*b-1}function getFormattedLabels(e,a){var c=e.scale;var b=c.getTicksLabels();var f=c.getTicks();if(typeof a==='string'){a=function(b){return function(c){return b.replace('{value}',c!=null?c:'')}}(a);return map(b,a)}else {if(typeof a==='function'){return map(f,function(b,c){return a(getAxisRawValue(e,b),c)},this)}else {return b}}}function getAxisRawValue(b,a){return b.type==='category'?b.scale.getLabel(a):a}function getName(a){if(isObject(a)&&a.value!=null){return a.value}else {return a+''}}var aD={getFormattedLabels:function(){return getFormattedLabels(this.axis,this.get('axisLabel.formatter'))},getCategories:function(){return this.get('type')==='category'&&map(this.get('data'),getName)},getMin:function(c){var b=this.option;var a=!c&&b.rangeStart!=null?b.rangeStart:b.min;if(this.axis&&a!=null&&a!=='dataMin'&&typeof a!=='function'&&!eqNaN(a)){a=this.axis.scale.parse(a)}return a},getMax:function(c){var b=this.option;var a=!c&&b.rangeEnd!=null?b.rangeEnd:b.max;if(this.axis&&a!=null&&a!=='dataMax'&&typeof a!=='function'&&!eqNaN(a)){a=this.axis.scale.parse(a)}return a},getNeedCrossZero:function(){var a=this.option;return a.rangeStart!=null||a.rangeEnd!=null?!1:!a.scale},getCoordSysModel:noop,setRange:function(a,b){this.option.rangeStart=a;this.option.rangeEnd=b},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}};var ma=extendShape({type:'triangle',shape:{cx:0,cy:0,width:0,height:0},buildPath:function(b,a){var e=a.cx;var f=a.cy;var g=a.width/2;var c=a.height/2;b.moveTo(e,f-c);b.lineTo(e+g,f+c);b.lineTo(e-g,f+c);b.closePath()}});var mj=extendShape({type:'diamond',shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,b){var c=b.cx;var e=b.cy;var g=b.width/2;var f=b.height/2;a.moveTo(c,e-f);a.lineTo(c+g,e);a.lineTo(c,e+f);a.lineTo(c-g,e);a.closePath()}});var mV=extendShape({type:'pin',shape:{x:0,y:0,width:0,height:0},buildPath:function(f,i){var b=i.x;var k=i.y;var p=i.width/5*3;var o=Math.max(p,i.height);var a=p/2;var c=a*a/(o-a);var g=k-o+a+c;var e=Math.asin(c/a);var j=Math.cos(e)*a;var m=Math.sin(e);var n=Math.cos(e);var h=a*0.6;var l=a*0.7;f.moveTo(b-j,g+c);f.arc(b,g,a,Math.PI-e,Math.PI*2+e);f.bezierCurveTo(b+j-m*h,g+c+n*h,b,k-l,b,k);f.bezierCurveTo(b,k-l,b-j+m*h,g+c+n*h,b-j,g+c);f.closePath()}});var mM=extendShape({type:'arrow',shape:{x:0,y:0,width:0,height:0},buildPath:function(a,e){var f=e.height;var h=e.width;var b=e.x;var c=e.y;var g=h/3*2;a.moveTo(b,c);a.lineTo(b+g,c+f);a.lineTo(b,c+f/4*3);a.lineTo(b-g,c+f);a.lineTo(b,c);a.closePath()}});var lq={line:L,rect:k,roundRect:k,square:k,circle:aT,diamond:mj,pin:mV,arrow:mM,triangle:ma};var jj={line:function(c,e,f,b,a){a.x1=c;a.y1=e+b/2;a.x2=c+f;a.y2=e+b/2},rect:function(e,f,c,b,a){a.x=e;a.y=f;a.width=c;a.height=b},roundRect:function(e,f,c,b,a){a.x=e;a.y=f;a.width=c;a.height=b;a.r=Math.min(c,b)/4},square:function(f,g,e,c,a){var b=Math.min(e,c);a.x=f;a.y=g;a.width=b;a.height=b},circle:function(e,f,c,b,a){a.cx=e+c/2;a.cy=f+b/2;a.r=Math.min(c,b)/2},diamond:function(e,f,c,b,a){a.cx=e+c/2;a.cy=f+b/2;a.width=c;a.height=b},pin:function(e,f,c,b,a){a.x=e+c/2;a.y=f+b/2;a.width=c;a.height=b},arrow:function(e,f,c,b,a){a.x=e+c/2;a.y=f+b/2;a.width=c;a.height=b},triangle:function(e,f,c,b,a){a.cx=e+c/2;a.cy=f+b/2;a.width=c;a.height=b}};var di={};each$1(lq,function(a,b){di[b]=new a()});var lR=extendShape({type:'symbol',shape:{symbolType:'',x:0,y:0,width:0,height:0},beforeBrush:function(){var a=this.style;var b=this.shape;if(b.symbolType==='pin'&&a.textPosition==='inside'){a.textPosition=['50%','40%'];a.textAlign='center';a.textVerticalAlign='middle'}},buildPath:function(f,a,e){var c=a.symbolType;var b=di[c];if(a.symbolType!=='none'){if(!b){c='rect';b=di[c]}jj[c](a.x,a.y,a.width,a.height,b.shape);b.buildPath(f,b.shape,e)}}});function symbolPathSetColor(b,e){if(this.type!=='image'){var a=this.style;var c=this.shape;if(c&&c.symbolType==='line'){a.stroke=b}else {if(this.__isEmptyBrush){a.stroke=b;a.fill=e||'#fff'}else {a.fill&&(a.fill=b);a.stroke&&(a.stroke=b)}}this.dirty(!1)}}function createSymbol(a,f,g,e,c,j,h){var i=a.indexOf('empty')===0;if(i){a=a.substr(5,1).toLowerCase()+a.substr(6)}var b;if(a.indexOf('image://')===0){b=makeImage(a.slice(8),new BoundingRect(f,g,e,c),h?'center':'cover')}else {if(a.indexOf('path://')===0){b=makePath(a.slice(7),{},new BoundingRect(f,g,e,c),h?'center':'cover')}else {b=new lR({shape:{symbolType:a,x:f,y:g,width:e,height:c}})}}b.__isEmptyBrush=i;b.setColor=symbolPathSetColor;b.setColor(j);return b}function createList(a){var b=a.get('data');return createListFromArray(b,a,a.ecModel)}function createScale(e,b){var a=b;if(!(b instanceof Model)){a=new Model(b);mixin(a,aD)}var c=createScaleByModel(a);c.setExtent(e[0],e[1]);niceScaleExtent(c,a);return c}function mixinAxisModelCommonMethods(a){mixin(a,aD)}var mB=(Object.freeze||Object)({createList:createList,createScale:createScale,mixinAxisModelCommonMethods:mixinAxisModelCommonMethods,completeDimensions:completeDimensions,createSymbol:createSymbol});var gP=linearMap;function fixExtentWithBands(a,c){var e=a[1]-a[0];var f=c;var b=e/f/2;a[0]+=b;a[1]-=b}var fU=[0,1];var q=function(c,b,a){this.dim=c;this.scale=b;this._extent=a||[0,0];this.inverse=!1;this.onBand=!1;this._labelInterval};q.prototype={constructor:q,contain:function(b){var a=this._extent;var e=Math.min(a[0],a[1]);var c=Math.max(a[0],a[1]);return b>=e&&b<=c},containData:function(a){return this.contain(this.dataToCoord(a))},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(a){return getPixelPrecision(a||this.scale.getExtent(),this._extent)},setExtent:function(b,c){var a=this._extent;a[0]=b;a[1]=c},dataToCoord:function(c,e){var a=this._extent;var b=this.scale;c=b.normalize(c);if(this.onBand&&b.type==='ordinal'){a=a.slice();fixExtentWithBands(a,b.count())}return gP(c,fU,a,e)},coordToData:function(e,c){var a=this._extent;var b=this.scale;if(this.onBand&&b.type==='ordinal'){a=a.slice();fixExtentWithBands(a,b.count())}var f=gP(e,a,fU,c);return this.scale.scale(f)},pointToData:function(b,a){},getTicksCoords:function(e){if(this.onBand&&!e){var b=this.getBands();var c=[];for(var a=0;a<b.length;a++){c.push(b[a][0])}if(b[a-1]){c.push(b[a-1][1])}return c}else {return map(this.scale.getTicks(),this.dataToCoord,this)}},getLabelsCoords:function(){return map(this.scale.getTicks(),this.dataToCoord,this)},getBands:function(){var e=this.getExtent();var f=[];var c=this.scale.count();var b=e[0];var h=e[1];var g=h-b;for(var a=0;a<c;a++){f.push([g*a/c+b,g*(a+1)/c+b])}return f},getBandWidth:function(){var b=this._extent;var c=this.scale.getExtent();var a=c[1]-c[0]+(this.onBand?1:0);a===0&&(a=1);var e=Math.abs(b[1]-b[0]);return Math.abs(e)/a},isHorizontal:null,getRotate:null,getLabelInterval:function(){var a=this._labelInterval;if(!a){var c=this.model;var b=c.getModel('axisLabel');a=b.get('interval');if(this.type==='category'&&(a==null||a==='auto')){a=getAxisLabelInterval(map(this.scale.getTicks(),this.dataToCoord,this),c.getFormattedLabels(),b.getFont(),this.getRotate?this.getRotate():this.isHorizontal&&!this.isHorizontal()?90:0,b.get('rotate'))}this._labelInterval=a}return a}};var lO=1.0E-8;function isAroundEqual$1(a,b){return Math.abs(a-b)<lO}function contain$1(b,h,i){var g=0;var a=b[0];if(!a){return !1}for(var f=1;f<b.length;f++){var e=b[f];g+=windingLine(a[0],a[1],e[0],e[1],h,i);a=e}var c=b[0];if(!isAroundEqual$1(a[0],c[0])||!isAroundEqual$1(a[1],c[1])){g+=windingLine(a[0],a[1],c[0],c[1],h,i)}return g!==0}function Region(e,c,a){this.name=e;this.geometries=c;if(!a){var b=this.getBoundingRect();a=[b.x+b.width/2,b.y+b.height/2]}else {a=[a[0],a[1]]}this.center=a}Region.prototype={constructor:Region,properties:null,getBoundingRect:function(){var i=this._rect;if(i){return i}var e=Number.MAX_VALUE;var a=[e,e];var b=[-e,-e];var h=[];var g=[];var f=this.geometries;for(var c=0;c<f.length;c++){if(f[c].type!=='polygon'){continue}var j=f[c].exterior;fromPoints(j,h,g);min(a,a,h);max(b,b,g)}if(c===0){a[0]=a[1]=b[0]=b[1]=0}return this._rect=new BoundingRect(a[0],a[1],b[0]-a[0],b[1]-a[1])},contain:function(c){var i=this.getBoundingRect();var b=this.geometries;if(!i.contain(c[0],c[1])){return !1}j: for(var a=0,h=b.length;a<h;a++){if(b[a].type!=='polygon'){continue}var g=b[a].exterior;var e=b[a].interiors;if(contain$1(g,c[0],c[1])){for(var f=0;f<(e?e.length:0);f++){if(contain$1(e[f])){continue j}}return !0}}return !1},transformTo:function(n,o,i,h){var a=this.getBoundingRect();var l=a.width/a.height;if(!i){i=l*h}else {if(!h){h=i/l}}var m=new BoundingRect(n,o,i,h);var k=a.calculateTransform(m);var g=this.geometries;for(var f=0;f<g.length;f++){if(g[f].type!=='polygon'){continue}var j=g[f].exterior;var c=g[f].interiors;for(var b=0;b<j.length;b++){applyTransform(j[b],j[b],k)}for(var e=0;e<(c?c.length:0);e++){for(var b=0;b<c[e].length;b++){applyTransform(c[e][b],c[e][b],k)}}}a=this._rect;a.copy(m);this.center=[a.x+a.width/2,a.y+a.height/2]}};function decode(a){if(!a.UTF8Encoding){return a}var e=a.UTF8Scale;if(e==null){e=1024}var k=a.features;for(var i=0;i<k.length;i++){var l=k[i];var g=l.geometry;var h=g.coordinates;var j=g.encodeOffsets;for(var b=0;b<h.length;b++){var f=h[b];if(g.type==='Polygon'){h[b]=decodePolygon(f,j[b],e)}else {if(g.type==='MultiPolygon'){for(var c=0;c<f.length;c++){var m=f[c];f[c]=decodePolygon(m,j[b][c],e)}}}}}a.UTF8Encoding=!1;return a}function decodePolygon(e,f,g){var h=[];var i=f[0];var j=f[1];for(var c=0;c<e.length;c+=2){var a=e.charCodeAt(c)-64;var b=e.charCodeAt(c+1)-64;a=a>>1^-(a&1);b=b>>1^-(b&1);a+=i;b+=j;i=a;j=b;h.push([a/g,b/g])}return h}var gD=function(a){decode(a);return map(filter(a.features,function(b){return b.geometry&&b.properties&&b.geometry.coordinates.length>0}),function(g){var e=g.properties;var f=g.geometry;var b=f.coordinates;var c=[];if(f.type==='Polygon'){c.push({type:'polygon',exterior:b[0],interiors:b.slice(1)})}if(f.type==='MultiPolygon'){each$1(b,function(b){if(b[0]){c.push({type:'polygon',exterior:b[0],interiors:b.slice(1)})}})}var h=new Region(e.name,c,e.cp);h.properties=e;return h})};var hM={};each$1(['map','each','filter','indexOf','inherits','reduce','filter','bind','curry','isArray','isString','isObject','isFunction','extend','defaults','clone','merge'],function(a){hM[a]=mL[a]});r.extend({type:'series.line',dependencies:['grid','polar'],getInitialData:function(c,e){if(a){var b=c.coordinateSystem;if(b!=='polar'&&b!=='cartesian2d'){throw new Error('Line not support coordinateSystem besides cartesian and polar')}}return createListFromArray(c.data,this,e)},defaultOption:{zlevel:0,z:2,coordinateSystem:'cartesian2d',legendHoverLink:!0,hoverAnimation:!0,clipOverflow:!0,label:{normal:{position:'top'}},lineStyle:{normal:{width:2,type:'solid'}},step:!1,smooth:!1,smoothMonotone:null,symbol:'emptyCircle',symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:!1,connectNulls:!1,sampling:'none',animationEasing:'linear',progressive:0,hoverLayerThreshold:Infinity}});function findLabelValueDim(c){var a;var f=otherDimToDataDim(c,'label');if(f.length){a=f[0]}else {var e=c.dimensions.slice();var b;while(e.length&&(a=e.pop(),b=c.getDimensionInfo(a).type,b==='ordinal'||b==='time')){}}return a}function getSymbolSize(b,c){var a=b.getItemVisual(c,'symbolSize');return a instanceof Array?a.slice():[+a,+a]}function getScale(a){return [a[0]/2,a[1]/2]}function SymbolClz$1(c,e,a){b.call(this);this.updateData(c,e,a)}var N=SymbolClz$1.prototype;function driftSymbol(a,b){this.parent.drift(a,b)}N._createSymbol=function(b,f,g,c){this.removeAll();var e=f.getItemVisual(g,'color');var a=createSymbol(b,-1,-1,2,2,e);a.attr({z2:100,culling:!0,scale:getScale(c)});a.drift=driftSymbol;this._symbolType=b;this.add(a)};N.stopSymbolAnimation=function(a){this.childAt(0).stopAnimation(a)};N.getSymbolPath=function(){return this.childAt(0)};N.getScale=function(){return this.childAt(0).scale};N.highlight=function(){this.childAt(0).trigger('emphasis')};N.downplay=function(){this.childAt(0).trigger('normal')};N.setZ=function(b,c){var a=this.childAt(0);a.zlevel=b;a.z=c};N.setDraggable=function(b){var a=this.childAt(0);a.draggable=b;a.cursor=b?'move':'pointer'};N.updateData=function(c,b,f){this.silent=!1;var h=c.getItemVisual(b,'symbol')||'circle';var e=c.hostModel;var g=getSymbolSize(c,b);var j=h!==this._symbolType;if(j){this._createSymbol(h,c,b,g)}else {var a=this.childAt(0);a.silent=!1;updateProps(a,{scale:getScale(g)},e,b)}this._updateCommon(c,b,g,f);if(j){var a=this.childAt(0);var i=f&&f.fadeIn;var k={scale:a.scale.slice()};i&&(k.style={opacity:a.style.opacity});a.scale=[0,0];i&&(a.style.opacity=0);initProps(a,k,e,b)}this._seriesModel=e};var iE=['itemStyle','normal'];var it=['itemStyle','emphasis'];var iD=['label','normal'];var is=['label','emphasis'];N._updateCommon=function(e,g,l,a){var b=this.childAt(0);var p=e.hostModel;var x=e.getItemVisual(g,'color');if(b.type!=='image'){b.useStyle({strokeNoScale:!0})}var s=a&&a.itemStyle;var h=a&&a.hoverItemStyle;var o=a&&a.symbolRotate;var i=a&&a.symbolOffset;var q=a&&a.labelModel;var m=a&&a.hoverLabelModel;var n=a&&a.hoverAnimation;var k=a&&a.cursorStyle;if(!a||e.hasItemOption){var c=a&&a.itemModel?a.itemModel:e.getItemModel(g);s=c.getModel(iE).getItemStyle(['color']);h=c.getModel(it).getItemStyle();o=c.getShallow('symbolRotate');i=c.getShallow('symbolOffset');q=c.getModel(iD);m=c.getModel(is);n=c.getShallow('hoverAnimation');k=c.getShallow('cursor')}else {h=extend({},h)}var v=b.style;b.attr('rotation',(o||0)*Math.PI/180||0);if(i){b.attr('position',[parsePercent$1(i[0],l[0]),parsePercent$1(i[1],l[1])])}k&&b.attr('cursor',k);b.setColor(x,a&&a.symbolInnerColor);b.setStyle(s);var w=e.getItemVisual(g,'opacity');if(w!=null){v.opacity=w}var j=a&&a.useNameLabel;var u=!j&&findLabelValueDim(e);if(j||u!=null){setLabelStyle(v,h,q,m,{labelFetcher:p,labelDataIndex:g,defaultText:j?e.getName(g):e.get(u,g),isRectText:!0,autoColor:x})}b.off('mouseover').off('mouseout').off('emphasis').off('normal');b.hoverStyle=h;setHoverStyle(b);var f=getScale(l);if(n&&p.isAnimationEnabled()){var r=function(){var b=f[1]/f[0];this.animateTo({scale:[Math.max(f[0]*1.1,f[0]+3),Math.max(f[1]*1.1,f[1]+3*b)]},400,'elasticOut')};var t=function(){this.animateTo({scale:f},400,'elasticOut')};b.on('mouseover',r).on('mouseout',t).on('emphasis',r).on('normal',t)}};N.fadeOut=function(c,b){var a=this.childAt(0);this.silent=a.silent=!0;!(b&&b.keepLabel)&&(a.style.text=null);updateProps(a,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,c)};inherits(SymbolClz$1,b);function SymbolDraw(a){this.group=new b();this._symbolCtor=a||SymbolClz$1}var dF=SymbolDraw.prototype;function symbolNeedsDraw(e,b,c){var a=e.getItemLayout(b);return a&&!isNaN(a[0])&&!isNaN(a[1])&&!(c&&c(b))&&e.getItemVisual(b,'symbol')!=='none'}dF.updateData=function(a,h){var c=this.group;var b=a.hostModel;var e=this._data;var g=this._symbolCtor;var f={itemStyle:b.getModel('itemStyle.normal').getItemStyle(['color']),hoverItemStyle:b.getModel('itemStyle.emphasis').getItemStyle(),symbolRotate:b.get('symbolRotate'),symbolOffset:b.get('symbolOffset'),hoverAnimation:b.get('hoverAnimation'),labelModel:b.getModel('label.normal'),hoverLabelModel:b.getModel('label.emphasis'),cursorStyle:b.get('cursor')};a.diff(e).add(function(b){var i=a.getItemLayout(b);if(symbolNeedsDraw(a,b,h)){var e=new g(a,b,f);e.attr('position',i);a.setItemGraphicEl(b,e);c.add(e)}}).update(function(j,l){var i=e.getItemGraphicEl(l);var k=a.getItemLayout(j);if(!symbolNeedsDraw(a,j,h)){c.remove(i);return}if(!i){i=new g(a,j);i.attr('position',k)}else {i.updateData(a,j,f);updateProps(i,{position:k},b)}c.add(i);a.setItemGraphicEl(j,i)}).remove(function(f){var b=e.getItemGraphicEl(f);b&&b.fadeOut(function(){c.remove(b)})}).execute();this._data=a};dF.updateLayout=function(){var a=this._data;if(a){a.eachItemGraphicEl(function(e,c){var b=a.getItemLayout(c);e.attr('position',b)})}};dF.remove=function(c){var a=this.group;var b=this._data;if(b){if(c){b.eachItemGraphicEl(function(b){b.fadeOut(function(){a.remove(b)})})}else {a.removeAll()}}};function sign$1(a){return a>=0?1:-1}function getStackedOnPoint(h,i,b){var g=h.getBaseAxis();var k=h.getOtherAxis(g);var l=g.onZero?0:k.scale.getExtent()[0];var a=k.dim;var j=a==='x'||a==='radius'?1:0;var c;var f=i.stackedOn;var m=i.get(a,b);while(f&&sign$1(f.get(a,b))===sign$1(m)){c=f;break}var e=[];e[j]=i.get(g.dim,b);e[1-j]=c?c.get(a,b,!0):l;return h.dataToPoint(e)}function diffData(c,b){var a=[];b.diff(c).add(function(e){a.push({cmd:'+',idx:e})}).update(function(e,f){a.push({cmd:'=',idx:f,idx1:e})}).remove(function(e){a.push({cmd:'-',idx:e})}).execute();return a}var jd=function(f,e,s,r,w,o){var B=diffData(f,e);var k=[];var l=[];var i=[];var j=[];var A=[];var g=[];var h=[];var n=o.dimensions;for(var b=0;b<B.length;b++){var c=B[b];var x=!0;switch(c.cmd){case '=':var m=f.getItemLayout(c.idx);var z=e.getItemLayout(c.idx1);if(isNaN(m[0])||isNaN(m[1])){m=z.slice()};k.push(m);l.push(z);i.push(s[c.idx]);j.push(r[c.idx1]);h.push(e.getRawIndex(c.idx1));break;case '+':var a=c.idx;k.push(w.dataToPoint([e.get(n[0],a,!0),e.get(n[1],a,!0)]));l.push(e.getItemLayout(a).slice());i.push(getStackedOnPoint(w,e,a));j.push(r[a]);h.push(e.getRawIndex(a));break;case '-':var a=c.idx;var y=f.getRawIndex(a);if(y!==a){k.push(f.getItemLayout(a));l.push(o.dataToPoint([f.get(n[0],a,!0),f.get(n[1],a,!0)]));i.push(s[a]);j.push(getStackedOnPoint(o,f,a));h.push(y)}else {x=!1};}if(x){A.push(c);g.push(g.length)}}g.sort(function(a,b){return h[a]-h[b]});var t=[];var u=[];var p=[];var q=[];var v=[];for(var b=0;b<g.length;b++){var a=g[b];t[b]=k[a];u[b]=l[a];p[b]=i[a];q[b]=j[a];v[b]=A[a]}return {current:t,next:u,stackedOnCurrent:p,stackedOnNext:q,status:v}};var hE=min;var hD=max;var gx=scaleAndAdd;var hN=copy;var fj=[];var aB=[];var aC=[];function isPointNull(a){return isNaN(a[0])||isNaN(a[1])}function drawSegment(p,e,u,w,v,g,s,r,n,j,k){var t=0;var c=u;for(var q=0;q<w;q++){var a=e[c];if(c>=v||c<0){break}if(isPointNull(a)){if(k){c+=g;continue}break}if(c===u){p[g>0?'moveTo':'lineTo'](a[0],a[1]);hN(aB,a)}else {if(n>0){var f=c+g;var b=e[f];if(k){while(b&&isPointNull(e[f])){f+=g;b=e[f]}}var l=0.5;var o=e[t];var b=e[f];if(!b||isPointNull(b)){hN(aC,a)}else {if(isPointNull(b)&&!k){b=a}sub(fj,b,o);var m;var h;if(j==='x'||j==='y'){var i=j==='x'?0:1;m=Math.abs(a[i]-o[i]);h=Math.abs(a[i]-b[i])}else {m=aZ(a,o);h=aZ(a,b)}l=h/(h+m);gx(aC,a,fj,-n*(1-l))}hE(aB,aB,r);hD(aB,aB,s);hE(aC,aC,r);hD(aC,aC,s);p.bezierCurveTo(aB[0],aB[1],aC[0],aC[1],a[0],a[1]);gx(aB,a,fj,n*l)}else {p.lineTo(a[0],a[1])}}t=c;c+=g}return q}function getBoundingBox(g,e){var c=[Infinity,Infinity];var b=[-Infinity,-Infinity];if(e){for(var f=0;f<g.length;f++){var a=g[f];if(a[0]<c[0]){c[0]=a[0]}if(a[1]<c[1]){c[1]=a[1]}if(a[0]>b[0]){b[0]=a[0]}if(a[1]>b[1]){b[1]=a[1]}}}return {min:e?c:b,max:e?b:c}}var ly=Path.extend({type:'ec-polyline',shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:'#000'},brush:dn(Path.prototype.brush),buildPath:function(g,b){var e=b.points;var c=0;var a=e.length;var f=getBoundingBox(e,b.smoothConstraint);if(b.connectNulls){for(;a>0;a--){if(!isPointNull(e[a-1])){break}}for(;c<a;c++){if(!isPointNull(e[c])){break}}}while(c<a){c+=drawSegment(g,e,c,a,a,1,f.min,f.max,b.smooth,b.smoothMonotone,b.connectNulls)+1}}});var g2=Path.extend({type:'ec-polygon',shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:dn(Path.prototype.brush),buildPath:function(f,a){var e=a.points;var h=a.stackedOnPoints;var c=0;var b=e.length;var i=a.smoothMonotone;var k=getBoundingBox(e,a.smoothConstraint);var j=getBoundingBox(h,a.smoothConstraint);if(a.connectNulls){for(;b>0;b--){if(!isPointNull(e[b-1])){break}}for(;c<b;c++){if(!isPointNull(e[c])){break}}}while(c<b){var g=drawSegment(f,e,c,b,b,1,k.min,k.max,a.smooth,i,a.connectNulls);drawSegment(f,h,c+g-1,g,b,-1,j.min,j.max,a.stackedOnSmooth,i,a.connectNulls);c+=g+1;f.closePath()}}});function isPointsSame(b,c){if(b.length!==c.length){return}for(var a=0;a<b.length;a++){var e=b[a];var f=c[a];if(e[0]!==f[0]||e[1]!==f[1]){return}}return !0}function getSmooth(a){return typeof a==='number'?a:a?0.3:0}function getAxisExtentWithGap(b){var a=b.getGlobalExtent();if(b.onBand){var c=b.getBandWidth()/2-1;var e=a[1]>a[0]?1:-1;a[0]+=e*c;a[1]-=e*c}return a}function sign(a){return a>=0?1:-1}function getStackedOnPoints(f,g){var e=f.getBaseAxis();var i=f.getOtherAxis(e);var c=0;if(!e.onZero){var b=i.scale.getExtent();if(b[0]>0){c=b[0]}else {if(b[1]<0){c=b[1]}}}var a=i.dim;var h=a==='x'||a==='radius'?1:0;return g.mapArray([a],function(l,k){var b;var j=g.stackedOn;while(j&&sign(j.get(a,k))===sign(l)){b=j;break}var i=[];i[h]=g.get(e.dim,k);i[1-h]=b?b.get(a,k,!0):c;return f.dataToPoint(i)},!0)}function createGridClipShape(h,n,g){var b=getAxisExtentWithGap(h.getAxis('x'));var c=getAxisExtentWithGap(h.getAxis('y'));var m=h.getBaseAxis().isHorizontal();var j=Math.min(b[0],b[1]);var l=Math.min(c[0],c[1]);var f=Math.max(b[0],b[1])-j;var e=Math.max(c[0],c[1])-l;var o=g.get('lineStyle.normal.width')||2;var a=g.get('clipOverflow')?o/2:Math.max(f,e);if(m){l-=a;e+=a*2}else {j-=a;f+=a*2}var i=new k({shape:{x:j,y:l,width:f,height:e}});if(n){i.shape[m?'width':'height']=0;initProps(i,{shape:{width:f,height:e}},g)}return i}function createPolarClipShape(c,h,i){var g=c.getAngleAxis();var j=c.getRadiusAxis();var f=j.getExtent();var a=g.getExtent();var b=Math.PI/180;var e=new as({shape:{cx:c.cx,cy:c.cy,r0:f[0],r:f[1],startAngle:-a[0]*b,endAngle:-a[1]*b,clockwise:g.inverse}});if(h){e.shape.endAngle=-a[0]*b;initProps(e,{shape:{endAngle:-a[1]*b}},i)}return e}function createClipShape(a,b,c){return a.type==='polar'?createPolarClipShape(a,b,c):createGridClipShape(a,b,c)}function turnPointsIntoStep(f,l,k){var j=l.getBaseAxis();var a=j.dim==='x'||j.dim==='radius'?0:1;var c=[];for(var e=0;e<f.length-1;e++){var h=f[e+1];var g=f[e];c.push(g);var b=[];switch(k){case 'end':b[a]=h[a];b[1-a]=g[1-a];c.push(b);break;case 'middle':var m=(g[a]+h[a])/2;var i=[];b[a]=i[a]=m;b[1-a]=g[1-a];i[1-a]=h[1-a];c.push(b);c.push(i);break;default:b[a]=g[a];b[1-a]=h[1-a];c.push(b);}}f[e]&&c.push(f[e]);return c}function getVisualGradient(l,o){var e=l.getVisual('visualMeta');if(!e||!e.length||!l.count()){return}var f;for(var g=e.length-1;g>=0;g--){if(e[g].dimension<2){f=e[g];break}}if(!f||o.type!=='cartesian2d'){if(a){console.warn('Visual map on line style only support x or y dimension.')}return}var r=f.dimension;var k=l.dimensions[r];var q=o.getAxis(k);var b=map(f.stops,function(a){return {coord:q.toGlobalCoord(q.dataToCoord(a.value)),color:a.color}});var c=b.length;var h=f.outerColors.slice();if(c&&b[0].coord>b[c-1].coord){b.reverse();h.reverse()}var m=10;var j=b[0].coord-m;var p=b[c-1].coord+m;var n=p-j;if(n<0.001){return 'transparent'}each$1(b,function(a){a.offset=(a.coord-j)/n});b.push({offset:c?b[c-1].offset:0.5,color:h[1]||'transparent'});b.unshift({offset:c?b[0].offset:0.5,color:h[0]||'transparent'});var i=new a2(0,0,0,0,b,!0);i[k]=j;i[k+'2']=p;return i}Chart.extend({type:'line',init:function(){var c=new b();var a=new SymbolDraw();this.group.add(a.group);this._symbolDraw=a;this._lineGroup=c},render:function(a,B,A){var b=a.coordinateSystem;var w=this.group;var c=a.getData();var y=a.getModel('lineStyle.normal');var s=a.getModel('areaStyle.normal');var f=c.mapArray(c.getItemLayout,!0);var q=b.type==='polar';var z=this._coordSys;var n=this._symbolDraw;var i=this._polyline;var e=this._polygon;var l=this._lineGroup;var j=a.get('animation');var m=!s.isEmpty();var g=getStackedOnPoints(b,c);var k=a.get('showSymbol');var t=k&&!q&&!a.get('showAllSymbol')&&this._getSymbolIgnoreFunc(c,b);var o=this._data;o&&o.eachItemGraphicEl(function(b,c){if(b.__temp){w.remove(b);o.setItemGraphicEl(c,null)}});if(!k){n.remove()}w.add(l);var h=!q&&a.get('step');if(!(i&&z.type===b.type&&h===this._step)){k&&n.updateData(c,t);if(h){f=turnPointsIntoStep(f,b,h);g=turnPointsIntoStep(g,b,h)}i=this._newPolyline(f,b,j);if(m){e=this._newPolygon(f,g,b,j)}l.setClipPath(createClipShape(b,!0,a))}else {if(m&&!e){e=this._newPolygon(f,g,b,j)}else {if(e&&!m){l.remove(e);e=this._polygon=null}}l.setClipPath(createClipShape(b,!1,a));k&&n.updateData(c,t);c.eachItemGraphicEl(function(b){b.stopAnimation(!0)});if(!isPointsSame(this._stackedOnPoints,g)||!isPointsSame(this._points,f)){if(j){this._updateAnimation(c,g,b,A,h)}else {if(h){f=turnPointsIntoStep(f,b,h);g=turnPointsIntoStep(g,b,h)}i.setShape({points:f});e&&e.setShape({points:f,stackedOnPoints:g})}}}var u=getVisualGradient(c,b)||c.getVisual('color');i.useStyle(defaults(y.getLineStyle(),{fill:'none',stroke:u,lineJoin:'bevel'}));var p=a.get('smooth');p=getSmooth(a.get('smooth'));i.setShape({smooth:p,smoothMonotone:a.get('smoothMonotone'),connectNulls:a.get('connectNulls')});if(e){var v=c.stackedOn;var r=0;e.useStyle(defaults(s.getAreaStyle(),{fill:u,opacity:0.7,lineJoin:'bevel'}));if(v){var x=v.hostModel;r=getSmooth(x.get('smooth'))}e.setShape({smooth:p,stackedOnSmooth:r,smoothMonotone:a.get('smoothMonotone'),connectNulls:a.get('connectNulls')})}this._data=c;this._coordSys=b;this._stackedOnPoints=g;this._points=f;this._step=h},dispose:function(){},highlight:function(e,h,i,g){var c=e.getData();var b=queryDataIndex(c,g);if(!(b instanceof Array)&&b!=null&&b>=0){var a=c.getItemGraphicEl(b);if(!a){var f=c.getItemLayout(b);if(!f){return}a=new SymbolClz$1(c,b);a.position=f;a.setZ(e.get('zlevel'),e.get('z'));a.ignore=isNaN(f[0])||isNaN(f[1]);a.__temp=!0;c.setItemGraphicEl(b,a);a.stopSymbolAnimation(!0);this.group.add(a)}a.highlight()}else {Chart.prototype.highlight.call(this,e,h,i,g)}},downplay:function(e,g,h,f){var c=e.getData();var a=queryDataIndex(c,f);if(a!=null&&a>=0){var b=c.getItemGraphicEl(a);if(b){if(b.__temp){c.setItemGraphicEl(a,null);this.group.remove(b)}else {b.downplay()}}}else {Chart.prototype.downplay.call(this,e,g,h,f)}},_newPolyline:function(b){var a=this._polyline;if(a){this._lineGroup.remove(a)}a=new ly({shape:{points:b},silent:!0,z2:10});this._lineGroup.add(a);this._polyline=a;return a},_newPolygon:function(c,b){var a=this._polygon;if(a){this._lineGroup.remove(a)}a=new g2({shape:{points:c,stackedOnPoints:b},silent:!0});this._lineGroup.add(a);this._polygon=a;return a},_getSymbolIgnoreFunc:function(c,b){var a=b.getAxesByScale('ordinal')[0];if(a&&a.isLabelIgnored){return bind(a.isLabelIgnored,a)}},_updateAnimation:function(k,q,c,s,e){var b=this._polyline;var j=this._polygon;var o=k.hostModel;var a=jd(this._data,k,this._stackedOnPoints,q,this._coordSys,c);var i=a.current;var m=a.stackedOnCurrent;var l=a.next;var n=a.stackedOnNext;if(e){i=turnPointsIntoStep(a.current,c,e);m=turnPointsIntoStep(a.stackedOnCurrent,c,e);l=turnPointsIntoStep(a.next,c,e);n=turnPointsIntoStep(a.stackedOnNext,c,e)}b.shape.__points=a.current;b.shape.points=i;updateProps(b,{shape:{points:l}},o);if(j){j.setShape({points:i,stackedOnPoints:m});updateProps(j,{shape:{points:l,stackedOnPoints:n}},o)}var g=[];var h=a.status;for(var f=0;f<h.length;f++){var r=h[f].cmd;if(r==='='){var p=k.getItemGraphicEl(h[f].idx1);if(p){g.push({el:p,ptIdx:f})}}}if(b.animators&&b.animators.length){b.animators[0].during(function(){for(var a=0;a<g.length;a++){var f=g[a].el;f.attr('position',b.shape.__points[g[a].ptIdx])}})}},remove:function(c){var b=this.group;var a=this._data;this._lineGroup.removeAll();this._symbolDraw.remove(!0);a&&a.eachItemGraphicEl(function(e,f){if(e.__temp){b.remove(e);a.setItemGraphicEl(f,null)}});this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var aK=function(e,b,c,a,f){a.eachRawSeriesByType(e,function(h){var g=h.getData();var j=h.get('symbol')||b;var i=h.get('symbolSize');g.setVisual({legendSymbol:c||j,symbol:j,symbolSize:i});if(!a.isSeriesFiltered(h)){if(typeof i==='function'){g.each(function(j){var k=h.getRawValue(j);var l=h.getDataParams(j);g.setItemVisual(j,'symbolSize',i(k,l))})}g.each(function(i){var l=g.getItemModel(i);var k=l.getShallow('symbol',!0);var j=l.getShallow('symbolSize',!0);if(k!=null){g.setItemVisual(i,'symbol',k)}if(j!=null){g.setItemVisual(i,'symbolSize',j)}})}})};var d1=function(a,b){b.eachSeriesByType(a,function(g){var f=g.getData();var c=g.coordinateSystem;if(!c){return}var e=[];var i=c.dimensions;for(var h=0;h<i.length;h++){e.push(g.coordDimToDataDim(c.dimensions[h])[0])}if(e.length===1){f.each(e[0],function(e,h){f.setItemLayout(h,isNaN(e)?[NaN,NaN]:c.dataToPoint(e))})}else {if(e.length===2){f.each(e,function(e,h,i){f.setItemLayout(i,isNaN(e)||isNaN(h)?[NaN,NaN]:c.dataToPoint([e,h]))},!0)}}})};var mh={average:function(c){var e=0;var b=0;for(var a=0;a<c.length;a++){if(!isNaN(c[a])){e+=c[a];b++}}return b===0?NaN:e/b},sum:function(b){var c=0;for(var a=0;a<b.length;a++){c+=b[a]||0}return c},max:function(b){var c=-Infinity;for(var a=0;a<b.length;a++){b[a]>c&&(c=b[a])}return c},min:function(b){var c=Infinity;for(var a=0;a<b.length;a++){b[a]<c&&(c=b[a])}return c},nearest:function(a){return a[0]}};var kL=function(a,b){return Math.round(a.length/2)};var lB=function(a,b,c){b.eachSeriesByType(a,function(f){var h=f.getData();var e=f.get('sampling');var i=f.coordinateSystem;if(i.type==='cartesian2d'&&e){var j=i.getBaseAxis();var m=i.getOtherAxis(j);var k=j.getExtent();var n=k[1]-k[0];var l=Math.round(h.count()/n);if(l>1){var g;if(typeof e==='string'){g=mh[e]}else {if(typeof e==='function'){g=e}}if(g){h=h.downSample(m.dim,1/l,g,kL);f.setData(h)}}}},this)};function dimAxisMapper(a){return this._axes[a]}var cu=function(a){this._axes={};this._dimList=[];this.name=a||''};cu.prototype={constructor:cu,type:'cartesian',getAxis:function(a){return this._axes[a]},getAxes:function(){return map(this._dimList,dimAxisMapper,this)},getAxesByScale:function(a){a=a.toLowerCase();return filter(this.getAxes(),function(b){return b.scale.type===a})},addAxis:function(a){var b=a.dim;this._axes[b]=a;this._dimList.push(b)},dataToCoord:function(a){return this._dataCoordConvert(a,'dataToCoord')},coordToData:function(a){return this._dataCoordConvert(a,'coordToData')},_dataCoordConvert:function(f,g){var c=this._dimList;var e=f instanceof Array?[]:{};for(var b=0;b<c.length;b++){var a=c[b];var h=this._axes[a];e[a]=h[g](f[a])}return e}};function Cartesian2D(a){cu.call(this,a)}Cartesian2D.prototype={constructor:Cartesian2D,type:'cartesian2d',dimensions:['x','y'],getBaseAxis:function(){return this.getAxesByScale('ordinal')[0]||this.getAxesByScale('time')[0]||this.getAxis('x')},containPoint:function(c){var a=this.getAxis('x');var b=this.getAxis('y');return a.contain(a.toLocalCoord(c[0]))&&b.contain(b.toLocalCoord(c[1]))},containData:function(a){return this.getAxis('x').containData(a[0])&&this.getAxis('y').containData(a[1])},dataToPoint:function(e,a){var b=this.getAxis('x');var c=this.getAxis('y');return [b.toGlobalCoord(b.dataToCoord(e[0],a)),c.toGlobalCoord(c.dataToCoord(e[1],a))]},pointToData:function(b,a){var c=this.getAxis('x');var e=this.getAxis('y');return [c.coordToData(c.toLocalCoord(b[0]),a),e.coordToData(e.toLocalCoord(b[1]),a)]},getOtherAxis:function(a){return this.getAxis(a.dim==='x'?'y':'x')}};inherits(Cartesian2D,cu);var cS=function(f,e,a,b,c){q.call(this,f,e,a);this.type=b||'value';this.position=c||'bottom'};cS.prototype={constructor:cS,index:0,onZero:!1,model:null,isHorizontal:function(){var a=this.position;return a==='top'||a==='bottom'},getGlobalExtent:function(b){var a=this.getExtent();a[0]=this.toGlobalCoord(a[0]);a[1]=this.toGlobalCoord(a[1]);b&&a[0]>a[1]&&a.reverse();return a},getOtherAxis:function(){this.grid.getOtherAxis()},isLabelIgnored:function(b){if(this.type==='category'){var a=this.getLabelInterval();return typeof a==='function'&&!a(b,this.scale.getLabel(b))||b%(a+1)}},pointToData:function(b,a){return this.coordToData(this.toLocalCoord(b[this.dim==='x'?0:1]),a)},toLocalCoord:null,toGlobalCoord:null};inherits(cS,q);var gs={show:!0,zlevel:0,z:0,inverse:!1,name:'',nameLocation:'end',nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:'...',placeholder:'.'},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:'#333',width:1,type:'solid'},symbol:['none','none'],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:['#ccc'],width:1,type:'solid'}},splitArea:{show:!1,areaStyle:{color:['rgba(250,250,250,0.3)','rgba(200,200,200,0.3)']}}};var ak={};ak.categoryAxis=merge({boundaryGap:!0,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:'auto'},axisLabel:{interval:'auto'}},gs);ak.valueAxis=merge({boundaryGap:[0,0],splitNumber:5},gs);ak.timeAxis=defaults({scale:!0,min:'dataMin',max:'dataMax'},ak.valueAxis);ak.logAxis=defaults({scale:!0,logBase:10},ak.valueAxis);var lr=['value','category','time','log'];var a0=function(a,c,b,e){each$1(lr,function(f){c.extend({type:a+'Axis.'+f,mergeDefaultAndTheme:function(g,k){var h=this.layoutMode;var i=h?getLayoutParams(g):{};var j=k.getTheme();merge(g,j.get(f+'Axis'));merge(g,this.getDefaultOption());g.type=b(a,g);if(h){mergeLayoutParam(g,i,h)}},defaultOption:mergeAll([{},ak[f+'Axis'],e],!0)})});g.registerSubTypeDefaulter(a+'Axis',curry(b,a))};var bc=g.extend({type:'cartesian2dAxis',axis:null,init:function(){bc.superApply(this,'init',arguments);this.resetRange()},mergeOption:function(){bc.superApply(this,'mergeOption',arguments);this.resetRange()},restoreData:function(){bc.superApply(this,'restoreData',arguments);this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:'grid',index:this.option.gridIndex,id:this.option.gridId})[0]}});function getAxisType(b,a){return a.type||(a.data?'category':'value')}merge(bc.prototype,aD);var gN={offset:0};a0('x',bc,getAxisType,gN);a0('y',bc,getAxisType,gN);g.extend({type:'grid',dependencies:['xAxis','yAxis'],layoutMode:'box',coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:'10%',top:60,right:'10%',bottom:60,containLabel:!1,backgroundColor:'rgba(0,0,0,0)',borderWidth:1,borderColor:'#ccc'}});var Z=each$1;var jc=ifAxisCrossZero;var fN=niceScaleExtent;function isAxisUsedInTheGrid(a,b,c){return a.getCoordSysModel()===b}function rotateTextRect(i,j){var a=j*Math.PI/180;var b=i.plain();var e=b.width;var c=b.height;var h=e*Math.cos(a)+c*Math.sin(a);var f=e*Math.sin(a)+c*Math.cos(a);var g=new BoundingRect(b.x,b.y,h,f);return g}function getLabelUnionRect(i){var g=i.model;var h=g.getFormattedLabels();var e=g.getModel('axisLabel');var a;var j=1;var c=h.length;if(c>40){j=Math.ceil(c/40)}for(var b=0;b<c;b+=j){if(!i.isLabelIgnored(b)){var k=e.getTextRect(h[b]);var f=rotateTextRect(k,e.get('rotate')||0);a?a.union(f):a=f}}return a}function Grid(a,b,c){this._coordsMap={};this._coordsList=[];this._axesMap={};this._axesList=[];this._initCartesian(a,b,c);this.model=a}var v=Grid.prototype;v.type='grid';v.axisPointerEnabled=!0;v.getRect=function(){return this._rect};v.update=function(b,c){var a=this._axesMap;this._updateScale(b,this.model);Z(a.x,function(a){fN(a.scale,a.model)});Z(a.y,function(a){fN(a.scale,a.model)});Z(a.x,function(e){fixAxisOnZero(a,'y',e)});Z(a.y,function(e){fixAxisOnZero(a,'x',e)});this.resize(this.model,c)};function fixAxisOnZero(h,g,c){var e=h[g];if(!c.onZero){return}var a=c.onZeroAxisIndex;if(a!=null){var b=e[a];if(b&&canNotOnZeroToAxis(b)){c.onZero=!1}return}for(var f in e){if(e.hasOwnProperty(f)){var b=e[f];if(b&&!canNotOnZeroToAxis(b)){a=+f;break}}}if(a==null){c.onZero=!1}c.onZeroAxisIndex=a}function canNotOnZeroToAxis(a){return a.type==='category'||a.type==='time'||!jc(a)}v.resize=function(b,e,f){var a=getLayoutRect(b.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=a;var c=this._axesList;adjustAxes();if(!f&&b.get('containLabel')){Z(c,function(c){if(!c.model.get('axisLabel.inside')){var g=getLabelUnionRect(c);if(g){var i=c.isHorizontal()?'height':'width';var h=c.model.get('axisLabel.margin');a[i]-=g[i]+h;if(c.position==='top'){a.y+=g.height+h}else {if(c.position==='left'){a.x+=g.width+h}}}}});adjustAxes()}function adjustAxes(){Z(c,function(c){var g=c.isHorizontal();var h=g?[0,a.width]:[0,a.height];var i=c.inverse?1:0;c.setExtent(h[i],h[1-i]);updateAxisTransfrom(c,g?a.x:a.y)})}};v.getAxis=function(e,b){var a=this._axesMap[e];if(a!=null){if(b==null){for(var c in a){if(a.hasOwnProperty(c)){return a[c]}}}return a[b]}};v.getAxes=function(){return this._axesList.slice()};v.getCartesian=function(a,c){if(a!=null&&c!=null){var f='x'+a+'y'+c;return this._coordsMap[f]}if(isObject(a)){c=a.yAxisIndex;a=a.xAxisIndex}for(var b=0,e=this._coordsList;b<e.length;b++){if(e[b].getAxis('x').index===a||e[b].getAxis('y').index===c){return e[b]}}};v.getCartesians=function(){return this._coordsList.slice()};v.convertToPixel=function(c,e,b){var a=this._findConvertTarget(c,e);return a.cartesian?a.cartesian.dataToPoint(b):a.axis?a.axis.toGlobalCoord(a.axis.dataToCoord(b)):null};v.convertFromPixel=function(c,e,b){var a=this._findConvertTarget(c,e);return a.cartesian?a.cartesian.pointToData(b):a.axis?a.axis.coordToData(a.axis.toLocalCoord(b)):null};v._findConvertTarget=function(k,f){var a=f.seriesModel;var c=f.xAxisModel||a&&a.getReferringComponents('xAxis')[0];var e=f.yAxisModel||a&&a.getReferringComponents('yAxis')[0];var h=f.gridModel;var i=this._coordsList;var b;var g;if(a){b=a.coordinateSystem;indexOf(i,b)<0&&(b=null)}else {if(c&&e){b=this.getCartesian(c.componentIndex,e.componentIndex)}else {if(c){g=this.getAxis('x',c.componentIndex)}else {if(e){g=this.getAxis('y',e.componentIndex)}else {if(h){var j=h.coordinateSystem;if(j===this){b=this._coordsList[0]}}}}}}return {cartesian:b,axis:g}};v.containPoint=function(b){var a=this._coordsList[0];if(a){return a.containPoint(b)}};v._initCartesian=function(f,e,g){var b={left:!1,right:!1,top:!1,bottom:!1};var a={x:{},y:{}};var c={x:0,y:0};e.eachComponent('xAxis',createAxisCreator('x'),this);e.eachComponent('yAxis',createAxisCreator('y'),this);if(!c.x||!c.y){this._axesMap={};this._axesList=[];return}this._axesMap=a;Z(a.x,function(c,b){Z(a.y,function(j,i){var h='x'+b+'y'+i;var a=new Cartesian2D(h);a.grid=this;a.model=f;this._coordsMap[h]=a;this._coordsList.push(a);a.addAxis(c);a.addAxis(j)},this)},this);function createAxisCreator(h){return function(k,l){if(!isAxisUsedInTheGrid(k,f,e)){return}var i=k.get('position');if(h==='x'){if(i!=='top'&&i!=='bottom'){i='bottom';if(b[i]){i=i==='top'?'bottom':'top'}}}else {if(i!=='left'&&i!=='right'){i='left';if(b[i]){i=i==='left'?'right':'left'}}}b[i]=!0;var j=new cS(h,createScaleByModel(k),[0,0],k.get('type'),i);var m=j.type==='category';j.onBand=m&&k.get('boundaryGap');j.inverse=k.get('inverse');j.onZero=k.get('axisLine.onZero');j.onZeroAxisIndex=k.get('axisLine.onZeroAxisIndex');k.axis=j;j.model=k;j.grid=this;j.index=l;this._axesList.push(j);a[h][l]=j;c[h]++}}};v._updateScale=function(a,b){each$1(this._axesList,function(c){c.scale.setExtent(Infinity,-Infinity)});a.eachSeries(function(c){if(isCartesian2D(c)){var f=findAxesModels(c,a);var g=f[0];var h=f[1];if(!isAxisUsedInTheGrid(g,b,a)||!isAxisUsedInTheGrid(h,b,a)){return}var i=this.getCartesian(g.componentIndex,h.componentIndex);var e=c.getData();var j=i.getAxis('x');var k=i.getAxis('y');if(e.type==='list'){unionExtent(e,j,c);unionExtent(e,k,c)}}},this);function unionExtent(f,c,e){Z(e.coordDimToDataDim(c.dim),function(g){c.scale.unionExtentFromData(f,g)})}};v.getTooltipAxes=function(c){var b=[];var a=[];Z(this.getCartesians(),function(e){var f=c!=null&&c!=='auto'?e.getAxis(c):e.getBaseAxis();var g=e.getOtherAxis(f);indexOf(b,f)<0&&b.push(f);indexOf(a,g)<0&&a.push(g)});return {baseAxes:b,otherAxes:a}};function updateAxisTransfrom(a,b){var e=a.getExtent();var c=e[0]+e[1];a.toGlobalCoord=a.dim==='x'?function(c){return c+b}:function(e){return c-e+b};a.toLocalCoord=a.dim==='x'?function(c){return c-b}:function(e){return c-e+b}}var lX=['xAxis','yAxis'];function findAxesModels(b,c){return map(lX,function(e){var f=b.getReferringComponents(e)[0];if(a){if(!f){throw new Error(e+' "'+retrieve(b.get(e+'Index'),b.get(e+'Id'),0)+'" not found')}}return f})}function isCartesian2D(a){return a.get('coordinateSystem')==='cartesian2d'}Grid.create=function(b,e){var c=[];b.eachComponent('grid',function(f,g){var a=new Grid(f,b,e);a.name='grid_'+g;a.resize(f,e,!0);f.coordinateSystem=a;c.push(a)});b.eachSeries(function(f){if(!isCartesian2D(f)){return}var g=findAxesModels(f,b);var c=g[0];var h=g[1];var i=c.getCoordSysModel();if(a){if(!i){throw new Error('Grid "'+retrieve(c.get('gridIndex'),c.get('gridId'),0)+'" not found')}if(c.getCoordSysModel()!==h.getCoordSysModel()){throw new Error('xAxis and yAxis must use the same grid')}}var j=i.coordinateSystem;f.coordinateSystem=j.getCartesian(c.componentIndex,h.componentIndex)});return c};Grid.dimensions=Grid.prototype.dimensions=Cartesian2D.prototype.dimensions;CoordinateSystemManager.register('cartesian2d',Grid);var az=Math.PI;function makeAxisEventDataBase(a){var b={componentType:a.mainType};b[a.mainType+'Index']=a.componentIndex;return b}var u=function(e,a){this.opt=a;this.axisModel=e;defaults(a,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0});this.group=new b();var c=new b({position:a.position.slice(),rotation:a.rotation});c.updateTransform();this._transform=c.transform;this._dumbGroup=c};u.prototype={constructor:u,hasBuilder:function(a){return !!hk[a]},add:function(a){hk[a].call(this)},getGroup:function(){return this.group}};var hk={axisLine:function(){var h=this.opt;var f=this.axisModel;if(!f.get('axisLine.show')){return}var l=this.axisModel.axis.getExtent();var g=this._transform;var c=[l[0],0];var e=[l[1],0];if(g){applyTransform(c,c,g);applyTransform(e,e,g)}var k=extend({lineCap:'round'},f.getModel('axisLine.lineStyle').getLineStyle());this.group.add(new L(subPixelOptimizeLine({anid:'line',shape:{x1:c[0],y1:c[1],x2:e[0],y2:e[1]},style:k,strokeContainThreshold:h.strokeContainThreshold||5,silent:!0,z2:1})));var a=f.get('axisLine.symbol');var b=f.get('axisLine.symbolSize');if(a!=null){if(typeof a==='string'){a=[a,a]}if(typeof b==='string'||typeof b==='number'){b=[b,b]}var j=b[0];var i=b[1];each$1([[h.rotation+Math.PI/2,c],[h.rotation-Math.PI/2,e]],function(e,b){if(a[b]!=='none'&&a[b]!=null){var c=createSymbol(a[b],-j/2,-i/2,j,i,k.stroke,!0);c.attr({rotation:e[0],position:e[1],silent:!0});this.group.add(c)}},this)}},axisTickLabel:function(){var a=this.axisModel;var b=this.opt;var e=buildAxisTick(this,a,b);var c=buildAxisLabel(this,a,b);fixMinMaxLabelShow(a,c,e)},axisName:function(){var f=this.opt;var a=this.axisModel;var c=retrieve(f.axisName,a.get('name'));if(!c){return}var k=a.get('nameLocation');var q=f.nameDirection;var l=a.getModel('nameTextStyle');var o=a.get('nameGap')||0;var h=this.axisModel.axis.getExtent();var s=h[0]>h[1]?-1:1;var x=[k==='start'?h[0]-s*o:k==='end'?h[1]+s*o:(h[0]+h[1])/2,isNameLocationCenter(k)?f.labelOffset+q*o:0];var j;var i=a.get('nameRotate');if(i!=null){i=i*az/180}var g;if(isNameLocationCenter(k)){j=f1(f.rotation,i!=null?i:f.rotation,q)}else {j=endTextLayout(f,k,i||0,h);g=f.axisNameAvailableWidth;if(g!=null){g=Math.abs(g/Math.sin(j.rotation));!isFinite(g)&&(g=null)}}var w=l.getFont();var m=a.get('nameTruncate',!0)||{};var t=m.ellipsis;var v=retrieve(f.nameTruncateMaxWidth,m.maxWidth,g);var r=t!=null&&v!=null?gl(c,v,w,t,{minChar:2,placeholder:m.placeholder}):c;var n=a.get('tooltip',!0);var u=a.mainType;var p={componentType:u,name:c,$vars:['name']};p[u+'Index']=a.componentIndex;var b=new e({anid:'name',__fullText:c,__truncatedText:r,position:x,rotation:j.rotation,silent:isSilent(a),z2:1,tooltip:n&&n.show?extend({content:c,formatter:function(){return c},formatterParams:p},n):null});setTextStyle(b.style,l,{text:r,textFont:w,textFill:l.getTextColor()||a.get('axisLine.lineStyle.color'),textAlign:j.textAlign,textVerticalAlign:j.textVerticalAlign});if(a.get('triggerEvent')){b.eventData=makeAxisEventDataBase(a);b.eventData.targetType='axisName';b.eventData.name=c}this._dumbGroup.add(b);b.updateTransform();this.group.add(b);b.decomposeTransform()}};var f1=u.innerTextLayout=function(f,g,e){var a=remRadian(g-f);var b;var c;if(isRadianAroundZero(a)){c=e>0?'top':'bottom';b='center'}else {if(isRadianAroundZero(a-az)){c=e>0?'bottom':'top';b='center'}else {c='middle';if(a>0&&a<az){b=e>0?'right':'left'}else {b=e>0?'left':'right'}}}return {rotation:a,textAlign:b,textVerticalAlign:c}};function endTextLayout(j,f,i,h){var a=remRadian(i-j.rotation);var b;var c;var g=h[0]>h[1];var e=f==='start'&&!g||f!=='start'&&g;if(isRadianAroundZero(a-az/2)){c=e?'bottom':'top';b='center'}else {if(isRadianAroundZero(a-az*1.5)){c=e?'top':'bottom';b='center'}else {c='middle';if(a<az*1.5&&a>az/2){b=e?'left':'right'}else {b=e?'right':'left'}}}return {rotation:a,textAlign:b,textVerticalAlign:c}}function isSilent(a){var b=a.get('tooltip');return a.get('silent')||!(a.get('triggerEvent')||b&&b.show)}function fixMinMaxLabelShow(h,a,b){var g=h.get('axisLabel.showMinLabel');var f=h.get('axisLabel.showMaxLabel');a=a||[];b=b||[];var c=a[0];var j=a[1];var e=a[a.length-1];var k=a[a.length-2];var i=b[0];var m=b[1];var l=b[b.length-1];var n=b[b.length-2];if(g===!1){ignoreEl(c);ignoreEl(i)}else {if(isTwoLabelOverlapped(c,j)){if(g){ignoreEl(j);ignoreEl(m)}else {ignoreEl(c);ignoreEl(i)}}}if(f===!1){ignoreEl(e);ignoreEl(l)}else {if(isTwoLabelOverlapped(k,e)){if(f){ignoreEl(k);ignoreEl(n)}else {ignoreEl(e);ignoreEl(l)}}}}function ignoreEl(a){a&&(a.ignore=!0)}function isTwoLabelOverlapped(b,f,g){var c=b&&b.getBoundingRect().clone();var e=f&&f.getBoundingRect().clone();if(!c||!e){return}var a=identity([]);rotate(a,a,-b.rotation);c.applyTransform(mul$1([],a,b.getLocalTransform()));e.applyTransform(mul$1([],a,f.getLocalTransform()));return c.intersect(e)}function isNameLocationCenter(a){return a==='middle'||a==='center'}var fT=u.ifIgnoreOnTick=function(i,a,b,h,g,f){if(a===0&&g||a===h-1&&f){return !1}var e;var c=i.scale;return c.type==='ordinal'&&(typeof b==='function'?(e=c.getTicks()[a],!b(e,c.getLabel(e))):a%(b+1))};var ki=u.getInterval=function(c,b){var a=c.get('interval');if(a==null||a=='auto'){a=b}return a};function buildAxisTick(i,a,o){var g=a.axis;if(!a.get('axisTick.show')||g.scale.isBlank()){return}var f=a.getModel('axisTick');var p=f.getModel('lineStyle');var t=f.get('length');var s=ki(f,o.labelInterval);var j=g.getTicksCoords(f.get('alignWithLabel'));var u=g.scale.getTicks();var r=a.get('axisLabel.showMinLabel');var q=a.get('axisLabel.showMaxLabel');var b=[];var c=[];var h=i._transform;var m=[];var l=j.length;for(var e=0;e<l;e++){if(fT(g,e,s,l,r,q)){continue}var k=j[e];b[0]=k;b[1]=0;c[0]=k;c[1]=o.tickDirection*t;if(h){applyTransform(b,b,h);applyTransform(c,c,h)}var n=new L(subPixelOptimizeLine({anid:'tick_'+u[e],shape:{x1:b[0],y1:b[1],x2:c[0],y2:c[1]},style:defaults(p.getLineStyle(),{stroke:a.get('axisLine.lineStyle.color')}),z2:2,silent:!0}));i.group.add(n);m.push(n)}return m}function buildAxisLabel(i,a,c){var b=a.axis;var s=retrieve(c.axisLabelShow,a.get('axisLabel.show'));if(!s||b.scale.isBlank()){return}var g=a.getModel('axisLabel');var p=g.get('margin');var k=b.scale.getTicks();var q=a.getFormattedLabels();var l=(retrieve(c.labelRotate,g.get('rotate'))||0)*az/180;var h=f1(c.rotation,l,c.labelDirection);var f=a.get('data');var j=[];var r=isSilent(a);var o=a.get('triggerEvent');var n=a.get('axisLabel.showMinLabel');var m=a.get('axisLabel.showMaxLabel');each$1(k,function(s,v){if(fT(b,v,c.labelInterval,k.length,n,m)){return}var t=g;if(f&&f[s]&&f[s].textStyle){t=new Model(f[s].textStyle,g,a.ecModel)}var u=t.getTextColor()||a.get('axisLine.lineStyle.color');var x=b.dataToCoord(s);var y=[x,c.labelOffset+c.labelDirection*p];var w=b.scale.getLabel(s);var l=new e({anid:'label_'+s,position:y,rotation:h.rotation,silent:r,z2:10});setTextStyle(l.style,t,{text:q[v],textAlign:t.getShallow('align',!0)||h.textAlign,textVerticalAlign:t.getShallow('verticalAlign',!0)||t.getShallow('baseline',!0)||h.textVerticalAlign,textFill:typeof u==='function'?u(b.type==='category'?w:b.type==='value'?s+'':s,v):u});if(o){l.eventData=makeAxisEventDataBase(a);l.eventData.targetType='axisLabel';l.eventData.value=w}i._dumbGroup.add(l);l.updateTransform();j.push(l);i.group.add(l);l.decomposeTransform()});return j}var bl=each$1;var eQ=curry;function collect(b,c){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};collectAxesInfo(a,b,c);a.seriesInvolved&&collectSeriesInfo(a,b);return a}function collectAxesInfo(a,c,h){var e=c.getComponent('tooltip');var b=c.getComponent('axisPointer');var f=b.get('link',!0)||[];var g=[];bl(h.getCoordinateSystems(),function(i){if(!i.axisPointerEnabled){return}var l=makeKey(i.model);var o=a.coordSysAxesInfo[l]={};a.coordSysMap[l]=i;var p=i.model;var j=p.getModel('tooltip',e);bl(i.getAxes(),eQ(saveTooltipAxisInfo,!1,null));if(i.getTooltipAxes&&e&&j.get('show')){var n=j.get('trigger')==='axis';var k=j.get('axisPointer.type')==='cross';var m=i.getTooltipAxes(j.get('axisPointer.axis'));if(n||k){bl(m.baseAxes,eQ(saveTooltipAxisInfo,k?'cross':!0,n))}if(k){bl(m.otherAxes,eQ(saveTooltipAxisInfo,'cross',!1))}}function saveTooltipAxisInfo(p,l,k){var e=k.model.getModel('axisPointer',b);var s=e.get('show');if(!s||s==='auto'&&!p&&!isHandleTrigger(e)){return}if(l==null){l=e.get('triggerTooltip')}e=p?makeAxisPointerModel(k,j,b,c,p,l):e;var u=e.get('snap');var n=makeKey(k.model);var t=l||u||k.type==='category';var r=a.axesInfo[n]={key:n,axis:k,coordSys:i,axisPointerModel:e,triggerTooltip:l,involveSeries:t,snap:u,useHandle:isHandleTrigger(e),seriesModels:[]};o[n]=r;a.seriesInvolved|=t;var m=getLinkGroupIndex(f,k);if(m!=null){var q=g[m]||(g[m]={axesInfo:{}});q.axesInfo[n]=r;q.mapper=f[m].mapper;r.linkGroup=q}}})}function makeAxisPointerModel(g,i,h,k,j,e){var c=i.getModel('axisPointer');var a={};bl(['type','snap','lineStyle','shadowStyle','label','animation','animationDurationUpdate','animationEasingUpdate','z'],function(b){a[b]=clone(c.get(b))});a.snap=g.type!=='category'&&!!e;if(c.get('type')==='cross'){a.type='line'}var b=a.label||(a.label={});b.show==null&&(b.show=!1);if(j==='cross'){b.show=!0;if(!e){var f=a.lineStyle=c.get('crossStyle');f&&defaults(b,f.textStyle)}}return g.model.getModel('axisPointer',new Model(a,h,k))}function collectSeriesInfo(b,a){a.eachSeries(function(c){var f=c.coordinateSystem;var e=c.get('tooltip.trigger',!0);var g=c.get('tooltip.show',!0);if(!f||e==='none'||e===!1||e==='item'||g===!1||c.get('axisPointer.show',!0)===!1){return}bl(b.coordSysAxesInfo[makeKey(f.model)],function(e){var g=e.axis;if(f.getAxis(g.dim)===g){e.seriesModels.push(c);e.seriesDataCount==null&&(e.seriesDataCount=0);e.seriesDataCount+=c.getData().count()}})},this)}function getLinkGroupIndex(f,g){var c=g.model;var e=g.dim;for(var a=0;a<f.length;a++){var b=f[a]||{};if(checkPropInLink(b[e+'AxisId'],c.id)||checkPropInLink(b[e+'AxisIndex'],c.componentIndex)||checkPropInLink(b[e+'AxisName'],c.name)){return a}}}function checkPropInLink(a,b){return a==='all'||isArray(a)&&indexOf(a,b)>=0||a===b}function fixValue(i){var e=getAxisInfo(i);if(!e){return}var c=e.axisPointerModel;var h=e.axis.scale;var f=c.option;var j=c.get('status');var a=c.get('value');if(a!=null){a=h.parse(a)}var g=isHandleTrigger(c);if(j==null){f.status=g?'show':'hide'}var b=h.getExtent().slice();b[0]>b[1]&&b.reverse();if(a==null||a>b[1]){a=b[1]}if(a<b[0]){a=b[0]}f.value=a;if(g){f.status=e.axis.scale.isBlank()?'hide':'show'}}function getAxisInfo(b){var a=(b.ecModel.getComponent('axisPointer')||{}).coordSysAxesInfo;return a&&a.axesInfo[makeKey(b)]}function getAxisPointerModel(b){var a=getAxisInfo(b);return a&&a.axisPointerModel}function isHandleTrigger(a){return !!a.get('handle.show')}function makeKey(a){return a.type+'||'+a.id}var F=extendComponentView({type:'axis',_axisPointer:null,axisPointerClass:null,render:function(a,b,e,c){this.axisPointerClass&&fixValue(a);F.superApply(this,'render',arguments);updateAxisPointer(this,a,b,e,c,!0)},updateAxisPointer:function(a,b,e,c,f){updateAxisPointer(this,a,b,e,c,!1)},remove:function(c,b){var a=this._axisPointer;a&&a.remove(b);F.superApply(this,'remove',arguments)},dispose:function(b,a){disposeAxisPointer(this,a);F.superApply(this,'dispose',arguments)}});function updateAxisPointer(a,c,h,f,i,g){var e=F.getAxisPointerClass(a.axisPointerClass);if(!e){return}var b=getAxisPointerModel(c);b?(a._axisPointer||(a._axisPointer=new e())).render(c,b,f,g):disposeAxisPointer(a,f)}function disposeAxisPointer(b,c,e){var a=b._axisPointer;a&&a.dispose(c,e);b._axisPointer=null}var dt=[];F.registerAxisPointerClass=function(b,c){if(a){if(dt[b]){throw new Error('axisPointer '+b+' exists')}}dt[b]=c};F.getAxisPointerClass=function(a){return a&&dt[a]};function layout(r,g,m){m=m||{};var p=r.coordinateSystem;var c=g.axis;var a={};var k=c.position;var l=c.onZero?'onZero':k;var h=c.dim;var f=p.getRect();var e=[f.x,f.x+f.width,f.y,f.y+f.height];var i={left:0,right:1,top:0,bottom:1,onZero:2};var j=g.get('offset')||0;var b=h==='x'?[e[2]-j,e[3]+j]:[e[0]-j,e[1]+j];if(c.onZero){var o=p.getAxis(h==='x'?'y':'x',c.onZeroAxisIndex);var q=o.toGlobalCoord(o.dataToCoord(0));b[i['onZero']]=Math.max(Math.min(q,b[1]),b[0])}a.position=[h==='y'?b[i[l]]:e[0],h==='x'?b[i[l]]:e[3]];a.rotation=Math.PI/2*(h==='x'?0:1);var s={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=s[k];a.labelOffset=c.onZero?b[i[k]]-b[i['onZero']]:0;if(g.get('axisTick.inside')){a.tickDirection=-a.tickDirection}if(retrieve(m.labelInside,g.get('axisLabel.inside'))){a.labelDirection=-a.labelDirection}var n=g.get('axisLabel.rotate');a.labelRotate=l==='top'?-n:n;a.labelInterval=c.getLabelInterval();a.z2=1;return a}var ge=u.ifIgnoreOnTick;var gO=u.getInterval;var jn=['axisLine','axisTickLabel','axisName'];var jx=['splitArea','splitLine'];var dj=F.extend({type:'cartesianAxis',axisPointerClass:'CartesianAxisPointer',render:function(a,h,j,i){this.group.removeAll();var g=this._axisGroup;this._axisGroup=new b();this.group.add(this._axisGroup);if(!a.get('show')){return}var e=a.getCoordSysModel();var f=layout(e,a);var c=new u(a,f);each$1(jn,c.add,c);this._axisGroup.add(c.getGroup());each$1(jx,function(b){if(a.get(b+'.show')){this['_'+b](a,e,f.labelInterval)}},this);groupTransition(g,this._axisGroup,a);dj.superCall(this,'render',a,h,j,i)},_splitLine:function(h,s,m){var c=h.axis;if(c.scale.isBlank()){return}var l=h.getModel('splitLine');var k=l.getModel('lineStyle');var a=k.get('color');var o=gO(l,m);a=isArray(a)?a:[a];var b=s.coordinateSystem.getRect();var n=c.isHorizontal();var t=0;var j=c.getTicksCoords();var v=c.scale.getTicks();var q=h.get('axisLabel.showMinLabel');var p=h.get('axisLabel.showMaxLabel');var e=[];var f=[];var u=k.getLineStyle();for(var g=0;g<j.length;g++){if(ge(c,g,o,j.length,q,p)){continue}var i=c.toGlobalCoord(j[g]);if(n){e[0]=i;e[1]=b.y;f[0]=i;f[1]=b.y+b.height}else {e[0]=b.x;e[1]=i;f[0]=b.x+b.width;f[1]=i}var r=t++%a.length;this._axisGroup.add(new L(subPixelOptimizeLine({anid:'line_'+v[g],shape:{x1:e[0],y1:e[1],x2:f[0],y2:f[1]},style:defaults({stroke:a[r]},u),silent:!0})))}},_splitArea:function(h,x,r){var a=h.axis;if(a.scale.isBlank()){return}var n=h.getModel('splitArea');var m=n.getModel('areaStyle');var b=m.get('color');var i=x.coordinateSystem.getRect();var c=a.getTicksCoords();var z=a.scale.getTicks();var p=a.toGlobalCoord(c[0]);var q=a.toGlobalCoord(c[0]);var y=0;var s=gO(n,r);var w=m.getAreaStyle();b=isArray(b)?b:[b];var u=h.get('axisLabel.showMinLabel');var t=h.get('axisLabel.showMaxLabel');for(var e=1;e<c.length;e++){if(ge(a,e,s,c.length,u,t)){continue}var o=a.toGlobalCoord(c[e]);var f;var g;var l;var j;if(a.isHorizontal()){f=p;g=i.y;l=o-f;j=i.height}else {f=i.x;g=q;l=i.width;j=o-g}var v=y++%b.length;this._axisGroup.add(new k({anid:'area_'+z[e],shape:{x:f,y:g,width:l,height:j},style:defaults({fill:b[v]},w),silent:!0}));p=f+l;q=g+j}}});dj.extend({type:'xAxis'});dj.extend({type:'yAxis'});extendComponentView({type:'grid',render:function(a,b){this.group.removeAll();if(a.get('show')){this.group.add(new k({shape:a.coordinateSystem.getRect(),style:defaults({fill:a.get('backgroundColor')},a.getItemStyle()),silent:!0,z2:-1}))}}});registerPreprocessor(function(a){if(a.xAxis&&a.yAxis&&!a.grid){a.grid={}}});registerVisual(curry(aK,'line','circle','line'));registerLayout(curry(d1,'line'));registerProcessor(be.PROCESSOR.STATISTIC,curry(lB,'line'));var dY='__ec_stack_';function getSeriesStackId(a){return a.get('stack')||dY+a.seriesIndex}function getAxisKey(a){return a.dim+a.index}function getLayoutOnAxis(c,k){var g=[];var e=c.axis;var f='axis0';if(e.type!=='category'){return}var j=e.getBandWidth();for(var a=0;a<c.count||0;a++){g.push(defaults({bandWidth:j,axisKey:f,stackId:dY+a},c))}var i=doCalBarWidthAndOffset(g,k);var h=[];for(var a=0;a<c.count;a++){var b=i[f][dY+a];b.offsetCenter=b.offset+b.width/2;h.push(b)}return h}function calBarWidthAndOffset(b,c){var a=map(b,function(a){var m=a.getData();var j=a.coordinateSystem;var e=j.getBaseAxis();var g=e.getExtent();var f=e.type==='category'?e.getBandWidth():Math.abs(g[1]-g[0])/m.count();var k=parsePercent$1(a.get('barWidth'),f);var i=parsePercent$1(a.get('barMaxWidth'),f);var l=a.get('barGap');var h=a.get('barCategoryGap');return {bandWidth:f,barWidth:k,barMaxWidth:i,barGap:l,barCategoryGap:h,axisKey:getAxisKey(e),stackId:getSeriesStackId(a)}});return doCalBarWidthAndOffset(a,c)}function doCalBarWidthAndOffset(c,e){var b={};each$1(c,function(f,o){var m=f.axisKey;var l=f.bandWidth;var a=b[m]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:'20%',gap:'30%',stacks:{}};var h=a.stacks;b[m]=a;var g=f.stackId;if(!h[g]){a.autoWidthCount++}h[g]=h[g]||{width:0,maxWidth:0};var i=f.barWidth;if(i&&!h[g].width){h[g].width=i;i=Math.min(a.remainedWidth,i);a.remainedWidth-=i}var k=f.barMaxWidth;k&&(h[g].maxWidth=k);var n=f.barGap;n!=null&&(a.gap=n);var j=f.barCategoryGap;j!=null&&(a.categoryGap=j)});var a={};each$1(b,function(f,j){a[j]={};var m=f.stacks;var p=f.bandWidth;var n=parsePercent$1(f.categoryGap,p);var h=parsePercent$1(f.gap,1);var i=f.remainedWidth;var g=f.autoWidthCount;var b=(i-n)/(g+(g-1)*h);b=Math.max(b,0);each$1(m,function(h,k){var a=h.maxWidth;if(a&&a<b){a=Math.min(a,i);if(h.width){a=Math.min(a,h.width)}i-=a;h.width=a;g--}});b=(i-n)/(g+(g-1)*h);b=Math.max(b,0);var l=0;var k;each$1(m,function(a,g){if(!a.width){a.width=b}k=a;l+=a.width*(1+h)});if(k){l-=k.width*h}var o=-l/2;each$1(m,function(g,b){a[j][b]=a[j][b]||{offset:o,width:g.width};o+=g.width*(1+h)})});return a}function barLayoutGrid(e,c,g){var f=calBarWidthAndOffset(filter(c.getSeriesByType(e),function(a){return !c.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==='cartesian2d'}));var a={};var b={};c.eachSeriesByType(e,function(i){if(i.coordinateSystem.type!=='cartesian2d'){return}var m=i.getData();var p=i.coordinateSystem;var q=p.getBaseAxis();var h=getSeriesStackId(i);var r=f[getAxisKey(q)][h];var n=r.offset;var o=r.width;var j=p.getOtherAxis(q);var l=i.get('barMinHeight')||0;var k=q.onZero?j.toGlobalCoord(j.dataToCoord(0)):j.getGlobalExtent()[0];var s=[i.coordDimToDataDim('x')[0],i.coordDimToDataDim('y')[0]];var t=m.mapArray(s,function(a,b){return p.dataToPoint([a,b])},!0);a[h]=a[h]||[];b[h]=b[h]||[];m.setLayout({offset:n,size:o});m.each(i.coordDimToDataDim(j.dim)[0],function(y,f){if(isNaN(y)){return}if(!a[h][f]){a[h][f]={p:k,n:k};b[h][f]={p:k,n:k}}var r=y>=0?'p':'n';var s=t[f];var x=a[h][f][r];var w=b[h][f][r];var u;var v;var q;var p;if(j.isHorizontal()){u=x;v=s[1]+n;q=s[0]-w;p=o;b[h][f][r]+=q;if(Math.abs(q)<l){q=(q<0?-1:1)*l}a[h][f][r]+=q}else {u=s[0]+n;v=x;q=o;p=s[1]-w;b[h][f][r]+=p;if(Math.abs(p)<l){p=(p<=0?-1:1)*l}a[h][f][r]+=p}m.setItemLayout(f,{x:u,y:v,width:q,height:p})},!0)},this)}barLayoutGrid.getLayoutOnAxis=getLayoutOnAxis;var gm=r.extend({type:'series.__base_bar__',getInitialData:function(b,a){return createListFromArray(b.data,this,a)},getMarkerPosition:function(g){var a=this.coordinateSystem;if(a){var c=a.dataToPoint(g,!0);var b=this.getData();var f=b.getLayout('offset');var h=b.getLayout('size');var e=a.getBaseAxis().isHorizontal()?0:1;c[e]+=f+h/2;return c}return [NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:'cartesian2d',legendHoverLink:!0,barMinHeight:0,barMinAngle:0,itemStyle:{}}});gm.extend({type:'series.bar',dependencies:['grid','polar'],brushSelector:'rect'});function setLabel(a,c,f,i,b,e,j){var h=f.getModel('label.normal');var g=f.getModel('label.emphasis');setLabelStyle(a,c,h,g,{labelFetcher:b,labelDataIndex:e,defaultText:b.getRawValue(e),isRectText:!0,autoColor:i});fixPosition(a);fixPosition(c)}function fixPosition(a,b){if(a.textPosition==='outside'){a.textPosition=b}}var jM=a1([['fill','color'],['stroke','borderColor'],['lineWidth','borderWidth'],['stroke','barBorderColor'],['lineWidth','barBorderWidth'],['opacity'],['shadowBlur'],['shadowOffsetX'],['shadowOffsetY'],['shadowColor']]);var kA={getBarItemStyle:function(c){var b=jM(this,c);if(this.getBorderLineDash){var a=this.getBorderLineDash();a&&(b.lineDash=a)}return b}};var iw=['itemStyle','normal','barBorderWidth'];extend(Model.prototype,kA);extendChartView({type:'bar',render:function(c,e,f){var b=c.get('coordinateSystem');if(b==='cartesian2d'||b==='polar'){this._render(c,e,f)}else {if(a){console.warn('Only cartesian2d and polar supported for bar.')}}return this.group},dispose:noop,_render:function(e,j,k){var h=this.group;var a=e.getData();var g=this._data;var b=e.coordinateSystem;var i=b.getBaseAxis();var c;if(b.type==='cartesian2d'){c=i.isHorizontal()}else {if(b.type==='polar'){c=i.dim==='angle'}}var f=e.isAnimationEnabled()?e:null;a.diff(g).add(function(g){if(!a.hasValue(g)){return}var i=a.getItemModel(g);var m=g5[b.type](a,g,i);var l=gd[b.type](a,g,i,m,c,f);a.setItemGraphicEl(g,l);h.add(l);updateStyle(l,a,g,i,m,e,c,b.type==='polar')}).update(function(i,o){var l=g.getItemGraphicEl(o);if(!a.hasValue(i)){h.remove(l);return}var m=a.getItemModel(i);var n=g5[b.type](a,i,m);if(l){updateProps(l,{shape:n},f,i)}else {l=gd[b.type](a,i,m,n,c,f,!0)}a.setItemGraphicEl(i,l);h.add(l);updateStyle(l,a,i,m,n,e,c,b.type==='polar')}).remove(function(c){var a=g.getItemGraphicEl(c);if(b.type==='cartesian2d'){a&&removeRect(c,f,a)}else {a&&removeSector(c,f,a)}}).execute();this._data=a},remove:function(a,e){var c=this.group;var b=this._data;if(a.get('animation')){if(b){b.eachItemGraphicEl(function(b){if(b.type==='sector'){removeSector(b.dataIndex,a,b)}else {removeRect(b.dataIndex,a,b)}})}}else {c.removeAll()}}});var gd={cartesian2d:function(m,h,l,f,g,c,j){var b=new k({shape:extend({},f)});if(c){var i=b.shape;var a=g?'height':'width';var e={};i[a]=0;e[a]=f[a];O[j?'updateProps':'initProps'](b,{shape:e},c,h)}return b},polar:function(l,i,k,b,g,e,j){var c=new as({shape:extend({},b)});if(e){var h=c.shape;var a=g?'r':'endAngle';var f={};h[a]=g?0:b.startAngle;f[a]=b[a];O[j?'updateProps':'initProps'](c,{shape:f},e,i)}return c}};function removeRect(c,b,a){a.style.text=null;updateProps(a,{shape:{width:0}},b,c,function(){a.parent&&a.parent.remove(a)})}function removeSector(c,b,a){a.style.text=null;updateProps(a,{shape:{r:a.shape.r0}},b,c,function(){a.parent&&a.parent.remove(a)})}var g5={cartesian2d:function(h,f,g){var a=h.getItemLayout(f);var b=getLineWidth(g,a);var c=a.width>0?1:-1;var e=a.height>0?1:-1;return {x:a.x+c*b/2,y:a.y+e*b/2,width:a.width-c*b,height:a.height-e*b}},polar:function(c,b,e){var a=c.getItemLayout(b);return {cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle}}};function updateStyle(a,k,c,b,i,n,m,h){var j=k.getItemVisual(c,'color');var o=k.getItemVisual(c,'opacity');var e=b.getModel('itemStyle.normal');var g=b.getModel('itemStyle.emphasis').getBarItemStyle();if(!h){a.setShape('r',e.get('barBorderRadius')||0)}a.useStyle(defaults({fill:j,opacity:o},e.getBarItemStyle()));var f=b.getShallow('cursor');f&&a.attr('cursor',f);var l=m?i.height>0?'bottom':'top':i.width>0?'left':'right';if(!h){setLabel(a.style,g,b,j,n,c,l)}setHoverStyle(a,g)}function getLineWidth(b,a){var c=b.get(iw)||0;return Math.min(c,Math.abs(a.width),Math.abs(a.height))}registerLayout(curry(barLayoutGrid,'bar'));registerVisual(function(a){a.eachSeriesByType('bar',function(b){var c=b.getData();c.setVisual('legendSymbol','roundRect')})});var dE={updateSelectedMap:function(a){this._targetList=a.slice();this._selectTargetMap=reduce(a||[],function(b,c){b.set(c.name,c);return b},createHashMap())},select:function(e,b){var a=b!=null?this._targetList[b]:this._selectTargetMap.get(e);var c=this.get('selectedMode');if(c==='single'){this._selectTargetMap.each(function(a){a.selected=!1})}a&&(a.selected=!0)},unSelect:function(c,b){var a=b!=null?this._targetList[b]:this._selectTargetMap.get(c);a&&(a.selected=!1)},toggleSelected:function(c,b){var a=b!=null?this._targetList[b]:this._selectTargetMap.get(c);if(a!=null){this[a.selected?'unSelect':'select'](c,b);return a.selected}},isSelected:function(c,b){var a=b!=null?this._targetList[b]:this._selectTargetMap.get(c);return a&&a.selected}};var cz=extendSeriesModel({type:'series.pie',init:function(a){cz.superApply(this,'init',arguments);this.legendDataProvider=function(){return this.getRawData()};this.updateSelectedMap(a.data);this._defaultLabelLine(a)},mergeOption:function(a){cz.superCall(this,'mergeOption',a);this.updateSelectedMap(this.option.data)},getInitialData:function(a,e){var c=completeDimensions(['value'],a.data);var b=new l(c,this);b.initData(a.data);return b},getDataParams:function(b){var e=this.getData();var a=cz.superCall(this,'getDataParams',b);var c=[];e.each('value',function(a){c.push(a)});a.percent=getPercentWithPrecision(c,b,e.hostModel.get('percentPrecision'));a.$vars.push('percent');return a},_defaultLabelLine:function(a){defaultEmphasis(a.labelLine,['show']);var c=a.labelLine.normal;var b=a.labelLine.emphasis;c.show=c.show&&a.label.normal.show;b.show=b.show&&a.label.emphasis.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:['50%','50%'],radius:[0,'75%'],clockwise:!0,startAngle:90,minAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,label:{normal:{rotate:!1,show:!0,position:'outer'},emphasis:{}},labelLine:{normal:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:'solid'}}},itemStyle:{normal:{borderWidth:1},emphasis:{}},animationType:'expansion',animationEasing:'cubicOut',data:[]}});mixin(cz,dE);function updateDataSelected(i,b,e,h){var a=b.getData();var f=this.dataIndex;var g=a.getName(f);var c=b.get('selectedOffset');h.dispatchAction({type:'pieToggleSelect',from:i,name:g,seriesId:b.id});a.each(function(f){toggleItemSelected(a.getItemGraphicEl(f),a.getItemLayout(f),b.isSelected(a.getName(f)),c,e)})}function toggleItemSelected(f,c,i,g,h){var a=(c.startAngle+c.endAngle)/2;var j=Math.cos(a);var k=Math.sin(a);var e=i?g:0;var b=[j*e,k*e];h?f.animate().when(200,{position:b}).start('bounceOut'):f.attr('position',b)}function PiePiece(g,h){b.call(this);var f=new as({z2:2});var a=new T();var c=new e();this.add(f);this.add(a);this.add(c);this.updateData(g,h,!0);function onEmphasis(){a.ignore=a.hoverIgnore;c.ignore=c.hoverIgnore}function onNormal(){a.ignore=a.normalIgnore;c.ignore=c.normalIgnore}this.on('emphasis',onEmphasis).on('normal',onNormal).on('mouseover',onEmphasis).on('mouseout',onNormal)}var gw=PiePiece.prototype;gw.updateData=function(f,c,l){var a=this.childAt(0);var b=f.hostModel;var g=f.getItemModel(c);var e=f.getItemLayout(c);var h=extend({},e);h.label=null;if(l){a.setShape(h);var k=b.getShallow('animationType');if(k==='scale'){a.shape.r=e.r0;initProps(a,{shape:{r:e.r}},b,c)}else {a.shape.endAngle=e.startAngle;updateProps(a,{shape:{endAngle:e.endAngle}},b,c)}}else {updateProps(a,{shape:h},b,c)}var i=g.getModel('itemStyle');var m=f.getItemVisual(c,'color');a.useStyle(defaults({lineJoin:'bevel',fill:m},i.getModel('normal').getItemStyle()));a.hoverStyle=i.getModel('emphasis').getItemStyle();var j=g.getShallow('cursor');j&&a.attr('cursor',j);toggleItemSelected(this,f.getItemLayout(c),g.get('selected'),b.get('selectedOffset'),b.get('animation'));function onEmphasis(){a.stopAnimation(!0);a.animateTo({shape:{r:e.r+b.get('hoverOffset')}},300,'elasticOut')}function onNormal(){a.stopAnimation(!0);a.animateTo({shape:{r:e.r}},300,'elasticOut')}a.off('mouseover').off('mouseout').off('emphasis').off('normal');if(g.get('hoverAnimation')&&b.isAnimationEnabled()){a.on('mouseover',onEmphasis).on('mouseout',onNormal).on('emphasis',onEmphasis).on('normal',onNormal)}this._updateLabel(f,c);setHoverStyle(this)};gw._updateLabel=function(c,b){var e=this.childAt(1);var f=this.childAt(2);var m=c.hostModel;var g=c.getItemModel(b);var o=c.getItemLayout(b);var a=o.label;var j=c.getItemVisual(b,'color');updateProps(e,{shape:{points:a.linePoints||[[a.x,a.y],[a.x,a.y],[a.x,a.y]]}},m,b);updateProps(f,{style:{x:a.x,y:a.y}},m,b);f.attr({rotation:a.rotation,origin:[a.x,a.y],z2:10});var n=g.getModel('label.normal');var l=g.getModel('label.emphasis');var i=g.getModel('labelLine.normal');var k=g.getModel('labelLine.emphasis');var j=c.getItemVisual(b,'color');setLabelStyle(f.style,f.hoverStyle={},n,l,{labelFetcher:c.hostModel,labelDataIndex:b,defaultText:c.getName(b),autoColor:j,useInsideStyle:!!a.inside},{textAlign:a.textAlign,textVerticalAlign:a.verticalAlign,opacity:c.getItemVisual(b,'opacity')});f.ignore=f.normalIgnore=!n.get('show');f.hoverIgnore=!l.get('show');e.ignore=e.normalIgnore=!i.get('show');e.hoverIgnore=!k.get('show');e.setStyle({stroke:j,opacity:c.getItemVisual(b,'opacity')});e.setStyle(i.getModel('lineStyle').getLineStyle());e.hoverStyle=k.getModel('lineStyle').getLineStyle();var h=i.get('smooth');if(h&&h===!0){h=0.4}e.setShape({smooth:h})};inherits(PiePiece,b);var m5=Chart.extend({type:'pie',init:function(){var a=new b();this._sectorGroup=a},render:function(c,o,g,m){if(m&&m.from===this.uid){return}var a=c.getData();var e=this._data;var b=this.group;var k=o.get('animation');var i=!e;var h=c.get('animationType');var j=curry(updateDataSelected,this.uid,c,k,g);var l=c.get('selectedMode');a.diff(e).add(function(f){var e=new PiePiece(a,f);if(i&&h!=='scale'){e.eachChild(function(a){a.stopAnimation(!0)})}l&&e.on('click',j);a.setItemGraphicEl(f,e);b.add(e)}).update(function(h,i){var f=e.getItemGraphicEl(i);f.updateData(a,h);f.off('click');l&&f.on('click',j);b.add(f);a.setItemGraphicEl(h,f)}).remove(function(f){var a=e.getItemGraphicEl(f);b.remove(a)}).execute();if(k&&i&&a.count()>0&&h!=='scale'){var f=a.getItemLayout(0);var p=Math.max(g.getWidth(),g.getHeight())/2;var n=bind(b.removeClipPath,b);b.setClipPath(this._createClipPath(f.cx,f.cy,p,f.startAngle,f.clockwise,n,c))}this._data=a},dispose:function(){},_createClipPath:function(g,h,i,a,b,f,e){var c=new as({shape:{cx:g,cy:h,r0:0,r:i,startAngle:a,endAngle:a,clockwise:b}});initProps(c,{shape:{endAngle:a+(b?1:-1)*Math.PI*2}},e,f);return c},containPoint:function(c,g){var h=g.getData();var a=h.getItemLayout(0);if(a){var e=c[0]-a.cx;var f=c[1]-a.cy;var b=Math.sqrt(e*e+f*f);return b<=a.r&&b>=a.r0}}});var fs=function(b,a){each$1(a,function(c){c.update='updateView';registerAction(c,function(e,g){var f={};g.eachComponent({mainType:'series',subType:b,query:e},function(h){if(h[c.method]){h[c.method](e.name,e.dataIndex)}var i=h.getData();i.each(function(k){var j=i.getName(k);f[j]=h.isSelected(j)||!1})});return {name:e.name,selected:f}})})};var ep=function(c,a){var b={};a.eachRawSeriesByType(c,function(f){var e=f.getRawData();var h={};if(!a.isSeriesFiltered(f)){var g=f.getData();g.each(function(b){var e=g.getRawIndex(b);h[e]=b});e.each(function(i){var j=h[i];var k=j!=null&&g.getItemVisual(j,'color',!0);if(!k){var m=e.getItemModel(i);var l=m.get('itemStyle.normal.color')||f.getColorFromPalette(e.getName(i),b);e.setItemVisual(i,'color',l);if(j!=null){g.setItemVisual(j,'color',l)}}else {e.setItemVisual(i,'color',k)}})}})};function adjustSingleSide(a,l,h,m,g,n,i){a.sort(function(b,c){return b.y-c.y});function shiftDown(f,e,c,j){for(var b=f;b<e;b++){a[b].y+=c;if(b>f&&b+1<e&&a[b+1].y>a[b].y+a[b].height){shiftUp(b,c/2);return}}shiftUp(e-1,c/2)}function shiftUp(e,c){for(var b=e;b>=0;b--){a[b].y-=c;if(b>0&&a[b].y>a[b-1].y+a[b-1].height){break}}}function changeX(c,j,s,t,p,r){var f=r>0?j?Number.MAX_VALUE:0:j?Number.MAX_VALUE:0;for(var b=0,u=c.length;b<u;b++){if(c[b].position==='center'){continue}var k=Math.abs(c[b].y-t);var o=c[b].len;var q=c[b].len2;var e=k<p+o?Math.sqrt((p+o+q)*(p+o+q)-k*k):Math.abs(c[b].x-s);if(j&&e>=f){e=f-10}if(!j&&e<=f){e=f+10}c[b].x=s+e*r;f=e}}var c=0;var f;var e=a.length;var k=[];var j=[];for(var b=0;b<e;b++){f=a[b].y-c;if(f<0){shiftDown(b,e,-f,g)}c=a[b].y+a[b].height}if(i-c<0){shiftUp(e-1,c-i)}for(var b=0;b<e;b++){if(a[b].y>=h){j.push(a[b])}else {k.push(a[b])}}changeX(k,!1,l,h,m,g);changeX(j,!0,l,h,m,g)}function avoidOverlap(b,e,j,k,h,f){var i=[];var g=[];for(var a=0;a<b.length;a++){if(b[a].x<e){i.push(b[a])}else {g.push(b[a])}}adjustSingleSide(g,e,j,k,1,h,f);adjustSingleSide(i,e,j,k,-1,h,f);for(var a=0;a<b.length;a++){var c=b[a].linePoints;if(c){var l=c[1][0]-c[2][0];if(b[a].x<e){c[2][0]=b[a].x+3}else {c[2][0]=b[a].x-3}c[1][1]=c[2][1]=b[a].y;c[1][0]=c[2][0]+l}}}var lh=function(b,f,j,i){var a=b.getData();var g=[];var c;var e;var h=!1;a.each(function(s){var k=a.getItemLayout(s);var w=a.getItemModel(s);var v=w.getModel('label.normal');var n=v.get('position')||w.get('label.emphasis.position');var z=w.getModel('labelLine.normal');var u=z.get('length');var A=z.get('length2');var p=(k.startAngle+k.endAngle)/2;var l=Math.cos(p);var t=Math.sin(p);var q;var r;var C;var o;c=k.cx;e=k.cy;var m=n==='inside'||n==='inner';if(n==='center'){q=k.cx;r=k.cy;o='center'}else {var x=(m?(k.r+k.r0)/2*l:k.r*l)+c;var y=(m?(k.r+k.r0)/2*t:k.r*t)+e;q=x+l*3;r=y+t*3;if(!m){var D=x+l*(u+f-k.r);var F=y+t*(u+f-k.r);var E=D+(l<0?-1:1)*A;var G=F;q=E+(l<0?-5:5);r=G;C=[[x,y],[D,F],[E,G]]}o=m?'center':l>0?'left':'right'}var I=v.getFont();var B=v.get('rotate')?l<0?-p+Math.PI:-p:0;var J=b.getFormattedLabel(s,'normal')||a.getName(s);var H=getBoundingRect(J,I,o,'top');h=!!B;k.label={x:q,y:r,position:n,height:H.height,len:u,len2:A,linePoints:C,textAlign:o,verticalAlign:'middle',rotation:B,inside:m};if(!m){g.push(k.label)}});if(!h&&b.get('avoidLabelOverlap')){avoidOverlap(g,c,e,f,j,i)}};var cZ=Math.PI*2;var hH=Math.PI/180;var l5=function(b,c,a,e){c.eachSeriesByType(b,function(g){var i=g.get('center');var l=g.get('radius');if(!isArray(l)){l=[0,l]}if(!isArray(i)){i=[i,i]}var v=a.getWidth();var t=a.getHeight();var z=Math.min(v,t);var B=parsePercent$1(i[0],v);var C=parsePercent$1(i[1],t);var w=parsePercent$1(l[0],z/2);var q=parsePercent$1(l[1],z/2);var f=g.getData();var n=-g.get('startAngle')*hH;var k=g.get('minAngle')*hH;var j=0;f.each('value',function(f){!isNaN(f)&&j++});var A=f.getSum('value');var o=Math.PI/(A||j)*2;var r=g.get('clockwise');var s=g.get('roseType');var D=g.get('stillShowZeroSum');var y=f.getDataExtent('value');y[0]=0;var p=cZ;var x=0;var h=n;var m=r?1:-1;f.each('value',function(l,t){var i;if(isNaN(l)){f.setItemLayout(t,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:r,cx:B,cy:C,r0:w,r:s?NaN:q});return}if(s!=='area'){i=A===0&&D?o:l*o}else {i=cZ/j}if(i<k){i=k;p-=k}else {x+=l}var n=h+m*i;f.setItemLayout(t,{angle:i,startAngle:h,endAngle:n,clockwise:r,cx:B,cy:C,r0:w,r:s?linearMap(l,y,[w,q]):q});h=n},!0);if(p<cZ&&j){if(p<=0.001){var u=cZ/j;f.each('value',function(j,i){if(!isNaN(j)){var h=f.getItemLayout(i);h.angle=u;h.startAngle=n+m*i*u;h.endAngle=n+m*(i+1)*u}})}else {o=p/x;h=n;f.each('value',function(l,n){if(!isNaN(l)){var i=f.getItemLayout(n);var j=i.angle===k?k:l*o;i.startAngle=h;i.endAngle=h+m*j;h+=m*j}})}}lh(g,q,v,t)})};var cq=function(c,b){var a=b.findComponents({mainType:'legend'});if(!a||!a.length){return}b.eachSeriesByType(c,function(f){var e=f.getData();e.filterSelf(function(i){var h=e.getName(i);for(var g=0;g<a.length;g++){if(!a[g].isSelected(h)){return !1}}return !0},this)},this)};fs('pie',[{type:'pieToggleSelect',event:'pieselectchanged',method:'toggleSelected'},{type:'pieSelect',event:'pieselected',method:'select'},{type:'pieUnSelect',event:'pieunselected',method:'unSelect'}]);registerVisual(curry(ep,'pie'));registerLayout(curry(l5,'pie'));registerProcessor(curry(cq,'pie'));r.extend({type:'series.scatter',dependencies:['grid','polar','geo','singleAxis','calendar'],getInitialData:function(b,a){return createListFromArray(b.data,this,a)},brushSelector:'point',defaultOption:{coordinateSystem:'cartesian2d',zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2000,itemStyle:{normal:{opacity:0.8}}}});var jF=extendShape({shape:{points:null,sizes:null},symbolProxy:null,buildPath:function(i,h){var g=h.points;var j=h.sizes;var f=this.symbolProxy;var c=f.shape;for(var e=0;e<g.length;e++){var b=g[e];if(isNaN(b[0])||isNaN(b[1])){continue}var a=j[e];if(a[0]<4){i.rect(b[0]-a[0]/2,b[1]-a[1]/2,a[0],a[1])}else {c.x=b[0]-a[0]/2;c.y=b[1]-a[1]/2;c.width=a[0];c.height=a[1];f.buildPath(i,c,!0)}}},findDataIndex:function(i,j){var e=this.shape;var c=e.points;var k=e.sizes;for(var a=c.length-1;a>=0;a--){var f=c[a];var b=k[a];var g=f[0]-b[0]/2;var h=f[1]-b[1]/2;if(i>=g&&j>=h&&i<=g+b[0]&&j<=h+b[1]){return a}}return -1}});function LargeSymbolDraw(){this.group=new b();this._symbolEl=new jF({})}var dw=LargeSymbolDraw.prototype;dw.updateData=function(b){this.group.removeAll();var a=this._symbolEl;var c=b.hostModel;a.setShape({points:b.mapArray(b.getItemLayout),sizes:b.mapArray(function(c){var a=b.getItemVisual(c,'symbolSize');if(!(a instanceof Array)){a=[a,a]}return a})});a.symbolProxy=createSymbol(b.getVisual('symbol'),0,0,0,0);a.setColor=a.symbolProxy.setColor;a.useStyle(c.getModel('itemStyle.normal').getItemStyle(['color']));var e=b.getVisual('color');if(e){a.setColor(e)}a.seriesIndex=c.seriesIndex;a.on('mousemove',function(e){a.dataIndex=null;var c=a.findDataIndex(e.offsetX,e.offsetY);if(c>=0){a.dataIndex=c}});this.group.add(a)};dw.updateLayout=function(b){var a=b.getData();this._symbolEl.setShape({points:a.mapArray(a.getItemLayout)})};dw.remove=function(){this.group.removeAll()};extendChartView({type:'scatter',init:function(){this._normalSymbolDraw=new SymbolDraw();this._largeSymbolDraw=new LargeSymbolDraw()},render:function(c,h,i){var g=c.getData();var b=this._largeSymbolDraw;var e=this._normalSymbolDraw;var f=this.group;var a=c.get('large')&&g.count()>c.get('largeThreshold')?b:e;this._symbolDraw=a;a.updateData(g);f.add(a.group);f.remove(a===b?e.group:b.group)},updateLayout:function(a){this._symbolDraw.updateLayout(a)},remove:function(b,a){this._symbolDraw&&this._symbolDraw.remove(a,!0)},dispose:function(){}});registerVisual(curry(aK,'scatter','circle',null));registerLayout(curry(d1,'scatter'));function IndicatorAxis(c,b,a){q.call(this,c,b,a);this.type='value';this.angle=0;this.name='';this.model}inherits(IndicatorAxis,q);function Radar(a,c,b){this._model=a;this.dimensions=[];this._indicatorAxes=map(a.getIndicatorModels(),function(f,h){var g='indicator_'+h;var e=new IndicatorAxis(g,new Q());e.name=f.get('name');e.model=f;f.axis=e;this.dimensions.push(g);return e},this);this.resize(a,b);this.cx;this.cy;this.r;this.startAngle}Radar.prototype.getIndicatorAxes=function(){return this._indicatorAxes};Radar.prototype.dataToPoint=function(c,a){var b=this._indicatorAxes[a];return this.coordToPoint(b.dataToCoord(c),a)};Radar.prototype.coordToPoint=function(b,c){var e=this._indicatorAxes[c];var a=e.angle;var f=this.cx+b*Math.cos(a);var g=this.cy-b*Math.sin(a);return [f,g]};Radar.prototype.pointToData=function(k){var a=k[0]-this.cx;var b=k[1]-this.cy;var f=Math.sqrt(a*a+b*b);a/=f;b/=f;var l=Math.atan2(-b,a);var i=Infinity;var e;var g=-1;for(var c=0;c<this._indicatorAxes.length;c++){var h=this._indicatorAxes[c];var j=Math.abs(l-h.angle);if(j<i){e=h;g=c;i=j}}return [g,+(e&&e.coodToData(f))]};Radar.prototype.resize=function(a,f){var e=a.get('center');var c=f.getWidth();var b=f.getHeight();var g=Math.min(c,b)/2;this.cx=parsePercent$1(e[0],c);this.cy=parsePercent$1(e[1],b);this.startAngle=a.get('startAngle')*Math.PI/180;this.r=parsePercent$1(a.get('radius'),g);each$1(this._indicatorAxes,function(c,e){c.setExtent(0,this.r);var b=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;b=Math.atan2(Math.sin(b),Math.cos(b));c.angle=b},this)};Radar.prototype.update=function(e,f){var b=this._indicatorAxes;var c=this._model;each$1(b,function(a){a.scale.setExtent(Infinity,-Infinity)});e.eachSeriesByType('radar',function(a,h){if(a.get('coordinateSystem')!=='radar'||e.getComponent('radar',a.get('radarIndex'))!==c){return}var g=a.getData();each$1(b,function(b){b.scale.unionExtentFromData(g,b.dim)})},this);var a=c.get('splitNumber');function increaseInterval(b){var c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10));var a=b/c;if(a===2){a=5}else {a*=2}return a*c}each$1(b,function(g,q){var h=getScaleExtent(g.scale,g.model);niceScaleExtent(g.scale,g.model);var n=g.model;var c=g.scale;var j=n.getMin();var i=n.getMax();var b=c.getInterval();if(j!=null&&i!=null){c.setExtent(+j,+i);c.setInterval((i-j)/a)}else {if(j!=null){var k;do{k=j+b*a;c.setExtent(+j,k);c.setInterval(b);b=increaseInterval(b)}while(k<h[1]&&isFinite(k)&&isFinite(h[1]))}else {if(i!=null){var l;do{l=i-b*a;c.setExtent(l,+i);c.setInterval(b);b=increaseInterval(b)}while(l>h[0]&&isFinite(l)&&isFinite(h[0]))}else {var p=c.getTicks().length-1;if(p>a){b=increaseInterval(b)}var o=Math.round((h[0]+h[1])/2/b)*b;var m=Math.round(a/2);c.setExtent(round(o-m*b),round(o+(a-m)*b));c.setInterval(b)}}}})};Radar.dimensions=[];Radar.create=function(b,c){var a=[];b.eachComponent('radar',function(e){var f=new Radar(e,b,c);a.push(f);e.coordinateSystem=f});b.eachSeriesByType('radar',function(e){if(e.get('coordinateSystem')==='radar'){e.coordinateSystem=a[e.get('radarIndex')||0]}});return a};CoordinateSystemManager.register('radar',Radar);var bu=ak.valueAxis;function defaultsShow(b,a){return defaults({show:a},b)}var m2=extendComponentModel({type:'radar',optionUpdated:function(){var f=this.get('boundaryGap');var g=this.get('splitNumber');var m=this.get('scale');var i=this.get('axisLine');var j=this.get('axisTick');var h=this.get('axisLabel');var b=this.get('name');var k=this.get('name.show');var a=this.get('name.formatter');var l=this.get('nameGap');var e=this.get('triggerEvent');var c=map(this.get('indicator')||[],function(c){if(c.max!=null&&c.max>0&&!c.min){c.min=0}else {if(c.min!=null&&c.min<0&&!c.max){c.max=0}}var o=b;if(c.color!=null){o=defaults({color:c.color},b)}c=merge(clone(c),{boundaryGap:f,splitNumber:g,scale:m,axisLine:i,axisTick:j,axisLabel:h,name:c.text,nameLocation:'end',nameGap:l,nameTextStyle:o,triggerEvent:e},!1);if(!k){c.name=''}if(typeof a==='string'){var p=c.name;c.name=a.replace('{value}',p!=null?p:'')}else {if(typeof a==='function'){c.name=a(c.name,c)}}var n=extend(new Model(c,null,this.ecModel),aD);n.mainType='radar';n.componentIndex=this.componentIndex;return n},this);this.getIndicatorModels=function(){return c}},defaultOption:{zlevel:0,z:0,center:['50%','50%'],radius:'75%',startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:'polygon',axisLine:merge({lineStyle:{color:'#bbb'}},bu.axisLine),axisLabel:defaultsShow(bu.axisLabel,!1),axisTick:defaultsShow(bu.axisTick,!1),splitLine:defaultsShow(bu.splitLine,!0),splitArea:defaultsShow(bu.splitArea,!0),indicator:[]}});var iU=['axisLine','axisTickLabel','axisName'];extendComponentView({type:'radar',render:function(a,c,e){var b=this.group;b.removeAll();this._buildAxes(a);this._buildSplitLineAndArea(a)},_buildAxes:function(e){var a=e.coordinateSystem;var b=a.getIndicatorAxes();var c=map(b,function(b){var c=new u(b.model,{position:[a.cx,a.cy],rotation:b.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return c});each$1(c,function(a){each$1(iU,a.add,a);this.group.add(a.getGroup())},this)},_buildSplitLineAndArea:function(m){var n=m.coordinateSystem;var l=n.getIndicatorAxes();if(!l.length){return}var B=m.get('shape');var t=m.getModel('splitLine');var s=m.getModel('splitArea');var r=t.getModel('lineStyle');var q=s.getModel('areaStyle');var v=t.get('show');var u=s.get('show');var e=r.get('color');var c=q.get('color');e=isArray(e)?e:[e];c=isArray(c)?c:[c];var j=[];var i=[];function getColorIndex(b,c,e){var a=e%c.length;b[a]=b[a]||[];return a}if(B==='circle'){var h=l[0].getTicksCoords();var w=n.cx;var x=n.cy;for(var b=0;b<h.length;b++){if(v){var f=getColorIndex(j,e,b);j[f].push(new aT({shape:{cx:w,cy:x,r:h[b]}}))}if(u&&b<h.length-1){var f=getColorIndex(i,c,b);i[f].push(new hW({shape:{cx:w,cy:x,r0:h[b],r:h[b+1]}}))}}}else {var k;var y=map(l,function(b,c){var a=b.getTicksCoords();k=k==null?a.length-1:Math.min(a.length-1,k);return map(a,function(a){return n.coordToPoint(a,c)})});var o=[];for(var b=0;b<=k;b++){var g=[];for(var p=0;p<l.length;p++){g.push(y[p][b])}if(g[0]){g.push(g[0].slice())}else {if(a){console.error("Can't draw value axis "+b)}}if(v){var f=getColorIndex(j,e,b);j[f].push(new T({shape:{points:g}}))}if(u&&o){var f=getColorIndex(i,c,b-1);i[f].push(new J({shape:{points:g.concat(o)}}))}o=g.slice().reverse()}}var A=r.getLineStyle();var z=q.getAreaStyle();each$1(i,function(a,b){this.group.add(ae(a,{style:defaults({stroke:'none',fill:c[b%c.length]},z),silent:!0}))},this);each$1(j,function(a,b){this.group.add(ae(a,{style:defaults({fill:'none',stroke:e[b%e.length]},A),silent:!0}))},this)}});var k2=r.extend({type:'series.radar',dependencies:['radar'],init:function(a){k2.superApply(this,'init',arguments);this.legendDataProvider=function(){return this.getRawData()}},getInitialData:function(e,f){var a=e.data||[];var c=completeDimensions([],a,{extraPrefix:'indicator_',extraFromZero:!0});var b=new l(c,this);b.initData(a);return b},formatTooltip:function(a){var f=this.getRawValue(a);var e=this.coordinateSystem;var c=e.getIndicatorAxes();var b=this.getData().getName(a);return encodeHTML(b===''?this.name:b)+'<br/>'+map(c,function(b,c){return encodeHTML(b.name+' : '+f[c])}).join('<br />')},defaultOption:{zlevel:0,z:2,coordinateSystem:'radar',legendHoverLink:!0,radarIndex:0,lineStyle:{normal:{width:2,type:'solid'}},label:{normal:{position:'top'}},symbol:'emptyCircle',symbolSize:4}});function normalizeSymbolSize(a){if(!isArray(a)){a=[+a,+a]}return a}extendChartView({type:'radar',render:function(c,h,i){var g=c.coordinateSystem;var f=this.group;var a=c.getData();var e=this._data;function createSymbol$$1(a,b){var g=a.getItemVisual(b,'symbol')||'circle';var j=a.getItemVisual(b,'color');if(g==='none'){return}var f=normalizeSymbolSize(a.getItemVisual(b,'symbolSize'));var e=createSymbol(g,-1,-1,2,2,j);e.attr({style:{strokeNoScale:!0},z2:100,scale:[f[0]/2,f[1]/2]});return e}function updateSymbols(g,e,f,l,j,k){f.removeAll();for(var a=0;a<e.length-1;a++){var b=createSymbol$$1(l,j);if(b){b.__dimIdx=a;if(g[a]){b.attr('position',g[a]);O[k?'initProps':'updateProps'](b,{position:e[a]},c,j)}else {b.attr('position',e[a])}f.add(b)}}}function getInitialPoints(a){return map(a,function(b){return [g.cx,g.cy]})}a.diff(e).add(function(f){var e=a.getItemLayout(f);if(!e){return}var k=new J();var j=new T();var m={shape:{points:e}};k.shape.points=getInitialPoints(e);j.shape.points=getInitialPoints(e);initProps(k,m,c,f);initProps(j,m,c,f);var g=new b();var l=new b();g.add(j);g.add(k);g.add(l);updateSymbols(j.shape.points,e,l,a,f,!0);a.setItemGraphicEl(f,g)}).update(function(g,m){var b=e.getItemGraphicEl(m);var j=b.childAt(0);var l=b.childAt(1);var k=b.childAt(2);var f={shape:{points:a.getItemLayout(g)}};if(!f.shape.points){return}updateSymbols(j.shape.points,f.shape.points,k,a,g,!1);updateProps(j,f,c);updateProps(l,f,c);a.setItemGraphicEl(g,b)}).remove(function(a){f.remove(e.getItemGraphicEl(a))}).execute();a.eachItemGraphicEl(function(e,j){var b=a.getItemModel(j);var p=e.childAt(0);var g=e.childAt(1);var s=e.childAt(2);var o=a.getItemVisual(j,'color');f.add(e);p.useStyle(defaults(b.getModel('lineStyle.normal').getLineStyle(),{fill:'none',stroke:o}));p.hoverStyle=b.getModel('lineStyle.emphasis').getLineStyle();var m=b.getModel('areaStyle.normal');var k=b.getModel('areaStyle.emphasis');var n=m.isEmpty()&&m.parentModel.isEmpty();var l=k.isEmpty()&&k.parentModel.isEmpty();l=l&&n;g.ignore=n;g.useStyle(defaults(m.getAreaStyle(),{fill:o,opacity:0.7}));g.hoverStyle=k.getAreaStyle();var u=b.getModel('itemStyle.normal').getItemStyle(['color']);var r=b.getModel('itemStyle.emphasis').getItemStyle();var t=b.getModel('label.normal');var q=b.getModel('label.emphasis');s.eachChild(function(b){b.setStyle(u);b.hoverStyle=clone(r);setLabelStyle(b.style,b.hoverStyle,t,q,{labelFetcher:a.hostModel,labelDataIndex:j,labelDimIndex:b.__dimIdx,defaultText:a.get(a.dimensions[b.__dimIdx],j),autoColor:o,isRectText:!0})});function onEmphasis(){g.attr('ignore',l)}function onNormal(){g.attr('ignore',n)}e.off('mouseover').off('mouseout').off('normal').off('emphasis');e.on('emphasis',onEmphasis).on('mouseover',onEmphasis).on('normal',onNormal).on('mouseout',onNormal);setHoverStyle(e)});this._data=a},remove:function(){this.group.removeAll();this._data=null},dispose:function(){}});var ln=function(a){a.eachSeriesByType('radar',function(g){var e=g.getData();var b=[];var f=g.coordinateSystem;if(!f){return}function pointsConverter(h,e){b[e]=b[e]||[];b[e][c]=f.dataToPoint(h,c)}for(var c=0;c<f.getIndicatorAxes().length;c++){var h=e.dimensions[c];e.each(h,pointsConverter)}e.each(function(c){b[c][0]&&b[c].push(b[c][0].slice());e.setItemLayout(c,b[c])})})};var jo=function(a){var b=a.polar;if(b){if(!isArray(b)){b=[b]}var c=[];each$1(b,function(b,e){if(b.indicator){if(b.type&&!b.shape){b.shape=b.type}a.radar=a.radar||[];if(!isArray(a.radar)){a.radar=[a.radar]}a.radar.push(b)}else {c.push(b)}});a.polar=c}each$1(a.series,function(b){if(b&&b.type==='radar'&&b.polarIndex){b.radarIndex=b.polarIndex}})};registerVisual(curry(ep,'radar'));registerVisual(curry(aK,'radar','circle',null));registerLayout(ln);registerProcessor(curry(cq,'radar'));registerPreprocessor(jo);var fH=applyTransform;function TransformDummy(){R.call(this)}mixin(TransformDummy,R);function View(a){this.name=a;this.zoomLimit;R.call(this);this._roamTransform=new TransformDummy();this._viewTransform=new TransformDummy();this._center;this._zoom}View.prototype={constructor:View,type:'view',dimensions:['x','y'],setBoundingRect:function(c,e,b,a){this._rect=new BoundingRect(c,e,b,a);return this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(c,e,b,a){this.transformTo(c,e,b,a);this._viewRect=new BoundingRect(c,e,b,a)},transformTo:function(f,g,c,b){var e=this.getBoundingRect();var a=this._viewTransform;a.transform=e.calculateTransform(new BoundingRect(f,g,c,b));a.decomposeTransform();this._updateTransform()},setCenter:function(a){if(!a){return}this._center=a;this._updateCenterAndZoom()},setZoom:function(a){a=a||1;var b=this.zoomLimit;if(b){if(b.max!=null){a=Math.min(b.max,a)}if(b.min!=null){a=Math.max(b.min,a)}}this._zoom=a;this._updateCenterAndZoom()},getDefaultCenter:function(){var a=this.getBoundingRect();var b=a.x+a.width/2;var c=a.y+a.height/2;return [b,c]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransform},_updateCenterAndZoom:function(){var e=this._viewTransform.getLocalTransform();var c=this._roamTransform;var b=this.getDefaultCenter();var a=this.getCenter();var f=this.getZoom();a=applyTransform([],a,e);b=applyTransform([],b,e);c.origin=a;c.position=[b[0]-a[0],b[1]-a[1]];c.scale=[f,f];this._updateTransform()},_updateTransform:function(){var b=this._roamTransform;var a=this._viewTransform;a.parent=b;b.updateTransform();a.updateTransform();a.transform&&copy$1(this.transform||(this.transform=[]),a.transform);if(this.transform){this.invTransform=this.invTransform||[];invert(this.invTransform,this.transform)}else {this.invTransform=null}this.decomposeTransform()},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var a=this.getBoundingRect().clone();a.applyTransform(this.transform);return a},dataToPoint:function(a){var b=this.transform;return b?fH([],a,b):[a[0],a[1]]},pointToData:function(a){var b=this.invTransform;return b?fH([],a,b):[a[0],a[1]]},convertToPixel:curry(doConvert$1,'dataToPoint'),convertFromPixel:curry(doConvert$1,'pointToData'),containPoint:function(a){return this.getViewRectAfterRoam().contain(a[0],a[1])}};mixin(View,R);function doConvert$1(c,g,e,f){var a=e.seriesModel;var b=a?a.coordinateSystem:null;return b===this?b[c](f):null}var eG=[126,25];var aQ=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,0.7],[52,0.7],[56,7.7],[59,0.7],[64,0.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var a_=0;a_<aQ.length;a_++){for(var bs=0;bs<aQ[a_].length;bs++){aQ[a_][bs][0]/=10.5;aQ[a_][bs][1]/=-10.5/0.75;aQ[a_][bs][0]+=eG[0];aQ[a_][bs][1]+=eG[1]}}var l$=function(a){if(a.map==='china'){a.regions.push(new Region('',map(aQ,function(b){return {type:'polygon',exterior:b}}),eG))}};var jH={'':[32,80],'':[0,-10],'':[10,5],'':[-10,10],'':[5,5]};var kD=function(a){each$1(a.regions,function(c){var b=jH[c.name];if(b){var e=c.center;e[0]+=b[0]/10.5;e[1]+=-b[1]/(10.5/0.75)}})};var ld={'Russia':[100,60],'United States':[-99,38],'United States of America':[-99,38]};var lb=function(a){each$1(a.regions,function(c){var b=ld[c.name];if(b){var e=c.center;e[0]=b[0];e[1]=b[1]}})};var mg=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];var jL=function(a){if(a.map==='china'){for(var b=0,c=a.regions.length;b<c;++b){if(a.regions[b].name===''){a.regions[b].geometries.push({type:'polygon',exterior:mg[0]})}}}};var le=[l$,kD,lb,jL];function Geo(f,e,b,a,c){View.call(this,f);this.map=e;this._nameCoordMap=createHashMap();this.loadGeoJson(b,a,c)}Geo.prototype={constructor:Geo,type:'geo',dimensions:['lng','lat'],containCoord:function(c){var b=this.regions;for(var a=0;a<b.length;a++){if(b[a].contain(c)){return !0}}return !1},loadGeoJson:function(i,g,f){try{this.regions=i?gD(i):[]}catch(m8){throw 'Invalid geoJson format\n'+m8.message}g=g||{};f=f||{};var c=this.regions;var h=createHashMap();for(var b=0;b<c.length;b++){var a=c[b].name;a=f.hasOwnProperty(a)?f[a]:a;c[b].name=a;h.set(a,c[b]);this.addGeoCoord(a,c[b].center);var e=g[a];if(e){c[b].transformTo(e.left,e.top,e.width,e.height)}}this._regionsMap=h;this._rect=null;each$1(le,function(a){a(this)},this)},transformTo:function(g,h,f,e){var a=this.getBoundingRect();a=a.clone();a.y=-a.y-a.height;var b=this._viewTransform;b.transform=a.calculateTransform(new BoundingRect(g,h,f,e));b.decomposeTransform();var c=b.scale;c[1]=-c[1];b.updateTransform();this._updateTransform()},getRegion:function(a){return this._regionsMap.get(a)},getRegionByCoord:function(c){var b=this.regions;for(var a=0;a<b.length;a++){if(b[a].contain(c)){return b[a]}}},addGeoCoord:function(b,a){this._nameCoordMap.set(b,a)},getGeoCoord:function(a){return this._nameCoordMap.get(a)},getBoundingRect:function(){if(this._rect){return this._rect}var a;var e=this.regions;for(var b=0;b<e.length;b++){var c=e[b].getBoundingRect();a=a||c.clone();a.union(c)}return this._rect=a||new BoundingRect(0,0,0,0)},dataToPoint:function(a){if(typeof a==='string'){a=this.getGeoCoord(a)}if(a){return View.prototype.dataToPoint.call(this,a)}},convertToPixel:curry(doConvert,'dataToPoint'),convertFromPixel:curry(doConvert,'pointToData')};mixin(Geo,View);function doConvert(f,h,e,g){var c=e.geoModel;var a=e.seriesModel;var b=c?c.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents('geo')[0]||{}).coordinateSystem:null;return b===this?b[f](g):null}function resizeGeo(f,p){var k=f.get('boundingCoords');if(k!=null){var g=k[0];var h=k[1];if(isNaN(g[0])||isNaN(g[1])||isNaN(h[0])||isNaN(h[1])){if(a){console.error('Invalid boundingCoords')}}else {this.setBoundingRect(g[0],g[1],h[0]-g[0],h[1]-g[1])}}var o=this.getBoundingRect();var j;var c=f.get('layoutCenter');var e=f.get('layoutSize');var m=p.getWidth();var l=p.getHeight();var q=f.get('aspectScale')||0.75;var i=o.width/o.height*q;var n=!1;if(c&&e){c=[parsePercent$1(c[0],m),parsePercent$1(c[1],l)];e=parsePercent$1(e,Math.min(m,l));if(!isNaN(c[0])&&!isNaN(c[1])&&!isNaN(e)){n=!0}else {if(a){console.warn('Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead.')}}}var b;if(n){var b={};if(i>1){b.width=e;b.height=e/i}else {b.height=e;b.width=e*i}b.y=c[1]-b.height/2;b.x=c[0]-b.width/2}else {j=f.getBoxLayoutParams();j.aspect=i;b=getLayoutRect(j,{width:m,height:l})}this.setViewRect(b.x,b.y,b.width,b.height);this.setCenter(f.get('center'));this.setZoom(f.get('zoom'))}function setGeoCoords(b,a){each$1(a.get('geoCoord'),function(c,e){b.addGeoCoord(e,c)})}if(a){var dp=function(a){console.error('Map '+a+' not exists. You can download map file on http://echarts.baidu.com/download-map.html')}}var ee={dimensions:Geo.prototype.dimensions,create:function(e,f){var c=[];e.eachComponent('geo',function(b,j){var i=b.get('map');var h=getMap(i);if(a){if(!h){dp(i)}}var g=new Geo(i+j,i,h&&h.geoJson,h&&h.specialAreas,b.get('nameMap'));g.zoomLimit=b.get('scaleLimit');c.push(g);setGeoCoords(g,b);b.coordinateSystem=g;g.model=b;g.resize=resizeGeo;g.resize(b,f)});e.eachSeries(function(a){var b=a.get('coordinateSystem');if(b==='geo'){var g=a.get('geoIndex')||0;a.coordinateSystem=c[g]}});var b={};e.eachSeriesByType('map',function(a){if(!a.getHostGeoModel()){var c=a.getMapType();b[c]=b[c]||[];b[c].push(a)}});each$1(b,function(g,i){var h=getMap(i);if(a){if(!h){dp(g[0].get('map'))}}var j=map(g,function(a){return a.get('nameMap')});var b=new Geo(i,i,h&&h.geoJson,h&&h.specialAreas,mergeAll(j));b.zoomLimit=retrieve.apply(null,map(g,function(a){return a.get('scaleLimit')}));c.push(b);b.resize=resizeGeo;b.resize(g[0],f);each$1(g,function(a){a.coordinateSystem=b;setGeoCoords(b,a)})});return c},getFilledRegions:function(g,k,f){var c=(g||[]).slice();f=f||{};var l=getMap(k);var j=l&&l.geoJson;if(!j){if(a){dp(k)}return g}var h=createHashMap();var i=j.features;for(var b=0;b<c.length;b++){h.set(c[b].name,c[b])}for(var b=0;b<i.length;b++){var e=i[b].properties.name;if(!h.get(e)){if(f.hasOwnProperty(e)){e=f[e]}c.push({name:e})}}return c}};registerCoordinateSystem('geo',ee);var el=r.extend({type:'series.map',dependencies:['geo'],layoutMode:'box',needsDrawMap:!1,seriesGroup:[],init:function(a){this._fillOption(a,this.getMapType());el.superApply(this,'init',arguments);this.updateSelectedMap(a.data)},getInitialData:function(a){var c=completeDimensions(['value'],a.data||[]);var b=new l(c,this);b.initData(a.data);return b},mergeOption:function(a){this._fillOption(a,this.getMapType());el.superApply(this,'mergeOption',arguments);this.updateSelectedMap(this.option.data)},getHostGeoModel:function(){var a=this.option.geoIndex;return a!=null?this.dependentModels.geo[a]:null},getMapType:function(){return (this.getHostGeoModel()||this).option.map},_fillOption:function(a,b){a.data=ee.getFilledRegions(a.data,b,a.nameMap)},getRawValue:function(a){return this.getData().get('value',a)},getRegionModel:function(b){var a=this.getData();return a.getItemModel(a.indexOfName(b))},formatTooltip:function(e){var i=this.getData();var g=addCommas(this.getRawValue(e));var f=i.getName(e);var b=this.seriesGroup;var c=[];for(var a=0;a<b.length;a++){var h=b[a].originalData.indexOfName(f);if(!isNaN(b[a].originalData.get('value',h))){c.push(encodeHTML(b[a].name))}}return c.join(', ')+'<br />'+encodeHTML(f+' : '+g)},getTooltipPosition:function(a){if(a!=null){var e=this.getData().getName(a);var c=this.coordinateSystem;var b=c.getRegion(e);return b&&c.dataToPoint(b.center)}},setZoom:function(a){this.option.zoom=a},setCenter:function(a){this.option.center=a},defaultOption:{zlevel:0,z:2,coordinateSystem:'geo',map:'',left:'center',top:'center',aspectScale:0.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{normal:{show:!1,color:'#000'},emphasis:{show:!0,color:'rgb(100,0,0)'}},itemStyle:{normal:{borderWidth:0.5,borderColor:'#444',areaColor:'#eee'},emphasis:{areaColor:'rgba(255,215,0,0.8)'}}}});mixin(el,dE);var hU='\x00_ec_interaction_mutex';function take(e,a,b){var c=getStore(e);c[a]=b}function release(f,a,c){var b=getStore(f);var e=b[a];if(e===c){b[a]=null}}function isTaken(b,a){return !!getStore(b)[a]}function getStore(a){return a[hU]||(a[hU]={})}registerAction({type:'takeGlobalCursor',event:'globalCursorTaken',update:'update'},function(){});function RoamController(a){this.pointerChecker;this._zr=a;this._opt={};var b=bind;var e=b(mousedown,this);var f=b(mousemove,this);var g=b(mouseup,this);var c=b(mousewheel,this);var h=b(pinch,this);s.call(this);this.setPointerChecker=function(b){this.pointerChecker=b};this.enable=function(b,i){this.disable();this._opt=defaults(clone(i)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,preventDefaultMouseMove:!0});if(b==null){b=!0}if(b===!0||(b==='move'||b==='pan')){a.on('mousedown',e);a.on('mousemove',f);a.on('mouseup',g)}if(b===!0||(b==='scale'||b==='zoom')){a.on('mousewheel',c);a.on('pinch',h)}};this.disable=function(){a.off('mousedown',e);a.off('mousemove',f);a.off('mouseup',g);a.off('mousewheel',c);a.off('pinch',h)};this.dispose=this.disable;this.isDragging=function(){return this._dragging};this.isPinching=function(){return this._pinching}}mixin(RoamController,s);function mousedown(a){if(notLeftMouse(a)||a.target&&a.target.draggable){return}var b=a.offsetX;var c=a.offsetY;if(this.pointerChecker&&this.pointerChecker(a,b,c)){this._x=b;this._y=c;this._dragging=!0}}function mousemove(a){if(notLeftMouse(a)||!checkKeyBinding(this,'moveOnMouseMove',a)||!this._dragging||a.gestureEvent==='pinch'||isTaken(this._zr,'globalPan')){return}var b=a.offsetX;var c=a.offsetY;var e=this._x;var f=this._y;var g=b-e;var h=c-f;this._x=b;this._y=c;this._opt.preventDefaultMouseMove&&aA(a.event);this.trigger('pan',g,h,e,f,b,c)}function mouseup(a){if(!notLeftMouse(a)){this._dragging=!1}}function mousewheel(a){if(!checkKeyBinding(this,'zoomOnMouseWheel',a)||a.wheelDelta===0){return}var b=a.wheelDelta>0?1.1:1/1.1;zoom.call(this,a,b,a.offsetX,a.offsetY)}function pinch(a){if(isTaken(this._zr,'globalPan')){return}var b=a.pinchScale>1?1.1:1/1.1;zoom.call(this,a,b,a.pinchX,a.pinchY)}function zoom(c,e,a,b){if(this.pointerChecker&&this.pointerChecker(c,a,b)){aA(c.event);this.trigger('zoom',e,a,b)}}function checkKeyBinding(b,c,e){var a=b._opt[c];return a&&(!isString(a)||e.event[a+'Key'])}function updateViewOnPan(c,e,f){var a=c.target;var b=a.position;b[0]+=e;b[1]+=f;a.dirty()}function updateViewOnZoom(a,i,l,m){var g=a.target;var f=a.zoomLimit;var e=g.position;var h=g.scale;var b=a.zoom=a.zoom||1;b*=i;if(f){var k=f.min||0;var j=f.max||Infinity;b=Math.max(Math.min(j,b),k)}var c=b/a.zoom;a.zoom=b;e[0]-=(l-e[0])*(c-1);e[1]-=(m-e[1])*(c-1);h[0]*=c;h[1]*=c;g.dirty()}var iL={'axisPointer':1,'tooltip':1,'brush':1};function onIrrelevantElement(f,e,b){var a=e.getComponentByElement(f.topTarget);var c=a&&a.coordinateSystem;return a&&a!==b&&!iL[a.mainType]&&(c&&c.model!==b)}function getFixedItemStyle(c,e){var b=c.getItemStyle();var a=c.get('areaColor');if(a!=null){b.fill=a}return b}function updateMapSelectHandler(c,a,b,f,e){b.off('click');b.off('mousedown');if(a.get('selectedMode')){b.on('mousedown',function(){c._mouseDownFlag=!0});b.on('click',function(i){if(!c._mouseDownFlag){return}c._mouseDownFlag=!1;var g=i.target;while(!g.__regions){g=g.parent}if(!g){return}var h={type:(a.mainType==='geo'?'geo':'map')+'ToggleSelect',batch:map(g.__regions,function(g){return {name:g.name,from:e.uid}})};h[a.mainType+'Id']=a.id;f.dispatchAction(h);updateMapSelected(a,b)})}}function updateMapSelected(a,b){b.eachChild(function(c){each$1(c.__regions,function(e){c.trigger(a.isSelected(e.name)?'emphasis':'normal')})})}function MapDraw(e,a){var c=new b();this._controller=new RoamController(e.getZr());this._controllerHost={target:a?c:null};this.group=c;this._updateGroup=a;this._mouseDownFlag}MapDraw.prototype={constructor:MapDraw,draw:function(a,k,m,r,s){var h=a.mainType==='geo';var c=a.getData&&a.getData();h&&k.eachComponent({mainType:'series',subType:'map'},function(b){if(!c&&b.getHostGeoModel()===a){c=b.getData()}});var i=a.coordinateSystem;var f=this.group;var g=i.scale;var j={position:i.position,scale:g};if(!f.childAt(0)||s){f.attr(j)}else {updateProps(f,j,a)}f.removeAll();var p=['itemStyle','normal'];var n=['itemStyle','emphasis'];var q=['label','normal'];var o=['label','emphasis'];var l=createHashMap();each$1(i.regions,function(i){var t=l.get(i.name)||l.set(i.name,new b());var j=new gy({shape:{paths:[]}});t.add(j);var u=a.getRegionModel(i.name)||a;var G=u.getModel(p);var D=u.getModel(n);var C=getFixedItemStyle(G,g);var E=getFixedItemStyle(D,g);var B=u.getModel(q);var x=u.getModel(o);var v;if(c){v=c.indexOfName(i.name);var z=c.getItemVisual(v,'color',!0);if(z){C.fill=z}}each$1(i.geometries,function(b){if(b.type!=='polygon'){return}j.shape.paths.push(new J({shape:{points:b.exterior}}));for(var c=0;c<(b.interiors?b.interiors.length:0);c++){j.shape.paths.push(new J({shape:{points:b.interiors[c]}}))}});j.setStyle(C);j.style.strokeNoScale=!0;j.culling=!0;var K=B.get('show');var F=x.get('show');var I=c&&isNaN(c.get('value',v));var A=c&&c.getItemLayout(v);if(h||I&&(K||F)||A&&A.showLabel){var L=!h?v:i.name;var y;if(!c||v>=0){y=a}var w=new e({position:i.center.slice(),scale:[1/g[0],1/g[1]],z2:10,silent:!0});setLabelStyle(w.style,w.hoverStyle={},B,x,{labelFetcher:y,labelDataIndex:L,defaultText:i.name,useInsideStyle:!1},{textAlign:'center',textVerticalAlign:'middle'});t.add(w)}if(c){c.setItemGraphicEl(v,t)}else {var u=a.getRegionModel(i.name);j.eventData={componentType:'geo',geoIndex:a.componentIndex,name:i.name,region:u&&u.option||{}}}var H=t.__regions||(t.__regions=[]);H.push(i);setHoverStyle(t,E,{hoverSilentOnTouch:!!a.get('selectedMode')});f.add(t)});this._updateController(a,k,m);updateMapSelectHandler(this,a,f,m,r);updateMapSelected(a,f)},remove:function(){this.group.removeAll();this._controller.dispose();this._controllerHost={}},_updateController:function(a,h,e){var g=a.coordinateSystem;var c=this._controller;var b=this._controllerHost;b.zoomLimit=a.get('scaleLimit');b.zoom=g.getZoom();c.enable(a.get('roam')||!1);var f=a.mainType;function makeActionBase(){var b={type:'geoRoam',componentType:f};b[f+'Id']=a.id;return b}c.off('pan').on('pan',function(c,f){this._mouseDownFlag=!1;updateViewOnPan(b,c,f);e.dispatchAction(extend(makeActionBase(),{dx:c,dy:f}))},this);c.off('zoom').on('zoom',function(j,c,f){this._mouseDownFlag=!1;updateViewOnZoom(b,j,c,f);e.dispatchAction(extend(makeActionBase(),{zoom:j,originX:c,originY:f}));if(this._updateGroup){var g=this.group;var i=g.scale;g.traverse(function(b){if(b.type==='text'){b.attr('scale',[1/i[0],1/i[1]])}})}},this);c.setPointerChecker(function(b,c,f){return g.getViewRectAfterRoam().contain(c,f)&&!onIrrelevantElement(b,e,a)})}};extendChartView({type:'map',render:function(b,e,g,a){if(a&&a.type==='mapToggleSelect'&&a.from===this.uid){return}var f=this.group;f.removeAll();if(b.getHostGeoModel()){return}if(!(a&&a.type==='geoRoam'&&a.componentType==='series'&&a.seriesId===b.id)){if(b.needsDrawMap){var c=this._mapDraw||new MapDraw(g,!0);f.add(c.group);c.draw(b,e,g,this,a);this._mapDraw=c}else {this._mapDraw&&this._mapDraw.remove();this._mapDraw=null}}else {var c=this._mapDraw;c&&f.add(c.group)}b.get('showLegendSymbol')&&e.getComponent('legend')&&this._renderSymbols(b,e,g)},remove:function(){this._mapDraw&&this._mapDraw.remove();this._mapDraw=null;this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove();this._mapDraw=null},_renderSymbols:function(a,e,f){var b=a.originalData;var c=this.group;b.each('value',function(w,h){if(isNaN(w)){return}var i=b.getItemLayout(h);if(!i||!i.point){return}var r=i.point;var l=i.offset;var g=new aT({style:{fill:a.getData().getVisual('color')},shape:{cx:r[0]+l*9,cy:r[1],r:3},silent:!0,z2:!l?10:8});if(!l){var q=a.mainSeries.getData();var s=b.getName(h);var v=q.indexOfName(s);var p=b.getItemModel(h);var j=p.getModel('label.normal');var m=p.getModel('label.emphasis');var t=q.getItemGraphicEl(v);var n=retrieve2(a.getFormattedLabel(h,'normal'),s);var u=retrieve2(a.getFormattedLabel(h,'emphasis'),n);var o=function(){var b=setTextStyle({},m,{text:m.get('show')?u:null},{isRectText:!0,useInsideStyle:!1},!0);g.style.extendFrom(b);g.__mapOriginalZ2=g.z2;g.z2+=1};var k=function(){setTextStyle(g.style,j,{text:j.get('show')?n:null,textPosition:j.getShallow('position')||'bottom'},{isRectText:!0,useInsideStyle:!1});if(g.__mapOriginalZ2!=null){g.z2=g.__mapOriginalZ2;g.__mapOriginalZ2=null}};t.on('mouseover',o).on('mouseout',k).on('emphasis',o).on('normal',k);k()}c.add(g)})}});function updateCenterAndZoom(a,c,i){var h=a.getZoom();var e=a.getCenter();var b=c.zoom;var g=a.dataToPoint(e);if(c.dx!=null&&c.dy!=null){g[0]-=c.dx;g[1]-=c.dy;var e=a.pointToData(g);a.setCenter(e)}if(b!=null){if(i){var k=i.min||0;var j=i.max||Infinity;b=Math.max(Math.min(h*b,j),k)/h}a.scale[0]*=b;a.scale[1]*=b;var f=a.position;var l=(c.originX-f[0])*(b-1);var m=(c.originY-f[1])*(b-1);f[0]-=l;f[1]-=m;a.updateTransform();var e=a.pointToData(g);a.setCenter(e);a.setZoom(b*h)}return {center:a.getCenter(),zoom:a.getZoom()}}registerAction({type:'geoRoam',event:'geoRoam',update:'updateLayout'},function(a,c){var b=a.componentType||'series';c.eachComponent({mainType:b,query:a},function(e){var g=e.coordinateSystem;if(g.type!=='geo'){return}var f=updateCenterAndZoom(g,a,e.get('scaleLimit'));e.setCenter&&e.setCenter(f.center);e.setZoom&&e.setZoom(f.zoom);if(b==='series'){each$1(e.seriesGroup,function(b){b.setCenter(f.center);b.setZoom(f.zoom)})}})});var jN=function(b){var a={};b.eachSeriesByType('map',function(c){var g=c.getMapType();if(c.getHostGeoModel()||a[g]){return}var f={};each$1(c.seriesGroup,function(a){var g=a.coordinateSystem;var e=a.originalData;if(a.get('showLegendSymbol')&&b.getComponent('legend')){e.each('value',function(m,k){var h=e.getName(k);var j=g.getRegion(h);if(!j||isNaN(m)){return}var i=f[h]||0;var l=g.dataToPoint(j.center);f[h]=i+1;e.setItemLayout(k,{point:l,offset:i})})}});var e=c.getData();e.each(function(a){var h=e.getName(a);var g=e.getItemLayout(a)||{};g.showLabel=!f[h];e.setItemLayout(a,g)});a[g]=!0})};var l1=function(a){a.eachSeriesByType('map',function(b){var e=b.get('color');var c=b.getModel('itemStyle.normal');var f=c.get('areaColor');var g=c.get('color')||e[b.seriesIndex%e.length];b.getData().setVisual({'areaColor':f,'color':g})})};function dataStatistics(c,b){var a={};var e=['value'];each$1(c,function(f){f.each(e,function(g,h){var e='ec-'+f.getName(h);a[e]=a[e]||[];if(!isNaN(g)){a[e].push(g)}})});return c[0].map(e,function(m,l){var g='ec-'+c[0].getName(l);var k=0;var j=Infinity;var i=-Infinity;var h=a[g].length;for(var f=0;f<h;f++){j=Math.min(j,a[g][f]);i=Math.max(i,a[g][f]);k+=a[g][f]}var e;if(b==='min'){e=j}else {if(b==='max'){e=i}else {if(b==='average'){e=k/h}else {e=k}}}return h===0?NaN:e})}var js=function(b){var a={};b.eachSeriesByType('map',function(c){var e=c.getHostGeoModel();var f=e?'o'+e.id:'i'+c.getMapType();(a[f]=a[f]||[]).push(c)});each$1(a,function(a,f){var e=dataStatistics(map(a,function(c){return c.getData()}),a[0].get('mapValueCalculation'));for(var c=0;c<a.length;c++){a[c].originalData=a[c].getData()}for(var c=0;c<a.length;c++){a[c].seriesGroup=a;a[c].needsDrawMap=c===0&&!a[c].getHostGeoModel();a[c].setData(e.cloneShallow());a[c].mainSeries=a[0]}})};var jp=function(b){var a=[];each$1(b.series,function(c){if(c&&c.type==='map'){a.push(c);c.map=c.map||c.mapType;defaults(c,c.mapLocation)}})};registerLayout(jN);registerVisual(l1);registerProcessor(be.PROCESSOR.STATISTIC,js);registerPreprocessor(jp);fs('map',[{type:'mapToggleSelect',event:'mapselectchanged',method:'toggleSelected'},{type:'mapSelect',event:'mapselected',method:'select'},{type:'mapUnSelect',event:'mapunselected',method:'unSelect'}]);var bJ=each$1;var bQ='\x00__link_datas';var cx='\x00__link_mainData';function linkList(a){var b=a.mainData;var c=a.datas;if(!c){c={main:b};a.datasAttr={main:'data'}}a.datas=a.mainData=null;linkAll(b,c,a);bJ(c,function(c){bJ(b.TRANSFERABLE_METHODS,function(b){c.wrapMethod(b,curry(transferInjection,a))})});b.wrapMethod('cloneShallow',curry(cloneShallowInjection,a));bJ(b.CHANGABLE_METHODS,function(c){b.wrapMethod(c,curry(changeInjection,a))});assert(c[b.dataType]===b)}function transferInjection(c,a){if(isMainData(this)){var b=extend({},this[bQ]);b[this.dataType]=a;linkAll(a,b,c)}else {linkSingle(a,this.dataType,this[cx],c)}return a}function changeInjection(a,b){a.struct&&a.struct.update(this);return b}function cloneShallowInjection(b,a){bJ(a[bQ],function(c,e){c!==a&&linkSingle(c.cloneShallow(),e,a,b)});return a}function getLinkedData(b){var a=this[cx];return b==null||a==null?a:a[bQ][b]}function isMainData(a){return a[cx]===a}function linkAll(a,b,c){a[bQ]={};bJ(b,function(f,e){linkSingle(f,e,a,c)})}function linkSingle(a,c,e,b){e[bQ][c]=a;a[cx]=e;a.dataType=c;if(b.struct){a[b.structAttr]=b.struct;b.struct[b.datasAttr[c]]=a}a.getLinkedData=getLinkedData}var eF=function(b,a){this.name=b||'';this.depth=0;this.height=0;this.parentNode=null;this.dataIndex=-1;this.children=[];this.viewChildren=[];this.hostTree=a};eF.prototype={constructor:eF,isRemoved:function(){return this.dataIndex<0},eachNode:function(a,b,c){if(typeof a==='function'){c=b;b=a;a=null}a=a||{};if(isString(a)){a={order:a}}var h=a.order||'preorder';var g=this[a.attr||'children'];var f;h==='preorder'&&(f=b.call(c,this));for(var e=0;!f&&e<g.length;e++){g[e].eachNode(a,b,c)}h==='postorder'&&b.call(c,this)},updateDepthAndHeight:function(e){var a=0;this.depth=e;for(var c=0;c<this.children.length;c++){var b=this.children[c];b.updateDepthAndHeight(e+1);if(b.height>a){a=b.height}}this.height=a+1},getNodeById:function(e){if(this.getId()===e){return this}for(var a=0,b=this.children,f=b.length;a<f;a++){var c=b[a].getNodeById(e);if(c){return c}}},contains:function(c){if(c===this){return !0}for(var a=0,b=this.children,f=b.length;a<f;a++){var e=b[a].contains(c);if(e){return e}}},getAncestors:function(c){var b=[];var a=c?this:this.parentNode;while(a){b.push(a);a=a.parentNode}b.reverse();return b},getValue:function(b){var a=this.hostTree.data;return a.get(a.getDimension(b||'value'),this.dataIndex)},setLayout:function(b,a){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,b,a)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(e){if(this.dataIndex<0){return}var c=this.hostTree;var f=c.data.getItemModel(this.dataIndex);var b=this.getLevelModel();var a;if(!b&&(this.children.length===0||this.children.length!==0&&this.isExpand===!1)){a=this.getLeavesModel()}return f.getModel(e,(b||a||c.hostModel).getModel(e))},getLevelModel:function(){return (this.hostTree.levelModels||[])[this.depth]},getLeavesModel:function(){return this.hostTree.leavesModel},setVisual:function(b,a){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,b,a)},getVisual:function(b,a){return this.hostTree.data.getItemVisual(this.dataIndex,b,a)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)}};function Tree(a,c,b){this.root;this.data;this._nodes=[];this.hostModel=a;this.levelModels=map(c||[],function(e){return new Model(e,a,a.ecModel)});this.leavesModel=new Model(b||{},a,a.ecModel)}Tree.prototype={constructor:Tree,type:'tree',eachNode:function(b,c,a){this.root.eachNode(b,c,a)},getNodeByDataIndex:function(a){var b=this.data.getRawIndex(a);return this._nodes[b]},getNodeByName:function(a){return this.root.getNodeByName(a)},update:function(){var e=this.data;var b=this._nodes;for(var a=0,c=b.length;a<c;a++){b[a].dataIndex=-1}for(var a=0,c=e.count();a<c;a++){b[e.getRawIndex(a)].dataIndex=a}},clearLayouts:function(){this.data.clearItemLayouts()}};Tree.createTree=function(i,f,e){var a=new Tree(f,e.levels,e.leaves);var b=[];var c=1;buildHierarchy(i);function buildHierarchy(g,l){var m=g.value;c=Math.max(c,isArray(m)?m.length:1);b.push(g);var h=new eF(g.name,a);l?addChild(h,l):a.root=h;a._nodes.push(h);var j=g.children;if(j){for(var k=0;k<j.length;k++){buildHierarchy(j[k],h)}}}a.root.updateDepthAndHeight(0);var h=completeDimensions([{name:'value'}],b,{dimCount:c});var g=new l(h,f);g.initData(b);linkList({mainData:g,struct:a,structAttr:'tree'});a.update();return a};function addChild(a,b){var c=b.children;if(a.parentNode===b){return}c.push(a);a.parentNode=b}r.extend({type:'series.tree',layoutInfo:null,layoutMode:'box',getInitialData:function(a){var i={name:a.name,children:a.data};var h=a.leaves||{};var e={};e.leaves=h;var c=Tree.createTree(i,this,e);var b=0;c.eachNode('preorder',function(c){if(c.depth>b){b=c.depth}});var f=a.expandAndCollapse;var g=f&&a.initialTreeDepth>=0?a.initialTreeDepth:b;c.root.eachNode('preorder',function(b){var c=b.hostTree.data.getRawDataItem(b.dataIndex);b.isExpand=c&&c.collapsed!=null?!c.collapsed:b.depth<=g});return c.data},formatTooltip:function(f){var e=this.getData().tree;var g=e.root.children[0];var a=e.getNodeByDataIndex(f);var b=a.getValue();var c=a.name;while(a&&a!==g){c=a.parentNode.name+'.'+c;a=a.parentNode}return encodeHTML(c+(isNaN(b)||b==null?'':' : '+b))},defaultOption:{zlevel:0,z:2,left:'12%',top:'12%',right:'12%',bottom:'12%',layout:'orthogonal',orient:'horizontal',symbol:'emptyCircle',symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{normal:{color:'#ccc',width:1.5,curveness:0.5}},itemStyle:{normal:{color:'lightsteelblue',borderColor:'#c23531',borderWidth:1.5}},label:{normal:{show:!0,color:'#555'}},leaves:{label:{normal:{show:!0}}},animationEasing:'linear',animationDuration:700,animationDurationUpdate:1000}});function init$2(f){f.hierNode={defaultAncestor:null,ancestor:f,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};var g=[f];var e;var a;while(e=g.pop()){a=e.children;if(e.isExpand&&a.length){var h=a.length;for(var b=h-1;b>=0;b--){var c=a[b];c.hierNode={defaultAncestor:null,ancestor:c,prelim:0,modifier:0,change:0,shift:0,i:b,thread:null};g.push(c)}}}}function firstWalk(a,e){var c=a.isExpand?a.children:[];var g=a.parentNode.children;var b=a.hierNode.i?g[a.hierNode.i-1]:null;if(c.length){executeShifts(a);var f=(c[0].hierNode.prelim+c[c.length-1].hierNode.prelim)/2;if(b){a.hierNode.prelim=b.hierNode.prelim+e(a,b);a.hierNode.modifier=a.hierNode.prelim-f}else {a.hierNode.prelim=f}}else {if(b){a.hierNode.prelim=b.hierNode.prelim+e(a,b)}}a.parentNode.hierNode.defaultAncestor=apportion(a,b,a.parentNode.hierNode.defaultAncestor||g[0],e)}function secondWalk(a){var b=a.hierNode.prelim+a.parentNode.hierNode.modifier;a.setLayout({x:b},!0);a.hierNode.modifier+=a.parentNode.hierNode.modifier}function separation(a){return arguments.length?a:defaultSeparation}function radialCoordinate(b,c){var a={};b-=Math.PI/2;a.x=c*Math.cos(b);a.y=c*Math.sin(b);return a}function getViewRect(b,a){return getLayoutRect(b.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function executeShifts(g){var c=g.children;var f=c.length;var b=0;var e=0;while(--f>=0){var a=c[f];a.hierNode.prelim+=b;a.hierNode.modifier+=b;e+=a.hierNode.change;b+=a.hierNode.shift+e}}function apportion(f,m,k,n){if(m){var c=f;var a=f;var e=a.parentNode.children[0];var b=m;var i=c.hierNode.modifier;var g=a.hierNode.modifier;var l=e.hierNode.modifier;var j=b.hierNode.modifier;while(b=nextRight(b),a=nextLeft(a),b&&a){c=nextRight(c);e=nextLeft(e);c.hierNode.ancestor=f;var h=b.hierNode.prelim+j-a.hierNode.prelim-g+n(b,a);if(h>0){moveSubtree(nextAncestor(b,f,k),f,h);g+=h;i+=h}j+=b.hierNode.modifier;g+=a.hierNode.modifier;i+=c.hierNode.modifier;l+=e.hierNode.modifier}if(b&&!nextRight(c)){c.hierNode.thread=b;c.hierNode.modifier+=j-i}if(a&&!nextLeft(e)){e.hierNode.thread=a;e.hierNode.modifier+=g-l;k=f}}return k}function nextRight(b){var a=b.children;return a.length&&b.isExpand?a[a.length-1]:b.hierNode.thread}function nextLeft(a){var b=a.children;return b.length&&a.isExpand?b[0]:a.hierNode.thread}function nextAncestor(a,c,b){return a.hierNode.ancestor.parentNode===c.parentNode?a.hierNode.ancestor:b}function moveSubtree(e,a,b){var c=b/(a.hierNode.i-e.hierNode.i);a.hierNode.change-=c;a.hierNode.shift+=b;a.hierNode.modifier+=b;a.hierNode.prelim+=b;e.hierNode.change+=c}function defaultSeparation(a,b){return a.parentNode===b.parentNode?1:2}extendChartView({type:'tree',init:function(a,c){this._oldTree;this._mainGroup=new b();this.group.add(this._mainGroup)},render:function(a,j,i,k){var b=a.getData();var c=a.layoutInfo;var e=this._mainGroup;var h=a.get('layout');if(h==='radial'){e.attr('position',[c.x+c.width/2,c.y+c.height/2])}else {e.attr('position',[c.x,c.y])}var g=this._data;var f={expandAndCollapse:a.get('expandAndCollapse'),layout:h,orient:a.get('orient'),curvature:a.get('lineStyle.normal.curveness'),symbolRotate:a.get('symbolRotate'),symbolOffset:a.get('symbolOffset'),hoverAnimation:a.get('hoverAnimation'),useNameLabel:!0,fadeIn:!0};b.diff(g).add(function(c){if(symbolNeedsDraw$1(b,c)){updateNode(b,c,null,e,a,f)}}).update(function(h,l){var c=g.getItemGraphicEl(l);if(!symbolNeedsDraw$1(b,h)){c&&removeNode(b,h,c,e,a,f);return}updateNode(b,h,c,e,a,f)}).remove(function(c){var h=g.getItemGraphicEl(c);removeNode(b,c,h,e,a,f)}).execute();if(f.expandAndCollapse===!0){b.eachItemGraphicEl(function(c,b){c.off('click').on('click',function(){i.dispatchAction({type:'treeExpandAndCollapse',seriesId:a.id,dataIndex:b})})})}this._data=b},dispose:function(){},remove:function(){this._mainGroup.removeAll();this._data=null}});function symbolNeedsDraw$1(c,b){var a=c.getItemLayout(b);return a&&!isNaN(a.x)&&!isNaN(a.y)&&c.getItemVisual(b,'symbol')!=='none'}function getTreeNodeStyle(c,b,a){a.itemModel=b;a.itemStyle=b.getModel('itemStyle.normal').getItemStyle();a.hoverItemStyle=b.getModel('itemStyle.emphasis').getItemStyle();a.lineStyle=b.getModel('lineStyle.normal').getLineStyle();a.labelModel=b.getModel('label.normal');a.hoverLabelModel=b.getModel('label.emphasis');if(c.isExpand===!1&&c.children.length!==0){a.symbolInnerColor=a.itemStyle.fill}else {a.symbolInnerColor='#fff'}return a}function updateNode(j,n,a,u,r,f){var y=!a;var c=j.tree.getNodeByDataIndex(n);var x=c.getModel();var f=getTreeNodeStyle(c,x,f);var p=j.tree.root;var t=c.parentNode===p?c:c.parentNode||c;var k=j.getItemGraphicEl(t.dataIndex);var q=t.getLayout();var m=k?{x:k.position[0],y:k.position[1],rawX:k.__radialOldRawX,rawY:k.__radialOldRawY}:q;var e=c.getLayout();if(y){a=new SymbolClz$1(j,n,f);a.attr('position',[m.x,m.y])}else {a.updateData(j,n,f)}a.__radialOldRawX=a.__radialRawX;a.__radialOldRawY=a.__radialRawY;a.__radialRawX=e.rawX;a.__radialRawY=e.rawY;u.add(a);j.setItemGraphicEl(n,a);updateProps(a,{position:[e.x,e.y]},r);var w=a.getSymbolPath();if(f.layout==='radial'){var i=p.children[0];var g=i.getLayout();var s=i.children.length;var b;var h;if(e.x===g.x&&c.isExpand===!0){var l={};l.x=(i.children[0].getLayout().x+i.children[s-1].getLayout().x)/2;l.y=(i.children[0].getLayout().y+i.children[s-1].getLayout().y)/2;b=Math.atan2(l.y-g.y,l.x-g.x);if(b<0){b=Math.PI*2+b}h=l.x<g.x;if(h){b=b-Math.PI}}else {b=Math.atan2(e.y-g.y,e.x-g.x);if(b<0){b=Math.PI*2+b}if(c.children.length===0||c.children.length!==0&&c.isExpand===!1){h=e.x<g.x;if(h){b=b-Math.PI}}else {h=e.x>g.x;if(!h){b=b-Math.PI}}}var v=h?'left':'right';w.setStyle({textPosition:v,textRotation:-b,textOrigin:'center',verticalAlign:'middle'})}if(c.parentNode&&c.parentNode!==p){var o=a.__edge;if(!o){o=a.__edge=new d3({shape:getEdgeShape(f,m,m),style:defaults({opacity:0},f.lineStyle)})}updateProps(o,{shape:getEdgeShape(f,q,e),style:{opacity:1}},r);u.add(o)}}function removeNode(g,k,e,l,i,f){var c=g.tree.getNodeByDataIndex(k);var j=g.tree.root;var m=c.getModel();var f=getTreeNodeStyle(c,m,f);var b=c.parentNode===j?c:c.parentNode||c;var a;while(a=b.getLayout(),a==null){b=b.parentNode===j?b:b.parentNode||b}updateProps(e,{position:[a.x+1,a.y+1]},i,function(){l.remove(e);g.setItemGraphicEl(k,null)});e.fadeOut(null,{keepLabel:!0});var h=e.__edge;if(h){updateProps(h,{shape:getEdgeShape(f,a,a),style:{opacity:0}},i,function(){l.remove(h)})}}function getEdgeShape(c,g,h){var i;var k;var j;var l;var q=c.orient;if(c.layout==='radial'){var e=g.rawX;var a=g.rawY;var f=h.rawX;var b=h.rawY;var m=radialCoordinate(e,a);var n=radialCoordinate(e,a+(b-a)*c.curvature);var o=radialCoordinate(f,b+(a-b)*c.curvature);var p=radialCoordinate(f,b);return {x1:m.x,y1:m.y,x2:p.x,y2:p.y,cpx1:n.x,cpy1:n.y,cpx2:o.x,cpy2:o.y}}else {var e=g.x;var a=g.y;var f=h.x;var b=h.y;if(q==='horizontal'){i=e+(f-e)*c.curvature;k=a;j=f+(e-f)*c.curvature;l=b}if(q==='vertical'){i=e;k=a+(b-a)*c.curvature;j=f;l=b+(a-b)*c.curvature}return {x1:e,y1:a,x2:f,y2:b,cpx1:i,cpy1:k,cpx2:j,cpy2:l}}}registerAction({type:'treeExpandAndCollapse',event:'treeExpandAndCollapse',update:'update'},function(a,b){b.eachComponent({mainType:'series',subType:'tree',query:a},function(e){var f=a.dataIndex;var g=e.getData().tree;var c=g.getNodeByDataIndex(f);c.isExpand=!c.isExpand})});function eachAfter(i,h,g){var e=[i];var f=[];var a;while(a=e.pop()){f.push(a);if(a.isExpand){var b=a.children;if(b.length){for(var c=0;c<b.length;c++){e.push(b[c])}}}}while(a=f.pop()){h(a,g)}}function eachBefore(g,f){var e=[g];var a;while(a=e.pop()){f(a);if(a.isExpand){var b=a.children;if(b.length){for(var c=b.length-1;c>=0;c--){e.push(b[c])}}}}}var gB=function(i,s){var j=getViewRect(i,s);i.layoutInfo=j;var r=i.get('layout');var m=0;var l=0;var o=null;if(r==='radial'){m=2*Math.PI;l=Math.min(j.height,j.width)/2;o=separation(function(a,b){return (a.parentNode===b.parentNode?1:2)/a.depth})}else {m=j.width;l=j.height;o=separation()}var q=i.getData().tree.root;var a=q.children[0];init$2(q);eachAfter(a,firstWalk,o);q.hierNode.modifier=-a.hierNode.prelim;eachBefore(a,secondWalk);var n=a;var e=a;var k=a;eachBefore(a,function(a){var b=a.getLayout().x;if(b<n.getLayout().x){n=a}if(b>e.getLayout().x){e=a}if(a.depth>k.depth){k=a}});var p=n===e?1:o(n,e)/2;var h=p-n.getLayout().x;var f=0;var g=0;var b=0;var c=0;if(r==='radial'){f=m/(e.getLayout().x+p+h);g=l/(k.depth-1||1);eachBefore(a,function(a){b=(a.getLayout().x+h)*f;c=(a.depth-1)*g;var e=radialCoordinate(b,c);a.setLayout({x:e.x,y:e.y,rawX:b,rawY:c},!0)})}else {if(i.get('orient')==='horizontal'){g=l/(e.getLayout().x+p+h);f=m/(k.depth-1||1);eachBefore(a,function(a){c=(a.getLayout().x+h)*g;b=(a.depth-1)*f;a.setLayout({x:b,y:c},!0)})}else {f=m/(e.getLayout().x+p+h);g=l/(k.depth-1||1);eachBefore(a,function(a){b=(a.getLayout().x+h)*f;c=(a.depth-1)*g;a.setLayout({x:b,y:c},!0)})}}};var jt=function(a,b){a.eachSeriesByType('tree',function(c){gB(c,b)})};var kT=function(a,b){a.eachSeriesByType('tree',function(c){gB(c,b)})};registerVisual(curry(aK,'tree','circle',null));registerLayout(jt);registerLayout(kT);function retrieveTargetInfo(b,f){if(b&&(b.type==='treemapZoomToNode'||b.type==='treemapRootToNode')){var e=f.getData().tree.root;var a=b.targetNode;if(a&&e.contains(a)){return {node:a}}var c=b.targetNodeId;if(c!=null&&(a=e.getNodeById(c))){return {node:a}}}}function getPathToRoot(a){var b=[];while(a){a=a.parentNode;a&&b.push(a)}return b.reverse()}function aboveViewRoot(b,c){var a=getPathToRoot(b);return indexOf(a,c)>=0}function wrapTreePathInfo(a,e){var b=[];while(a){var c=a.dataIndex;b.push({name:a.name,dataIndex:c,value:e.getRawValue(c)});a=a.parentNode}b.reverse();return b}r.extend({type:'series.treemap',layoutMode:'box',dependencies:['grid','polar'],_viewRoot:null,defaultOption:{progressive:0,hoverLayerThreshold:Infinity,left:'center',top:'middle',right:null,bottom:null,width:'80%',height:'80%',sort:!0,clipWindow:'origin',squareRatio:0.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:'',zoomToNodeRatio:0.32*0.32,roam:!0,nodeClick:'zoomToNode',animation:!0,animationDurationUpdate:900,animationEasing:'quinticInOut',breadcrumb:{show:!0,height:22,left:'center',top:'bottom',emptyItemWidth:25,itemStyle:{normal:{color:'rgba(0,0,0,0.7)',borderColor:'rgba(255,255,255,0.7)',borderWidth:1,shadowColor:'rgba(150,150,150,1)',shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:'#fff'}},emphasis:{textStyle:{}}}},label:{normal:{show:!0,distance:0,padding:5,position:'inside',color:'#fff',ellipsis:!0}},upperLabel:{normal:{show:!1,position:[0,'50%'],height:20,color:'#fff',ellipsis:!0,verticalAlign:'middle'},emphasis:{show:!0,position:[0,'50%'],color:'#fff',ellipsis:!0,verticalAlign:'middle'}},itemStyle:{normal:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:'#fff',borderColorSaturation:null},emphasis:{}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:'index',visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(a,f){var e={name:a.name,children:a.data};completeTreeValue(e);var b=a.levels||[];b=a.levels=setDefault(b,f);var c={};c.levels=b;return Tree.createTree(e,this,c).data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(b){var e=this.getData();var a=this.getRawValue(b);var c=isArray(a)?addCommas(a[0]):addCommas(a);var f=e.getName(b);return encodeHTML(f+': '+c)},getDataParams:function(b){var a=r.prototype.getDataParams.apply(this,arguments);var c=this.getData().tree.getNodeByDataIndex(b);a.treePathInfo=wrapTreePathInfo(c,this);return a},setLayoutInfo:function(a){this.layoutInfo=this.layoutInfo||{};extend(this.layoutInfo,a)},mapIdToIndex:function(c){var a=this._idIndexMap;if(!a){a=this._idIndexMap=createHashMap();this._idIndexMapCount=0}var b=a.get(c);if(b==null){a.set(c,b=this._idIndexMapCount++)}return b},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(a){a?this._viewRoot=a:a=this._viewRoot;var b=this.getData().tree.root;if(!a||a!==b&&!b.contains(a)){this._viewRoot=b}}});function completeTreeValue(b){var c=0;each$1(b.children,function(e){completeTreeValue(e);var a=e.value;isArray(a)&&(a=a[0]);c+=a});var a=b.value;if(isArray(a)){a=a[0]}if(a==null||isNaN(a)){a=c}if(a<0){a=0}isArray(b.value)?b.value[0]=a:b.value=a}function setDefault(a,e){var b=e.get('color');if(!b){return}a=a||[];var c;each$1(a,function(g){var f=new Model(g);var b=f.get('color');if(f.get('itemStyle.normal.color')||b&&b!=='none'){c=!0}});if(!c){var f=a[0]||(a[0]={});f.color=b.slice()}return a}var kv=8;var hi=8;var dV=5;function Breadcrumb(a){this.group=new b();a.add(this.group)}Breadcrumb.prototype={constructor:Breadcrumb,render:function(f,i,g,j){var a=f.getModel('breadcrumb');var h=this.group;h.removeAll();if(!a.get('show')||!g){return}var c=a.getModel('itemStyle.normal');var e=c.getModel('textStyle');var b={pos:{left:a.get('left'),right:a.get('right'),top:a.get('top'),bottom:a.get('bottom')},box:{width:i.getWidth(),height:i.getHeight()},emptyItemWidth:a.get('emptyItemWidth'),totalWidth:0,renderList:[]};this._prepare(g,b,e);this._renderContent(f,b,c,e,j);positionElement(h,b.pos,b.box)},_prepare:function(g,b,f){for(var a=g;a;a=a.parentNode){var e=a.getModel().get('name');var h=f.getTextRect(e);var c=Math.max(h.width+kv*2,b.emptyItemWidth);b.totalWidth+=c+hi;b.renderList.push({node:a,text:e,width:c})}},_renderContent:function(i,a,o,h,q){var l=0;var g=a.emptyItemWidth;var r=i.get('breadcrumb.height');var p=getAvailableSize(a.pos,a.box);var j=a.totalWidth;var e=a.renderList;for(var b=e.length-1;b>=0;b--){var f=e[b];var k=f.node;var c=f.width;var m=f.text;if(j>p.width){j-=c-g;c=g;m=null}var n=new J({shape:{points:makeItemPoints(l,0,c,r,b===e.length-1,b===0)},style:defaults(o.getItemStyle(),{lineJoin:'bevel',text:m,textFill:h.getTextColor(),textFont:h.getFont()}),z:10,onclick:curry(q,k)});this.group.add(n);packEventData(n,i,k);l+=c+hi}},remove:function(){this.group.removeAll()}};function makeItemPoints(a,b,e,c,g,h){var f=[[g?a:a-dV,b],[a+e,b],[a+e,b+c],[g?a:a-dV,b+c]];!h&&f.splice(2,0,[a+e+dV,b+c/2]);!g&&f.push([a,b+c/2]);return f}function packEventData(c,b,a){c.eventData={componentType:'series',componentSubType:'treemap',seriesIndex:b.componentIndex,seriesName:b.name,seriesType:'treemap',selfType:'breadcrumb',nodeData:{dataIndex:a&&a.dataIndex,name:a&&a.name},treePathInfo:a&&wrapTreePathInfo(a,b)}}function createWrap(){var a=[];var c={};var b;return {add:function(e,g,h,b,f){if(isString(b)){f=b;b=0}if(c[e.id]){return !1}c[e.id]=1;a.push({el:e,target:g,time:h,delay:b,easing:f});return !0},done:function(a){b=a;return this},start:function(){var g=a.length;for(var f=0,h=a.length;f<h;f++){var e=a[f];e.el.animateTo(e.target,e.time,e.delay,e.easing,done)}return this;function done(){g--;if(!g){a.length=0;c={};b&&b()}}}}}var cU=bind;var hp=b;var hI=k;var U=each$1;var f7=3;var i7=['label','normal'];var iN=['label','emphasis'];var iz=['upperLabel','normal'];var il=['upperLabel','emphasis'];var mw=10;var mT=1;var lT=2;var dc=a1([['fill','color'],['stroke','strokeColor'],['lineWidth','strokeWidth'],['shadowBlur'],['shadowOffsetX'],['shadowOffsetY'],['shadowColor']]);var fD=function(b){var a=dc(b);a.stroke=a.fill=a.lineWidth=null;return a};extendChartView({type:'treemap',init:function(b,a){this._containerGroup;this._storage=createStorage();this._oldTree;this._breadcrumb;this._controller;this._state='ready'},render:function(a,j,f,b){var n=j.findComponents({mainType:'series',subType:'treemap',query:b});if(indexOf(n,a)<0){return}this.seriesModel=a;this.api=f;this.ecModel=j;var e=retrieveTargetInfo(b,a);var c=b&&b.type;var l=a.layoutInfo;var m=!this._oldTree;var i=this._storage;var k=c==='treemapRootToNode'&&e&&i?{rootNodeGroup:i.nodeGroup[e.node.getRawIndex()],direction:b.direction}:null;var g=this._giveContainerGroup(l);var h=this._doRender(g,a,k);!m&&(!c||c==='treemapZoomToNode'||c==='treemapRootToNode')?this._doAnimation(g,h,a,k):h.renderFinally();this._resetController(f);this._renderBreadcrumb(a,f,e)},_giveContainerGroup:function(b){var a=this._containerGroup;if(!a){a=this._containerGroup=new hp();this._initEvents(a);this.group.add(a)}a.attr('position',[b.x,b.y]);return a},_doRender:function(j,g,l){var b=g.getData().tree;var a=this._oldTree;var c=createStorage();var h=createStorage();var i=this._storage;var e=[];var k=curry(renderNode,g,h,i,l,c,e);dualTravel(b.root?[b.root]:[],a&&a.root?[a.root]:[],j,b===a||!a,0);var f=clearStorage(i);this._oldTree=b;this._storage=h;return {lastsForAnimation:c,willDeleteEls:f,renderFinally:renderFinally};function dualTravel(a,b,f,c,e){if(c){b=a;U(a,function(i,h){!i.isRemoved()&&processNode(h,h)})}else {(new DataDiffer(b,a,getKey,getKey)).add(processNode).update(processNode).remove(curry(processNode,null)).execute()}function getKey(h){return h.getId()}function processNode(m,n){var h=m!=null?a[m]:null;var i=n!=null?b[n]:null;var o=k(h,i,f,e);o&&dualTravel(h&&h.viewChildren||[],i&&i.viewChildren||[],o,c,e+1)}}function clearStorage(b){var a=createStorage();b&&U(b,function(f,c){var e=a[c];U(f,function(a){a&&(e.push(a),a.__tmWillDelete=1)})});return a}function renderFinally(){U(f,function(a){U(a,function(b){b.parent&&b.parent.remove(b)})});U(e,function(a){a.invisible=!0;a.dirty()})}},_doAnimation:function(h,b,c,e){if(!c.get('animation')){return}var f=c.get('animationDurationUpdate');var g=c.get('animationEasing');var a=createWrap();U(b.willDeleteEls,function(j,i){U(j,function(o,p){if(o.invisible){return}var k=o.parent;var l;if(e&&e.direction==='drillDown'){l=k===e.rootNodeGroup?{shape:{x:0,y:0,width:k.__tmNodeWidth,height:k.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}}}else {var m=0;var n=0;if(!k.__tmWillDelete){m=k.__tmNodeWidth/2;n=k.__tmNodeHeight/2}l=i==='nodeGroup'?{position:[m,n],style:{opacity:0}}:{shape:{x:m,y:n,width:0,height:0},style:{opacity:0}}}l&&a.add(o,l,f,g)})});U(this._storage,function(j,i){U(j,function(k,n){var l=b.lastsForAnimation[i][n];var m={};if(!l){return}if(i==='nodeGroup'){if(l.old){m.position=k.position.slice();k.attr('position',l.old)}}else {if(l.old){m.shape=extend({},k.shape);k.setShape(l.old)}if(l.fadein){k.setStyle('opacity',0);m.style={opacity:1}}else {if(k.style.opacity!==1){m.style={opacity:1}}}}a.add(k,m,f,g)})},this);this._state='animating';a.done(cU(function(){this._state='ready';b.renderFinally()},this)).start()},_resetController:function(b){var a=this._controller;if(!a){a=this._controller=new RoamController(b.getZr());a.enable(this.seriesModel.get('roam'));a.on('pan',cU(this._onPan,this));a.on('zoom',cU(this._onZoom,this))}var c=new BoundingRect(0,0,b.getWidth(),b.getHeight());a.setPointerChecker(function(f,a,e){return c.contain(a,e)})},_clearController:function(){var a=this._controller;if(a){a.dispose();a=null}},_onPan:function(c,e){if(this._state!=='animating'&&(Math.abs(c)>f7||Math.abs(e)>f7)){var b=this.seriesModel.getData().tree.root;if(!b){return}var a=b.getLayout();if(!a){return}this.api.dispatchAction({type:'treemapMove',from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x+c,y:a.y+e,width:a.width,height:a.height}})}},_onZoom:function(h,e,f){if(this._state!=='animating'){var i=this.seriesModel.getData().tree.root;if(!i){return}var b=i.getLayout();if(!b){return}var c=new BoundingRect(b.x,b.y,b.width,b.height);var g=this.seriesModel.layoutInfo;e-=g.x;f-=g.y;var a=create$1();translate(a,a,[-e,-f]);scale$1(a,a,[h,h]);translate(a,a,[e,f]);c.applyTransform(a);this.api.dispatchAction({type:'treemapRender',from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:c.x,y:c.y,width:c.width,height:c.height}})}},_initEvents:function(a){a.on('click',function(h){if(this._state!=='ready'){return}var c=this.seriesModel.get('nodeClick',!0);if(!c){return}var b=this.findTarget(h.offsetX,h.offsetY);if(!b){return}var e=b.node;if(e.getLayout().isLeafRoot){this._rootToNode(b)}else {if(c==='zoomToNode'){this._zoomToNode(b)}else {if(c==='link'){var f=e.hostTree.data.getItemModel(e.dataIndex);var g=f.get('link',!0);var i=f.get('target',!0)||'blank';g&&window.open(g,i)}}}},this)},_renderBreadcrumb:function(a,c,b){if(!b){b=a.get('leafDepth',!0)!=null?{node:a.getViewRoot()}:this.findTarget(c.getWidth()/2,c.getHeight()/2);if(!b){b={node:a.getData().tree.root}}}(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(a,c,b.node,cU(onSelect,this));function onSelect(e){if(this._state!=='animating'){aboveViewRoot(a.getViewRoot(),e)?this._rootToNode({node:e}):this._zoomToNode({node:e})}}},remove:function(){this._clearController();this._containerGroup&&this._containerGroup.removeAll();this._storage=createStorage();this._state='ready';this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(a){this.api.dispatchAction({type:'treemapZoomToNode',from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},_rootToNode:function(a){this.api.dispatchAction({type:'treemapRootToNode',from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},findTarget:function(c,e){var a;var b=this.seriesModel.getViewRoot();b.eachNode({attr:'viewChildren',order:'preorder'},function(h){var g=this._storage.background[h.getRawIndex()];if(g){var b=g.transformCoordToLocal(c,e);var f=g.shape;if(f.x<=b[0]&&b[0]<=f.x+f.width&&f.y<=b[1]&&b[1]<=f.y+f.height){a={node:h,offsetX:b[0],offsetY:b[1]}}else {return !1}}},this);return a}});function createStorage(){return {nodeGroup:[],background:[],content:[]}}function renderNode(f,z,r,l,n,x,a,u,y,v){if(!a){return}var b=a.getLayout();if(!b||!b.isInView){return}var g=b.width;var k=b.height;var e=b.borderWidth;var p=b.invisible;var i=a.getRawIndex();var j=u&&u.getRawIndex();var o=a.viewChildren;var q=b.upperHeight;var s=o&&o.length;var m=a.getModel('itemStyle.normal');var h=a.getModel('itemStyle.emphasis');var c=giveGraphic('nodeGroup',hp);if(!c){return}y.add(c);c.attr('position',[b.x||0,b.y||0]);c.__tmNodeWidth=g;c.__tmNodeHeight=k;if(b.isAboveViewRoot){return c}var w=giveGraphic('background',hI,v,mT);w&&renderBackground(c,w,s&&b.upperHeight);if(!s){var t=giveGraphic('content',hI,v,lT);t&&renderContent(c,t)}return c;function renderBackground(o,b,j){b.dataIndex=a.dataIndex;b.seriesIndex=f.seriesIndex;b.setShape({x:0,y:0,width:g,height:k});var c=a.getVisual('borderColor',!0);var i=h.get('borderColor');updateStyle(b,function(){var p=fD(m);p.fill=c;var k=dc(h);k.fill=i;if(j){var s=g-2*e;prepareText(p,k,c,s,q,{x:e,y:0,width:s,height:q})}else {p.text=k.text=null}b.setStyle(p);setHoverStyle(b,k)});o.add(b)}function renderContent(o,b){b.dataIndex=a.dataIndex;b.seriesIndex=f.seriesIndex;var i=Math.max(g-2*e,0);var c=Math.max(k-2*e,0);b.culling=!0;b.setShape({x:e,y:e,width:i,height:c});var j=a.getVisual('color',!0);updateStyle(b,function(){var e=fD(m);e.fill=j;var g=dc(h);prepareText(e,g,j,i,c);b.setStyle(e);setHoverStyle(b,g)});o.add(b)}function updateStyle(b,c){if(!p){c();if(!b.__tmWillVisible){b.invisible=!1}}else {!b.invisible&&x.push(b)}}function prepareText(h,o,p,s,q,c){var i=a.getModel();var e=retrieve(f.getFormattedLabel(a.dataIndex,'normal',null,null,c?'upperLabel':'label'),i.get('name'));if(!c&&b.isLeafRoot){var j=f.get('drillDownIcon',!0);e=j?j+' '+e:e}var g=i.getModel(c?iz:i7);var m=i.getModel(c?il:iN);var k=g.getShallow('show');setLabelStyle(h,o,g,m,{defaultText:k?e:null,autoColor:p,isRectText:!0});c&&(h.textRect=clone(c));h.truncate=k&&g.get('ellipsis')?{outerWidth:s,outerHeight:q,minChar:2}:null}function giveGraphic(b,h,e,k){var c=j!=null&&r[b][j];var g=n[b];if(c){r[b][j]=null;prepareAnimationWhenHasOld(g,c,b)}else {if(!p){c=new h({z:calculateZ(e,k)});c.__tmDepth=e;c.__tmStorageName=b;prepareAnimationWhenNoOld(g,c,b)}}return z[b][i]=c}function prepareAnimationWhenHasOld(g,b,c){var e=g[i]={};e.old=c==='nodeGroup'?b.position.slice():extend({},b.shape)}function prepareAnimationWhenNoOld(k,m,e){var j=k[i]={};var g=a.parentNode;if(g&&(!l||l.direction==='drillDown')){var h=0;var c=0;var b=n.background[g.getRawIndex()];if(!l&&b&&b.old){h=b.old.width;c=b.old.height}j.old=e==='nodeGroup'?[0,c]:{x:h,y:c,width:0,height:0}}j.fadein=e!=='nodeGroup'}}function calculateZ(c,b){var a=c*mw+b;return (a-1)/a}var mF=function(){};var gL=['treemapZoomToNode','treemapRender','treemapMove'];for(var fb=0;fb<gL.length;fb++){registerAction({type:gL[fb],update:'updateView'},mF)}registerAction({type:'treemapRootToNode',update:'updateView'},function(a,b){b.eachComponent({mainType:'series',subType:'treemap',query:a},handleRootToNode);function handleRootToNode(e,g){var c=retrieveTargetInfo(a,e);if(c){var f=e.getViewRoot();if(f){a.direction=aboveViewRoot(f,c.node)?'rollUp':'drillDown'}e.resetViewRoot(c.node)}}});var bK=each$1;var gZ=isObject;var bX=-1;var j=function(e){var b=e.mappingMethod;var f=e.type;var a=this.option=clone(e);this.type=f;this.mappingMethod=b;this._normalizeData=lm[b];var c=bw[f];this.applyVisual=c.applyVisual;this.getColorMapper=c.getColorMapper;this._doMap=c._doMap[b];if(b==='piecewise'){normalizeVisualRange(a);preprocessForPiecewise(a)}else {if(b==='category'){a.categories?preprocessForSpecifiedCategory(a):normalizeVisualRange(a,!0)}else {assert(b!=='linear'||a.dataExtent);normalizeVisualRange(a)}}};j.prototype={constructor:j,mapValueToVisual:function(a){var b=this._normalizeData(a);return this._doMap(b,a)},getNormalizer:function(){return bind(this._normalizeData,this)}};var bw=j.visualHandlers={color:{applyVisual:makeApplyVisual('color'),getColorMapper:function(){var a=this.option;return bind(a.mappingMethod==='category'?function(a,b){!b&&(a=this._normalizeData(a));return doMapCategory.call(this,a)}:function(c,f,b){var e=!!b;!f&&(c=this._normalizeData(c));b=fastLerp(c,a.parsedVisual,b);return e?b:stringify(b,'rgba')},this)},_doMap:{linear:function(a){return stringify(fastLerp(a,this.option.parsedVisual),'rgba')},category:doMapCategory,piecewise:function(b,c){var a=getSpecifiedVisual.call(this,c);if(a==null){a=stringify(fastLerp(b,this.option.parsedVisual),'rgba')}return a},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(a,b){return modifyHSL(a,b)}),colorSaturation:makePartialColorVisualHandler(function(a,b){return modifyHSL(a,null,b)}),colorLightness:makePartialColorVisualHandler(function(a,b){return modifyHSL(a,null,null,b)}),colorAlpha:makePartialColorVisualHandler(function(a,b){return modifyAlpha(a,b)}),opacity:{applyVisual:makeApplyVisual('opacity'),_doMap:makeDoMap([0,1])},symbol:{applyVisual:function(e,f,c){var a=this.mapValueToVisual(e);if(isString(a)){c('symbol',a)}else {if(gZ(a)){for(var b in a){if(a.hasOwnProperty(b)){c(b,a[b])}}}}},_doMap:{linear:doMapToArray,category:doMapCategory,piecewise:function(b,c){var a=getSpecifiedVisual.call(this,c);if(a==null){a=doMapToArray.call(this,b)}return a},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual('symbolSize'),_doMap:makeDoMap([0,1])}};function preprocessForPiecewise(a){var b=a.pieceList;a.hasSpecialVisual=!1;each$1(b,function(b,c){b.originIndex=c;if(b.visual!=null){a.hasSpecialVisual=!0}})}function preprocessForSpecifiedCategory(c){var b=c.categories;var a=c.visual;var f=c.categoryMap={};bK(b,function(b,a){f[b]=a});if(!isArray(a)){var g=[];if(isObject(a)){bK(a,function(e,b){var a=f[b];g[a!=null?a:bX]=e})}else {g[bX]=a}a=setVisualToOption(c,g)}for(var e=b.length-1;e>=0;e--){if(a[e]==null){delete f[b[e]];b.pop()}}}function normalizeVisualRange(c,f){var b=c.visual;var a=[];if(isObject(b)){bK(b,function(b){a.push(b)})}else {if(b!=null){a.push(b)}}var e={color:1,symbol:1};if(!f&&a.length===1&&!e.hasOwnProperty(c.type)){a[1]=a[0]}setVisualToOption(c,a)}function makePartialColorVisualHandler(a){return {applyVisual:function(b,c,e){b=this.mapValueToVisual(b);e('color',a(c('color'),b))},_doMap:makeDoMap([0,1])}}function doMapToArray(b){var a=this.option.visual;return a[Math.round(linearMap(b,[0,1],[0,a.length-1],!0))]||{}}function makeApplyVisual(a){return function(c,e,b){b(a,this.mapValueToVisual(c))}}function doMapCategory(a){var b=this.option.visual;return b[this.option.loop&&a!==bX?a%b.length:a]}function doMapFixed(){return this.option.visual[0]}function makeDoMap(a){return {linear:function(b){return linearMap(b,a,this.option.visual,!0)},category:doMapCategory,piecewise:function(c,e){var b=getSpecifiedVisual.call(this,e);if(b==null){b=linearMap(c,a,this.option.visual,!0)}return b},fixed:doMapFixed}}function getSpecifiedVisual(f){var b=this.option;var c=b.pieceList;if(b.hasSpecialVisual){var e=j.findPieceIndex(f,c);var a=c[e];if(a&&a.visual){return a.visual[this.type]}}}function setVisualToOption(a,b){a.visual=b;if(a.type==='color'){a.parsedVisual=map(b,function(c){return parse(c)})}return b}var lm={linear:function(a){return linearMap(a,this.option.dataExtent,[0,1],!0)},piecewise:function(c){var b=this.option.pieceList;var a=j.findPieceIndex(c,b,!0);if(a!=null){return linearMap(a,[0,b.length-1],[0,1],!0)}},category:function(b){var a=this.option.categories?this.option.categoryMap[b]:b;return a==null?bX:a},fixed:noop};j.listVisualTypes=function(){var a=[];each$1(bw,function(c,b){a.push(b)});return a};j.addVisualHandler=function(b,a){bw[b]=a};j.isValidType=function(a){return bw.hasOwnProperty(a)};j.eachVisual=function(a,b,c){if(isObject(a)){each$1(a,b,c)}else {b.call(c,a)}};j.mapVisual=function(b,e,f){var c;var a=isArray(b)?[]:isObject(b)?{}:(c=!0,null);j.eachVisual(b,function(i,h){var g=e.call(f,i,h);c?a=g:a[h]=g});return a};j.retrieveVisuals=function(a){var c={};var b;a&&bK(bw,function(f,e){if(a.hasOwnProperty(e)){c[e]=a[e];b=!0}});return b?c:null};j.prepareVisualTypes=function(a){if(gZ(a)){var b=[];bK(a,function(e,c){b.push(c)});a=b}else {if(isArray(a)){a=a.slice()}else {return []}}a.sort(function(b,c){return c==='color'&&b!=='color'&&b.indexOf('color')===0?1:-1});return a};j.dependsOn=function(a,b){return b==='color'?!!(a&&a.indexOf(b)===0):a===b};j.findPieceIndex=function(c,f,g){var j;var l=Infinity;for(var a=0,i=f.length;a<i;a++){var e=f[a].value;if(e!=null){if(e===c||typeof e==='string'&&e===c+''){return a}g&&updatePossible(e,a)}}for(var a=0,i=f.length;a<i;a++){var k=f[a];var b=k.interval;var h=k.close;if(b){if(b[0]===-Infinity){if(littleThan(h[1],c,b[1])){return a}}else {if(b[1]===Infinity){if(littleThan(h[0],b[0],c)){return a}}else {if(littleThan(h[0],b[0],c)&&littleThan(h[1],c,b[1])){return a}}}g&&updatePossible(b[0],a);g&&updatePossible(b[1],a)}}if(g){return c===Infinity?f.length-1:c===-Infinity?0:j}function updatePossible(e,b){var a=Math.abs(e-c);if(a<l){l=a;j=b}}};function littleThan(c,a,b){return c?a<=b:a<b}var l_=isArray;var dk='itemStyle.normal';var kr=function(b,e,c){var a={mainType:'series',subType:'treemap',query:c};b.eachComponent(a,function(a){var g=a.getData().tree;var f=g.root;var h=a.getModel(dk);if(f.isRemoved()){return}var i=map(g.levelModels,function(f){return f?f.get(dk):null});travelTree(f,{},i,h,a.getViewRoot().getAncestors(),a)})};function travelTree(a,o,k,j,h,m){var n=a.getModel();var f=a.getLayout();if(!f||f.invisible||!f.isInView){return}var b=a.getModel(dk);var p=k[a.depth];var g=buildVisuals(b,o,p,j);var l=b.get('borderColor');var i=b.get('borderColorSaturation');var c;if(i!=null){c=calculateColor(g,a);l=calculateBorderColor(i,c)}a.setVisual('borderColor',l);var e=a.viewChildren;if(!e||!e.length){c=calculateColor(g,a);a.setVisual('color',c)}else {var q=buildVisualMapping(a,n,f,b,g,e);each$1(e,function(b,e){if(b.depth>=h.length||b===h[b.depth]){var c=mapVisual$1(n,g,b,e,q,m);travelTree(b,c,k,j,h,m)}})}}function buildVisuals(f,a,b,e){var c=extend({},a);each$1(['color','colorAlpha','colorSaturation'],function(h){var g=f.get(h,!0);g==null&&b&&(g=b[h]);g==null&&(g=a[h]);g==null&&(g=e.get(h));g!=null&&(c[h]=g)});return c}function calculateColor(b){var a=getValueVisualDefine(b,'color');if(a){var e=getValueVisualDefine(b,'colorAlpha');var c=getValueVisualDefine(b,'colorSaturation');if(c){a=modifyHSL(a,null,null,c)}if(e){a=modifyAlpha(a,e)}return a}}function calculateBorderColor(b,a){return a!=null?modifyHSL(a,null,null,b):null}function getValueVisualDefine(b,c){var a=b[c];if(a!=null&&a!=='none'){return a}}function buildVisualMapping(o,a,m,n,l,i){if(!i||!i.length){return}var f=getRangeVisual(a,'color')||l.color!=null&&l.color!=='none'&&(getRangeVisual(a,'colorAlpha')||getRangeVisual(a,'colorSaturation'));if(!f){return}var h=a.get('visualMin');var g=a.get('visualMax');var b=m.dataExtent.slice();h!=null&&h<b[0]&&(b[0]=h);g!=null&&g>b[1]&&(b[1]=g);var e=a.get('colorMappingBy');var c={type:f.name,dataExtent:b,visual:f.range};if(c.type==='color'&&(e==='index'||e==='id')){c.mappingMethod='category';c.loop=!0}else {c.mappingMethod='linear'}var k=new j(c);k.__drColorMappingBy=e;return k}function getRangeVisual(c,b){var a=c.get(b);return l_(a)&&a.length?{name:b,range:a}:null}function mapVisual$1(h,i,f,j,a,g){var c=extend({},i);if(a){var e=a.type;var b=e==='color'&&a.__drColorMappingBy;var k=b==='index'?j:b==='id'?g.mapIdToIndex(f.getId()):f.getValue(h.get('visualDimension'));c[e]=a.mapValueToVisual(k)}return c}var bE=Math.max;var cF=Math.min;var f2=retrieve;var eS=each$1;var fL=['itemStyle','normal','borderWidth'];var jS=['itemStyle','normal','gapWidth'];var iB=['upperLabel','normal','show'];var iq=['upperLabel','normal','height'];var kq=function(e,b,a){var c={mainType:'series',subType:'treemap',query:a};e.eachComponent(c,function(f){var t=b.getWidth();var r=b.getHeight();var i=f.option;var g=getLayoutRect(f.getBoxLayoutParams(),{width:b.getWidth(),height:b.getHeight()});var u=i.size||[];var p=parsePercent$1(f2(g.width,u[0]),t);var o=parsePercent$1(f2(g.height,u[1]),r);var j=a&&a.type;var q=retrieveTargetInfo(a,f);var k=j==='treemapRender'||j==='treemapMove'?a.rootRect:null;var c=f.getViewRoot();var n=getPathToRoot(c);if(j!=='treemapMove'){var l=j==='treemapZoomToNode'?estimateRootSize(f,q,c,p,o):k?[k.width,k.height]:[p,o];var h=i.sort;if(h&&h!=='asc'&&h!=='desc'){h='desc'}var v={squareRatio:i.squareRatio,sort:h,leafDepth:i.leafDepth};c.hostTree.clearLayouts();var m={x:0,y:0,width:l[0],height:l[1],area:l[0]*l[1]};c.setLayout(m);squarify(c,v,!1,0);var m=c.getLayout();eS(n,function(i,h){var g=(n[h+1]||c).getValue();i.setLayout(extend({dataExtent:[g,g],borderWidth:0,upperHeight:0},m))})}var s=f.getData().tree.root;s.setLayout(calculateRootPosition(g,k,q),!0);f.setLayoutInfo(g);prunning(s,new BoundingRect(-g.x,-g.y,t,r),n,c,0)})};function squarify(g,o,k,y){var f;var e;if(g.isRemoved()){return}var v=g.getLayout();f=v.width;e=v.height;var c=g.getModel();var n=c.get(fL);var j=c.get(jS)/2;var t=getUpperLabelHeight(c);var u=Math.max(n,t);var m=n-j;var s=u-j;var c=g.getModel();g.setLayout({borderWidth:n,upperHeight:u,upperLabelHeight:t},!0);f=bE(f-2*m,0);e=bE(e-m-s,0);var w=f*e;var h=initChildren(g,c,w,o,k,y);if(!h.length){return}var l={x:m,y:s,width:f,height:e};var i=cF(f,e);var p=Infinity;var a=[];a.area=0;for(var b=0,q=h.length;b<q;){var x=h[b];a.push(x);a.area+=x.getLayout().area;var z=worst(a,i,o.squareRatio);if(z<=p){b++;p=z}else {a.area-=a.pop().getLayout().area;position(a,i,l,j,!1);i=cF(l.width,l.height);a.length=a.area=0;p=Infinity}}if(a.length){position(a,i,l,j,!0)}if(!k){var r=c.get('childrenVisibleMin');if(r!=null&&w<r){k=!0}}for(var b=0,q=h.length;b<q;b++){squarify(h[b],o,k,y+1)}}function initChildren(b,i,j,g,k,l){var a=b.children||[];var c=g.sort;c!=='asc'&&c!=='desc'&&(c=null);var h=g.leafDepth!=null&&g.leafDepth<=l;if(k&&!h){return b.viewChildren=[]}a=filter(a,function(a){return !a.isRemoved()});sort$1(a,c);var e=statistic(i,a,c);if(e.sum===0){return b.viewChildren=[]}e.sum=filterByThreshold(i,j,e.sum,c,a);if(e.sum===0){return b.viewChildren=[]}for(var f=0,n=a.length;f<n;f++){var m=a[f].getValue()/e.sum*j;a[f].setLayout({area:m})}if(h){a.length&&b.setLayout({isLeafRoot:!0},!0);a.length=0}b.viewChildren=a;b.setLayout({dataExtent:e.dataExtent},!0);return a}function filterByThreshold(j,k,f,g,c){if(!g){return f}var i=j.get('visibleMin');var a=c.length;var e=a;for(var b=a-1;b>=0;b--){var h=c[g==='asc'?a-b-1:b].getValue();if(h/f*k<i){e=b;f-=h}}g==='asc'?c.splice(0,a-e):c.splice(e,a-e);return f}function sort$1(b,a){if(a){b.sort(function(c,e){var f=a==='asc'?c.getValue()-e.getValue():e.getValue()-c.getValue();return f===0?a==='asc'?c.dataIndex-e.dataIndex:e.dataIndex-c.dataIndex:f})}return b}function statistic(h,b,f){var g=0;for(var c=0,i=b.length;c<i;c++){g+=b[c].getValue()}var e=h.get('visualDimension');var a;if(!b||!b.length){a=[NaN,NaN]}else {if(e==='value'&&f){a=[b[b.length-1].getValue(),b[0].getValue()];f==='asc'&&a.reverse()}else {var a=[Infinity,-Infinity];eS(b,function(g){var c=g.getValue(e);c<a[0]&&(a[0]=c);c>a[1]&&(a[1]=c)})}}return {sum:g,dataExtent:a}}function worst(b,h,j){var e=0;var f=Infinity;for(var g=0,a,k=b.length;g<k;g++){a=b[g].getLayout().area;if(a){a<f&&(f=a);a>e&&(e=a)}}var c=b.area*b.area;var i=h*h*j;return c?bE(i*e/c,c/(i*f)):Infinity}function position(m,k,a,i,s){var e=k===a.width?0:1;var c=1-e;var g=['x','y'];var f=['width','height'];var l=a[g[e]];var b=k?m.area/k:0;if(s||b>a[f[c]]){b=a[f[c]]}for(var j=0,o=m.length;j<o;j++){var q=m[j];var h={};var r=b?q.getLayout().area/b:0;var u=h[f[c]]=bE(b-2*i,0);var n=a[g[e]]+a[f[e]]-l;var p=j===o-1||n<r?n:r;var t=h[f[e]]=bE(p-2*i,0);h[g[c]]=a[g[c]]+cF(i,u/2);h[g[e]]=l+cF(i,t/2);l+=p;q.setLayout(h,!0)}a[g[c]]+=b;a[f[c]]-=b}function estimateRootSize(p,r,s,h,g){var c=(r||{}).node;var k=[h,g];if(!c||c===s){return k}var f;var e=h*g;var a=e*p.option.zoomToNodeRatio;while(f=c.parentNode){var o=0;var m=f.children;for(var i=0,t=m.length;i<t;i++){o+=m[i].getValue()}var j=c.getValue();if(j===0){return k}a*=o/j;var l=f.getModel();var b=l.get(fL);var q=Math.max(b,getUpperLabelHeight(l,b));a+=4*b*b+(3*b+q)*Math.pow(a,0.5);a>dr&&(a=dr);c=f}a<e&&(a=e);var n=Math.pow(a/e,0.5);return [h*n,g*n]}function calculateRootPosition(g,c,i){if(c){return {x:c.x,y:c.y}}var f={x:0,y:0};if(!i){return f}var j=i.node;var e=j.getLayout();if(!e){return f}var a=[e.width/2,e.height/2];var b=j;while(b){var h=b.getLayout();a[0]+=h.x;a[1]+=h.y;b=b.parentNode}return {x:g.width/2-a[0],y:g.height/2-a[1]}}function prunning(b,a,f,i,h){var g=b.getLayout();var c=f[h];var e=c&&c===b;if(c&&!e||h===f.length&&b!==i){return}b.setLayout({isInView:!0,invisible:!e&&!a.intersect(g),isAboveViewRoot:e},!0);var j=new BoundingRect(a.x-g.x,a.y-g.y,a.width,a.height);eS(b.viewChildren||[],function(c){prunning(c,j,f,i,h+1)})}function getUpperLabelHeight(a){return a.get(iB)?a.get(iq):0}registerVisual(kr);registerLayout(kq);function generateNodeKey(a){return '_EC_'+a}var bR=function(a){this._directed=a||!1;this.nodes=[];this.edges=[];this._nodesMap={};this._edgesMap={};this.data;this.edgeData};var D=bR.prototype;D.type='graph';D.isDirected=function(){return this._directed};D.addNode=function(b,e){b=b||''+e;var f=this._nodesMap;if(f[generateNodeKey(b)]){if(a){console.error('Graph nodes have duplicate name or id')}return}var c=new Node(b,e);c.hostGraph=this;this.nodes.push(c);f[generateNodeKey(b)]=c;return c};D.getNodeByIndex=function(a){var b=this.data.getRawIndex(a);return this.nodes[b]};D.getNodeById=function(a){return this._nodesMap[generateNodeKey(a)]};D.addEdge=function(a,b,h){var f=this._nodesMap;var e=this._edgesMap;if(typeof a==='number'){a=this.nodes[a]}if(typeof b==='number'){b=this.nodes[b]}if(!(a instanceof Node)){a=f[generateNodeKey(a)]}if(!(b instanceof Node)){b=f[generateNodeKey(b)]}if(!a||!b){return}var g=a.id+'-'+b.id;if(e[g]){return}var c=new Edge(a,b,h);c.hostGraph=this;if(this._directed){a.outEdges.push(c);b.inEdges.push(c)}a.edges.push(c);if(a!==b){b.edges.push(c)}this.edges.push(c);e[g]=c;return c};D.getEdgeByIndex=function(a){var b=this.edgeData.getRawIndex(a);return this.edges[b]};D.getEdge=function(a,b){if(a instanceof Node){a=a.id}if(b instanceof Node){b=b.id}var c=this._edgesMap;if(this._directed){return c[a+'-'+b]}else {return c[a+'-'+b]||c[b+'-'+a]}};D.eachNode=function(f,c){var b=this.nodes;var e=b.length;for(var a=0;a<e;a++){if(b[a].dataIndex>=0){f.call(c,b[a],a)}}};D.eachEdge=function(f,c){var b=this.edges;var e=b.length;for(var a=0;a<e;a++){if(b[a].dataIndex>=0&&b[a].node1.dataIndex>=0&&b[a].node2.dataIndex>=0){f.call(c,b[a],a)}}};D.breadthFirstTraverse=function(k,b,h,i){if(!(b instanceof Node)){b=this._nodesMap[generateNodeKey(b)]}if(!b){return}var l=h==='out'?'outEdges':h==='in'?'inEdges':'edges';for(var a=0;a<this.nodes.length;a++){this.nodes[a].__visited=!1}if(k.call(i,b,null)){return}var f=[b];while(f.length){var e=f.shift();var j=e[l];for(var a=0;a<j.length;a++){var g=j[a];var c=g.node1===e?g.node2:g.node1;if(!c.__visited){if(k.call(i,c,e)){return}f.push(c);c.__visited=!0}}}};D.update=function(){var g=this.data;var c=this.edgeData;var f=this.nodes;var e=this.edges;for(var a=0,b=f.length;a<b;a++){f[a].dataIndex=-1}for(var a=0,b=g.count();a<b;a++){f[g.getRawIndex(a)].dataIndex=a}c.filterSelf(function(b){var a=e[c.getRawIndex(b)];return a.node1.dataIndex>=0&&a.node2.dataIndex>=0});for(var a=0,b=e.length;a<b;a++){e[a].dataIndex=-1}for(var a=0,b=c.count();a<b;a++){e[c.getRawIndex(a)].dataIndex=a}};D.clone=function(){var b=new bR(this._directed);var c=this.nodes;var f=this.edges;for(var a=0;a<c.length;a++){b.addNode(c[a].id,c[a].dataIndex)}for(var a=0;a<f.length;a++){var e=f[a];b.addEdge(e.node1.id,e.node2.id,e.dataIndex)}return b};function Node(b,a){this.id=b==null?'':b;this.inEdges=[];this.outEdges=[];this.edges=[];this.hostGraph;this.dataIndex=a==null?-1:a}Node.prototype={constructor:Node,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(c){if(this.dataIndex<0){return}var b=this.hostGraph;var a=b.data.getItemModel(this.dataIndex);return a.getModel(c)}};function Edge(b,c,a){this.node1=b;this.node2=c;this.dataIndex=a==null?-1:a}Edge.prototype.getModel=function(c){if(this.dataIndex<0){return}var b=this.hostGraph;var a=b.edgeData.getItemModel(this.dataIndex);return a.getModel(c)};var fn=function(b,a){return {getValue:function(e){var c=this[b][a];return c.get(c.getDimension(e||'value'),this.dataIndex)},setVisual:function(e,c){this.dataIndex>=0&&this[b][a].setItemVisual(this.dataIndex,e,c)},getVisual:function(e,c){return this[b][a].getItemVisual(this.dataIndex,e,c)},setLayout:function(e,c){this.dataIndex>=0&&this[b][a].setItemLayout(this.dataIndex,e,c)},getLayout:function(){return this[b][a].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[b][a].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[b][a].getRawIndex(this.dataIndex)}}};mixin(Node,fn('hostGraph','data'));mixin(Edge,fn('hostGraph','edgeData'));bR.Node=Node;bR.Edge=Edge;var fo=function(c,r,e,t,m){var f=new bR(t);for(var a=0;a<c.length;a++){f.addNode(retrieve(c[a].id,c[a].name,a),a)}var k=[];var n=[];var o=0;for(var a=0;a<r.length;a++){var g=r[a];var p=g.source;var q=g.target;if(f.addEdge(p,q,o)){n.push(g);k.push(retrieve(g.id,p+' > '+q));o++}}var i=e.get('coordinateSystem');var b;if(i==='cartesian2d'||i==='polar'){b=createListFromArray(c,e,e.ecModel)}else {var h=CoordinateSystemManager.get(i);var s=completeDimensions((h&&h.type!=='view'?h.dimensions||[]:[]).concat(['value']),c);b=new l(s,e);b.initData(c)}var j=new l(['value'],e);j.initData(n,k);m&&m(b,j);linkList({mainData:b,struct:f,structAttr:'graph',datas:{node:b,edge:j},datasAttr:{node:'data',edge:'edgeData'}});f.update();return f};var by=extendSeriesModel({type:'series.graph',init:function(a){by.superApply(this,'init',arguments);this.legendDataProvider=function(){return this._categoriesData};this.fillDataTextStyle(a.edges||a.links);this._updateCategoriesData()},mergeOption:function(a){by.superApply(this,'mergeOption',arguments);this.fillDataTextStyle(a.edges||a.links);this._updateCategoriesData()},mergeDefaultAndTheme:function(a){by.superApply(this,'mergeDefaultAndTheme',arguments);defaultEmphasis(a.edgeLabel,['show'])},getInitialData:function(a,f){var b=a.edges||a.links||[];var c=a.data||a.nodes||[];var e=this;if(c&&b){return fo(c,b,this,!0,beforeLink).data}function beforeLink(h,g){h.wrapMethod('getItemModel',function(b){var i=e._categoriesModels;var j=b.getShallow('category');var c=i[j];if(c){c.parentModel=b.parentModel;b.parentModel=c}return b});var b=e.getModel('edgeLabel');var c=new Model({label:b.option},b.parentModel,f);g.wrapMethod('getItemModel',function(b){b.customizeGetParent(edgeGetParent);return b});function edgeGetParent(b){b=this.parsePath(b);return b&&b[0]==='label'?c:this.parentModel}}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(f,j,g){if(g==='edge'){var b=this.getData();var h=this.getDataParams(f,g);var i=b.graph.getEdgeByIndex(f);var c=b.getName(i.node1.dataIndex);var e=b.getName(i.node2.dataIndex);var a=[];c!=null&&a.push(c);e!=null&&a.push(e);a=encodeHTML(a.join(' > '));if(h.value){a+=' : '+encodeHTML(h.value)}return a}else {return by.superApply(this,'formatTooltip',arguments)}},_updateCategoriesData:function(){var b=map(this.option.categories||[],function(a){return a.value!=null?a:extend({value:0},a)});var a=new l(['value'],this);a.initData(b);this._categoriesData=a;this._categoriesModels=a.mapArray(function(b){return a.getItemModel(b,!0)})},setZoom:function(a){this.option.zoom=a},setCenter:function(a){this.option.center=a},isAnimationEnabled:function(){return by.superCall(this,'isAnimationEnabled')&&!(this.get('layout')==='force'&&this.get('force.layoutAnimation'))},defaultOption:{zlevel:0,z:2,coordinateSystem:'view',legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:0.1,edgeLength:30,layoutAnimation:!0},left:'center',top:'center',symbol:'circle',symbolSize:10,edgeSymbol:['none','none'],edgeSymbolSize:10,edgeLabel:{normal:{position:'middle'},emphasis:{}},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:0.6,label:{normal:{show:!1,formatter:'{b}'},emphasis:{show:!0}},itemStyle:{normal:{},emphasis:{}},lineStyle:{normal:{color:'#aaa',width:1,curveness:0,opacity:0.5},emphasis:{}}}});var fO=L.prototype;var du=d3.prototype;function isLine(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var l8=extendShape({type:'ec-line',style:{stroke:'#000',fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(b,a){(isLine(a)?fO:du).buildPath(b,a)},pointAt:function(a){return isLine(this.shape)?fO.pointAt.call(this,a):du.pointAt.call(this,a)},tangentAt:function(c){var a=this.shape;var b=isLine(a)?[a.x2-a.x1,a.y2-a.y1]:du.tangentAt.call(this,c);return normalize(b,b)}});var dl=['fromSymbol','toSymbol'];function makeSymbolTypeKey(a){return '_'+a+'Type'}function createSymbol$1(e,c,f){var h=c.getItemVisual(f,'color');var b=c.getItemVisual(f,e);var a=c.getItemVisual(f,e+'Size');if(!b||b==='none'){return}if(!isArray(a)){a=[a,a]}var g=createSymbol(b,-a[0]/2,-a[1]/2,a[0],a[1],h);g.name=e;return g}function createLine(b){var a=new l8({name:'line'});setLinePoints(a.shape,b);return a}function setLinePoints(a,b){var e=b[0];var f=b[1];var c=b[2];a.x1=e[0];a.y1=e[1];a.x2=f[0];a.y2=f[1];a.percent=1;if(c){a.cpx1=c[0];a.cpy1=c[1]}else {a.cpx1=NaN;a.cpy1=NaN}}function updateSymbolAndLabelBeforeLineUpdate(){var q=this;var l=q.childOfName('fromSymbol');var m=q.childOfName('toSymbol');var c=q.childOfName('label');if(!l&&!m&&c.ignore){return}var e=1;var k=this.parent;while(k){if(k.scale){e/=k.scale[0]}k=k.parent}var f=q.childOfName('line');if(!this.__dirty&&!f.__dirty){return}var i=f.shape.percent;var n=f.pointAt(0);var j=f.pointAt(i);var a=sub([],j,n);normalize(a,a);if(l){l.attr('position',n);var b=f.tangentAt(0);l.attr('rotation',Math.PI/2-Math.atan2(b[1],b[0]));l.attr('scale',[e*i,e*i])}if(m){m.attr('position',j);var b=f.tangentAt(1);m.attr('rotation',-Math.PI/2-Math.atan2(b[1],b[0]));m.attr('scale',[e*i,e*i])}if(!c.ignore){c.attr('position',j);var p;var r;var o;var h=5*e;if(c.__position==='end'){p=[a[0]*h+j[0],a[1]*h+j[1]];r=a[0]>0.8?'left':a[0]<-0.8?'right':'center';o=a[1]>0.8?'top':a[1]<-0.8?'bottom':'middle'}else {if(c.__position==='middle'){var t=i/2;var b=f.tangentAt(t);var g=[b[1],-b[0]];var u=f.pointAt(t);if(g[1]>0){g[0]=-g[0];g[1]=-g[1]}p=[u[0]+g[0]*h,u[1]+g[1]*h];r='center';o='bottom';var s=-Math.atan2(b[1],b[0]);if(j[0]<n[0]){s=Math.PI+s}c.attr('rotation',s)}else {p=[-a[0]*h+n[0],-a[1]*h+n[1]];r=a[0]>0.8?'right':a[0]<-0.8?'left':'center';o=a[1]>0.8?'bottom':a[1]<-0.8?'top':'middle'}}c.attr({style:{textVerticalAlign:c.__verticalAlign||o,textAlign:c.__textAlign||r},position:p,scale:[e,e]})}}function Line$1(c,e,a){b.call(this);this._createLine(c,e,a)}var ao=Line$1.prototype;ao.beforeUpdate=updateSymbolAndLabelBeforeLineUpdate;ao._createLine=function(a,b,g){var f=a.hostModel;var h=a.getItemLayout(b);var c=createLine(h);c.shape.percent=0;initProps(c,{shape:{percent:1}},f,b);this.add(c);var i=new e({name:'label'});this.add(i);each$1(dl,function(c){var e=createSymbol$1(c,a,b);this.add(e);this[makeSymbolTypeKey(c)]=a.getItemVisual(b,c)},this);this._updateCommonStl(a,b,g)};ao.updateData=function(a,b,f){var e=a.hostModel;var h=this.childOfName('line');var g=a.getItemLayout(b);var c={shape:{}};setLinePoints(c.shape,g);updateProps(h,c,e,b);each$1(dl,function(c){var e=a.getItemVisual(b,c);var g=makeSymbolTypeKey(c);if(this[g]!==e){this.remove(this.childOfName(c));var h=createSymbol$1(c,a,b);this.add(h)}this[g]=e},this);this._updateCommonStl(a,b,f)};ao._updateCommonStl=function(b,f,a){var l=b.hostModel;var v=this.childOfName('line');var o=a&&a.lineStyle;var r=a&&a.hoverLineStyle;var g=a&&a.labelModel;var e=a&&a.hoverLabelModel;if(!a||b.hasItemOption){var h=b.getItemModel(f);o=h.getModel('lineStyle.normal').getLineStyle();r=h.getModel('lineStyle.emphasis').getLineStyle();g=h.getModel('label.normal');e=h.getModel('label.emphasis')}var m=b.getItemVisual(f,'color');var s=retrieve3(b.getItemVisual(f,'opacity'),o.opacity,1);v.useStyle(defaults({strokeNoScale:!0,fill:'none',stroke:m,opacity:s},o));v.hoverStyle=r;each$1(dl,function(e){var c=this.childOfName(e);if(c){c.setColor(m);c.setStyle({opacity:s})}},this);var p=g.getShallow('show');var j=e.getShallow('show');var c=this.childOfName('label');var q;var k;var n;var t;if(p||j){var i=l.getRawValue(f);k=i==null?k=b.getName(f):isFinite(i)?round(i):i;q=m||'#000';n=retrieve2(l.getFormattedLabel(f,'normal',b.dataType),k);t=retrieve2(l.getFormattedLabel(f,'emphasis',b.dataType),n)}if(p){var u=setTextStyle(c.style,g,{text:n},{autoColor:q});c.__textAlign=u.textAlign;c.__verticalAlign=u.textVerticalAlign;c.__position=g.get('position')||'middle'}else {c.setStyle('text',null)}if(j){c.hoverStyle={text:t,textFill:e.getTextColor(!0),fontStyle:e.getShallow('fontStyle'),fontWeight:e.getShallow('fontWeight'),fontSize:e.getShallow('fontSize'),fontFamily:e.getShallow('fontFamily')}}else {c.hoverStyle={text:null}}c.ignore=!p&&!j;setHoverStyle(this)};ao.highlight=function(){this.trigger('emphasis')};ao.downplay=function(){this.trigger('normal')};ao.updateLayout=function(a,b){this.setLinePoints(a.getItemLayout(b))};ao.setLinePoints=function(b){var a=this.childOfName('line');setLinePoints(a.shape,b);a.dirty()};inherits(Line$1,b);function isPointNaN(a){return isNaN(a[0])||isNaN(a[1])}function lineNeedsDraw(a){return !isPointNaN(a[0])&&!isPointNaN(a[1])}function LineDraw(a){this._ctor=a||Line$1;this.group=new b()}var dS=LineDraw.prototype;dS.updateData=function(a){var e=this._lineData;var c=this.group;var g=this._ctor;var b=a.hostModel;var f={lineStyle:b.getModel('lineStyle.normal').getLineStyle(),hoverLineStyle:b.getModel('lineStyle.emphasis').getLineStyle(),labelModel:b.getModel('label.normal'),hoverLabelModel:b.getModel('label.emphasis')};a.diff(e).add(function(b){if(!lineNeedsDraw(a.getItemLayout(b))){return}var e=new g(a,b,f);a.setItemGraphicEl(b,e);c.add(e)}).update(function(h,i){var b=e.getItemGraphicEl(i);if(!lineNeedsDraw(a.getItemLayout(h))){c.remove(b);return}if(!b){b=new g(a,h,f)}else {b.updateData(a,h,f)}a.setItemGraphicEl(h,b);c.add(b)}).remove(function(b){c.remove(e.getItemGraphicEl(b))}).execute();this._lineData=a};dS.updateLayout=function(){var a=this._lineData;a.eachItemGraphicEl(function(c,b){c.updateLayout(a,b)},this)};dS.remove=function(){this.group.removeAll()};var ff=[];var fg=[];var fh=[];var a3=quadraticAt;var d2=al;var g8=Math.abs;function intersectCurveCircle(j,k,m){var c=j[0];var e=j[1];var f=j[2];var o=Infinity;var a;var i=m*m;var b=0.1;for(var h=0.1;h<=0.9;h+=0.1){ff[0]=a3(c[0],e[0],f[0],h);ff[1]=a3(c[1],e[1],f[1],h);var g=g8(d2(ff,k)-i);if(g<o){o=g;a=h}}for(var p=0;p<32;p++){var n=a+b;fg[0]=a3(c[0],e[0],f[0],a);fg[1]=a3(c[1],e[1],f[1],a);fh[0]=a3(c[0],e[0],f[0],n);fh[1]=a3(c[1],e[1],f[1],n);var g=d2(fg,k)-i;if(g8(g)<0.01){break}var l=d2(fh,k)-i;b/=2;if(g<0){if(l>=0){a=a+b}else {a=a-b}}else {if(l>=0){a=a-b}else {a=a+b}}}return a}var eb=function(h,e){var b=[];var g=quadraticSubdivide;var a=[[],[],[]];var c=[[],[]];var f=[];e/=2;function getSymbolSize(b){var a=b.getVisual('symbolSize');if(a instanceof Array){a=(a[0]+a[1])/2}return a}h.eachEdge(function(l,p){var i=l.getLayout();var n=l.getVisual('fromSymbol');var o=l.getVisual('toSymbol');if(!i.__original){i.__original=[clone$1(i[0]),clone$1(i[1])];if(i[2]){i.__original.push(clone$1(i[2]))}}var j=i.__original;if(i[2]!=null){copy(a[0],j[0]);copy(a[1],j[2]);copy(a[2],j[1]);if(n&&n!='none'){var k=getSymbolSize(l.node1);var m=intersectCurveCircle(a,j[0],k*e);g(a[0][0],a[1][0],a[2][0],m,b);a[0][0]=b[3];a[1][0]=b[4];g(a[0][1],a[1][1],a[2][1],m,b);a[0][1]=b[3];a[1][1]=b[4]}if(o&&o!='none'){var k=getSymbolSize(l.node2);var m=intersectCurveCircle(a,j[1],k*e);g(a[0][0],a[1][0],a[2][0],m,b);a[1][0]=b[1];a[2][0]=b[2];g(a[0][1],a[1][1],a[2][1],m,b);a[1][1]=b[1];a[2][1]=b[2]}copy(i[0],a[0]);copy(i[1],a[2]);copy(i[2],a[1])}else {copy(c[0],j[0]);copy(c[1],j[1]);sub(f,c[1],c[0]);normalize(f,f);if(n&&n!='none'){var k=getSymbolSize(l.node1);scaleAndAdd(c[0],c[0],f,k*e)}if(o&&o!='none'){var k=getSymbolSize(l.node2);scaleAndAdd(c[1],c[1],f,-k*e)}copy(i[0],c[0]);copy(i[1],c[1])}})};var aG=['itemStyle','normal','opacity'];var b7=['lineStyle','normal','opacity'];function getItemOpacity(a,b){return a.getVisual('opacity')||a.getModel().get(b)}function fadeOutItem(e,f,c){var b=e.getGraphicEl();var a=getItemOpacity(e,f);if(c!=null){a==null&&(a=1);a*=c}b.downplay&&b.downplay();b.traverse(function(b){if(b.type!=='group'){b.setStyle('opacity',a)}})}function fadeInItem(b,c){var e=getItemOpacity(b,c);var a=b.getGraphicEl();a.highlight&&a.highlight();a.traverse(function(a){if(a.type!=='group'){a.setStyle('opacity',e)}})}extendChartView({type:'graph',init:function(f,e){var b=new SymbolDraw();var c=new LineDraw();var a=this.group;this._controller=new RoamController(e.getZr());this._controllerHost={target:a};a.add(b.group);a.add(c.group);this._symbolDraw=b;this._lineDraw=c;this._firstRender=!0},render:function(a,o,e){var f=a.coordinateSystem;this._model=a;this._nodeScaleRatio=a.get('nodeScaleRatio');var l=this._symbolDraw;var n=this._lineDraw;var i=this.group;if(f.type==='view'){var h={position:f.position,scale:f.scale};if(this._firstRender){i.attr(h)}else {updateProps(i,h,a)}}eb(a.getGraph(),this._getNodeGlobalScale(a));var b=a.getData();l.updateData(b);var m=a.getEdgeData();n.updateData(m);this._updateNodeAndLinkScale();this._updateController(a,o,e);clearTimeout(this._layoutTimeout);var c=a.forceLayout;var g=a.get('force.layoutAnimation');if(c){this._startForceLayoutIteration(c,g)}b.eachItemGraphicEl(function(f,h){var j=b.getItemModel(h);f.off('drag').off('dragend');var i=b.getItemModel(h).get('draggable');if(i){f.on('drag',function(){if(c){c.warmUp();!this._layouting&&this._startForceLayoutIteration(c,g);c.setFixed(h);b.setItemLayout(h,f.position)}},this).on('dragend',function(){if(c){c.setUnfixed(h)}},this)}f.setDraggable(i&&c);f.off('mouseover',f.__focusNodeAdjacency);f.off('mouseout',f.__unfocusNodeAdjacency);if(j.get('focusNodeAdjacency')){f.on('mouseover',f.__focusNodeAdjacency=function(){e.dispatchAction({type:'focusNodeAdjacency',seriesId:a.id,dataIndex:f.dataIndex})});f.on('mouseout',f.__unfocusNodeAdjacency=function(){e.dispatchAction({type:'unfocusNodeAdjacency',seriesId:a.id})})}},this);b.graph.eachEdge(function(c){var b=c.getGraphicEl();b.off('mouseover',b.__focusNodeAdjacency);b.off('mouseout',b.__unfocusNodeAdjacency);if(c.getModel().get('focusNodeAdjacency')){b.on('mouseover',b.__focusNodeAdjacency=function(){e.dispatchAction({type:'focusNodeAdjacency',seriesId:a.id,edgeDataIndex:c.dataIndex})});b.on('mouseout',b.__unfocusNodeAdjacency=function(){e.dispatchAction({type:'unfocusNodeAdjacency',seriesId:a.id})})}});var k=a.get('layout')==='circular'&&a.get('circular.rotateLabel');var j=b.getLayout('cx');var p=b.getLayout('cy');b.eachItemGraphicEl(function(m,l){var f=m.getSymbolPath();if(k){var g=b.getItemLayout(l);var c=Math.atan2(g[1]-p,g[0]-j);if(c<0){c=Math.PI*2+c}var i=g[0]<j;if(i){c=c-Math.PI}var h=i?'left':'right';f.setStyle({textRotation:-c,textPosition:h,textOrigin:'center'});f.hoverStyle&&(f.hoverStyle.textPosition=h)}else {f.setStyle({textRotation:0})}});this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose();this._controllerHost={}},focusNodeAdjacency:function(i,j,k,e){var h=this._model.getData();var b=h.graph;var g=e.dataIndex;var f=e.edgeDataIndex;var c=b.getNodeByIndex(g);var a=b.getEdgeByIndex(f);if(!c&&!a){return}b.eachNode(function(a){fadeOutItem(a,aG,0.1)});b.eachEdge(function(a){fadeOutItem(a,b7,0.1)});if(c){fadeInItem(c,aG);each$1(c.edges,function(a){if(a.dataIndex<0){return}fadeInItem(a,b7);fadeInItem(a.node1,aG);fadeInItem(a.node2,aG)})}if(a){fadeInItem(a,b7);fadeInItem(a.node1,aG);fadeInItem(a.node2,aG)}},unfocusNodeAdjacency:function(b,c,f,e){var a=this._model.getData().graph;a.eachNode(function(a){fadeOutItem(a,aG)});a.eachEdge(function(a){fadeOutItem(a,b7)})},_startForceLayoutIteration:function(c,b){var a=this;(function step(){c.step(function(e){a.updateLayout(a._model);(a._layouting=!e)&&(b?a._layoutTimeout=setTimeout(step,16):step())})})()},_updateController:function(a,g,e){var c=this._controller;var b=this._controllerHost;var f=this.group;c.setPointerChecker(function(c,h,i){var b=f.getBoundingRect();b.applyTransform(f.transform);return b.contain(h,i)&&!onIrrelevantElement(c,e,a)});if(a.coordinateSystem.type!=='view'){c.disable();return}c.enable(a.get('roam'));b.zoomLimit=a.get('scaleLimit');b.zoom=a.coordinateSystem.getZoom();c.off('pan').off('zoom').on('pan',function(c,f){updateViewOnPan(b,c,f);e.dispatchAction({seriesId:a.id,type:'graphRoam',dx:c,dy:f})}).on('zoom',function(h,c,f){updateViewOnZoom(b,h,c,f);e.dispatchAction({seriesId:a.id,type:'graphRoam',zoom:h,originX:c,originY:f});this._updateNodeAndLinkScale();eb(a.getGraph(),this._getNodeGlobalScale(a));this._lineDraw.updateLayout()},this)},_updateNodeAndLinkScale:function(){var a=this._model;var e=a.getData();var b=this._getNodeGlobalScale(a);var c=[b,b];e.eachItemGraphicEl(function(a,b){a.attr('scale',c)})},_getNodeGlobalScale:function(e){var a=e.coordinateSystem;if(a.type!=='view'){return 1}var c=this._nodeScaleRatio;var b=a.scale;var f=b&&b[0]||1;var h=a.getZoom();var g=(h-1)*c+1;return g/f},updateLayout:function(a){eb(a.getGraph(),this._getNodeGlobalScale(a));this._symbolDraw.updateLayout();this._lineDraw.updateLayout()},remove:function(a,b){this._symbolDraw&&this._symbolDraw.remove();this._lineDraw&&this._lineDraw.remove()}});var lz={type:'graphRoam',event:'graphRoam',update:'none'};registerAction(lz,function(a,b){b.eachComponent({mainType:'series',query:a},function(c){var f=c.coordinateSystem;var e=updateCenterAndZoom(f,a);c.setCenter&&c.setCenter(e.center);c.setZoom&&c.setZoom(e.zoom)})});registerAction({type:'focusNodeAdjacency',event:'focusNodeAdjacency',update:'series.graph:focusNodeAdjacency'},function(){});registerAction({type:'unfocusNodeAdjacency',event:'unfocusNodeAdjacency',update:'series.graph:unfocusNodeAdjacency'},function(){});var j$=function(b){var a=b.findComponents({mainType:'legend'});if(!a||!a.length){return}b.eachSeriesByType('graph',function(e){var c=e.getCategoriesData();var h=e.getGraph();var f=h.data;var g=c.mapArray(c.getName);f.filterSelf(function(j){var i=f.getItemModel(j);var c=i.getShallow('category');if(c!=null){if(typeof c==='number'){c=g[c]}for(var h=0;h<a.length;h++){if(!a[h].isSelected(c)){return !1}}}return !0})},this)};var j_=function(b){var a={};b.eachSeriesByType('graph',function(f){var c=f.getCategoriesData();var e=f.getData();var g={};c.each(function(e){var h=c.getName(e);g['ec-'+h]=e;var i=c.getItemModel(e);var j=i.get('itemStyle.normal.color')||f.getColorFromPalette(h,a);c.setItemVisual(e,'color',j)});if(c.count()){e.each(function(h){var i=e.getItemModel(h);var a=i.getShallow('category');if(a!=null){if(typeof a==='string'){a=g['ec-'+a]}if(!e.getItemVisual(h,'color',!0)){e.setItemVisual(h,'color',c.getItemVisual(a,'color'))}}})}})};function normalize$1(a){if(!(a instanceof Array)){a=[a,a]}return a}var lE=function(a){a.eachSeriesByType('graph',function(c){var i=c.getGraph();var b=c.getEdgeData();var f=normalize$1(c.get('edgeSymbol'));var e=normalize$1(c.get('edgeSymbolSize'));var h='lineStyle.normal.color'.split('.');var g='lineStyle.normal.opacity'.split('.');b.setVisual('fromSymbol',f&&f[0]);b.setVisual('toSymbol',f&&f[1]);b.setVisual('fromSymbolSize',e&&e[0]);b.setVisual('toSymbolSize',e&&e[1]);b.setVisual('color',c.get(h));b.setVisual('opacity',c.get(g));b.each(function(m){var k=b.getItemModel(m);var e=i.getEdgeByIndex(m);var j=normalize$1(k.getShallow('symbol',!0));var f=normalize$1(k.getShallow('symbolSize',!0));var l=k.get(h);var n=k.get(g);switch(l){case 'source':l=e.node1.getVisual('color');break;case 'target':l=e.node2.getVisual('color');break;}j[0]&&e.setVisual('fromSymbol',j[0]);j[1]&&e.setVisual('toSymbol',j[1]);f[0]&&e.setVisual('fromSymbolSize',f[0]);f[1]&&e.setVisual('toSymbolSize',f[1]);e.setVisual('color',l);e.setVisual('opacity',n)})})};function simpleLayout$1(a){var b=a.coordinateSystem;if(b&&b.type!=='view'){return}var c=a.getGraph();c.eachNode(function(c){var b=c.getModel();c.setLayout([+b.get('x'),+b.get('y')])});simpleLayoutEdge(c)}function simpleLayoutEdge(a){a.eachEdge(function(e){var f=e.getModel().get('lineStyle.normal.curveness')||0;var b=clone$1(e.node1.getLayout());var c=clone$1(e.node2.getLayout());var g=[b,c];if(+f){g.push([(b[0]+c[0])/2-(b[1]-c[1])*f,(b[1]+c[1])/2-(c[0]-b[0])*f])}e.setLayout(g)})}var kX=function(a,b){a.eachSeriesByType('graph',function(c){var h=c.get('layout');var e=c.coordinateSystem;if(e&&e.type!=='view'){var f=c.getData();var g=e.dimensions;f.each(g,function(){var j;var h=arguments;var k=[];for(var i=0;i<g.length;i++){if(!isNaN(h[i])){j=!0}k.push(h[i])}var l=h[h.length-1];if(j){f.setItemLayout(l,e.dataToPoint(k))}else {f.setItemLayout(l,[NaN,NaN])}});simpleLayoutEdge(f.graph)}else {if(!h||h==='none'){simpleLayout$1(c)}}})};function circularLayout$1(i){var e=i.coordinateSystem;if(e&&e.type!=='view'){return}var a=e.getBoundingRect();var b=i.getData();var k=b.graph;var c=0;var f=b.getSum('value');var j=Math.PI*2/(f||b.count());var g=a.width/2+a.x;var h=a.height/2+a.y;var l=Math.min(a.width,a.height)/2;k.eachNode(function(b){var a=b.getValue('value');c+=j*(f?a:1)/2;b.setLayout([l*Math.cos(c)+g,l*Math.sin(c)+h]);c+=j*(f?a:1)/2});b.setLayout({cx:g,cy:h});k.eachEdge(function(b){var a=b.getModel().get('lineStyle.normal.curveness')||0;var c=clone$1(b.node1.getLayout());var e=clone$1(b.node2.getLayout());var f;var j=(c[0]+e[0])/2;var k=(c[1]+e[1])/2;if(+a){a*=3;f=[g*a+j*(1-a),h*a+k*(1-a)]}b.setLayout([c,e,f])})}var j0=function(a){a.eachSeriesByType('graph',function(b){if(b.get('layout')==='circular'){circularLayout$1(b)}})};var a4=scaleAndAdd;function forceLayout$1(a,g,h){var e=h.rect;var k=e.width;var j=e.height;var f=[e.x+k/2,e.y+j/2];var l=h.gravity==null?0.1:h.gravity;for(var i=0;i<a.length;i++){var c=a[i];if(!c.p){c.p=create(k*(Math.random()-0.5)+f[0],j*(Math.random()-0.5)+f[1])}c.pp=clone$1(c.p);c.edges=null}var b=0.6;return {warmUp:function(){b=0.5},setFixed:function(b){a[b].fixed=!0},setUnfixed:function(b){a[b].fixed=!1},step:function(s){var e=[];var n=a.length;for(var c=0;c<g.length;c++){var p=g[c];var k=p.n1;var i=p.n2;sub(e,i.p,k.p);var m=len(e)-p.d;var o=i.w/(k.w+i.w);if(isNaN(o)){o=0}normalize(e,e);!k.fixed&&a4(k.p,k.p,e,o*m*b);!i.fixed&&a4(i.p,i.p,e,-(1-o)*m*b)}for(var c=0;c<n;c++){var j=a[c];if(!j.fixed){sub(e,f,j.p);a4(j.p,j.p,e,l*b)}}for(var c=0;c<n;c++){var k=a[c];for(var q=c+1;q<n;q++){var i=a[q];sub(e,i.p,k.p);var m=len(e);if(m===0){set(e,Math.random()-0.5,Math.random()-0.5);m=1}var r=(k.rep+i.rep)/m/m;!k.fixed&&a4(k.pp,k.pp,e,r);!i.fixed&&a4(i.pp,i.pp,e,-r)}}var t=[];for(var c=0;c<n;c++){var j=a[c];if(!j.fixed){sub(t,j.p,j.pp);a4(j.p,j.p,t,b);copy(j.pp,j.p)}}b=b*0.992;s&&s(a,g,b<0.01)}}}var lc=function(a){a.eachSeriesByType('graph',function(b){var k=b.coordinateSystem;if(k&&k.type!=='view'){return}if(b.get('layout')==='force'){var l=b.preservedPoints||{};var g=b.getGraph();var e=g.data;var n=g.edgeData;var j=b.getModel('force');var m=j.get('initLayout');if(b.preservedPoints){e.each(function(c){var f=e.getId(c);e.setItemLayout(c,l[f]||[NaN,NaN])})}else {if(!m||m==='none'){simpleLayout$1(b)}else {if(m==='circular'){circularLayout$1(b)}}}var p=e.getDataExtent('value');var o=n.getDataExtent('value');var f=j.get('repulsion');var c=j.get('edgeLength');if(!isArray(f)){f=[f,f]}if(!isArray(c)){c=[c,c]}c=[c[1],c[0]];var h=e.mapArray('value',function(i,h){var c=e.getItemLayout(h);var g=linearMap(i,p,f);if(isNaN(g)){g=(f[0]+f[1])/2}return {w:g,rep:g,fixed:e.getItemModel(h).get('fixed'),p:!c||isNaN(c[0])||isNaN(c[1])?null:c}});var r=n.mapArray('value',function(i,j){var e=g.getEdgeByIndex(j);var f=linearMap(i,o,c);if(isNaN(f)){f=(c[0]+c[1])/2}return {n1:h[e.node1.dataIndex],n2:h[e.node2.dataIndex],d:f,curveness:e.getModel().get('lineStyle.normal.curveness')||0}});var k=b.coordinateSystem;var s=k.getBoundingRect();var i=forceLayout$1(h,r,{rect:s,gravity:j.get('gravity')});var q=i.step;i.step=function(f){for(var c=0,i=h.length;c<i;c++){if(h[c].fixed){copy(h[c].p,g.getNodeByIndex(c).getLayout())}}q(function(m,o,q){for(var c=0,n=m.length;c<n;c++){if(!m[c].fixed){g.getNodeByIndex(c).setLayout(m[c].p)}l[e.getId(c)]=m[c].p}for(var c=0,n=o.length;c<n;c++){var k=o[c];var p=g.getEdgeByIndex(c);var i=k.n1.p;var j=k.n2.p;var h=p.getLayout();h=h?h.slice():[];h[0]=h[0]||[];h[1]=h[1]||[];copy(h[0],i);copy(h[1],j);if(+k.curveness){h[2]=[(i[0]+j[0])/2-(i[1]-j[1])*k.curveness,(i[1]+j[1])/2-(j[0]-i[0])*k.curveness]}p.setLayout(h)}f&&f(q)})};b.forceLayout=i;b.preservedPoints=l;i.step()}else {b.forceLayout=null}})};function getViewRect$1(c,b,e){var a=c.getBoxLayoutParams();a.aspect=e;return getLayoutRect(a,{width:b.getWidth(),height:b.getHeight()})}var lA=function(b,c){var a=[];b.eachSeriesByType('graph',function(h){var j=h.get('coordinateSystem');if(!j||j==='view'){var l=h.getData();var n=l.mapArray(function(e){var a=l.getItemModel(e);return [+a.get('x'),+a.get('y')]});var e=[];var g=[];fromPoints(n,e,g);if(g[0]-e[0]===0){g[0]+=1;e[0]-=1}if(g[1]-e[1]===0){g[1]+=1;e[1]-=1}var k=(g[0]-e[0])/(g[1]-e[1]);var f=getViewRect$1(h,c,k);if(isNaN(k)){e=[f.x,f.y];g=[f.x+f.width,f.y+f.height]}var q=g[0]-e[0];var p=g[1]-e[1];var o=f.width;var m=f.height;var i=h.coordinateSystem=new View();i.zoomLimit=h.get('scaleLimit');i.setBoundingRect(e[0],e[1],q,p);i.setViewRect(f.x,f.y,o,m);i.setCenter(h.get('center'));i.setZoom(h.get('zoom'));a.push(i)}});return a};registerProcessor(j$);registerVisual(curry(aK,'graph','circle',null));registerVisual(j_);registerVisual(lE);registerLayout(kX);registerLayout(j0);registerLayout(lc);registerCoordinateSystem('graphView',{create:lA});var m_=r.extend({type:'series.gauge',getInitialData:function(c,e){var b=new l(['value'],this);var a=c.data||[];if(!isArray(a)){a=[a]}b.initData(a);return b},defaultOption:{zlevel:0,z:2,center:['50%','50%'],legendHoverLink:!0,radius:'75%',startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[0.2,'#91c7ae'],[0.8,'#63869e'],[1,'#c23531']],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:'#eee',width:2,type:'solid'}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:'#eee',width:1,type:'solid'}},axisLabel:{show:!0,distance:5,color:'auto'},pointer:{show:!0,length:'80%',width:8},itemStyle:{normal:{color:'auto'}},title:{show:!0,offsetCenter:[0,'-40%'],color:'#333',fontSize:15},detail:{show:!0,backgroundColor:'rgba(0,0,0,0)',borderWidth:0,borderColor:'#ccc',width:100,height:null,padding:[5,10],offsetCenter:[0,'40%'],color:'auto',fontSize:30}}});var k1=Path.extend({type:'echartsGaugePointer',shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(e,a){var f=Math.cos;var g=Math.sin;var h=a.r;var b=a.width;var c=a.angle;var i=a.x-f(c)*b*(b>=h/3?1:2);var j=a.y-g(c)*b*(b>=h/3?1:2);c=a.angle-Math.PI/2;e.moveTo(i,j);e.lineTo(a.x+f(c)*b,a.y+g(c)*b);e.lineTo(a.x+f(a.angle)*h,a.y+g(a.angle)*h);e.lineTo(a.x-f(c)*b,a.y-g(c)*b);e.lineTo(i,j);return}});function parsePosition(b,a){var c=b.get('center');var f=a.getWidth();var e=a.getHeight();var g=Math.min(f,e);var h=parsePercent$1(c[0],a.getWidth());var i=parsePercent$1(c[1],a.getHeight());var j=parsePercent$1(b.get('radius'),g/2);return {cx:h,cy:i,r:j}}function formatLabel(a,b){if(b){if(typeof b==='string'){a=b.replace('{value}',a!=null?a:'')}else {if(typeof b==='function'){a=b(a)}}}return a}var mN=Math.PI*2;var m4=Chart.extend({type:'gauge',render:function(a,e,b){this.group.removeAll();var c=a.get('axisLine.lineStyle.color');var f=parsePosition(a,b);this._renderMain(a,e,b,c,f)},dispose:function(){},_renderMain:function(b,i,j,a,e){var s=this.group;var p=b.getModel('axisLine');var m=p.getModel('lineStyle');var g=b.get('clockwise');var f=-b.get('startAngle')/180*Math.PI;var c=-b.get('endAngle')/180*Math.PI;var o=(c-f)%mN;var n=f;var q=m.get('width');for(var k=0;k<a.length;k++){var r=Math.min(Math.max(a[k][0],0),1);var c=f+o*r;var l=new as({shape:{startAngle:n,endAngle:c,cx:e.cx,cy:e.cy,clockwise:g,r0:e.r-q,r:e.r},silent:!0});l.setStyle({fill:a[k][1]});l.setStyle(m.getLineStyle(['color','borderWidth','borderColor']));s.add(l);n=c}var h=function(f){if(f<=0){return a[0][1]}for(var c=0;c<a.length;c++){if(a[c][0]>=f&&(c===0?0:a[c-1][0])<f){return a[c][1]}}return a[c-1][1]};if(!g){var t=f;f=c;c=t}this._renderTicks(b,i,j,h,e,f,c,g);this._renderPointer(b,i,j,h,e,f,c,g);this._renderTitle(b,i,j,h,e);this._renderDetail(b,i,j,h,e)},_renderTicks:function(i,J,K,q,r,w,F,I){var s=this.group;var j=r.cx;var k=r.cy;var a=r.r;var C=+i.get('min');var G=+i.get('max');var o=i.getModel('splitLine');var n=i.getModel('axisTick');var m=i.getModel('axisLabel');var f=i.get('splitNumber');var p=n.get('splitNumber');var l=parsePercent$1(o.get('length'),a);var B=parsePercent$1(n.get('length'),a);var g=w;var D=(F-w)/f;var A=D/p;var u=o.getModel('lineStyle').getLineStyle();var v=n.getModel('lineStyle').getLineStyle();for(var h=0;h<=f;h++){var b=Math.cos(g);var c=Math.sin(g);if(o.get('show')){var x=new L({shape:{x1:b*a+j,y1:c*a+k,x2:b*(a-l)+j,y2:c*(a-l)+k},style:u,silent:!0});if(u.stroke==='auto'){x.setStyle({stroke:q(h/f)})}s.add(x)}if(m.get('show')){var H=formatLabel(round(h/f*(G-C)+C),m.get('formatter'));var y=m.get('distance');var E=q(h/f);s.add(new e({style:setTextStyle({},m,{text:H,x:b*(a-l-y)+j,y:c*(a-l-y)+k,textVerticalAlign:c<-0.4?'top':c>0.4?'bottom':'middle',textAlign:b<-0.4?'left':b>0.4?'right':'center'},{autoColor:E}),silent:!0}))}if(n.get('show')&&h!==f){for(var t=0;t<=p;t++){var b=Math.cos(g);var c=Math.sin(g);var z=new L({shape:{x1:b*a+j,y1:c*a+k,x2:b*(a-B)+j,y2:c*(a-B)+k},silent:!0,style:v});if(v.stroke==='auto'){z.setStyle({stroke:q((h+t/p)/f)})}s.add(z);g+=A}g-=A}else {g+=D}}},_renderPointer:function(b,m,n,k,e,i,j,l){var f=this.group;var c=this._data;if(!b.get('pointer.show')){c&&c.eachItemGraphicEl(function(a){f.remove(a)});return}var g=[+b.get('min'),+b.get('max')];var h=[i,j];var a=b.getData();a.diff(c).add(function(o){var c=new k1({shape:{angle:i}});initProps(c,{shape:{angle:linearMap(a.get('value',o),g,h,!0)}},b);f.add(c);a.setItemGraphicEl(o,c)}).update(function(p,q){var o=c.getItemGraphicEl(q);updateProps(o,{shape:{angle:linearMap(a.get('value',p),g,h,!0)}},b);f.add(o);a.setItemGraphicEl(p,o)}).remove(function(g){var a=c.getItemGraphicEl(g);f.remove(a)}).execute();a.eachItemGraphicEl(function(c,o){var f=a.getItemModel(o);var h=f.getModel('pointer');c.setShape({x:e.cx,y:e.cy,width:parsePercent$1(h.get('width'),e.r),r:parsePercent$1(h.get('length'),e.r)});c.useStyle(f.getModel('itemStyle.normal').getItemStyle());if(c.style.fill==='auto'){c.setStyle('fill',k(linearMap(a.get('value',o),g,[0,1],!0)))}setHoverStyle(c,f.getModel('itemStyle.emphasis').getItemStyle())});this._data=a},_renderTitle:function(a,n,o,h,b){var c=a.getModel('title');if(c.get('show')){var f=c.get('offsetCenter');var l=b.cx+parsePercent$1(f[0],b.r);var m=b.cy+parsePercent$1(f[1],b.r);var j=+a.get('min');var i=+a.get('max');var k=a.getData().get('value',0);var g=h(linearMap(k,[j,i],[0,1],!0));this.group.add(new e({silent:!0,style:setTextStyle({},c,{x:l,y:m,text:a.getData().getName(0),textAlign:'center',textVerticalAlign:'middle'},{autoColor:g,forceRich:!0})}))}},_renderDetail:function(c,p,q,k,b){var a=c.getModel('detail');var m=+c.get('min');var l=+c.get('max');if(a.get('show')){var f=a.get('offsetCenter');var n=b.cx+parsePercent$1(f[0],b.r);var o=b.cy+parsePercent$1(f[1],b.r);var i=parsePercent$1(a.get('width'),b.r);var g=parsePercent$1(a.get('height'),b.r);var h=c.getData().get('value',0);var j=k(linearMap(h,[m,l],[0,1],!0));this.group.add(new e({silent:!0,style:setTextStyle({},a,{x:n,y:o,text:formatLabel(h,a.get('formatter')),textWidth:isNaN(i)?null:i,textHeight:isNaN(g)?null:g,textAlign:'center',textVerticalAlign:'middle'},{autoColor:j,forceRich:!0})}))}}});var gz=extendSeriesModel({type:'series.funnel',init:function(a){gz.superApply(this,'init',arguments);this.legendDataProvider=function(){return this.getRawData()};this._defaultLabelLine(a)},getInitialData:function(a,e){var c=completeDimensions(['value'],a.data);var b=new l(c,this);b.initData(a.data);return b},_defaultLabelLine:function(a){defaultEmphasis(a.labelLine,['show']);var c=a.labelLine.normal;var b=a.labelLine.emphasis;c.show=c.show&&a.label.normal.show;b.show=b.show&&a.label.emphasis.show},getDataParams:function(b){var c=this.getData();var a=gz.superCall(this,'getDataParams',b);var e=c.getSum('value');a.percent=!e?0:+(c.get('value',b)/e*100).toFixed(2);a.$vars.push('percent');return a},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:'0%',maxSize:'100%',sort:'descending',gap:0,funnelAlign:'center',label:{normal:{show:!0,position:'outer'},emphasis:{show:!0}},labelLine:{normal:{show:!0,length:20,lineStyle:{width:1,type:'solid'}},emphasis:{}},itemStyle:{normal:{borderColor:'#fff',borderWidth:1},emphasis:{}}}});function FunnelPiece(g,h){b.call(this);var f=new J();var a=new T();var c=new e();this.add(f);this.add(a);this.add(c);this.updateData(g,h,!0);function onEmphasis(){a.ignore=a.hoverIgnore;c.ignore=c.hoverIgnore}function onNormal(){a.ignore=a.normalIgnore;c.ignore=c.normalIgnore}this.on('emphasis',onEmphasis).on('normal',onNormal).on('mouseover',onEmphasis).on('mouseout',onNormal)}var fQ=FunnelPiece.prototype;var jg=['itemStyle','normal','opacity'];fQ.updateData=function(c,b,i){var a=this.childAt(0);var g=c.hostModel;var k=c.getItemModel(b);var h=c.getItemLayout(b);var e=c.getItemModel(b).get(jg);e=e==null?1:e;a.useStyle({});if(i){a.setShape({points:h.points});a.setStyle({opacity:0});initProps(a,{style:{opacity:e}},g,b)}else {updateProps(a,{style:{opacity:e},shape:{points:h.points}},g,b)}var f=k.getModel('itemStyle');var j=c.getItemVisual(b,'color');a.setStyle(defaults({lineJoin:'round',fill:j},f.getModel('normal').getItemStyle(['opacity'])));a.hoverStyle=f.getModel('emphasis').getItemStyle();this._updateLabel(c,b);setHoverStyle(this)};fQ._updateLabel=function(f,b){var c=this.childAt(1);var e=this.childAt(2);var l=f.hostModel;var g=f.getItemModel(b);var n=f.getItemLayout(b);var a=n.label;var h=f.getItemVisual(b,'color');updateProps(c,{shape:{points:a.linePoints||a.linePoints}},l,b);updateProps(e,{style:{x:a.x,y:a.y}},l,b);e.attr({rotation:a.rotation,origin:[a.x,a.y],z2:10});var m=g.getModel('label.normal');var j=g.getModel('label.emphasis');var k=g.getModel('labelLine.normal');var i=g.getModel('labelLine.emphasis');var h=f.getItemVisual(b,'color');setLabelStyle(e.style,e.hoverStyle={},m,j,{labelFetcher:f.hostModel,labelDataIndex:b,defaultText:f.getName(b),autoColor:h,useInsideStyle:!!a.inside},{textAlign:a.textAlign,textVerticalAlign:a.verticalAlign});e.ignore=e.normalIgnore=!m.get('show');e.hoverIgnore=!j.get('show');c.ignore=c.normalIgnore=!k.get('show');c.hoverIgnore=!i.get('show');c.setStyle({stroke:h});c.setStyle(k.getModel('lineStyle').getLineStyle());c.hoverStyle=i.getModel('lineStyle').getLineStyle()};inherits(FunnelPiece,b);var m1=Chart.extend({type:'funnel',render:function(e,f,g){var a=e.getData();var b=this._data;var c=this.group;a.diff(b).add(function(h){var b=new FunnelPiece(a,h);a.setItemGraphicEl(h,b);c.add(b)}).update(function(i,j){var h=b.getItemGraphicEl(j);h.updateData(a,i);c.add(h);a.setItemGraphicEl(i,h)}).remove(function(h){var a=b.getItemGraphicEl(h);c.remove(a)}).execute();this._data=a},remove:function(){this.group.removeAll();this._data=null},dispose:function(){}});function getViewRect$2(b,a){return getLayoutRect(b.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function getSortedIndices(f,c){var a=f.mapArray('value',function(a){return a});var b=[];var g=c==='ascending';for(var e=0,h=f.count();e<h;e++){b[e]=e}if(typeof c==='function'){b.sort(c)}else {if(c!=='none'){b.sort(function(b,e){return g?a[b]-a[e]:a[e]-a[b]})}}return b}function labelLayout$1(a){a.each(function(p){var n=a.getItemModel(p);var s=n.getModel('label.normal');var h=s.get('position');var r=n.getModel('labelLine.normal');var o=a.getItemLayout(p);var b=o.points;var l=h==='inner'||h==='inside'||h==='center';var i;var c;var e;var k;if(l){c=(b[0][0]+b[1][0]+b[2][0]+b[3][0])/4;e=(b[0][1]+b[1][1]+b[2][1]+b[3][1])/4;i='center';k=[[c,e],[c,e]]}else {var f;var j;var g;var m=r.get('length');if(h==='left'){f=(b[3][0]+b[0][0])/2;j=(b[3][1]+b[0][1])/2;g=f-m;c=g-5;i='right'}else {f=(b[1][0]+b[2][0])/2;j=(b[1][1]+b[2][1])/2;g=f+m;c=g+5;i='left'}var q=j;k=[[f,j],[g,q]];e=q}o.label={linePoints:k,x:c,y:e,verticalAlign:'middle',textAlign:i,inside:l}})}var kE=function(a,b,c){a.eachSeriesByType('funnel',function(f){var g=f.getData();var q=f.get('sort');var e=getViewRect$2(f,b);var h=getSortedIndices(g,q);var t=[parsePercent$1(f.get('minSize'),e.width),parsePercent$1(f.get('maxSize'),e.width)];var p=g.getDataExtent('value');var n=f.get('min');var m=f.get('max');if(n==null){n=Math.min(p[0],0)}if(m==null){m=p[1]}var s=f.get('funnelAlign');var j=f.get('gap');var i=(e.height-j*(g.count()-1))/g.count();var l=e.y;var o=function(k,j){var l=g.get('value',k)||0;var i=linearMap(l,[n,m],t,!0);var h;switch(s){case 'left':h=e.x;break;case 'center':h=e.x+(e.width-i)/2;break;case 'right':h=e.x+e.width-i;break;}return [[h,j],[h+i,j]]};if(q==='ascending'){i=-i;j=-j;l+=e.height;h=h.reverse()}for(var k=0;k<h.length;k++){var r=h[k];var u=h[k+1];var v=o(r,l);var w=o(u,l+i);l+=i+j;g.setItemLayout(r,{points:v.concat(w.slice().reverse())})}labelLayout$1(g)})};registerVisual(curry(ep,'funnel'));registerLayout(kE);registerProcessor(curry(cq,'funnel'));var iK=function(a){createParallelIfNeeded(a);mergeAxisOptionFromParallel(a)};function createParallelIfNeeded(a){if(a.parallel){return}var b=!1;each$1(a.series,function(c){if(c&&c.type==='parallel'){b=!0}});if(b){a.parallel=[{}]}}function mergeAxisOptionFromParallel(a){var b=normalizeToArray(a.parallelAxis);each$1(b,function(c){if(!isObject(c)){return}var e=c.parallelIndex||0;var b=normalizeToArray(a.parallel)[e];if(b&&b.parallelAxisDefault){merge(c,b.parallelAxisDefault,!1)}})}var ch=function(f,e,a,c,b){q.call(this,f,e,a);this.type=c||'value';this.axisIndex=b};ch.prototype={constructor:ch,model:null,isHorizontal:function(){return this.coordinateSystem.getModel().get('layout')!=='horizontal'}};inherits(ch,q);var bb=function(j,a,g,b,c,e){a[0]=restrict$1(a[0],g);a[1]=restrict$1(a[1],g);j=j||0;var l=g[1]-g[0];if(c!=null){c=restrict$1(c,[0,l])}if(e!=null){e=Math.max(e,c!=null?c:0)}if(b==='all'){c=e=Math.abs(a[1]-a[0]);b=0}var h=getSpanSign(a,b);a[b]+=j;var k=c||0;var i=g.slice();h.sign<0?i[0]+=k:i[1]-=k;a[b]=restrict$1(a[b],i);var f=getSpanSign(a,b);if(c!=null&&(f.sign!==h.sign||f.span<c)){a[1-b]=a[b]+h.sign*c}var f=getSpanSign(a,b);if(e!=null&&f.span>e){a[1-b]=a[b]+f.sign*e}return a};function getSpanSign(c,a){var b=c[a]-c[1-a];return {span:Math.abs(b),sign:b>0?-1:b<0?1:a?-1:1}}function restrict$1(b,a){return Math.min(a[1],Math.max(a[0],b))}var eT=each$1;var he=Math.min;var hc=Math.max;var gR=Math.floor;var lI=Math.ceil;var hC=round;var mS=Math.PI;function Parallel(a,b,c){this._axesMap=createHashMap();this._axesLayout={};this.dimensions=a.dimensions;this._rect;this._model=a;this._init(a,b,c)}Parallel.prototype={type:'parallel',constructor:Parallel,_init:function(a,e,f){var c=a.dimensions;var b=a.parallelAxisIndex;eT(c,function(i,k){var h=b[k];var c=e.getComponent('parallelAxis',h);var g=this._axesMap.set(i,new ch(i,createScaleByModel(c),[0,0],c.get('type'),h));var j=g.type==='category';g.onBand=j&&c.get('boundaryGap');g.inverse=c.get('inverse');c.axis=g;g.model=c;g.coordinateSystem=c.coordinateSystem=this},this)},update:function(a,b){this._updateAxesFromSeries(this._model,a)},containPoint:function(h){var a=this._makeLayoutInfo();var e=a.axisBase;var c=a.layoutBase;var b=a.pixelDimIndex;var g=h[1-b];var f=h[b];return g>=e&&g<=e+a.axisLength&&f>=c&&f<=c+a.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(b,a){a.eachSeries(function(c){if(!b.contains(c,a)){return}var e=c.getData();eT(this.dimensions,function(g){var f=this._axesMap.get(g);f.scale.unionExtentFromData(e,g);niceScaleExtent(f.scale,f.model)},this)},this)},resize:function(b,a){this._rect=getLayoutRect(b.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()});this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var c=this._model;var k=this._rect;var o=['x','y'];var n=['width','height'];var m=c.get('layout');var g=m==='horizontal'?0:1;var j=k[n[g]];var l=[0,j];var e=this.dimensions.length;var b=restrict(c.get('axisExpandWidth'),l);var i=restrict(c.get('axisExpandCount')||0,[0,e]);var s=c.get('axisExpandable')&&e>3&&e>i&&i>1&&b>0&&j>0;var a=c.get('axisExpandWindow');var f;if(!a){f=restrict(b*(i-1),l);var q=c.get('axisExpandCenter')||gR(e/2);a=[b*q-f/2];a[1]=a[0]+f}else {f=restrict(a[1]-a[0],l);a[1]=a[0]+f}var h=(j-f)/(e-i);h<3&&(h=0);var r=[gR(hC(a[0]/b,1))+1,lI(hC(a[1]/b,1))-1];var p=h/b*a[0];return {layout:m,pixelDimIndex:g,layoutBase:k[o[g]],layoutLength:j,axisBase:k[o[1-g]],axisLength:k[n[1-g]],axisExpandable:s,axisExpandWidth:b,axisCollapseWidth:h,axisExpandWindow:a,axisCount:e,winInnerIndices:r,axisExpandWindow0Pos:p}},_layoutAxes:function(){var e=this._rect;var c=this._axesMap;var f=this.dimensions;var a=this._makeLayoutInfo();var b=a.layout;c.each(function(c){var b=[0,a.axisLength];var e=c.inverse?1:0;c.setExtent(b[e],b[1-e])});eT(f,function(k,m){var g=(a.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(m,a);var h={horizontal:{x:g.position,y:a.axisLength},vertical:{x:0,y:g.position}};var l={horizontal:mS/2,vertical:0};var i=[h[b].x+e.x,h[b].y+e.y];var j=l[b];var f=create$1();rotate(f,f,j);translate(f,f,i);this._axesLayout[k]={position:i,rotation:j,transform:f,axisNameAvailableWidth:g.axisNameAvailableWidth,axisLabelShow:g.axisLabelShow,nameTruncateMaxWidth:g.nameTruncateMaxWidth,tickDirection:1,labelDirection:1,labelInterval:c.get(k).getLabelInterval()}},this)},getAxis:function(a){return this._axesMap.get(a)},dataToPoint:function(b,a){return this.axisCoordToPoint(this._axesMap.get(a).dataToCoord(b),a)},eachActiveState:function(f,h,j){var e=this.dimensions;var i=this._axesMap;var g=this.hasAxisBrushed();for(var c=0,o=f.count();c<o;c++){var l=f.getValues(e,c);var b;if(!g){b='normal'}else {b='active';for(var a=0,n=e.length;a<n;a++){var k=e[a];var m=i.get(k).model.getActiveState(l[a],a);if(m==='inactive'){b='inactive';break}}}h.call(j,b,c)}},hasAxisBrushed:function(){var c=this.dimensions;var e=this._axesMap;var b=!1;for(var a=0,f=c.length;a<f;a++){if(e.get(c[a]).model.getActiveState()!=='normal'){b=!0}}return b},axisCoordToPoint:function(b,c){var a=this._axesLayout[c];return applyTransform$1([b,0],a.transform)},getAxisLayout:function(a){return clone(this._axesLayout[a])},getSlidedAxisExpandWindow:function(l){var c=this._makeLayoutInfo();var m=c.pixelDimIndex;var a=c.axisExpandWindow.slice();var b=a[1]-a[0];var j=[0,c.axisExpandWidth*(c.axisCount-1)];if(!this.containPoint(l)){return {behavior:'none',axisExpandWindow:a}}var g=l[m]-c.layoutBase-c.axisExpandWindow0Pos;var e;var i='slide';var h=c.axisCollapseWidth;var f=this._model.get('axisExpandSlideTriggerArea');var k=f[0]!=null;if(h){if(k&&h&&g<b*f[0]){i='jump';e=g-b*f[2]}else {if(k&&h&&g>b*(1-f[0])){i='jump';e=g-b*(1-f[2])}else {(e=g-b*f[1])>=0&&(e=g-b*(1-f[1]))<=0&&(e=0)}}e*=c.axisExpandWidth/h;e?bb(e,a,j,'all'):i='none'}else {var b=a[1]-a[0];var n=j[1]*g/b;a=[hc(0,n-b/2)];a[1]=he(j[1],a[0]+b);a[0]=a[1]-b}return {axisExpandWindow:a,behavior:i}}};function restrict(b,a){return he(hc(b,a[0]),a[1])}function layoutAxisWithoutExpand(c,a){var b=a.layoutLength/(a.axisCount-1);return {position:b*c,axisNameAvailableWidth:b,axisLabelShow:!0}}function layoutAxisWithExpand(c,a){var k=a.layoutLength;var h=a.axisExpandWidth;var l=a.axisCount;var b=a.axisCollapseWidth;var i=a.winInnerIndices;var e;var g=b;var j=!1;var f;if(c<i[0]){e=c*b;f=b}else {if(c<=i[1]){e=a.axisExpandWindow0Pos+c*h-a.axisExpandWindow[0];g=h;j=!0}else {e=k-(l-1-c)*b;f=b}}return {position:e,axisNameAvailableWidth:g,axisLabelShow:j,nameTruncateMaxWidth:f}}function create$2(a,c){var b=[];a.eachComponent('parallel',function(f,g){var e=new Parallel(f,a,c);e.name='parallel_'+g;e.resize(f,c);f.coordinateSystem=e;e.model=f;b.push(e)});a.eachSeries(function(b){if(b.get('coordinateSystem')==='parallel'){var e=a.queryComponents({mainType:'parallel',index:b.get('parallelIndex'),id:b.get('parallelId')})[0];b.coordinateSystem=e.coordinateSystem}});return b}CoordinateSystemManager.register('parallel',{create:create$2});var gH=g.extend({type:'baseParallelAxis',axis:null,activeIntervals:[],getAreaSelectStyle:function(){return a1([['fill','color'],['lineWidth','borderWidth'],['stroke','borderColor'],['width','width'],['opacity','opacity']])(this.getModel('areaSelectStyle'))},setActiveIntervals:function(c){var a=this.activeIntervals=clone(c);if(a){for(var b=a.length-1;b>=0;b--){asc(a[b])}}},getActiveState:function(c){var a=this.activeIntervals;if(!a.length){return 'normal'}if(c==null){return 'inactive'}for(var b=0,e=a.length;b<e;b++){if(a[b][0]<=c&&c<=a[b][1]){return 'active'}}return 'inactive'}});var jI={type:'value',dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:'rgba(160,197,232)',color:'rgba(160,197,232)',opacity:0.3},realtime:!0,z:10};merge(gH.prototype,aD);function getAxisType$1(b,a){return a.type||(a.data?'category':'value')}a0('parallel',gH,getAxisType$1,jI);g.extend({type:'parallel',dependencies:['parallelAxis'],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:'box',defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:'horizontal',axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-0.15,0.05,0.4],axisExpandTriggerOn:'click',parallelAxisDefault:null},init:function(){g.prototype.init.apply(this,arguments);this.mergeOption({})},mergeOption:function(a){var b=this.option;a&&merge(b,a,!0);this._initDimensions()},contains:function(c,b){var a=c.get('parallelIndex');return a!=null&&b.getComponent('parallel',a)===this},setAxisExpand:function(a){each$1(['axisExpandable','axisExpandCenter','axisExpandCount','axisExpandWidth','axisExpandWindow'],function(b){if(a.hasOwnProperty(b)){this.option[b]=a[b]}},this)},_initDimensions:function(){var c=this.dimensions=[];var a=this.parallelAxisIndex=[];var b=filter(this.dependentModels.parallelAxis,function(a){return (a.get('parallelIndex')||0)===this.componentIndex},this);each$1(b,function(b){c.push('dim'+b.get('dim'));a.push(b.componentIndex)})}});var ky={type:'axisAreaSelect',event:'axisAreaSelected',update:'updateVisual'};registerAction(ky,function(a,b){b.eachComponent({mainType:'parallelAxis',query:a},function(c){c.axis.model.setActiveIntervals(a.intervals)})});registerAction('parallelAxisExpand',function(a,b){b.eachComponent({mainType:'parallel',query:a},function(c){c.setAxisExpand(a)})});var aq=curry;var V=each$1;var mR=map;var bG=Math.min;var bd=Math.max;var l3=Math.pow;var mi=10000;var iT=6;var iA=6;var fB='globalPan';var ke={w:[0,0],e:[0,1],n:[1,0],s:[1,1]};var lt={w:'ew',e:'ew',n:'ns',s:'ns',ne:'nesw',sw:'nesw',nw:'nwse',se:'nwse'};var fJ={brushStyle:{lineWidth:2,stroke:'rgba(0,0,0,0.3)',fill:'rgba(0,0,0,0.1)'},transformable:!0,brushMode:'single',removeOnClick:!1};var mk=0;function BrushController(c){if(a){assert(c)}s.call(this);this._zr=c;this.group=new b();this._brushType;this._brushOption;this._panels;this._track=[];this._dragging;this._covers=[];this._creatingCover;this._creatingPanel;this._enableGlobalPan;if(a){this._mounted}this._uid='brushController_'+mk++;this._handlers={};V(km,function(b,a){this._handlers[a]=bind(b,this)},this)}BrushController.prototype={constructor:BrushController,enableBrush:function(b){if(a){assert(this._mounted)}this._brushType&&doDisableBrush(this);b.brushType&&doEnableBrush(this,b);return this},setPanels:function(a){if(a&&a.length){var b=this._panels={};each$1(a,function(c){b[c.panelId]=clone(c)})}else {this._panels=null}return this},mount:function(b){b=b||{};if(a){this._mounted=!0}this._enableGlobalPan=b.enableGlobalPan;var c=this.group;this._zr.add(c);c.attr({position:b.position||[0,0],rotation:b.rotation||0,scale:b.scale||[1,1]});this._transform=c.getLocalTransform();return this},eachCover:function(b,a){V(this._covers,b,a)},updateCovers:function(c){if(a){assert(this._mounted)}c=map(c,function(a){return merge(clone(fJ),a,!0)});var h='\x00-brush-index-';var b=this._covers;var g=this._covers=[];var e=this;var f=this._creatingCover;(new DataDiffer(b,c,oldGetKey,getKey)).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();return this;function getKey(a,b){return (a.id!=null?a.id:h+b)+'-'+a.brushType}function oldGetKey(a,b){return getKey(a.__brushOption,b)}function addOrUpdate(h,a){var i=c[h];if(a!=null&&b[a]===f){g[h]=b[a]}else {var j=g[h]=a!=null?(b[a].__brushOption=i,b[a]):endCreating(e,createCover(e,i));updateCoverAfterCreation(e,j)}}function remove(a){if(b[a]!==f){e.group.remove(b[a])}}},unmount:function(){if(a){if(!this._mounted){return}}this.enableBrush(!1);clearCovers(this);this._zr.remove(this.group);if(a){this._mounted=!1}return this},dispose:function(){this.unmount();this.off()}};mixin(BrushController,s);function doEnableBrush(a,b){var c=a._zr;if(!a._enableGlobalPan){take(c,fB,a._uid)}V(a._handlers,function(f,e){c.on(e,f)});a._brushType=b.brushType;a._brushOption=merge(clone(fJ),b,!0)}function doDisableBrush(a){var b=a._zr;release(b,fB,a._uid);V(a._handlers,function(e,c){b.off(c,e)});a._brushType=a._brushOption=null}function createCover(c,a){var b=ca[a.brushType].createCover(c,a);b.__brushOption=a;updateZ$1(b,a);c.group.add(b);return b}function endCreating(c,a){var b=getCoverRenderer(a);if(b.endCreating){b.endCreating(c,a);updateZ$1(a,a.__brushOption)}return a}function updateCoverShape(c,a){var b=a.__brushOption;getCoverRenderer(a).updateCoverShape(c,a,b.range,b)}function updateZ$1(c,b){var a=b.z;a==null&&(a=mi);c.traverse(function(e){e.z=a;e.z2=a})}function updateCoverAfterCreation(b,a){getCoverRenderer(a).updateCommon(b,a);updateCoverShape(b,a)}function getCoverRenderer(a){return ca[a.__brushOption.brushType]}function getPanelByPoint(a,g,e){var b=a._panels;if(!b){return !0}var c;var f=a._transform;V(b,function(b){b.isTargetByCursor(g,e,f)&&(c=b)});return c}function getPanelByCover(c,e){var b=c._panels;if(!b){return !0}var a=e.__brushOption.panelId;return a!=null?b[a]:!0}function clearCovers(a){var b=a._covers;var c=b.length;V(b,function(b){a.group.remove(b)},a);b.length=0;return !!c}function trigger(a,b){var c=mR(a._covers,function(e){var c=e.__brushOption;var f=clone(c.range);return {brushType:c.brushType,panelId:c.panelId,range:f}});a.trigger('brush',c,{isEnd:!!b.isEnd,removeOnClick:!!b.removeOnClick})}function shouldShowCover(g){var a=g._track;if(!a.length){return !1}var f=a[a.length-1];var e=a[0];var b=f[0]-e[0];var c=f[1]-e[1];var h=l3(b*b+c*c,0.5);return h>iT}function getTrackEnds(a){var b=a.length-1;b<0&&(b=0);return [a[0],a[b]]}function createBaseRectCover(e,c,f,g){var a=new b();a.add(new k({name:'main',style:makeStyle(f),silent:!0,draggable:!0,cursor:'move',drift:aq(e,c,a,'nswe'),ondragend:aq(trigger,c,{isEnd:!0})}));V(g,function(b){a.add(new k({name:b,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:aq(e,c,a,b),ondragend:aq(trigger,c,{isEnd:!0})}))});return a}function updateBaseRect(b,c,h,m){var e=m.brushStyle.lineWidth||0;var a=bd(e,iA);var k=h[0][0];var l=h[1][0];var f=k-e/2;var g=l-e/2;var r=h[0][1];var s=h[1][1];var i=r-a+e/2;var j=s-a+e/2;var q=r-k;var o=s-l;var p=q+e;var n=o+e;updateRectShape(b,c,'main',k,l,q,o);if(m.transformable){updateRectShape(b,c,'w',f,g,a,n);updateRectShape(b,c,'e',i,g,a,n);updateRectShape(b,c,'n',f,g,p,a);updateRectShape(b,c,'s',f,j,p,a);updateRectShape(b,c,'nw',f,g,a,a);updateRectShape(b,c,'ne',i,g,a,a);updateRectShape(b,c,'sw',f,j,a,a);updateRectShape(b,c,'se',i,j,a,a)}}function updateCommon(f,b){var c=b.__brushOption;var a=c.transformable;var e=b.childAt(0);e.useStyle(makeStyle(c));e.attr({silent:!a,cursor:a?'move':'default'});V(['w','e','n','s','se','sw','ne','nw'],function(c){var e=b.childOfName(c);var g=getGlobalDirection(f,c);e&&e.attr({silent:!a,invisible:!a,cursor:a?lt[g]+'-resize':null})})}function updateRectShape(f,a,g,c,e,i,h){var b=a.childOfName(g);b&&b.setShape(pointsToRect(clipByPanel(f,a,[[c,e],[c+i,e+h]])))}function makeStyle(a){return defaults({strokeNoScale:!0},a.brushStyle)}function formatRectRange(f,g,c,e){var b=[bG(f,c),bG(g,e)];var a=[bd(f,c),bd(g,e)];return [[b[0],a[0]],[b[1],a[1]]]}function getTransform$1(a){return getTransform(a.group)}function getGlobalDirection(c,a){if(a.length>1){a=a.split('');var b=[getGlobalDirection(c,a[0]),getGlobalDirection(c,a[1])];(b[0]==='e'||b[0]==='w')&&b.reverse();return b.join('')}else {var f={w:'left',e:'right',n:'top',s:'bottom'};var e={left:'w',right:'e',top:'n',bottom:'s'};var b=transformDirection(f[a],getTransform$1(c));return e[b]}}function driftRect(g,f,b,e,i,j,k,l){var c=e.__brushOption;var a=g(c.range);var h=toLocalDelta(b,j,k);V(i.split(''),function(m){var c=ke[m];a[c[0]][c[1]]+=h[c[0]]});c.range=f(formatRectRange(a[0][0],a[1][0],a[0][1],a[1][1]));updateCoverAfterCreation(b,e);trigger(b,{isEnd:!1})}function driftPolygon(a,c,f,g,h){var e=c.__brushOption.range;var b=toLocalDelta(a,f,g);V(e,function(e){e[0]+=b[0];e[1]+=b[1]});updateCoverAfterCreation(a,c);trigger(a,{isEnd:!1})}function toLocalDelta(e,f,g){var b=e.group;var c=b.transformCoordToLocal(f,g);var a=b.transformCoordToLocal(0,0);return [c[0]-a[0],c[1]-a[1]]}function clipByPanel(b,e,c){var a=getPanelByCover(b,e);return a&&a!==!0?a.clipPath(c,b._transform):clone(c)}function pointsToRect(a){var b=bG(a[0][0],a[1][0]);var c=bG(a[0][1],a[1][1]);var e=bd(a[0][0],a[1][0]);var f=bd(a[0][1],a[1][1]);return {x:b,y:c,width:e-b,height:f-c}}function resetCursor(a,i,e){if(!a._brushType){return}var h=a._zr;var f=a._covers;var b=getPanelByPoint(a,i,e);if(!a._dragging){for(var c=0;c<f.length;c++){var g=f[c].__brushOption;if(b&&(b===!0||g.panelId===b.panelId)&&ca[g.brushType].contain(f[c],e[0],e[1])){return}}}b&&h.setCursorStyle('crosshair')}function preventDefault(b){var a=b.event;a.preventDefault&&a.preventDefault()}function mainShapeContain(a,b,c){return a.childOfName('main').contain(b,c)}function updateCoverByMouse(a,l,i,g){var b=a._creatingCover;var c=a._creatingPanel;var e=a._brushOption;var h;a._track.push(i.slice());if(shouldShowCover(a)||b){if(c&&!b){e.brushMode==='single'&&clearCovers(a);var f=clone(e);f.brushType=determineBrushType(f.brushType,c);f.panelId=c===!0?null:c.panelId;b=a._creatingCover=createCover(a,f);a._covers.push(b)}if(b){var j=ca[determineBrushType(a._brushType,c)];var k=b.__brushOption;k.range=j.getCreatingRange(clipByPanel(a,b,a._track));if(g){endCreating(a,b);j.updateCommon(a,b)}updateCoverShape(a,b);h={isEnd:g}}}else {if(g&&e.brushMode==='single'&&e.removeOnClick){if(getPanelByPoint(a,l,i)&&clearCovers(a)){h={isEnd:g,removeOnClick:!0}}}}return h}function determineBrushType(c,b){if(c==='auto'){if(a){assert(b&&b.defaultBrushType,'MUST have defaultBrushType when brushType is "atuo"')}return b.defaultBrushType}return c}var km={mousedown:function(a){if(this._dragging){handleDragEnd.call(this,a)}else {if(!a.target||!a.target.draggable){preventDefault(a);var b=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var c=this._creatingPanel=getPanelByPoint(this,a,b);if(c){this._dragging=!0;this._track=[b.slice()]}}}},mousemove:function(a){var b=this.group.transformCoordToLocal(a.offsetX,a.offsetY);resetCursor(this,a,b);if(this._dragging){preventDefault(a);var c=updateCoverByMouse(this,a,b,!1);c&&trigger(this,c)}},mouseup:handleDragEnd};function handleDragEnd(a){if(this._dragging){preventDefault(a);var c=this.group.transformCoordToLocal(a.offsetX,a.offsetY);var b=updateCoverByMouse(this,a,c,!0);this._dragging=!1;this._track=[];this._creatingCover=null;b&&trigger(this,b)}}var ca={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(b,a){return createBaseRectCover(aq(driftRect,function(c){return c},function(c){return c}),b,a,['w','e','n','s','se','sw','ne','nw'])},getCreatingRange:function(b){var a=getTrackEnds(b);return formatRectRange(a[1][0],a[1][1],a[0][0],a[0][1])},updateCoverShape:function(b,e,c,a){updateBaseRect(b,e,c,a)},updateCommon:updateCommon,contain:mainShapeContain},polygon:{createCover:function(e,c){var a=new b();a.add(new T({name:'main',style:makeStyle(c),silent:!0}));return a},getCreatingRange:function(a){return a},endCreating:function(b,a){a.remove(a.childAt(0));a.add(new J({name:'main',draggable:!0,drift:aq(driftPolygon,b,a),ondragend:aq(trigger,b,{isEnd:!0})}))},updateCoverShape:function(b,a,c,e){a.childAt(0).setShape({points:clipByPanel(b,a,c)})},updateCommon:updateCommon,contain:mainShapeContain}};function getLineRenderer(a){return {createCover:function(c,b){return createBaseRectCover(aq(driftRect,function(f){var e=[f,[0,100]];a&&e.reverse();return e},function(e){return e[a]}),c,b,[['w','e'],['n','s']][a])},getCreatingRange:function(c){var b=getTrackEnds(c);var f=bG(b[0][a],b[1][a]);var e=bd(b[0][a],b[1][a]);return [f,e]},updateCoverShape:function(b,g,j,i){var c;var e=getPanelByCover(b,g);if(e!==!0&&e.getLinearBrushOtherExtent){c=e.getLinearBrushOtherExtent(a,b._transform)}else {var h=b._zr;c=[0,[h.getWidth(),h.getHeight()][1-a]]}var f=[j,c];a&&f.reverse();updateBaseRect(b,g,f,i)},updateCommon:updateCommon,contain:mainShapeContain}}function makeRectPanelClipPath(a){a=normalizeRect(a);return function(b,c){return clipPointsByRect(b,a)}}function makeLinearBrushOtherExtent(a,b){a=normalizeRect(a);return function(g){var e=b!=null?b:g;var f=e?a.width:a.height;var c=e?a.x:a.y;return [c,c+(f||0)]}}function makeRectIsTargetByCursor(a,c,b){a=normalizeRect(a);return function(f,e,g){return a.contain(e[0],e[1])&&!onIrrelevantElement(f,c,b)}}function normalizeRect(a){return BoundingRect.create(a)}var la=['axisLine','axisTickLabel','axisName'];var ls=extendComponentView({type:'parallelAxis',init:function(b,a){ls.superApply(this,'init',arguments);(this._brushController=new BrushController(a.getZr())).on('brush',bind(this._onBrush,this))},render:function(a,j,k,e){if(fromAxisAreaSelect(a,j,e)){return}this.axisModel=a;this.api=k;this.group.removeAll();var m=this._axisGroup;this._axisGroup=new b();this.group.add(this._axisGroup);if(!a.get('show')){return}var g=getCoordSysModel(a,j);var o=g.coordinateSystem;var f=a.getAreaSelectStyle();var i=f.width;var p=a.axis.dim;var n=o.getAxisLayout(p);var h=extend({strokeContainThreshold:i},n);var c=new u(a,h);each$1(la,c.add,c);this._axisGroup.add(c.getGroup());this._refreshBrushController(h,f,a,g,i,k);var l=e&&e.animation===!1?null:a;groupTransition(m,this._axisGroup,l)},updateVisual:function(a,b,e,c){this._brushController&&this._brushController.updateCovers(getCoverInfoList(a))},_refreshBrushController:function(c,i,f,j,e,k){var b=f.axis.getExtent();var g=b[1]-b[0];var h=Math.min(30,Math.abs(g)*0.1);var a=BoundingRect.create({x:b[0],y:-e/2,width:g,height:e});a.x-=h;a.width+=2*h;this._brushController.mount({enableGlobalPan:!0,rotation:c.rotation,position:c.position}).setPanels([{panelId:'pl',clipPath:makeRectPanelClipPath(a),isTargetByCursor:makeRectIsTargetByCursor(a,k,j),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(a,0)}]).enableBrush({brushType:'lineX',brushStyle:i,removeOnClick:!0}).updateCovers(getCoverInfoList(f))},_onBrush:function(e,c){var a=this.axisModel;var b=a.axis;var f=map(e,function(a){return [b.coordToData(a.range[0],!0),b.coordToData(a.range[1],!0)]});if(!a.option.realtime===c.isEnd||c.removeOnClick){this.api.dispatchAction({type:'axisAreaSelect',parallelAxisId:a.id,intervals:f})}},dispose:function(){this._brushController.dispose()}});function fromAxisAreaSelect(b,c,a){return a&&a.type==='axisAreaSelect'&&c.findComponents({mainType:'parallelAxis',query:a})[0]===b}function getCoverInfoList(a){var b=a.axis;return map(a.activeIntervals,function(c){return {brushType:'lineX',panelId:'pl',range:[b.dataToCoord(c[0],!0),b.dataToCoord(c[1],!0)]}})}function getCoordSysModel(a,b){return b.getComponent('parallel',a.get('parallelIndex'))}var jB=5;extendComponentView({type:'parallel',render:function(a,c,b){this._model=a;this._api=b;if(!this._handlers){this._handlers={};each$1(mf,function(f,e){b.getZr().on(e,this._handlers[e]=bind(f,this))},this)}createOrUpdate(this,'_throttledDispatchExpand',a.get('axisExpandRate'),'fixRate')},dispose:function(b,a){each$1(this._handlers,function(e,c){a.getZr().off(c,e)});this._handlers=null},_throttledDispatchExpand:function(a){this._dispatchExpand(a)},_dispatchExpand:function(a){a&&this._api.dispatchAction(extend({type:'parallelAxisExpand'},a))}});var mf={mousedown:function(a){if(checkTrigger(this,'click')){this._mouseDownPoint=[a.offsetX,a.offsetY]}},mouseup:function(a){var b=this._mouseDownPoint;if(checkTrigger(this,'click')&&b){var e=[a.offsetX,a.offsetY];var f=Math.pow(b[0]-e[0],2)+Math.pow(b[1]-e[1],2);if(f>jB){return}var c=this._model.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]);c.behavior!=='none'&&this._dispatchExpand({axisExpandWindow:c.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(this._mouseDownPoint||!checkTrigger(this,'mousemove')){return}var c=this._model;var b=c.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);var a=b.behavior;a==='jump'&&this._throttledDispatchExpand.debounceNextCall(c.get('axisExpandDebounce'));this._throttledDispatchExpand(a==='none'?null:{axisExpandWindow:b.axisExpandWindow,animation:a==='jump'?null:!1})}};function checkTrigger(c,b){var a=c._model;return a.get('axisExpandable')&&a.get('axisExpandTriggerOn')===b}registerPreprocessor(iK);r.extend({type:'series.parallel',dependencies:['parallel'],visualColorAccessPath:'lineStyle.normal.color',getInitialData:function(j,e){var b=e.getComponent('parallel',this.get('parallelIndex'));var g=b.parallelAxisIndex;var a=j.data;var c=b.dimensions;var i=generateDataDims(c,a);var h=map(i,function(b,i){var f=indexOf(c,b);var h=f>=0&&e.getComponent('parallelAxis',g[f]);if(h&&h.get('type')==='category'){translateCategoryValue(h,b,a);return {name:b,type:'ordinal'}}else {if(f<0){return completeDimensions.guessOrdinal(a,i)?{name:b,type:'ordinal'}:b}else {return b}}});var f=new l(h,this);f.initData(a);if(this.option.progressive){this.option.animation=!1}return f},getRawIndicesByActiveState:function(c){var e=this.coordinateSystem;var b=this.getData();var a=[];e.eachActiveState(b,function(e,f){if(c===e){a.push(b.getRawIndex(f))}});return a},defaultOption:{zlevel:0,z:2,coordinateSystem:'parallel',parallelIndex:0,label:{normal:{show:!1},emphasis:{show:!1}},inactiveOpacity:0.05,activeOpacity:1,lineStyle:{normal:{width:1,opacity:0.45,type:'solid'}},progressive:!1,smooth:!1,animationEasing:'linear'}});function translateCategoryValue(c,f,e){var a=c.get('data');var b=convertDimNameToNumber(f);if(a&&a.length){each$1(e,function(g){if(!g){return}var h=indexOf(a,g[b]);g[b]=h>=0?h:NaN})}}function convertDimNameToNumber(a){return +a.replace('dim','')}function generateDataDims(f,g){var a=0;each$1(f,function(c){var b=convertDimNameToNumber(c);b>a&&(a=b)});var b=g[0];if(b&&b.length-1>a){a=b.length-1}var e=[];for(var c=0;c<=a;c++){e.push('dim'+c)}return e}var mv=0.3;var m$=Chart.extend({type:'parallel',init:function(){this._dataGroup=new b();this.group.add(this._dataGroup);this._data},render:function(a,c,e,b){this._renderForNormal(a,b)},dispose:function(){},_renderForNormal:function(b,h){var c=this._dataGroup;var a=b.getData();var f=this._data;var e=b.coordinateSystem;var g=e.dimensions;var k=b.option;var i=k.smooth?mv:null;a.diff(f).add(add).update(update).remove(remove).execute();updateElCommon(a,i);if(!this._data){var j=createGridClipShape$1(e,b,function(){setTimeout(function(){c.removeClipPath()})});c.setClipPath(j)}this._data=a;function add(f){addEl(a,c,f,g,e,null,i)}function update(c,k){var i=f.getItemGraphicEl(k);var l=createLinePoints(a,c,g,e);a.setItemGraphicEl(c,i);var j=h&&h.animation===!1?null:b;updateProps(i,{shape:{points:l}},j,c)}function remove(a){var e=f.getItemGraphicEl(a);c.remove(e)}},remove:function(){this._dataGroup&&this._dataGroup.removeAll();this._data=null}});function createGridClipShape$1(c,f,h){var e=c.model;var a=c.getRect();var b=new k({shape:{x:a.x,y:a.y,width:a.width,height:a.height}});var g=e.get('layout')==='horizontal'?'width':'height';b.setShape(g,0);initProps(b,{shape:{width:a.width,height:a.height}},f,h);return b}function createLinePoints(i,h,c,e){var f=[];for(var b=0;b<c.length;b++){var a=c[b];var g=i.get(a,h);if(!isEmptyValue(g,e.getAxis(a).type)){f.push(e.dataToPoint(g,a))}}return f}function addEl(b,f,a,e,g){var h=createLinePoints(b,a,e,g);var c=new T({shape:{points:h},silent:!0,z2:10});f.add(c);b.setItemGraphicEl(a,c)}function updateElCommon(a,e){var b=a.hostModel.getModel('lineStyle.normal');var c=b.getLineStyle();a.eachItemGraphicEl(function(g,f){if(a.hasItemOption){var i=a.getItemModel(f);var h=i.getModel('lineStyle.normal',b);c=h.getLineStyle(['color','stroke'])}g.useStyle(extend(c,{fill:null,stroke:a.getItemVisual(f,'color'),opacity:a.getItemVisual(f,'opacity')}));g.shape.smooth=e})}function isEmptyValue(a,b){return b==='category'?a==null:a==null||isNaN(a)}var iQ=['lineStyle','normal','opacity'];var j6=function(a){a.eachSeriesByType('parallel',function(b){var g=b.getModel('itemStyle.normal');var h=b.getModel('lineStyle.normal');var e=a.get('color');var m=h.get('color')||g.get('color')||e[b.seriesIndex%e.length];var f=b.get('inactiveOpacity');var i=b.get('activeOpacity');var k=b.getModel('lineStyle.normal').getLineStyle();var l=b.coordinateSystem;var c=b.getData();var j={normal:k.opacity,active:i,inactive:f};l.eachActiveState(c,function(e,g){var i=c.getItemModel(g);var h=j[e];if(e==='normal'){var f=i.get(iQ,!0);f!=null&&(h=f)}c.setItemVisual(g,'opacity',h)});c.setVisual('color',m)})};registerVisual(j6);var ku=r.extend({type:'series.sankey',layoutInfo:null,getInitialData:function(a){var b=a.edges||a.links;var c=a.data||a.nodes;if(c&&b){var e=fo(c,b,this,!0);return e.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(c,g,e){if(e==='edge'){var a=this.getDataParams(c,e);var b=a.data;var f=b.source+' -- '+b.target;if(a.value){f+=' : '+a.value}return encodeHTML(f)}return ku.superCall(this,'formatTooltip',c,g)},defaultOption:{zlevel:0,z:2,coordinateSystem:'view',layout:null,left:'5%',top:'5%',right:'20%',bottom:'5%',nodeWidth:20,nodeGap:8,layoutIterations:32,label:{normal:{show:!0,position:'right',color:'#000',fontSize:12},emphasis:{show:!0}},itemStyle:{normal:{borderWidth:1,borderColor:'#333'}},lineStyle:{normal:{color:'#314656',opacity:0.2,curveness:0.5},emphasis:{opacity:0.6}},animationEasing:'linear',animationDuration:1000}});var k3=extendShape({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0},buildPath:function(c,a){var b=a.extent/2;c.moveTo(a.x1,a.y1-b);c.bezierCurveTo(a.cpx1,a.cpy1-b,a.cpx2,a.cpy2-b,a.x2,a.y2-b);c.lineTo(a.x2,a.y2+b);c.bezierCurveTo(a.cpx2,a.cpy2+b,a.cpx1,a.cpy1+b,a.x1,a.y1+b);c.closePath()}});extendChartView({type:'sankey',_model:null,render:function(a,h,i){var e=a.getGraph();var b=this.group;var c=a.layoutInfo;var g=a.getData();var f=a.getData('edge');this._model=a;b.removeAll();b.attr('position',[c.x,c.y]);e.eachEdge(function(e){var c=new k3();c.dataIndex=e.dataIndex;c.seriesIndex=a.seriesIndex;c.dataType='edge';var n=e.getModel('lineStyle.normal');var j=n.get('curveness');var k=e.node1.getLayout();var o=e.node2.getLayout();var g=e.getLayout();c.shape.extent=Math.max(1,g.dy);var l=k.x+k.dx;var p=k.y+g.sy+g.dy/2;var m=o.x;var q=o.y+g.ty+g.dy/2;var r=l*(1-j)+m*j;var t=p;var s=l*j+m*(1-j);var u=q;c.setShape({x1:l,y1:p,x2:m,y2:q,cpx1:r,cpy1:t,cpx2:s,cpy2:u});c.setStyle(n.getItemStyle());switch(c.style.fill){case 'source':c.style.fill=e.node1.getVisual('color');break;case 'target':c.style.fill=e.node2.getVisual('color');break;}setHoverStyle(c,e.getModel('lineStyle.emphasis').getItemStyle());b.add(c);f.setItemGraphicEl(e.dataIndex,c)});e.eachNode(function(c){var l=c.getLayout();var f=c.getModel();var n=f.getModel('label.normal');var m=f.getModel('label.emphasis');var e=new k({shape:{x:l.x,y:l.y,width:c.getLayout().dx,height:c.getLayout().dy},style:f.getModel('itemStyle.normal').getItemStyle()});var j=c.getModel('itemStyle.emphasis').getItemStyle();setLabelStyle(e.style,j,n,m,{labelFetcher:a,labelDataIndex:c.dataIndex,defaultText:c.id,isRectText:!0});e.setStyle('fill',c.getVisual('color'));setHoverStyle(e,j);b.add(e);g.setItemGraphicEl(c.dataIndex,e);e.dataType='node'});if(!this._data&&a.get('animation')){b.setClipPath(createGridClipShape$2(b.getBoundingRect(),a,function(){b.removeClipPath()}))}this._data=a.getData()},dispose:function(){}});function createGridClipShape$2(a,c,e){var b=new k({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});initProps(b,{shape:{width:a.width+20,height:a.height+20}},c,e);return b}function nest(){var a=[];var b=[];function map$$1(b,f){if(f>=a.length){return b}var c=-1;var k=b.length;var j=a[f++];var g={};var e={};while(++c<k){var h=j(b[c]);var i=e[h];if(i){i.push(b[c])}else {e[h]=[b[c]]}}each$1(e,function(a,c){g[c]=map$$1(a,f)});return g}function entriesMap(g,e){if(e>=a.length){return g}var c=[];var f=b[e++];each$1(g,function(a,b){c.push({key:b,values:entriesMap(a,e)})});if(f){return c.sort(function(a,b){return f(a.key,b.key)})}else {return c}}return {key:function(b){a.push(b);return this},sortKeys:function(c){b[a.length-1]=c;return this},entries:function(a){return entriesMap(map$$1(a,0),0)}}}var kV=function(a,b,c){a.eachSeriesByType('sankey',function(e){var k=e.get('nodeWidth');var l=e.get('nodeGap');var f=getViewRect$3(e,b);e.layoutInfo=f;var o=f.width;var m=f.height;var h=e.getGraph();var g=h.nodes;var n=h.edges;computeNodeValues(g);var i=filter(g,function(f){return f.getLayout().value===0});var j=i.length!==0?0:e.get('layoutIterations');layoutSankey(g,n,k,l,o,m,j)})};function getViewRect$3(b,a){return getLayoutRect(b.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function layoutSankey(a,g,c,e,h,f,b){computeNodeBreadths(a,c,h);computeNodeDepths(a,g,f,e,b);computeEdgeDepths(a)}function computeNodeValues(a){each$1(a,function(b){var c=sum(b.outEdges,getEdgeValue);var e=sum(b.inEdges,getEdgeValue);var f=Math.max(c,e);b.setLayout({value:f},!0)})}function computeNodeBreadths(f,i,k){var a=f;var e=null;var c=0;var j=0;while(a.length){e=[];for(var g=0,m=a.length;g<m;g++){var b=a[g];b.setLayout({x:c},!0);b.setLayout({dx:i},!0);for(var h=0,l=b.outEdges.length;h<l;h++){e.push(b.outEdges[h].node2)}}a=e;++c}moveSinksRight(f,c);j=(k-i)/(c-1);scaleNodeBreadths(f,j)}function moveSinksRight(a,b){each$1(a,function(c){if(!c.outEdges.length){c.setLayout({x:b-1},!0)}})}function scaleNodeBreadths(a,b){each$1(a,function(c){var e=c.getLayout().x*b;c.setLayout({x:e},!0)})}function computeNodeDepths(g,h,c,b,f){var a=nest().key(function(a){return a.getLayout().x}).sortKeys(ascending).entries(g).map(function(a){return a.values});initializeNodeDepth(g,a,h,c,b);resolveCollisions(a,b,c);for(var e=1;f>0;f--){e*=0.99;relaxRightToLeft(a,e);resolveCollisions(a,b,c);relaxLeftToRight(a,e);resolveCollisions(a,b,c)}}function initializeNodeDepth(h,b,g,f,e){var a=[];each$1(b,function(c){var k=c.length;var i=0;each$1(c,function(a){i+=a.getLayout().value});var j=(f-(k-1)*e)/i;a.push(j)});a.sort(function(a,c){return a-c});var c=a[0];each$1(b,function(a){each$1(a,function(i,k){i.setLayout({y:k},!0);var j=i.getLayout().value*c;i.setLayout({dy:j},!0)})});each$1(g,function(a){var i=+a.getValue()*c;a.setLayout({dy:i},!0)})}function resolveCollisions(b,a,c){each$1(b,function(j){var e;var f;var h=0;var k=j.length;var g;j.sort(ascendingDepth);for(g=0;g<k;g++){e=j[g];f=h-e.getLayout().y;if(f>0){var i=e.getLayout().y+f;e.setLayout({y:i},!0)}h=e.getLayout().y+e.getLayout().dy+a}f=h-a-c;if(f>0){var i=e.getLayout().y-f;e.setLayout({y:i},!0);h=e.getLayout().y;for(g=k-2;g>=0;--g){e=j[g];f=e.getLayout().y+e.getLayout().dy+a-h;if(f>0){i=e.getLayout().y-f;e.setLayout({y:i},!0)}h=e.getLayout().y}}})}function relaxRightToLeft(a,b){each$1(a.slice().reverse(),function(c){each$1(c,function(e){if(e.outEdges.length){var g=sum(e.outEdges,weightedTarget)/sum(e.outEdges,getEdgeValue);var f=e.getLayout().y+(g-center$1(e))*b;e.setLayout({y:f},!0)}})})}function weightedTarget(a){return center$1(a.node2)*a.getValue()}function relaxLeftToRight(a,b){each$1(a,function(c){each$1(c,function(e){if(e.inEdges.length){var g=sum(e.inEdges,weightedSource)/sum(e.inEdges,getEdgeValue);var f=e.getLayout().y+(g-center$1(e))*b;e.setLayout({y:f},!0)}})})}function weightedSource(a){return center$1(a.node1)*a.getValue()}function computeEdgeDepths(a){each$1(a,function(b){b.outEdges.sort(ascendingTargetDepth);b.inEdges.sort(ascendingSourceDepth)});each$1(a,function(b){var c=0;var e=0;each$1(b.outEdges,function(e){e.setLayout({sy:c},!0);c+=e.getLayout().dy});each$1(b.inEdges,function(c){c.setLayout({ty:e},!0);e+=c.getLayout().dy})})}function ascendingTargetDepth(a,b){return a.node2.getLayout().y-b.node2.getLayout().y}function ascendingSourceDepth(a,b){return a.node1.getLayout().y-b.node1.getLayout().y}function sum(a,g){var e=0;var f=a.length;var b=-1;while(++b<f){var c=+g.call(a,a[b],b);if(!isNaN(c)){e+=c}}return e}function center$1(a){return a.getLayout().y+a.getLayout().dy/2}function ascendingDepth(a,b){return a.getLayout().y-b.getLayout().y}function ascending(a,b){return a<b?-1:a>b?1:a===b?0:NaN}function getEdgeValue(a){return a.getValue()}var kW=function(a,b){a.eachSeriesByType('sankey',function(e){var h=e.getGraph();var c=h.nodes;c.sort(function(c,f){return c.getLayout().value-f.getLayout().value});var g=c[0].getLayout().value;var f=c[c.length-1].getLayout().value;each$1(c,function(c){var l=new j({type:'color',mappingMethod:'linear',dataExtent:[g,f],visual:e.get('color')});var i=l.mapValueToVisual(c.getLayout().value);c.setVisual('color',i);var k=c.getModel();var h=k.get('itemStyle.normal.color');if(h!=null){c.setVisual('color',h)}})})};registerLayout(kV);registerVisual(kW);var k5=Path.extend({type:'whiskerInBox',shape:{},buildPath:function(e,b){for(var c in b){if(b.hasOwnProperty(c)&&c.indexOf('ends')===0){var a=b[c];e.moveTo(a[0][0],a[0][1]);e.lineTo(a[1][0],a[1][1])}}}});function WhiskerBox(c,e,f,a){b.call(this);this.bodyIndex;this.whiskerIndex;this.styleUpdater=f;this._createContent(c,e,a);this.updateData(c,e,a);this._seriesModel}var f5=WhiskerBox.prototype;f5._createContent=function(g,h,c){var a=g.getItemLayout(h);var b=a.chartLayout==='horizontal'?1:0;var e=0;this.add(new J({shape:{points:c?transInit(a.bodyEnds,b,a):a.bodyEnds},style:{strokeNoScale:!0},z2:100}));this.bodyIndex=e++;var f=map(a.whiskerEnds,function(e){return c?transInit(e,b,a):e});this.add(new k5({shape:makeWhiskerEndsShape(f),style:{strokeNoScale:!0},z2:100}));this.whiskerIndex=e++};function transInit(b,c,a){return map(b,function(e){e=e.slice();e[c]=a.initBaseline;return e})}function makeWhiskerEndsShape(b){var a={};each$1(b,function(c,e){a['ends'+e]=c});return a}f5.updateData=function(b,a,g){var e=this._seriesModel=b.hostModel;var f=b.getItemLayout(a);var c=O[g?'initProps':'updateProps'];c(this.childAt(this.bodyIndex),{shape:{points:f.bodyEnds}},e,a);c(this.childAt(this.whiskerIndex),{shape:makeWhiskerEndsShape(f.whiskerEnds)},e,a);this.styleUpdater.call(null,this,b,a)};inherits(WhiskerBox,b);function WhiskerBoxDraw(a){this.group=new b();this.styleUpdater=a}var fA=WhiskerBoxDraw.prototype;fA.updateData=function(a){var b=this.group;var c=this._data;var e=this.styleUpdater;a.diff(c).add(function(c){if(a.hasValue(c)){var f=new WhiskerBox(a,c,e,!0);a.setItemGraphicEl(c,f);b.add(f)}}).update(function(g,h){var f=c.getItemGraphicEl(h);if(!a.hasValue(g)){b.remove(f);return}if(!f){f=new WhiskerBox(a,g,e)}else {f.updateData(a,g)}b.add(f);a.setItemGraphicEl(g,f)}).remove(function(f){var e=c.getItemGraphicEl(f);e&&b.remove(e)}).execute();this._data=a};fA.remove=function(){var b=this.group;var a=this._data;this._data=null;a&&a.eachItemGraphicEl(function(a){a&&b.remove(a)})};var fW={_baseAxisDim:null,getInitialData:function(a,m){var b;var i=m.getComponent('xAxis',this.get('xAxisIndex'));var j=m.getComponent('yAxis',this.get('yAxisIndex'));var q=i.get('type');var r=j.get('type');var c;if(q==='category'){a.layout='horizontal';b=i.getCategories();c=!0}else {if(r==='category'){a.layout='vertical';b=j.getCategories();c=!0}else {a.layout=a.layout||'horizontal'}}var k=['x','y'];var h=a.layout==='horizontal'?0:1;var p=this._baseAxisDim=k[h];var o=k[1-h];var f=a.data;c&&each$1(f,function(b,c){if(b.value&&isArray(b.value)){b.value.unshift(c)}else {isArray(b)&&b.unshift(c)}});var g=this.defaultValueDimensions;var e=[{name:p,otherDims:{tooltip:!1},dimsDef:['base']},{name:o,dimsDef:g.slice()}];e=completeDimensions(e,f,{encodeDef:this.get('encode'),dimsDef:this.get('dimensions'),dimCount:g.length+1});var n=new l(e,this);n.initData(f,b?b.slice():null);return n},getBaseAxis:function(){var a=this._baseAxisDim;return this.ecModel.getComponent(a+'Axis',this.get(a+'AxisIndex')).axis}};var hg={init:function(){var a=this._whiskerBoxDraw=new WhiskerBoxDraw(this.getStyleUpdater());this.group.add(a.group)},render:function(a,b,c){this._whiskerBoxDraw.updateData(a.getData())},remove:function(a){this._whiskerBoxDraw.remove()}};var kc=r.extend({type:'series.boxplot',dependencies:['xAxis','yAxis','grid'],defaultValueDimensions:['min','Q1','median','Q3','max'],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:'cartesian2d',legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{normal:{color:'#fff',borderWidth:1},emphasis:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:'rgba(0,0,0,0.4)'}},animationEasing:'elasticOut',animationDuration:800}});mixin(kc,fW,!0);var k_=Chart.extend({type:'boxplot',getStyleUpdater:function(){return updateStyle$1},dispose:noop});mixin(k_,hg,!0);var iu=['itemStyle','normal'];var ig=['itemStyle','emphasis'];function updateStyle$1(a,h,i){var f=h.getItemModel(i);var j=f.getModel(iu);var e=h.getItemVisual(i,'color');var g=j.getItemStyle(['borderColor']);var b=a.childAt(a.whiskerIndex);b.style.set(g);b.style.stroke=e;b.dirty();var c=a.childAt(a.bodyIndex);c.style.set(g);c.style.stroke=e;c.dirty();var k=f.getModel(ig).getItemStyle();setHoverStyle(a,k)}var fP=['itemStyle','normal','borderColor'];var kg=function(a,c){var b=a.get('color');a.eachRawSeriesByType('boxplot',function(e){var g=b[e.seriesIndex%b.length];var f=e.getData();f.setVisual({legendSymbol:'roundRect',color:e.get(fP)||g});if(!a.isSeriesFiltered(e)){f.each(function(b){var g=f.getItemModel(b);f.setItemVisual(b,{color:g.get(fP,!0)})})}})};var bL=each$1;var kf=function(b){var a=groupSeriesByAxis(b);bL(a,function(a){var c=a.seriesModels;if(!c.length){return}calculateBase(a);bL(c,function(e,c){layoutSingleSeries(e,a.boxOffsetList[c],a.boxWidthList[c])})})};function groupSeriesByAxis(c){var b=[];var a=[];c.eachSeriesByType('boxplot',function(g){var f=g.getBaseAxis();var e=indexOf(a,f);if(e<0){e=a.length;a[e]=f;b[e]={axis:f,seriesModels:[]}}b[e].seriesModels.push(g)});return b}function calculateBase(c){var k;var i=c.axis;var a=c.seriesModels;var g=a.length;var o=c.boxWidthList=[];var n=c.boxOffsetList=[];var h=[];var b;if(i.type==='category'){b=i.getBandWidth()}else {var f=0;bL(a,function(a){f=Math.max(f,a.getData().count())});k=i.getExtent(),Math.abs(k[1]-k[0])/f}bL(a,function(e){var a=e.get('boxWidth');if(!isArray(a)){a=[a,a]}h.push([parsePercent$1(a[0],b)||0,parsePercent$1(a[1],b)||0])});var e=b*0.8-2;var l=e/g*0.3;var j=(e-l*(g-1))/g;var m=j/2-e/2;bL(a,function(b,a){n.push(m);m+=l+j;o.push(Math.min(Math.max(j,h[a][0]),h[a][1]))})}function layoutSingleSeries(f,m,k){var l=f.coordinateSystem;var e=f.getData();var b=k/2;var i=f.get('layout');var a=i==='horizontal'?0:1;var g=1-a;var j=['x','y'];var c=[];var h;each$1(e.dimensions,function(b){var l=e.getDimensionInfo(b);var i=l.coordDim;if(i===j[g]){c.push(b)}else {if(i===j[a]){h=b}}});if(h==null||c.length<5){return}e.each([h].concat(c),function(){var h=arguments;var p=h[0];var s=h[c.length+1];var o=getPoint(h[3]);var q=getPoint(h[1]);var r=getPoint(h[5]);var j=[[q,getPoint(h[2])],[r,getPoint(h[4])]];layEndLine(q);layEndLine(r);layEndLine(o);var n=[];addBodyEnd(j[0][1],0);addBodyEnd(j[1][1],1);e.setItemLayout(s,{chartLayout:i,initBaseline:o[g],median:o,bodyEnds:n,whiskerEnds:j});function getPoint(e){var c=[];c[a]=p;c[g]=e;var b;if(isNaN(p)||isNaN(e)){b=[NaN,NaN]}else {b=l.dataToPoint(c);b[a]+=m}return b}function addBodyEnd(g,h){var c=g.slice();var e=g.slice();c[a]+=b;e[a]-=b;h?n.push(c,e):n.push(e,c)}function layEndLine(e){var c=[e.slice(),e.slice()];c[0][a]-=b;c[1][a]+=b;j.push(c)}})}registerVisual(kg);registerLayout(kf);var i2=r.extend({type:'series.candlestick',dependencies:['xAxis','yAxis','grid'],defaultValueDimensions:['open','close','lowest','highest'],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:'cartesian2d',legendHoverLink:!0,hoverAnimation:!0,layout:null,itemStyle:{normal:{color:'#c23531',color0:'#314656',borderWidth:1,borderColor:'#c23531',borderColor0:'#314656'},emphasis:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,animationUpdate:!1,animationEasing:'linear',animationDuration:300},getShadowDim:function(){return 'open'},brushSelector:function(b,e,c){var a=e.getItemLayout(b);return c.rect(a.brushRect)}});mixin(i2,fW,!0);var jC=Chart.extend({type:'candlestick',getStyleUpdater:function(){return updateStyle$2},dispose:noop});mixin(jC,hg,!0);var iv=['itemStyle','normal'];var ih=['itemStyle','emphasis'];function updateStyle$2(a,c,e){var g=c.getItemModel(e);var k=g.getModel(iv);var j=c.getItemVisual(e,'color');var f=c.getItemVisual(e,'borderColor')||j;var h=k.getItemStyle(['color','color0','borderColor','borderColor0']);var i=a.childAt(a.whiskerIndex);i.useStyle(h);i.style.stroke=f;var b=a.childAt(a.bodyIndex);b.useStyle(h);b.style.fill=j;b.style.stroke=f;var l=g.getModel(ih).getItemStyle();setHoverStyle(a,l)}var kS=function(a){if(!a||!isArray(a.series)){return}each$1(a.series,function(b){if(isObject(b)&&b.type==='k'){b.type='candlestick'}})};var io=['itemStyle','normal','borderColor'];var im=['itemStyle','normal','borderColor0'];var i$=['itemStyle','normal','color'];var iZ=['itemStyle','normal','color0'];var jb=function(a,b){a.eachRawSeriesByType('candlestick',function(e){var c=e.getData();c.setVisual({legendSymbol:'roundRect'});if(!a.isSeriesFiltered(e)){c.each(function(f){var g=c.getItemModel(f);var h=c.getItemLayout(f).sign;c.setItemVisual(f,{color:g.get(h>0?i$:iZ),borderColor:g.get(h>0?io:im)})})}})};var gS=retrieve2;var ja=function(a){a.eachSeriesByType('candlestick',function(g){var m=g.coordinateSystem;var f=g.getData();var c=calculateCandleWidth(g,f);var k=g.get('layout');var b=k==='horizontal'?0:1;var e=1-b;var l=['x','y'];var h=[];var j;each$1(f.dimensions,function(c){var k=f.getDimensionInfo(c);var i=k.coordDim;if(i===l[e]){h.push(c)}else {if(i===l[b]){j=c}}});if(j==null||h.length<4){return}var i=0;f.each([j].concat(h),function(){var n=arguments;var u=n[0];var A=n[h.length+1];var l=n[1];var j=n[2];var s=n[3];var q=n[4];var z=Math.min(l,j);var y=Math.max(l,j);var r=getPoint(z);var p=getPoint(y);var w=getPoint(s);var v=getPoint(q);var x=[[subPixelOptimizePoint(v),subPixelOptimizePoint(p)],[subPixelOptimizePoint(w),subPixelOptimizePoint(r)]];var t=[];addBodyEnd(p,0);addBodyEnd(r,1);var o;if(l>j){o=-1}else {if(l<j){o=1}else {if(i>0){o=f.getItemModel(i-1).get()[2]<=j?1:-1}else {o=1}}}f.setItemLayout(A,{chartLayout:k,sign:o,initBaseline:l>j?p[e]:r[e],bodyEnds:t,whiskerEnds:x,brushRect:makeBrushRect()});++i;function getPoint(f){var c=[];c[b]=u;c[e]=f;return isNaN(u)||isNaN(f)?[NaN,NaN]:m.dataToPoint(c)}function addBodyEnd(h,i){var e=h.slice();var f=h.slice();e[b]=subPixelOptimize(e[b]+c/2,1,!1);f[b]=subPixelOptimize(f[b]-c/2,1,!0);i?t.push(e,f):t.push(f,e)}function makeBrushRect(){var f=getPoint(Math.min(l,j,s,q));var h=getPoint(Math.max(l,j,s,q));f[b]-=c/2;h[b]-=c/2;return {x:f[0],y:f[1],width:e?c:h[0]-f[0],height:e?h[1]-f[1]:c}}function subPixelOptimizePoint(c){c[b]=subPixelOptimize(c[b],1);return c}},!0)})};function calculateCandleWidth(b,i){var c=b.getBaseAxis();var e;var a=c.type==='category'?c.getBandWidth():(e=c.getExtent(),Math.abs(e[1]-e[0])/i.count());var g=parsePercent$1(gS(b.get('barMaxWidth'),a),a);var h=parsePercent$1(gS(b.get('barMinWidth'),1),a);var f=b.get('barWidth');return f!=null?parsePercent$1(f,a):Math.max(Math.min(a/2,g),h)}registerPreprocessor(kS);registerVisual(jb);registerLayout(ja);r.extend({type:'series.effectScatter',dependencies:['grid','polar'],getInitialData:function(b,a){var c=createListFromArray(b.data,this,a);return c},brushSelector:'point',defaultOption:{coordinateSystem:'cartesian2d',zlevel:0,z:2,legendHoverLink:!0,effectType:'ripple',progressive:0,showEffectOn:'render',rippleEffect:{period:4,scale:2.5,brushType:'fill'},symbolSize:10}});var fv=3;function normalizeSymbolSize$1(a){if(!isArray(a)){a=[+a,+a]}return a}function updateRipplePath(b,a){b.eachChild(function(c){c.attr({z:a.z,zlevel:a.zlevel,style:{stroke:a.brushType==='stroke'?a.color:null,fill:a.brushType==='fill'?a.color:null}})})}function EffectSymbol(e,f){b.call(this);var c=new SymbolClz$1(e,f);var a=new b();this.add(c);this.add(a);a.beforeUpdate=function(){this.attr(c.getScale())};this.updateData(e,f)}var aF=EffectSymbol.prototype;aF.stopEffectAnimation=function(){this.childAt(1).removeAll()};aF.startEffectAnimation=function(a){var g=a.symbolType;var h=a.color;var e=this.childAt(1);for(var c=0;c<fv;c++){var b=createSymbol(g,-1,-1,2,2,h);b.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[0.5,0.5]});var f=-c/fv*a.period+a.effectOffset;b.animate('',!0).when(a.period,{scale:[a.rippleScale/2,a.rippleScale/2]}).delay(f).start();b.animateStyle(!0).when(a.period,{opacity:0}).delay(f).start();e.add(b)}updateRipplePath(e,a)};aF.updateEffectAnimation=function(a){var f=this._effectCfg;var g=this.childAt(1);var c=['symbolType','period','rippleScale'];for(var b=0;b<c.length;b++){var e=c[b];if(f[e]!==a[e]){this.stopEffectAnimation();this.startEffectAnimation(a);return}}updateRipplePath(g,a)};aF.highlight=function(){this.trigger('emphasis')};aF.downplay=function(){this.trigger('normal')};aF.updateData=function(c,e){var n=c.hostModel;this.childAt(0).updateData(c,e);var f=this.childAt(1);var b=c.getItemModel(e);var o=c.getItemVisual(e,'symbol');var h=normalizeSymbolSize$1(c.getItemVisual(e,'symbolSize'));var l=c.getItemVisual(e,'color');f.attr('scale',h);f.traverse(function(a){a.attr({fill:l})});var g=b.getShallow('symbolOffset');if(g){var m=f.position;m[0]=parsePercent$1(g[0],h[0]);m[1]=parsePercent$1(g[1],h[1])}f.rotation=(b.getShallow('symbolRotate')||0)*Math.PI/180||0;var a={};a.showEffectOn=n.get('showEffectOn');a.rippleScale=b.get('rippleEffect.scale');a.brushType=b.get('rippleEffect.brushType');a.period=b.get('rippleEffect.period')*1000;a.effectOffset=e/c.count();a.z=b.getShallow('z')||0;a.zlevel=b.getShallow('zlevel')||0;a.symbolType=o;a.color=l;this.off('mouseover').off('mouseout').off('emphasis').off('normal');if(a.showEffectOn==='render'){this._effectCfg?this.updateEffectAnimation(a):this.startEffectAnimation(a);this._effectCfg=a}else {this._effectCfg=null;this.stopEffectAnimation();var k=this.childAt(0);var i=function(){k.highlight();if(a.showEffectOn!=='render'){this.startEffectAnimation(a)}};var j=function(){k.downplay();if(a.showEffectOn!=='render'){this.stopEffectAnimation()}};this.on('mouseover',i,this).on('mouseout',j,this).on('emphasis',i,this).on('normal',j,this)}this._effectCfg=a};aF.fadeOut=function(a){this.off('mouseover').off('mouseout').off('emphasis').off('normal');a&&a()};inherits(EffectSymbol,b);extendChartView({type:'effectScatter',init:function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},render:function(b,e,f){var c=b.getData();var a=this._symbolDraw;a.updateData(c);this.group.add(a.group)},updateLayout:function(){this._symbolDraw.updateLayout()},remove:function(b,a){this._symbolDraw&&this._symbolDraw.remove(a)},dispose:function(){}});registerVisual(curry(aK,'effectScatter','circle',null));registerLayout(curry(d1,'effectScatter'));function preprocessOption(c){var b=c.data;if(b&&b[0]&&b[0][0]&&b[0][0].coord){if(a){console.warn('Lines data configuration has been changed to'+' { coords:[[1,2],[2,3]] }')}c.data=map(b,function(a){var e=[a[0].coord,a[1].coord];var b={coords:e};if(a[0].name){b.fromName=a[0].name}if(a[1].name){b.toName=a[1].name}return mergeAll([b,a[0],a[1]])})}}var gK=r.extend({type:'series.lines',dependencies:['grid','polar'],visualColorAccessPath:'lineStyle.normal.color',init:function(a){preprocessOption(a);gK.superApply(this,'init',arguments)},mergeOption:function(a){preprocessOption(a);gK.superApply(this,'mergeOption',arguments)},getInitialData:function(c,f){if(a){var e=CoordinateSystemManager.get(c.coordinateSystem);if(!e){throw new Error('Unkown coordinate system '+c.coordinateSystem)}}var b=new l(['value'],this);b.hasItemOption=!1;b.initData(c.data,[],function(e,i,h,g){if(e instanceof Array){return NaN}else {b.hasItemOption=!0;var a=e.value;if(a!=null){return a instanceof Array?a[g]:a}}});return b},formatTooltip:function(g){var h=this.getData();var a=h.getItemModel(g);var f=a.get('name');if(f){return f}var c=a.get('fromName');var e=a.get('toName');var b=[];c!=null&&b.push(c);e!=null&&b.push(e);return encodeHTML(b.join(' > '))},defaultOption:{coordinateSystem:'geo',zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:['none','none'],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:'circle',symbolSize:3,loop:!0,trailLength:0.2},large:!1,largeThreshold:2000,polyline:!1,label:{normal:{show:!1,position:'end'}},lineStyle:{normal:{opacity:0.5}}}});function EffectLine(a,c,e){b.call(this);this.add(this.createLine(a,c,e));this._updateEffectSymbol(a,c)}var ai=EffectLine.prototype;ai.createLine=function(b,c,a){return new Line$1(b,c,a)};ai._updateEffectSymbol=function(f,h){var i=f.getItemModel(h);var c=i.getModel('effect');var b=c.get('symbolSize');var e=c.get('symbol');if(!isArray(b)){b=[b,b]}var g=c.get('color')||f.getItemVisual(h,'color');var a=this.childAt(1);if(this._symbolType!==e){this.remove(a);a=createSymbol(e,-0.5,-0.5,1,1,g);a.z2=100;a.culling=!0;this.add(a)}if(!a){return}a.setStyle('shadowColor',g);a.setStyle(c.getItemStyle(['color']));a.attr('scale',b);a.setColor(g);a.attr('scale',b);this._symbolType=e;this._updateEffectAnimation(f,c,h)};ai._updateEffectAnimation=function(j,c,l){var a=this.childAt(1);if(!a){return}var k=this;var n=j.getItemLayout(l);var b=c.get('period')*1000;var e=c.get('loop');var h=c.get('constantSpeed');var f=retrieve(c.get('delay'),function(a){return a/j.count()*b/3});var m=typeof f==='function';a.ignore=!0;this.updateAnimationPoints(a,n);if(h>0){b=this.getLineLength(a)/h*1000}if(b!==this._period||e!==this._loop){a.stopAnimation();var g=f;if(m){g=f(l)}if(a.__t>0){g=-b*a.__t}a.__t=0;var i=a.animate('',e).when(b,{__t:1}).delay(g).during(function(){k.updateSymbolPosition(a)});if(!e){i.done(function(){k.remove(a)})}i.start()}this._period=b;this._loop=e};ai.getLineLength=function(a){return aZ(a.__p1,a.__cp1)+aZ(a.__cp1,a.__p2)};ai.updateAnimationPoints=function(b,a){b.__p1=a[0];b.__p2=a[1];b.__cp1=a[2]||[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]};ai.updateData=function(a,b,c){this.childAt(0).updateData(a,b,c);this._updateEffectSymbol(a,b)};ai.updateSymbolPosition=function(a){var c=a.__p1;var e=a.__p2;var b=a.__cp1;var f=a.__t;var i=a.position;var h=quadraticAt;var g=quadraticDerivativeAt;i[0]=h(c[0],b[0],e[0],f);i[1]=h(c[1],b[1],e[1],f);var j=g(c[0],b[0],e[0],f);var k=g(c[1],b[1],e[1],f);a.rotation=-Math.atan2(k,j)-Math.PI/2;a.ignore=!1};ai.updateLayout=function(a,b){this.childAt(0).updateLayout(a,b);var c=a.getItemModel(b).getModel('effect');this._updateEffectAnimation(a,c,b)};inherits(EffectLine,b);function Polyline$2(c,e,a){b.call(this);this._createPolyline(c,e,a)}var cg=Polyline$2.prototype;cg._createPolyline=function(a,b,c){var e=a.getItemLayout(b);var f=new T({shape:{points:e}});this.add(f);this._updateCommonStl(a,b,c)};cg.updateData=function(a,b,e){var c=a.hostModel;var g=this.childAt(0);var f={shape:{points:a.getItemLayout(b)}};updateProps(g,f,c,b);this._updateCommonStl(a,b,e)};cg._updateCommonStl=function(b,h,a){var g=this.childAt(0);var e=b.getItemModel(h);var i=b.getItemVisual(h,'color');var f=a&&a.lineStyle;var c=a&&a.hoverLineStyle;if(!a||b.hasItemOption){f=e.getModel('lineStyle.normal').getLineStyle();c=e.getModel('lineStyle.emphasis').getLineStyle()}g.useStyle(defaults({strokeNoScale:!0,fill:'none',stroke:i},f));g.hoverStyle=c;setHoverStyle(this)};cg.updateLayout=function(a,c){var b=this.childAt(0);b.setShape('points',a.getItemLayout(c))};inherits(Polyline$2,b);function EffectPolyline(b,c,a){EffectLine.call(this,b,c,a);this._lastFrame=0;this._lastFramePercent=0}var b$=EffectPolyline.prototype;b$.createLine=function(b,c,a){return new Polyline$2(b,c,a)};b$.updateAnimationPoints=function(h,e){this._points=e;var c=[0];var b=0;for(var a=1;a<e.length;a++){var f=e[a-1];var g=e[a];b+=aZ(f,g);c.push(b)}if(b===0){return}for(var a=0;a<c.length;a++){c[a]/=b}this._offsets=c;this._length=b};b$.getLineLength=function(a){return this._length};b$.updateSymbolPosition=function(g){var e=g.__t;var b=this._points;var c=this._offsets;var f=b.length;if(!c){return}var h=this._lastFrame;var a;if(e<this._lastFramePercent){var i=Math.min(h+1,f-1);for(a=i;a>=0;a--){if(c[a]<=e){break}}a=Math.min(a,f-2)}else {for(var a=h;a<f;a++){if(c[a]>e){break}}a=Math.min(a-1,f-2)}lerp(g.position,b[a],b[a+1],(e-c[a])/(c[a+1]-c[a]));var j=b[a+1][0]-b[a][0];var k=b[a+1][1]-b[a][1];g.rotation=-Math.atan2(k,j)-Math.PI/2;this._lastFrame=a;this._lastFramePercent=e;g.ignore=!1};inherits(EffectPolyline,EffectLine);var jR=extendShape({shape:{polyline:!1,segs:[]},buildPath:function(b,f){var g=f.segs;var h=f.polyline;for(var e=0;e<g.length;e++){var a=g[e];if(h){b.moveTo(a[0][0],a[0][1]);for(var c=1;c<a.length;c++){b.lineTo(a[c][0],a[c][1])}}else {b.moveTo(a[0][0],a[0][1]);if(a.length>2){b.quadraticCurveTo(a[2][0],a[2][1],a[1][0],a[1][1])}else {b.lineTo(a[1][0],a[1][1])}}}},findDataIndex:function(f,g){var h=this.shape;var i=h.segs;var j=h.polyline;var e=Math.max(this.style.lineWidth,1);for(var b=0;b<i.length;b++){var a=i[b];if(j){for(var c=1;c<a.length;c++){if(containStroke$1(a[c-1][0],a[c-1][1],a[c][0],a[c][1],e,f,g)){return b}}}else {if(a.length>2){if(containStroke$3(a[0][0],a[0][1],a[2][0],a[2][1],a[1][0],a[1][1],e,f,g)){return b}}else {if(containStroke$1(a[0][0],a[0][1],a[1][0],a[1][1],e,f,g)){return b}}}}return -1}});function LargeLineDraw(){this.group=new b();this._lineEl=new jR()}var dM=LargeLineDraw.prototype;dM.updateData=function(b){this.group.removeAll();var a=this._lineEl;var c=b.hostModel;a.setShape({segs:b.mapArray(b.getItemLayout),polyline:c.get('polyline')});a.useStyle(c.getModel('lineStyle.normal').getLineStyle());var e=b.getVisual('color');if(e){a.setStyle('stroke',e)}a.setStyle('fill');a.seriesIndex=c.seriesIndex;a.on('mousemove',function(e){a.dataIndex=null;var c=a.findDataIndex(e.offsetX,e.offsetY);if(c>0){a.dataIndex=c}});this.group.add(a)};dM.updateLayout=function(b){var a=b.getData();this._lineEl.setShape({segs:a.mapArray(a.getItemLayout)})};dM.remove=function(){this.group.removeAll()};extendChartView({type:'lines',init:function(){},render:function(b,n,o){var m=b.getData();var e=this._lineDraw;var c=b.get('effect.show');var i=b.get('polyline');var f=b.get('large')&&m.count()>=b.get('largeThreshold');if(a){if(c&&f){console.warn('Large lines not support effect')}}if(c!==this._hasEffet||i!==this._isPolyline||f!==this._isLarge){if(e){e.remove()}e=this._lineDraw=f?new LargeLineDraw():new LineDraw(i?c?EffectPolyline:Polyline$2:c?EffectLine:Line$1);this._hasEffet=c;this._isPolyline=i;this._isLarge=f}var g=b.get('zlevel');var l=b.get('effect.trailLength');var h=o.getZr();var j=h.painter.getType()==='svg';if(!j){h.painter.getLayer(g).clear(!0)}if(this._lastZlevel!=null&&!j){h.configLayer(this._lastZlevel,{motionBlur:!1})}if(c&&l){if(a){var k=!1;n.eachSeries(function(a){if(a!==b&&a.get('zlevel')===g){k=!0}});k&&console.warn('Lines with trail effect should have an individual zlevel')}if(!j){h.configLayer(g,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+0.9,1),0)})}}this.group.add(e.group);e.updateData(m);this._lastZlevel=g},updateLayout:function(b,f,e){this._lineDraw.updateLayout(b);var a=e.getZr();var c=a.painter.getType()==='svg';if(!c){a.painter.getLayer(this._lastZlevel).clear(!0)}},remove:function(e,a){this._lineDraw&&this._lineDraw.remove(a,!0);var b=a.getZr();var c=b.painter.getType()==='svg';if(!c){b.painter.getLayer(this._lastZlevel).clear(!0)}},dispose:function(){}});var lj=function(b){b.eachSeriesByType('lines',function(c){var e=c.coordinateSystem;var f=c.getData();f.each(function(l){var i=f.getItemModel(l);var h=i.option instanceof Array?i.option:i.get('coords');if(a){if(!(h instanceof Array&&h.length>0&&h[0] instanceof Array)){throw new Error('Invalid coords '+JSON.stringify(h)+'. Lines must have 2d coords array in data item.')}}var g=[];if(c.get('polyline')){for(var k=0;k<h.length;k++){g.push(e.dataToPoint(h[k]))}}else {g[0]=e.dataToPoint(h[0]);g[1]=e.dataToPoint(h[1]);var j=i.get('lineStyle.normal.curveness');if(+j){g[2]=[(g[0][0]+g[1][0])/2-(g[0][1]-g[1][1])*j,(g[0][1]+g[1][1])/2-(g[1][0]-g[0][0])*j]}}f.setItemLayout(l,g)})})};function normalize$2(a){if(!(a instanceof Array)){a=[a,a]}return a}var lk=function(a){a.eachSeriesByType('lines',function(c){var b=c.getData();var f=normalize$2(c.get('symbol'));var e=normalize$2(c.get('symbolSize'));var g='lineStyle.normal.opacity'.split('.');b.setVisual('fromSymbol',f&&f[0]);b.setVisual('toSymbol',f&&f[1]);b.setVisual('fromSymbolSize',e&&e[0]);b.setVisual('toSymbolSize',e&&e[1]);b.setVisual('opacity',c.get(g));b.each(function(e){var i=b.getItemModel(e);var h=normalize$2(i.getShallow('symbol',!0));var f=normalize$2(i.getShallow('symbolSize',!0));var j=i.get(g);h[0]&&b.setItemVisual(e,'fromSymbol',h[0]);h[1]&&b.setItemVisual(e,'toSymbol',h[1]);f[0]&&b.setItemVisual(e,'fromSymbolSize',f[0]);f[1]&&b.setItemVisual(e,'toSymbolSize',f[1]);b.setItemVisual(e,'opacity',j)})})};registerLayout(lj);registerVisual(lk);r.extend({type:'series.heatmap',getInitialData:function(b,a){return createListFromArray(b.data,this,a)},defaultOption:{coordinateSystem:'cartesian2d',zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}});var jD=256;function Heatmap(){var a=a6();this.canvas=a;this.blurSize=30;this.pointSize=20;this.maxOpacity=1;this.minOpacity=0;this._gradientPixels={}}Heatmap.prototype={update:function(h,z,w,u,m,t){var x=this._getBrush();var q=this._getGradient(h,m,'inRange');var p=this._getGradient(h,m,'outOfRange');var o=this.pointSize+this.blurSize;var a=this.canvas;var i=a.getContext('2d');var A=h.length;a.width=z;a.height=w;for(var j=0;j<A;++j){var k=h[j];var B=k[0];var C=k[1];var y=k[2];var b=u(y);i.globalAlpha=b;i.drawImage(x,B-o,C-o)}if(!a.width||!a.height){return a}var n=i.getImageData(0,0,a.width,a.height);var e=n.data;var c=0;var v=e.length;var l=this.minOpacity;var s=this.maxOpacity;var r=s-l;while(c<v){var b=e[c+3]/256;var f=Math.floor(b*(jD-1))*4;if(b>0){var g=t(b)?q:p;b>0&&(b=b*r+l);e[c++]=g[f];e[c++]=g[f+1];e[c++]=g[f+2];e[c++]=g[f+3]*b*256}else {c+=4}}i.putImageData(n,0,0);return a},_getBrush:function(){var c=this._brushCanvas||(this._brushCanvas=a6());var e=this.pointSize+this.blurSize;var b=e*2;c.width=b;c.height=b;var a=c.getContext('2d');a.clearRect(0,0,b,b);a.shadowOffsetX=b;a.shadowBlur=this.blurSize;a.shadowColor='#000';a.beginPath();a.arc(-e,e,this.pointSize,0,Math.PI*2,!0);a.closePath();a.fill();return c},_getGradient:function(i,h,e){var g=this._gradientPixels;var a=g[e]||(g[e]=new Uint8ClampedArray(256*4));var b=[0,0,0,0];var c=0;for(var f=0;f<256;f++){h[e](f/255,!0,b);a[c++]=b[0];a[c++]=b[1];a[c++]=b[2];a[c++]=b[3]}return a}};function getIsInPiecewiseRange(b,a,g){var f=b[1]-b[0];a=map(a,function(c){return {interval:[(c.interval[0]-b[0])/f,(c.interval[1]-b[0])/f]}});var e=a.length;var c=0;return function(i){for(var f=c;f<e;f++){var h=a[f].interval;if(h[0]<=i&&i<=h[1]){c=f;break}}if(f===e){for(var f=c-1;f>=0;f--){var h=a[f].interval;if(h[0]<=i&&i<=h[1]){c=f;break}}}return f>=0&&f<e&&g[f]}}function getIsInContinuousRange(b,a){var c=b[1]-b[0];a=[(a[0]-b[0])/c,(a[1]-b[0])/c];return function(c){return c>=a[0]&&c<=a[1]}}function isGeoCoordSys(b){var a=b.dimensions;return a[0]==='lng'&&a[1]==='lat'}extendChartView({type:'heatmap',render:function(c,g,f){var e;g.eachComponent('visualMap',function(a){a.eachTargetSeries(function(b){if(b===c){e=a}})});if(a){if(!e){throw new Error('Heatmap must use with visualMap')}}this.group.removeAll();var b=c.coordinateSystem;if(b.type==='cartesian2d'||b.type==='calendar'){this._renderOnCartesianAndCalendar(b,c,f)}else {if(isGeoCoordSys(b)){this._renderOnGeo(b,c,e,f)}}},dispose:function(){},_renderOnCartesianAndCalendar:function(e,c,v){if(e.type==='cartesian2d'){var i=e.getAxis('x');var j=e.getAxis('y');if(a){if(!(i.type==='category'&&j.type==='category')){throw new Error('Heatmap on cartesian must have two category axes')}if(!(i.onBand&&j.onBand)){throw new Error('Heatmap on cartesian must have two axes with boundaryGap true')}}var r=i.getBandWidth();var q=j.getBandWidth()}var u=this.group;var b=c.getData();var n='itemStyle.normal';var l='itemStyle.emphasis';var t='label.normal';var s='label.emphasis';var h=c.getModel(n).getItemStyle(['color']);var g=c.getModel(l).getItemStyle();var p=c.getModel('label.normal');var m=c.getModel('label.emphasis');var o=e.type;var f=o==='cartesian2d'?[c.coordDimToDataDim('x')[0],c.coordDimToDataDim('y')[0],c.coordDimToDataDim('value')[0]]:[c.coordDimToDataDim('time')[0],c.coordDimToDataDim('value')[0]];b.each(function(a){var i;if(o==='cartesian2d'){if(isNaN(b.get(f[2],a))){return}var y=e.dataToPoint([b.get(f[0],a),b.get(f[1],a)]);i=new k({shape:{x:y[0]-r/2,y:y[1]-q/2,width:r,height:q},style:{fill:b.getItemVisual(a,'color'),opacity:b.getItemVisual(a,'opacity')}})}else {if(isNaN(b.get(f[1],a))){return}i=new k({z2:1,shape:e.dataToRect([b.get(f[0],a)]).contentShape,style:{fill:b.getItemVisual(a,'color'),opacity:b.getItemVisual(a,'opacity')}})}var j=b.getItemModel(a);if(b.hasItemOption){h=j.getModel(n).getItemStyle(['color']);g=j.getModel(l).getItemStyle();p=j.getModel(t);m=j.getModel(s)}var w=c.getRawValue(a);var x='-';if(w&&w[2]!=null){x=w[2]}setLabelStyle(h,g,p,m,{labelFetcher:c,labelDataIndex:a,defaultText:x,isRectText:!0});i.setStyle(h);setHoverStyle(i,b.hasItemOption?g:extend({},g));u.add(i);b.setItemGraphicEl(a,i)})},_renderOnGeo:function(f,e,a,m){var i=a.targetVisuals.inRange;var n=a.targetVisuals.outOfRange;var r=e.getData();var c=this._hmLayer||(this._hmLayer||new Heatmap());c.blurSize=e.get('blurSize');c.pointSize=e.get('pointSize');c.minOpacity=e.get('minOpacity');c.maxOpacity=e.get('maxOpacity');var b=f.getViewRect().clone();var o=f.getRoamTransform().transform;b.applyTransform(o);var g=Math.max(b.x,0);var h=Math.max(b.y,0);var t=Math.min(b.width+b.x,m.getWidth());var u=Math.min(b.height+b.y,m.getHeight());var l=t-g;var k=u-h;var q=r.mapArray(['lng','lat','value'],function(j,i,c){var b=f.dataToPoint([j,i]);b[0]-=g;b[1]-=h;b.push(c);return b});var j=a.getExtent();var p=a.type==='visualMap.continuous'?getIsInContinuousRange(j,a.option.range):getIsInPiecewiseRange(j,a.getPieceList(),a.option.selected);c.update(q,l,k,i.color.getNormalizer(),{inRange:i.color.getColorMapper(),outOfRange:n.color.getColorMapper()},p);var s=new ZImage({style:{width:l,height:k,x:g,y:h,image:c.canvas},silent:!0});this.group.add(s)}});var iS=gm.extend({type:'series.pictorialBar',dependencies:['grid'],defaultOption:{symbol:'circle',symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:'end',symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:'-100%',progressive:0,hoverAnimation:!1},getInitialData:function(a){a.stack=null;return iS.superApply(this,'getInitialData',arguments)}});var ij=['itemStyle','normal','borderWidth'];var gA=[{xy:'x',wh:'width',index:0,posDesc:['left','right']},{xy:'y',wh:'height',index:1,posDesc:['top','bottom']}];var dx=new aT();var m3=extendChartView({type:'pictorialBar',render:function(h,l,j){var f=this.group;var a=h.getData();var e=this._data;var i=h.coordinateSystem;var k=i.getBaseAxis();var g=!!k.isHorizontal();var c=i.grid.getRect();var b={ecSize:{width:j.getWidth(),height:j.getHeight()},seriesModel:h,coordSys:i,coordSysExtent:[[c.x,c.x+c.width],[c.y,c.y+c.height]],isHorizontal:g,valueDim:gA[+g],categoryDim:gA[1-g]};a.diff(e).add(function(c){if(!a.hasValue(c)){return}var i=getItemModel(a,c);var g=getSymbolMeta(a,c,i,b);var e=createBar(a,b,g);a.setItemGraphicEl(c,e);f.add(e);updateCommon$1(e,b,g)}).update(function(i,n){var c=e.getItemGraphicEl(n);if(!a.hasValue(i)){f.remove(c);return}var m=getItemModel(a,i);var g=getSymbolMeta(a,i,m,b);var k=getShapeStr(a,g);if(c&&k!==c.__pictorialShapeStr){f.remove(c);a.setItemGraphicEl(i,null);c=null}if(c){updateBar(c,b,g)}else {c=createBar(a,b,g,!0)}a.setItemGraphicEl(i,c);c.__pictorialSymbolMeta=g;f.add(c);updateCommon$1(c,b,g)}).remove(function(b){var a=e.getItemGraphicEl(b);a&&removeBar(e,b,a.__pictorialSymbolMeta.animationModel,a)}).execute();this._data=a;return this.group},dispose:noop,remove:function(b,e){var c=this.group;var a=this._data;if(b.get('animation')){if(a){a.eachItemGraphicEl(function(c){removeBar(a,c.dataIndex,b,c)})}}else {c.removeAll()}}});function getSymbolMeta(h,e,a,i){var g=h.getItemLayout(e);var f=a.get('symbolRepeat');var j=a.get('symbolClip');var o=a.get('symbolPosition')||'start';var p=a.get('symbolRotate');var n=(p||0)*Math.PI/180||0;var m=a.get('symbolPatternSize')||2;var l=a.isAnimationEnabled();var b={dataIndex:e,layout:g,itemModel:a,symbolType:h.getItemVisual(e,'symbol')||'circle',color:h.getItemVisual(e,'color'),symbolClip:j,symbolRepeat:f,symbolRepeatDirection:a.get('symbolRepeatDirection'),symbolPatternSize:m,rotation:n,animationModel:l?a:null,hoverAnimation:l&&a.get('hoverAnimation'),z2:a.getShallow('z',!0)||0};prepareBarLength(a,f,g,i,b);prepareSymbolSize(h,e,g,f,j,b.boundingLength,b.pxSign,m,i,b);prepareLineWidth(a,b.symbolScale,n,i,b);var k=b.symbolSize;var c=a.get('symbolOffset');if(isArray(c)){c=[parsePercent$1(c[0],k[0]),parsePercent$1(c[1],k[1])]}prepareLayoutInfo(a,k,g,f,j,c,o,b.valueLineWidth,b.boundingLength,b.repeatCutLength,i,b);return b}function prepareBarLength(m,k,i,h,j){var f=h.valueDim;var b=m.get('symbolBoundingData');var c=h.coordSys.getOtherAxis(h.coordSys.getBaseAxis());var g=c.toGlobalCoord(c.dataToCoord(0));var l=1-+(i[f.wh]<=0);var a;if(isArray(b)){var e=[convertToCoordOnAxis(c,b[0])-g,convertToCoordOnAxis(c,b[1])-g];e[1]<e[0]&&e.reverse();a=e[l]}else {if(b!=null){a=convertToCoordOnAxis(c,b)-g}else {if(k){a=h.coordSysExtent[f.index][l]-g}else {a=i[f.wh]}}}j.boundingLength=a;if(k){j.repeatCutLength=i[f.wh]}j.pxSign=a>0?1:a<0?-1:0}function convertToCoordOnAxis(a,b){return a.toGlobalCoord(a.dataToCoord(a.scale.parse(b)))}function prepareSymbolSize(o,l,m,j,p,i,n,f,e,h){var c=e.valueDim;var b=e.categoryDim;var g=Math.abs(m[b.wh]);var a=o.getItemVisual(l,'symbolSize');if(isArray(a)){a=a.slice()}else {if(a==null){a='100%'}a=[a,a]}a[b.index]=parsePercent$1(a[b.index],g);a[c.index]=parsePercent$1(a[c.index],j?g:Math.abs(i));h.symbolSize=a;var k=h.symbolScale=[a[0]/f,a[1]/f];k[c.index]*=(e.isHorizontal?-1:1)*n}function prepareLineWidth(c,b,e,g,f){var a=c.get(ij)||0;if(a){dx.attr({scale:b.slice(),rotation:e});dx.updateTransform();a/=dx.getLineScale();a*=b[g.valueDim.index]}f.valueLineWidth=a}function prepareLayoutInfo(C,y,e,j,E,p,w,B,o,t,r,f){var c=r.categoryDim;var b=r.valueDim;var A=f.pxSign;var k=Math.max(y[b.index]+B,0);var z=k;if(j){var s=Math.abs(o);var a=retrieve(C.get('symbolMargin'),'15%')+'';var m=!1;if(a.lastIndexOf('!')===a.length-1){m=!0;a=a.slice(0,a.length-1)}a=parsePercent$1(a,y[b.index]);var i=Math.max(k+a*2,0);var n=m?0:a*2;var u=isNumeric(j);var g=u?j:toIntTimes((s+n)/i);var D=s-g*k;a=D/2/(m?g:g-1);i=k+a*2;n=m?0:a*2;if(!u&&j!=='fixed'){g=t?toIntTimes((Math.abs(t)+n)/i):0}z=g*i-n;f.repeatTimes=g;f.symbolMargin=a}var q=A*(z/2);var h=f.pathPosition=[];h[c.index]=e[c.wh]/2;h[b.index]=w==='start'?q:w==='end'?o-q:o/2;if(p){h[0]+=p[0];h[1]+=p[1]}var v=f.bundlePosition=[];v[c.index]=e[c.xy];v[b.index]=e[b.xy];var x=f.barRectShape=extend({},e);x[b.wh]=A*Math.max(Math.abs(e[b.wh]),Math.abs(h[b.index]+q));x[c.wh]=e[c.wh];var l=f.clipShape={};l[c.xy]=-e[c.xy];l[c.wh]=r.ecSize[c.wh];l[b.xy]=0;l[b.wh]=e[b.wh]}function createPath(c){var a=c.symbolPatternSize;var b=createSymbol(c.symbolType,-a/2,-a/2,a,a,c.color);b.attr({culling:!0});b.type!=='image'&&b.setStyle({strokeNoScale:!0});return b}function createOrUpdateRepeatSymbols(f,l,a,g){var k=f.__pictorialBundle;var n=a.symbolSize;var m=a.valueLineWidth;var i=a.pathPosition;var j=l.valueDim;var c=a.repeatTimes||0;var b=0;var o=n[l.valueDim.index]+m+a.symbolMargin*2;eachPath(f,function(e){e.__pictorialAnimationIndex=b;e.__pictorialRepeatTimes=c;if(b<c){updateAttr(e,null,makeTarget(b),a,g)}else {updateAttr(e,null,{scale:[0,0]},a,g,function(){k.remove(e)})}updateHoverAnimation(e,a);b++});for(;b<c;b++){var e=createPath(a);e.__pictorialAnimationIndex=b;e.__pictorialRepeatTimes=c;k.add(e);var h=makeTarget(b);updateAttr(e,{position:h.position,scale:[0,0]},{scale:h.scale,rotation:h.rotation},a,g);e.on('mouseover',onMouseOver).on('mouseout',onMouseOut);updateHoverAnimation(e,a)}function makeTarget(h){var b=i.slice();var e=a.pxSign;var k=h;if(a.symbolRepeatDirection==='start'?e>0:e<0){k=c-1-h}b[j.index]=o*(k-c/2+0.5)+i[j.index];return {position:b,scale:a.symbolScale.slice(),rotation:a.rotation}}function onMouseOver(){eachPath(f,function(b){b.trigger('emphasis')})}function onMouseOut(){eachPath(f,function(b){b.trigger('normal')})}}function createOrUpdateSingleSymbol(c,g,a,e){var f=c.__pictorialBundle;var b=c.__pictorialMainPath;if(!b){b=c.__pictorialMainPath=createPath(a);f.add(b);updateAttr(b,{position:a.pathPosition.slice(),scale:[0,0],rotation:a.rotation},{scale:a.symbolScale.slice()},a,e);b.on('mouseover',onMouseOver).on('mouseout',onMouseOut)}else {updateAttr(b,null,{position:a.pathPosition.slice(),scale:a.symbolScale.slice(),rotation:a.rotation},a,e)}updateHoverAnimation(b,a);function onMouseOver(){this.trigger('emphasis')}function onMouseOut(){this.trigger('normal')}}function createOrUpdateBarRect(b,c,f){var e=extend({},c.barRectShape);var a=b.__pictorialBarRect;if(!a){a=b.__pictorialBarRect=new k({z2:2,shape:e,silent:!0,style:{stroke:'transparent',fill:'transparent',lineWidth:0}});b.add(a)}else {updateAttr(a,null,{shape:e},c,f)}}function createOrUpdateClip(f,l,b,j){if(b.symbolClip){var a=f.__pictorialClipPath;var c=extend({},b.clipShape);var e=l.valueDim;var g=b.animationModel;var h=b.dataIndex;if(a){updateProps(a,{shape:c},g,h)}else {c[e.wh]=0;a=new k({shape:c});f.__pictorialBundle.setClipPath(a);f.__pictorialClipPath=a;var i={};i[e.wh]=b.clipShape[e.wh];O[j?'updateProps':'initProps'](a,{shape:i},g,h)}}}function getItemModel(c,b){var a=c.getItemModel(b);a.getAnimationDelayParams=getAnimationDelayParams;a.isAnimationEnabled=isAnimationEnabled;return a}function getAnimationDelayParams(a){return {index:a.__pictorialAnimationIndex,count:a.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow('animation')}function updateHoverAnimation(c,b){c.off('emphasis').off('normal');var a=b.symbolScale.slice();b.hoverAnimation&&c.on('emphasis',function(){this.animateTo({scale:[a[0]*1.1,a[1]*1.1]},400,'elasticOut')}).on('normal',function(){this.animateTo({scale:a.slice()},400,'elasticOut')})}function createBar(h,f,c,g){var a=new b();var e=new b();a.add(e);a.__pictorialBundle=e;e.attr('position',c.bundlePosition.slice());if(c.symbolRepeat){createOrUpdateRepeatSymbols(a,f,c)}else {createOrUpdateSingleSymbol(a,f,c)}createOrUpdateBarRect(a,c,g);createOrUpdateClip(a,f,c,g);a.__pictorialShapeStr=getShapeStr(h,c);a.__pictorialSymbolMeta=c;return a}function updateBar(b,c,a){var e=a.animationModel;var f=a.dataIndex;var g=b.__pictorialBundle;updateProps(g,{position:a.bundlePosition.slice()},e,f);if(a.symbolRepeat){createOrUpdateRepeatSymbols(b,c,a,!0)}else {createOrUpdateSingleSymbol(b,c,a,!0)}createOrUpdateBarRect(b,a,!0);createOrUpdateClip(b,c,a,!0)}function removeBar(g,e,c,a){var f=a.__pictorialBarRect;f&&(f.style.text=null);var b=[];eachPath(a,function(f){b.push(f)});a.__pictorialMainPath&&b.push(a.__pictorialMainPath);a.__pictorialClipPath&&(c=null);each$1(b,function(b){updateProps(b,{scale:[0,0]},c,e,function(){a.parent&&a.parent.remove(a)})});g.setItemGraphicEl(e,null)}function getShapeStr(b,a){return [b.getItemVisual(a.dataIndex,'symbol')||'none',!!a.symbolRepeat,!!a.symbolClip].join(':')}function eachPath(a,c,b){each$1(a.__pictorialBundle.children(),function(e){e!==a.__pictorialBarRect&&c.call(b,e)})}function updateAttr(c,e,a,b,f,g){e&&c.attr(e);if(b.symbolClip&&!f){a&&c.attr(a)}else {a&&O[f?'updateProps':'initProps'](c,a,b.animationModel,b.dataIndex,g)}}function updateCommon$1(h,i,a){var c=a.color;var m=a.dataIndex;var b=a.itemModel;var k=b.getModel('itemStyle.normal').getItemStyle(['color']);var l=b.getModel('itemStyle.emphasis').getItemStyle();var f=b.getShallow('cursor');eachPath(h,function(b){b.setColor(c);b.setStyle(defaults({fill:c,opacity:a.opacity},k));setHoverStyle(b,l);f&&(b.cursor=f);b.z2=a.z2});var e={};var j=i.valueDim.posDesc[+(a.boundingLength>0)];var g=h.__pictorialBarRect;setLabel(g.style,e,b,c,i.seriesModel,m,j);setHoverStyle(g,e)}function toIntTimes(a){var b=Math.round(a);return Math.abs(a-b)<1.0E-4?b:Math.ceil(a)}registerLayout(curry(barLayoutGrid,'pictorialBar'));registerVisual(curry(aK,'pictorialBar','roundRect',null));var cp=function(f,e,a,b,c){q.call(this,f,e,a);this.type=b||'value';this.position=c||'bottom';this.orient=null;this._labelInterval=null};cp.prototype={constructor:cp,model:null,isHorizontal:function(){var a=this.position;return a==='top'||a==='bottom'},pointToData:function(b,a){return this.coordinateSystem.pointToData(b,a)[0]},toGlobalCoord:null,toLocalCoord:null};inherits(cp,q);function Single(a,b,c){this.dimension='single';this.dimensions=['single'];this._axis=null;this._rect;this._init(a,b,c);this.model=a}Single.prototype={type:'singleAxis',axisPointerEnabled:!0,constructor:Single,_init:function(a,f,g){var e=this.dimension;var b=new cp(e,createScaleByModel(a),[0,0],a.get('type'),a.get('position'));var c=b.type==='category';b.onBand=c&&a.get('boundaryGap');b.inverse=a.get('inverse');b.orient=a.get('orient');a.axis=b;b.model=a;b.coordinateSystem=this;this._axis=b},update:function(a,b){a.eachSeries(function(c){if(c.coordinateSystem===this){var e=c.getData();var f=this.dimension;this._axis.scale.unionExtentFromData(e,c.coordDimToDataDim(f));niceScaleExtent(this._axis.scale,this._axis.model)}},this)},resize:function(a,b){this._rect=getLayoutRect({left:a.get('left'),top:a.get('top'),right:a.get('right'),bottom:a.get('bottom'),width:a.get('width'),height:a.get('height')},{width:b.getWidth(),height:b.getHeight()});this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var b=this._rect;var a=this._axis;var c=a.isHorizontal();var e=c?[0,b.width]:[0,b.height];var f=a.reverse?1:0;a.setExtent(e[f],e[1-f]);this._updateAxisTransform(a,c?b.x:b.y)},_updateAxisTransform:function(b,a){var e=b.getExtent();var f=e[0]+e[1];var c=b.isHorizontal();b.toGlobalCoord=c?function(c){return c+a}:function(c){return f-c+a};b.toLocalCoord=c?function(c){return c-a}:function(c){return f-c+a}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return [this._axis]},getTooltipAxes:function(){return {baseAxes:[this.getAxis()]}},containPoint:function(a){var b=this.getRect();var c=this.getAxis();var e=c.orient;if(e==='horizontal'){return c.contain(c.toLocalCoord(a[0]))&&(a[1]>=b.y&&a[1]<=b.y+b.height)}else {return c.contain(c.toLocalCoord(a[1]))&&(a[0]>=b.y&&a[0]<=b.y+b.height)}},pointToData:function(b){var a=this.getAxis();return [a.coordToData(a.toLocalCoord(b[a.orient==='horizontal'?0:1]))]},dataToPoint:function(b){var c=this.getAxis();var a=this.getRect();var f=[];var e=c.orient==='horizontal'?0:1;if(b instanceof Array){b=b[0]}f[e]=c.toGlobalCoord(c.dataToCoord(+b));f[1-e]=e===0?a.y+a.height/2:a.x+a.width/2;return f}};function create$3(a,c){var b=[];a.eachComponent('singleAxis',function(f,g){var e=new Single(f,a,c);e.name='single_'+g;e.resize(f,c);f.coordinateSystem=e;b.push(e)});a.eachSeries(function(b){if(b.get('coordinateSystem')==='singleAxis'){var e=a.queryComponents({mainType:'singleAxis',index:b.get('singleAxisIndex'),id:b.get('singleAxisId')})[0];b.coordinateSystem=e&&e.coordinateSystem}});return b}CoordinateSystemManager.register('single',{create:create$3,dimensions:Single.prototype.dimensions});function layout$1(e,h){h=h||{};var m=e.coordinateSystem;var j=e.axis;var a={};var g=j.position;var i=j.orient;var c=m.getRect();var b=[c.x,c.x+c.width,c.y,c.y+c.height];var k={horizontal:{top:b[2],bottom:b[3]},vertical:{left:b[0],right:b[1]}};a.position=[i==='vertical'?k.vertical[g]:b[0],i==='horizontal'?k.horizontal[g]:b[3]];var n={horizontal:0,vertical:1};a.rotation=Math.PI/2*n[i];var l={top:-1,bottom:1,right:1,left:-1};a.labelDirection=a.tickDirection=a.nameDirection=l[g];if(e.get('axisTick.inside')){a.tickDirection=-a.tickDirection}if(retrieve(h.labelInside,e.get('axisLabel.inside'))){a.labelDirection=-a.labelDirection}var f=h.rotate;f==null&&(f=e.get('axisLabel.rotate'));a.labelRotation=g==='top'?-f:f;a.labelInterval=j.getLabelInterval();a.z2=1;return a}var kj=u.getInterval;var jr=u.ifIgnoreOnTick;var iV=['axisLine','axisTickLabel','axisName'];var f4='splitLine';var jU=F.extend({type:'singleAxis',axisPointerClass:'SingleAxisPointer',render:function(a,f,h,g){var e=this.group;e.removeAll();var c=layout$1(a);var b=new u(a,c);each$1(iV,b.add,b);e.add(b.getGroup());if(a.get(f4+'.show')){this['_'+f4](a,c.labelInterval)}jU.superCall(this,'render',a,f,h,g)},_splitLine:function(h,p){var i=h.axis;if(i.scale.isBlank()){return}var o=h.getModel('splitLine');var k=o.getModel('lineStyle');var n=k.get('width');var b=k.get('color');var r=kj(o,p);b=b instanceof Array?b:[b];var c=h.coordinateSystem.getRect();var q=i.isHorizontal();var g=[];var u=0;var l=i.getTicksCoords();var e=[];var f=[];var t=h.get('axisLabel.showMinLabel');var s=h.get('axisLabel.showMaxLabel');for(var a=0;a<l.length;++a){if(jr(i,a,r,l.length,t,s)){continue}var j=i.toGlobalCoord(l[a]);if(q){e[0]=j;e[1]=c.y;f[0]=j;f[1]=c.y+c.height}else {e[0]=c.x;e[1]=j;f[0]=c.x+c.width;f[1]=j}var m=u++%b.length;g[m]=g[m]||[];g[m].push(new L(subPixelOptimizeLine({shape:{x1:e[0],y1:e[1],x2:f[0],y2:f[1]},style:{lineWidth:n},silent:!0})))}for(var a=0;a<g.length;++a){this.group.add(ae(g[a],{style:{stroke:b[a%b.length],lineDash:k.getLineDash(n),lineWidth:n},silent:!0}))}}});var gI=g.extend({type:'singleAxis',layoutMode:'box',axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});var jJ={left:'5%',top:'5%',right:'5%',bottom:'5%',type:'value',position:'bottom',orient:'horizontal',axisLine:{show:!0,lineStyle:{width:2,type:'solid'}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:2}},axisLabel:{show:!0,interval:'auto'},splitLine:{show:!0,lineStyle:{type:'dashed',opacity:0.2}}};function getAxisType$2(b,a){return a.type||(a.data?'category':'value')}merge(gI.prototype,aD);a0('single',gI,getAxisType$2,jJ);var fy=function(j,k){var f=[];var i=j.seriesIndex;var a;if(i==null||!(a=k.getSeriesByIndex(i))){return {point:[]}}var h=a.getData();var b=queryDataIndex(h,j);if(b==null||isArray(b)){return {point:[]}}var g=h.getItemGraphicEl(b);var e=a.coordinateSystem;if(a.getTooltipPosition){f=a.getTooltipPosition(b)||[]}else {if(e&&e.dataToPoint){f=e.dataToPoint(h.getValues(map(e.dimensions,function(b){return a.coordDimToDataDim(b)[0]}),b,!0))||[]}else {if(g){var c=g.getBoundingRect().clone();c.applyTransform(g.transform);f=[c.x+c.width/2,c.y+c.height/2]}}}return {point:f,el:g}};var W=each$1;var hs=curry;var hS=eh();var k8=function(b,p,i){var q=b.currTrigger;var a=[b.x,b.y];var h=b;var k=b.dispatchAction||bind(i.dispatchAction,i);var c=p.getComponent('axisPointer').coordSysAxesInfo;if(!c){return}if(illegalPoint(a)){a=fy({seriesIndex:h.seriesIndex,dataIndex:h.dataIndex},p).point}var l=illegalPoint(a);var m=h.axesInfo;var g=c.axesInfo;var r=q==='leave'||illegalPoint(a);var e={};var f={};var j={list:[],map:{}};var o={showPointer:hs(showPointer,f),showTooltip:hs(showTooltip,j)};W(c.coordSysMap,function(h,g){var f=l||h.containPoint(a);W(c.coordSysAxesInfo[g],function(k,q){var n=k.axis;var j=findInputAxisInfo(m,k);if(!r&&f&&(!m||j)){var c=j&&j.value;if(c==null&&!l){c=n.pointToData(a)}c!=null&&processOnAxis(k,c,o,!1,e)}})});var n={};W(g,function(a,e){var c=a.linkGroup;if(c&&!f[e]){W(c.axesInfo,function(h,k){var j=f[k];if(h!==a&&j){var g=j.value;c.mapper&&(g=a.axis.scale.parse(c.mapper(g,makeMapperParam(h),makeMapperParam(a))));n[a.key]=g}})}});W(n,function(c,a){processOnAxis(g[a],c,o,!0,e)});updateModelActually(f,g,e);dispatchTooltipActually(j,a,b,k);dispatchHighDownActually(g,k,i);return e};function processOnAxis(a,b,h,j,e){var i=a.axis;if(i.scale.isBlank()||!i.containData(b)){return}if(!a.involveSeries){h.showPointer(a,b);return}var g=buildPayloadsBySeries(b,a);var f=g.payloadBatch;var c=g.snapToValue;if(f[0]&&e.seriesIndex==null){extend(e,f[0])}if(!j&&a.snap){if(i.containData(c)&&c!=null){b=c}}h.showPointer(a,b,f,e);h.showTooltip(a,g,c)}function buildPayloadsBySeries(a,g){var e=g.axis;var i=e.dim;var f=a;var b=[];var c=Number.MAX_VALUE;var h=-1;W(g.seriesModels,function(j,q){var m=j.coordDimToDataDim(i);var k;var l;if(j.getAxisTooltipData){var p=j.getAxisTooltipData(m,a,e);l=p.dataIndices;k=p.nestestValue}else {l=j.getData().indicesOfNearest(m[0],a,!1,e.type==='category'?0.5:null);if(!l.length){return}k=j.getData().get(m[0],l[0])}if(k==null||!isFinite(k)){return}var n=a-k;var o=Math.abs(n);if(o<=c){if(o<c||n>=0&&h<0){c=o;h=n;f=k;b.length=0}W(l,function(c){b.push({seriesIndex:j.seriesIndex,dataIndexInside:c,dataIndex:j.getData().getRawIndex(c)})})}});return {payloadBatch:b,snapToValue:f}}function showPointer(b,c,e,a){b[c.key]={value:e,payloadBatch:a}}function showTooltip(e,c,k,l){var h=k.payloadBatch;var j=c.axis;var f=j.model;var g=c.axisPointerModel;if(!c.triggerTooltip||!h.length){return}var a=c.coordSys.model;var i=makeKey(a);var b=e.map[i];if(!b){b=e.map[i]={coordSysId:a.id,coordSysIndex:a.componentIndex,coordSysType:a.type,coordSysMainType:a.mainType,dataByAxis:[]};e.list.push(b)}b.dataByAxis.push({axisDim:j.dim,axisIndex:f.componentIndex,axisType:f.type,axisId:f.id,value:l,valueLabelOpt:{precision:g.get('label.precision'),formatter:g.get('label.formatter')},seriesDataIndices:h.slice()})}function updateModelActually(c,e,b){var a=b.axesInfo=[];W(e,function(g,i){var f=g.axisPointerModel.option;var h=c[i];if(h){!g.useHandle&&(f.status='show');f.value=h.value;f.seriesDataIndices=(h.payloadBatch||[]).slice()}else {!g.useHandle&&(f.status='hide')}f.status==='show'&&a.push({axisDim:g.axis.dim,axisIndex:g.axis.model.componentIndex,value:f.value})})}function dispatchTooltipActually(a,c,f,e){if(illegalPoint(c)||!a.list.length){e({type:'hideTip'});return}var b=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};e({type:'showTip',escapeConnect:!0,x:c[0],y:c[1],tooltipOption:f.tooltipOption,position:f.position,dataIndexInside:b.dataIndexInside,dataIndex:b.dataIndex,seriesIndex:b.seriesIndex,dataByCoordSys:a.list})}function dispatchHighDownActually(i,j,e){var h=e.getZr();var g='axisPointerLastHighlights';var f=hS(h)[g]||{};var a=hS(h)[g]={};W(i,function(c,f){var b=c.axisPointerModel.option;b.status==='show'&&W(b.seriesDataIndices,function(b){var g=b.seriesIndex+' | '+b.dataIndex;a[g]=b})});var b=[];var c=[];each$1(f,function(b,f){!a[f]&&c.push(b)});each$1(a,function(a,c){!f[c]&&b.push(a)});c.length&&e.dispatchAction({type:'downplay',escapeConnect:!0,batch:c});b.length&&e.dispatchAction({type:'highlight',escapeConnect:!0,batch:b})}function findInputAxisInfo(c,e){for(var b=0;b<(c||[]).length;b++){var a=c[b];if(e.axis.dim===a.axisDim&&e.axis.model.componentIndex===a.axisIndex){return a}}}function makeMapperParam(e){var b=e.axis.model;var a={};var c=a.axisDim=e.axis.dim;a.axisIndex=a[c+'AxisIndex']=b.componentIndex;a.axisName=a[c+'AxisName']=b.name;a.axisId=a[c+'AxisId']=b.id;return a}function illegalPoint(a){return !a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}var mY=extendComponentModel({type:'axisPointer',coordSysAxesInfo:null,defaultOption:{show:'auto',triggerOn:null,zlevel:0,z:50,type:'line',snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:'#aaa',width:1,type:'solid'},shadowStyle:{color:'rgba(150,150,150,0.3)'},label:{show:!0,formatter:null,precision:'auto',margin:3,color:'#fff',padding:[5,7,5,7],backgroundColor:'auto',borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:'#aaa'},handle:{show:!1,icon:'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',size:45,margin:50,color:'#333',shadowBlur:3,shadowColor:'#aaa',shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var ah=eh();var ml=each$1;function register(c,b,e){if(f.node){return}var a=b.getZr();ah(a).records||(ah(a).records={});initGlobalListeners(a,b);var g=ah(a).records[c]||(ah(a).records[c]={});g.handler=e}function initGlobalListeners(a,b){if(ah(a).initialized){return}ah(a).initialized=!0;useHandler('click',curry(doEnter,'click'));useHandler('mousemove',curry(doEnter,'mousemove'));useHandler('globalout',onLeave);function useHandler(c,e){a.on(c,function(g){var f=makeDispatchAction(b);ml(ah(a).records,function(h){h&&e(h,g,f.dispatchAction)});dispatchTooltipFinally(f.pendings,b)})}}function dispatchTooltipFinally(b,f){var e=b.showTip.length;var c=b.hideTip.length;var a;if(e){a=b.showTip[e-1]}else {if(c){a=b.hideTip[c-1]}}if(a){a.dispatchAction=null;f.dispatchAction(a)}}function onLeave(b,c,a){b.handler('leave',null,a)}function doEnter(b,c,e,a){c.handler(b,e,a)}function makeDispatchAction(c){var b={showTip:[],hideTip:[]};var a=function(e){var f=b[e.type];if(f){f.push(e)}else {e.dispatchAction=a;c.dispatchAction(e)}};return {dispatchAction:a,pendings:b}}function unregister(a,e){if(f.node){return}var b=e.getZr();var c=(ah(b).records||{})[a];if(c){ah(b).records[a]=null}}var fX=extendComponentView({type:'axisPointer',render:function(c,e,f){var a=e.getComponent('tooltip');var b=c.get('triggerOn')||(a&&a.get('triggerOn')||'mousemove|click');register('axisPointer',f,function(g,a,h){if(b!=='none'&&(g==='leave'||b.indexOf(g)>=0)){h({type:'updateAxisPointer',currTrigger:g,x:a&&a.offsetX,y:a&&a.offsetY})}})},remove:function(b,a){unregister(a.getZr(),'axisPointer');fX.superApply(this._model,'remove',arguments)},dispose:function(b,a){unregister('axisPointer',a);fX.superApply(this._model,'dispose',arguments)}});var aX=eh();var hr=clone;var e0=bind;function BaseAxisPointer(){}BaseAxisPointer.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(f,c,j,n){var i=c.get('value');var h=c.get('status');this._axisModel=f;this._axisPointerModel=c;this._api=j;if(!n&&this._lastValue===i&&this._lastStatus===h){return}this._lastValue=i;this._lastStatus=h;var a=this._group;var g=this._handle;if(!h||h==='hide'){a&&a.hide();g&&g.hide();return}a&&a.show();g&&g.show();var e={};this.makeElOption(e,i,f,c,j);var l=e.graphicKey;if(l!==this._lastGraphicKey){this.clear(j)}this._lastGraphicKey=l;var m=this._moveAnimation=this.determineAnimation(f,c);if(!a){a=this._group=new b();this.createPointerEl(a,e,f,c);this.createLabelEl(a,e,f,c);j.getZr().add(a)}else {var k=curry(updateProps$1,c,m);this.updatePointerEl(a,e,k,c);this.updateLabelEl(a,e,k,c)}updateMandatoryProps(a,c,!0);this._renderHandle(i)},remove:function(a){this.clear(a)},dispose:function(a){this.clear(a)},determineAnimation:function(h,e){var a=e.get('animation');var b=h.axis;var f=b.type==='category';var i=e.get('snap');if(!i&&!f){return !1}if(a==='auto'||a==null){var c=this.animationThreshold;if(f&&b.getBandWidth()>c){return !0}if(i){var j=getAxisInfo(h).seriesDataCount;var g=b.getExtent();return Math.abs(g[0]-g[1])/j>c}return !1}return a===!0},makeElOption:function(c,e,b,a,f){},createPointerEl:function(c,b,g,f){var a=b.pointer;if(a){var e=aX(c).pointerEl=new O[a.type](hr(b.pointer));c.add(e)}},createLabelEl:function(c,a,f,e){if(a.label){var b=aX(c).labelEl=new k(hr(a.label));c.add(b);updateLabelShowHide(b,e)}},updatePointerEl:function(e,b,c){var a=aX(e).pointerEl;if(a){a.setStyle(b.pointer.style);c(a,{shape:b.pointer.shape})}},updateLabelEl:function(f,b,e,c){var a=aX(f).labelEl;if(a){a.setStyle(b.label.style);e(a,{shape:b.label.shape,position:b.label.position});updateLabelShowHide(a,c)}},_renderHandle:function(j){if(this._dragging||!this.updateHandleTransform){return}var e=this._axisPointerModel;var h=this._api.getZr();var a=this._handle;var c=e.getModel('handle');var g=e.get('status');if(!c.get('show')||!g||g==='hide'){a&&h.remove(a);this._handle=null;return}var f;if(!this._handle){f=!0;a=this._handle=createIcon(c.get('icon'),{cursor:'move',draggable:!0,onmousemove:function(a){aA(a.event)},onmousedown:e0(this._onHandleDragMove,this,0,0),drift:e0(this._onHandleDragMove,this),ondragend:e0(this._onHandleDragEnd,this)});h.add(a)}updateMandatoryProps(a,e,!1);var i=['color','borderColor','borderWidth','opacity','shadowColor','shadowBlur','shadowOffsetX','shadowOffsetY'];a.setStyle(c.getItemStyle(null,i));var b=c.get('size');if(!isArray(b)){b=[b,b]}a.attr('scale',[b[0]/2,b[1]/2]);createOrUpdate(this,'_doDispatchAxisPointer',c.get('throttle')||0,'fixRate');this._moveHandleToValue(j,f)},_moveHandleToValue:function(b,a){updateProps$1(this._axisPointerModel,!a&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(b,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(c,e){var a=this._handle;if(!a){return}this._dragging=!0;var b=this.updateHandleTransform(getHandleTransProps(a),[c,e],this._axisModel,this._axisPointerModel);this._payloadInfo=b;a.stopAnimation();a.attr(getHandleTransProps(b));aX(a).lastProp=null;this._doDispatchAxisPointer()},_doDispatchAxisPointer:function(){var c=this._handle;if(!c){return}var a=this._payloadInfo;var b=this._axisModel;this._api.dispatchAction({type:'updateAxisPointer',x:a.cursorPoint[0],y:a.cursorPoint[1],tooltipOption:a.tooltipOption,axesInfo:[{axisDim:b.axis.dim,axisIndex:b.componentIndex}]})},_onHandleDragEnd:function(c){this._dragging=!1;var a=this._handle;if(!a){return}var b=this._axisPointerModel.get('value');this._moveHandleToValue(b);this._api.dispatchAction({type:'hideTip'})},getHandleTransform:null,updateHandleTransform:null,clear:function(e){this._lastValue=null;this._lastStatus=null;var b=e.getZr();var a=this._group;var c=this._handle;if(b&&a){this._lastGraphicKey=null;a&&b.remove(a);c&&b.remove(c);this._group=null;this._handle=null;this._payloadInfo=null}},doClear:function(){},buildLabel:function(c,b,a){a=a||0;return {x:c[a],y:c[1-a],width:b[a],height:b[1-a]}}};BaseAxisPointer.prototype.constructor=BaseAxisPointer;function updateProps$1(c,e,a,b){if(!propsEqual(aX(a).lastProp,b)){aX(a).lastProp=b;e?updateProps(a,b,c):(a.stopAnimation(),a.attr(b))}}function propsEqual(a,b){if(isObject(a)&&isObject(b)){var c=!0;each$1(b,function(e,f){c=c&&propsEqual(a[f],e)});return !!c}else {return a===b}}function updateLabelShowHide(b,a){b[a.get('label.show')?'show':'hide']()}function getHandleTransProps(a){return {position:a.position.slice(),rotation:a.rotation||0}}function updateMandatoryProps(c,a,f){var e=a.get('z');var b=a.get('zlevel');c&&c.traverse(function(g){if(g.type!=='group'){e!=null&&(g.z=e);b!=null&&(g.zlevel=b);g.silent=f}})}enableClassExtend(BaseAxisPointer);function buildElStyle(c){var b=c.get('type');var e=c.getModel(b+'Style');var a;if(b==='line'){a=e.getLineStyle();a.fill=null}else {if(b==='shadow'){a=e.getAreaStyle();a.stroke=null}}return a}function buildLabelElOption(p,i,c,r,j){var q=c.get('value');var o=getValueLabel(q,i.axis,i.ecModel,c.get('seriesDataIndices'),{precision:c.get('label.precision'),formatter:c.get('label.formatter')});var a=c.getModel('label');var e=aE(a.get('padding')||0);var n=a.getFont();var l=getBoundingRect(o,n);var b=j.position;var h=l.width+e[1]+e[3];var g=l.height+e[0]+e[2];var m=j.align;m==='right'&&(b[0]-=h);m==='center'&&(b[0]-=h/2);var k=j.verticalAlign;k==='bottom'&&(b[1]-=g);k==='middle'&&(b[1]-=g/2);confineInContainer(b,h,g,r);var f=a.get('backgroundColor');if(!f||f==='auto'){f=i.get('axisLine.lineStyle.color')}p.label={shape:{x:0,y:0,width:h,height:g,r:a.get('borderRadius')},position:b.slice(),style:{text:o,textFont:n,textFill:a.getTextColor(),textPosition:'inside',fill:f,stroke:a.get('borderColor')||'transparent',lineWidth:a.get('borderWidth')||0,shadowBlur:a.get('shadowBlur'),shadowColor:a.get('shadowColor'),shadowOffsetX:a.get('shadowOffsetX'),shadowOffsetY:a.get('shadowOffsetY')},z2:10}}function confineInContainer(a,c,b,e){var g=e.getWidth();var f=e.getHeight();a[0]=Math.min(a[0]+c,g)-c;a[1]=Math.min(a[1]+b,f)-b;a[0]=Math.max(a[0],0);a[1]=Math.max(a[1],0)}function getValueLabel(e,f,i,h,g){var b=f.scale.getLabel(e,{precision:g.precision});var a=g.formatter;if(a){var c={value:getAxisRawValue(f,e),seriesData:[]};each$1(h,function(b){var j=i.getSeriesByIndex(b.seriesIndex);var k=b.dataIndexInside;var a=j&&j.getDataParams(k);a&&c.seriesData.push(a)});if(isString(a)){b=a.replace('{value}',b)}else {if(isFunction(a)){b=a(c)}}}return b}function getTransformedPosition(e,c,a){var b=create$1();rotate(b,b,a.rotation);translate(b,b,a.position);return applyTransform$1([e.dataToCoord(c),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],b)}function buildCartesianSingleLabelElOption(g,f,a,e,b,h){var c=u.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=b.get('label.margin');buildLabelElOption(f,e,b,h,{position:getTransformedPosition(e.axis,g,a),align:c.textAlign,verticalAlign:c.textVerticalAlign})}function makeLineShape(b,c,a){a=a||0;return {x1:b[a],y1:b[1-a],x2:c[a],y2:c[1-a]}}function makeRectShape(c,b,a){a=a||0;return {x:c[a],y:c[1-a],width:b[a],height:b[1-a]}}function makeSectorShape(c,e,f,g,a,b){return {cx:c,cy:e,r0:f,r:g,startAngle:a,endAngle:b,clockwise:!0}}var iH=BaseAxisPointer.extend({makeElOption:function(g,i,f,b,n){var a=f.axis;var j=a.grid;var c=b.get('type');var k=getCartesian(j,a).getOtherAxis(a).getGlobalExtent();var m=a.toGlobalCoord(a.dataToCoord(i,!0));if(c&&c!=='none'){var h=buildElStyle(b);var e=iR[c](a,m,k,h);e.style=h;g.graphicKey=e.type;g.pointer=e}var l=layout(j.model,f);buildCartesianSingleLabelElOption(i,g,l,f,b,n)},getHandleTransform:function(e,b,c){var a=layout(b.axis.grid.model,b,{labelInside:!1});a.labelMargin=c.get('handle.margin');return {position:getTransformedPosition(b.axis,e,a),rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(i,l,k,n){var c=k.axis;var m=c.grid;var h=c.getGlobalExtent(!0);var g=getCartesian(m,c).getOtherAxis(c).getGlobalExtent();var a=c.dim==='x'?0:1;var b=i.position;b[a]+=l[a];b[a]=Math.min(h[1],b[a]);b[a]=Math.max(h[0],b[a]);var e=(g[1]+g[0])/2;var f=[e,e];f[a]=b[a];var j=[{verticalAlign:'middle'},{align:'center'}];return {position:b,rotation:i.rotation,cursorPoint:f,tooltipOption:j[a]}}});function getCartesian(c,a){var b={};b[a.dim+'AxisIndex']=a.index;return c.getCartesian(b)}var iR={line:function(f,c,a,e){var b=makeLineShape([c,a[0]],[c,a[1]],getAxisDimIndex(f));subPixelOptimizeLine({shape:b,style:e});return {type:'Line',shape:b}},shadow:function(c,e,a,g){var b=c.getBandWidth();var f=a[1]-a[0];return {type:'Rect',shape:makeRectShape([e-b/2,a[0]],[b,f],getAxisDimIndex(c))}}};function getAxisDimIndex(a){return a.dim==='x'?0:1}F.registerAxisPointerClass('CartesianAxisPointer',iH);registerPreprocessor(function(a){if(a){(!a.axisPointer||a.axisPointer.length===0)&&(a.axisPointer={});var b=a.axisPointer.link;if(b&&!isArray(b)){a.axisPointer.link=[b]}}});registerProcessor(be.PROCESSOR.STATISTIC,function(a,b){a.getComponent('axisPointer').coordSysAxesInfo=collect(a,b)});registerAction({type:'updateAxisPointer',event:'updateAxisPointer',update:':updateAxisPointer'},k8);var h7=['x','y'];var mW=['width','height'];var i8=BaseAxisPointer.extend({makeElOption:function(f,j,e,a,n){var g=e.axis;var h=g.coordinateSystem;var k=getGlobalExtent(h,1-getPointDimIndex(g));var m=h.dataToPoint(j)[0];var b=a.get('type');if(b&&b!=='none'){var i=buildElStyle(a);var c=iF[b](g,m,k,i);c.style=i;f.graphicKey=c.type;f.pointer=c}var l=layout$1(e);buildCartesianSingleLabelElOption(j,f,l,e,a,n)},getHandleTransform:function(e,b,c){var a=layout$1(b,{labelInside:!1});a.labelMargin=c.get('handle.margin');return {position:getTransformedPosition(b.axis,e,a),rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(h,l,k,m){var j=k.axis;var i=j.coordinateSystem;var a=getPointDimIndex(j);var g=getGlobalExtent(i,a);var b=h.position;b[a]+=l[a];b[a]=Math.min(g[1],b[a]);b[a]=Math.max(g[0],b[a]);var f=getGlobalExtent(i,1-a);var c=(f[1]+f[0])/2;var e=[c,c];e[a]=b[a];return {position:b,rotation:h.rotation,cursorPoint:e,tooltipOption:{verticalAlign:'middle'}}}});var iF={line:function(f,c,a,e){var b=makeLineShape([c,a[0]],[c,a[1]],getPointDimIndex(f));subPixelOptimizeLine({shape:b,style:e});return {type:'Line',shape:b}},shadow:function(c,e,a,g){var b=c.getBandWidth();var f=a[1]-a[0];return {type:'Rect',shape:makeRectShape([e-b/2,a[0]],[b,f],getPointDimIndex(c))}}};function getPointDimIndex(a){return a.isHorizontal()?0:1}function getGlobalExtent(c,a){var b=c.getRect();return [b[h7[a]],b[h7[a]]+b[mW[a]]]}F.registerAxisPointerClass('SingleAxisPointer',i8);extendComponentView({type:'single'});var dy=2;var jl=r.extend({type:'series.themeRiver',dependencies:['singleAxis'],nameMap:null,init:function(a){jl.superApply(this,'init',arguments);this.legendDataProvider=function(){return this.getRawData()}},fixData:function(a){var e=a.length;var o=nest().key(function(b){return b[2]}).entries(a);var b=map(o,function(b){return {name:b.key,dataList:b.values}});var m=b.length;var h=-1;var i=-1;for(var f=0;f<m;++f){var n=b[f].dataList.length;if(n>h){h=n;i=f}}for(var c=0;c<m;++c){if(c===i){continue}var r=b[c].name;for(var j=0;j<h;++j){var k=b[i].dataList[j][0];var p=b[c].dataList.length;var l=-1;for(var g=0;g<p;++g){var q=b[c].dataList[g][0];if(q===k){l=g;break}}if(l===-1){a[e]=[];a[e][0]=k;a[e][1]=0;a[e][2]=r;e++}}}return a},getInitialData:function(n,m){var c=[];var j=m.queryComponents({mainType:'singleAxis',index:this.get('singleAxisIndex'),id:this.get('singleAxisId')})[0];var e=j.get('type');c=[{name:'time',type:e==='category'?'ordinal':e==='time'?'time':'float'},{name:'value',type:'float'},{name:'name',type:'ordinal'}];var k=filter(n.data,function(a){return a[2]!==undefined});var a=this.fixData(k||[]);var f=[];var g=this.nameMap=createHashMap();var h=0;for(var b=0;b<a.length;++b){f.push(a[b][dy]);if(!g.get(a[b][dy])){g.set(a[b][dy],h);h++}}c=completeDimensions(c,a);var i=new l(c,this);i.initData(a,f);return i},coordDimToDataDim:function(a){return ['time']},getLayerSeries:function(){var a=this.getData();var h=a.count();var f=[];for(var b=0;b<h;++b){f[b]=b}var g=nest().key(function(b){return a.get('name',b)}).entries(f);var c=map(g,function(a){return {name:a.key,indices:a.values}});for(var e=0;e<c.length;++e){c[e].indices.sort(comparer)}function comparer(b,c){return a.get('time',b)-a.get('time',c)}return c},getAxisTooltipData:function(a,n,p){if(!isArray(a)){a=a?[a]:[]}var o=this.getData();var c=this.getLayerSeries();var i=[];var l=c.length;var f;for(var b=0;b<l;++b){var j=Number.MAX_VALUE;var g=-1;var m=c[b].indices.length;for(var e=0;e<m;++e){var h=o.get(a[0],c[b].indices[e]);var k=Math.abs(h-n);if(k<=j){f=h;j=k;g=c[b].indices[e]}}i.push(g)}return {dataIndices:i,nestestValue:f}},formatTooltip:function(b){var c=this.getData();var e=c.get('name',b);var a=c.get('value',b);if(isNaN(a)||a==null){a='-'}return encodeHTML(e+' : '+a)},defaultOption:{zlevel:0,z:2,coordinateSystem:'singleAxis',boundaryGap:['10%','10%'],singleAxisIndex:0,animationEasing:'linear',label:{normal:{margin:4,textAlign:'right',show:!0,position:'left',color:'#000',fontSize:11},emphasis:{show:!0}}}});extendChartView({type:'themeRiver',init:function(){this._layers=[]},render:function(a,m,n){var c=a.getData();var f=this.group;var h=a.getLayerSeries();var i=c.getLayout('layoutInfo');var l=i.rect;var j=i.boundaryGap;f.attr('position',[0,l.y+j[0]]);function keyGetter(b){return b.name}var k=new DataDiffer(this._layersSeries||[],h,keyGetter,keyGetter);var g={};k.add(bind(process,this,'add')).update(bind(process,this,'update')).remove(bind(process,this,'remove')).execute();function process(y,q,E){var w=this._layers;if(y==='remove'){f.remove(w[q]);return}var t=[];var u=[];var z;var k=h[q].indices;for(var l=0;l<k.length;l++){var v=c.getItemLayout(k[l]);var B=v.x;var A=v.y0;var F=v.y;t.push([B,A]);u.push([B,A+F]);z=c.getItemVisual(k[l],'color')}var i;var p;var o=c.getItemLayout(k[0]);var s=c.getItemModel(k[l-1]);var r=s.getModel('label.normal');var x=r.get('margin');if(y==='add'){var j=g[q]=new b();i=new g2({shape:{points:t,stackedOnPoints:u,smooth:0.4,stackedOnSmooth:0.4,smoothConstraint:!1},z2:0});p=new e({style:{x:o.x-x,y:o.y0+o.y/2}});j.add(i);j.add(p);f.add(j);i.setClipPath(createGridClipShape$3(i.getBoundingRect(),a,function(){i.removeClipPath()}))}else {var j=w[E];i=j.childAt(0);p=j.childAt(1);f.add(j);g[q]=j;updateProps(i,{shape:{points:t,stackedOnPoints:u}},a);updateProps(p,{style:{x:o.x-x,y:o.y0+o.y/2}},a)}var C=s.getModel('itemStyle.emphasis');var D=s.getModel('itemStyle.normal');setTextStyle(p.style,r,{text:r.get('show')?a.getFormattedLabel(k[l-1],'normal')||c.getName(k[l-1]):null,textVerticalAlign:'middle'});i.setStyle(extend({fill:z},D.getItemStyle(['color'])));setHoverStyle(i,C.getItemStyle())}this._layersSeries=h;this._layers=g},dispose:function(){}});function createGridClipShape$3(a,c,e){var b=new k({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});initProps(b,{shape:{width:a.width+20,height:a.height+20}},c,e);return b}var jy=function(a,b){a.eachSeriesByType('themeRiver',function(f){var h=f.getData();var i=f.coordinateSystem;var g={};var e=i.getRect();g.rect=e;var c=f.get('boundaryGap');var l=i.getAxis();g.boundaryGap=c;if(l.orient==='horizontal'){c[0]=parsePercent$1(c[0],e.height);c[1]=parsePercent$1(c[1],e.height);var j=e.height-c[0]-c[1];themeRiverLayout$1(h,f,j)}else {c[0]=parsePercent$1(c[0],e.width);c[1]=parsePercent$1(c[1],e.width);var k=e.width-c[0]-c[1];themeRiverLayout$1(h,f,k)}h.setLayout('layoutInfo',g)})};function themeRiverLayout$1(f,i,m){if(!f.count()){return}var l=i.coordinateSystem;var e=i.getLayerSeries();var c=map(e,function(a){return map(a.indices,function(b){var c=l.dataToPoint(f.get('time',b));c[1]=f.get('value',b);return c})});var j=computeBaseline(c);var k=j.y0;var h=m/j.max;var o=e.length;var n=e[0].indices.length;var g;for(var a=0;a<n;++a){g=k[a]*h;f.setItemLayout(e[0].indices[a],{layerIndex:0,x:c[0][a][0],y0:g,y:c[0][a][1]*h});for(var b=1;b<o;++b){g+=c[b-1][a][1]*h;f.setItemLayout(e[b].indices[a],{layerIndex:b,x:c[b][a][0],y0:g,y:c[b][a][1]*h})}}}function computeBaseline(h){var n=h.length;var f=h[0].length;var i=[];var j=[];var a=0;var b;var g={};for(var k=0;k<f;++k){for(var l=0,b=0;l<n;++l){b+=h[l][k][1]}if(b>a){a=b}i.push(b)}for(var c=0;c<f;++c){j[c]=(a-i[c])/2}a=0;for(var e=0;e<f;++e){var m=i[e]+j[e];if(m>a){a=m}}g.y0=j;g.max=a;return g}var jz=function(a){a.eachSeriesByType('themeRiver',function(b){var e=b.getData();var c=b.getRawData();var f=b.get('color');var g=createHashMap();e.each(function(c){g.set(e.getRawIndex(c),c)});c.each(function(h){var k=c.getName(h);var i=f[(b.nameMap.get(k)-1)%f.length];c.setItemVisual(h,'color',i);var j=g.get(h);if(j!=null){e.setItemVisual(j,'color',i)}})})};registerLayout(jy);registerVisual(jz);registerProcessor(curry(cq,'themeRiver'));function dataToCoordSize(b,a){a=a||[0,0];return map(['x','y'],function(h,f){var c=this.getAxis(h);var g=a[f];var e=b[f]/2;return c.type==='category'?c.getBandWidth():Math.abs(c.dataToCoord(g-e)-c.dataToCoord(g+e))},this)}var i_=function(a){var b=a.grid.getRect();return {coordSys:{type:'cartesian2d',x:b.x,y:b.y,width:b.width,height:b.height},api:{coord:bind(a.dataToPoint,a),size:bind(dataToCoordSize,a)}}};function dataToCoordSize$1(b,a){a=a||[0,0];return map([0,1],function(c){var h=a[c];var g=b[c]/2;var e=[];var f=[];e[c]=h-g;f[c]=h+g;e[1-c]=f[1-c]=a[1-c];return Math.abs(this.dataToPoint(e)[c]-this.dataToPoint(f)[c])},this)}var lJ=function(a){var b=a.getBoundingRect();return {coordSys:{type:'geo',x:b.x,y:b.y,width:b.width,height:b.height},api:{coord:bind(a.dataToPoint,a),size:bind(dataToCoordSize$1,a)}}};function dataToCoordSize$2(c,b){var a=this.getAxis();var f=b instanceof Array?b[0]:b;var e=(c instanceof Array?c[0]:c)/2;return a.type==='category'?a.getBandWidth():Math.abs(a.dataToCoord(f-e)-a.dataToCoord(f+e))}var ji=function(a){var b=a.getRect();return {coordSys:{type:'singleAxis',x:b.x,y:b.y,width:b.width,height:b.height},api:{coord:bind(a.dataToPoint,a),size:bind(dataToCoordSize$2,a)}}};function dataToCoordSize$3(b,a){return map(['Radius','Angle'],function(f,h){var c=this['get'+f+'Axis']();var j=a[h];var g=b[h]/2;var i='dataTo'+f;var e=c.type==='category'?c.getBandWidth():Math.abs(c[i](j-g)-c[i](j+g));if(f==='Angle'){e=e*Math.PI/180}return e},this)}var kR=function(a){var c=a.getRadiusAxis();var e=a.getAngleAxis();var b=c.getExtent();b[0]>b[1]&&b.reverse();return {coordSys:{type:'polar',cx:a.cx,cy:a.cy,r:b[1],r0:b[0]},api:{coord:bind(function(h){var b=c.dataToRadius(h[0]);var f=e.dataToAngle(h[1]);var g=a.coordToPoint([b,f]);g.push(b,f*Math.PI/180);return g}),size:bind(dataToCoordSize$3,a)}}};var jO=function(a){var c=a.getRect();var b=a.getRangeInfo();return {coordSys:{type:'calendar',x:c.x,y:c.y,width:c.width,height:c.height,cellWidth:a.getCellWidth(),cellHeight:a.getCellHeight(),rangeInfo:{start:b.start,end:b.end,weeks:b.weeks,dayCount:b.allDay}},api:{coord:bind(a.dataToPoint,a)}}};var iy=['itemStyle','normal'];var ik=['itemStyle','emphasis'];var kt=['label','normal'];var jQ=['label','emphasis'];var i4='e\x00\x00';var gj={cartesian2d:i_,geo:lJ,singleAxis:ji,polar:kR,calendar:jO};extendSeriesModel({type:'series.custom',dependencies:['grid','polar','geo','singleAxis','calendar'],defaultOption:{coordinateSystem:'cartesian2d',zlevel:0,z:2,legendHoverLink:!0},getInitialData:function(b,a){return createListFromArray(b.data,this,a)}});extendChartView({type:'custom',_data:null,render:function(b,g,h){var e=this._data;var a=b.getData();var c=this.group;var f=makeRenderItem(b,a,g,h);a.diff(e).add(function(e){a.hasValue(e)&&createOrUpdate$1(null,e,f(e),b,c,a)}).update(function(i,k){var j=e.getItemGraphicEl(k);a.hasValue(i)?createOrUpdate$1(j,i,f(i),b,c,a):j&&c.remove(j)}).remove(function(f){var a=e.getItemGraphicEl(f);a&&c.remove(a)}).execute();this._data=a},dispose:noop});function createEl(f){var c=f.type;var b;if(c==='path'){var g=f.shape;b=makePath(g.pathData,null,{x:g.x||0,y:g.y||0,width:g.width||0,height:g.height||0},'center');b.__customPathData=f.pathData}else {if(c==='image'){b=new ZImage({});b.__customImagePath=f.style.image}else {if(c==='text'){b=new e({});b.__customText=f.style.text}else {var h=O[c.charAt(0).toUpperCase()+c.slice(1)];if(a){assert(h,'graphic type "'+c+'" can not be found.')}b=new h()}}}b.__customGraphicType=c;b.name=f.name;return b}function updateEl(c,j,a,i,k,f){var e={};var b=a.style||{};a.shape&&(e.shape=clone(a.shape));a.position&&(e.position=a.position.slice());a.scale&&(e.scale=a.scale.slice());a.origin&&(e.origin=a.origin.slice());a.rotation&&(e.rotation=a.rotation);if(c.type==='image'&&a.style){var h=e.style={};each$1(['x','y','width','height'],function(e){prepareStyleTransition(e,h,b,c.style,f)})}if(c.type==='text'&&a.style){var h=e.style={};each$1(['x','y'],function(e){prepareStyleTransition(e,h,b,c.style,f)});!b.hasOwnProperty('textFill')&&b.fill&&(b.textFill=b.fill);!b.hasOwnProperty('textStroke')&&b.stroke&&(b.textStroke=b.stroke)}if(c.type!=='group'){c.useStyle(b);if(f){c.style.opacity=0;var g=b.opacity;g==null&&(g=1);initProps(c,{style:{opacity:g}},i,j)}}if(f){c.attr(e)}else {updateProps(c,e,i,j)}c.attr({z2:a.z2||0,silent:a.silent});a.styleEmphasis!==!1&&setHoverStyle(c,a.styleEmphasis)}function prepareStyleTransition(a,c,b,e,f){if(b[a]!=null&&!f){c[a]=b[a];b[a]=e[a]}}function makeRenderItem(c,b,p,i){var n=c.get('renderItem');var e=c.coordinateSystem;var m={};if(e){if(a){assert(n,'series.render is required.');assert(e.prepareCustoms||gj[e.type],'This coordSys does not support custom series.')}m=e.prepareCustoms?e.prepareCustoms():gj[e.type](e)}var r=defaults({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:value,style:style,styleEmphasis:styleEmphasis,visual:visual,barLayout:barLayout,currentSeriesIndices:currentSeriesIndices,font:font},m.api||{});var q={context:{},seriesId:c.id,seriesName:c.name,seriesIndex:c.seriesIndex,coordSys:m.coordSys,dataInsideLength:b.count(),encode:wrapEncodeDef(c.getData())};var f;var o=!0;var h;var l;var k;var g;var j;return function(a){f=a;o=!0;return n&&n(defaults({dataIndexInside:a,dataIndex:b.getRawIndex(a)},q),r)||{}};function updateCache(a){a==null&&(a=f);if(o){h=b.getItemModel(a);l=h.getModel(kt);k=h.getModel(jQ);g=findLabelValueDim(b);j=b.getItemVisual(a,'color');o=!1}}function value(e,a){a==null&&(a=f);return b.get(b.getDimension(e||0),a)}function style(m,a){a==null&&(a=f);updateCache(a);var e=h.getModel(iy).getItemStyle();j!=null&&(e.fill=j);var k=b.getItemVisual(a,'opacity');k!=null&&(e.opacity=k);if(g!=null){setTextStyle(e,l,null,{autoColor:j,isRectText:!0});e.text=l.getShallow('show')?retrieve2(c.getFormattedLabel(a,'normal'),b.get(g,a)):null}m&&extend(e,m);return e}function styleEmphasis(j,a){a==null&&(a=f);updateCache(a);var e=h.getModel(ik).getItemStyle();if(g!=null){setTextStyle(e,k,null,{isRectText:!0},!0);e.text=k.getShallow('show')?retrieve3(c.getFormattedLabel(a,'emphasis'),c.getFormattedLabel(a,'normal'),b.get(g,a)):null}j&&extend(e,j);return e}function visual(e,a){a==null&&(a=f);return b.getItemVisual(a,e)}function barLayout(f){if(e.getBaseAxis){var a=e.getBaseAxis();return barLayoutGrid.getLayoutOnAxis(defaults({axis:a},f),i)}}function currentSeriesIndices(){return p.getCurrentSeriesIndices()}function font(a){return getFont(a,p)}}function wrapEncodeDef(b){var a={};each$1(b.dimensions,function(h,f){var c=b.getDimensionInfo(h);if(!c.isExtraCoord){var e=c.coordDim;var g=a[e]=a[e]||[];g[c.coordDimIndex]=f}});return a}function createOrUpdate$1(a,b,f,e,g,c){a=doCreateOrUpdate(a,b,f,e,g,c);a&&c.setItemGraphicEl(b,a)}function doCreateOrUpdate(a,i,b,g,k,j){var e=b.type;if(a&&e!==a.__customGraphicType&&(e!=='path'||b.pathData!==a.__customPathData)&&(e!=='image'||b.style.image!==a.__customImagePath)&&(e!=='text'||b.style.text!==a.__customText)){k.remove(a);a=null}if(e==null){return}var l=!a;!a&&(a=createEl(b));updateEl(a,i,b,g,j,l);if(e==='group'){var f=a.children()||[];var h=b.children||[];if(b.diffChildrenByName){diffGroupChildren({oldChildren:f,newChildren:h,dataIndex:i,animatableModel:g,group:a,data:j})}else {var c=0;for(;c<h.length;c++){doCreateOrUpdate(a.childAt(c),i,h[c],g,a,j)}for(;c<f.length;c++){f[c]&&a.remove(f[c])}}}k.add(a);return a}function diffGroupChildren(a){(new DataDiffer(a.oldChildren,a.newChildren,getKey,getKey,a)).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(a,c){var b=a&&a.name;return b!=null?b:i4+c}function processAddUpdate(b,c){var a=this.context;var e=b!=null?a.newChildren[b]:null;var f=c!=null?a.oldChildren[c]:null;doCreateOrUpdate(f,a.dataIndex,e,a.animatableModel,a.group,a.data)}function processRemove(c){var a=this.context;var b=a.oldChildren[c];b&&a.group.remove(b)}registerPreprocessor(function(b){var a=b.graphic;if(isArray(a)){if(!a[0]||!a[0].elements){b.graphic=[{elements:a}]}else {b.graphic=[b.graphic[0]]}}else {if(a&&!a.elements){b.graphic=[{elements:[a]}]}}});var ks=extendComponentModel({type:'graphic',defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(b){var a=this.option.elements;this.option.elements=null;ks.superApply(this,'mergeOption',arguments);this.option.elements=a},optionUpdated:function(j,h){var e=this.option;var k=(h?e:j).elements;var b=e.elements=h?[]:e.elements;var f=[];this._flatten(k,f);var g=mappingToExists(b,f);makeIdAndName(g);var i=this._elOptionsToUpdate=[];each$1(g,function(e,f){var c=e.option;if(a){assert(isObject(c)||e.exist,'Empty graphic option definition')}if(!c){return}i.push(c);setKeyInfoToNewElOption(e,c);mergeNewElOptionToExist(b,f,c);setLayoutInfoToExist(b[f],c)},this);for(var c=b.length-1;c>=0;c--){if(b[c]==null){b.splice(c,1)}else {delete b[c].$action}}},_flatten:function(c,b,a){each$1(c,function(e){if(!e){return}if(a){e.parentOption=a}b.push(e);var f=e.children;if(e.type==='group'&&f){this._flatten(f,b,e)}delete e.children},this)},useElOptionsToUpdate:function(){var a=this._elOptionsToUpdate;this._elOptionsToUpdate=null;return a}});extendComponentView({type:'graphic',init:function(a,b){this._elMap=createHashMap();this._lastGraphicModel},render:function(a,c,b){if(a!==this._lastGraphicModel){this._clear()}this._lastGraphicModel=a;this._updateElements(a,b);this._relocate(a,b)},_updateElements:function(e,g){var c=e.useElOptionsToUpdate();if(!c){return}var b=this._elMap;var f=this.group;each$1(c,function(h){var j=h.$action;var k=h.id;var i=b.get(k);var o=h.parentId;var m=o!=null?b.get(o):f;if(h.type==='text'){var c=h.style;if(h.hv&&h.hv[1]){c.textVerticalAlign=c.textBaseline=null}!c.hasOwnProperty('textFill')&&c.fill&&(c.textFill=c.fill);!c.hasOwnProperty('textStroke')&&c.stroke&&(c.textStroke=c.stroke)}var l=getCleanedElOption(h);if(a){i&&assert(m===i.parent,'Changing parent is not supported.')}if(!j||j==='merge'){i?i.attr(l):createEl$1(k,m,l,b)}else {if(j==='replace'){removeEl(i,b);createEl$1(k,m,l,b)}else {if(j==='remove'){removeEl(i,b)}}}var n=b.get(k);if(n){n.__ecGraphicWidth=h.width;n.__ecGraphicHeight=h.height}})},_relocate:function(i,g){var f=i.option.elements;var j=this.group;var k=this._elMap;for(var e=f.length-1;e>=0;e--){var a=f[e];var c=k.get(a.id);if(!c){continue}var b=c.parent;var h=b===j?{width:g.getWidth(),height:g.getHeight()}:{width:b.__ecGraphicWidth||0,height:b.__ecGraphicHeight||0};positionElement(c,a,h,null,{hv:a.hv,boundingMode:a.bounding})}},_clear:function(){var a=this._elMap;a.each(function(b){removeEl(b,a)});this._elMap=createHashMap()},dispose:function(){this._clear()}});function createEl$1(g,h,e,i){var b=e.type;if(a){assert(b,'graphic type MUST be set')}var f=O[b.charAt(0).toUpperCase()+b.slice(1)];if(a){assert(f,'graphic type can not be found')}var c=new f(e);h.add(c);i.set(g,c);c.__ecGraphicId=g}function removeEl(a,c){var b=a&&a.parent;if(b){a.type==='group'&&a.traverse(function(b){removeEl(b,c)});c.removeKey(a.__ecGraphicId);b.remove(a)}}function getCleanedElOption(a){a=extend({},a);each$1(['id','parentId','$action','hv','bounding'].concat(f$),function(b){delete a[b]});return a}function isSetLoc(b,c){var a;each$1(c,function(e){b[e]!=null&&b[e]!=='auto'&&(a=!0)});return a}function setKeyInfoToNewElOption(e,a){var b=e.exist;a.id=e.keyInfo.id;!a.type&&b&&(a.type=b.type);if(a.parentId==null){var c=a.parentOption;if(c){a.parentId=c.id}else {if(b){a.parentId=b.parentId}}}a.parentOption=null}function mergeNewElOptionToExist(f,g,e){var c=extend({},e);var b=f[g];var h=e.$action||'merge';if(h==='merge'){if(b){if(a){var i=e.type;assert(!i||b.type===i,'Please set $action: "replace" to change `type`')}merge(b,c,!0);mergeLayoutParam(b,c,{ignoreSize:!0});copyLayoutParams(e,b)}else {f[g]=c}}else {if(h==='replace'){f[g]=c}else {if(h==='remove'){b&&(f[g]=null)}}}}function setLayoutInfoToExist(a,b){if(!a){return}a.hv=b.hv=[isSetLoc(b,['left','right']),isSetLoc(b,['top','bottom'])];if(a.type==='group'){a.width==null&&(a.width=b.width=0);a.height==null&&(a.height=b.height=0)}}var gJ=extendComponentModel({type:'legend.plain',dependencies:['series'],layoutMode:{type:'box',ignoreSize:!0},init:function(a,c,b){this.mergeDefaultAndTheme(a,b);a.selected=a.selected||{}},mergeOption:function(a){gJ.superCall(this,'mergeOption',a)},optionUpdated:function(){this._updateData(this.ecModel);var a=this._data;if(a[0]&&this.get('selectedMode')==='single'){var c=!1;for(var b=0;b<a.length;b++){var e=a[b].get('name');if(this.isSelected(e)){this.select(e);c=!0;break}}!c&&this.select(a[0].get('name'))}},_updateData:function(b){var c=map(this.get('data')||[],function(a){if(typeof a==='string'||typeof a==='number'){a={name:a}}return new Model(a,this,this.ecModel)},this);this._data=c;var a=map(b.getSeries(),function(a){return a.name});b.eachSeries(function(c){if(c.legendDataProvider){var e=c.legendDataProvider();a=a.concat(e.mapArray(e.getName))}});this._availableNames=a},getData:function(){return this._data},select:function(e){var a=this.option.selected;var b=this.get('selectedMode');if(b==='single'){var c=this._data;each$1(c,function(b){a[b.get('name')]=!1})}a[e]=!0},unSelect:function(a){if(this.get('selectedMode')!=='single'){this.option.selected[a]=!1}},toggleSelected:function(a){var b=this.option.selected;if(!b.hasOwnProperty(a)){b[a]=!0}this[b[a]?'unSelect':'select'](a)},isSelected:function(a){var b=this.option.selected;return !(b.hasOwnProperty(a)&&!b[a])&&indexOf(this._availableNames,a)>=0},defaultOption:{zlevel:0,z:4,show:!0,orient:'horizontal',left:'center',top:0,align:'auto',backgroundColor:'rgba(0,0,0,0)',borderColor:'#ccc',borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:'#ccc',textStyle:{color:'#333'},selectedMode:!0,tooltip:{show:!1}}});function legendSelectActionHandler(e,b,g){var a={};var f=e==='toggleSelected';var c;g.eachComponent('legend',function(h){if(f&&c!=null){h[c?'select':'unSelect'](b.name)}else {h[e](b.name);c=h.isSelected(b.name)}var i=h.getData();each$1(i,function(i){var c=i.get('name');if(c==='\n'||c===''){return}var f=h.isSelected(c);if(a.hasOwnProperty(c)){a[c]=a[c]&&f}else {a[c]=f}})});return {name:b.name,selected:a}}registerAction('legendToggleSelect','legendselectchanged',curry(legendSelectActionHandler,'toggleSelected'));registerAction('legendSelect','legendselected',curry(legendSelectActionHandler,'select'));registerAction('legendUnSelect','legendunselected',curry(legendSelectActionHandler,'unSelect'));function layout$2(f,a,h){var b=a.getBoxLayoutParams();var e=a.get('padding');var c={width:h.getWidth(),height:h.getHeight()};var g=getLayoutRect(b,c,e);bU(a.get('orient'),f,a.get('itemGap'),g.width,g.height);positionElement(f,b,c,e)}function makeBackground(b,c){var a=aE(c.get('padding'));var e=c.getItemStyle(['color','opacity']);e.fill=c.get('backgroundColor');var b=new k({shape:{x:b.x-a[3],y:b.y-a[0],width:b.width+a[1]+a[3],height:b.height+a[0]+a[2],r:c.get('borderRadius')},style:e,silent:!0,z2:-1});return b}var bg=curry;var mm=each$1;var eL=b;var lu=extendComponentView({type:'legend.plain',newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new eL());this._backgroundEl},getContentGroup:function(){return this._contentGroup},render:function(a,j,e){this.resetInner();if(!a.get('show',!0)){return}var b=a.get('align');if(!b||b==='auto'){b=a.get('left')==='right'&&a.get('orient')==='vertical'?'right':'left'}this.renderInner(b,a,j,e);var f=a.getBoxLayoutParams();var g={width:e.getWidth(),height:e.getHeight()};var i=a.get('padding');var k=getLayoutRect(f,g,i);var c=this.layoutInner(a,b,k);var h=getLayoutRect(defaults({width:c.width,height:c.height},f),g,i);this.group.attr('position',[h.x-c.x,h.y-c.y]);this.group.add(this._backgroundEl=makeBackground(c,a))},resetInner:function(){this.getContentGroup().removeAll();this._backgroundEl&&this.group.remove(this._backgroundEl)},renderInner:function(g,e,h,b){var i=this.getContentGroup();var c=createHashMap();var f=e.get('selectedMode');mm(e.getData(),function(m,o){var j=m.get('name');if(!this.newlineDisabled&&(j===''||j==='\n')){i.add(new eL({newline:!0}));return}var k=h.getSeriesByName(j)[0];if(c.get(j)){return}if(k){var n=k.getData();var l=n.getVisual('color');if(typeof l==='function'){l=l(k.getDataParams(0))}var p=n.getVisual('legendSymbol')||'roundRect';var q=n.getVisual('symbol');var r=this._createItem(j,o,m,e,p,q,g,l,f);r.on('click',bg(dispatchSelectAction,j,b)).on('mouseover',bg(dispatchHighlightAction,k,null,b)).on('mouseout',bg(dispatchDownplayAction,k,null,b));c.set(j,!0)}else {h.eachRawSeries(function(a){if(c.get(j)){return}if(a.legendDataProvider){var i=a.legendDataProvider();var k=i.indexOfName(j);if(k<0){return}var p=i.getItemVisual(k,'color');var l='roundRect';var n=this._createItem(j,o,m,e,l,null,g,p,f);n.on('click',bg(dispatchSelectAction,j,b)).on('mouseover',bg(dispatchHighlightAction,a,j,b)).on('mouseout',bg(dispatchDownplayAction,a,j,b));c.set(j,!0)}},this)}if(a){if(!c.get(j)){console.warn(j+' series not exists. Legend data should be same with series name or data name.')}}},this)},_createItem:function(b,y,o,c,h,f,s,v,x){var p=c.get('itemWidth');var i=c.get('itemHeight');var l=c.get('inactiveColor');var n=c.isSelected(b);var a=new eL();var r=o.getModel('textStyle');var t=o.get('icon');var m=o.getModel('tooltip');var w=m.parentModel;h=t||h;a.add(createSymbol(h,0,0,p,i,n?v:l,!0));if(!t&&f&&(f!==h||f=='none')){var j=i*0.8;if(f==='none'){f='circle'}a.add(createSymbol(f,(p-j)/2,(i-j)/2,j,j,n?v:l))}var A=s==='left'?p+5:-5;var z=s;var g=c.get('formatter');var q=b;if(typeof g==='string'&&g){q=g.replace('{name}',b!=null?b:'')}else {if(typeof g==='function'){q=g(b)}}a.add(new e({style:setTextStyle({},r,{text:q,x:A,y:i/2,textFill:n?r.getTextColor():l,textAlign:z,textVerticalAlign:'middle'})}));var u=new k({shape:a.getBoundingRect(),invisible:!0,tooltip:m.get('show')?extend({content:b,formatter:w.get('formatter',!0)||function(){return b},formatterParams:{componentType:'legend',legendIndex:c.componentIndex,name:b,$vars:['name']}},m.option):null});a.add(u);a.eachChild(function(a){a.silent=!0});u.silent=!x;this.getContentGroup().add(a);setHoverStyle(a);a.__legendDataIndex=y;return a},layoutInner:function(c,f,e){var a=this.getContentGroup();bU(c.get('orient'),a,c.get('itemGap'),e.width,e.height);var b=a.getBoundingRect();a.attr('position',[-b.x,-b.y]);return this.group.getBoundingRect()}});function dispatchSelectAction(a,b){b.dispatchAction({type:'legendToggleSelect',name:a})}function dispatchHighlightAction(a,e,b){var c=b.getZr().storage.getDisplayList()[0];if(!(c&&c.useHoverLayer)){a.get('legendHoverLink')&&b.dispatchAction({type:'highlight',seriesName:a.name,name:e})}}function dispatchDownplayAction(a,e,b){var c=b.getZr().storage.getDisplayList()[0];if(!(c&&c.useHoverLayer)){a.get('legendHoverLink')&&b.dispatchAction({type:'downplay',seriesName:a.name,name:e})}}var kM=function(b){var a=b.findComponents({mainType:'legend'});if(a&&a.length){b.filterSeries(function(e){for(var c=0;c<a.length;c++){if(!a[c].isSelected(e.name)){return !1}}return !0})}};registerProcessor(kM);g.registerSubTypeDefaulter('legend',function(){return 'plain'});var fu=gJ.extend({type:'legend.scroll',setScrollDataIndex:function(a){this.option.scrollDataIndex=a},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:'end',pageFormatter:'{current}/{total}',pageIcons:{horizontal:['M0,0L12,-10L12,10z','M0,0L-12,-10L-12,10z'],vertical:['M0,0L20,0L10,-20z','M0,0L20,0L10,20z']},pageIconColor:'#2f4554',pageIconInactiveColor:'#aaa',pageIconSize:15,pageTextStyle:{color:'#333'},animationDurationUpdate:800},init:function(a,c,f,e){var b=getLayoutParams(a);fu.superCall(this,'init',a,c,f,e);mergeAndNormalizeLayoutParams(this,a,b)},mergeOption:function(a,b){fu.superCall(this,'mergeOption',a,b);mergeAndNormalizeLayoutParams(this,this.option,a)},getOrient:function(){return this.get('orient')==='vertical'?{index:1,name:'vertical'}:{index:0,name:'horizontal'}}});function mergeAndNormalizeLayoutParams(b,e,f){var c=b.getOrient();var a=[1,1];a[c.index]=0;mergeLayoutParam(e,f,{type:'box',ignoreSize:a})}var hq=b;var c3=['width','height'];var hX=['x','y'];var db=lu.extend({type:'legend.scroll',newlineDisabled:!0,init:function(){db.superCall(this,'init');this._currentIndex=0;this.group.add(this._containerGroup=new hq());this._containerGroup.add(this.getContentGroup());this.group.add(this._controllerGroup=new hq());this._showController},resetInner:function(){db.superCall(this,'resetInner');this._controllerGroup.removeAll();this._containerGroup.removeClipPath();this._containerGroup.__rectSize=null},renderInner:function(i,b,j,g){var h=this;db.superCall(this,'renderInner',i,b,j,g);var f=this._controllerGroup;var a=b.get('pageIconSize',!0);if(!isArray(a)){a=[a,a]}createPageButton('pagePrev',0);var c=b.getModel('pageTextStyle');f.add(new e({name:'pageText',style:{textFill:c.getTextColor(),font:c.getFont(),textVerticalAlign:'middle',textAlign:'center'},silent:!0}));createPageButton('pageNext',1);function createPageButton(e,l){var k=e+'DataIndex';var c=createIcon(b.get('pageIcons',!0)[b.getOrient().name][l],{onclick:bind(h._pageGo,h,k,b,g)},{x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]});c.name=e;f.add(c)}},layoutInner:function(c,w,f){var j=this.getContentGroup();var m=this._containerGroup;var l=this._controllerGroup;var b=c.getOrient().index;var a=c3[b];var g=c3[1-b];var u=hX[1-b];bU(c.get('orient'),j,c.get('itemGap'),!b?null:f.width,b?null:f.height);bU('horizontal',l,c.get('pageButtonItemGap',!0));var h=j.getBoundingRect();var e=l.getBoundingRect();var n=this._showController=h[a]>f[a];var t=[-h.x,-h.y];t[b]=j.position[b];var s=[0,0];var o=[-e.x,-e.y];var r=retrieve2(c.get('pageButtonGap',!0),c.get('itemGap',!0));if(n){var v=c.get('pageButtonPosition',!0);if(v==='end'){o[b]+=f[a]-e[a]}else {s[b]+=e[a]+r}}o[1-b]+=h[g]/2-e[g]/2;j.attr('position',t);m.attr('position',s);l.attr('position',o);var i=this.group.getBoundingRect();var i={x:0,y:0};i[a]=n?f[a]:h[a];i[g]=Math.max(h[g],e[g]);i[u]=Math.min(0,e[u]+o[1-b]);m.__rectSize=f[a];if(n){var p={x:0,y:0};p[a]=Math.max(f[a]-e[a]-r,0);p[g]=i[g];m.setClipPath(new k({shape:p}));m.__rectSize=p[a]}else {l.eachChild(function(a){a.attr({invisible:!0,silent:!0})})}var q=this._getPageInfo(c);q.pageIndex!=null&&updateProps(j,{position:q.contentPosition},n?c:!1);this._updatePageInfoView(c,q);return i},_pageGo:function(e,b,c){var a=this._getPageInfo(b)[e];a!=null&&c.dispatchAction({type:'legendScroll',scrollDataIndex:a,legendId:b.id})},_updatePageInfoView:function(b,c){var e=this._controllerGroup;each$1(['pagePrev','pageNext'],function(g){var f=c[g+'DataIndex']!=null;var a=e.childOfName(g);if(a){a.setStyle('fill',f?b.get('pageIconColor',!0):b.get('pageIconInactiveColor',!0));a.cursor=f?'pointer':'default'}});var g=e.childOfName('pageText');var a=b.get('pageFormatter');var f=c.pageIndex;var h=f!=null?f+1:0;var i=c.pageCount;g&&a&&g.setStyle('text',isString(a)?a.replace('{current}',h).replace('{total}',i):a({current:h,total:i}))},_getPageInfo:function(r){var v=r.get('scrollDataIndex',!0);var g=this.getContentGroup();var h=g.getBoundingRect();var j=this._containerGroup.__rectSize;var f=r.getOrient().index;var e=c3[f];var u=c3[1-f];var a=hX[f];var p=g.position.slice();var l;var o;var n;var i;if(this._showController){g.eachChild(function(a){if(a.__legendDataIndex===v){i=a}})}else {i=g.childAt(0)}var k=j?Math.ceil(h[e]/j):0;if(i){var s=i.getBoundingRect();var t=i.position[f]+s[a];p[f]=-t-h[a];l=Math.floor(k*(t+s[a]+j/2)/h[e]);l=h[e]&&k?Math.max(0,Math.min(k-1,l)):-1;var b={x:0,y:0};b[e]=j;b[u]=h[u];b[a]=-p[f]-h[a];var c;var m=g.children();g.eachChild(function(g,h){var f=getItemRect(g);if(f.intersect(b)){c==null&&(c=h);n=g.__legendDataIndex}if(h===m.length-1&&f[a]+f[e]<=b[a]+b[e]){n=null}});if(c!=null){var w=m[c];var q=getItemRect(w);b[a]=q[a]+q[e]-b[e];if(c<=0&&q[a]>=b[a]){o=null}else {while(c>0&&getItemRect(m[c-1]).intersect(b)){c--}o=m[c].__legendDataIndex}}}return {contentPosition:p,pageIndex:l,pageCount:k,pagePrevDataIndex:o,pageNextDataIndex:n};function getItemRect(c){var b=c.getBoundingRect().clone();b[a]+=c.position[f];return b}}});registerAction('legendScroll','legendscroll',function(b,c){var a=b.scrollDataIndex;a!=null&&c.eachComponent({mainType:'legend',subType:'scroll',query:b},function(e){e.setScrollDataIndex(a)})});extendComponentModel({type:'tooltip',dependencies:['axisPointer'],defaultOption:{zlevel:0,z:8,show:!0,showContent:!0,trigger:'item',triggerOn:'mousemove|click',alwaysShowContent:!1,displayMode:'single',confine:!1,showDelay:0,hideDelay:100,transitionDuration:0.4,enterable:!1,backgroundColor:'rgba(50,50,50,0.7)',borderColor:'#333',borderRadius:4,borderWidth:0,padding:5,extraCssText:'',axisPointer:{type:'line',axis:'auto',animation:'auto',animationDurationUpdate:200,animationEasingUpdate:'exponentialOut',crossStyle:{color:'#999',width:1,type:'dashed',textStyle:{}}},textStyle:{color:'#fff',fontSize:14}}});var hu=each$1;var ko=toCamelCase;var ms=['','-webkit-','-moz-','-o-'];var me='position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;';function assembleTransition(b){var a='cubic-bezier(0.23, 1, 0.32, 1)';var c='left '+b+'s '+a+','+'top '+b+'s '+a;return map(ms,function(a){return a+'transition:'+c}).join(';')}function assembleFont(b){var a=[];var c=b.get('fontSize');var e=b.getTextColor();e&&a.push('color:'+e);a.push('font:'+b.getFont());c&&a.push('line-height:'+Math.round(c*3/2)+'px');hu(['decoration','align'],function(c){var e=b.get(c);e&&a.push('text-'+c+':'+e)});return a.join(';')}function assembleCssText(b){var a=[];var e=b.get('transitionDuration');var c=b.get('backgroundColor');var h=b.getModel('textStyle');var g=b.get('padding');e&&a.push(assembleTransition(e));if(c){if(f.canvasSupported){a.push('background-Color:'+c)}else {a.push('background-Color:#'+toHex(c));a.push('filter:alpha(opacity=70)')}}hu(['width','color','radius'],function(e){var c='border-'+e;var g=ko(c);var f=b.get(g);f!=null&&a.push(c+':'+f+(e==='color'?'':'px'))});a.push(assembleFont(h));if(g!=null){a.push('padding:'+aE(g).join('px ')+'px')}return a.join(';')+';'}function TooltipContent(c,e){var b=document.createElement('div');var f=this._zr=e.getZr();this.el=b;this._x=e.getWidth()/2;this._y=e.getHeight()/2;c.appendChild(b);this._container=c;this._show=!1;this._hideTimeout;var a=this;b.onmouseenter=function(){if(a._enterable){clearTimeout(a._hideTimeout);a._show=!0}a._inContent=!0};b.onmousemove=function(b){b=b||window.event;if(!a._enterable){var g=f.handler;normalizeEvent(c,b,!0);g.dispatch('mousemove',b)}};b.onmouseleave=function(){if(a._enterable){if(a._show){a.hideLater(a._hideDelay)}}a._inContent=!1}}TooltipContent.prototype={constructor:TooltipContent,_enterable:!0,update:function(){var a=this._container;var c=a.currentStyle||document.defaultView.getComputedStyle(a);var b=a.style;if(b.position!=='absolute'&&c.position!=='absolute'){b.position='relative'}},show:function(b){clearTimeout(this._hideTimeout);var a=this.el;a.style.cssText=me+assembleCssText(b)+';left:'+this._x+'px;top:'+this._y+'px;'+(b.get('extraCssText')||'');a.style.display=a.innerHTML?'block':'none';this._show=!0},setContent:function(a){this.el.innerHTML=a==null?'':a},setEnterable:function(a){this._enterable=a},getSize:function(){var a=this.el;return [a.clientWidth,a.clientHeight]},moveTo:function(c,e){var b=this._zr;var a;if(b&&b.painter&&(a=b.painter.getViewportRootOffset())){c+=a.offsetLeft;e+=a.offsetTop}var f=this.el.style;f.left=c+'px';f.top=e+'px';this._x=c;this._y=e},hide:function(){this.el.style.display='none';this._show=!1},hideLater:function(a){if(this._show&&!(this._inContent&&this._enterable)){if(a){this._hideDelay=a;this._show=!1;this._hideTimeout=setTimeout(bind(this.hide,this),a)}else {this.hide()}}},isShow:function(){return this._show}};var hK=bind;var bM=each$1;var gh=parsePercent$1;var l6=new k({shape:{x:-1,y:-1,width:2,height:2}});extendComponentView({type:'tooltip',init:function(c,a){if(f.node){return}var b=new TooltipContent(a.getDom(),a);this._tooltipContent=b},render:function(a,c,e){if(f.node){return}this.group.removeAll();this._tooltipModel=a;this._ecModel=c;this._api=e;this._lastDataByCoordSys=null;this._alwaysShowContent=a.get('alwaysShowContent');var b=this._tooltipContent;b.update();b.setEnterable(a.get('enterable'));this._initGlobalListener();this._keepShow()},_initGlobalListener:function(){var b=this._tooltipModel;var a=b.get('triggerOn');register('itemTooltip',this._api,hK(function(c,e,b){if(a!=='none'){if(a.indexOf(c)>=0){this._tryShow(e,b)}else {if(c==='leave'){this._hide(b)}}}},this))},_keepShow:function(){var b=this._tooltipModel;var c=this._ecModel;var e=this._api;if(this._lastX!=null&&this._lastY!=null&&b.get('triggerOn')!=='none'){var a=this;clearTimeout(this._refreshUpdateTimeout);this._refreshUpdateTimeout=setTimeout(function(){a.manuallyShowTip(b,c,e,{x:a._lastX,y:a._lastY})})}},manuallyShowTip:function(l,h,c,a){if(a.from===this.uid||f.node){return}var b=makeDispatchAction$1(a,c);this._ticket='';var k=a.dataByCoordSys;if(a.tooltip&&a.x!=null&&a.y!=null){var e=l6;e.position=[a.x,a.y];e.update();e.tooltip=a.tooltip;this._tryShow({offsetX:a.x,offsetY:a.y,target:e},b)}else {if(k){this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,event:{},dataByCoordSys:a.dataByCoordSys,tooltipOption:a.tooltipOption},b)}else {if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(l,h,c,a)){return}var g=fy(a,h);var i=g.point[0];var j=g.point[1];if(i!=null&&j!=null){this._tryShow({offsetX:i,offsetY:j,position:a.position,target:g.el,event:{}},b)}}else {if(a.x!=null&&a.y!=null){c.dispatchAction({type:'updateAxisPointer',x:a.x,y:a.y});this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:c.getZr().findHover(a.x,a.y).target,event:{}},b)}}}}},manuallyHideTip:function(e,f,c,a){var b=this._tooltipContent;if(!this._alwaysShowContent){b.hideLater(this._tooltipModel.get('hideDelay'))}this._lastX=this._lastY=null;if(a.from!==this.uid){this._hide(makeDispatchAction$1(a,c))}},_manuallyAxisShowTip:function(b,g,j,f){var c=f.seriesIndex;var e=f.dataIndex;var h=g.getComponent('axisPointer').coordSysAxesInfo;if(c==null||e==null||h==null){return}var a=g.getSeriesByIndex(c);if(!a){return}var i=a.getData();var b=buildTooltipModel([i.getItemModel(e),a,(a.coordinateSystem||{}).model,b]);if(b.get('trigger')!=='axis'){return}j.dispatchAction({type:'updateAxisPointer',seriesIndex:c,dataIndex:e,position:f.position});return !0},_tryShow:function(a,e){var b=a.target;var f=this._tooltipModel;if(!f){return}this._lastX=a.offsetX;this._lastY=a.offsetY;var c=a.dataByCoordSys;if(c&&c.length){this._showAxisTooltip(c,a)}else {if(b&&b.dataIndex!=null){this._lastDataByCoordSys=null;this._showSeriesItemTooltip(a,b,e)}else {if(b&&b.tooltip){this._lastDataByCoordSys=null;this._showComponentItemTooltip(a,b,e)}else {this._lastDataByCoordSys=null;this._hide(e)}}}},_showOrMove:function(c,a){var b=c.get('showDelay');a=bind(a,this);clearTimeout(this._showTimout);b>0?this._showTimout=setTimeout(a,b):a()},_showAxisTooltip:function(h,c){var g=this._ecModel;var j=this._tooltipModel;var b=[c.offsetX,c.offsetY];var a=[];var f=[];var e=buildTooltipModel([c.tooltipOption,j]);bM(h,function(b){bM(b.dataByAxis,function(e){var i=g.getComponent(e.axisDim+'Axis',e.axisIndex);var j=e.value;var k=[];if(!i||j==null){return}var l=getValueLabel(j,i.axis,g,e.seriesDataIndices,e.valueLabelOpt);each$1(e.seriesDataIndices,function(o){var m=g.getSeriesByIndex(o.seriesIndex);var n=o.dataIndexInside;var a=m&&m.getDataParams(n);a.axisDim=e.axisDim;a.axisIndex=e.axisIndex;a.axisType=e.axisType;a.axisId=e.axisId;a.axisValue=getAxisRawValue(i.axis,j);a.axisValueLabel=l;if(a){f.push(a);k.push(m.formatTooltip(n,!0))}});var m=l;a.push((m?encodeHTML(m)+'<br />':'')+k.join('<br />'))})},this);a.reverse();a=a.join('<br /><br />');var i=c.position;this._showOrMove(e,function(){if(this._updateContentNotChangedOnAxis(h)){this._updatePosition(e,i,b[0],b[1],this._tooltipContent,f)}else {this._showTooltipContent(e,a,f,Math.random(),b[0],b[1],i)}})},_showSeriesItemTooltip:function(e,c,l){var o=this._ecModel;var i=c.seriesIndex;var g=o.getSeriesByIndex(i);var b=c.dataModel||g;var a=c.dataIndex;var j=c.dataType;var k=b.getData();var f=buildTooltipModel([k.getItemModel(a),b,g&&(g.coordinateSystem||{}).model,this._tooltipModel]);var h=f.get('trigger');if(h!=null&&h!=='item'){return}var p=b.getDataParams(a,j);var n=b.formatTooltip(a,!1,j);var m='item_'+b.name+'_'+a;this._showOrMove(f,function(){this._showTooltipContent(f,n,p,m,e.offsetX,e.offsetY,e.position,e.target)});l({type:'showTip',dataIndexInside:a,dataIndex:k.getRawIndex(a),seriesIndex:i,from:this.uid})},_showComponentItemTooltip:function(c,f,g){var b=f.tooltip;if(typeof b==='string'){var e=b;b={content:e,formatter:e}}var a=new Model(b,this._tooltipModel,this._ecModel);var i=a.get('content');var h=Math.random();this._showOrMove(a,function(){this._showTooltipContent(a,i,a.get('formatterParams')||{},h,c.offsetX,c.offsetY,c.position,f)});g({type:'showTip',from:this.uid})},_showTooltipContent:function(a,l,f,h,j,k,e,i){this._ticket='';if(!a.get('showContent')||!a.get('show')){return}var b=this._tooltipContent;var c=a.get('formatter');e=e||a.get('position');var g=l;if(c&&typeof c==='string'){g=formatTpl(c,f,!0)}else {if(typeof c==='function'){var m=hK(function(c,g){if(c===this._ticket){b.setContent(g);this._updatePosition(a,e,j,k,b,f,i)}},this);this._ticket=h;g=c(f,h,m)}}b.setContent(g);b.show(a);this._updatePosition(a,e,j,k,b,f,i)},_updatePosition:function(m,a,b,c,i,p,l){var h=this._api.getWidth();var g=this._api.getHeight();a=a||m.get('position');var e=i.getSize();var k=m.get('align');var j=m.get('verticalAlign');var n=l&&l.getBoundingRect().clone();l&&n.applyTransform(l.transform);if(typeof a==='function'){a=a([b,c],p,i.el,n,{viewSize:[h,g],contentSize:e.slice()})}if(isArray(a)){b=gh(a[0],h);c=gh(a[1],g)}else {if(isObject(a)){a.width=e[0];a.height=e[1];var o=getLayoutRect(a,{width:h,height:g});b=o.x;c=o.y;k=null;j=null}else {if(typeof a==='string'&&l){var f=calcTooltipPosition(a,n,e);b=f[0];c=f[1]}else {var f=refixTooltipPosition(b,c,i.el,h,g,k?null:20,j?null:20);b=f[0];c=f[1]}}}k&&(b-=isCenterAlign(k)?e[0]/2:k==='right'?e[0]:0);j&&(c-=isCenterAlign(j)?e[1]/2:j==='bottom'?e[1]:0);if(m.get('confine')){var f=confineTooltipPosition(b,c,i.el,h,g);b=f[0];c=f[1]}i.moveTo(b,c)},_updateContentNotChangedOnAxis:function(b){var c=this._lastDataByCoordSys;var a=!!c&&c.length===b.length;a&&bM(c,function(f,h){var c=f.dataByAxis||{};var g=b[h]||{};var e=g.dataByAxis||[];a&=c.length===e.length;a&&bM(c,function(c,k){var g=e[k]||{};var i=c.seriesDataIndices||[];var j=g.seriesDataIndices||[];a&=c.value===g.value&&c.axisType===g.axisType&&c.axisId===g.axisId&&i.length===j.length;a&&bM(i,function(e,i){var g=j[i];a&=e.seriesIndex===g.seriesIndex&&e.dataIndex===g.dataIndex})})});this._lastDataByCoordSys=b;return !!a},_hide:function(a){this._lastDataByCoordSys=null;a({type:'hideTip',from:this.uid})},dispose:function(b,a){if(f.node){return}this._tooltipContent.hide();unregister('itemTooltip',a)}});function buildTooltipModel(c){var b=c.pop();while(c.length){var a=c.pop();if(a){if(a instanceof Model){a=a.get('tooltip',!0)}if(typeof a==='string'){a={formatter:a}}b=new Model(a,b,b.ecModel)}}return b}function makeDispatchAction$1(b,a){return b.dispatchAction||bind(a.dispatchAction,a)}function refixTooltipPosition(c,e,k,j,i,a,b){var h=getOuterSize(k);var g=h.width;var f=h.height;if(a!=null){if(c+g+a>j){c-=g+a}else {c+=a}}if(b!=null){if(e+f+b>i){e-=f+b}else {e+=b}}return [c,e]}function confineTooltipPosition(a,b,i,h,g){var f=getOuterSize(i);var e=f.width;var c=f.height;a=Math.min(a+e,h)-e;b=Math.min(b+c,g)-c;a=Math.max(a,0);b=Math.max(b,0);return [a,b]}function getOuterSize(b){var e=b.clientWidth;var c=b.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var a=document.defaultView.getComputedStyle(b);if(a){e+=parseInt(a.paddingLeft,10)+parseInt(a.paddingRight,10)+parseInt(a.borderLeftWidth,10)+parseInt(a.borderRightWidth,10);c+=parseInt(a.paddingTop,10)+parseInt(a.paddingBottom,10)+parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)}}return {width:e,height:c}}function calcTooltipPosition(k,a,j){var h=j[0];var f=j[1];var i=5;var b=0;var c=0;var g=a.width;var e=a.height;switch(k){case 'inside':b=a.x+g/2-h/2;c=a.y+e/2-f/2;break;case 'top':b=a.x+g/2-h/2;c=a.y-f-i;break;case 'bottom':b=a.x+g/2-h/2;c=a.y+e+i;break;case 'left':b=a.x-h-i;c=a.y+e/2-f/2;break;case 'right':b=a.x+g+i;c=a.y+e/2-f/2;}return [b,c]}function isCenterAlign(a){return a==='center'||a==='middle'}registerAction({type:'showTip',event:'showTip',update:'tooltip:manuallyShowTip'},function(){});registerAction({type:'hideTip',event:'hideTip',update:'tooltip:manuallyHideTip'},function(){});function getSeriesStackId$1(a){return a.get('stack')||'__ec_stack_'+a.seriesIndex}function getAxisKey$1(a){return a.dim}function barLayoutPolar(e,c,f){var i=f.getWidth();var h=f.getHeight();var b={};var a={};var g=calRadialBar(filter(c.getSeriesByType(e),function(a){return !c.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==='polar'}));c.eachSeriesByType(e,function(k){if(k.coordinateSystem.type!=='polar'){return}var o=k.getData();var m=k.coordinateSystem;var u=m.getAngleAxis();var v=m.getBaseAxis();var j=getSeriesStackId$1(k);var p=g[getAxisKey$1(v)][j];var r=p.offset;var t=p.width;var l=m.getOtherAxis(v);var y=k.get('center')||['50%','50%'];var B=parsePercent$1(y[0],i);var C=parsePercent$1(y[1],h);var q=k.get('barMinHeight')||0;var s=k.get('barMinAngle')||0;var n=l.getExtent()[0];var w=l.model.get('max');var x=l.model.get('min');var z=[k.coordDimToDataDim('radius')[0],k.coordDimToDataDim('angle')[0]];var A=o.mapArray(z,function(a,b){return m.dataToPoint([a,b])},!0);b[j]=b[j]||[];a[j]=a[j]||[];o.each(k.coordDimToDataDim(l.dim)[0],function(g,h){if(isNaN(g)){return}if(!b[j][h]){b[j][h]={p:n,n:n};a[j][h]={p:n,n:n}}var H=g>=0?'p':'n';var G=m.pointToCoord(A[h]);var y=a[j][h][H];var v;var i;var z;var F;if(l.dim==='radius'){v=y;i=G[0];z=(-G[1]+r)*Math.PI/180;F=z+t*Math.PI/180;if(Math.abs(i)<q){i=v+(i<0?-1:1)*q}a[j][h][H]=i}else {v=G[0]+r;i=v+t;if(w!=null){g=Math.min(g,w)}if(x!=null){g=Math.max(g,x)}var E=u.dataToAngle(g);if(Math.abs(E-y)<s){E=y-(g<0?-1:1)*s}z=-y*Math.PI/180;F=-E*Math.PI/180;var D=u.getExtent();var p=E;if(p===D[0]&&g>0){p=D[1]}else {if(p===D[1]&&g<0){p=D[0]}}a[j][h][H]=p}o.setItemLayout(h,{cx:B,cy:C,r0:v,r:i,startAngle:z,endAngle:F})},!0)},this)}function calRadialBar(c,e){var b={};each$1(c,function(f,r){var q=f.getData();var p=f.coordinateSystem;var j=p.getBaseAxis();var n=j.getExtent();var k=j.type==='category'?j.getBandWidth():Math.abs(n[1]-n[0])/q.count();var a=b[getAxisKey$1(j)]||{bandWidth:k,remainedWidth:k,autoWidthCount:0,categoryGap:'20%',gap:'30%',stacks:{}};var h=a.stacks;b[getAxisKey$1(j)]=a;var g=getSeriesStackId$1(f);if(!h[g]){a.autoWidthCount++}h[g]=h[g]||{width:0,maxWidth:0};var i=parsePercent$1(f.get('barWidth'),k);var m=parsePercent$1(f.get('barMaxWidth'),k);var o=f.get('barGap');var l=f.get('barCategoryGap');if(i&&!h[g].width){i=Math.min(a.remainedWidth,i);h[g].width=i;a.remainedWidth-=i}m&&(h[g].maxWidth=m);o!=null&&(a.gap=o);l!=null&&(a.categoryGap=l)});var a={};each$1(b,function(f,j){a[j]={};var m=f.stacks;var p=f.bandWidth;var n=parsePercent$1(f.categoryGap,p);var h=parsePercent$1(f.gap,1);var i=f.remainedWidth;var g=f.autoWidthCount;var b=(i-n)/(g+(g-1)*h);b=Math.max(b,0);each$1(m,function(h,k){var a=h.maxWidth;if(a&&a<b){a=Math.min(a,i);if(h.width){a=Math.min(a,h.width)}i-=a;h.width=a;g--}});b=(i-n)/(g+(g-1)*h);b=Math.max(b,0);var l=0;var k;each$1(m,function(a,g){if(!a.width){a.width=b}k=a;l+=a.width*(1+h)});if(k){l-=k.width*h}var o=-l/2;each$1(m,function(g,b){a[j][b]=a[j][b]||{offset:o,width:g.width};o+=g.width*(1+h)})});return a}function RadiusAxis(b,a){q.call(this,'radius',b,a);this.type='category'}RadiusAxis.prototype={constructor:RadiusAxis,pointToData:function(b,a){return this.polar.pointToData(b,a)[this.dim==='radius'?0:1]},dataToRadius:q.prototype.dataToCoord,radiusToData:q.prototype.coordToData};inherits(RadiusAxis,q);function AngleAxis(b,a){a=a||[0,360];q.call(this,'angle',b,a);this.type='category'}AngleAxis.prototype={constructor:AngleAxis,pointToData:function(b,a){return this.polar.pointToData(b,a)[this.dim==='radius'?0:1]},dataToAngle:q.prototype.dataToCoord,angleToData:q.prototype.coordToData};inherits(AngleAxis,q);var c_=function(a){this.name=a||'';this.cx=0;this.cy=0;this._radiusAxis=new RadiusAxis();this._angleAxis=new AngleAxis();this._radiusAxis.polar=this._angleAxis.polar=this};c_.prototype={type:'polar',axisPointerEnabled:!0,constructor:c_,dimensions:['radius','angle'],model:null,containPoint:function(b){var a=this.pointToCoord(b);return this._radiusAxis.contain(a[0])&&this._angleAxis.contain(a[1])},containData:function(a){return this._radiusAxis.containData(a[0])&&this._angleAxis.containData(a[1])},getAxis:function(a){return this['_'+a+'Axis']},getAxes:function(){return [this._radiusAxis,this._angleAxis]},getAxesByScale:function(e){var a=[];var c=this._angleAxis;var b=this._radiusAxis;c.scale.type===e&&a.push(c);b.scale.type===e&&a.push(b);return a},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(b){var a=this._angleAxis;return b===a?this._radiusAxis:a},getBaseAxis:function(){return this.getAxesByScale('ordinal')[0]||this.getAxesByScale('time')[0]||this.getAngleAxis()},getTooltipAxes:function(a){var b=a!=null&&a!=='auto'?this.getAxis(a):this.getBaseAxis();return {baseAxes:[b],otherAxes:[this.getOtherAxis(b)]}},dataToPoint:function(b,a){return this.coordToPoint([this._radiusAxis.dataToRadius(b[0],a),this._angleAxis.dataToAngle(b[1],a)])},pointToData:function(c,a){var b=this.pointToCoord(c);return [this._radiusAxis.radiusToData(b[0],a),this._angleAxis.angleToData(b[1],a)]},pointToCoord:function(j){var e=j[0]-this.cx;var f=j[1]-this.cy;var i=this.getAngleAxis();var c=i.getExtent();var b=Math.min(c[0],c[1]);var g=Math.max(c[0],c[1]);i.inverse?b=g-360:g=b+360;var h=Math.sqrt(e*e+f*f);e/=h;f/=h;var a=Math.atan2(-f,e)/Math.PI*180;var k=a<b?1:-1;while(a<b||a>g){a+=k*360}return [h,a]},coordToPoint:function(c){var b=c[0];var a=c[1]/180*Math.PI;var e=Math.cos(a)*b+this.cx;var f=-Math.sin(a)*b+this.cy;return [e,f]}};var dH=g.extend({type:'polarAxis',axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:'polar',index:this.option.polarIndex,id:this.option.polarId})[0]}});merge(dH.prototype,aD);var fk={angle:{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}},radius:{splitNumber:5}};function getAxisType$3(b,a){return a.type||(a.data?'category':'value')}a0('angle',dH,getAxisType$3,fk.angle);a0('radius',dH,getAxisType$3,fk.radius);extendComponentModel({type:'polar',dependencies:['polarAxis','angleAxis'],coordinateSystem:null,findAxisModel:function(b){var a;var c=this.ecModel;c.eachComponent(b,function(c){if(c.getCoordSysModel()===this){a=c}},this);return a},defaultOption:{zlevel:0,z:0,center:['50%','50%'],radius:'80%'}});function resizePolar(b,c,i){var e=c.get('center');var h=i.getWidth();var f=i.getHeight();b.cx=parsePercent$1(e[0],h);b.cy=parsePercent$1(e[1],f);var a=b.getRadiusAxis();var j=Math.min(h,f)/2;var g=parsePercent$1(c.get('radius'),j);a.inverse?a.setExtent(g,0):a.setExtent(0,g)}function updatePolarScale(g,h){var e=this;var a=e.getAngleAxis();var b=e.getRadiusAxis();a.scale.setExtent(Infinity,-Infinity);b.scale.setExtent(Infinity,-Infinity);g.eachSeries(function(c){if(c.coordinateSystem===e){var f=c.getData();b.scale.unionExtentFromData(f,'radius');a.scale.unionExtentFromData(f,'angle')}});niceScaleExtent(a.scale,a.model);niceScaleExtent(b.scale,b.model);if(a.type==='category'&&!a.onBand){var c=a.getExtent();var f=360/a.scale.count();a.inverse?c[1]+=f:c[1]-=f;a.setExtent(c[0],c[1])}}function setAxis(a,b){a.type=b.get('type');a.scale=createScaleByModel(b);a.onBand=b.get('boundaryGap')&&a.type==='category';a.inverse=b.get('inverse');if(b.mainType==='angleAxis'){a.inverse^=b.get('clockwise');var c=b.get('startAngle');a.setExtent(c,c+(a.inverse?-360:360))}b.axis=a;a.model=b}var kQ={dimensions:c_.prototype.dimensions,create:function(b,e){var c=[];b.eachComponent('polar',function(f,k){var a=new c_(k);a.update=updatePolarScale;var i=a.getRadiusAxis();var j=a.getAngleAxis();var g=f.findAxisModel('radiusAxis');var h=f.findAxisModel('angleAxis');setAxis(i,g);setAxis(j,h);resizePolar(a,f,e);c.push(a);f.coordinateSystem=a;a.model=f});b.eachSeries(function(c){if(c.get('coordinateSystem')==='polar'){var f=b.queryComponents({mainType:'polar',index:c.get('polarIndex'),id:c.get('polarId')})[0];if(a){if(!f){throw new Error('Polar "'+retrieve(c.get('polarIndex'),c.get('polarId'),0)+'" not found')}}c.coordinateSystem=f.coordinateSystem}});return c}};CoordinateSystemManager.register('polar',kQ);var kh=['axisLine','axisLabel','axisTick','splitLine','splitArea'];function getAxisLineShape(c,a,b){a[1]>a[0]&&(a=a.slice().reverse());var e=c.coordToPoint([a[0],b]);var f=c.coordToPoint([a[1],b]);return {x1:e[0],y1:e[1],x2:f[0],y2:f[1]}}function getRadiusIdx(b){var a=b.getRadiusAxis();return a.inverse?0:1}F.extend({type:'angleAxis',axisPointerClass:'PolarAxisPointer',render:function(a,g){this.group.removeAll();if(!a.get('show')){return}var b=a.axis;var e=b.polar;var f=e.getRadiusAxis().getExtent();var c=b.getTicksCoords();if(b.type!=='category'){c.pop()}each$1(kh,function(h){if(a.get(h+'.show')&&(!b.scale.isBlank()||h==='axisLine')){this['_'+h](a,e,c,f)}},this)},_axisLine:function(c,a,g,f){var e=c.getModel('axisLine.lineStyle');var b=new aT({shape:{cx:a.cx,cy:a.cy,r:f[getRadiusIdx(a)]},style:e.getLineStyle(),z2:1,silent:!0});b.style.fill=null;this.group.add(b)},_axisTick:function(b,e,g,f){var a=b.getModel('axisTick');var h=(a.get('inside')?-1:1)*a.get('length');var c=f[getRadiusIdx(e)];var i=map(g,function(a){return new L({shape:getAxisLineShape(e,[c,c+h],a)})});this.group.add(ae(i,{style:defaults(a.getModel('lineStyle').getLineStyle(),{stroke:b.get('axisLine.lineStyle.color')})}))},_axisLabel:function(f,h,r,p){var t=f.axis;var g=f.get('data');var b=f.getModel('axisLabel');var s=f.getFormattedLabels();var q=b.get('margin');var o=t.getLabelsCoords();for(var a=0;a<r.length;a++){var i=p[getRadiusIdx(h)];var c=h.coordToPoint([i+q,o[a]]);var k=h.cx;var l=h.cy;var n=Math.abs(c[0]-k)/i<0.3?'center':c[0]>k?'left':'right';var m=Math.abs(c[1]-l)/i<0.3?'middle':c[1]>l?'top':'bottom';if(g&&g[a]&&g[a].textStyle){b=new Model(g[a].textStyle,b,b.ecModel)}var j=new e({silent:!0});this.group.add(j);setTextStyle(j.style,b,{x:c[0],y:c[1],textFill:b.getTextColor()||f.get('axisLine.lineStyle.color'),text:s[a],textAlign:n,textVerticalAlign:m})}},_splitLine:function(f,l,h,j){var i=f.getModel('splitLine');var g=i.getModel('lineStyle');var b=g.get('color');var k=0;b=b instanceof Array?b:[b];var c=[];for(var a=0;a<h.length;a++){var e=k++%b.length;c[e]=c[e]||[];c[e].push(new L({shape:getAxisLineShape(l,j,h[a])}))}for(var a=0;a<c.length;a++){this.group.add(ae(c[a],{style:defaults({stroke:b[a%b.length]},g.getLineStyle()),silent:!0,z:f.get('z')}))}},_splitArea:function(i,l,f,e){var m=i.getModel('splitArea');var j=m.getModel('areaStyle');var b=j.get('color');var o=0;b=b instanceof Array?b:[b];var c=[];var h=Math.PI/180;var k=-f[0]*h;var p=Math.min(e[0],e[1]);var q=Math.max(e[0],e[1]);var n=i.get('clockwise');for(var a=1;a<f.length;a++){var g=o++%b.length;c[g]=c[g]||[];c[g].push(new as({shape:{cx:l.cx,cy:l.cy,r0:p,r:q,startAngle:k,endAngle:-f[a]*h,clockwise:n},silent:!0}));k=-f[a]*h}for(var a=0;a<c.length;a++){this.group.add(ae(c[a],{style:defaults({fill:b[a%b.length]},j.getAreaStyle()),silent:!0}))}}});var iW=['axisLine','axisTickLabel','axisName'];var i0=['splitLine','splitArea'];F.extend({type:'radiusAxis',axisPointerClass:'PolarAxisPointer',render:function(a,k){this.group.removeAll();if(!a.get('show')){return}var b=a.axis;var e=b.polar;var i=e.getAngleAxis();var h=b.getTicksCoords();var f=i.getExtent()[0];var g=b.getExtent();var j=layoutAxis(e,a,f);var c=new u(a,j);each$1(iW,c.add,c);this.group.add(c.getGroup());each$1(i0,function(c){if(a.get(c+'.show')&&!b.scale.isBlank()){this['_'+c](a,e,f,g,h)}},this)},_splitLine:function(i,h,m,l,g){var j=i.getModel('splitLine');var f=j.getModel('lineStyle');var b=f.get('color');var k=0;b=b instanceof Array?b:[b];var c=[];for(var a=0;a<g.length;a++){var e=k++%b.length;c[e]=c[e]||[];c[e].push(new aT({shape:{cx:h.cx,cy:h.cy,r:g[a]},silent:!0}))}for(var a=0;a<c.length;a++){this.group.add(ae(c[a],{style:defaults({stroke:b[a%b.length],fill:null},f.getLineStyle()),silent:!0}))}},_splitArea:function(j,i,n,m,e){var k=j.getModel('splitArea');var g=k.getModel('areaStyle');var b=g.get('color');var l=0;b=b instanceof Array?b:[b];var c=[];var h=e[0];for(var a=1;a<e.length;a++){var f=l++%b.length;c[f]=c[f]||[];c[f].push(new as({shape:{cx:i.cx,cy:i.cy,r0:h,r:e[a],startAngle:0,endAngle:Math.PI*2},silent:!0}));h=e[a]}for(var a=0;a<c.length;a++){this.group.add(ae(c[a],{style:defaults({fill:b[a%b.length]},g.getAreaStyle()),silent:!0}))}}});function layoutAxis(a,b,c){return {position:[a.cx,a.cy],rotation:c/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:b.getModel('axisLabel').get('rotate'),z2:1}}var jk=BaseAxisPointer.extend({makeElOption:function(g,k,f,b,p){var a=f.axis;if(a.dim==='angle'){this.animationThreshold=Math.PI/18}var h=a.polar;var n=h.getOtherAxis(a);var m=n.getExtent();var i;i=a['dataTo'+capitalFirst(a.dim)](k);var c=b.get('type');if(c&&c!=='none'){var j=buildElStyle(b);var e=iG[c](a,h,i,m,j);e.style=j;g.graphicKey=e.type;g.pointer=e}var l=b.get('label.margin');var o=getLabelPosition(k,f,b,h,l);buildLabelElOption(g,f,b,p,o)}});function getLabelPosition(r,k,s,b,j){var m=k.axis;var l=m.dataToCoord(r);var e=b.getAngleAxis().getExtent()[0];e=e/180*Math.PI;var q=b.getRadiusAxis().getExtent();var a;var g;var f;if(m.dim==='radius'){var c=create$1();rotate(c,c,e);translate(c,c,[b.cx,b.cy]);a=applyTransform$1([l,-j],c);var p=k.getModel('axisLabel').get('rotate')||0;var i=u.innerTextLayout(e,p*Math.PI/180,-1);g=i.textAlign;f=i.textVerticalAlign}else {var h=q[1];a=b.coordToPoint([h+j,l]);var n=b.cx;var o=b.cy;g=Math.abs(a[0]-n)/h<0.3?'center':a[0]>n?'left':'right';f=Math.abs(a[1]-o)/h<0.3?'middle':a[1]>o?'top':'bottom'}return {position:a,align:g,verticalAlign:f}}var iG={line:function(e,a,b,c,f){return e.dim==='angle'?{type:'Line',shape:makeLineShape(a.coordToPoint([c[0],b]),a.coordToPoint([c[1],b]))}:{type:'Circle',shape:{cx:a.cx,cy:a.cy,r:b}}},shadow:function(g,c,a,e,h){var b=g.getBandWidth();var f=Math.PI/180;return g.dim==='angle'?{type:'Sector',shape:makeSectorShape(c.cx,c.cy,e[0],e[1],(-a-b/2)*f,(-a+b/2)*f)}:{type:'Sector',shape:makeSectorShape(c.cx,c.cy,a-b/2,a+b/2,0,Math.PI*2)}}};F.registerAxisPointerClass('PolarAxisPointer',jk);registerLayout(curry(barLayoutPolar,'bar'));extendComponentView({type:'polar'});var l7=g.extend({type:'geo',coordinateSystem:null,layoutMode:'box',init:function(a){g.prototype.init.apply(this,arguments);defaultEmphasis(a.label,['show'])},optionUpdated:function(){var a=this.option;var b=this;a.regions=ee.getFilledRegions(a.regions,a.map,a.nameMap);this._optionModelMap=reduce(a.regions||[],function(c,a){if(a.name){c.set(a.name,new Model(a,b))}return c},createHashMap());this.updateSelectedMap(a.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:'center',top:'center',aspectScale:0.75,silent:!1,map:'',boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{normal:{show:!1,color:'#000'},emphasis:{show:!0,color:'rgb(100,0,0)'}},itemStyle:{normal:{borderWidth:0.5,borderColor:'#444',color:'#eee'},emphasis:{color:'rgba(255,215,0,0.8)'}},regions:[]},getRegionModel:function(a){return this._optionModelMap.get(a)||new Model(null,this,this.ecModel)},getFormattedLabel:function(b,e){var f=this.getRegionModel(b);var a=f.get('label.'+e+'.formatter');var c={name:b};if(typeof a==='function'){c.status=e;return a(c)}else {if(typeof a==='string'){return a.replace('{a}',b!=null?b:'')}}},setZoom:function(a){this.option.zoom=a},setCenter:function(a){this.option.center=a}});mixin(l7,dE);extendComponentView({type:'geo',init:function(c,b){var a=new MapDraw(b,!0);this._mapDraw=a;this.group.add(a.group)},render:function(b,c,f,a){if(a&&a.type==='geoToggleSelect'&&a.from===this.uid){return}var e=this._mapDraw;if(b.get('show')){e.draw(b,c,f,this,a)}else {this._mapDraw.group.removeAll()}this.group.silent=b.get('silent')},dispose:function(){this._mapDraw&&this._mapDraw.remove()}});function makeAction(b,a){a.update='updateView';registerAction(a,function(c,f){var e={};f.eachComponent({mainType:'geo',query:c},function(g){g[b](c.name);var h=g.coordinateSystem;each$1(h.regions,function(h){e[h.name]=g.isSelected(h.name)||!1})});return {selected:e,name:c.name}})}makeAction('toggleSelected',{type:'geoToggleSelect',event:'geoselectchanged'});makeAction('select',{type:'geoSelect',event:'geoselected'});makeAction('unSelect',{type:'geoUnSelect',event:'geounselected'});var iI=['rect','polygon','keep','clear'];var j7=function(e,i){var b=e&&e.brush;if(!isArray(b)){b=b?[b]:[]}if(!b.length){return}var f=[];each$1(b,function(a){var b=a.hasOwnProperty('toolbox')?a.toolbox:[];if(b instanceof Array){f=f.concat(b)}});var a=e&&e.toolbox;if(isArray(a)){a=a[0]}if(!a){a={feature:{}};e.toolbox=[a]}var g=a.feature||(a.feature={});var h=g.brush||(g.brush={});var c=h.type||(h.type=[]);c.push.apply(c,f);removeDuplicate(c);if(i&&!c.length){c.push.apply(c,iI)}};function removeDuplicate(a){var b={};each$1(a,function(c){b[c]=1});a.length=0;each$1(b,function(c,b){a.push(b)})}var hv=each$1;function hasKeys(a){if(a){for(var b in a){if(a.hasOwnProperty(b)){return !0}}}}function createVisualMappings(e,c,a){var b={};hv(c,function(f){var g=b[f]=createMappings();hv(e[f],function(i,h){if(!j.isValidType(h)){return}var b={type:h,visual:i};a&&a(b,f);g[h]=new j(b);if(h==='opacity'){b=clone(b);b.type='colorAlpha';g.__hidden.__alphaForOpacity=new j(b)}})});return b;function createMappings(){var b=function(){};b.prototype.__hidden=b.prototype;var f=new b();return f}}function replaceVisualOption(b,a,c){var e;each$1(c,function(f){if(a.hasOwnProperty(f)&&hasKeys(a[f])){e=!0}});e&&each$1(c,function(e){if(a.hasOwnProperty(e)&&hasKeys(a[e])){b[e]=clone(a[e])}else {delete b[e]}})}function applyVisual(h,e,a,g,i,c){var f={};each$1(h,function(b){var k=j.prepareVisualTypes(e[b]);f[b]=k});var b;function getVisual(f){return a.getItemVisual(b,f)}function setVisual(j,f){a.setItemVisual(b,j,f)}if(c==null){a.each(eachItem,!0)}else {a.each([c],eachItem,!0)}function eachItem(j,q){b=c==null?j:q;var l=a.getRawDataItem(b);if(l&&l.visualMap===!1){return}var n=g.call(i,j);var o=e[n];var m=f[n];for(var k=0,r=m.length;k<r;k++){var p=m[k];o[p]&&o[p].applyVisual(j,getVisual,setVisual)}}}var eI={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(a,c,b){return a&&b.boundingRect.contain(a[0],a[1])},rect:function(a,c,b){return a&&b.boundingRect.intersect(a)}},polygon:{point:function(a,c,b){return a&&b.boundingRect.contain(a[0],a[1])&&contain$1(b.range,a[0],a[1])},rect:function(e,j,i){var c=i.range;if(!e||c.length<=1){return !1}var a=e.x;var b=e.y;var g=e.width;var f=e.height;var h=c[0];if(contain$1(c,a,b)||contain$1(c,a+g,b)||contain$1(c,a,b+f)||contain$1(c,a+g,b+f)||BoundingRect.create(e).contain(h[0],h[1])||lineIntersectPolygon(a,b,a+g,b,c)||lineIntersectPolygon(a,b,a,b+f,c)||lineIntersectPolygon(a+g,b,a+g,b+f,c)||lineIntersectPolygon(a,b+f,a+g,b+f,c)){return !0}}}};function getLineSelectors(a){var b=['x','y'];var c=['width','height'];return {point:function(b,g,e){if(b){var c=e.range;var f=b[a];return inLineRange(f,c)}},rect:function(f,i,h){if(f){var g=h.range;var e=[f[b[a]],f[b[a]]+f[c[a]]];e[1]<e[0]&&e.reverse();return inLineRange(e[0],g)||inLineRange(e[1],g)||inLineRange(g[0],e)||inLineRange(g[1],e)}}}}function inLineRange(b,a){return a[0]<=b&&b<=a[1]}function lineIntersectPolygon(h,i,f,g,a){for(var c=0,b=a[a.length-1];c<a.length;c++){var e=a[c];if(lineIntersect(h,i,f,g,e[0],e[1],b[0],b[1])){return !0}b=e}}function lineIntersect(a,b,h,i,c,e,j,k){var f=determinant(h-a,c-j,i-b,e-k);if(nearZero(f)){return !1}var g=determinant(c-a,c-j,e-b,e-k)/f;if(g<0||g>1){return !1}var l=determinant(h-a,c-a,i-b,e-b)/f;if(l<0||l>1){return !1}return !0}function nearZero(a){return a<=1.0E-6&&a>=-1.0E-6}function determinant(a,b,c,e){return a*e-b*c}var ar=each$1;var cC=indexOf;var cK=curry;var dG=['dataToPoint','pointToData'];var ic=['grid','xAxis','yAxis','geo','graph','polar','radiusAxis','angleAxis','bmap'];function BrushTargetManager(f,e,a){var b=this._targetInfoList=[];var g={};var c=parseFinder$1(e,f);ar(i1,function(h,i){if(!a||!a.include||cC(a.include,i)>=0){h(c,b,g)}})}var bp=BrushTargetManager.prototype;bp.setOutputRanges=function(b,a){this.matchOutputRanges(b,a,function(c,e,g){(c.coordRanges||(c.coordRanges=[])).push(e);if(!c.coordRange){c.coordRange=e;var f=dZ[c.brushType](0,g,e);c.__rangeOffset={offset:gt[c.brushType](f.values,c.range,[1,1]),xyMinMax:f.xyMinMax}}})};bp.matchOutputRanges=function(b,a,c){ar(b,function(e){var f=this.findTargetInfo(e,a);if(f&&f!==!0){each$1(f.coordSyses,function(f){var g=dZ[e.brushType](1,f,e.range);c(e,g.values,f,a)})}},this)};bp.setInputRanges=function(c,b){ar(c,function(e){var f=this.findTargetInfo(e,b);if(a){assert(!f||f===!0||e.coordRange,'coordRange must be specified when coord index specified.');assert(!f||f!==!0||e.range,'range must be specified in global brush.')}e.range=e.range||[];if(f&&f!==!0){e.panelId=f.panelId;var h=dZ[e.brushType](0,f.coordSys,e.coordRange);var g=e.__rangeOffset;e.range=g?gt[e.brushType](h.values,g.offset,getScales(h.xyMinMax,g.xyMinMax)):h.values}},this)};bp.makePanelOpts=function(b,a){return map(this._targetInfoList,function(c){var e=c.getPanelRect();return {panelId:c.panelId,defaultBrushType:a&&a(c),clipPath:makeRectPanelClipPath(e),isTargetByCursor:makeRectIsTargetByCursor(e,b,c.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(e)}})};bp.controlSeries=function(e,b,c){var a=this.findTargetInfo(e,c);return a===!0||a&&cC(a.coordSyses,b.coordinateSystem)>=0};bp.findTargetInfo=function(f,h){var c=this._targetInfoList;var g=parseFinder$1(h,f);for(var a=0;a<c.length;a++){var b=c[a];var e=f.panelId;if(e){if(b.panelId===e){return b}}else {for(var a=0;a<fG.length;a++){if(fG[a](g,b)){return b}}}}return !0};function formatMinMax(a){a[0]>a[1]&&a.reverse();return a}function parseFinder$1(a,b){return parseFinder(a,b,{includeMainTypes:ic})}var i1={grid:function(e,i){var b=e.xAxisModels;var c=e.yAxisModels;var h=e.gridModels;var a=createHashMap();var f={};var g={};if(!b&&!c&&!h){return}ar(b,function(c){var b=c.axis.grid.model;a.set(b.id,b);f[b.id]=!0});ar(c,function(c){var b=c.axis.grid.model;a.set(b.id,b);g[b.id]=!0});ar(h,function(b){a.set(b.id,b);f[b.id]=!0;g[b.id]=!0});a.each(function(a){var j=a.coordinateSystem;var h=[];ar(j.getCartesians(),function(f,g){if(cC(b,f.getAxis('x').model)>=0||cC(c,f.getAxis('y').model)>=0){h.push(f)}});i.push({panelId:'grid--'+a.id,gridModel:a,coordSysModel:a,coordSys:h[0],coordSyses:h,getPanelRect:fV.grid,xAxisDeclared:f[a.id],yAxisDeclared:g[a.id]})})},geo:function(b,a){ar(b.geoModels,function(c){var e=c.coordinateSystem;a.push({panelId:'geo--'+c.id,geoModel:c,coordSysModel:c,coordSys:e,coordSyses:[e],getPanelRect:fV.geo})})}};var fG=[function(b,f){var c=b.xAxisModel;var e=b.yAxisModel;var a=b.gridModel;!a&&c&&(a=c.axis.grid.model);!a&&e&&(a=e.axis.grid.model);return a&&a===f.gridModel},function(c,b){var a=c.geoModel;return a&&a===b.geoModel}];var fV={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var a=this.coordSys;var b=a.getBoundingRect().clone();b.applyTransform(getTransform(a));return b}};var dZ={lineX:cK(axisConvert,0),lineY:cK(axisConvert,1),rect:function(g,b,a){var e=b[dG[g]]([a[0][0],a[1][0]]);var c=b[dG[g]]([a[0][1],a[1][1]]);var f=[formatMinMax([e[0],c[0]]),formatMinMax([e[1],c[1]])];return {values:f,xyMinMax:f}},polygon:function(f,c,b){var a=[[Infinity,-Infinity],[Infinity,-Infinity]];var e=map(b,function(g){var e=c[dG[f]](g);a[0][0]=Math.min(a[0][0],e[0]);a[1][0]=Math.min(a[1][0],e[1]);a[0][1]=Math.max(a[0][1],e[0]);a[1][1]=Math.max(a[1][1],e[1]);return e});return {values:e,xyMinMax:a}}};function axisConvert(c,i,g,f){if(a){assert(g.type==='cartesian2d','lineX/lineY brush is available only in cartesian2d.')}var b=g.getAxis(['x','y'][c]);var h=formatMinMax(map([0,1],function(a){return i?b.coordToData(b.toLocalCoord(f[a])):b.toGlobalCoord(b.dataToCoord(f[a]))}));var e=[];e[c]=h;e[1-c]=[NaN,NaN];return {values:h,xyMinMax:e}}var gt={lineX:cK(axisDiffProcessor,0),lineY:cK(axisDiffProcessor,1),rect:function(b,c,a){return [[b[0][0]-a[0]*c[0][0],b[0][1]-a[0]*c[0][1]],[b[1][0]-a[1]*c[1][0],b[1][1]-a[1]*c[1][1]]]},polygon:function(c,b,a){return map(c,function(e,f){return [e[0]-a[0]*b[f][0],e[1]-a[1]*b[f][1]]})}};function axisDiffProcessor(a,c,e,b){return [c[0]-b[a]*e[0],c[1]-b[a]*e[1]]}function getScales(f,e){var c=getSize(f);var b=getSize(e);var a=[c[0]/b[0],c[1]/b[1]];isNaN(a[0])&&(a[0]=1);isNaN(a[1])&&(a[1]=1);return a}function getSize(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}var gV=['inBrush','outOfBrush'];var dz='__ecBrushSelect';var dO='__ecInBrushSelectEvent';var ga=be.VISUAL.BRUSH;registerLayout(ga,function(b,c,a){b.eachComponent({mainType:'brush'},function(e){a&&a.type==='takeGlobalCursor'&&e.setBrushOption(a.key==='brush'?a.brushOption:{brushType:!1});var f=e.brushTargetManager=new BrushTargetManager(e.option,b);f.setInputRanges(e.areas,b)})});registerVisual(ga,function(a,g,f){var b=[];var e;var c;a.eachComponent({mainType:'brush'},function(h,p){var n={brushId:h.id,brushIndex:p,brushName:h.name,areas:clone(h.areas),selected:[]};b.push(n);var k=h.option;var l=k.brushLink;var o=[];var i=[];var m=[];var j=0;if(!p){e=k.throttleType;c=k.throttleDelay}var r=map(h.areas,function(b){return bindSelector(defaults({boundingRect:iJ[b.brushType](b)},b))});var q=createVisualMappings(h.option,gV,function(b){b.mappingMethod='fixed'});isArray(l)&&each$1(l,function(b){o[b]=1});function linkOthers(b){return l==='all'||o[b]}function brushed(b){return !!b.length}a.eachSeries(function(c,b){var e=m[b]=[];c.subType==='parallel'?stepAParallel(c,b,e):stepAOthers(c,b,e)});function stepAParallel(b,e){var c=b.coordinateSystem;j|=c.hasAxisBrushed();linkOthers(e)&&c.eachActiveState(b.getData(),function(c,j){c==='active'&&(i[j]=1)})}function stepAOthers(e,k,b){var c=getSelectorsByBrushType(e);if(!c||brushModelNotControll(h,k)){return}each$1(r,function(i){c[i.brushType]&&h.brushTargetManager.controlSeries(i,e,a)&&b.push(i);j|=brushed(b)});if(linkOthers(k)&&brushed(b)){var l=e.getData();l.each(function(j){if(checkInRange(c,b,l,j)){i[j]=1}})}}a.eachSeries(function(c,b){var k={seriesId:c.id,seriesIndex:b,seriesName:c.name,dataIndex:[]};n.selected.push(k);var o=getSelectorsByBrushType(c);var l=m[b];var e=c.getData();var r=linkOthers(b)?function(j){return i[j]?(k.dataIndex.push(e.getRawIndex(j)),'inBrush'):'outOfBrush'}:function(i){return checkInRange(o,l,e,i)?(k.dataIndex.push(e.getRawIndex(i)),'inBrush'):'outOfBrush'};(linkOthers(b)?j:brushed(l))&&applyVisual(gV,q,e,r)})});dispatchAction(g,e,c,b,f)});function dispatchAction(b,f,e,c,g){if(!g){return}var a=b.getZr();if(a[dO]){return}if(!a[dz]){a[dz]=doDispatch}var h=createOrUpdate(a,dz,e,f);h(b,c)}function doDispatch(a,c){if(!a.isDisposed()){var b=a.getZr();b[dO]=!0;a.dispatchAction({type:'brushSelect',batch:c});b[dO]=!1}}function checkInRange(e,c,g,f){for(var b=0,h=c.length;b<h;b++){var a=c[b];if(e[a.brushType](f,g,a.selectors,a)){return !0}}}function getSelectorsByBrushType(e){var a=e.brushSelector;if(isString(a)){var c=[];each$1(eI,function(b,f){c[f]=function(g,j,h,i){var c=j.getItemLayout(g);return b[a](c,h,i)}});return c}else {if(isFunction(a)){var b={};each$1(eI,function(f,c){b[c]=a});return b}}return a}function brushModelNotControll(c,b){var a=c.option.seriesIndex;return a!=null&&a!=='all'&&(isArray(a)?indexOf(a,b)<0:b!==a)}function bindSelector(a){var b=a.selectors={};each$1(eI[a.brushType],function(e,c){b[c]=function(f){return e(f,b,a)}});return a}var iJ={lineX:noop,lineY:noop,rect:function(a){return getBoundingRectFromMinMax(a.range)},polygon:function(f){var a;var e=f.range;for(var c=0,g=e.length;c<g;c++){a=a||[[Infinity,-Infinity],[Infinity,-Infinity]];var b=e[c];b[0]<a[0][0]&&(a[0][0]=b[0]);b[0]>a[0][1]&&(a[0][1]=b[0]);b[1]<a[1][0]&&(a[1][0]=b[1]);b[1]>a[1][1]&&(a[1][1]=b[1])}return a&&getBoundingRectFromMinMax(a)}};function getBoundingRectFromMinMax(a){return new BoundingRect(a[0][0],a[1][0],a[0][1]-a[0][0],a[1][1]-a[1][0])}var ib=['#ddd'];var m0=extendComponentModel({type:'brush',dependencies:['geo','grid','xAxis','yAxis','parallel','series'],defaultOption:{toolbox:null,brushLink:null,seriesIndex:'all',geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:'rect',brushMode:'single',transformable:!0,brushStyle:{borderWidth:1,color:'rgba(120,140,180,0.3)',borderColor:'rgba(120,140,180,0.8)'},throttleType:'fixRate',throttleDelay:0,removeOnClick:!0,z:10000},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(b,c){var a=this.option;!c&&replaceVisualOption(a,b,['inBrush','outOfBrush']);a.inBrush=a.inBrush||{};a.outOfBrush=a.outOfBrush||{color:ib}},setAreas:function(b){if(a){assert(isArray(b));each$1(b,function(a){assert(a.brushType,'Illegal areas')})}if(!b){return}this.areas=map(b,function(a){return generateBrushOption(this.option,a)},this)},setBrushOption:function(a){this.brushOption=generateBrushOption(this.option,a);this.brushType=this.brushOption.brushType}});function generateBrushOption(a,b){return merge({brushType:a.brushType,brushMode:a.brushMode,transformable:a.transformable,brushStyle:(new Model(a.brushStyle)).getItemStyle(),removeOnClick:a.removeOnClick,z:a.z},b,!0)}extendComponentView({type:'brush',init:function(b,a){this.ecModel=b;this.api=a;this.model;(this._brushController=new BrushController(a.getZr())).on('brush',bind(this._onBrush,this)).mount()},render:function(a){this.model=a;return updateController.apply(this,arguments)},updateView:updateController,updateLayout:updateController,updateVisual:updateController,dispose:function(){this._brushController.dispose()},_onBrush:function(b,c){var a=this.model.id;this.model.brushTargetManager.setOutputRanges(b,this.ecModel);(!c.isEnd||c.removeOnClick)&&this.api.dispatchAction({type:'brush',brushId:a,areas:clone(b),$from:a})}});function updateController(a,e,c,b){(!b||b.$from!==a.id)&&this._brushController.setPanels(a.brushTargetManager.makePanelOpts(c)).enableBrush(a.brushOption).updateCovers(a.areas.slice())}registerAction({type:'brush',event:'brush',update:'updateView'},function(a,b){b.eachComponent({mainType:'brush',query:a},function(c){c.setAreas(a.areas)})});registerAction({type:'brushSelect',event:'brushSelected',update:'none'},function(){});var hl={};function register$1(b,a){hl[b]=a}function get$5(a){return hl[a]}var bq={toolbox:{brush:{title:{rect:'',polygon:'',lineX:'',lineY:'',keep:'',clear:''}},dataView:{title:'',lang:['','','']},dataZoom:{title:{zoom:'',back:''}},magicType:{title:{line:'',bar:'',stack:'',tiled:''}},restore:{title:''},saveAsImage:{title:'',lang:['']}}};var lY=bq.toolbox.brush;function Brush(b,a,c){this.model=b;this.ecModel=a;this.api=c;this._brushType;this._brushMode}Brush.defaultOption={show:!0,type:['rect','polygon','lineX','lineY','keep','clear'],icon:{rect:'M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13',polygon:'M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2',lineX:'M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4',lineY:'M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4',keep:'M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z',clear:'M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2'},title:clone(lY.title)};var bN=Brush.prototype;bN.render=bN.updateView=bN.updateLayout=function(c,f,g){var b;var a;var e;f.eachComponent({mainType:'brush'},function(h){b=h.brushType;a=h.brushOption.brushMode||'single';e|=h.areas.length});this._brushType=b;this._brushMode=a;each$1(c.get('type',!0),function(h){c.setIconStatus(h,(h==='keep'?a==='multiple':h==='clear'?e:h===b)?'emphasis':'normal')})};bN.getIcons=function(){var c=this.model;var a=c.get('icon',!0);var b={};each$1(c.get('type',!0),function(c){if(a[c]){b[c]=a[c]}});return b};bN.onclick=function(f,b,a){var e=this._brushType;var c=this._brushMode;if(a==='clear'){b.dispatchAction({type:'axisAreaSelect',intervals:[]});b.dispatchAction({type:'brush',command:'clear',areas:[]})}else {b.dispatchAction({type:'takeGlobalCursor',key:'brush',brushOption:{brushType:a==='keep'?e:e===a?!1:a,brushMode:a==='keep'?c==='multiple'?'single':'multiple':c}})}};register$1('brush',Brush);registerPreprocessor(j7);var fM=86400000;function Calendar(a,b,c){this._model=a}Calendar.prototype={constructor:Calendar,type:'calendar',dimensions:['time','value'],getDimensionsInfo:function(){return [{name:'time',type:'time'}]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(a){a=parseDate(a);var f=a.getFullYear();var c=a.getMonth()+1;c=c<10?'0'+c:c;var b=a.getDate();b=b<10?'0'+b:b;var e=a.getDay();e=Math.abs((e+7-this.getFirstDayOfWeek())%7);return {y:f,m:c,d:b,day:e,time:a.getTime(),formatedDate:f+'-'+c+'-'+b,date:a}},getNextNDay:function(a,b){b=b||0;if(b===0){return this.getDateInfo(a)}a=new Date(this.getDateInfo(a).time);a.setDate(a.getDate()+b);return this.getDateInfo(a)},update:function(j,g){this._firstDayOfWeek=+this._model.getModel('dayLabel').get('firstDay');this._orient=this._model.get('orient');this._lineWidth=this._model.getModel('itemStyle.normal').getItemStyle().lineWidth||0;this._rangeInfo=this._getRangeInfo(this._initRangeOption());var f=this._rangeInfo.weeks||1;var e=['width','height'];var a=this._model.get('cellSize').slice();var b=this._model.getBoxLayoutParams();var c=this._orient==='horizontal'?[f,7]:[7,f];each$1([0,1],function(f){if(cellSizeSpecified(a,f)){b[e[f]]=a[f]*c[f]}});var i={width:g.getWidth(),height:g.getHeight()};var h=this._rect=getLayoutRect(b,i);each$1([0,1],function(b){if(!cellSizeSpecified(a,b)){a[b]=h[e[b]]/c[b]}});function cellSizeSpecified(a,b){return a[b]!=null&&a[b]!=='auto'}this._sw=a[0];this._sh=a[1]},dataToPoint:function(b,c){isArray(b)&&(b=b[0]);c==null&&(c=!0);var a=this.getDateInfo(b);var e=this._rangeInfo;var h=a.formatedDate;if(c&&!(a.time>=e.start.time&&a.time<=e.end.time)){return [NaN,NaN]}var g=a.day;var f=this._getRangeInfo([e.start.time,h]).nthWeek;if(this._orient==='vertical'){return [this._rect.x+g*this._sw+this._sw/2,this._rect.y+f*this._sh+this._sh/2]}return [this._rect.x+f*this._sw+this._sw/2,this._rect.y+g*this._sh+this._sh/2]},pointToData:function(b){var a=this.pointToDate(b);return a&&a.time},dataToRect:function(c,b){var a=this.dataToPoint(c,b);return {contentShape:{x:a[0]-(this._sw-this._lineWidth)/2,y:a[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:a,tl:[a[0]-this._sw/2,a[1]-this._sh/2],tr:[a[0]+this._sw/2,a[1]-this._sh/2],br:[a[0]+this._sw/2,a[1]+this._sh/2],bl:[a[0]-this._sw/2,a[1]+this._sh/2]}},pointToDate:function(a){var c=Math.floor((a[0]-this._rect.x)/this._sw)+1;var e=Math.floor((a[1]-this._rect.y)/this._sh)+1;var b=this._rangeInfo.range;if(this._orient==='vertical'){return this._getDateByWeeksAndDay(e,c-1,b)}return this._getDateByWeeksAndDay(c,e-1,b)},convertToPixel:curry(doConvert$2,'dataToPoint'),convertFromPixel:curry(doConvert$2,'pointToData'),_initRangeOption:function(){var b=this._model.get('range');var a=b;if(isArray(a)&&a.length===1){a=a[0]}if(/^\d{4}$/.test(a)){b=[a+'-01-01',a+'-12-31']}if(/^\d{4}[\/|-]\d{1,2}$/.test(a)){var e=this.getDateInfo(a);var c=e.date;c.setMonth(c.getMonth()+1);var g=this.getNextNDay(c,-1);b=[e.formatedDate,g.formatedDate]}if(/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(a)){b=[a,a]}var f=this._getRangeInfo(b);if(f.start.time>f.end.time){b.reverse()}return b},_getRangeInfo:function(a){a=[this.getDateInfo(a[0]),this.getDateInfo(a[1])];var e;if(a[0].time>a[1].time){e=!0;a.reverse()}var c=Math.floor(a[1].time/fM)-Math.floor(a[0].time/fM)+1;var b=new Date(a[0].time);var g=b.getDate();var h=a[1].date.getDate();b.setDate(g+c-1);if(b.getDate()!==h){var i=b.getTime()-a[1].time>0?1:-1;while(b.getDate()!==h&&(b.getTime()-a[1].time)*i>0){c-=i;b.setDate(g+c-1)}}var f=Math.floor((c+a[0].day+6)/7);var j=e?-f+1:f-1;e&&a.reverse();return {range:[a[0].formatedDate,a[1].formatedDate],start:a[0],end:a[1],allDay:c,weeks:f,nthWeek:j,fweek:a[0].day,lweek:a[1].day}},_getDateByWeeksAndDay:function(b,c,g){var a=this._getRangeInfo(g);if(b>a.weeks||b===0&&c<a.fweek||b===a.weeks&&c>a.lweek){return !1}var f=(b-1)*7-a.fweek+c;var e=new Date(a.start.time);e.setDate(a.start.d+f);return this.getDateInfo(e)}};Calendar.dimensions=Calendar.prototype.dimensions;Calendar.getDimensionsInfo=Calendar.prototype.getDimensionsInfo;Calendar.create=function(b,c){var a=[];b.eachComponent('calendar',function(e){var f=new Calendar(e,b,c);a.push(f);e.coordinateSystem=f});b.eachSeries(function(e){if(e.get('coordinateSystem')==='calendar'){e.coordinateSystem=a[e.get('calendarIndex')||0]}});return a};function doConvert$2(f,h,e,g){var a=e.calendarModel;var b=e.seriesModel;var c=a?a.coordinateSystem:b?b.coordinateSystem:null;return c===this?c[f](g):null}CoordinateSystemManager.register('calendar',Calendar);var gn=g.extend({type:'calendar',coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:'horizontal',splitLine:{show:!0,lineStyle:{color:'#000',width:1,type:'solid'}},itemStyle:{normal:{color:'#fff',borderWidth:1,borderColor:'#ccc'}},dayLabel:{show:!0,firstDay:0,position:'start',margin:'50%',nameMap:'en',color:'#000'},monthLabel:{show:!0,position:'start',margin:5,align:'center',nameMap:'en',formatter:null,color:'#000'},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:'#ccc',fontFamily:'sans-serif',fontWeight:'bolder',fontSize:20}},init:function(a,c,f,e){var b=getLayoutParams(a);gn.superApply(this,'init',arguments);mergeAndNormalizeLayoutParams$1(a,b)},mergeOption:function(a,b){gn.superApply(this,'mergeOption',arguments);mergeAndNormalizeLayoutParams$1(this.option,a)}});function mergeAndNormalizeLayoutParams$1(b,c){var a=b.cellSize;if(!isArray(a)){a=b.cellSize=[a,a]}else {if(a.length===1){a[1]=a[0]}}var e=map([0,1],function(e){if(sizeCalculable(c,e)){a[e]='auto'}return a[e]!=null&&a[e]!=='auto'});mergeLayoutParam(b,c,{type:'box',ignoreSize:e})}var lv={EN:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],CN:['','','','','','','','','','','','']};var lS={EN:['S','M','T','W','T','F','S'],CN:['','','','','','','']};extendComponentView({type:'calendar',_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(a,g,h){var b=this.group;b.removeAll();var f=a.coordinateSystem;var c=f.getRangeInfo();var e=f.getOrient();this._renderDayRect(a,c,b);this._renderLines(a,c,e,b);this._renderYearText(a,c,e,b);this._renderMonthText(a,e,b);this._renderWeekText(a,c,e,b)},_renderDayRect:function(c,e,h){var a=c.coordinateSystem;var g=c.getModel('itemStyle.normal').getItemStyle();var l=a.getCellWidth();var j=a.getCellHeight();for(var b=e.start.time;b<=e.end.time;b=a.getNextNDay(b,1).time){var f=a.dataToRect([b],!1).tl;var i=new k({shape:{x:f[0],y:f[1],width:l,height:j},cursor:'default',style:g});h.add(i)}},_renderLines:function(g,b,h,i){var a=this;var c=g.coordinateSystem;var f=g.getModel('splitLine.lineStyle').getLineStyle();var k=g.get('splitLine.show');var l=f.lineWidth;this._tlpoints=[];this._blpoints=[];this._firstDayOfMonth=[];this._firstDayPoints=[];var e=b.start;for(var m=0;e.time<=b.end.time;m++){addPoints(e.formatedDate);if(m===0){e=c.getDateInfo(b.start.y+'-'+b.start.m)}var j=e.date;j.setMonth(j.getMonth()+1);e=c.getDateInfo(j)}addPoints(c.getNextNDay(b.end.time,1).formatedDate);function addPoints(j){a._firstDayOfMonth.push(c.getDateInfo(j));a._firstDayPoints.push(c.dataToRect([j],!1).tl);var e=a._getLinePointsOfOneWeek(g,j,h);a._tlpoints.push(e[0]);a._blpoints.push(e[e.length-1]);k&&a._drawSplitline(e,f,i)}k&&this._drawSplitline(a._getEdgesPoints(a._tlpoints,l,h),f,i);k&&this._drawSplitline(a._getEdgesPoints(a._blpoints,l,h),f,i)},_getEdgesPoints:function(c,e,f){var a=[c[0].slice(),c[c.length-1].slice()];var b=f==='horizontal'?0:1;a[0][b]=a[0][b]-e/2;a[1][b]=a[1][b]+e/2;return a},_drawSplitline:function(c,a,e){var b=new T({z2:20,shape:{points:c},style:a});e.add(b)},_getLinePointsOfOneWeek:function(h,c,i){var a=h.coordinateSystem;c=a.getDateInfo(c);var b=[];for(var f=0;f<7;f++){var e=a.getNextNDay(c.time,f);var g=a.dataToRect([e.time],!1);b[2*e.day]=g.tl;b[2*e.day+1]=g[i==='horizontal'?'bl':'tr']}return b},_formatterLabel:function(a,b){if(typeof a==='string'&&a){return formatTplSimple(a,b)}if(typeof a==='function'){return a(b)}return b.nameMap},_yearTextPositionControl:function(h,a,g,b,e){a=a.slice();var c=['center','bottom'];if(b==='bottom'){a[1]+=e;c=['center','top']}else {if(b==='left'){a[0]-=e}else {if(b==='right'){a[0]+=e;c=['center','top']}else {a[1]-=e}}}var f=0;if(b==='left'||b==='right'){f=Math.PI/2}return {rotation:f,position:a,style:{textAlign:c[0],textVerticalAlign:c[1]}}},_renderYearText:function(m,b,i,s){var c=m.getModel('yearLabel');if(!c.get('show')){return}var q=c.get('margin');var h=c.get('position');if(!h){h=i!=='horizontal'?'top':'left'}var a=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]];var k=(a[0][0]+a[1][0])/2;var l=(a[0][1]+a[1][1])/2;var g=i==='horizontal'?0:1;var o={top:[k,a[g][1]],bottom:[k,a[1-g][1]],left:[a[1-g][0],l],right:[a[g][0],l]};var j=b.start.y;if(+b.end.y>+b.start.y){j=j+'-'+b.end.y}var n=c.get('formatter');var r={start:b.start.y,end:b.end.y,nameMap:j};var p=this._formatterLabel(n,r);var f=new e({z2:30});setTextStyle(f.style,c,{text:p}),f.attr(this._yearTextPositionControl(f,o[h],i,h,q));s.add(f)},_monthTextPositionControl:function(i,f,j,g,h){var b='left';var a='top';var c=i[0];var e=i[1];if(j==='horizontal'){e=e+h;if(f){b='center'}if(g==='start'){a='bottom'}}else {c=c+h;if(f){a='middle'}if(g==='start'){b='right'}}return {x:c,y:e,textAlign:b,textVerticalAlign:a}},_renderMonthText:function(q,m,v){var a=q.getModel('monthLabel');if(!a.get('show')){return}var f=a.get('nameMap');var g=a.get('margin');var j=a.get('position');var u=a.get('align');var h=[this._tlpoints,this._blpoints];if(isString(f)){f=lv[f.toUpperCase()]||[]}var n=j==='start'?0:1;var i=m==='horizontal'?0:1;g=j==='start'?-g:g;var l=u==='center';for(var b=0;b<h[n].length-1;b++){var o=h[n][b].slice();var c=this._firstDayOfMonth[b];if(l){var p=this._firstDayPoints[b];o[i]=(p[i]+h[0][b+1][i])/2}var r=a.get('formatter');var w=f[+c.m-1];var t={yyyy:c.y,yy:(c.y+'').slice(2),MM:c.m,M:+c.m,nameMap:w};var s=this._formatterLabel(r,t);var k=new e({z2:30});extend(setTextStyle(k.style,a,{text:s}),this._monthTextPositionControl(o,l,m,j,g));v.add(k)}},_weekTextPositionControl:function(i,k,j,f,e){var h='center';var g='middle';var b=i[0];var c=i[1];var a=j==='start';if(k==='horizontal'){b=b+f+(a?1:-1)*e[0]/2;h=a?'right':'left'}else {c=c+f+(a?1:-1)*e[1]/2;g=a?'bottom':'top'}return {x:b,y:c,textAlign:h,textVerticalAlign:g}},_renderWeekText:function(i,g,l,q){var b=i.getModel('dayLabel');if(!b.get('show')){return}var a=i.coordinateSystem;var o=b.get('position');var h=b.get('nameMap');var c=b.get('margin');var p=a.getFirstDayOfWeek();if(isString(h)){h=lS[h.toUpperCase()]||[]}var m=a.getNextNDay(g.end.time,7-g.lweek).time;var j=[a.getCellWidth(),a.getCellHeight()];c=parsePercent$1(c,j[l==='horizontal'?0:1]);if(o==='start'){m=a.getNextNDay(g.start.time,-(7+g.fweek)).time;c=-c}for(var f=0;f<7;f++){var s=a.getNextNDay(m,f);var r=a.dataToRect([s.time],!1).center;var n=f;n=Math.abs((f+p)%7);var k=new e({z2:30});extend(setTextStyle(k.style,b,{text:h[n]}),this._weekTextPositionControl(r,l,o,c,j));q.add(k)}}});extendComponentModel({type:'title',layoutMode:{type:'box',ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:'',target:'blank',subtext:'',subtarget:'blank',left:0,top:0,backgroundColor:'rgba(0,0,0,0)',borderColor:'#ccc',borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:'bolder',color:'#333'},subtextStyle:{color:'#aaa'}}});extendComponentView({type:'title',render:function(a,x,v){this.group.removeAll();if(!a.get('show')){return}var i=this.group;var q=a.getModel('textStyle');var p=a.getModel('subtextStyle');var g=a.get('textAlign');var c=a.get('textBaseline');var j=new e({style:setTextStyle({},q,{text:a.get('text'),textFill:q.getTextColor()},{disableBox:!0}),z2:10});var w=j.getBoundingRect();var s=a.get('subtext');var l=new e({style:setTextStyle({},p,{text:s,textFill:p.getTextColor(),y:w.height+a.get('itemGap'),textVerticalAlign:'top'},{disableBox:!0}),z2:10});var o=a.get('link');var n=a.get('sublink');j.silent=!o;l.silent=!n;if(o){j.on('click',function(){window.open(o,'_'+a.get('target'))})}if(n){l.on('click',function(){window.open(n,'_'+a.get('subtarget'))})}i.add(j);s&&i.add(l);var f=i.getBoundingRect();var m=a.getBoxLayoutParams();m.width=f.width;m.height=f.height;var b=getLayoutRect(m,{width:v.getWidth(),height:v.getHeight()},a.get('padding'));if(!g){g=a.get('left')||a.get('right');if(g==='middle'){g='center'}if(g==='right'){b.x+=b.width}else {if(g==='center'){b.x+=b.width/2}}}if(!c){c=a.get('top')||a.get('bottom');if(c==='center'){c='middle'}if(c==='bottom'){b.y+=b.height}else {if(c==='middle'){b.y+=b.height/2}}c=c||'top'}i.attr('position',[b.x,b.y]);var r={textAlign:g,textVerticalAlign:c};j.setStyle(r);l.setStyle(r);f=i.getBoundingRect();var h=b.margin;var t=a.getItemStyle(['color','opacity']);t.fill=a.get('backgroundColor');var u=new k({shape:{x:f.x-h[3],y:f.y-h[0],width:f.width+h[1]+h[3],height:f.height+h[0]+h[2],r:a.get('borderRadius')},style:t,silent:!0});subPixelOptimizeRect(u);i.add(u)}});g.registerSubTypeDefaulter('dataZoom',function(){return 'slider'});var lL=['x','y','z','radius','angle','single'];var mu=['cartesian2d','polar','singleAxis'];function isCoordSupported(a){return indexOf(mu,a)>=0}function createNameEach(b,a){b=b.slice();var e=map(b,capitalFirst);a=(a||[]).slice();var c=map(a,capitalFirst);return function(f,g){each$1(b,function(j,k){var i={name:j,capital:e[k]};for(var h=0;h<a.length;h++){i[a[h]]=j+c[h]}f.call(g,i)})}}var gu=createNameEach(lL,['axisIndex','axis','index','id']);function createLinkedNodesFinder(c,a,b){return function(g){var e={nodes:[],records:{}};a(function(f){e.records[f.name]={}});if(!g){return e}absorb(g,e);var f;do{f=!1;c(processSingleNode)}while(f);function processSingleNode(h){if(!isNodeAbsorded(h,e)&&isLinked(h,e)){absorb(h,e);f=!0}}return e};function isNodeAbsorded(f,e){return indexOf(e.nodes,f)>=0}function isLinked(g,f){var e=!1;a(function(h){each$1(b(g,h)||[],function(i){f.records[h.name][i]&&(e=!0)})});return e}function absorb(f,e){e.nodes.push(f);a(function(g){each$1(b(f,g)||[],function(h){e.records[g.name][h]=!0})})}}var aS=each$1;var hR=asc;var ek=function(c,b,a,e){this._dimName=c;this._axisIndex=b;this._valueWindow;this._percentWindow;this._dataExtent;this._minMaxSpan;this.ecModel=e;this._dataZoomModel=a};ek.prototype={constructor:ek,hostedBy:function(a){return this._dataZoomModel===a},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var a=[];var b=this.ecModel;b.eachSeries(function(c){if(isCoordSupported(c.get('coordinateSystem'))){var e=this._dimName;var f=b.queryComponents({mainType:e+'Axis',index:c.get(e+'AxisIndex'),id:c.get(e+'AxisId')})[0];if(this._axisIndex===(f&&f.componentIndex)){a.push(c)}}},this);return a},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+'Axis',this._axisIndex)},getOtherAxisModel:function(){var b=this._dimName;var h=this.ecModel;var g=this.getAxisModel();var f=b==='x'||b==='y';var c;var a;if(f){a='gridIndex';c=b==='x'?'y':'x'}else {a='polarIndex';c=b==='angle'?'radius':'angle'}var e;h.eachComponent(c+'Axis',function(b){if((b.get(a)||0)===(g.get(a)||0)){e=b}});return e},getMinMaxSpan:function(){return clone(this._minMaxSpan)},calculateDataWindow:function(b){var f=this._dataExtent;var i=this.getAxisModel();var g=i.axis.scale;var h=this._dataZoomModel.getRangePropMode();var c=[0,100];var e=[b.start,b.end];var a=[];aS(['startValue','endValue'],function(c){a.push(b[c]!=null?g.parse(b[c]):null)});aS([0,1],function(i){var k=a[i];var j=e[i];if(h[i]==='percent'){if(j==null){j=c[i]}k=g.parse(linearMap(j,c,f,!0))}else {j=linearMap(k,f,c,!0)}a[i]=k;e[i]=j});return {valueWindow:hR(a),percentWindow:hR(e)}},reset:function(a){if(a!==this._dataZoomModel){return}this._dataExtent=calculateDataExtent(this,this._dimName,this.getTargetSeriesModels());var b=this.calculateDataWindow(a.option);this._valueWindow=b.valueWindow;this._percentWindow=b.percentWindow;setMinMaxSpan(this);setAxisModel(this)},restore:function(a){if(a!==this._dataZoomModel){return}this._valueWindow=this._percentWindow=null;setAxisModel(this,!0)},filterData:function(c){if(c!==this._dataZoomModel){return}var g=this._dimName;var f=this.getTargetSeriesModels();var b=c.get('filterMode');var a=this._valueWindow;if(b==='none'){return}var e=this.getOtherAxisModel();if(c.get('$fromToolbox')&&e&&e.get('type')==='category'){b='empty'}aS(f,function(f){var e=f.getData();var h=f.coordDimToDataDim(g);if(b==='weakFilter'){e&&e.filterSelf(function(o){var n;var m;var l;for(var g=0;g<h.length;g++){var b=e.get(h[g],o);var i=!isNaN(b);var k=b<a[0];var j=b>a[1];if(i&&!k&&!j){return !0}i&&(l=!0);k&&(n=!0);j&&(m=!0)}return l&&n&&m})}else {e&&aS(h,function(a){if(b==='empty'){f.setData(e.map(a,function(b){return !isInWindow(b)?NaN:b}))}else {e.filterSelf(a,isInWindow)}})}});function isInWindow(b){return b>=a[0]&&b<=a[1]}}};function calculateDataExtent(c,e,b){var a=[Infinity,-Infinity];aS(b,function(f){var g=f.getData();if(g){aS(f.coordDimToDataDim(e),function(i){var h=g.getDataExtent(i);h[0]<a[0]&&(a[0]=h[0]);h[1]>a[1]&&(a[1]=h[1])})}});if(a[1]<a[0]){a=[NaN,NaN]}fixExtentByAxis(c,a);return a}function fixExtentByAxis(h,a){var b=h.getAxisModel();var e=b.getMin(!0);var f=b.get('type')==='category';var g=f&&(b.get('data')||[]).length;if(e!=null&&e!=='dataMin'&&typeof e!=='function'){a[0]=e}else {if(f){a[0]=g>0?0:NaN}}var c=b.getMax(!0);if(c!=null&&c!=='dataMax'&&typeof c!=='function'){a[1]=c}else {if(f){a[1]=g>0?g-1:NaN}}if(!b.get('scale',!0)){a[0]>0&&(a[0]=0);a[1]<0&&(a[1]=0)}return a}function setAxisModel(e,h){var g=e.getAxisModel();var b=e._percentWindow;var c=e._valueWindow;if(!b){return}var a=getPixelPrecision(c,[0,500]);a=Math.min(a,20);var f=h||b[0]===0&&b[1]===100;g.setRange(f?null:+c[0].toFixed(a),f?null:+c[1].toFixed(a))}function setMinMaxSpan(a){var b=a._minMaxSpan={};var c=a._dataZoomModel;aS(['min','max'],function(f){b[f+'Span']=c.get(f+'Span');var e=c.get(f+'ValueSpan');if(e!=null){b[f+'ValueSpan']=e;e=a.getAxisModel().axis.scale.parse(e);if(e!=null){var g=a._dataExtent;b[f+'Span']=linearMap(g[0]+e,g,[0,100],!0)}}})}var bh=each$1;var aL=gu;var dP=extendComponentModel({type:'dataZoom',dependencies:['xAxis','yAxis','zAxis','radiusAxis','angleAxis','singleAxis','series'],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:'filter',throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(a,e,c){this._dataIntervalByAxis={};this._dataInfo={};this._axisProxies={};this.textStyleModel;this._autoThrottle=!0;this._rangePropMode=['percent','percent'];var b=retrieveRaw(a);this.mergeDefaultAndTheme(a,c);this.doInit(b)},mergeOption:function(a){var b=retrieveRaw(a);merge(this.option,a,!0);this.doInit(b)},doInit:function(b){var a=this.option;if(!f.canvasSupported){a.realtime=!1}this._setDefaultThrottle(b);updateRangeUse(this,b);bh([['start','startValue'],['end','endValue']],function(e,c){if(this._rangePropMode[c]==='value'){a[e[0]]=null}},this);this.textStyleModel=this.getModel('textStyle');this._resetTarget();this._giveAxisProxies()},_giveAxisProxies:function(){var a=this._axisProxies;this.eachTargetAxis(function(c,b,h,g){var e=this.dependentModels[c.axis][b];var f=e.__dzAxisProxy||(e.__dzAxisProxy=new ek(c.name,b,this,g));a[c.name+'_'+b]=f},this)},_resetTarget:function(){var a=this.option;var b=this._judgeAutoMode();aL(function(c){var b=c.axisIndex;a[b]=normalizeToArray(a[b])},this);if(b==='axisIndex'){this._autoSetAxisIndex()}else {if(b==='orient'){this._autoSetOrient()}}},_judgeAutoMode:function(){var b=this.option;var a=!1;aL(function(c){if(b[c.axisIndex]!=null){a=!0}},this);var c=b.orient;if(c==null&&a){return 'orient'}else {if(!a){if(c==null){b.orient='horizontal'}return 'axisIndex'}}},_autoSetAxisIndex:function(){var b=!0;var g=this.get('orient',!0);var c=this.option;var e=this.dependentModels;if(b){var f=g==='vertical'?'y':'x';if(e[f+'Axis'].length){c[f+'AxisIndex']=[0];b=!1}else {bh(e.singleAxis,function(a){if(b&&a.get('orient',!0)===g){c.singleAxisIndex=[a.componentIndex];b=!1}})}}if(b){aL(function(g){if(!b){return}var a=[];var f=this.dependentModels[g.axis];if(f.length&&!a.length){for(var e=0,h=f.length;e<h;e++){if(f[e].get('type')==='category'){a.push(e)}}}c[g.axisIndex]=a;if(a.length){b=!1}},this)}if(b){this.ecModel.eachSeries(function(b){if(this._isSeriesHasAllAxesTypeOf(b,'value')){aL(function(f){var g=c[f.axisIndex];var e=b.get(f.axisIndex);var i=b.get(f.axisId);var h=b.ecModel.queryComponents({mainType:f.axis,index:e,id:i})[0];if(a){if(!h){throw new Error(f.axis+' "'+retrieve(e,i,0)+'" not found')}}e=h.componentIndex;if(indexOf(g,e)<0){g.push(e)}})}},this)}},_autoSetOrient:function(){var a;this.eachTargetAxis(function(b){!a&&(a=b.name)},this);this.option.orient=a==='y'?'vertical':'horizontal'},_isSeriesHasAllAxesTypeOf:function(b,c){var a=!0;aL(function(f){var g=b.get(f.axisIndex);var e=this.dependentModels[f.axis][g];if(!e||e.get('type')!==c){a=!1}},this);return a},_setDefaultThrottle:function(b){if(b.hasOwnProperty('throttle')){this._autoThrottle=!1}if(this._autoThrottle){var a=this.ecModel.option;this.option.throttle=a.animation&&a.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var a;aL(function(b){if(a==null){var c=this.get(b.axisIndex);if(c.length){a=this.dependentModels[b.axis][c[0]]}}},this);return a},eachTargetAxis:function(a,b){var c=this.ecModel;aL(function(e){bh(this.get(e.axisIndex),function(f){a.call(b,e,f,this,c)},this)},this)},getAxisProxy:function(b,a){return this._axisProxies[b+'_'+a]},getAxisModel:function(c,b){var a=this.getAxisProxy(c,b);return a&&a.getAxisModel()},setRawRange:function(a,c){var b=this.option;bh([['start','startValue'],['end','endValue']],function(e){if(a[e[0]]!=null||a[e[1]]!=null){b[e[0]]=a[e[0]];b[e[1]]=a[e[1]]}},this);!c&&updateRangeUse(this,a)},getPercentRange:function(){var a=this.findRepresentativeAxisProxy();if(a){return a.getDataPercentWindow()}},getValueRange:function(a,b){if(a==null&&b==null){var c=this.findRepresentativeAxisProxy();if(c){return c.getDataValueWindow()}}else {return this.getAxisProxy(a,b).getDataValueWindow()}},findRepresentativeAxisProxy:function(c){if(c){return c.__dzAxisProxy}var a=this._axisProxies;for(var b in a){if(a.hasOwnProperty(b)&&a[b].hostedBy(this)){return a[b]}}for(var b in a){if(a.hasOwnProperty(b)&&!a[b].hostedBy(this)){return a[b]}}},getRangePropMode:function(){return this._rangePropMode.slice()}});function retrieveRaw(a){var b={};bh(['start','end','startValue','endValue','throttle'],function(c){a.hasOwnProperty(c)&&(b[c]=a[c])});return b}function updateRangeUse(c,e){var a=c._rangePropMode;var b=c.get('rangeMode');bh([['start','startValue'],['end','endValue']],function(i,f){var g=e[i[0]]!=null;var h=e[i[1]]!=null;if(g&&!h){a[f]='percent'}else {if(!g&&h){a[f]='value'}else {if(b){a[f]=b[f]}else {if(g){a[f]='percent'}}}}})}var dW=ad.extend({type:'dataZoom',render:function(a,b,c,e){this.dataZoomModel=a;this.ecModel=b;this.api=c},getTargetCoordInfo:function(){var b=this.dataZoomModel;var c=this.ecModel;var a={};b.eachTargetAxis(function(g,f){var e=c.getComponent(g.axis,f);if(e){var b=e.getCoordSysModel();b&&save(b,e,a[b.mainType]||(a[b.mainType]=[]),b.componentIndex)}},this);function save(e,g,a,f){var b;for(var c=0;c<a.length;c++){if(a[c].model===e){b=a[c];break}}if(!b){a.push(b={model:e,axisModels:[],coordIndex:f})}b.axisModels.push(g)}return a}});var mZ=dP.extend({type:'dataZoom.slider',layoutMode:'box',defaultOption:{show:!0,right:'ph',top:'ph',width:'ph',height:'ph',left:null,bottom:null,backgroundColor:'rgba(47,69,84,0)',dataBackground:{lineStyle:{color:'#2f4554',width:0.5,opacity:0.3},areaStyle:{color:'rgba(47,69,84,0.3)',opacity:0.3}},borderColor:'#ddd',fillerColor:'rgba(167,183,204,0.4)',handleIcon:'M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z',handleSize:'100%',handleStyle:{color:'#a7b7cc'},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:'auto',realtime:!0,zoomLock:!1,textStyle:{color:'#333'}}});var cT=k;var aN=linearMap;var e3=asc;var ag=bind;var eU=each$1;var fl=7;var ia=1;var df=30;var bB='horizontal';var hj='vertical';var lP=5;var h9=['line','bar','candlestick','scatter'];var dI=dW.extend({type:'dataZoom.slider',init:function(b,a){this._displayables={};this._orient;this._range;this._handleEnds;this._size;this._handleWidth;this._handleHeight;this._location;this._dragging;this._dataShadowInfo;this.api=a},render:function(b,c,e,a){dI.superApply(this,'render',arguments);createOrUpdate(this,'_dispatchZoomAction',this.dataZoomModel.get('throttle'),'fixRate');this._orient=b.get('orient');if(this.dataZoomModel.get('show')===!1){this.group.removeAll();return}if(!a||a.type!=='dataZoom'||a.from!==this.uid){this._buildView()}this._updateView()},remove:function(){dI.superApply(this,'remove',arguments);clear(this,'_dispatchZoomAction')},dispose:function(){dI.superApply(this,'dispose',arguments);clear(this,'_dispatchZoomAction')},_buildView:function(){var a=this.group;a.removeAll();this._resetLocation();this._resetInterval();var c=this._displayables.barGroup=new b();this._renderBackground();this._renderHandle();this._renderDataShadow();a.add(c);this._positionGroup()},_resetLocation:function(){var f=this.dataZoomModel;var g=this.api;var a=this._findCoordRect();var e={width:g.getWidth(),height:g.getHeight()};var h=this._orient===bB?{right:e.width-a.x-a.width,top:e.height-df-fl,width:a.width,height:df}:{right:fl,top:a.y,width:df,height:a.height};var c=getLayoutParams(f.option);each$1(['right','top','width','height'],function(a){if(c[a]==='ph'){c[a]=h[a]}});var b=getLayoutRect(c,e,f.padding);this._location={x:b.x,y:b.y};this._size=[b.width,b.height];this._orient===hj&&this._size.reverse()},_positionGroup:function(){var f=this.group;var h=this._location;var c=this._orient;var e=this.dataZoomModel.getFirstTargetAxisModel();var b=e&&e.get('inverse');var g=this._displayables.barGroup;var a=(this._dataShadowInfo||{}).otherAxisInverse;g.attr(c===bB&&!b?{scale:a?[1,1]:[1,-1]}:c===bB&&b?{scale:a?[-1,1]:[-1,-1]}:c===hj&&!b?{scale:a?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:a?[-1,-1]:[-1,1],rotation:Math.PI/2});var i=f.getBoundingRect([g]);f.attr('position',[h.x-i.x,h.y-i.y])},_getViewExtent:function(){return [0,this._size[0]]},_renderBackground:function(){var c=this.dataZoomModel;var a=this._size;var b=this._displayables.barGroup;b.add(new cT({silent:!0,shape:{x:0,y:0,width:a[0],height:a[1]},style:{fill:c.get('backgroundColor')},z2:-40}));b.add(new cT({shape:{x:0,y:0,width:a[0],height:a[1]},style:{fill:'transparent'},z2:0,onclick:bind(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var l=this._dataShadowInfo=this._prepareDataShadowInfo();if(!l){return}var g=this._size;var j=l.series;var f=j.getRawData();var k=j.getShadowDim?j.getShadowDim():l.otherDim;if(k==null){return}var a=f.getDataExtent(k);var m=(a[1]-a[0])*0.3;a=[a[0]-m,a[1]+m];var p=[0,g[1]];var q=[0,g[0]];var b=[[g[0],0],[0,0]];var c=[];var o=q[1]/(f.count()-1);var e=0;var n=Math.round(f.count()/g[0]);var i;f.each([k],function(g,j){if(n>0&&j%n){e+=o;return}var f=g==null||isNaN(g)||g==='';var h=f?0:aN(g,a,p,!0);if(f&&!i&&j){b.push([b[b.length-1][0],0]);c.push([c[c.length-1][0],0])}else {if(!f&&i){b.push([e,0]);c.push([e,0])}}b.push([e,h]);c.push([e,h]);e+=o;i=f});var h=this.dataZoomModel;this._displayables.barGroup.add(new J({shape:{points:b},style:defaults({fill:h.get('dataBackgroundColor')},h.getModel('dataBackground.areaStyle').getAreaStyle()),silent:!0,z2:-20}));this._displayables.barGroup.add(new T({shape:{points:c},style:h.getModel('dataBackground.lineStyle').getLineStyle(),silent:!0,z2:-19}))},_prepareDataShadowInfo:function(){var a=this.dataZoomModel;var c=a.get('showDataShadow');if(c===!1){return}var b;var e=this.ecModel;a.eachTargetAxis(function(f,g){var h=a.getAxisProxy(f.name,g).getTargetSeriesModels();each$1(h,function(a){if(b){return}if(c!==!0&&indexOf(h9,a.get('type'))<0){return}var k=e.getComponent(f.axis,g).axis;var j=getOtherDim(f.name);var h;var i=a.coordinateSystem;if(j!=null&&i.getOtherAxis){h=i.getOtherAxis(k).inverse}b={thisAxis:k,series:a,thisDim:f.name,otherDim:j,otherAxisInverse:h}},this)},this);return b},_renderHandle:function(){var b=this._displayables;var h=b.handles=[];var g=b.handleLabels=[];var c=this._displayables.barGroup;var f=this._size;var a=this.dataZoomModel;c.add(b.filler=new cT({draggable:!0,cursor:getCursor(this._orient),drift:ag(this._onDragMove,this,'all'),onmousemove:function(a){aA(a.event)},ondragstart:ag(this._showDataInfo,this,!0),ondragend:ag(this._onDragEnd,this),onmouseover:ag(this._showDataInfo,this,!0),onmouseout:ag(this._showDataInfo,this,!1),style:{fill:a.get('fillerColor'),textPosition:'inside'}}));c.add(new cT(subPixelOptimizeRect({silent:!0,shape:{x:0,y:0,width:f[0],height:f[1]},style:{stroke:a.get('dataBackgroundColor')||a.get('borderColor'),lineWidth:ia,fill:'rgba(0,0,0,0)'}})));eU([0,1],function(f){var b=createIcon(a.get('handleIcon'),{cursor:getCursor(this._orient),draggable:!0,drift:ag(this._onDragMove,this,f),onmousemove:function(a){aA(a.event)},ondragend:ag(this._onDragEnd,this),onmouseover:ag(this._showDataInfo,this,!0),onmouseout:ag(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2});var k=b.getBoundingRect();this._handleHeight=parsePercent$1(a.get('handleSize'),this._size[1]);this._handleWidth=k.width/k.height*this._handleHeight;b.setStyle(a.getModel('handleStyle').getItemStyle());var j=a.get('handleColor');if(j!=null){b.style.fill=j}c.add(h[f]=b);var i=a.textStyleModel;this.group.add(g[f]=new e({silent:!0,invisible:!0,style:{x:0,y:0,text:'',textVerticalAlign:'middle',textAlign:'center',textFill:i.getTextColor(),textFont:i.getFont()},z2:10}))},this)},_resetInterval:function(){var b=this._range=this.dataZoomModel.getPercentRange();var a=this._getViewExtent();this._handleEnds=[aN(b[0],[0,100],a,!0),aN(b[1],[0,100],a,!0)]},_updateInterval:function(g,h){var f=this.dataZoomModel;var e=this._handleEnds;var a=this._getViewExtent();var c=f.findRepresentativeAxisProxy().getMinMaxSpan();var b=[0,100];bb(h,e,a,f.get('zoomLock')?'all':g,c.minSpan!=null?aN(c.minSpan,b,a,!0):null,c.maxSpan!=null?aN(c.maxSpan,b,a,!0):null);this._range=e3([aN(e[0],a,b,!0),aN(e[1],a,b,!0)])},_updateView:function(f){var b=this._displayables;var c=this._handleEnds;var a=e3(c.slice());var e=this._size;eU([0,1],function(g){var h=b.handles[g];var a=this._handleHeight;h.attr({scale:[a/2,a/2],position:[c[g],e[1]/2-a/2]})},this);b.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:e[1]});this._updateDataInfo(f)},_updateDataInfo:function(l){var b=this.dataZoomModel;var e=this._displayables;var k=e.handleLabels;var g=this._orient;var f=['',''];if(b.get('showDetail')){var a=b.findRepresentativeAxisProxy();if(a){var i=a.getAxisModel().axis;var h=this._range;var c=l?a.calculateDataWindow({start:h[0],end:h[1]}).valueWindow:a.getDataValueWindow();f=[this._formatLabel(c[0],i),this._formatLabel(c[1],i)]}}var j=e3(this._handleEnds.slice());setLabel.call(this,0);setLabel.call(this,1);function setLabel(a){var b=getTransform(e.handles[a].parent,this.group);var c=transformDirection(a===0?'right':'left',b);var i=this._handleWidth/2+lP;var h=applyTransform$1([j[a]+(a===0?-i:i),this._size[1]/2],b);k[a].setStyle({x:h[0],y:h[1],textVerticalAlign:g===bB?'middle':c,textAlign:g===bB?c:'center',text:f[a]})}},_formatLabel:function(a,e){var g=this.dataZoomModel;var b=g.get('labelFormatter');var c=g.get('labelPrecision');if(c==null||c==='auto'){c=e.getPixelPrecision()}var f=a==null||isNaN(a)?'':e.type==='category'||e.type==='time'?e.scale.getLabel(Math.round(a)):a.toFixed(Math.min(c,20));return isFunction(b)?b(a,f):isString(b)?b.replace('{value}',f):f},_showDataInfo:function(a){a=this._dragging||a;var b=this._displayables.handleLabels;b[0].attr('invisible',!a);b[1].attr('invisible',!a)},_onDragMove:function(c,f,g){this._dragging=!0;var b=this._displayables.barGroup.getLocalTransform();var e=applyTransform$1([f,g],b,!0);this._updateInterval(c,e[0]);var a=this.dataZoomModel.get('realtime');this._updateView(!a);if(a){a&&this._dispatchZoomAction()}},_onDragEnd:function(){this._dragging=!1;this._showDataInfo(!1);this._dispatchZoomAction()},_onClickPanelClick:function(e){var c=this._size;var a=this._displayables.barGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(a[0]<0||a[0]>c[0]||a[1]<0||a[1]>c[1]){return}var b=this._handleEnds;var f=(b[0]+b[1])/2;this._updateInterval('all',a[0]-f);this._updateView();this._dispatchZoomAction()},_dispatchZoomAction:function(){var a=this._range;this.api.dispatchAction({type:'dataZoom',from:this.uid,dataZoomId:this.dataZoomModel.id,start:a[0],end:a[1]})},_findCoordRect:function(){var a;eU(this.getTargetCoordInfo(),function(b){if(!a&&b.length){var c=b[0].model.coordinateSystem;a=c.getRect&&c.getRect()}});if(!a){var c=this.api.getWidth();var b=this.api.getHeight();a={x:c*0.2,y:b*0.2,width:c*0.6,height:b*0.6}}return a}});function getOtherDim(a){var b={x:'y',y:'x',radius:'angle',angle:'radius'};return b[a]}function getCursor(a){return a==='vertical'?'ns-resize':'ew-resize'}dP.extend({type:'dataZoom.inside',defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,preventDefaultMouseMove:!0}});var ht=curry;var hG='\x00_ec_dataZoom_roams';function register$2(g,b){var f=giveStore(g);var c=b.dataZoomId;var e=b.coordId;each$1(f,function(f,h){var a=f.dataZoomInfos;if(a[c]&&indexOf(b.allCoordIds,e)<0){delete a[c];f.count--}});cleanStore(f);var a=f[e];if(!a){a=f[e]={coordId:e,dataZoomInfos:{},count:0};a.controller=createController(g,a);a.dispatchAction=curry(dispatchAction$1,g)}!a.dataZoomInfos[c]&&a.count++;a.dataZoomInfos[c]=b;var h=mergeControllerParams(a.dataZoomInfos);a.controller.enable(h.controlType,h.opt);a.controller.setPointerChecker(b.containsPoint);createOrUpdate(a,'dispatchAction',b.throttleRate,'fixRate')}function unregister$1(c,a){var b=giveStore(c);each$1(b,function(b){b.controller.dispose();var e=b.dataZoomInfos;if(e[a]){delete e[a];b.count--}});cleanStore(b)}function shouldRecordRange(a,c){if(a&&a.type==='dataZoom'&&a.batch){for(var b=0,e=a.batch.length;b<e;b++){if(a.batch[b].dataZoomId===c){return !1}}}return !0}function generateCoordId(a){return a.type+'\x00_'+a.id}function giveStore(b){var a=b.getZr();return a[hG]||(a[hG]={})}function createController(c,b){var a=new RoamController(c.getZr());a.on('pan',ht(onPan,b));a.on('zoom',ht(onZoom,b));return a}function cleanStore(a){each$1(a,function(b,c){if(!b.count){b.controller.dispose();delete a[c]}})}function onPan(a,g,h,e,f,b,c){wrapAndDispatch(a,function(i){return i.panGetRange(a.controller,g,h,e,f,b,c)})}function onZoom(a,e,b,c){wrapAndDispatch(a,function(f){return f.zoomGetRange(a.controller,e,b,c)})}function wrapAndDispatch(a,c){var b=[];each$1(a.dataZoomInfos,function(f){var e=c(f);!f.disabled&&e&&b.push({dataZoomId:f.dataZoomId,start:e[0],end:e[1]})});a.dispatchAction(b)}function dispatchAction$1(b,a){b.dispatchAction({type:'dataZoom',batch:a})}function mergeControllerParams(e){var a;var c={};var b={'true':2,'move':1,'false':0,'undefined':-1};each$1(e,function(f){var g=f.disabled?!1:f.zoomLock?'move':!0;b[g]>b[a]&&(a=g);extend(c,f.roamControllerOpt)});return {controlType:a,opt:c}}var hL=bind;var f9=dW.extend({type:'dataZoom.inside',init:function(a,b){this._range},render:function(a,e,c,b){f9.superApply(this,'render',arguments);if(shouldRecordRange(b,a.id)){this._range=a.getPercentRange()}each$1(this.getTargetCoordInfo(),function(f,g){var h=map(f,function(h){return generateCoordId(h.model)});each$1(f,function(j){var k=j.model;var i=a.option;register$2(c,{coordId:generateCoordId(k),allCoordIds:h,containsPoint:function(l,h,i){return k.coordinateSystem.containPoint([h,i])},dataZoomId:a.id,throttleRate:a.get('throttle',!0),panGetRange:hL(this._onPan,this,j,g),zoomGetRange:hL(this._onZoom,this,j,g),zoomLock:i.zoomLock,disabled:i.disabled,roamControllerOpt:{zoomOnMouseWheel:i.zoomOnMouseWheel,moveOnMouseMove:i.moveOnMouseMove,preventDefaultMouseMove:i.preventDefaultMouseMove}})},this)},this)},dispose:function(){unregister$1(this.api,this.dataZoomModel.id);f9.superApply(this,'dispose',arguments);this._range=null},_onPan:function(e,f,h,m,n,k,l,i,j){var a=this._range.slice();var c=e.axisModels[0];if(!c){return}var b=fS[f]([k,l],[i,j],c,h,e);var g=b.signal*(a[1]-a[0])*b.pixel/b.pixelLength;bb(g,a,[0,100],'all');return this._range=a},_onZoom:function(h,i,j,e,k,l){var a=this._range.slice();var g=h.axisModels[0];if(!g){return}var b=fS[i](null,[k,l],g,j,h);var c=(b.signal>0?b.pixelStart+b.pixelLength-b.pixel:b.pixel-b.pixelStart)/b.pixelLength*(a[1]-a[0])+a[0];e=Math.max(1/e,0);a[0]=(a[0]-c)*e+c;a[1]=(a[1]-c)*e+c;var f=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();bb(0,a,[0,100],0,f.minSpan,f.maxSpan);return this._range=a}});var fS={grid:function(b,f,g,i,h){var e=g.axis;var a={};var c=h.model.coordinateSystem.getRect();b=b||[0,0];if(e.dim==='x'){a.pixel=f[0]-b[0];a.pixelLength=c.width;a.pixelStart=c.x;a.signal=e.inverse?1:-1}else {a.pixel=f[1]-b[1];a.pixelLength=c.height;a.pixelStart=c.y;a.signal=e.inverse?-1:1}return a},polar:function(b,c,h,k,j){var i=h.axis;var a={};var e=j.model.coordinateSystem;var f=e.getRadiusAxis().getExtent();var g=e.getAngleAxis().getExtent();b=b?e.pointToCoord(b):[0,0];c=e.pointToCoord(c);if(h.mainType==='radiusAxis'){a.pixel=c[0]-b[0];a.pixelLength=f[1]-f[0];a.pixelStart=f[0];a.signal=i.inverse?1:-1}else {a.pixel=c[1]-b[1];a.pixelLength=g[1]-g[0];a.pixelStart=g[0];a.signal=i.inverse?-1:1}return a},singleAxis:function(b,f,g,i,h){var e=g.axis;var c=h.model.coordinateSystem.getRect();var a={};b=b||[0,0];if(e.orient==='horizontal'){a.pixel=f[0]-b[0];a.pixelLength=c.width;a.pixelStart=c.x;a.signal=e.inverse?1:-1}else {a.pixel=f[1]-b[1];a.pixelLength=c.height;a.pixelStart=c.y;a.signal=e.inverse?-1:1}return a}};registerProcessor(function(a,b){a.eachComponent('dataZoom',function(c){c.eachTargetAxis(resetSingleAxis);c.eachTargetAxis(filterSingleAxis)});a.eachComponent('dataZoom',function(c){var g=c.findRepresentativeAxisProxy();var e=g.getDataPercentWindow();var f=g.getDataValueWindow();c.setRawRange({start:e[0],end:e[1],startValue:f[0],endValue:f[1]},!0)})});function resetSingleAxis(c,b,a){a.getAxisProxy(c.name,b).reset(a)}function filterSingleAxis(c,b,a){a.getAxisProxy(c.name,b).filterData(a)}registerAction('dataZoom',function(a,c){var e=createLinkedNodesFinder(bind(c.eachComponent,c,'dataZoom'),gu,function(e,b){return e.get(b.axisIndex)});var b=[];c.eachComponent({mainType:'dataZoom',query:a},function(f,g){b.push.apply(b,e(f).nodes)});each$1(b,function(b,e){b.setRawRange({start:a.start,end:a.end,startValue:a.startValue,endValue:a.endValue})})});var hw=each$1;var gk=function(b){var a=b&&b.visualMap;if(!isArray(a)){a=a?[a]:[]}hw(a,function(a){if(!a){return}if(has$1(a,'splitList')&&!has$1(a,'pieces')){a.pieces=a.splitList;delete a.splitList}var c=a.pieces;if(c&&isArray(c)){hw(c,function(c){if(isObject(c)){if(has$1(c,'start')&&!has$1(c,'min')){c.min=c.start}if(has$1(c,'end')&&!has$1(c,'max')){c.max=c.end}}})}})};function has$1(a,b){return a&&a.hasOwnProperty&&a.hasOwnProperty(b)}g.registerSubTypeDefaulter('visualMap',function(a){return !a.categories&&(!(a.pieces?a.pieces.length>0:a.splitNumber>0)||a.calculable)?'continuous':'piecewise'});registerVisual(be.VISUAL.COMPONENT,function(a){a.eachComponent('visualMap',function(b){processSingleVisualMap(b,a)});prepareVisualMeta(a)});function processSingleVisualMap(a,b){a.eachTargetSeries(function(e){var c=e.getData();applyVisual(a.stateList,a.targetVisuals,c,a.getValueState,a,a.getDataDimension(c))})}function prepareVisualMeta(a){a.eachSeries(function(b){var e=b.getData();var c=[];a.eachComponent('visualMap',function(f){if(f.isTargetSeries(b)){var g=f.getVisualMeta(bind(getColorVisual,null,b,f))||{stops:[],outerColors:[]};g.dimension=f.getDataDimension(e);c.push(g)}});b.getData().setVisual('visualMeta',c)})}function getColorVisual(i,h,l,k){var e=h.targetVisuals[k];var c=j.prepareVisualTypes(e);var a={color:i.getData().getVisual('color')};for(var b=0,m=c.length;b<m;b++){var g=c[b];var f=e[g==='opacity'?'__alphaForOpacity':g];f&&f.applyVisual(l,getVisual,setVisual)}return a.color;function getVisual(b){return a[b]}function setVisual(c,b){a[c]=b}}var dU={get:function(c,e,b){var a=clone((jK[c]||{})[e]);return b?isArray(a)?a[a.length-1]:a:a}};var jK={color:{active:['#006edd','#e0ffff'],inactive:['rgba(0,0,0,0)']},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[0.3,1],inactive:[0,0]},colorLightness:{active:[0.9,0.5],inactive:[0,0]},colorAlpha:{active:[0.3,1],inactive:[0,0]},opacity:{active:[0.3,1],inactive:[0,0]},symbol:{active:['circle','roundRect','diamond'],inactive:['none']},symbolSize:{active:[10,50],inactive:[0,0]}};var gQ=j.mapVisual;var lD=j.eachVisual;var l0=isArray;var eV=each$1;var mP=asc;var li=linearMap;var e1=noop;var kd=['#f6efa6','#d88273','#bf444c'];var b9=extendComponentModel({type:'visualMap',dependencies:['series'],stateList:['inRange','outOfRange'],replacableOptionKeys:['inRange','outOfRange','target','controller','color'],dataBound:[-Infinity,Infinity],layoutMode:{type:'box',ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:'all',min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:'vertical',backgroundColor:'rgba(0,0,0,0)',borderColor:'#ccc',contentColor:'#5793f3',inactiveColor:'#aaa',borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:'#333'}},init:function(b,c,a){this._dataExtent;this.targetVisuals={};this.controllerVisuals={};this.textStyleModel;this.itemSize;this.mergeDefaultAndTheme(b,a)},optionUpdated:function(b,c){var a=this.option;if(!f.canvasSupported){a.realtime=!1}!c&&replaceVisualOption(a,b,this.replacableOptionKeys);this.textStyleModel=this.getModel('textStyle');this.resetItemSize();this.completeVisualOption()},resetVisual:function(a){var b=this.stateList;a=bind(a,this);this.controllerVisuals=createVisualMappings(this.option.controller,b,a);this.targetVisuals=createVisualMappings(this.option.target,b,a)},getTargetSeriesIndices:function(){var a=this.option.seriesIndex;var b=[];if(a==null||a==='all'){this.ecModel.eachSeries(function(c,a){b.push(a)})}else {b=normalizeToArray(a)}return b},eachTargetSeries:function(a,b){each$1(this.getTargetSeriesIndices(),function(c){a.call(b,this.ecModel.getSeriesByIndex(c))},this)},isTargetSeries:function(b){var a=!1;this.eachTargetSeries(function(c){c===b&&(a=!0)});return a},formatValueText:function(a,i,f){var h=this.option;var j=h.precision;var g=this.dataBound;var e=h.formatter;var c;var b;f=f||['<','>'];if(isArray(a)){a=a.slice();c=!0}b=i?a:c?[toFixed(a[0]),toFixed(a[1])]:toFixed(a);if(isString(e)){return e.replace('{value}',c?b[0]:b).replace('{value2}',c?b[1]:b)}else {if(isFunction(e)){return c?e(a[0],a[1]):e(a)}}if(c){if(a[0]===g[0]){return f[0]+' '+b[1]}else {if(a[1]===g[1]){return f[1]+' '+b[0]}else {return b[0]+' - '+b[1]}}}else {return b}function toFixed(b){return b===g[0]?'min':b===g[1]?'max':(+b).toFixed(Math.min(j,20))}},resetExtent:function(){var a=this.option;var b=mP([a.min,a.max]);this._dataExtent=b},getDataDimension:function(b){var a=this.option.dimension;return a!=null?a:b.dimensions.length-1},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var a=this.option;var f={inRange:a.inRange,outOfRange:a.outOfRange};var e=a.target||(a.target={});var c=a.controller||(a.controller={});merge(e,f);merge(c,f);var b=this.isCategory();completeSingle.call(this,e);completeSingle.call(this,c);completeInactive.call(this,e,'inRange','outOfRange');completeController.call(this,c);function completeSingle(c){if(l0(a.color)&&!c.inRange){c.inRange={color:a.color.slice().reverse()}}c.inRange=c.inRange||{color:kd};eV(this.stateList,function(a){var e=c[a];if(isString(e)){var f=dU.get(e,'active',b);if(f){c[a]={};c[a][e]=f}else {delete c[a]}}},this)}function completeInactive(c,g,e){var f=c[g];var a=c[e];if(f&&!a){a=c[e]={};eV(f,function(i,f){if(!j.isValidType(f)){return}var h=dU.get(f,'inactive',b);if(h!=null){a[f]=h;if(f==='color'&&!a.hasOwnProperty('opacity')&&!a.hasOwnProperty('colorAlpha')){a.opacity=[0,0]}}})}}function completeController(a){var f=(a.inRange||{}).symbol||(a.outOfRange||{}).symbol;var c=(a.inRange||{}).symbolSize||(a.outOfRange||{}).symbolSize;var e=this.get('inactiveColor');eV(this.stateList,function(k){var h=this.itemSize;var g=a[k];if(!g){g=a[k]={color:b?e:[e]}}if(g.symbol==null){g.symbol=f&&clone(f)||(b?'roundRect':['roundRect'])}if(g.symbolSize==null){g.symbolSize=c&&clone(c)||(b?h[0]:[h[0],h[0]])}g.symbol=gQ(g.symbol,function(b){return b==='none'||b==='square'?'roundRect':b});var i=g.symbolSize;if(i!=null){var j=-Infinity;lD(i,function(b){b>j&&(j=b)});g.symbolSize=gQ(i,function(b){return li(b,[0,j],[0,h[0]],!0)})}},this)}},resetItemSize:function(){this.itemSize=[parseFloat(this.get('itemWidth')),parseFloat(this.get('itemHeight'))]},isCategory:function(){return !!this.option.categories},setSelected:e1,getValueState:e1,getVisualMeta:e1});var fI=[20,140];var fY=b9.extend({type:'visualMap.continuous',defaultOption:{align:'auto',calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(a,b){fY.superApply(this,'optionUpdated',arguments);this.resetExtent();this.resetVisual(function(c){c.mappingMethod='linear';c.dataExtent=this.getExtent()});this._resetRange()},resetItemSize:function(){fY.superApply(this,'resetItemSize',arguments);var a=this.itemSize;this._orient==='horizontal'&&a.reverse();(a[0]==null||isNaN(a[0]))&&(a[0]=fI[0]);(a[1]==null||isNaN(a[1]))&&(a[1]=fI[1])},_resetRange:function(){var b=this.getExtent();var a=this.option.range;if(!a||a.auto){b.auto=1;this.option.range=b}else {if(isArray(a)){if(a[0]>a[1]){a.reverse()}a[0]=Math.max(a[0],b[0]);a[1]=Math.min(a[1],b[1])}}},completeVisualOption:function(){b9.prototype.completeVisualOption.apply(this,arguments);each$1(this.stateList,function(b){var a=this.option.controller[b].symbolSize;if(a&&a[0]!==a[1]){a[0]=0}},this)},setSelected:function(a){this.option.range=a.slice();this._resetRange()},getSelected:function(){var b=this.getExtent();var a=asc((this.get('range')||[]).slice());a[0]>b[1]&&(a[0]=b[1]);a[1]>b[1]&&(a[1]=b[1]);a[0]<b[0]&&(a[0]=b[0]);a[1]<b[0]&&(a[1]=b[0]);return a},getValueState:function(c){var a=this.option.range;var b=this.getExtent();return (a[0]<=b[0]||a[0]<=c)&&(a[1]>=b[1]||c<=a[1])?'inRange':'outOfRange'},findTargetDataIndices:function(b){var a=[];this.eachTargetSeries(function(e){var c=[];var f=e.getData();f.each(this.getDataDimension(f),function(a,f){b[0]<=a&&a<=b[1]&&c.push(f)},!0,this);a.push({seriesId:e.id,dataIndex:c})},this);return a},getVisualMeta:function(j){var e=getColorStopValues(this,'outOfRange',this.getExtent());var a=getColorStopValues(this,'inRange',this.option.range.slice());var b=[];function setStop(a,c){b.push({value:a,color:j(a,c)})}var g=0;var c=0;var k=a.length;var i=e.length;for(;c<i&&(!a.length||e[c]<=a[0]);c++){if(e[c]<a[g]){setStop(e[c],'outOfRange')}}for(var f=1;g<k;g++,f=0){f&&b.length&&setStop(a[g],'outOfRange');setStop(a[g],'inRange')}for(var f=1;c<i;c++){if(!a.length||a[a.length-1]<e[c]){if(f){b.length&&setStop(b[b.length-1].value,'outOfRange');f=0}setStop(e[c],'outOfRange')}}var h=b.length;return {stops:b,outerColors:[h?b[0].color:'transparent',h?b[h-1].color:'transparent']}}});function getColorStopValues(h,i,a){if(a[0]===a[1]){return a.slice()}var e=200;var g=(a[1]-a[0])/e;var c=a[0];var b=[];for(var f=0;f<=e&&c<a[1];f++){b.push(c);c+=g}b.push(a[1]);return b}var gr=extendComponentView({type:'visualMap',autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(a,b){this.ecModel=a;this.api=b;this.visualMapModel},render:function(a,b,e,c){this.visualMapModel=a;if(a.get('show')===!1){this.group.removeAll();return}this.doRender.apply(this,arguments)},renderBackground:function(e){var b=this.visualMapModel;var a=aE(b.get('padding')||0);var c=e.getBoundingRect();e.add(new k({z2:-1,silent:!0,shape:{x:c.x-a[3],y:c.y-a[0],width:c.width+a[3]+a[1],height:c.height+a[0]+a[2]},style:{fill:b.get('backgroundColor'),stroke:b.get('borderColor'),lineWidth:b.get('borderWidth')}}))},getControllerVisual:function(g,c,e){e=e||{};var k=e.forceState;var b=this.visualMapModel;var a={};if(c==='symbol'){a.symbol=b.get('itemSymbol')}if(c==='color'){var h=b.get('contentColor');a.color=h}function getter(b){return a[b]}function setter(f,b){a[f]=b}var f=b.controllerVisuals[k||b.getValueState(g)];var i=j.prepareVisualTypes(f);each$1(i,function(a){var b=f[a];if(e.convertOpacityToAlpha&&a==='opacity'){a='colorAlpha';b=f.__alphaForOpacity}if(j.dependsOn(a,c)){b&&b.applyVisual(g,getter,setter)}});return a[c]},positionGroup:function(b){var c=this.visualMapModel;var a=this.api;positionElement(b,c.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})},doRender:noop});function getItemAlign(m,l,o){var b=m.option;var f=b.align;if(f!=null&&f!=='auto'){return f}var k={width:l.getWidth(),height:l.getHeight()};var g=b.orient==='horizontal'?1:0;var j=[['left','right','width'],['top','bottom','height']];var h=j[g];var n=[0,null,10];var e={};for(var a=0;a<3;a++){e[j[1-g][a]]=n[a];e[h[a]]=a===2?o[0]:b[h[a]]}var c=[['x','width',3],['y','height',0]][g];var i=getLayoutRect(e,k,b.padding);return h[(i.margin[c[2]]||0)+i[c[0]]+i[c[1]]*0.5<k[c[1]]*0.5?0:1]}function convertDataIndex(a){each$1(a||[],function(b){if(a.dataIndex!=null){a.dataIndexInside=a.dataIndex;a.dataIndex=null}});return a}var ac=linearMap;var mn=each$1;var cG=Math.min;var bF=Math.max;var jE=12;var f8=6;var jP=gr.extend({type:'visualMap.continuous',init:function(){jP.superApply(this,'init',arguments);this._shapes={};this._dataInterval=[];this._handleEnds=[];this._orient;this._useHandle;this._hoverLinkDataIndices=[];this._dragging;this._hovering},doRender:function(b,c,e,a){if(!a||a.type!=='selectDataRange'||a.from!==this.uid){this._buildView()}},_buildView:function(){this.group.removeAll();var b=this.visualMapModel;var a=this.group;this._orient=b.get('orient');this._useHandle=b.get('calculable');this._resetInterval();this._renderBar(a);var c=b.get('text');this._renderEndsText(a,c,0);this._renderEndsText(a,c,1);this._updateView(!0);this.renderBackground(a);this._updateView();this._enableHoverLinkToSeries();this._enableHoverLinkFromSeries();this.positionGroup(a)},_renderEndsText:function(n,g,b){if(!g){return}var a=g[1-b];a=a!=null?a+'':'';var f=this.visualMapModel;var k=f.get('textGap');var i=f.itemSize;var h=this._shapes.barGroup;var j=this._applyTransform([i[0]/2,b===0?-k:i[1]+k],h);var m=this._applyTransform(b===0?'bottom':'top',h);var l=this._orient;var c=this.visualMapModel.textStyleModel;this.group.add(new e({style:{x:j[0],y:j[1],textVerticalAlign:l==='horizontal'?'middle':m,textAlign:l==='horizontal'?m:'center',text:a,textFont:c.getFont(),textFill:c.getTextColor()}}))},_renderBar:function(k){var e=this.visualMapModel;var b=this._shapes;var c=e.itemSize;var h=this._orient;var i=this._useHandle;var f=getItemAlign(e,this.api,c);var a=b.barGroup=this._createBarGroup(f);a.add(b.outOfRange=createPolygon());a.add(b.inRange=createPolygon(null,i?getCursor$1(this._orient):null,bind(this._dragHandle,this,'all',!1),bind(this._dragHandle,this,'all',!0)));var j=e.textStyleModel.getTextRect('');var g=bF(j.width,j.height);if(i){b.handleThumbs=[];b.handleLabels=[];b.handleLabelPoints=[];this._createHandle(a,0,c,g,h,f);this._createHandle(a,1,c,g,h,f)}this._createIndicator(a,c,g,h);k.add(a)},_createHandle:function(m,a,n,b,k){var j=bind(this._dragHandle,this,a,!1);var i=bind(this._dragHandle,this,a,!0);var c=createPolygon(createHandlePoints(a,b),getCursor$1(this._orient),j,i);c.position[0]=n[0];m.add(c);var g=this.visualMapModel.textStyleModel;var h=new e({draggable:!0,drift:j,onmousemove:function(c){aA(c.event)},ondragend:i,style:{x:0,y:0,text:'',textFont:g.getFont(),textFill:g.getTextColor()}});this.group.add(h);var l=[k==='horizontal'?b/2:b*1.5,k==='horizontal'?a===0?-(b*1.5):b*1.5:a===0?-b/2:b/2];var f=this._shapes;f.handleThumbs[a]=c;f.handleLabelPoints[a]=l;f.handleLabels[a]=h},_createIndicator:function(h,i,j,k){var a=createPolygon([[0,0]],'move');a.position[0]=i[0];a.attr({invisible:!0,silent:!0});h.add(a);var f=this.visualMapModel.textStyleModel;var c=new e({silent:!0,invisible:!0,style:{x:0,y:0,text:'',textFont:f.getFont(),textFill:f.getTextColor()}});this.group.add(c);var g=[k==='horizontal'?j/2:f8+3,0];var b=this._shapes;b.indicator=a;b.indicatorLabel=c;b.indicatorLabelPoint=g},_dragHandle:function(b,a,e,f){if(!this._useHandle){return}this._dragging=!a;if(!a){var c=this._applyTransform([e,f],this._shapes.barGroup,!0);this._updateInterval(b,c[1]);this._updateView()}if(a===!this.visualMapModel.get('realtime')){this.api.dispatchAction({type:'selectDataRange',from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()})}if(a){!this._hovering&&this._clearHoverLinkToSeries()}else {if(useHoverLinkOnHandle(this.visualMapModel)){this._doHoverLinkToSeries(this._handleEnds[b],!1)}}},_resetInterval:function(){var a=this.visualMapModel;var b=this._dataInterval=a.getSelected();var c=a.getExtent();var e=[0,a.itemSize[1]];this._handleEnds=[ac(b[0],c,e,!0),ac(b[1],c,e,!0)]},_updateInterval:function(g,c){c=c||0;var e=this.visualMapModel;var a=this._handleEnds;var b=[0,e.itemSize[1]];bb(c,a,b,g,0);var f=e.getExtent();this._dataInterval=[ac(a[0],b,f,!0),ac(a[1],b,f,!0)]},_updateView:function(i){var g=this.visualMapModel;var c=g.getExtent();var h=this._shapes;var e=[0,g.itemSize[1]];var f=i?e:this._handleEnds;var a=this._createBarVisual(this._dataInterval,c,f,'inRange');var b=this._createBarVisual(c,c,e,'outOfRange');h.inRange.setStyle({fill:a.barColor,opacity:a.opacity}).setShape('points',a.barPoints);h.outOfRange.setStyle({fill:b.barColor,opacity:b.opacity}).setShape('points',b.barPoints);this._updateHandle(f,a)},_createBarVisual:function(b,i,g,f){var c={forceState:f,convertOpacityToAlpha:!0};var a=this._makeColorGradient(b,c);var e=[this.getControllerVisual(b[0],'symbolSize',c),this.getControllerVisual(b[1],'symbolSize',c)];var h=this._createBarPoints(g,e);return {barColor:new a2(0,0,0,1,a),barPoints:h,handlesColor:[a[0].color,a[a.length-1].color]}},_makeColorGradient:function(a,f){var e=100;var b=[];var h=(a[1]-a[0])/e;b.push({color:this.getControllerVisual(a[0],'color',f),offset:0});for(var c=1;c<e;c++){var g=a[0]+h*c;if(g>a[1]){break}b.push({color:this.getControllerVisual(g,'color',f),offset:c/e})}b.push({color:this.getControllerVisual(a[1],'color',f),offset:1});return b},_createBarPoints:function(a,c){var b=this.visualMapModel.itemSize;return [[b[0]-c[0],a[0]],[b[0],a[0]],[b[0],a[1]],[b[0]-c[1],a[1]]]},_createBarGroup:function(a){var e=this._orient;var c=this.visualMapModel.get('inverse');return new b(e==='horizontal'&&!c?{scale:a==='bottom'?[1,1]:[-1,1],rotation:Math.PI/2}:e==='horizontal'&&c?{scale:a==='bottom'?[-1,1]:[1,1],rotation:-Math.PI/2}:e==='vertical'&&!c?{scale:a==='left'?[1,-1]:[-1,-1]}:{scale:a==='left'?[1,1]:[-1,1]})},_updateHandle:function(g,c){if(!this._useHandle){return}var a=this._shapes;var b=this.visualMapModel;var f=a.handleThumbs;var e=a.handleLabels;mn([0,1],function(h){var i=f[h];i.setStyle('fill',c.handlesColor[h]);i.position[1]=g[h];var j=applyTransform$1(a.handleLabelPoints[h],getTransform(i,this.group));e[h].setStyle({x:j[0],y:j[1],text:b.formatValueText(this._dataInterval[h]),textVerticalAlign:'middle',textAlign:this._applyTransform(this._orient==='horizontal'?h===0?'bottom':'top':'left',a.barGroup)})},this)},_showIndicator:function(g,p,e,m){var c=this.visualMapModel;var n=c.getExtent();var i=c.itemSize;var o=[0,i[1]];var l=ac(g,n,o,!0);var b=this._shapes;var a=b.indicator;if(!a){return}a.position[1]=l;a.attr('invisible',!1);a.setShape('points',createIndicatorPoints(!!e,m,l,i[1]));var r={convertOpacityToAlpha:!0};var q=this.getControllerVisual(g,'color',r);a.setStyle('fill',q);var h=applyTransform$1(b.indicatorLabelPoint,getTransform(a,this.group));var f=b.indicatorLabel;f.attr('invisible',!1);var k=this._applyTransform('left',b.barGroup);var j=this._orient;f.setStyle({text:(e?e:'')+c.formatValueText(p),textVerticalAlign:j==='horizontal'?k:'middle',textAlign:j==='horizontal'?'center':k,x:h[0],y:h[1]})},_enableHoverLinkToSeries:function(){var a=this;this._shapes.barGroup.on('mousemove',function(e){a._hovering=!0;if(!a._dragging){var c=a.visualMapModel.itemSize;var b=a._applyTransform([e.offsetX,e.offsetY],a._shapes.barGroup,!0,!0);b[1]=cG(bF(0,b[1]),c[1]);a._doHoverLinkToSeries(b[1],0<=b[0]&&b[0]<=c[0])}}).on('mouseout',function(){a._hovering=!1;!a._dragging&&a._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var a=this.api.getZr();if(this.visualMapModel.option.hoverLink){a.on('mouseover',this._hoverLinkFromSeriesMouseOver,this);a.on('mouseout',this._hideIndicator,this)}else {this._clearHoverLinkFromSeries()}},_doHoverLinkToSeries:function(f,k){var c=this.visualMapModel;var m=c.itemSize;if(!c.option.hoverLink){return}var a=[0,m[1]];var h=c.getExtent();f=cG(bF(a[0],f),a[1]);var e=getHalfHoverLinkSize(c,h,a);var i=[f-e,f+e];var g=ac(f,a,h,!0);var b=[ac(i[0],a,h,!0),ac(i[1],a,h,!0)];i[0]<a[0]&&(b[0]=-Infinity);i[1]>a[1]&&(b[1]=Infinity);if(k){if(b[0]===-Infinity){this._showIndicator(g,b[1],'< ',e)}else {if(b[1]===Infinity){this._showIndicator(g,b[0],'> ',e)}else {this._showIndicator(g,g,' ',e)}}}var n=this._hoverLinkDataIndices;var l=[];if(k||useHoverLinkOnHandle(c)){l=this._hoverLinkDataIndices=c.findTargetDataIndices(b)}var j=compressBatches(n,l);this._dispatchHighDown('downplay',convertDataIndex(j[0]));this._dispatchHighDown('highlight',convertDataIndex(j[1]))},_hoverLinkFromSeriesMouseOver:function(h){var a=h.target;var e=this.visualMapModel;if(!a||a.dataIndex==null){return}var f=this.ecModel.getSeriesByIndex(a.seriesIndex);if(!e.isTargetSeries(f)){return}var c=f.getData(a.dataType);var g=c.getDimension(e.getDataDimension(c));var b=c.get(g,a.dataIndex,!0);if(!isNaN(b)){this._showIndicator(b,b)}},_hideIndicator:function(){var a=this._shapes;a.indicator&&a.indicator.attr('invisible',!0);a.indicatorLabel&&a.indicatorLabel.attr('invisible',!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var a=this._hoverLinkDataIndices;this._dispatchHighDown('downplay',convertDataIndex(a));a.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var a=this.api.getZr();a.off('mouseover',this._hoverLinkFromSeriesMouseOver);a.off('mouseout',this._hideIndicator)},_applyTransform:function(a,c,e,f){var b=getTransform(c,f?null:this.group);return O[isArray(a)?'applyTransform':'transformDirection'](a,b,e)},_dispatchHighDown:function(b,a){a&&a.length&&this.api.dispatchAction({type:b,batch:a})},dispose:function(){this._clearHoverLinkFromSeries();this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries();this._clearHoverLinkToSeries()}});function createPolygon(e,c,a,b){return new J({shape:{points:e},draggable:!!a,cursor:c,drift:a,onmousemove:function(f){aA(f.event)},ondragend:b})}function createHandlePoints(b,a){return b===0?[[0,0],[a,0],[a,-a]]:[[0,0],[a,0],[a,a]]}function createIndicatorPoints(e,a,b,c){return e?[[0,-cG(a,bF(b,0))],[f8,0],[0,cG(a,bF(c-b,0))]]:[[0,0],[5,-5],[5,5]]}function getHalfHoverLinkSize(c,e,f){var a=jE/2;var b=c.get('hoverLinkDataSize');if(b){a=ac(b,e,f,!0)/2}return a}function useHoverLinkOnHandle(b){var a=b.get('hoverLinkOnHandle');return !!(a==null?b.get('realtime'):a)}function getCursor$1(a){return a==='vertical'?'ns-resize':'ew-resize'}var kz={type:'selectDataRange',event:'dataRangeSelected',update:'update'};registerAction(kz,function(a,b){b.eachComponent({mainType:'visualMap',query:a},function(c){c.setSelected(a.selected)})});registerPreprocessor(gk);var jT=b9.extend({type:'visualMap.piecewise',defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:'auto',itemWidth:20,itemHeight:14,itemSymbol:'roundRect',pieceList:null,categories:null,splitNumber:5,selectedMode:'multiple',itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(b,c){jT.superApply(this,'optionUpdated',arguments);this._pieceList=[];this.resetExtent();var e=this._mode=this._determineMode();kU[this._mode].call(this);this._resetSelected(b,c);var a=this.option.categories;this.resetVisual(function(f,g){if(e==='categories'){f.mappingMethod='category';f.categories=clone(a)}else {f.dataExtent=this.getExtent();f.mappingMethod='piecewise';f.pieceList=map(this._pieceList,function(a){var a=clone(a);if(g!=='inRange'){a.visual=null}return a})}})},completeVisualOption:function(){var a=this.option;var b={};var c=j.listVisualTypes();var e=this.isCategory();each$1(a.pieces,function(a){each$1(c,function(c){if(a.hasOwnProperty(c)){b[c]=1}})});each$1(b,function(f,b){var c=0;each$1(this.stateList,function(e){c|=has(a,e,b)||has(a.target,e,b)},this);!c&&each$1(this.stateList,function(c){(a[c]||(a[c]={}))[b]=dU.get(b,c==='inRange'?'active':'inactive',e)})},this);function has(a,b,c){return a&&a[b]&&(isObject(a[b])?a[b].hasOwnProperty(c):a[b]===c)}b9.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(f,g){var b=this.option;var c=this._pieceList;var a=(g?b:f).selected||{};b.selected=a;each$1(c,function(c,e){var b=this.getSelectedMapKey(c);if(!a.hasOwnProperty(b)){a[b]=!0}},this);if(b.selectedMode==='single'){var e=!1;each$1(c,function(c,h){var b=this.getSelectedMapKey(c);if(a[b]){e?a[b]=!1:e=!0}},this)}},getSelectedMapKey:function(a){return this._mode==='categories'?a.value+'':a.index+''},getPieceList:function(){return this._pieceList},_determineMode:function(){var a=this.option;return a.pieces&&a.pieces.length>0?'pieces':this.option.categories?'categories':'splitNumber'},setSelected:function(a){this.option.selected=clone(a)},getValueState:function(b){var a=j.findPieceIndex(b,this._pieceList);return a!=null?this.option.selected[this.getSelectedMapKey(this._pieceList[a])]?'inRange':'outOfRange':'outOfRange'},findTargetDataIndices:function(b){var a=[];this.eachTargetSeries(function(e){var c=[];var f=e.getData();f.each(this.getDataDimension(f),function(f,a){var g=j.findPieceIndex(f,this._pieceList);g===b&&c.push(a)},!0,this);a.push({seriesId:e.id,dataIndex:c})},this);return a},getRepresentValue:function(c){var a;if(this.isCategory()){a=c.value}else {if(c.value!=null){a=c.value}else {var b=c.interval||[];a=b[0]===-Infinity&&b[1]===Infinity?0:(b[0]+b[1])/2}}return a},getVisualMeta:function(h){if(this.isCategory()){return}var g=[];var c=[];var f=this;function setStop(a,e){var i=f.getRepresentValue({interval:a});if(!e){e=f.getValueState(i)}var b=h(i,e);if(a[0]===-Infinity){c[0]=b}else {if(a[1]===Infinity){c[1]=b}else {g.push({value:a[0],color:b},{value:a[1],color:b})}}}var a=this._pieceList.slice();if(!a.length){a.push({interval:[-Infinity,Infinity]})}else {var b=a[0].interval[0];b!==-Infinity&&a.unshift({interval:[-Infinity,b]});b=a[a.length-1].interval[1];b!==Infinity&&a.push({interval:[b,Infinity]})}var e=-Infinity;each$1(a,function(b){var a=b.interval;if(a){a[0]>e&&setStop([e,a[0]],'outOfRange');setStop(a.slice());e=a[1]}},this);return {stops:g,outerColors:c}}});var kU={splitNumber:function(){var c=this.option;var g=this._pieceList;var h=Math.min(c.precision,20);var b=this.getExtent();var a=c.splitNumber;a=Math.max(parseInt(a,10),1);c.splitNumber=a;var e=(b[1]-b[0])/a;while(+e.toFixed(h)!==e&&h<5){h++}c.precision=h;e=+e.toFixed(h);var f=0;if(c.minOpen){g.push({index:f++,interval:[-Infinity,b[0]],close:[0,0]})}for(var i=b[0],j=f+a;f<j;i+=e){var k=f===a-1?b[1]:i+e;g.push({index:f++,interval:[i,k],close:[1,1]})}if(c.maxOpen){g.push({index:f++,interval:[b[1],Infinity],close:[0,0]})}reformIntervals(g);each$1(g,function(a){a.text=this.formatValueText(a.interval)},this)},categories:function(){var a=this.option;each$1(a.categories,function(a){this._pieceList.push({text:this.formatValueText(a,!0),value:a})},this);normalizeReverse(a,this._pieceList)},pieces:function(){var c=this.option;var b=this._pieceList;each$1(c.pieces,function(f,l){if(!isObject(f)){f={value:f}}var g={text:'',index:l};if(f.label!=null){g.text=f.label}if(f.hasOwnProperty('value')){var m=g.value=f.value;g.interval=[m,m];g.close=[1,1]}else {var c=g.interval=[];var h=g.close=[0,0];var o=[1,0,1];var n=[-Infinity,Infinity];var k=[];for(var e=0;e<2;e++){var p=[['gte','gt','min'],['lte','lt','max']][e];for(var i=0;i<3&&c[e]==null;i++){c[e]=f[p[i]];h[e]=o[i];k[e]=i===2}c[e]==null&&(c[e]=n[e])}k[0]&&c[1]===Infinity&&(h[0]=0);k[1]&&c[0]===-Infinity&&(h[1]=0);if(a){if(c[0]>c[1]){console.warn('Piece '+l+'is illegal: '+c+' lower bound should not greater then uppper bound.')}}if(c[0]===c[1]&&h[0]&&h[1]){g.value=c[0]}}g.visual=j.retrieveVisuals(f);b.push(g)},this);normalizeReverse(c,b);reformIntervals(b);each$1(b,function(a){var b=a.close;var c=[['<',''][b[1]],['>',''][b[0]]];a.text=a.text||this.formatValueText(a.value!=null?a.value:a.interval,!1,c)},this)}};function normalizeReverse(a,c){var b=a.inverse;if(a.orient==='vertical'?!b:b){c.reverse()}}var mX=gr.extend({type:'visualMap.piecewise',doRender:function(){var c=this.group;c.removeAll();var a=this.visualMapModel;var l=a.get('textGap');var j=a.textStyleModel;var n=j.getFont();var m=j.getTextColor();var h=this._getItemAlign();var f=a.itemSize;var k=this._getViewData();var g=k.endsText;var i=retrieve(a.get('showLabel',!0),!g);g&&this._renderEndsText(c,g[0],f,i,h);each$1(k.viewPieceList,renderItem,this);g&&this._renderEndsText(c,g[1],f,i,h);bU(a.get('orient'),c,a.get('itemGap'));this.renderBackground(c);this.positionGroup(c);function renderItem(o){var j=o.piece;var g=new b();g.onclick=bind(this._onItemClick,this,j);this._enableHoverLink(g,o.indexInModelPieceList);var k=a.getRepresentValue(j);this._createItemSymbol(g,k,[0,0,f[0],f[1]]);if(i){var p=this.visualMapModel.getValueState(k);g.add(new e({style:{x:h==='right'?-l:f[0]+l,y:f[1]/2,text:j.text,textVerticalAlign:'middle',textAlign:h,textFont:n,textFill:m,opacity:p==='outOfRange'?0.5:1}}))}c.add(g)}},_enableHoverLink:function(b,a){b.on('mouseover',bind(onHoverLink,this,'highlight')).on('mouseout',bind(onHoverLink,this,'downplay'));function onHoverLink(e){var c=this.visualMapModel;c.option.hoverLink&&this.api.dispatchAction({type:e,batch:convertDataIndex(c.findTargetDataIndices(a))})}},_getItemAlign:function(){var b=this.visualMapModel;var c=b.option;if(c.orient==='vertical'){return getItemAlign(b,this.api,b.itemSize)}else {var a=c.align;if(!a||a==='auto'){a='left'}return a}},_renderEndsText:function(j,i,a,h,f){if(!i){return}var g=new b();var c=this.visualMapModel.textStyleModel;g.add(new e({style:{x:h?f==='right'?a[0]:0:a[0]/2,y:a[1]/2,textVerticalAlign:'middle',textAlign:h?f:'center',text:i,textFont:c.getFont(),textFill:c.getTextColor()}}));j.add(g)},_getViewData:function(){var a=this.visualMapModel;var c=map(a.getPieceList(),function(b,a){return {piece:b,indexInModelPieceList:a}});var b=a.get('text');var f=a.get('orient');var e=a.get('inverse');if(f==='horizontal'?e:!e){c.reverse()}else {if(b){b=b.slice().reverse()}}return {viewPieceList:c,endsText:b}},_createItemSymbol:function(c,b,a){c.add(createSymbol(this.getControllerVisual(b,'symbol'),a[0],a[1],a[2],a[3],this.getControllerVisual(b,'color')))},_onItemClick:function(f){var c=this.visualMapModel;var e=c.option;var a=clone(e.selected);var b=c.getSelectedMapKey(f);if(e.selectedMode==='single'){a[b]=!0;each$1(a,function(e,c){a[c]=c===b})}else {a[b]=!a[b]}this.api.dispatchAction({type:'selectDataRange',from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}});registerPreprocessor(gk);var gM=addCommas;var d0=encodeHTML;function fillLabel(a){defaultEmphasis(a.label,['show'])}var cl=extendComponentModel({type:'marker',dependencies:['series','grid','polar','geo'],init:function(c,f,b,e){if(a){if(this.type==='marker'){throw new Error('Marker component is abstract component. Use markLine, markPoint, markArea instead.')}}this.mergeDefaultAndTheme(c,b);this.mergeOption(c,b,e.createdBySelf,!0)},isAnimationEnabled:function(){if(f.node){return !1}var a=this.__hostSeries;return this.getShallow('animation')&&a&&a.isAnimationEnabled()},mergeOption:function(g,b,c,f){var e=this.constructor;var a=this.mainType+'Model';if(!c){b.eachSeries(function(h){var j=h.get(this.mainType);var i=h[a];if(!j||!j.data){h[a]=null;return}if(!i){if(f){fillLabel(j)}each$1(j.data,function(a){if(a instanceof Array){fillLabel(a[0]);fillLabel(a[1])}else {fillLabel(a)}});i=new e(j,this,b);extend(i,{mainType:this.mainType,seriesIndex:h.seriesIndex,name:h.name,createdBySelf:!0});i.__hostSeries=h}else {i.mergeOption(j,b,!0)}h[a]=i},this)}},formatTooltip:function(e){var g=this.getData();var a=this.getRawValue(e);var f=isArray(a)?map(a,gM).join(', '):gM(a);var c=g.getName(e);var b=d0(this.name);if(a!=null||c){b+='<br />'}if(c){b+=d0(c);if(a!=null){b+=' : '}}if(a!=null){b+=d0(f)}return b},getData:function(){return this._data},setData:function(a){this._data=a}});mixin(cl,dB);cl.extend({type:'markPoint',defaultOption:{zlevel:0,z:5,symbol:'pin',symbolSize:50,tooltip:{trigger:'item'},label:{normal:{show:!0,position:'inside'},emphasis:{show:!0}},itemStyle:{normal:{borderWidth:2}}}});var g7=indexOf;function hasXOrY(a){return !(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function hasXAndY(a){return !isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function getPrecision$1(a,c,e){var b=-1;do{b=Math.max(getPrecision(a.get(c,e)),b);a=a.stackedOn}while(a);return b}function markerTypeCalculatorWithExtent(j,b,i,c,h,f){var a=[];var k=numCalculate(b,c,j);var g=b.indicesOfNearest(c,k,!0)[0];a[h]=b.get(i,g,!0);a[f]=b.get(c,g,!0);var e=getPrecision$1(b,c,g);e=Math.min(e,20);if(e>=0){a[f]=+a[f].toFixed(e)}return a}var eR=curry;var de={min:eR(markerTypeCalculatorWithExtent,'min'),max:eR(markerTypeCalculatorWithExtent,'max'),average:eR(markerTypeCalculatorWithExtent,'average')};function dataTransform(e,a){var h=e.getData();var g=e.coordinateSystem;if(a&&!hasXAndY(a)&&!isArray(a.coord)&&g){var i=g.dimensions;var b=getAxisInfo$1(a,h,g,e);a=clone(a);if(a.type&&de[a.type]&&b.baseAxis&&b.valueAxis){var k=g7(i,b.baseAxis.dim);var j=g7(i,b.valueAxis.dim);a.coord=de[a.type](h,b.baseDataDim,b.valueDataDim,k,j);a.value=a.coord[j]}else {var f=[a.xAxis!=null?a.xAxis:a.radiusAxis,a.yAxis!=null?a.yAxis:a.angleAxis];for(var c=0;c<2;c++){if(de[f[c]]){var l=e.coordDimToDataDim(i[c])[0];f[c]=numCalculate(h,l,f[c])}}a.coord=f}}return a}function getAxisInfo$1(c,f,e,b){var a={};if(c.valueIndex!=null||c.valueDim!=null){a.valueDataDim=c.valueIndex!=null?f.getDimension(c.valueIndex):c.valueDim;a.valueAxis=e.getAxis(b.dataDimToCoordDim(a.valueDataDim));a.baseAxis=e.getOtherAxis(a.valueAxis);a.baseDataDim=b.coordDimToDataDim(a.baseAxis.dim)[0]}else {a.baseAxis=b.getBaseAxis();a.valueAxis=e.getOtherAxis(a.baseAxis);a.baseDataDim=b.coordDimToDataDim(a.baseAxis.dim)[0];a.valueDataDim=b.coordDimToDataDim(a.valueAxis.dim)[0]}return a}function dataFilter$1(a,b){return a&&a.containData&&b.coord&&!hasXOrY(b)?a.containData(b.coord):!0}function dimValueGetter(a,e,c,b){if(b<2){return a.coord&&a.coord[b]}return a.value}function numCalculate(c,a,e){if(e==='average'){var f=0;var b=0;c.each(a,function(g,h){if(!isNaN(g)){f+=g;b++}},!0);return f/b}else {return c.getDataExtent(a,!0)[e==='max'?1:0]}}var ea=extendComponentView({type:'marker',init:function(){this.markerGroupMap=createHashMap()},render:function(f,b,e){var a=this.markerGroupMap;a.each(function(a){a.__keep=!1});var c=this.type+'Model';b.eachSeries(function(g){var a=g[c];a&&this.renderSeries(g,a,b,e)},this);a.each(function(a){!a.__keep&&this.group.remove(a.group)},this)},renderSeries:function(){}});function updateMarkerLayout(a,c,e){var b=c.coordinateSystem;a.each(function(g){var j=a.getItemModel(g);var f;var h=parsePercent$1(j.get('x'),e.getWidth());var i=parsePercent$1(j.get('y'),e.getHeight());if(!isNaN(h)&&!isNaN(i)){f=[h,i]}else {if(c.getMarkerPosition){f=c.getMarkerPosition(a.getValues(a.dimensions,g))}else {if(b){var k=a.get(b.dimensions[0],g);var l=a.get(b.dimensions[1],g);f=b.dataToPoint([k,l])}}}if(!isNaN(h)){f[0]=h}if(!isNaN(i)){f[1]=i}a.setItemLayout(g,f)})}ea.extend({type:'markPoint',updateLayout:function(c,a,b){a.eachSeries(function(e){var f=e.markPointModel;if(f){updateMarkerLayout(f.getData(),e,b);this.markerGroupMap.get(e.id).updateLayout(f)}},this)},renderSeries:function(b,a,k,j){var i=b.coordinateSystem;var g=b.id;var h=b.getData();var f=this.markerGroupMap;var e=f.get(g)||f.set(g,new SymbolDraw());var c=createList$1(i,b,a);a.setData(c);updateMarkerLayout(a.getData(),b,j);c.each(function(f){var g=c.getItemModel(f);var e=g.getShallow('symbolSize');if(typeof e==='function'){e=e(a.getRawValue(f),a.getDataParams(f))}c.setItemVisual(f,{symbolSize:e,color:g.get('itemStyle.normal.color')||h.getVisual('color'),symbol:g.getShallow('symbol')})});e.updateData(c);this.group.add(e.group);c.eachItemGraphicEl(function(c){c.traverse(function(e){e.dataModel=a})});e.__keep=!0;e.group.silent=a.get('silent')||b.get('silent')}});function createList$1(a,c,f){var b;if(a){b=map(a&&a.dimensions,function(b){var e=c.getData().getDimensionInfo(c.coordDimToDataDim(b)[0])||{};e.name=b;return e})}else {b=[{name:'value',type:'float'}]}var g=new l(b,f);var e=map(f.get('data'),curry(dataTransform,c));if(a){e=filter(e,curry(dataFilter$1,a))}g.initData(e,null,a?dimValueGetter:function(b){return b.value});return g}registerPreprocessor(function(a){a.markPoint=a.markPoint||{}});cl.extend({type:'markLine',defaultOption:{zlevel:0,z:5,symbol:['circle','arrow'],symbolSize:[8,16],precision:2,tooltip:{trigger:'item'},label:{normal:{show:!0,position:'end'},emphasis:{show:!0}},lineStyle:{normal:{type:'dashed'},emphasis:{width:3}},animationEasing:'linear'}});var jf=function(g,n,p,a){var o=g.getData();var f=a.type;if(!isArray(a)&&(f==='min'||f==='max'||f==='average'||(a.xAxis!=null||a.yAxis!=null))){var l;var c;var b;if(a.yAxis!=null||a.xAxis!=null){c=a.yAxis!=null?'y':'x';l=n.getAxis(c);b=retrieve(a.yAxis,a.xAxis)}else {var m=getAxisInfo$1(a,o,n,g);c=m.valueDataDim;l=m.valueAxis;b=numCalculate(o,c,f)}var i=c==='x'?0:1;var j=1-i;var e=clone(a);var h={};e.type=null;e.coord=[];h.coord=[];e.coord[j]=-Infinity;h.coord[j]=Infinity;var k=p.get('precision');if(k>=0&&typeof b==='number'){b=+b.toFixed(Math.min(k,20))}e.coord[i]=h.coord[i]=b;a=[e,h,{type:f,valueIndex:a.valueIndex,value:b}]}a=[dataTransform(g,a[0]),dataTransform(g,a[1]),extend({},a[2])];a[2].type=a[2].type||'';merge(a[2],a[0]);merge(a[2],a[1]);return a};function isInifinity(a){return !isNaN(a)&&!isFinite(a)}function ifMarkLineHasOnlyDim(a,b,f,e){var c=1-a;var g=e.dimensions[a];return isInifinity(b[c])&&isInifinity(f[c])&&b[a]===f[a]&&e.getAxis(g).containData(b[a])}function markLineFilter(a,b){if(a.type==='cartesian2d'){var c=b[0].coord;var e=b[1].coord;if(c&&e&&(ifMarkLineHasOnlyDim(1,c,e,a)||ifMarkLineHasOnlyDim(0,c,e,a))){return !0}}return dataFilter$1(a,b[0])&&dataFilter$1(a,b[1])}function updateSingleMarkerEndLayout(b,c,k,i,n){var e=i.coordinateSystem;var j=b.getItemModel(c);var a;var g=parsePercent$1(j.get('x'),n.getWidth());var h=parsePercent$1(j.get('y'),n.getHeight());if(!isNaN(g)&&!isNaN(h)){a=[g,h]}else {if(i.getMarkerPosition){a=i.getMarkerPosition(b.getValues(b.dimensions,c))}else {var f=e.dimensions;var o=b.get(f[0],c);var p=b.get(f[1],c);a=e.dataToPoint([o,p])}if(e.type==='cartesian2d'){var l=e.getAxis('x');var m=e.getAxis('y');var f=e.dimensions;if(isInifinity(b.get(f[0],c))){a[0]=l.toGlobalCoord(l.getExtent()[k?0:1])}else {if(isInifinity(b.get(f[1],c))){a[1]=m.toGlobalCoord(m.getExtent()[k?0:1])}}}if(!isNaN(g)){a[0]=g}if(!isNaN(h)){a[1]=h}}b.setItemLayout(c,a)}ea.extend({type:'markLine',updateLayout:function(c,b,a){b.eachSeries(function(e){var f=e.markLineModel;if(f){var h=f.getData();var g=f.__from;var i=f.__to;g.each(function(f){updateSingleMarkerEndLayout(g,f,!0,e,a);updateSingleMarkerEndLayout(i,f,!1,e,a)});h.each(function(f){h.setItemLayout(f,[g.getItemLayout(f),i.getItemLayout(f)])});this.markerGroupMap.get(e.id).updateLayout()}},this)},renderSeries:function(c,a,p,o){var n=c.coordinateSystem;var l=c.id;var m=c.getData();var k=this.markerGroupMap;var j=k.get(l)||k.set(l,new LineDraw());this.group.add(j.group);var h=createList$2(n,c,a);var e=h.from;var i=h.to;var b=h.line;a.__from=e;a.__to=i;a.setData(b);var g=a.get('symbol');var f=a.get('symbolSize');if(!isArray(g)){g=[g,g]}if(typeof f==='number'){f=[f,f]}h.from.each(function(b){updateDataVisualAndLayout(e,b,!0);updateDataVisualAndLayout(i,b,!1)});b.each(function(f){var g=b.getItemModel(f).get('lineStyle.normal.color');b.setItemVisual(f,{color:g||e.getItemVisual(f,'color')});b.setItemLayout(f,[e.getItemLayout(f),i.getItemLayout(f)]);b.setItemVisual(f,{'fromSymbolSize':e.getItemVisual(f,'symbolSize'),'fromSymbol':e.getItemVisual(f,'symbol'),'toSymbolSize':i.getItemVisual(f,'symbolSize'),'toSymbol':i.getItemVisual(f,'symbol')})});j.updateData(b);h.line.eachItemGraphicEl(function(b,e){b.traverse(function(f){f.dataModel=a})});function updateDataVisualAndLayout(h,i,e){var b=h.getItemModel(i);updateSingleMarkerEndLayout(h,i,e,c,o);h.setItemVisual(i,{symbolSize:b.get('symbolSize')||f[e?0:1],symbol:b.get('symbol',!0)||g[e?0:1],color:b.get('itemStyle.normal.color')||m.getVisual('color')})}j.__keep=!0;j.group.silent=a.get('silent')||c.get('silent')}});function createList$2(a,f,b){var e;if(a){e=map(a&&a.dimensions,function(c){var e=f.getData().getDimensionInfo(f.coordDimToDataDim(c)[0])||{};e.name=c;return e})}else {e=[{name:'value',type:'float'}]}var i=new l(e,b);var j=new l(e,b);var g=new l([],b);var c=map(b.get('data'),curry(jf,f,a,b));if(a){c=filter(c,curry(markLineFilter,a))}var h=a?dimValueGetter:function(c){return c.value};i.initData(map(c,function(c){return c[0]}),null,h);j.initData(map(c,function(c){return c[1]}),null,h);g.initData(map(c,function(c){return c[2]}));g.hasItemOption=!0;return {from:i,to:j,line:g}}registerPreprocessor(function(a){a.markLine=a.markLine||{}});cl.extend({type:'markArea',defaultOption:{zlevel:0,z:1,tooltip:{trigger:'item'},animation:!1,label:{normal:{show:!0,position:'top'},emphasis:{show:!0,position:'top'}},itemStyle:{normal:{borderWidth:0}}}});var je=function(h,j,k,i){var b=dataTransform(h,i[0]);var c=dataTransform(h,i[1]);var e=retrieve;var f=b.coord;var g=c.coord;f[0]=e(f[0],-Infinity);f[1]=e(f[1],-Infinity);g[0]=e(g[0],Infinity);g[1]=e(g[1],Infinity);var a=mergeAll([{},b,c]);a.coord=[b.coord,c.coord];a.x0=b.x;a.y0=b.y;a.x1=c.x;a.y1=c.y;return a};function isInifinity$1(a){return !isNaN(a)&&!isFinite(a)}function ifMarkLineHasOnlyDim$1(c,b,e,f){var a=1-c;return isInifinity$1(b[a])&&isInifinity$1(e[a])}function markAreaFilter(b,a){var c=a.coord[0];var e=a.coord[1];if(b.type==='cartesian2d'){if(c&&e&&(ifMarkLineHasOnlyDim$1(1,c,e,b)||ifMarkLineHasOnlyDim$1(0,c,e,b))){return !0}}return dataFilter$1(b,{coord:c,x:a.x0,y:a.y0})||dataFilter$1(b,{coord:e,x:a.x1,y:a.y1})}function getSingleMarkerEndPoint(c,e,a,i,o){var f=i.coordinateSystem;var l=c.getItemModel(e);var b;var g=parsePercent$1(l.get(a[0]),o.getWidth());var h=parsePercent$1(l.get(a[1]),o.getHeight());if(!isNaN(g)&&!isNaN(h)){b=[g,h]}else {if(i.getMarkerPosition){b=i.getMarkerPosition(c.getValues(a,e))}else {var j=c.get(a[0],e);var k=c.get(a[1],e);b=f.dataToPoint([j,k],!0)}if(f.type==='cartesian2d'){var m=f.getAxis('x');var n=f.getAxis('y');var j=c.get(a[0],e);var k=c.get(a[1],e);if(isInifinity$1(j)){b[0]=m.toGlobalCoord(m.getExtent()[a[0]==='x0'?0:1])}else {if(isInifinity$1(k)){b[1]=n.toGlobalCoord(n.getExtent()[a[1]==='y0'?0:1])}}}if(!isNaN(g)){b[0]=g}if(!isNaN(h)){b[1]=h}}return b}var f0=[['x0','y0'],['x1','y0'],['x1','y1'],['x0','y1']];ea.extend({type:'markArea',updateLayout:function(c,a,b){a.eachSeries(function(f){var g=f.markAreaModel;if(g){var e=g.getData();e.each(function(g){var h=map(f0,function(h){return getSingleMarkerEndPoint(e,g,h,f,b)});e.setItemLayout(g,h);var i=e.getItemGraphicEl(g);i.setShape('points',h)})}},this)},renderSeries:function(e,f,l,k){var j=e.coordinateSystem;var h=e.name;var i=e.getData();var g=this.markerGroupMap;var c=g.get(h)||g.set(h,{group:new b()});this.group.add(c.group);c.__keep=!0;var a=createList$3(j,e,f);f.setData(a);a.each(function(b){a.setItemLayout(b,map(f0,function(c){return getSingleMarkerEndPoint(a,b,c,e,k)}));a.setItemVisual(b,{color:i.getVisual('color')})});a.diff(c.__data).add(function(g){var b=new J({shape:{points:a.getItemLayout(g)}});a.setItemGraphicEl(g,b);c.group.add(b)}).update(function(g,h){var b=c.__data.getItemGraphicEl(h);updateProps(b,{shape:{points:a.getItemLayout(g)}},f,g);c.group.add(b);a.setItemGraphicEl(g,b)}).remove(function(b){var a=c.__data.getItemGraphicEl(b);c.group.remove(a)}).execute();a.eachItemGraphicEl(function(b,g){var c=a.getItemModel(g);var j=c.getModel('label.normal');var i=c.getModel('label.emphasis');var h=a.getItemVisual(g,'color');b.useStyle(defaults(c.getModel('itemStyle.normal').getItemStyle(),{fill:modifyAlpha(h,0.4),stroke:h}));b.hoverStyle=c.getModel('itemStyle.emphasis').getItemStyle();setLabelStyle(b.style,b.hoverStyle,j,i,{labelFetcher:f,labelDataIndex:g,defaultText:a.getName(g)||'',isRectText:!0,autoColor:h});setHoverStyle(b,{});b.dataModel=f});c.__data=a;c.group.silent=f.get('silent')||e.get('silent')}});function createList$3(a,f,e){var c;var b;var i=['x0','y0','x1','y1'];if(a){c=map(a&&a.dimensions,function(b){var c=f.getData().getDimensionInfo(f.coordDimToDataDim(b)[0])||{};c.name=b;return c});b=new l(map(i,function(b,g){return {name:b,type:c[g%2].type}}),e)}else {c=[{name:'value',type:'float'}];b=new l(c,e)}var g=map(e.get('data'),curry(je,f,a,e));if(a){g=filter(g,curry(markAreaFilter,a))}var h=a?function(c,h,g,b){return c.coord[Math.floor(b/2)][b%2]}:function(b){return b.value};b.initData(g,null,h);b.hasItemOption=!0;return b}registerPreprocessor(function(a){a.markArea=a.markArea||{}});var j8=function(b){var a=b&&b.timeline;if(!isArray(a)){a=a?[a]:[]}each$1(a,function(a){if(!a){return}compatibleEC2(a)})};function compatibleEC2(a){var e=a.type;var c={'number':'value','time':'time'};if(c[e]){a.axisType=c[e];delete a.type}transferItem(a);if(has$2(a,'controlPosition')){var b=a.controlStyle||(a.controlStyle={});if(!has$2(b,'position')){b.position=a.controlPosition}if(b.position==='none'&&!has$2(b,'show')){b.show=!1;delete b.position}delete a.controlPosition}each$1(a.data||[],function(b){if(isObject(b)&&!isArray(b)){if(!has$2(b,'value')&&has$2(b,'name')){b.value=b.name}transferItem(b)}})}function transferItem(b){var f=b.itemStyle||(b.itemStyle={});var c=f.emphasis||(f.emphasis={});var a=b.label||(b.label||{});var e=a.normal||(a.normal={});var g={normal:1,emphasis:1};each$1(a,function(c,a){if(!g[a]&&!has$2(e,a)){e[a]=c}});if(c.label&&!has$2(a,'emphasis')){a.emphasis=c.label;delete c.label}}function has$2(b,a){return b.hasOwnProperty(a)}g.registerSubTypeDefaulter('timeline',function(){return 'slider'});registerAction({type:'timelineChange',event:'timelineChanged',update:'prepareAndUpdate'},function(b,c){var a=c.getComponent('timeline');if(a&&b.currentIndex!=null){a.setCurrentIndex(b.currentIndex);if(!a.get('loop',!0)&&a.isIndexMax()){a.setPlayState(!1)}}c.resetOption('timeline');return defaults({currentIndex:a.option.currentIndex},b)});registerAction({type:'timelinePlayChange',event:'timelinePlayChanged',update:'update'},function(b,c){var a=c.getComponent('timeline');if(a&&b.playState!=null){a.setPlayState(b.playState)}});var gq=g.extend({type:'timeline',layoutMode:'box',defaultOption:{zlevel:0,z:4,show:!0,axisType:'time',realtime:!0,left:'20%',top:null,right:'20%',bottom:0,width:null,height:40,padding:5,controlPosition:'left',autoPlay:!1,rewind:!1,loop:!0,playInterval:2000,currentIndex:0,itemStyle:{normal:{},emphasis:{}},label:{normal:{color:'#000'},emphasis:{}},data:[]},init:function(b,c,a){this._data;this._names;this.mergeDefaultAndTheme(b,a);this._initData()},mergeOption:function(a){gq.superApply(this,'mergeOption',arguments);this._initData()},setCurrentIndex:function(a){if(a==null){a=this.option.currentIndex}var b=this._data.count();if(this.option.loop){a=(a%b+b)%b}else {a>=b&&(a=b-1);a<0&&(a=0)}this.option.currentIndex=a},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(a){this.option.autoPlay=!!a},getPlayState:function(){return !!this.option.autoPlay},_initData:function(){var b=this.option;var a=b.data||[];var c=b.axisType;var f=this._names=[];if(c==='category'){var e=[];each$1(a,function(c,g){var a=getDataItemValue(c);var b;if(isObject(c)){b=clone(c);b.value=g}else {b=g}e.push(b);if(!isString(a)&&(a==null||isNaN(a))){a=''}f.push(a+'')});a=e}var g={category:'ordinal',time:'time'}[c]||'number';var h=this._data=new l([{name:'value',type:g}],this);h.initData(a,f)},getData:function(){return this._data},getCategories:function(){if(this.get('axisType')==='category'){return this._names.slice()}}});var iO=gq.extend({type:'timeline.slider',defaultOption:{backgroundColor:'rgba(0,0,0,0)',borderColor:'#ccc',borderWidth:0,orient:'horizontal',inverse:!1,tooltip:{trigger:'item'},symbol:'emptyCircle',symbolSize:10,lineStyle:{show:!0,width:2,color:'#304654'},label:{position:'auto',normal:{show:!0,interval:'auto',rotate:0,color:'#304654'},emphasis:{show:!0,color:'#c23531'}},itemStyle:{normal:{color:'#304654',borderWidth:1},emphasis:{color:'#c23531'}},checkpointStyle:{symbol:'circle',symbolSize:13,color:'#c23531',borderWidth:5,borderColor:'rgba(194,53,49, 0.5)',animation:!0,animationDuration:300,animationEasing:'quinticInOut'},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:'left',playIcon:'path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z',stopIcon:'path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z',nextIcon:'path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z',prevIcon:'path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z',normal:{color:'#304654',borderColor:'#304654',borderWidth:1},emphasis:{color:'#c23531',borderColor:'#c23531',borderWidth:2}},data:[]}});mixin(iO,dB);var kw=ad.extend({type:'timeline'});var ci=function(e,c,a,b){q.call(this,e,c,a);this.type=b||'value';this._autoLabelInterval;this.model=null};ci.prototype={constructor:ci,getLabelInterval:function(){var c=this.model;var b=c.getModel('label.normal');var a=b.get('interval');if(a!=null&&a!='auto'){return a}var a=this._autoLabelInterval;if(!a){a=this._autoLabelInterval=getAxisLabelInterval(map(this.scale.getTicks(),this.dataToCoord,this),getFormattedLabels(this,b.get('formatter')),b.getFont(),c.get('orient')==='horizontal'?0:90,b.get('rotate'))}return a},isLabelIgnored:function(b){if(this.type==='category'){var a=this.getLabelInterval();return typeof a==='function'&&!a(b,this.scale.getLabel(b))||b%(a+1)}}};inherits(ci,q);var at=bind;var eW=each$1;var e4=Math.PI;kw.extend({type:'timeline.slider',init:function(b,a){this.api=a;this._axis;this._viewRect;this._timer;this._currentPointer;this._mainGroup;this._labelGroup},render:function(a,h,e,i){this.model=a;this.api=e;this.ecModel=h;this.group.removeAll();if(a.get('show',!0)){var b=this._layout(a,e);var g=this._createGroup('mainGroup');var f=this._createGroup('labelGroup');var c=this._axis=this._createAxis(b,a);a.formatTooltip=function(b){return encodeHTML(c.scale.getLabel(b))};eW(['AxisLine','AxisTick','Control','CurrentPointer'],function(f){this['_render'+f](b,g,c,a)},this);this._renderAxisLabel(b,f,c,a);this._position(b,a)}this._doPlayStop()},remove:function(){this._clearTimer();this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(b,q){var a=b.get('label.normal.position');var f=b.get('orient');var e=getViewRect$4(b,q);if(a==null||a==='auto'){a=f==='horizontal'?e.y+e.height/2<q.getHeight()/2?'-':'+':e.x+e.width/2<q.getWidth()/2?'+':'-'}else {if(isNaN(a)){a={horizontal:{top:'-',bottom:'+'},vertical:{left:'-',right:'+'}}[f][a]}}var y={horizontal:'center',vertical:a>=0||a==='+'?'left':'right'};var x={horizontal:a>=0||a==='+'?'top':'bottom',vertical:'middle'};var z={horizontal:0,vertical:e4/2};var w=f==='vertical'?e.height:e.width;var c=b.getModel('controlStyle');var h=c.get('show');var j=h?c.get('itemSize'):0;var v=h?c.get('itemGap'):0;var i=j+v;var n=b.get('label.normal.rotate')||0;n=n*e4/180;var o;var m;var l;var p;var r=c.get('position',!0);var h=c.get('show',!0);var t=h&&c.get('showPlayBtn',!0);var u=h&&c.get('showPrevBtn',!0);var s=h&&c.get('showNextBtn',!0);var k=0;var g=w;if(r==='left'||r==='bottom'){t&&(o=[0,0],k+=i);u&&(m=[k,0],k+=i);s&&(l=[g-j,0],g-=i)}else {t&&(o=[g-j,0],g-=i);u&&(m=[0,0],k+=i);s&&(l=[g-j,0],g-=i)}p=[k,g];if(b.get('inverse')){p.reverse()}return {viewRect:e,mainLength:w,orient:f,rotation:z[f],labelRotation:n,labelPosOpt:a,labelAlign:b.get('label.normal.align')||y[f],labelBaseline:b.get('label.normal.verticalAlign')||b.get('label.normal.baseline')||x[f],playPosition:o,prevBtnPosition:m,nextBtnPosition:l,axisExtent:p,controlSize:j,controlGap:v}},_position:function(k,p){var g=this._mainGroup;var f=this._labelGroup;var a=k.viewRect;if(k.orient==='vertical'){var b=create$1();var l=a.x;var m=a.y+a.height;translate(b,b,[-l,-m]);rotate(b,b,-e4/2);translate(b,b,[l,m]);a=a.clone();a.applyTransform(b)}var c=getBound(a);var n=getBound(g.getBoundingRect());var o=getBound(f.getBoundingRect());var e=g.position;var h=f.position;h[0]=e[0]=c[0][0];var j=k.labelPosOpt;if(isNaN(j)){var i=j==='+'?0:1;toBound(e,n,c,1,i);toBound(h,o,c,1,1-i)}else {var i=j>=0?0:1;toBound(e,n,c,1,i);h[1]=e[1]+j}g.attr('position',e);f.attr('position',h);g.rotation=f.rotation=k.rotation;setOrigin(g);setOrigin(f);function setOrigin(a){var b=a.position;a.origin=[c[0][0]-b[0],c[1][0]-b[1]]}function getBound(a){return [[a.x,a.x+a.width],[a.y,a.y+a.height]]}function toBound(c,e,f,a,b){c[a]+=f[a][b]-e[a][b]}},_createAxis:function(h,a){var g=a.getData();var e=a.get('axisType');var b=createScaleByModel(a,e);var c=g.getDataExtent('value');b.setExtent(c[0],c[1]);this._customizeScale(b,g);b.niceTicks();var f=new ci('value',b,h.axisExtent,e);f.model=a;return f},_customizeScale:function(a,b){a.getTicks=function(){return b.mapArray(['value'],function(c){return c})};a.getTicksLabels=function(){return map(this.getTicks(),a.getLabel,a)}},_createGroup:function(c){var a=this['_'+c]=new b();this.group.add(a);return a},_renderAxisLine:function(f,c,e,a){var b=e.getExtent();if(!a.get('lineStyle.show')){return}c.add(new L({shape:{x1:b[0],y1:0,x2:b[1],y2:0},style:extend({lineCap:'round'},a.getModel('lineStyle').getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(g,c,b,a){var f=a.getData();var e=b.scale.getTicks();eW(e,function(n,i){var m=b.dataToCoord(n);var h=f.getItemModel(i);var k=h.getModel('itemStyle.normal');var j=h.getModel('itemStyle.emphasis');var l={position:[m,0],onclick:at(this._changeTimeline,this,i)};var e=giveSymbol(h,k,c,l);setHoverStyle(e,j.getItemStyle());if(h.get('tooltip')){e.dataIndex=i;e.dataModel=a}else {e.dataIndex=e.dataModel=null}},this)},_renderAxisLabel:function(b,i,a,c){var f=c.getModel('label.normal');if(!f.get('show')){return}var k=c.getData();var j=a.scale.getTicks();var h=getFormattedLabels(a,f.get('formatter'));var g=a.getLabelInterval();eW(j,function(p,f){if(a.isLabelIgnored(f,g)){return}var l=k.getItemModel(f);var m=l.getModel('label.normal');var n=l.getModel('label.emphasis');var o=a.dataToCoord(p);var j=new e({position:[o,0],rotation:b.labelRotation-b.rotation,onclick:at(this._changeTimeline,this,f),silent:!1});setTextStyle(j.style,m,{text:h[f],textAlign:b.labelAlign,textVerticalAlign:b.labelBaseline});i.add(j);setHoverStyle(j,setTextStyle({},n))},this)},_renderControl:function(b,j,l,a){var c=b.controlSize;var i=b.rotation;var h=a.getModel('controlStyle.normal').getItemStyle();var g=a.getModel('controlStyle.emphasis').getItemStyle();var k=[0,-c/2,c,c];var e=a.getPlayState();var f=a.get('inverse',!0);makeBtn(b.nextBtnPosition,'controlStyle.nextIcon',at(this._changeTimeline,this,f?'-':'+'));makeBtn(b.prevBtnPosition,'controlStyle.prevIcon',at(this._changeTimeline,this,f?'+':'-'));makeBtn(b.playPosition,'controlStyle.'+(e?'stopIcon':'playIcon'),at(this._handlePlayClick,this,!e),!0);function makeBtn(e,n,o,m){if(!e){return}var p={position:e,origin:[c/2,0],rotation:m?-i:0,rectHover:!0,style:h,onclick:o};var f=makeIcon(a,n,k,p);j.add(f);setHoverStyle(f,g)}},_renderCurrentPointer:function(i,j,f,a){var h=a.getData();var c=a.getCurrentIndex();var e=h.getItemModel(c).getModel('checkpointStyle');var b=this;var g={onCreate:function(e){e.draggable=!0;e.drift=at(b._handlePointerDrag,b);e.ondragend=at(b._handlePointerDragend,b);pointerMoveTo(e,c,f,a,!0)},onUpdate:function(b){pointerMoveTo(b,c,f,a)}};this._currentPointer=giveSymbol(e,e,this._mainGroup,{},this._currentPointer,g)},_handlePlayClick:function(a){this._clearTimer();this.api.dispatchAction({type:'timelinePlayChange',playState:a,from:this.uid})},_handlePointerDrag:function(b,c,a){this._clearTimer();this._pointerChangeTimeline([a.offsetX,a.offsetY])},_handlePointerDragend:function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},_pointerChangeTimeline:function(f,g){var a=this._toAxisCoord(f)[0];var h=this._axis;var b=asc(h.getExtent().slice());a>b[1]&&(a=b[1]);a<b[0]&&(a=b[0]);this._currentPointer.position[0]=a;this._currentPointer.dirty();var c=this._findNearestTick(a);var e=this.model;if(g||c!==e.getCurrentIndex()&&e.get('realtime')){this._changeTimeline(c)}},_doPlayStop:function(){this._clearTimer();if(this.model.getPlayState()){this._timer=setTimeout(at(handleFrame,this),this.model.get('playInterval'))}function handleFrame(){var a=this.model;this._changeTimeline(a.getCurrentIndex()+(a.get('rewind',!0)?-1:1))}},_toAxisCoord:function(a){var b=this._mainGroup.getLocalTransform();return applyTransform$1(a,b,!0)},_findNearestTick:function(c){var f=this.model.getData();var b=Infinity;var a;var e=this._axis;f.each(['value'],function(i,g){var h=e.dataToCoord(i);var f=Math.abs(h-c);if(f<b){b=f;a=g}});return a},_clearTimer:function(){if(this._timer){clearTimeout(this._timer);this._timer=null}},_changeTimeline:function(a){var b=this.model.getCurrentIndex();if(a==='+'){a=b+1}else {if(a==='-'){a=b-1}}this.api.dispatchAction({type:'timelineChange',currentIndex:a,from:this.uid})}});function getViewRect$4(a,b){return getLayoutRect(a.getBoxLayoutParams(),{width:b.getWidth(),height:b.getHeight()},a.get('padding'))}function makeIcon(b,c,a,f){var e=makePath(b.get(c).replace(/^path:\/\//,''),clone(f||{}),new BoundingRect(a[0],a[1],a[2],a[3]),'center');return e}function giveSymbol(e,h,j,c,a,f){var i=h.get('color');if(!a){var m=e.get('symbol');a=createSymbol(m,-1,-1,2,2,i);a.setStyle('strokeNoScale',!0);j.add(a);f&&f.onCreate(a)}else {a.setColor(i);j.add(a);f&&f.onUpdate(a)}var n=h.getItemStyle(['color','symbol','symbolSize']);a.setStyle(n);c=merge({rectHover:!0,z2:100},c,!0);var b=e.get('symbolSize');b=b instanceof Array?b.slice():[+b,+b];b[0]/=2;b[1]/=2;c.scale=b;var g=e.get('symbolOffset');if(g){var k=c.position=c.position||[0,0];k[0]+=parsePercent$1(g[0],b[0]);k[1]+=parsePercent$1(g[1],b[1])}var l=e.get('symbolRotate');c.rotation=(l||0)*Math.PI/180||0;a.attr(c);a.updateTransform();return a}function pointerMoveTo(a,g,h,c,f){if(a.dragging){return}var b=c.getModel('checkpointStyle');var e=h.dataToCoord(c.getData().get(['value'],g));if(f||!b.get('animation',!0)){a.attr({position:[e,0]})}else {a.stopAnimation(!0);a.animateTo({position:[e,0]},b.get('animationDuration',!0),b.get('animationEasing',!0))}}registerPreprocessor(j8);var kx=extendComponentModel({type:'toolbox',layoutMode:{type:'box',ignoreSize:!0},mergeDefaultAndTheme:function(a){kx.superApply(this,'mergeDefaultAndTheme',arguments);each$1(this.option.feature,function(e,c){var b=get$5(c);b&&merge(e,b.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:'horizontal',left:'right',top:'top',backgroundColor:'transparent',borderColor:'#ccc',borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{normal:{borderColor:'#666',color:'none'},emphasis:{borderColor:'#3E98C5'}}}});extendComponentView({type:'toolbox',render:function(b,f,a,j){var c=this.group;c.removeAll();if(!b.get('show')){return}var e=+b.get('itemSize');var h=b.get('feature')||{};var i=this._features||(this._features={});var g=[];each$1(h,function(e,c){g.push(c)});(new DataDiffer(this._featureNames||[],g)).add(processFeature).update(processFeature).remove(curry(processFeature,null)).execute();this._featureNames=g;function processFeature(o,p){var k=g[o];var l=g[p];var n=h[k];var e=new Model(n,b,b.ecModel);var c;if(k&&!l){if(isUserFeatureName(k)){c={model:e,onclick:e.option.onclick,featureName:k}}else {var m=get$5(k);if(!m){return}c=new m(e,f,a)}i[k]=c}else {c=i[l];if(!c){return}c.model=e;c.ecModel=f;c.api=a}if(!k&&l){c.dispose&&c.dispose(f,a);return}if(!e.get('show')||c.unusable){c.remove&&c.remove(f,a);return}createIconPaths(e,c,k);e.setIconStatus=function(c,h){var e=this.option;var g=this.iconPaths;e.iconStatus=e.iconStatus||{};e.iconStatus[c]=h;g[c]&&g[c].trigger(h)};if(c.render){c.render(e,f,a,j)}}function createIconPaths(g,k,m){var l=g.getModel('iconStyle');var i=k.getIcons?k.getIcons():g.get('icon');var h=g.get('title')||{};if(typeof i==='string'){var p=i;var o=h;i={};h={};i[m]=p;h[m]=o}var n=g.iconPaths={};each$1(i,function(p,o){var i=createIcon(p,{},{x:-e/2,y:-e/2,width:e,height:e});i.setStyle(l.getModel('normal').getItemStyle());i.hoverStyle=l.getModel('emphasis').getItemStyle();setHoverStyle(i);if(b.get('showTitle')){i.__title=h[o];i.on('mouseover',function(){var c=l.getModel('emphasis').getItemStyle();i.setStyle({text:h[o],textPosition:c.textPosition||'bottom',textFill:c.fill||c.stroke||'#000',textAlign:c.textAlign||'center'})}).on('mouseout',function(){i.setStyle({textFill:null})})}i.trigger(g.get('iconStatus.'+o)||'normal');c.add(i);i.on('click',bind(k.onclick,k,f,a,o));n[o]=i})}layout$2(c,b,a);c.add(makeBackground(c.getBoundingRect(),b));c.eachChild(function(h){var l=h.__title;var g=h.hoverStyle;if(g&&l){var i=getBoundingRect(l,makeFont(g));var n=h.position[0]+c.position[0];var o=h.position[1]+c.position[1]+e;var k=!1;if(o+i.height>a.getHeight()){g.textPosition='top';k=!0}var m=k?-5-i.height:e+8;if(n+i.width/2>a.getWidth()){g.textPosition=['100%',m];g.textAlign='right'}else {if(n-i.width/2<0){g.textPosition=[0,m];g.textAlign='left'}}}})},updateView:function(e,a,c,b){each$1(this._features,function(f){f.updateView&&f.updateView(f.model,a,c,b)})},updateLayout:function(e,a,c,b){each$1(this._features,function(f){f.updateLayout&&f.updateLayout(f.model,a,c,b)})},remove:function(a,b){each$1(this._features,function(c){c.remove&&c.remove(a,b)});this.group.removeAll()},dispose:function(a,b){each$1(this._features,function(c){c.dispose&&c.dispose(a,b)})}});function isUserFeatureName(a){return a.indexOf('my')===0}var f3=bq.toolbox.saveAsImage;function SaveAsImage(a){this.model=a}SaveAsImage.defaultOption={show:!0,icon:'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',title:f3.title,type:'png',name:'',excludeComponents:['toolbox'],pixelRatio:1,lang:f3.lang.slice()};SaveAsImage.prototype.unusable=!f.canvasSupported;var mq=SaveAsImage.prototype;mq.onclick=function(h,o){var a=this.model;var j=a.get('name')||h.get('title.0.text')||'echarts';var b=document.createElement('a');var e=a.get('type',!0)||'png';b.download=j+'.'+e;b.target='_blank';var g=o.getConnectedDataURL({type:e,backgroundColor:a.get('backgroundColor',!0)||h.get('backgroundColor')||'#fff',excludeComponents:a.get('excludeComponents'),pixelRatio:a.get('pixelRatio')});b.href=g;if(typeof MouseEvent==='function'&&!f.browser.ie&&!f.browser.edge){var p=new MouseEvent('click',{view:window,bubbles:!0,cancelable:!1});b.dispatchEvent(p)}else {if(window.navigator.msSaveOrOpenBlob){var l=atob(g.split(',')[1]);var c=l.length;var k=new Uint8Array(c);while(c--){k[c]=l.charCodeAt(c)}var m=new Blob([k]);window.navigator.msSaveOrOpenBlob(m,j+'.'+e)}else {var i=a.get('lang');var n=''+'<body style="margin:0;">'+'<img src="'+g+'" style="max-width:100%;" title="'+(i&&i[0]||'')+'" />'+'</body>';var q=window.open();q.document.write(n)}}};register$1('saveAsImage',SaveAsImage);var kl=bq.toolbox.magicType;function MagicType(a){this.model=a}MagicType.defaultOption={show:!0,type:[],icon:{line:'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',bar:'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',stack:'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z',tiled:'M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z'},title:clone(kl.title),option:{},seriesIndex:{}};var hA=MagicType.prototype;hA.getIcons=function(){var c=this.model;var a=c.get('icon');var b={};each$1(c.get('type'),function(c){if(a[c]){b[c]=a[c]}});return b};var fE={'line':function(b,c,a,e){if(b==='bar'){return merge({id:c,type:'line',data:a.get('data'),stack:a.get('stack'),markPoint:a.get('markPoint'),markLine:a.get('markLine')},e.get('option.line')||{},!0)}},'bar':function(b,c,a,e){if(b==='line'){return merge({id:c,type:'bar',data:a.get('data'),stack:a.get('stack'),markPoint:a.get('markPoint'),markLine:a.get('markLine')},e.get('option.bar')||{},!0)}},'stack':function(a,b,e,c){if(a==='line'||a==='bar'){return merge({id:b,stack:'__ec_magicType_stack__'},c.get('option.stack')||{},!0)}},'tiled':function(a,b,e,c){if(a==='line'||a==='bar'){return merge({id:b,stack:''},c.get('option.tiled')||{},!0)}}};var lK=[['line','bar'],['stack','tiled']];hA.onclick=function(f,h,a){var c=this.model;var e=c.get('seriesIndex.'+a);if(!fE[a]){return}var b={series:[]};var g=function(e){var n=e.subType;var p=e.id;var j=fE[a](n,p,e,c);if(j){defaults(j,e.option);b.series.push(j)}var k=e.coordinateSystem;if(k&&k.type==='cartesian2d'&&(a==='line'||a==='bar')){var l=k.getAxesByScale('ordinal')[0];if(l){var q=l.dim;var g=q+'Axis';var o=f.queryComponents({mainType:g,index:e.get(name+'Index'),id:e.get(name+'Id')})[0];var i=o.componentIndex;b[g]=b[g]||[];for(var m=0;m<=i;m++){b[g][i]=b[g][i]||{}}b[g][i].boundaryGap=a==='bar'?!0:!1}}};each$1(lK,function(b){if(indexOf(b,a)>=0){each$1(b,function(e){c.setIconStatus(e,'normal')})}});c.setIconStatus(a,'emphasis');f.eachComponent({mainType:'series',query:e==null?null:{seriesIndex:e}},g);h.dispatchAction({type:'changeMagicType',currentType:a,newOption:b})};registerAction({type:'changeMagicType',event:'magicTypeChanged',update:'prepareAndUpdate'},function(b,a){a.mergeOption(b.newOption)});register$1('magicType',MagicType);var gC=bq.toolbox.dataView;var ce=(new Array(60)).join('-');var aJ='\t';function groupSeries(e){var a={};var b=[];var c=[];e.eachRawSeries(function(h){var g=h.coordinateSystem;if(g&&(g.type==='cartesian2d'||g.type==='polar')){var f=g.getBaseAxis();if(f.type==='category'){var i=f.dim+'_'+f.index;if(!a[i]){a[i]={categoryAxis:f,valueAxis:g.getOtherAxis(f),series:[]};c.push({axisDim:f.dim,axisIndex:f.index})}a[i].series.push(h)}else {b.push(h)}}else {b.push(h)}});return {seriesGroupByCategoryAxis:a,other:b,meta:c}}function assembleSeriesWithCategoryAxis(b){var a=[];each$1(b,function(e,n){var j=e.categoryAxis;var l=e.valueAxis;var k=l.dim;var m=[' '].concat(map(e.series,function(a){return a.name}));var c=[j.model.getCategories()];each$1(e.series,function(a){c.push(a.getRawData().mapArray(k,function(c){return c}))});var i=[m.join(aJ)];for(var f=0;f<c[0].length;f++){var h=[];for(var g=0;g<c.length;g++){h.push(c[g][f])}i.push(h.join(aJ))}a.push(i.join('\n'))});return a.join('\n\n'+ce+'\n\n')}function assembleOtherSeries(a){return map(a,function(c){var b=c.getRawData();var e=[c.name];var f=[];b.each(b.dimensions,function(){var h=arguments.length;var j=arguments[h-1];var i=b.getName(j);for(var g=0;g<h-1;g++){f[g]=arguments[g]}e.push((i?i+aJ:'')+f.join(aJ))});return e.join('\n')}).join('\n\n'+ce+'\n\n')}function getContentFromModel(b){var a=groupSeries(b);return {value:filter([assembleSeriesWithCategoryAxis(a.seriesGroupByCategoryAxis),assembleOtherSeries(a.other)],function(a){return a.replace(/[\n\t\s]/g,'')}).join('\n\n'+ce+'\n\n'),meta:a.meta}}function trim(a){return a.replace(/^\s\s*/,'').replace(/\s\s*$/,'')}function isTSVFormat(a){var b=a.slice(0,a.indexOf('\n'));if(b.indexOf(aJ)>=0){return !0}}var dL=new RegExp('['+aJ+']+','g');function parseTSVContents(i){var c=i.split(/\n+/g);var h=trim(c.shift()).split(dL);var g=[];var e=map(h,function(a){return {name:a,data:[]}});for(var b=0;b<c.length;b++){var f=trim(c[b]).split(dL);g.push(f.shift());for(var a=0;a<f.length;a++){e[a]&&(e[a].data[b]=f[a])}}return {series:e,categories:g}}function parseListContents(k){var f=k.split(/\n+/g);var j=trim(f.shift());var e=[];for(var a=0;a<f.length;a++){var b=trim(f[a]).split(dL);var i='';var c;var h=!1;if(isNaN(b[0])){h=!0;i=b[0];b=b.slice(1);e[a]={name:i,value:[]};c=e[a].value}else {c=e[a]=[]}for(var g=0;g<b.length;g++){c.push(+b[g])}if(c.length===1){h?e[a].value=c[0]:e[a]=c[0]}}return {name:j,data:e}}function parseContents(e,b){var c=e.split(new RegExp('\n*'+ce+'\n*','g'));var a={series:[]};each$1(c,function(h,i){if(isTSVFormat(h)){var c=parseTSVContents(h);var f=b[i];var g=f.axisDim+'Axis';if(f){a[g]=a[g]||[];a[g][f.axisIndex]={data:c.categories};a.series=a.series.concat(c.series)}}else {var c=parseListContents(h);a.series.push(c)}});return a}function DataView(a){this._dom=null;this.model=a}DataView.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',title:clone(gC.title),lang:clone(gC.lang),backgroundColor:'#fff',textColor:'#000',textareaColor:'#fff',textareaBorderColor:'#333',buttonColor:'#c23531',buttonTextColor:'#fff'};DataView.prototype.onclick=function(s,m){var j=m.getDom();var a=this.model;if(this._dom){j.removeChild(this._dom)}var c=document.createElement('div');c.style.cssText='position:absolute;left:5px;top:5px;bottom:5px;right:5px;';c.style.backgroundColor=a.get('backgroundColor')||'#fff';var l=document.createElement('h4');var n=a.get('lang')||[];l.innerHTML=n[0]||a.get('title');l.style.cssText='margin: 10px 20px;';l.style.color=a.get('textColor');var e=document.createElement('div');var b=document.createElement('textarea');e.style.cssText='display:block;width:100%;overflow:auto;';var p=a.get('optionToContent');var o=a.get('contentToOption');var q=getContentFromModel(s);if(typeof p==='function'){var k=p(m.getOption());if(typeof k==='string'){e.innerHTML=k}else {if(isDom(k)){e.appendChild(k)}}}else {e.appendChild(b);b.readOnly=a.get('readOnly');b.style.cssText='width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;';b.style.color=a.get('textColor');b.style.borderColor=a.get('textareaBorderColor');b.style.backgroundColor=a.get('textareaColor');b.value=q.value}var r=q.meta;var f=document.createElement('div');f.style.cssText='position:absolute;bottom:0;left:0;right:0;';var h='float:right;margin-right:20px;border:none;'+'cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';var i=document.createElement('div');var g=document.createElement('div');h+=';background-color:'+a.get('buttonColor');h+=';color:'+a.get('buttonTextColor');var t=this;function close(){j.removeChild(c);t._dom=null}addEventListener(i,'click',close);addEventListener(g,'click',function(){var a;try{if(typeof o==='function'){a=o(e,m.getOption())}else {a=parseContents(b.value,r)}}catch(m8){close();throw new Error('Data view format error '+m8)}if(a){m.dispatchAction({type:'changeDataView',newOption:a})}close()});i.innerHTML=n[1];g.innerHTML=n[2];g.style.cssText=h;i.style.cssText=h;!a.get('readOnly')&&f.appendChild(g);f.appendChild(i);addEventListener(b,'keydown',function(a){if((a.keyCode||a.which)===9){var c=this.value;var b=this.selectionStart;var e=this.selectionEnd;this.value=c.substring(0,b)+aJ+c.substring(e);this.selectionStart=this.selectionEnd=b+1;aA(a)}});c.appendChild(l);c.appendChild(e);c.appendChild(f);e.style.height=j.clientHeight-80+'px';j.appendChild(c);this._dom=c};DataView.prototype.remove=function(b,a){this._dom&&a.getDom().removeChild(this._dom)};DataView.prototype.dispose=function(a,b){this.remove(a,b)};function tryMergeDataOption(b,a){return map(b,function(c,f){var e=a&&a[f];if(isObject(e)&&!isArray(e)){if(isObject(c)&&!isArray(c)){c=c.value}return defaults({value:c},e)}else {return c}})}register$1('dataView',DataView);registerAction({type:'changeDataView',event:'dataViewChanged',update:'prepareAndUpdate'},function(c,b){var a=[];each$1(c.newOption.series,function(e){var f=b.getSeriesByName(e.name)[0];if(!f){a.push(extend({type:'scatter'},e))}else {var g=f.get('data');a.push({name:e.name,data:tryMergeDataOption(e.data,g)})}});b.mergeOption(defaults({series:a},c.newOption))});var hy=each$1;var e_='\x00_ec_hist_store';function push(c,b){var a=giveStore$1(c);hy(b,function(j,e){var f=a.length-1;for(;f>=0;f--){var i=a[f];if(i[e]){break}}if(f<0){var g=c.queryComponents({mainType:'dataZoom',subType:'select',id:e})[0];if(g){var h=g.getPercentRange();a[0][e]={dataZoomId:e,start:h[0],end:h[1]}}}});a.push(b)}function pop(c){var a=giveStore$1(c);var e=a[a.length-1];a.length>1&&a.pop();var b={};hy(e,function(e,g){for(var f=a.length-1;f>=0;f--){var e=a[f][g];if(e){b[g]=e;break}}});return b}function clear$1(a){a[e_]=null}function count(a){return giveStore$1(a).length}function giveStore$1(b){var a=b[e_];if(!a){a=b[e_]=[{}]}return a}dP.extend({type:'dataZoom.select'});dW.extend({type:'dataZoom.select'});var kB=bq.toolbox.dataZoom;var hx=each$1;var i3='\x00_ec_\x00toolbox-dataZoom_';function DataZoom(c,b,a){(this._brushController=new BrushController(a.getZr())).on('brush',bind(this._onBrush,this)).mount();this._isZoomActive}DataZoom.defaultOption={show:!0,icon:{zoom:'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',back:'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'},title:clone(kB.title)};var bj=DataZoom.prototype;bj.render=function(a,b,c,e){this.model=a;this.ecModel=b;this.api=c;updateZoomBtnStatus(a,b,this,e,c);updateBackBtnStatus(a,b)};bj.onclick=function(b,c,a){lF[a].call(this)};bj.remove=function(a,b){this._brushController.unmount()};bj.dispose=function(a,b){this._brushController.dispose()};var lF={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:'takeGlobalCursor',key:'dataZoomSelect',dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};bj._onBrush=function(c,f){if(!f.isEnd||!c.length){return}var b={};var a=this.ecModel;this._brushController.updateCovers([]);var e=new BrushTargetManager(retrieveAxisSetting(this.model.option),a,{include:['grid']});e.matchOutputRanges(c,a,function(g,b,a){if(a.type!=='cartesian2d'){return}var e=g.brushType;if(e==='rect'){setBatch('x',a,b[0]);setBatch('y',a,b[1])}else {setBatch({lineX:'x',lineY:'y'}[e],a,b)}});push(a,b);this._dispatchZoomAction(b);function setBatch(j,l,h){var k=l.getAxis(j);var i=k.model;var e=findDataZoom(j,i,a);var g=e.findRepresentativeAxisProxy(i).getMinMaxSpan();if(g.minValueSpan!=null||g.maxValueSpan!=null){h=bb(0,h.slice(),k.scale.getExtent(),0,g.minValueSpan,g.maxValueSpan)}e&&(b[e.id]={dataZoomId:e.id,startValue:h[0],endValue:h[1]})}function findDataZoom(e,b,g){var a;g.eachComponent({mainType:'dataZoom',subType:'select'},function(h){var i=h.getAxisModel(e,b.componentIndex);i&&(a=h)});return a}};bj._dispatchZoomAction=function(b){var a=[];hx(b,function(c,e){a.push(clone(c))});a.length&&this.api.dispatchAction({type:'dataZoom',from:this.uid,batch:a})};function retrieveAxisSetting(b){var a={};each$1(['xAxisIndex','yAxisIndex'],function(c){a[c]=b[c];a[c]==null&&(a[c]='all');(a[c]===!1||a[c]==='none')&&(a[c]=[])});return a}function updateBackBtnStatus(a,b){a.setIconStatus('back',count(b)>1?'emphasis':'normal')}function updateZoomBtnStatus(e,g,c,b,h){var a=c._isZoomActive;if(b&&b.type==='takeGlobalCursor'){a=b.key==='dataZoomSelect'?b.dataZoomSelectActive:!1}c._isZoomActive=a;e.setIconStatus('zoom',a?'emphasis':'normal');var f=new BrushTargetManager(retrieveAxisSetting(e.option),g,{include:['grid']});c._brushController.setPanels(f.makePanelOpts(h,function(a){return a.xAxisDeclared&&!a.yAxisDeclared?'lineX':!a.xAxisDeclared&&a.yAxisDeclared?'lineY':'rect'})).enableBrush(a?{brushType:'auto',brushStyle:{lineWidth:0,fill:'rgba(0,0,0,0.2)'}}:!1)}register$1('dataZoom',DataZoom);registerPreprocessor(function(b){if(!b){return}var c=b.dataZoom||(b.dataZoom=[]);if(!isArray(c)){b.dataZoom=c=[c]}var a=b.toolbox;if(a){if(isArray(a)){a=a[0]}if(a&&a.feature){var e=a.feature.dataZoom;addForAxis('xAxis',e);addForAxis('yAxis',e)}}function addForAxis(e,g){if(!g){return}var f=e+'Index';var a=g[f];if(a!=null&&a!='all'&&!isArray(a)){a=a===!1||a==='none'?[]:[a]}forEachComponent(e,function(j,h){if(a!=null&&a!='all'&&indexOf(a,h)===-1){return}var i={type:'select',$fromToolbox:!0,id:i3+e+h};i[f]=h;c.push(i)})}function forEachComponent(c,e){var a=b[c];if(!isArray(a)){a=a?[a]:[]}hx(a,e)}});var lo=bq.toolbox.restore;function Restore(a){this.model=a}Restore.defaultOption={show:!0,icon:'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',title:lo.title};var mr=Restore.prototype;mr.onclick=function(a,b,c){clear$1(a);b.dispatchAction({type:'restore',from:this.uid})};register$1('restore',Restore);registerAction({type:'restore',event:'restore',update:'prepareAndUpdate'},function(b,a){a.resetOption('recreate')});var h5='urn:schemas-microsoft-com:vml';var h6=typeof window==='undefined'?null:window;var hh=!1;var H=h6&&h6.document;function createNode(a){return d_(a)}var d_;if(H&&!f.canvasSupported){try{!H.namespaces.zrvml&&H.namespaces.add('zrvml',h5);d_=function(a){return H.createElement('<zrvml:'+a+' class="zrvml">')}}catch(m8){d_=function(a){return H.createElement('<'+a+' xmlns="'+h5+'" class="zrvml">')}}}function initVML(){if(hh||!H){return}hh=!0;var a=H.styleSheets;if(a.length<31){H.createStyleSheet().addRule('.zrvml','behavior:url(#default#VML)')}else {a[0].addRule('.zrvml','behavior:url(#default#VML)')}}var aU=E.CMD;var h=Math.round;var bT=Math.sqrt;var mO=Math.abs;var h2=Math.cos;var h4=Math.sin;var eu=Math.max;if(!f.canvasSupported){var p=',';var dd='progid:DXImageTransform.Microsoft';var n=21600;var B=n/2;var k6=100000;var mb=1000;var dC=function(a){a.style.cssText='position:absolute;left:0;top:0;width:1px;height:1px;';a.coordsize=n+','+n;a.coordorigin='0,0'};var iP=function(a){return String(a).replace(/&/g,'&amp;').replace(/"/g,'&quot;')};var hB=function(c,b,a){return 'rgb('+[c,b,a].join(',')+')'};var Y=function(a,b){if(b&&a&&b.parentNode!==a){a.appendChild(b)}};var bP=function(a,b){if(b&&a&&b.parentNode===a){a.removeChild(b)}};var eq=function(a,c,b){return (parseFloat(a)||0)*k6+(parseFloat(c)||0)*mb+b};var gi=function(a,b){if(typeof a==='string'){if(a.lastIndexOf('%')>=0){return parseFloat(a)/100*b}return parseFloat(a)}return a};var fF=function(c,e,b){var a=parse(e);b=+b;if(isNaN(b)){b=1}if(a){c.color=hB(a[0],a[1],a[2]);c.opacity=b*a[3]}};var jq=function(b){var a=parse(b);return [hB(a[0],a[1],a[2]),a[3]]};var kb=function(b,l,o){var a=l.fill;if(a!=null){if(a instanceof S){var i;var f=0;var A=[0,0];var s=0;var x=1;var m=o.getBoundingRect();var k=m.width;var j=m.height;if(a.type==='linear'){i='gradient';var e=o.transform;var c=[a.x*k,a.y*j];var p=[a.x2*k,a.y2*j];if(e){applyTransform(c,c,e);applyTransform(p,p,e)}var G=p[0]-c[0];var H=p[1]-c[1];f=Math.atan2(G,H)*180/Math.PI;if(f<0){f+=360}if(f<1.0E-6){f=0}}else {i='gradientradial';var c=[a.x*k,a.y*j];var e=o.transform;var y=o.scale;var u=k;var r=j;A=[(c[0]-m.x)/u,(c[1]-m.y)/r];if(e){applyTransform(c,c,e)}u/=y[0]*n;r/=y[1]*n;var w=eu(u,r);s=2*0/w;x=2*a.r/w-s}var t=a.colorStops.slice();t.sort(function(a,c){return a.offset-c.offset});var q=t.length;var g=[];var z=[];for(var h=0;h<q;h++){var B=t[h];var v=jq(B.color);z.push(B.offset*x+s+' '+v[0]);if(h===0||h===q-1){g.push(v)}}if(q>=2){var E=g[0][0];var F=g[1][0];var C=g[0][1]*l.opacity;var D=g[1][1]*l.opacity;b.type=i;b.method='none';b.focus='100%';b.angle=f;b.color=E;b.color2=F;b.colors=z.join(',');b.opacity=D;b.opacity2=C}if(i==='radial'){b.focusposition=A.join(',')}}else {fF(b,a,l.opacity)}}};var jA=function(b,a){if(a.lineDash!=null){b.dashstyle=a.lineDash.join(' ')}if(a.stroke!=null&&!(a.stroke instanceof S)){fF(b,a.stroke,a.opacity)}};var b0=function(c,e,b,g){var f=e=='fill';var a=c.getElementsByTagName(e)[0];if(b[e]!=null&&b[e]!=='none'&&(f||!f&&b.lineWidth)){c[f?'filled':'stroked']='true';if(b[e] instanceof S){bP(c,a)}if(!a){a=createNode(e)}f?kb(a,b,g):jA(a,b);Y(c,a)}else {c[f?'filled':'stroked']='false';bP(c,a)}};var G=[[],[],[]];var ju=function(N,c){var U=aU.M;var S=aU.C;var T=aU.L;var R=aU.A;var O=aU.Q;var q=[];var j;var u;var M;var a;var l;var m;var b=N.data;var P=N.len();for(a=0;a<P;){M=b[a++];u='';j=0;switch(M){case U:u=' m ';j=1;l=b[a++];m=b[a++];G[0][0]=l;G[0][1]=m;break;case T:u=' l ';j=1;l=b[a++];m=b[a++];G[0][0]=l;G[0][1]=m;break;case O:case S:u=' c ';j=3;var g=b[a++];var i=b[a++];var C=b[a++];var F=b[a++];var D;var H;if(M===O){D=C;H=F;C=(C+2*g)/3;F=(F+2*i)/3;g=(l+2*g)/3;i=(m+2*i)/3}else {D=b[a++];H=b[a++]};G[0][0]=g;G[0][1]=i;G[1][0]=C;G[1][1]=F;G[2][0]=D;G[2][1]=H;l=D;m=H;break;case R:var w=0;var x=0;var s=1;var t=1;var L=0;if(c){w=c[4];x=c[5];s=bT(c[0]*c[0]+c[1]*c[1]);t=bT(c[2]*c[2]+c[3]*c[3]);L=Math.atan2(-c[1]/t,c[0]/s)};var r=b[a++];var k=b[a++];var z=b[a++];var A=b[a++];var y=b[a++]+L;var K=b[a++]+y+L;a++;var o=b[a++];var v=r+h2(y)*z;var E=k+h4(y)*A;var g=r+h2(K)*z;var i=k+h4(K)*A;var Q=o?' wa ':' at ';if(Math.abs(v-g)<1.0E-4){if(Math.abs(K-y)>0.01){if(o){v+=270/n}}else {if(Math.abs(E-k)<1.0E-4){if(o&&v<r||!o&&v>r){i-=270/n}else {i+=270/n}}else {if(o&&E<k||!o&&E>k){g+=270/n}else {g-=270/n}}}};q.push(Q,h(((r-z)*s+w)*n-B),p,h(((k-A)*t+x)*n-B),p,h(((r+z)*s+w)*n-B),p,h(((k+A)*t+x)*n-B),p,h((v*s+w)*n-B),p,h((E*t+x)*n-B),p,h((g*s+w)*n-B),p,h((i*t+x)*n-B));l=g;m=i;break;case aU.R:var e=G[0];var f=G[1];e[0]=b[a++];e[1]=b[a++];f[0]=e[0]+b[a++];f[1]=e[1]+b[a++];if(c){applyTransform(e,e,c);applyTransform(f,f,c)};e[0]=h(e[0]*n-B);f[0]=h(f[0]*n-B);e[1]=h(e[1]*n-B);f[1]=h(f[1]*n-B);q.push(' m ',e[0],p,e[1],' l ',f[0],p,e[1],' l ',f[0],p,f[1],' l ',e[0],p,f[1]);break;case aU.Z:q.push(' x ');}if(j>0){q.push(u);for(var I=0;I<j;I++){var J=G[I];c&&applyTransform(J,J,c);q.push(h(J[0]*n-B),p,h(J[1]*n-B),I<j-1?p:'')}}}return q.join('')};Path.prototype.brushVML=function(f){var b=this.style;var a=this._vmlEl;if(!a){a=createNode('shape');dC(a);this._vmlEl=a}b0(a,'fill',b,this);b0(a,'stroke',b,this);var c=this.transform;var i=c!=null;var h=a.getElementsByTagName('stroke')[0];if(h){var g=b.lineWidth;if(i&&!b.strokeNoScale){var j=c[0]*c[3]-c[1]*c[2];g*=bT(mO(j))}h.weight=g+'px'}var e=this.path||(this.path=new E());if(this.__dirtyPath){e.beginPath();this.buildPath(e,this.shape);e.toStatic();this.__dirtyPath=!1}a.path=ju(e,this.transform);a.style.zIndex=eq(this.zlevel,this.z,this.z2);Y(f,a);if(b.text!=null){this.drawRectText(f,this.getBoundingRect())}else {this.removeRectText(f)}};Path.prototype.onRemove=function(a){bP(a,this._vmlEl);this.removeRectText(a)};Path.prototype.onAdd=function(a){Y(a,this._vmlEl);this.appendRectText(a)};var mp=function(a){return typeof a==='object'&&a.tagName&&a.tagName.toUpperCase()==='IMG'};ZImage.prototype.brushVML=function(I){var e=this.style;var c=e.image;var k;var j;if(mp(c)){var E=c.src;if(E===this._imageSrc){k=this._imageWidth;j=this._imageHeight}else {var s=c.runtimeStyle;var N=s.width;var M=s.height;s.width='auto';s.height='auto';k=c.width;j=c.height;s.width=N;s.height=M;this._imageSrc=E;this._imageWidth=k;this._imageHeight=j}c=E}else {if(c===this._imageSrc){k=this._imageWidth;j=this._imageHeight}}if(!c){return}var n=e.x||0;var o=e.y||0;var m=e.width;var l=e.height;var w=e.sWidth;var v=e.sHeight;var K=e.sx||0;var L=e.sy||0;var O=w&&v;var i=this._vmlEl;if(!i){i=H.createElement('div');dC(i);this._vmlEl=i}var t=i.style;var G=!1;var a;var f=1;var g=1;if(this.transform){a=this.transform;f=bT(a[0]*a[0]+a[1]*a[1]);g=bT(a[2]*a[2]+a[3]*a[3]);G=a[1]||a[2]}if(G){var x=[n,o];var y=[n+m,o];var z=[n,o+l];var A=[n+m,o+l];applyTransform(x,x,a);applyTransform(y,y,a);applyTransform(z,z,a);applyTransform(A,A,a);var P=eu(x[0],y[0],z[0],A[0]);var Q=eu(x[1],y[1],z[1],A[1]);var F=[];F.push('M11=',a[0]/f,p,'M12=',a[2]/g,p,'M21=',a[1]/f,p,'M22=',a[3]/g,p,'Dx=',h(n*f+a[4]),p,'Dy=',h(o*g+a[5]));t.padding='0 '+h(P)+'px '+h(Q)+'px 0';t.filter=dd+'.Matrix('+F.join('')+', SizingMethod=clip)'}else {if(a){n=n*f+a[4];o=o*g+a[5]}t.filter='';t.left=h(n)+'px';t.top=h(o)+'px'}var r=this._imageEl;var b=this._cropEl;if(!r){r=H.createElement('div');this._imageEl=r}var q=r.style;if(O){if(!(k&&j)){var u=new Image();var D=this;u.onload=function(){u.onload=null;k=u.width;j=u.height;q.width=h(f*k*m/w)+'px';q.height=h(g*j*l/v)+'px';D._imageWidth=k;D._imageHeight=j;D._imageSrc=c};u.src=c}else {q.width=h(f*k*m/w)+'px';q.height=h(g*j*l/v)+'px'}if(!b){b=H.createElement('div');b.style.overflow='hidden';this._cropEl=b}var B=b.style;B.width=h((m+K*m/w)*f);B.height=h((l+L*l/v)*g);B.filter=dd+'.Matrix(Dx='+-K*m/w*f+',Dy='+-L*l/v*g+')';if(!b.parentNode){i.appendChild(b)}if(r.parentNode!=b){b.appendChild(r)}}else {q.width=h(f*m)+'px';q.height=h(g*l)+'px';i.appendChild(r);if(b&&b.parentNode){i.removeChild(b);this._cropEl=null}}var C='';var J=e.opacity;if(J<1){C+='.Alpha(opacity='+h(J*100)+') '}C+=dd+'.AlphaImageLoader(src='+c+', SizingMethod=scale)';q.filter=C;i.style.zIndex=eq(this.zlevel,this.z,this.z2);Y(I,i);if(e.text!=null){this.drawRectText(I,this.getBoundingRect())}};ZImage.prototype.onRemove=function(a){bP(a,this._vmlEl);this._vmlEl=null;this._cropEl=null;this._imageEl=null;this.removeRectText(a)};ZImage.prototype.onAdd=function(a){Y(a,this._vmlEl);this.appendRectText(a)};var da='normal';var dK={};var dg=0;var iM=100;var mz=document.createElement('div');var kG=function(c){var b=dK[c];if(!b){if(dg>iM){dg=0;dK={}}var a=mz.style;var e;try{a.font=c;e=a.fontFamily.split(',')[0]}catch(m9){}b={style:a.fontStyle||da,variant:a.fontVariant||da,weight:a.fontWeight||da,size:parseFloat(a.fontSize||12)|0,family:e||'Microsoft YaHei'};dK[c]=b;dg++}return b};var aj;$override$1('measureText',function(c,b){var a=H;if(!aj){aj=a.createElement('div');aj.style.cssText='position:absolute;top:-20000px;left:0;'+'padding:0;margin:0;border:none;white-space:pre;';H.body.appendChild(aj)}try{aj.style.font=b}catch(m9){}aj.innerHTML='';aj.appendChild(a.createTextNode(c));return {width:aj.offsetWidth}});var ez=new BoundingRect();var kC=function(E,f,n,w){var b=this.style;this.__dirty&&normalizeTextStyle(b,!0);var c=b.text;c!=null&&(c+='');if(!c){return}if(b.rich){var z=parseRichText(c,b);c=[];for(var x=0;x<z.lines.length;x++){var B=z.lines[x].tokens;var A=[];for(var y=0;y<B.length;y++){A.push(B[y].text)}c.push(A.join(''))}c=c.join('\n')}var k;var i;var l=b.textAlign;var s=b.textVerticalAlign;var m=kG(b.font);var C=m.style+' '+m.variant+' '+m.weight+' '+m.size+'px "'+m.family+'"';n=n||getBoundingRect(c,C,l,s);var g=this.transform;if(g&&!w){ez.copy(f);ez.applyTransform(g);f=ez}if(!w){var t=b.textPosition;var D=b.textDistance;if(t instanceof Array){k=f.x+gi(t[0],f.width);i=f.y+gi(t[1],f.height);l=l||'left'}else {var v=adjustTextPositionOnRect(t,f,D);k=v.x;i=v.y;l=l||v.textAlign;s=s||v.textVerticalAlign}}else {k=f.x;i=f.y}k=adjustTextX(k,n.width,l);i=adjustTextY(i,n.height,s);i+=n.height/2;var r=createNode;var a=this._textVmlEl;var o;var j;var e;if(!a){a=r('line');o=r('path');j=r('textpath');e=r('skew');j.style['v-text-align']='left';dC(a);o.textpathok=!0;j.on=!0;a.from='0 0';a.to='1000 0.05';Y(a,e);Y(a,o);Y(a,j);this._textVmlEl=a}else {e=a.firstChild;o=e.nextSibling;j=o.nextSibling}var u=[k,i];var q=a.style;if(g&&w){applyTransform(u,u,g);e.on=!0;e.matrix=g[0].toFixed(3)+p+g[2].toFixed(3)+p+g[1].toFixed(3)+p+g[3].toFixed(3)+',0,0';e.offset=(h(u[0])||0)+','+(h(u[1])||0);e.origin='0 0';q.left='0px';q.top='0px'}else {e.on=!1;q.left=h(k)+'px';q.top=h(i)+'px'}j.string=iP(c);try{j.style.font=C}catch(m9){}b0(a,'fill',{fill:b.textFill,opacity:b.opacity},this);b0(a,'stroke',{stroke:b.textStroke,opacity:b.opacity,lineDash:b.lineDash},this);a.style.zIndex=eq(this.zlevel,this.z,this.z2);Y(E,a)};var j9=function(a){bP(a,this._textVmlEl);this._textVmlEl=null};var jX=function(a){Y(a,this._textVmlEl)};var hZ=[cI,Displayable,ZImage,Path,e];for(var fc=0;fc<hZ.length;fc++){var eY=hZ[fc].prototype;eY.drawRectText=kC;eY.removeRectText=j9;eY.appendRectText=jX}e.prototype.brushVML=function(b){var a=this.style;if(a.text!=null){this.drawRectText(b,{x:a.x||0,y:a.y||0,width:0,height:0},this.getBoundingRect(),!0)}else {this.removeRectText(b)}};e.prototype.onRemove=function(a){this.removeRectText(a)};e.prototype.onAdd=function(a){this.appendRectText(a)}}function parseInt10$1(a){return parseInt(a,10)}function VMLPainter(e,a){initVML();this.root=e;this.storage=a;var c=document.createElement('div');var b=document.createElement('div');c.style.cssText='display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;';b.style.cssText='position:absolute;left:0;top:0;';e.appendChild(c);this._vmlRoot=b;this._vmlViewport=c;this.resize();var f=a.delFromStorage;var g=a.addToStorage;a.delFromStorage=function(c){f.call(a,c);if(c){c.onRemove&&c.onRemove(b)}};a.addToStorage=function(c){c.onAdd&&c.onAdd(b);g.call(a,c)};this._firstPaint=!0}VMLPainter.prototype={constructor:VMLPainter,getType:function(){return 'vml'},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var a=this.getViewportRoot();if(a){return {offsetLeft:a.offsetLeft||0,offsetTop:a.offsetTop||0}}},refresh:function(){var a=this.storage.getDisplayList(!0,!0);this._paintList(a)},_paintList:function(e){var b=this._vmlRoot;for(var c=0;c<e.length;c++){var a=e[c];if(a.invisible||a.ignore){if(!a.__alreadyNotVisible){a.onRemove(b)}a.__alreadyNotVisible=!0}else {if(a.__alreadyNotVisible){a.onAdd(b)}a.__alreadyNotVisible=!1;if(a.__dirty){a.beforeBrush&&a.beforeBrush();(a.brushVML||a.brush).call(a,b);a.afterBrush&&a.afterBrush()}}a.__dirty=!1}if(this._firstPaint){this._vmlViewport.appendChild(b);this._firstPaint=!1}},resize:function(b,a){var b=b==null?this._getWidth():b;var a=a==null?this._getHeight():a;if(this._width!=b||this._height!=a){this._width=b;this._height=a;var c=this._vmlViewport.style;c.width=b+'px';c.height=a+'px'}},dispose:function(){this.root.innerHTML='';this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){if(this._vmlViewport){this.root.removeChild(this._vmlViewport)}},_getWidth:function(){var b=this.root;var a=b.currentStyle;return (b.clientWidth||parseInt10$1(a.width))-parseInt10$1(a.paddingLeft)-parseInt10$1(a.paddingRight)|0},_getHeight:function(){var b=this.root;var a=b.currentStyle;return (b.clientHeight||parseInt10$1(a.height))-parseInt10$1(a.paddingTop)-parseInt10$1(a.paddingBottom)|0}};function createMethodNotSupport(a){return function(){ay('In IE8.0 VML mode painter not support method "'+a+'"')}}each$1(['getLayer','insertLayer','eachLayer','eachBuiltinLayer','eachOtherLayer','getLayers','modLayer','delLayer','clearLayer','toDataURL','pathToImage'],function(a){VMLPainter.prototype[a]=createMethodNotSupport(a)});registerPainter('vml',VMLPainter);var mI='http://www.w3.org/2000/svg';function createElement(a){return document.createElementNS(mI,a)}var aV=E.CMD;var lV=Array.prototype.join;var aY='none';var ev=Math.round;var hf=Math.sin;var g9=Math.cos;var e5=Math.PI;var c$=Math.PI*2;var my=180/e5;var g0=1.0E-4;function round4(a){return ev(a*10000)/10000}function isAroundZero$1(a){return a<g0&&a>-g0}function pathHasFill(a,c){var b=c?a.textFill:a.fill;return b!=null&&b!==aY}function pathHasStroke(b,c){var a=c?b.textStroke:b.stroke;return a!=null&&a!==aY}function setTransform(b,a){if(a){attr(b,'transform','matrix('+lV.call(a,',')+')')}}function attr(c,b,a){if(!a||a.type!=='linear'&&a.type!=='radial'){c.setAttribute(b,a)}}function attrXLink(c,a,b){c.setAttributeNS('http://www.w3.org/1999/xlink',a,b)}function bindStyle(b,a,e){if(pathHasFill(a,e)){var c=e?a.textFill:a.fill;c=c==='transparent'?aY:c;if(b.getAttribute('clip-path')!=='none'&&c===aY){c='rgba(0, 0, 0, 0.002)'}attr(b,'fill',c);attr(b,'fill-opacity',a.opacity)}else {attr(b,'fill',aY)}if(pathHasStroke(a,e)){var f=e?a.textStroke:a.stroke;f=f==='transparent'?aY:f;attr(b,'stroke',f);var h=e?a.textStrokeWidth:a.lineWidth;var g=a.strokeNoScale?a.host.getLineScale():1;attr(b,'stroke-width',h/g);attr(b,'paint-order','stroke');attr(b,'stroke-opacity',a.opacity);var i=a.lineDash;if(i){attr(b,'stroke-dasharray',a.lineDash.join(','));attr(b,'stroke-dashoffset',ev(a.lineDashOffset||0))}else {attr(b,'stroke-dasharray','')}a.lineCap&&attr(b,'stroke-linecap',a.lineCap);a.lineJoin&&attr(b,'stroke-linejoin',a.lineJoin);a.miterLimit&&attr(b,'stroke-miterlimit',a.miterLimit)}else {attr(b,'stroke',aY)}}function pathDataToString$1(p){var h=[];var b=p.data;var v=p.len();for(var a=0;a<v;){var x=b[a++];var e='';var j=0;switch(x){case aV.M:e='M';j=2;break;case aV.L:e='L';j=2;break;case aV.Q:e='Q';j=4;break;case aV.C:e='C';j=6;break;case aV.A:var q=b[a++];var r=b[a++];var n=b[a++];var o=b[a++];var l=b[a++];var c=b[a++];var y=b[a++];var m=b[a++];var k=Math.abs(c);var w=isAroundZero$1(k%c$)&&!isAroundZero$1(k);var i=!1;if(k>=c$){i=!0}else {if(isAroundZero$1(k)){i=!1}else {i=(c>-e5&&c<0||c>e5)===!!m}};var z=round4(q+n*g9(l));var A=round4(r+o*hf(l));if(w){if(m){c=c$-1.0E-4}else {c=-c$+1.0E-4}i=!0;if(a===9){h.push('M',z,A)}};var f=round4(q+n*g9(l+c));var g=round4(r+o*hf(l+c));h.push('A',round4(n),round4(o),ev(y*my),+i,+m,f,g);break;case aV.Z:e='Z';break;case aV.R:var f=round4(b[a++]);var g=round4(b[a++]);var u=round4(b[a++]);var s=round4(b[a++]);h.push('M',f,g,'L',f+u,g,'L',f+u,g+s,'L',f,g+s,'L',f,g);break;}e&&h.push(e);for(var t=0;t<j;t++){h.push(round4(b[a++]))}}return h.join(' ')}var bO={};bO.brush=function(a){var f=a.style;var b=a.__svgEl;if(!b){b=createElement('path');a.__svgEl=b}if(!a.path){a.createPathProxy()}var c=a.path;if(a.__dirtyPath){c.beginPath();a.buildPath(c,a.shape);a.__dirtyPath=!1;var e=pathDataToString$1(c);if(e.indexOf('NaN')<0){attr(b,'d',e)}}bindStyle(b,f);setTransform(b,a.transform);if(f.text!=null){b_(a,a.getBoundingRect())}};var eJ={};eJ.brush=function(b){var e=b.style;var c=e.image;if(c instanceof HTMLImageElement){var f=c.src;c=f}if(!c){return}var i=e.x||0;var j=e.y||0;var h=e.width;var g=e.height;var a=b.__svgEl;if(!a){a=createElement('image');b.__svgEl=a}if(c!==b.__imageSrc){attrXLink(a,'href',c);b.__imageSrc=c}attr(a,'width',h);attr(a,'height',g);attr(a,'x',i);attr(a,'y',j);setTransform(a,b.transform);if(e.text!=null){b_(b,b.getBoundingRect())}};var cR={};var eA=new BoundingRect();var b_=function(a,i,t){var b=a.style;a.__dirty&&normalizeTextStyle(b,!0);var n=b.text;if(n==null){return}else {n+=''}var h=a.__textSvgEl;if(!h){h=createElement('text');a.__textSvgEl=h}bindStyle(h,b,!0);if(a instanceof e||a.style.transformText){setTransform(h,a.transform)}else {if(a.transform){eA.copy(i);eA.applyTransform(a.transform);i=eA}else {var y=a.transformCoordToGlobal(i.x,i.y);i.x=y[0];i.y=y[1]}}var j;var p;var r=b.textPosition;var z=b.textDistance;var v=b.textAlign||'left';if(typeof b.fontSize==='number'){b.fontSize+='px'}var q=b.font||[b.fontStyle||'',b.fontWeight||'',b.fontSize||'',b.fontFamily||''].join(' ')||bx;var l=getVerticalAlignForSvg(b.textVerticalAlign);t=getBoundingRect(n,q,v,l);var s=t.lineHeight;if(r instanceof Array){j=i.x+r[0];p=i.y+r[1]}else {var u=adjustTextPositionOnRect(r,i,z);j=u.x;p=u.y;l=getVerticalAlignForSvg(u.textVerticalAlign);v=u.textAlign}attr(h,'alignment-baseline',l);if(q){h.style.font=q}var c=b.textPadding;attr(h,'x',j);attr(h,'y',p);var x=n.split('\n');var w=x.length;var k=v;if(k==='left'){k='start';c&&(j+=c[3])}else {if(k==='right'){k='end';c&&(j-=c[1])}else {if(k==='center'){k='middle';c&&(j+=(c[3]-c[1])/2)}}}var o=0;if(l==='baseline'){o=-t.height+s;c&&(o-=c[2])}else {if(l==='middle'){o=(-t.height+s)/2;c&&(p+=(c[0]-c[2])/2)}else {c&&(o+=c[0])}}if(a.__text!==n||a.__textFont!==q){var m=a.__tspanList||[];a.__tspanList=m;for(var f=0;f<w;f++){var g=m[f];if(!g){g=m[f]=createElement('tspan');h.appendChild(g);attr(g,'alignment-baseline',l);attr(g,'text-anchor',k)}else {g.innerHTML=''}attr(g,'x',j);attr(g,'y',p+f*s+o);g.appendChild(document.createTextNode(x[f]))}for(;f<m.length;f++){h.removeChild(m[f])}m.length=w;a.__text=n;a.__textFont=q}else {if(a.__tspanList.length){var A=a.__tspanList.length;for(var f=0;f<A;++f){var g=a.__tspanList[f];if(g){attr(g,'x',j);attr(g,'y',p+f*s+o)}}}}};function getVerticalAlignForSvg(a){if(a==='middle'){return 'middle'}else {if(a==='bottom'){return 'baseline'}else {return 'hanging'}}}cR.drawRectText=b_;cR.brush=function(b){var a=b.style;if(a.text!=null){a.textPosition=[0,0];b_(b,{x:a.x||0,y:a.y||0,width:0,height:0},b.getBoundingRect())}};function Diff(){}Diff.prototype={diff:function(c,a,i){if(!i){i=function(b,e){return b===e}}this.equals=i;var h=this;c=c.slice();a=a.slice();var f=a.length;var g=c.length;var e=1;var m=f+g;var b=[{newPos:-1,components:[]}];var n=this.extractCommon(b[0],a,c,0);if(b[0].newPos+1>=f&&n+1>=g){var k=[];for(var j=0;j<a.length;j++){k.push(j)}return [{indices:k,count:a.length}]}function execEditLength(){for(var j=-1*e;j<=e;j+=2){var k;var m=b[j-1];var l=b[j+1];var n=(l?l.newPos:0)-j;if(m){b[j-1]=undefined}var p=m&&m.newPos+1<f;var o=l&&0<=n&&n<g;if(!p&&!o){b[j]=undefined;continue}if(!p||o&&m.newPos<l.newPos){k=clonePath(l);h.pushComponent(k.components,undefined,!0)}else {k=m;k.newPos++;h.pushComponent(k.components,!0,undefined)}n=h.extractCommon(k,a,c,j);if(k.newPos+1>=f&&n+1>=g){return buildValues(h,k.components,a,c)}else {b[j]=k}}e++}while(e<=m){var l=execEditLength();if(l){return l}}},pushComponent:function(a,e,c){var b=a[a.length-1];if(b&&b.added===e&&b.removed===c){a[a.length-1]={count:b.count+1,added:e,removed:c}}else {a.push({count:1,added:e,removed:c})}},extractCommon:function(e,f,g,h){var i=f.length;var j=g.length;var a=e.newPos;var b=a-h;var c=0;while(a+1<i&&b+1<j&&this.equals(f[a+1],g[b+1])){a++;b++;c++}if(c){e.components.push({count:c})}e.newPos=a;return b},tokenize:function(a){return a.slice()},join:function(a){return a.slice()}};function buildValues(l,g,j,k){var f=0;var i=g.length;var h=0;var e=0;for(;f<i;f++){var a=g[f];if(!a.removed){var c=[];for(var b=h;b<h+a.count;b++){c.push(b)}a.indices=c;h+=a.count;if(!a.added){e+=a.count}}else {var c=[];for(var b=e;b<e+a.count;b++){c.push(b)}a.indices=c;e+=a.count}}return g}function clonePath(a){return {newPos:a.newPos,components:a.components.slice(0)}}var lU=new Diff();var k7=function(c,b,a){return lU.diff(c,b,a)};var k0='0';var g1='1';function Definable(c,a,b){this._svgRoot=c;this._tagNames=typeof a==='string'?[a]:a;this._markLabel=b;this.nextId=0}Definable.prototype.createElement=createElement;Definable.prototype.getDefs=function(c){var b=this._svgRoot;var a=this._svgRoot.getElementsByTagName('defs');if(a.length===0){if(c){a=b.insertBefore(this.createElement('defs'),b.firstChild);if(!a.contains){a.contains=function(f){var b=a.children;if(!b){return !1}for(var e=b.length-1;e>=0;--e){if(b[e]===f){return !0}}return !1}}return a}else {return null}}else {return a[0]}};Definable.prototype.update=function(a,b){if(!a){return}var e=this.getDefs(!1);if(a._dom&&e.contains(a._dom)){if(typeof b==='function'){b()}}else {var c=this.add(a);if(c){a._dom=c}}};Definable.prototype.addDom=function(b){var a=this.getDefs(!0);a.appendChild(b)};Definable.prototype.removeDom=function(a){var b=this.getDefs(!1);b.removeChild(a._dom)};Definable.prototype.getDoms=function(){var b=this.getDefs(!1);if(!b){return []}var a=[];each$1(this._tagNames,function(c){var e=b.getElementsByTagName(c);a=a.concat([].slice.call(e))});return a};Definable.prototype.markAllUnused=function(){var a=this.getDoms();var b=this;each$1(a,function(a){a[b._markLabel]=k0})};Definable.prototype.markUsed=function(a){if(a){a[this._markLabel]=g1}};Definable.prototype.removeUnused=function(){var a=this.getDefs(!1);if(!a){return}var b=this.getDoms();var c=this;each$1(b,function(b){if(b[c._markLabel]!==g1){a.removeChild(b)}})};Definable.prototype.getSvgProxy=function(a){if(a instanceof Path){return bO}else {if(a instanceof ZImage){return eJ}else {if(a instanceof e){return cR}else {return bO}}}};Definable.prototype.getTextSvgElement=function(a){return a.__textSvgEl};Definable.prototype.getSvgElement=function(a){return a.__svgEl};function GradientManager(a){Definable.call(this,a,['linearGradient','radialGradient'],'__gradient_in_use__')}inherits(GradientManager,Definable);GradientManager.prototype.addWithoutUpdate=function(c,a){if(a&&a.style){var b=this;each$1(['fill','stroke'],function(e){if(a.style[e]&&(a.style[e].type==='linear'||a.style[e].type==='radial')){var f=a.style[e];var h=b.getDefs(!0);var g;if(f._dom){g=f._dom;if(!h.contains(f._dom)){b.addDom(g)}}else {g=b.add(f)}b.markUsed(a);var i=g.getAttribute('id');c.setAttribute(e,'url(#'+i+')')}})}};GradientManager.prototype.add=function(a){var b;if(a.type==='linear'){b=this.createElement('linearGradient')}else {if(a.type==='radial'){b=this.createElement('radialGradient')}else {ay('Illegal gradient type.');return null}}a.id=a.id||this.nextId++;b.setAttribute('id','zr-gradient-'+a.id);this.updateDom(a,b);this.addDom(b);return b};GradientManager.prototype.update=function(a){var b=this;Definable.prototype.update.call(this,a,function(){var e=a.type;var c=a._dom.tagName;if(e==='linear'&&c==='linearGradient'||e==='radial'&&c==='radialGradient'){b.updateDom(a,a._dom)}else {b.removeDom(a);b.add(a)}})};GradientManager.prototype.updateDom=function(a,b){if(a.type==='linear'){b.setAttribute('x1',a.x);b.setAttribute('y1',a.y);b.setAttribute('x2',a.x2);b.setAttribute('y2',a.y2)}else {if(a.type==='radial'){b.setAttribute('cx',a.x);b.setAttribute('cy',a.y);b.setAttribute('r',a.r)}else {ay('Illegal gradient type.');return}}if(a.global){b.setAttribute('gradientUnits','userSpaceOnUse')}else {b.setAttribute('gradientUnits','objectBoundingBox')}b.innerHTML='';var e=a.colorStops;for(var c=0,g=e.length;c<g;++c){var f=this.createElement('stop');f.setAttribute('offset',e[c].offset*100+'%');f.setAttribute('stop-color',e[c].color);b.appendChild(f)}a._dom=b};GradientManager.prototype.markUsed=function(b){if(b.style){var a=b.style.fill;if(a&&a._dom){Definable.prototype.markUsed.call(this,a._dom)}a=b.style.stroke;if(a&&a._dom){Definable.prototype.markUsed.call(this,a._dom)}}};function ClippathManager(a){Definable.call(this,a,'clipPath','__clippath_in_use__')}inherits(ClippathManager,Definable);ClippathManager.prototype.update=function(a){var c=this.getSvgElement(a);if(c){this.updateDom(c,a.__clipPaths,!1)}var b=this.getTextSvgElement(a);if(b){this.updateDom(b,a.__clipPaths,!0)}this.markUsed(a)};ClippathManager.prototype.updateDom=function(g,c,h){if(c&&c.length>0){var i=this.getDefs(!0);var a=c[0];var b;var f;var e=h?'_textDom':'_dom';if(a[e]){f=a[e].getAttribute('id');b=a[e];if(!i.contains(b)){i.appendChild(b)}}else {f='zr-clip-'+this.nextId;++this.nextId;b=this.createElement('clipPath');b.setAttribute('id',f);i.appendChild(b);a[e]=b}var j=this.getSvgProxy(a);if(a.transform&&a.parent.invTransform&&!h){var k=Array.prototype.slice.call(a.transform);mul$1(a.transform,a.parent.invTransform,a.transform);j.brush(a);a.transform=k}else {j.brush(a)}var l=this.getSvgElement(a);b.appendChild(l.cloneNode());g.setAttribute('clip-path','url(#'+f+')');if(c.length>1){this.updateDom(b,c.slice(1),h)}}else {if(g){g.setAttribute('clip-path','none')}}};ClippathManager.prototype.markUsed=function(a){var b=this;if(a.__clipPaths&&a.__clipPaths.length>0){each$1(a.__clipPaths,function(c){if(c._dom){Definable.prototype.markUsed.call(b,c._dom)}if(c._textDom){Definable.prototype.markUsed.call(b,c._textDom)}})}};function parseInt10$2(a){return parseInt(a,10)}function getSvgProxy(a){if(a instanceof Path){return bO}else {if(a instanceof ZImage){return eJ}else {if(a instanceof e){return cR}else {return bO}}}}function checkParentAvailable(a,b){return b&&a&&b.parentNode!==a}function insertAfter(a,b,e){if(checkParentAvailable(a,b)&&e){var c=e.nextSibling;c?a.insertBefore(b,c):a.appendChild(b)}}function prepend(a,b){if(checkParentAvailable(a,b)){var c=a.firstChild;c?a.insertBefore(b,c):a.appendChild(b)}}function remove$1(a,b){if(b&&a&&b.parentNode===a){a.removeChild(b)}}function getTextSvgElement(a){return a.__textSvgEl}function getSvgElement(a){return a.__svgEl}var co=function(c,e){this.root=c;this.storage=e;var a=createElement('svg');a.setAttribute('xmlns','http://www.w3.org/2000/svg');a.setAttribute('version','1.1');a.setAttribute('baseProfile','full');a.style['user-select']='none';this.gradientManager=new GradientManager(a);this.clipPathManager=new ClippathManager(a);var b=document.createElement('div');b.style.cssText='overflow: hidden;';this._svgRoot=a;this._viewport=b;c.appendChild(b);b.appendChild(a);this.resize();this._visibleList=[]};co.prototype={constructor:co,getType:function(){return 'svg'},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){var a=this.getViewportRoot();if(a){return {offsetLeft:a.offsetLeft||0,offsetTop:a.offsetTop||0}}},refresh:function(){var a=this.storage.getDisplayList(!0);this._paintList(a)},_paintList:function(n){this.gradientManager.markAllUnused();this.clipPathManager.markAllUnused();var h=this._svgRoot;var l=this._visibleList;var o=n.length;var j=[];var b;for(b=0;b<o;b++){var a=n[b];var m=getSvgProxy(a);if(!a.invisible){if(a.__dirty){m&&m.brush(a);this.clipPathManager.update(a);if(a.style){this.gradientManager.update(a.style.fill);this.gradientManager.update(a.style.stroke)}a.__dirty=!1}j.push(a)}}var k=k7(l,j);var g;for(b=0;b<k.length;b++){var f=k[b];if(f.removed){for(var e=0;e<f.count;e++){var a=l[f.indices[e]];var c=getSvgElement(a);var i=getTextSvgElement(a);remove$1(h,c);remove$1(h,i)}}}for(b=0;b<k.length;b++){var f=k[b];if(f.added){for(var e=0;e<f.count;e++){var a=j[f.indices[e]];var c=getSvgElement(a);var i=getTextSvgElement(a);g?insertAfter(h,c,g):prepend(h,c);if(c){insertAfter(h,i,c)}else {if(g){insertAfter(h,i,g)}else {prepend(h,i)}}insertAfter(h,i,c);g=i||c||g;this.gradientManager.addWithoutUpdate(c,a);this.clipPathManager.markUsed(a)}}else {if(!f.removed){for(var e=0;e<f.count;e++){var a=j[f.indices[e]];g=c=getTextSvgElement(a)||getSvgElement(a)||g;this.gradientManager.markUsed(a);this.gradientManager.addWithoutUpdate(c,a);this.clipPathManager.markUsed(a)}}}}this.gradientManager.removeUnused();this.clipPathManager.removeUnused();this._visibleList=j},_getDefs:function(c){var b=this._svgRoot;var a=this._svgRoot.getElementsByTagName('defs');if(a.length===0){if(c){var a=b.insertBefore(createElement('defs'),b.firstChild);if(!a.contains){a.contains=function(f){var b=a.children;if(!b){return !1}for(var e=b.length-1;e>=0;--e){if(b[e]===f){return !0}}return !1}}return a}else {return null}}else {return a[0]}},resize:function(){var b=this._getWidth();var a=this._getHeight();if(this._width!==b&&this._height!==a){this._width=b;this._height=a;var c=this._viewport.style;c.width=b+'px';c.height=a+'px';var e=this._svgRoot;e.setAttribute('width',b);e.setAttribute('height',a)}},getWidth:function(){return this._getWidth()},getHeight:function(){return this._getHeight()},_getWidth:function(){var b=this.root;var a=document.defaultView.getComputedStyle(b);return (b.clientWidth||parseInt10$2(a.width))-parseInt10$2(a.paddingLeft)-parseInt10$2(a.paddingRight)|0},_getHeight:function(){var b=this.root;var a=document.defaultView.getComputedStyle(b);return (b.clientHeight||parseInt10$2(a.height))-parseInt10$2(a.paddingTop)-parseInt10$2(a.paddingBottom)|0},dispose:function(){this.root.innerHTML='';this._svgRoot=this._viewport=this.storage=null},clear:function(){if(this._viewport){this.root.removeChild(this._viewport)}},pathToSvg:function(){this.refresh();var a=this._svgRoot.outerHTML;return 'data:img/svg+xml;utf-8,'+unescape(a)}};function createMethodNotSupport$1(a){return function(){ay('In SVG mode painter not support method "'+a+'"')}}each$1(['getLayer','insertLayer','eachLayer','eachBuiltinLayer','eachOtherLayer','getLayers','modLayer','delLayer','clearLayer','toDataURL','pathToImage'],function(a){co.prototype[a]=createMethodNotSupport$1(a)});registerPainter('svg',co);d.version=hF;d.dependencies=d$;d.PRIORITY=be;d.init=init;d.connect=connect;d.disConnect=disConnect;d.disconnect=lC;d.dispose=dispose;d.getInstanceByDom=getInstanceByDom;d.getInstanceById=getInstanceById;d.registerTheme=registerTheme;d.registerPreprocessor=registerPreprocessor;d.registerProcessor=registerProcessor;d.registerPostUpdate=registerPostUpdate;d.registerAction=registerAction;d.registerCoordinateSystem=registerCoordinateSystem;d.getCoordinateSystemDimensions=getCoordinateSystemDimensions;d.registerLayout=registerLayout;d.registerVisual=registerVisual;d.registerLoading=registerLoading;d.extendComponentModel=extendComponentModel;d.extendComponentView=extendComponentView;d.extendSeriesModel=extendSeriesModel;d.extendChartView=extendChartView;d.setCanvasCreator=setCanvasCreator;d.registerMap=registerMap;d.getMap=getMap;d.dataTool=md;d.zrender=mt;d.graphic=O;d.number=mG;d.format=mA;d.throttle=throttle;d.helper=mB;d.matrix=mE;d.vector=mK;d.color=mQ;d.util=hM;d.List=l;d.Model=Model;d.Axis=q;d.env=f;d.parseGeoJson=gD});