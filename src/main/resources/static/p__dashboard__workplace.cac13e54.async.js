(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"75ur":function(e,t,a){e.exports={projectList:"projectList___2uicb",cardTitle:"cardTitle___3CEjb",closeIcon:"closeIcon___3xzf2",projectGrid:"projectGrid___3OJ7X",projectItemContent:"projectItemContent___2eQBb",datetime:"datetime___2CRWf",activeCard:"activeCard___ET6zz",members:"members___2zw0I",extraContent:"extraContent___T7fHG",statItem:"statItem___1Q3Fq",pageHeaderContent:"pageHeaderContent___1VAK0",content:"content___5TmOP",avatar:"avatar___lmdpU",contentTitle:"contentTitle___110CI"}},VuCS:function(e,t,a){"use strict";a.r(t);a("DYRE");var c=a("zeV3"),n=(a("J+/v"),a("MoRW")),i=(a("5Dmo"),a("3S7+")),r=(a("P2fV"),a("NJEC")),o=(a("+L6B"),a("2/Rp")),l=(a("miYZ"),a("tsqr")),s=(a("IzEo"),a("bx4M")),d=(a("aHsQ"),a("sGsY")),u=(a("cWXX"),a("/ezw")),j=a("q1tI"),m=a("sy1d"),p=a("Hx5s"),b=a("75ur"),f=a.n(b),x=a("/MKj"),O=a("Oj1a"),v=a("ZM8D"),_=a("wd/R"),h=a.n(_),N=a("+7or"),y=a("WTWM"),g=a("VTBJ"),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112c-3.8 0-7.7.7-11.6 2.3L292 345.9H128c-8.8 0-16 7.4-16 16.6v299c0 9.2 7.2 16.6 16 16.6h101.7c-3.7 11.6-5.7 23.9-5.7 36.4 0 65.9 53.8 119.5 120 119.5 55.4 0 102.1-37.6 115.9-88.4l408.6 164.2c3.9 1.5 7.8 2.3 11.6 2.3 16.9 0 32-14.2 32-33.2V145.2C912 126.2 897 112 880 112zM344 762.3c-26.5 0-48-21.4-48-47.8 0-11.2 3.9-21.9 11-30.4l84.9 34.1c-2 24.6-22.7 44.1-47.9 44.1zm496 58.4L318.8 611.3l-12.9-5.2H184V417.9h121.9l12.9-5.2L840 203.3v617.4z"}}]},name:"notification",theme:"outlined"},T=C,w=a("6VBw"),I=function(e,t){return j["createElement"](w["a"],Object(g["a"])(Object(g["a"])({},e),{},{ref:t,icon:T}))};I.displayName="NotificationOutlined";var z=j["forwardRef"](I),k=a("4i/N"),F=a("79+z"),V=a("nKUr"),H=function(e){var t=e.user,a=e.currentUser,b=e.global,x=e.dispatch,_=a.personnel,g=t.unreadCount,C=0,T=0,w=0,I=0;b.notices.forEach((function(e){"event"===e.type?"approve"===e.action||"claim"===e.action?C+=e.count||0:"audit"===e.action?T+=e.count||0:w+=e.count||0:"notification"===e.type&&(I+=1)})),Object(j["useEffect"])((function(){_&&_.name||x({type:"accountCenter/fetchCurrent"})}),[]);var H=function(){if(!_)return Object(V["jsx"])(u["a"],{avatar:!0,paragraph:{rows:1},active:!0});var e=(new Date).getHours();return Object(V["jsxs"])("div",{className:f.a.pageHeaderContent,children:[Object(V["jsx"])("img",{className:f.a.avatar,alt:"\u7528\u6237\u5934\u50cf",src:"".concat(m["API_HEAD"],"/platform/systemframe/getuserfavicon.do")}),Object(V["jsxs"])("div",{className:f.a.content,children:[Object(V["jsxs"])("div",{className:f.a.contentTitle,children:[Object(V["jsx"])("span",{style:{fontSize:"16px"},children:e>=12?"\u5348\u5b89\uff0c":"\u65e9\u5b89\uff0c"}),"".concat(_.name),Object(V["jsx"])("span",{style:{fontSize:"16px"},children:"\uff0c\u795d\u5f00\u5fc3\u6bcf\u4e00\u5929\uff01"})]}),Object(V["jsxs"])("div",{children:[_.technical," ",_.stationname," | ",_.orgfullname]})]})]})},E=function(){return Object(V["jsxs"])("div",{className:f.a.extraContent,children:[Object(V["jsx"])("div",{className:f.a.statItem,children:Object(V["jsx"])(d["a"],{title:"\u5f85\u529e\u4e8b\u9879",value:C?"".concat(C,"\u4e2a"):"\u65e0"})}),T?Object(V["jsx"])("div",{className:f.a.statItem,children:Object(V["jsx"])(d["a"],{title:"\u5f85\u5ba1\u6838",value:"".concat(T,"\u4e2a")})}):null,w?Object(V["jsx"])("div",{className:f.a.statItem,children:Object(V["jsx"])(d["a"],{title:"\u5f85\u5904\u4efb\u52a1",value:"".concat(w,"\u4e2a")})}):null,Object(V["jsx"])("div",{className:f.a.statItem,children:Object(V["jsx"])(d["a"],{title:"\u5f85\u9605\u901a\u77e5",value:g?"".concat(g,"\u6761"):"\u65e0"})})]})},M=Object(j["useMemo"])((function(){return Object(V["jsx"])(v["a"],{moduleName:"VActRuTask",parentOperateType:"edit",displayTitle:!0,parentFilter:void 0,dataminingFilter:{}})}),[]),L=function(e){var t=e.notices;return t.map((function(e){var t=e.moduleName,a=void 0===t?"":t,c={moduleName:a,fieldahead:null,fieldName:"canAuditingUserid",fieldtitle:"\u6211\u53ef\u4ee5\u5ba1\u6838\u7684\u8bb0\u5f55",operator:"=",fieldvalue:O["a"].userid||"",text:""};return Object(V["jsx"])(s["a"],{children:Object(V["jsx"])(v["a"],{moduleName:a,parentFilter:c,parentOperateType:"display",displayTitle:!0,displayParentTitle:!0})},"audit_".concat(a))}))},R=function(e){var t=e.notices;return t.map((function(e){var t=e.moduleName,a=void 0===t?"":t,c={moduleName:a,fieldahead:null,fieldName:e.filterFieldName||"",fieldtitle:e.filterText||"",operator:e.filterFieldOperator||"",fieldvalue:e.filterFieldValue||"",text:""};return Object(V["jsx"])(s["a"],{children:Object(V["jsx"])(v["a"],{moduleName:a,parentFilter:c,parentOperateType:"display",displayTitle:!0,displayParentTitle:!0})},"needAction_".concat(a).concat(e.filterFieldName).concat(e.filterFieldValue))}))},U=function(e){var t=e.notices,a="workplace_card";return Object(V["jsx"])(s["a"],{id:a,size:"small",className:f.a.projectList,style:{marginBottom:24},title:Object(V["jsxs"])("span",{children:[Object(V["jsx"])(z,{})," \u6240\u6709\u901a\u77e5"]}),bordered:!1,extra:Object(V["jsx"])(r["a"],{title:"\u786e\u5b9a\u8981\u6e05\u9664\u6240\u6709\u901a\u77e5\u5417\uff1f",okText:"\u6e05\u7a7a",cancelText:"\u53d6\u6d88",onConfirm:function(){l["default"].success("\u6e05\u7a7a\u4e86\u6240\u6709\u901a\u77e5"),Object(F["c"])("#".concat(a),"backOutDown").then((function(){x({type:"global/clearNotices",payload:"notification"})}))},children:Object(V["jsx"])(o["a"],{type:"link",children:"\u6e05\u7a7a\u901a\u77e5"})}),bodyStyle:{padding:0},children:t.map((function(e){return Object(V["jsx"])("div",{id:"workplace_notice".concat(e.id),children:Object(V["jsx"])(s["a"].Grid,{className:f.a.projectGrid,children:Object(V["jsxs"])(s["a"],{bodyStyle:{padding:0},bordered:!1,children:[Object(V["jsx"])(s["a"].Meta,{title:[e.record&&e.record.attachmentcount?Object(V["jsx"])(N["a"],{record:e.record,moduleInfo:Object(y["x"])("FNotification"),params:{placement:void 0}}):null,Object(V["jsx"])("div",{className:f.a.cardTitle,children:e.title})],description:Object(V["jsx"])(i["a"],{title:e.description,trigger:["click"],children:e.description})}),Object(V["jsxs"])("div",{className:f.a.projectItemContent,children:[Object(V["jsx"])("a",{}),e.datetime&&Object(V["jsx"])("span",{className:f.a.datetime,children:h()(e.datetime).fromNow()})]}),Object(V["jsx"])("span",{className:f.a.closeIcon,children:Object(V["jsx"])(k["a"],{onClick:function(){Object(F["c"])("#workplace_notice".concat(e.id),"backOutRight").then((function(){x({type:"global/removeNotice",payload:e.id})}))}})})]})},e.id)})}))},"".concat(a,"notification"))};return Object(V["jsx"])(p["a"],{title:Object(V["jsx"])(H,{}),extra:Object(V["jsx"])(E,{}),children:Object(V["jsxs"])(c["b"],{direction:"vertical",style:{width:"100%"},size:[16,16],children:[C?Object(V["jsx"])(s["a"],{children:M},"runtime_Approve_Task"):null,L({notices:b.notices.filter((function(e){var t=e.type,a=e.action;return"event"===t&&"audit"===a}))}),R({notices:b.notices.filter((function(e){return"event"===e.type&&!e.action}))}),I?U({notices:b.notices.filter((function(e){return"notification"===e.type}))}):null,!_||!_.name||C||T||w?null:Object(V["jsx"])(n["a"],{status:"success",title:"\u60a8\u6240\u6709\u7684\u5de5\u4f5c\u90fd\u5b8c\u6210\u4e86",subTitle:"\u6240\u6709\u5f85\u529e\u548c\u5f85\u9605\u5de5\u4f5c\u90fd\u5b8c\u6210\u4e86\uff0c\u6709\u65b0\u7684\u5de5\u4f5c\u5c06\u4f1a\u663e\u793a\u5728\u6b64\u5904\uff01"})]})})};t["default"]=Object(x["c"])((function(e){var t=e.loading,a=e.accountCenter,c=e.user,n=e.global;return{user:c.currentUser,global:n,currentUser:a.currentUser,currentUserLoading:t.effects["accountCenter/fetchCurrent"]}}))(H)}}]);