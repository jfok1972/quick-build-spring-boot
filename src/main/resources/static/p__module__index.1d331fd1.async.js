(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1,12],{"+1av":function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));n("Q9mQ");var a=n("diRs"),i=(n("14J3"),n("BMrR")),r=(n("IzEo"),n("bx4M")),c=(n("ozfa"),n("MJZm")),o=(n("+L6B"),n("2/Rp")),s=(n("jCWc"),n("kPKH")),l=n("tJVT"),d=n("q1tI"),u=n("79+z"),p=n("9jjd"),f=n("1x1c"),m=n("WTWM"),b=n("RfA7"),j=n("mzdz"),h=n("nKUr"),_=function(e,t){return e.cls?Object(h["jsx"])("span",{className:e.cls,children:t||e.text}):t||e.text},O=function(e){var t=e.moduleName,n=e.defaultFieldId,a=e.callback,f=e.setVisible,m=Object(d["useRef"])(),O=Object(d["useState"])([]),x=Object(l["a"])(O,2),g=x[0],v=x[1],y=Object(d["useState"])([]),E=Object(l["a"])(y,2),S=E[0],C=E[1],I=Object(d["useState"])([]),D=Object(l["a"])(I,2),k=D[0],w=D[1],P=Object(d["useState"])(null),T=Object(l["a"])(P,2),M=T[0],A=T[1],R=function(e){e.moduleName&&Object(b["m"])({moduleName:e.moduleName,isChildModule:!!e.isChild,modulePath:e.itemId}).then((function(e){var t=[];e.forEach((function(e){Object(u["d"])(e,{key:e.text,title:_(e)}),t.push(e.key),e.children&&e.children.forEach((function(n){Object(u["d"])(n,{key:n.itemId,title:_(n),parent:e}),n.children&&(t.push(n.key),n.children.forEach((function(e){Object(u["d"])(e,{key:e.itemId,title:_(e),parent:n})})))}))})),C(t),v(e),w(n?[n]:[])}))};return Object(d["useEffect"])((function(){if(n){var e=n.substring(0,n.indexOf("|"));R(e?m.current.getNodeFromItemId(e):{moduleName:t})}else R({moduleName:t})}),[]),Object(h["jsx"])(h["Fragment"],{children:Object(h["jsxs"])(i["a"],{gutter:16,style:{height:"600px",width:"900px",overflow:"auto"},children:[Object(h["jsx"])(s["a"],{span:16,children:Object(h["jsx"])(j["a"],{moduleName:t,defaultFieldahead:n?n.substring(0,n.indexOf("|")):void 0,onClick:function(e){R(e)},ref:m})}),Object(h["jsx"])(s["a"],{span:8,children:Object(h["jsx"])(r["a"],{title:"\u53ef\u4f9b\u9009\u62e9\u7684\u5b57\u6bb5",size:"small",extra:Object(h["jsx"])(o["a"],{type:"primary",disabled:!M,onClick:function(){a({fieldid:M.itemId,fieldname:M.fieldname,title:(-1!==M.itemId.indexOf("|")?"".concat(m.current.getCurrentModule().qtip,"--"):"")+(-1!==M.itemId.indexOf(".with.")?"".concat(M.parent.text,"--"):"")+M.text}),f(!1)},children:"\u9009\u4e2d\u8fd4\u56de"}),children:Object(h["jsx"])(c["a"],{style:{height:"526px",overflow:"auto"},showIcon:!0,icon:function(e){return e.iconCls?Object(h["jsx"])("span",{className:e.iconCls}):Object(h["jsx"])(p["a"],{})},treeData:g,expandedKeys:S,onExpand:function(e){return C(e)},selectedKeys:k,onSelect:function(e,t){w(e),A(null),t.selected&&t.selectedNodes[0].itemId&&A(t.selectedNodes[0])}})})})]})})},x=function(e){var t=e.moduleName,n=e.callback,i=e.defaultFieldId,r=e.children,c=Object(m["x"])(t),o=Object(d["useState"])(!1),s=Object(l["a"])(o,2),u=s[0],p=s[1];return Object(h["jsx"])(a["a"],{placement:"left",visible:u,onVisibleChange:function(e){return p(e)},title:"\u9009\u62e9\u6a21\u5757\u300e".concat(c.title,"\u300f\u7684\u5173\u8054\u5b57\u6bb5"),trigger:["click"],content:Object(h["jsx"])(O,{moduleName:t,defaultFieldId:i,callback:n,setVisible:p}),children:r||Object(h["jsx"])(f["a"],{})})}},"+7or":function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));n("bbsP");var a=n("/wGt"),i=(n("Q9mQ"),n("diRs")),r=(n("IzEo"),n("bx4M")),c=n("k1fw"),o=(n("DZo9"),n("8z0m")),s=(n("DYRE"),n("zeV3")),l=(n("5Dmo"),n("3S7+")),d=(n("miYZ"),n("tsqr")),u=n("tJVT"),p=n("q1tI"),f=n("79+z"),m=n("ymrT"),b=n("4g1a"),j=n("YO/a"),h=n("Nj6f"),_=n("VX7R"),O=n("26re"),x=n("U+PY"),g=n("1x1c"),v=n("Py4S"),y=n.n(v),E=n("sy1d"),S=n("OC7c"),C=n("nKUr"),I={bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",tif:"image/tiff",tiff:"image/tiff",jif:"image/pipeg",jfif:"image/pipeg"},D=function(e){return I[e]?I[e]:"image/png"},k="".concat(E["API_HEAD"],"/platform/attachment"),w=!1,P=function(e){var t=e.record,n=e.moduleInfo,v=e.params,E=void 0===v?{}:v,I=!1,P=t.attachmentdata,T=P.length,M=n.primarykey,A=n.namefield,R=n.modulename,N=Object(p["useState"])(w),L=Object(u["a"])(N,2),B=L[0],K=L[1],F=Object(p["useState"])(T<=5?"picture":"text"),U=Object(u["a"])(F,2),W=U[0],V=U[1],q=Object(p["useState"])(!1),z=Object(u["a"])(q,2),G=z[0],J=z[1],H=Object(p["useState"])(!1),Y=Object(u["a"])(H,2),Z=Y[0],Q=Y[1],$=Object(p["useState"])({url:"",title:"",uid:"",filename:"",ispdf:!1}),X=Object(u["a"])($,2),ee=X[0],te=X[1];if(!t)return null;var ne=[],ae=function(e){var t;return{uid:e.id,status:"done",name:"".concat(e.title,"  "),filename:e.filename,fileext:e.fileext?e.fileext:"",type:e.thumbnail?D(e.filename):"notimagefile",pdfpreview:e.pdfpreview,previewmode:e.previewmode,url:e.thumbnail?"".concat(k,"/thumbnail.do?attachmentid=").concat(e.id):"direct"===e.previewmode||"pdf"===(null===(t=e.fileext)||void 0===t?void 0:t.toLowerCase())||e.pdfpreview?"".concat(e.id):null}},ie=P.map(ae).sort((function(e,t){return e.fileext>t.fileext||e.fileext===t.fileext&&e.filename>t.filename?1:-1}));ne=ie;var re={defaultFileList:ie,withCredentials:!0,multiple:!0,listType:W,showUploadList:{showRemoveIcon:!1,showDownloadIcon:!0,showPreviewIcon:!0}},ce=function(e){window.location.href="".concat(k,"/download.do?attachmentid=").concat(e.uid)},oe=function(){window.location.href="".concat(k,"/downloadall.do?moduleName=").concat(R,"&idkey=").concat(t[M])},se=function(e){var n=e,a="pdf"===n.fileext.toLowerCase()||n.pdfpreview;if("image"===n.previewmode){var i=ne.filter((function(e){return"image"===e.previewmode})).map((function(e){return{src:"".concat(k,"/preview.do?attachmentid=").concat(e.uid),alt:e.filename}})),r=ne.filter((function(e){return"image"===e.previewmode})).findIndex((function(e){return e.uid===n.uid}));-1===r&&(i.push({src:"".concat(k,"/preview.do?attachmentid=").concat(n.uid),alt:n.filename}),r=i.length),y.a.browsing({set:i,defaultPage:r,zIndex:19260817,hideOnScroll:!1,onBrowsing:function(e){I=e},controller:{close:!0,zoom:!0,download:!1,rotate:!0,flip:!0,pagination:!0},animate:{flip:"swipe"}})}else if("direct"===n.previewmode||a){var c="".concat(t[A],"\u7684\u9644\u4ef6\u300e").concat(n.name.trim(),"\u300f"),o="".concat(k,"/preview.do?attachmentid=").concat(n.uid),s="".concat(n.name.substr(0,n.name.lastIndexOf(".")),".pdf");o=a?Object(f["w"])(o,s):o,B?a?Object(S["attachmentPdfOpenPreview"])(n.uid,s):Object(f["A"])(o,c,n.previewmode):(te({url:o,title:c,uid:n.uid,filename:s,ispdf:a}),Q(!0))}else d["default"].warn("\u6b64\u9644\u4ef6\u6587\u4ef6\u4e0d\u80fd\u5728\u6d4f\u89c8\u5668\u4e2d\u9884\u89c8\uff0c\u4f60\u53ef\u4e0b\u8f7d\u540e\u518d\u8fdb\u884c\u64cd\u4f5c\uff01")},le=function(e,t){var n=e,a=n.fileext;return"text"===t?"image"===n.previewmode?Object(C["jsx"])(m["a"],{}):"pdf"===a?Object(C["jsx"])(b["a"],{}):Object(C["jsx"])(j["a"],{}):["doc","docx","html","mov","mp3","mp4","pdf","ppt","pptx","psd","rar","wav","xls","xlsx","zip"].includes(a)?Object(C["jsx"])("img",{src:"/attachment/".concat(a,".png"),alt:""}):Object(C["jsx"])(l["a"],{title:n.name,children:Object(C["jsxs"])(C["Fragment"],{children:[Object(C["jsx"])("img",{src:"/attachment/otherfile.png",alt:""})," "]})})};return Object(C["jsxs"])(C["Fragment"],{children:[Object(C["jsx"])(i["a"],Object(c["a"])(Object(c["a"])({overlayStyle:{zIndex:1060},placement:"leftTop",trigger:"click",visible:G,destroyTooltipOnHide:!0,onVisibleChange:function(e){J(I||e)},content:Object(C["jsx"])(r["a"],{size:"small",title:"".concat(t[A],"\u7684\u9644\u4ef6"),extra:Object(C["jsxs"])(s["b"],{children:[Object(C["jsx"])("span",{}),Object(C["jsx"])(l["a"],{title:"\u5c06\u6240\u6709\u9644\u4ef6\u6587\u4ef6\u538b\u7f29\u6210.zip\u6587\u4ef6\u540e\u4e0b\u8f7d",children:Object(C["jsx"])(h["a"],{onClick:oe})}),Object(C["jsx"])("span",{}),"text"===W?Object(C["jsx"])("a",{children:Object(C["jsx"])(_["a"],{onClick:function(){return V("text")}})}):Object(C["jsx"])(_["a"],{onClick:function(){return V("text")}}),"picture"===W?Object(C["jsx"])("a",{children:Object(C["jsx"])(O["a"],{onClick:function(){return V("picture")}})}):Object(C["jsx"])(O["a"],{onClick:function(){return V("picture")}}),"picture-card"===W?Object(C["jsx"])("a",{children:Object(C["jsx"])(x["a"],{onClick:function(){return V("picture-card")}})}):Object(C["jsx"])(x["a"],{onClick:function(){return V("picture-card")}}),Object(C["jsx"])("span",{}),Object(C["jsx"])(l["a"],{title:"".concat(B?"\u5728\u65b0\u6807\u7b7e\u9875":"\u5728\u5f53\u524d\u9875","\u4e2d\u9884\u89c8PDF\u7c7b\u6587\u4ef6"),children:Object(C["jsx"])(g["a"],{rotate:B?90:-90,onClick:function(){w=!w,K(w)}})})]}),children:Object(C["jsx"])(o["a"],Object(c["a"])(Object(c["a"])({},re),{},{onPreview:se,onDownload:ce,iconRender:le,children:null}))})},E),{},{children:Object(C["jsx"])("span",{style:{paddingRight:"4px"},children:Object(C["jsx"])(j["a"],{})})})),Object(C["jsx"])(a["a"],{title:Object(C["jsxs"])("span",{style:{display:"flex"},children:[Object(C["jsx"])("span",{style:{flex:1},children:ee.title}),Object(C["jsx"])("span",{style:{marginRight:"32px"},className:"ant-drawer-close",children:Object(C["jsx"])(l["a"],{title:"\u5728\u65b0\u6807\u7b7e\u9875\u4e2d\u6253\u5f00pdf\u6587\u4ef6",children:Object(C["jsx"])(g["a"],{rotate:90,onClick:function(){ee.ispdf?Object(S["attachmentPdfOpenPreview"])(ee.uid,ee.filename):Object(f["A"])(ee.url,ee.title,"notimage"),Q(!1)}})})})]}),placement:"right",closable:!0,visible:Z,width:"80%",bodyStyle:{padding:0,margin:0},style:{zIndex:1e6},onClose:function(){Q(!1)},afterVisibleChange:function(e){I=e},children:Object(C["jsx"])("iframe",{style:f["y"]?{height:"".concat(document.body.clientHeight-32-22,"px")}:{},src:ee.url,width:"100%",height:"100%",marginWidth:0,title:"drawepdfpreview"})})]})}},"+fzd":function(e,t,n){"use strict";var a=n("hgP1");e.exports=function(e,t,n,i){var r=a(t,n,{idPrefix:"connector-",insideConnector:!0},i);return e.entries=e.entries.concat(r.entries),{getSelectedParameter:r.getSelectedParameter}}},"/9ir":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return JsonField}));var _Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("k1fw"),_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("tJVT"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("q1tI"),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),react_json_editor_ajrm__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d7n/"),react_json_editor_ajrm_locale_zh_cn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("bJMu"),react_json_editor_ajrm_locale_zh_cn__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react_json_editor_ajrm_locale_zh_cn__WEBPACK_IMPORTED_MODULE_4__),react_json_editor_ajrm_es_themes__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("gOPf"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("nKUr"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__),JsonField=function JsonField(_ref){var value=_ref.value,readOnly=_ref.readOnly,_ref$jsonFieldProps=_ref.jsonFieldProps,jsonFieldProps=void 0===_ref$jsonFieldProps?{}:_ref$jsonFieldProps,_ref$onChange=_ref.onChange,_onChange=void 0===_ref$onChange?function(){}:_ref$onChange,_useState=Object(react__WEBPACK_IMPORTED_MODULE_2__["useState"])({}),_useState2=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__["a"])(_useState,2),editValue=_useState2[0],setEditValue=_useState2[1];return Object(react__WEBPACK_IMPORTED_MODULE_2__["useEffect"])((function(){if(value){var s="{".concat(value,"}");value.startsWith("{")&&(s="".concat(value));try{setEditValue(eval("(".concat(s,")")))}catch(e){}}}),[value]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__["jsx"])(react_json_editor_ajrm__WEBPACK_IMPORTED_MODULE_3__["a"],Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({placeholder:editValue,colors:react_json_editor_ajrm_es_themes__WEBPACK_IMPORTED_MODULE_5__["a"].light_mitsuketa_tribute,locale:react_json_editor_ajrm_locale_zh_cn__WEBPACK_IMPORTED_MODULE_4___default.a,height:"380px",width:"100%",viewOnly:readOnly,style:{body:{border:"1px solid #d9d9d9"}},onChange:function(e){e.error||_onChange(e.plainText)}},jsonFieldProps))}},"17x+":function(e,t,n){"use strict";var a=n("emvA").is,i=n("emvA").getBusinessObject,r=n("7GAv"),c=n("zOnR");e.exports=function(e,t,n,o){var s=i(t);(a(t,"activiti:JobPriorized")||a(t,"bpmn:Participant")&&s.get("processRef"))&&(e.entries=e.entries.concat(r(t,n,{getBusinessObject:function(e){var t=i(e);return a(t,"bpmn:Participant")?t.get("processRef"):t}},o))),a(t,"activiti:AsyncCapable")&&(e.entries=e.entries.concat(c(t,n,{getBusinessObject:i},o)))}},"191G":function(e,t,n){"use strict";n("5Dmo");var a=n("3S7+"),i=(n("+L6B"),n("2/Rp")),r=(n("/xke"),n("TeRw")),c=n("q1tI"),o=n.n(c),s=n("z7Xi"),l=n("rdt+"),d=n("MDUV"),u=n.n(d),p=n("NB5u"),f=n("nKUr"),m=function(e){var t=e.value,n=e.onChange,c=void 0===n?function(){}:n,d=e.label,m=e.readOnly,b=e.imageHeight,j=void 0===b?96:b,h=e.imageWidth,_=void 0===h?96:h,O=e.imageStyle,x=void 0===O?{borderRadius:"8px"}:O,g=o.a.createRef(),v=function(){if(window.FileReader){var e=g.current.files[0];if("object"===typeof e){var t=e.name,n=".jpg .jpeg .gif .bmp .png ",a=t.substr(t.lastIndexOf(".")).toLowerCase();if(-1===n.indexOf("".concat(a," ")))return void r["default"].error({message:"\u9009\u62e9\u56fe\u50cf\u6587\u4ef6",description:"\u8bf7\u9009\u62e9\u540e\u7f00\u540d\u4e3a ".concat(n," \u7684\u56fe\u50cf\u6587\u4ef6\uff01")});var i=new FileReader;i.onload=function(e){c(window.btoa(e.target.result))},i.readAsBinaryString(e)}}else r["default"].warn({message:"\u9009\u62e9\u56fe\u50cf\u6587\u4ef6",description:"\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u9009\u62e9\u56fe\u50cf\u6587\u4ef6\uff0c\u8bf7\u66f4\u6362\u4e3achrome,firefox\u6d4f\u89c8\u5668\uff01"})};return Object(f["jsxs"])("div",{className:u.a.avatar,children:[d?Object(f["jsx"])("div",{children:d}):null,Object(f["jsx"])("img",{width:!m||t?_:36,height:!m||t?j:36,style:x,src:t?"data:image/jpeg;base64,".concat(t):p["e"],alt:"\u56fe\u50cf"}),!m&&Object(f["jsxs"])("div",{className:u.a.buttongroup,children:[Object(f["jsx"])(a["a"],{title:"\u9009\u62e9\u56fe\u50cf",children:Object(f["jsx"])(i["a"],{type:"dashed",size:"small",onClick:function(){g.current.click()},children:Object(f["jsx"])(s["a"],{})})})," ",Object(f["jsx"])(a["a"],{title:"\u6e05\u9664\u56fe\u50cf",children:Object(f["jsx"])(i["a"],{type:"dashed",size:"small",onClick:function(){c("")},children:Object(f["jsx"])(l["a"],{})})})]}),Object(f["jsx"])("input",{ref:g,type:"file",style:{visibility:"hidden",width:0,height:0},onChange:v})]})};t["a"]=m},"1M5+":function(e,t,n){"use strict";n.r(t),n.d(t,"ModuleContext",(function(){return z}));n("DYRE");var a=n("zeV3"),i=(n("B9cy"),n("Ol7k")),r=(n("T2oS"),n("W9HT")),c=(n("IzEo"),n("bx4M")),o=(n("cWXX"),n("/ezw")),s=n("q1tI"),l=n("Hx5s"),d=n("FRQA"),u=n("yxHc"),p=n("/MKj"),f=n("bx7e"),m=n("xB/3"),b=n("qPJW"),j=n("aoqV"),h=n("CYVn"),_=n("ASZ0"),O=n("WTWM"),x=n("k3O3"),g=n("jE+T"),v=(n("sPJy"),n("bE4q")),y=(n("lUTK"),n("BvKs")),E=n("ma4E"),S=n("NB5u"),C=n("nKUr"),I=function(e,t,n){var a=e.children,i=t.primarykey,r=t.namefield,c=t.modulename,o=[];return Array.isArray(a)&&a.forEach((function(e){Array.isArray(e.children)&&o.push(Object(C["jsx"])(y["a"].Item,{onClick:function(){n({type:"modules/pinkeyChanged",payload:{moduleName:c,pinkey:e[i]}})},children:e[r]}))})),o.length?Object(C["jsx"])(y["a"],{children:o}):null},D=function(e){var t=e.dispatch,n=e.moduleState,a=n.moduleName,i=n.pinkey,r=n.dataSource;if(!i||Object(E["d"])(n))return null;var c=Object(O["x"])(a),o=c.namefield,s=c.primarykey,l=Object(g["m"])(r,i,s),d=[],u=function(e){t({type:"modules/pinkeyChanged",payload:{moduleName:a,pinkey:e}})},p=l;while(p)(function(e){d.splice(0,0,Object(C["jsx"])(v["a"].Item,{overlay:I(e,c,t),onClick:function(){u(e&&!e[S["f"]]&&1===n.dataSource.length?"":e[s])},children:Object(C["jsx"])("a",{children:e[o]})}))})(p),p=p[S["f"]];return r.length>1&&d.splice(0,0,Object(C["jsx"])(v["a"].Item,{overlay:I({children:n.dataSource},c,t),onClick:function(){u("")},children:Object(C["jsx"])("a",{children:"\u6240\u6709"})})),Object(C["jsx"])(v["a"],{separator:">",style:{marginLeft:"12px",display:"inline"},children:d})},k=D,w=n("MzlM"),P=n("YLpF"),T=n("nxxQ"),M=n("mqE+"),A=(n("5Dmo"),n("3S7+")),R=(n("+L6B"),n("2/Rp")),N=n("oBTY"),L=n("tJVT"),B=(n("Znn+"),n("ZTPi")),K=n("rLCj"),F=n("RfA7"),U=n("79+z"),W=B["a"].TabPane,V="__all_record__key_",q=function(e){var t=e.moduleState,n=e.dispatch,a=Object(s["useState"])(0),i=Object(L["a"])(a,2),r=i[0],c=i[1],o=Object(s["useState"])(!1),l=Object(L["a"])(o,2),d=l[0],u=l[1],p=t.moduleName,f=t.tabParentFilters,m=Object(O["x"])(p),b=m.tabParentNavigateScheme,j=function(){u(!0);var e={moduleName:p,title:b.title,navigateschemeid:b.navigateschemeid,cascading:!1,isContainNullRecord:b.tf_isContainNullRecord};Object(F["p"])(e).then((function(e){var t=[];e&&e.children[0]&&e.children[0].children&&(t=e.children[0].children.map((function(e){return{moduleName:e.moduleName,fieldahead:e.fieldahead,fieldName:e.fieldName,fieldtitle:e.fieldtitle,operator:e.operator,fieldvalue:e.fieldvalue,text:e.text,count:e.count,numberGroupId:e.numberGroupId,schemeDetailId:e.schemeDetailId,iconCls:e.iconCls}}))),n({type:"modules/setTabParentFilters",payload:{moduleName:p,tabParentFilters:t}}),setTimeout((function(){u(!1)}),500)}))};Object(s["useEffect"])((function(){j()}),[r]);var h=[Object(C["jsx"])(W,{tab:"\u5168\u90e8"},V)];return f&&h.push.apply(h,Object(N["a"])(f.map((function(e){return Object(C["jsx"])(W,{tab:Object(C["jsxs"])(C["Fragment"],{children:[e.iconCls?Object(C["jsxs"])(C["Fragment"],{children:[Object(U["n"])(e.iconCls)," "]}):"","".concat(e.text,"(").concat(e.count,")")]})},e.fieldvalue)})))),Object(C["jsx"])(B["a"],{type:"line",tabBarExtraContent:{left:Object(C["jsx"])(A["a"],{title:"\u5237\u65b0\u6807\u7b7e\u9875\u6570\u636e",children:Object(C["jsx"])(R["a"],{type:"link",loading:d,children:Object(C["jsx"])(K["a"],{onClick:function(){d||c((function(e){return e+1}))}})})})},style:{paddingTop:"8px"},activeKey:t.filters.parentfilter?t.filters.parentfilter.fieldvalue:V,onChange:function(e){n({type:"modules/parentFilterChanged",payload:{moduleName:p,parentFilter:e===V?null:null===f||void 0===f?void 0:f.find((function(t){return t.fieldvalue===e}))}})},children:h})},z=Object(s["createContext"])({state:void 0,dispatch:function(){}}),G=function(e){var t=e.location,n=e.route,p=e.dispatch,v=e.modules,y=e.fetchLoading,E=e.match,S=n.name||E.params.moduleName,I=v[S],D=Object(O["x"])(S),A=void 0,R=!1,N=t.query,L=t.state;if(N&&N.parentFilter?A=JSON.parse(decodeURIComponent(N.parentFilter)):L&&L.parentFilter&&(A=JSON.parse(decodeURIComponent(L.parentFilter))),Object(s["useEffect"])((function(){I||p({type:"modules/fetchModuleInfo",payload:{moduleName:S}})}),[S]),I&&(R=!!A&&Object(g["q"])({moduleState:I,parentFilter:A}),R&&p({type:"modules/parentFilterChanged",payload:{moduleName:S,parentFilter:A}})),!I)return Object(C["jsx"])(l["a"],{title:Object(C["jsxs"])("span",{children:[Object(f["getTitleFromSysMenu"])(S),Object(g["l"])(A,I,p)]}),children:Object(C["jsx"])(r["a"],{size:"large",children:Object(C["jsx"])(c["a"],{style:{textAlign:"center"},children:Object(C["jsx"])(o["a"],{paragraph:{rows:6}})})})});var B=Object(C["jsx"])(w["a"],{moduleInfo:D,moduleState:I,dispatch:p}),K=D.navigateSchemes.length,F=I.currSetting.navigate.visible,U=Object(C["jsxs"])(C["Fragment"],{children:[Object(O["q"])(D)?Object(C["jsx"])(_["c"],{visible:I.currSetting.userFilterRegionVisible,moduleState:I,dispatch:p}):null,Object(C["jsx"])(c["a"],{style:{marginBottom:"20px"},bodyStyle:0===I.dataSource.length?{paddingTop:"16px",paddingBottom:"16px"}:{paddingTop:"8px",paddingBottom:"8px"},bordered:!1,children:Object(C["jsx"])(b["a"],{moduleInfo:D,moduleState:I,gridType:"normal",dispatch:p,fetchLoading:y})})]}),W=D.description?Object(C["jsx"])("span",{dangerouslySetInnerHTML:{__html:D.description||""}}):null,V=i["a"].Content,G="mainregion"===I.formState.showType&&I.formState.visible?B:Object(C["jsxs"])(l["a"],{title:Object(C["jsxs"])("span",{children:[Object(g["j"])(D)," ",D.title,Object(C["jsx"])(g["d"],{moduleInfo:D}),Object(C["jsxs"])("span",{children:[!A&&D.tabParentNavigateScheme?null:Object(g["l"])(I.filters.parentfilter,I,p),Object(C["jsx"])(k,{dispatch:p,moduleState:I})]})]}),extra:Object(C["jsxs"])(a["b"],{size:"large",children:[Object(C["jsx"])(j["a"],{moduleInfo:D,moduleState:I,manyToOneInfo:null,dispatch:p}),Object(C["jsx"])(h["b"],{moduleState:I,moduleInfo:D,dispatch:p})]}),content:W||!A&&D.tabParentNavigateScheme?Object(C["jsxs"])(C["Fragment"],{children:[W?Object(C["jsx"])("div",{children:W}):null,!A&&D.tabParentNavigateScheme?Object(C["jsx"])(q,{moduleState:I,dispatch:p}):null]}):null,children:[Object(C["jsxs"])(d["a"],{children:[T["a"][S]&&I.currSetting.tableWidgetsVisible?Object(C["jsx"])(i["a"],{style:{marginBottom:"16px"},children:T["a"][S]}):null,D.tableWidgets.length&&I.currSetting.tableWidgetsVisible?Object(C["jsx"])(i["a"],{style:{marginBottom:"16px"},children:Object(C["jsx"])(M["c"],{tableWidgets:D.tableWidgets})}):null,Object(C["jsxs"])(i["a"],{children:[Object(C["jsx"])(x["a"],{moduleState:I,dispatch:p}),Object(C["jsxs"])(V,{style:K&&F?{margin:"0 0 0 16px"}:{},children:[0===I.dataSource.length&&D.moduleLimit.hassqlparam?Object(C["jsx"])(P["a"],{moduleState:I,dispatch:p}):null,U]})]})]}),B]});return Object(C["jsx"])(m["a"],{children:Object(C["jsx"])(z.Provider,{value:{state:I,dispatch:p},children:Object(C["jsx"])(u["a"],{rotate:-22,fontColor:"rgba(0,0,0,.15)",fontSize:16,zIndex:30009,children:G})})})};t["default"]=Object(p["c"])((function(e){var t=e.modules,n=e.loading;return{modules:t,fetchLoading:n.effects["modules/fetchData"]||n.effects["modules/filterChanged"]}}))(G)},"1qKY":function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return O})),n.d(t,"a",(function(){return N})),n.d(t,"b",(function(){return L}));n("miYZ");var a=n("tsqr"),i=n("oBTY"),r=n("k1fw"),c=n("q1tI"),o=n("79+z"),s=n("RsOY"),l=n.n(s),d=n("WTWM"),u=n("RfA7"),p=n("ma4E"),f=n("O7YW"),m=n("c6dC"),b=n("NB5u"),j=function(e){var t=e.moduleName,n=e.gridParams,a=e.sorts,i=e.sortschemeid,r=e.filters,c={moduleName:t};return c.page=n.curpage,c.limit=n.limit,c.start=n.start,i&&(c.sortschemeid=i),Object(o["d"])(c,Object(p["b"])(r,e)),a.length&&(c.sort=JSON.stringify(a)),Object(u["u"])(c)},h=function(e,t){return function(n){var a,i=n.type.split("/")[n.type.split("/").length-1];"fetchData"===i?(null!==(a=e.filters.parentfilter)&&void 0!==a&&a.fieldvalue||e.filters.dataminingFilter)&&(t({type:"loadingStart"}),j(e).then((function(e){t({type:"updateDataList",payload:e})})).finally((function(){t({type:"loadingFinished"})}))):t(n)}},_=function(e,t){var n=Object(d["x"])(e.moduleName),a=n.primarykey,i=n.namefield,c=t.payload,o=c.curpage,s=c.limit,l=c.start,u=c.total,p=c.totalpage,f=c.remoteRoot,m=c.data,b=e.selectedRowKeys.filter((function(e){return void 0!==m.find((function(t){return t[a]===e}))}));return Object(r["a"])(Object(r["a"])({},e),{},{gridParams:{curpage:o,limit:s,start:l,total:u,totalpage:p},dataSource:m,remoteRoot:f||{},selectedRowKeys:b,recordOrderChanged:!1,selectedTextValue:b.map((function(e){var t=m.find((function(t){return t[a]===e}))||{};return{text:t[i],value:e}}))})},O=function(e,t){return function(n){var a=n.type.split("/")[n.type.split("/").length-1];"fetchData"===a?(t({type:"loadingStart"}),j(e).then((function(e){t({type:"updateDataList",payload:e})})).finally((function(){t({type:"loadingFinished"})}))):t(n)}},x=function(e){var t,n=e.moduleName,a=e.gridParams,i=e.sorts,c=e.sortschemeid,s=e.remoteRoot,l=e.filters;if((null===(t=l.parentfilter)||void 0===t||!t.fieldvalue)&&!l.dataminingFilter)return e;var f=Object(d["x"])(n),m={moduleName:n};m.page=a.curpage,m.limit=a.limit,m.start=a.start,c&&(m.sortschemeid=c),Object(o["d"])(m,Object(p["b"])(l,e)),i.length&&(m.sort=JSON.stringify(i));var b=Object(u["v"])(m),j=b.curpage,h=b.limit,_=b.start,O=b.total,x=b.totalpage,g=b.data,v=e.selectedRowKeys.filter((function(e){return void 0!==g.find((function(t){return t[f.primarykey]===e}))}));return Object(r["a"])(Object(r["a"])({},e),{},{gridParams:{curpage:j,limit:h,start:_,total:O,totalpage:x},dataSource:g,remoteRoot:s||{},selectedRowKeys:v,selectedTextValue:v.map((function(e){var t=g.find((function(t){return t[f.primarykey]===e}))||{};return{text:t[f.namefield],value:e}}))})},g=function(e,t){var n,a,c=t.payload,o=c.type,s=Object(r["a"])({},e.filters);switch(o){case"parentFilterChange":s.parentfilter=c.parentFilter,s.navigate=[],s.viewscheme={title:void 0,viewschemeid:void 0},s.searchfilter="",s.columnfilter=[],s.userfilter=[];break;case"columnFilterChange":s.columnfilter=Object(p["k"])(c.columnfilter,Object(p["i"])(e.moduleName));break;case"clearAllColumnFilter":s.columnfilter=[];break;case"clearColumnFilter":s.columnfilter=null===(n=s.columnfilter)||void 0===n?void 0:n.filter((function(e){return e.property!==c.dataIndex}));break;case"viewSchemeChange":s.viewscheme=Object(r["a"])({},c.viewscheme);break;case"navigateSelectChange":s.navigate=c.navigates;break;case"clearNavigateFilter":var l=c.index,d=[];-1!==l&&(d=Object(i["a"])(s.navigate),d.splice(l,1)),s.navigate=d;break;case"userDefineFilter":s.userfilter=c.userfilter;break;case"searchfilter":s.searchfilter=c.query;break;case"clearUserFilter":s.userfilter=null===(a=s.userfilter)||void 0===a?void 0:a.map((function(e){var t=Object(r["a"])({},e);return delete t.value,delete t.text,t}));break;default:break}var u=e.gridParams;return Object(r["a"])(Object(r["a"])({},e),{},{filters:s,gridParams:Object(r["a"])(Object(r["a"])({},u),{},{curpage:1}),dataSourceLoadCount:e.dataSourceLoadCount+1})},v=function(e,t){var n=t.payload,a=n.expanded,c=n.key,o=n.title,s=n.selected,l=e.expandedRowKeys;return s?Object(r["a"])(Object(r["a"])({},e),{},{expandedRowKeys:a?[c]:[],selectedRowKeys:[c],selectedTextValue:[{text:o,value:c}]}):Object(r["a"])(Object(r["a"])({},e),{},{expandedRowKeys:a?[].concat(Object(i["a"])(l),[c]):l.filter((function(e){return e!==c}))})},y=function(e){return Object(r["a"])(Object(r["a"])({},e),{},{selectedRowKeys:[],selectedTextValue:[]})},E=function(e,t){var n=t.payload.record,a=e.moduleName,i=Object(d["x"])(a),c=i.primarykey,o=e.dataSource.map((function(e){return e[c]===n[c]?(n[b["g"]]=e[b["g"]],n):e})),s=e.formState;return e.formState.visible&&e.formState.currRecord[c]===n[c]&&(s=Object(r["a"])(Object(r["a"])({},s),{},{currRecord:Object(r["a"])({},n)})),Object(r["a"])(Object(r["a"])({},e),{},{dataSource:o,formState:s})},S=function(e,t){var n=Object(u["y"])({objectname:e.moduleName,id:t.payload.recordId}),a=n.data;return E(e,{type:"updateRecord",payload:{record:a}})},C=function(e,t){var n=t.payload.record,a=e.moduleName,c=Object(d["x"])(a),o=Object(r["a"])({},e.gridParams);n[b["g"]]="+";var s=[].concat(Object(i["a"])(e.dataSource),[n]).reverse().filter((function(e,t){return t<o.limit})).reverse();o.total+=1,0===o.curpage&&(o.curpage=1),0===o.totalpage&&(o.totalpage=1);var l=n[c.primarykey];return Object(r["a"])(Object(r["a"])({},e),{},{dataSource:s,gridParams:o,lastInsertRecord:n,selectedRowKeys:[l],selectedTextValue:[{text:n[c.namefield],value:l}]})},I=function(e){var t=[];return Object(r["a"])(Object(r["a"])({},e),{},{sorts:t,sortschemeid:null,dataSourceLoadCount:e.dataSourceLoadCount+1})},D=function(e,t){var n=t.payload.sortMultiple,a=e.sorts;return!n.multiple&&a.length>1?Object(r["a"])(Object(r["a"])({},e),{},{sortMultiple:n,sorts:[a[0]],dataSourceLoadCount:e.dataSourceLoadCount+1}):Object(r["a"])(Object(r["a"])({},e),{},{sortMultiple:n,dataSourceLoadCount:e.dataSourceLoadCount+1})},k=function(e,t){var n=t.payload.columnsorter,a=Object(f["a"])(n);return Object(r["a"])(Object(r["a"])({},e),{},{sorts:a,sortschemeid:null,dataSourceLoadCount:e.dataSourceLoadCount+1})},w=function(e,t){var n=t.payload,a=n.property,i=n.title,c=[{property:a,title:i}];return Object(r["a"])(Object(r["a"])({},e),{},{groups:c})},P=function(e){return Object(r["a"])(Object(r["a"])({},e),{},{groups:[]})},T=function(e,t){var n=t.payload.page,a=Object(r["a"])(Object(r["a"])({},e.gridParams),{},{curpage:n});return Object(r["a"])(Object(r["a"])({},e),{},{gridParams:a,dataSourceLoadCount:e.dataSourceLoadCount+1})},M=function(e,t){var n=t.payload.limit,a=e.gridParams,i=a.start,c=Math.floor(i/n)+1,o=Object(r["a"])(Object(r["a"])({},e.gridParams),{},{curpage:c,limit:n});return Object(r["a"])(Object(r["a"])({},e),{},{gridParams:o,dataSourceLoadCount:e.dataSourceLoadCount+1})},A=function(e,t){var n=t.payload.formState;return n.visible&&(n.currRecord=Object(r["a"])({},n.currRecord)),Object(r["a"])(Object(r["a"])({},e),{},{formState:n})},R=function(e,t){var n=t.payload.selectedRowKeys,a=e.moduleName,c=e.dataSource,o=Object(d["x"])(a),s=o.primarykey,l=o.namefield,u=e.selectedTextValue.filter((function(e){return n.find((function(t){return t===e.value}))})),p=n.filter((function(e){return void 0===u.find((function(t){return t.value===e}))}));return u.push.apply(u,Object(i["a"])(p.map((function(e){var t=c.find((function(t){return t[s]===e}))||{};return{text:t[l],value:e}})))),Object(r["a"])(Object(r["a"])({},e),{},{selectedRowKeys:n,selectedTextValue:u})},N=Object(c["createContext"])({moduleState:void 0,dispatch:void 0}),L=function(e,t){var n=t.type.split("/")[t.type.split("/").length-1];switch(n){case"init":return Object(r["a"])(Object(r["a"])({},t.payload.initState),{},{dataSourceLoadCount:(new Date).getTime()});case"loadingStart":return Object(r["a"])(Object(r["a"])({},e),{},{fetchLoading:!0});case"loadingFinished":return Object(r["a"])(Object(r["a"])({},e),{},{fetchLoading:!1});case"updateDataList":return _(e,t);case"updateDataSource":return l()(e,{dataSource:{$set:t.payload.dataSource},recordOrderChanged:{$set:!0===t.payload.recordOrderChanged}});case"fetchData":return x(e);case"selectedRowKeysChanged":return R(e,t);case"formStateChanged":return A(e,t);case"pageSizeChanged":return M(e,t);case"pageChanged":return T(e,t);case"columnSortChanged":return k(e,t);case"sortMultipleChanged":return D(e,t);case"resetSorts":return I(e);case"groupChanged":return w(e,t);case"resetGroups":return P(e);case"insertRecord":return C(e,t);case"updateRecord":return E(e,t);case"resetSelectedRow":return y(e);case"refreshRecord":return S(e,t);case"expandChanged":return v(e,t);case"gridSchemeChanged":return Object(r["a"])(Object(r["a"])({},e),{},{currentGridschemeid:t.payload.gridschemeid});case"gridExportSettingChanged":return Object(r["a"])(Object(r["a"])({},e),{},{gridExportSetting:t.payload.gridExportSetting});case"monetaryChanged":var i=t.payload,c=i.position,s=i.monetaryType,d=Object(r["a"])({},e);return c&&(d.monetaryPosition=c,Object(o["C"])(e.moduleName,c)),s&&(d.monetary=Object(m["a"])(s),Object(o["D"])(e.moduleName,s)),d;case"filterChanged":return g(e,t);case"gridSizeChanged":return Object(r["a"])(Object(r["a"])({},e),{},{currSetting:Object(r["a"])(Object(r["a"])({},e.currSetting),{},{gridSize:t.payload.size})});case"toggleUserFilter":return Object(r["a"])(Object(r["a"])({},e),{},{currSetting:Object(r["a"])(Object(r["a"])({},e.currSetting),{},{userFilterRegionVisible:!e.currSetting.userFilterRegionVisible})});case"toggleNavigate":return Object(r["a"])(Object(r["a"])({},e),{},{currSetting:Object(r["a"])(Object(r["a"])({},e.currSetting),{},{navigate:Object(r["a"])(Object(r["a"])({},e.currSetting.navigate),{},{visible:!e.currSetting.navigate.visible})})});case"toggleTableWidgets":return Object(r["a"])(Object(r["a"])({},e),{},{currSetting:Object(r["a"])(Object(r["a"])({},e.currSetting),{},{tableWidgetsVisible:!e.currSetting.tableWidgetsVisible})});case"toggleIsShowListCard":return l()(e,{currSetting:{$toggle:["isShowListCard"]}});case"toggleCanDragToNavigate":return l()(e,{currSetting:{$toggle:["canDragToNavigate"]}});case"toggleCanDragChangeRecno":return l()(e,{currSetting:{$toggle:["canDragChangeRecno"]}});default:return a["default"].warn("action.type ----".concat(n," \u672a\u8fdb\u884c\u5904\u7406\u3002")),e}}},"2Fcx":function(e,t,n){e.exports={container:"container___1Rq3A"}},"2daX":function(e,t,n){"use strict";var a=n("emvA").is,i=n("h/KA").find,r=n("6BL2"),c=n("hfUJ"),o=n("XpWC"),s=n("bW/S"),l=n("HYMw");function d(e){var t=e&&e.event;return"timeout"===t}function u(e){var t=e.eventDefinitions||[];return i(t,(function(e){return a(e,"bpmn:TimerEventDefinition")}))}e.exports=function(e,t,n,a,i){var p={class:i("Java Class"),expression:i("Expression"),delegateExpression:i("Delegate Expression"),script:i("Script")};a=a||{};var f=a.getSelectedListener,m="class",b="expression",j="delegateExpression",h="script",_=o.isSequenceFlow(t)?[{name:i("take"),value:"take"}]:[{name:i("start"),value:"start"},{name:i("end"),value:"end"}],O=[{name:i("create"),value:"create"},{name:i("assignment"),value:"assignment"},{name:i("complete"),value:"complete"},{name:i("delete"),value:"delete"},{name:i("update"),value:"update"},{name:i("timeout"),value:"timeout"}],x=function(e,t){return f(e,t)};e.entries.push(r.selectBox({id:"listener-event-type",label:i("Event Type"),modelProperty:"eventType",emptyParameter:!1,get:function(e,t){var n=f(e,t),a=n&&n.get("event");return{eventType:a}},set:function(e,t,n){var a=t.eventType,i=f(e,n),r=i&&i.eventDefinitions;return r&&"timeout"!==a&&(r=[]),c.updateBusinessObject(e,i,{event:a,eventDefinitions:r})},selectOptions:function(e,t){var n,a=f(e,t);return o.isTaskListener(a)?n=O:o.isExecutionListener(a)&&(n=_),n},hidden:function(e,t){return!x(e,t)}})),e.entries.push(r.textField({id:"listener-id",label:i("Listener Id"),modelProperty:"listenerId",get:function(e,t){var n={},a=f(e,t);return n.listenerId=a&&a.get("id")||void 0,n},set:function(e,t,n){var a={},i=f(e,n);return a["id"]=t.listenerId||"",c.updateBusinessObject(e,i,a)},hidden:function(e,t){var n=f(e,t);return!o.isTaskListener(n)},validate:function(e,t,n){var a=t.listenerId,r=f(e,n),c={};return!a&&d(r)&&(c.listenerId=i("Must provide a value for timeout task listener")),c}})),e.entries.push(r.selectBox({id:"listener-type",label:i("Listener Type"),selectOptions:[{value:m,name:i("Java Class")},{value:b,name:i("Expression")},{value:j,name:i("Delegate Expression")},{value:h,name:i("Script")}],modelProperty:"listenerType",emptyParameter:!1,get:function(e,t){var n=f(e,t);return{listenerType:o.getImplementationType(n)}},set:function(e,t,a){var i=f(e,a),r=t.listenerType||void 0,o={};return o[m]=r===m?"":void 0,o[b]=r===b?"":void 0,o[j]=r===j?"":void 0,o[h]=r===h?n.create("activiti:Script"):void 0,c.updateBusinessObject(e,i,o)},hidden:function(e,t){return!x(e,t)}})),e.entries.push(r.textField({id:"listener-value",dataValueLabel:"listenerValueLabel",modelProperty:"listenerValue",get:function(e,t){var n={},a=f(e,t),i=o.getImplementationType(a);return n.listenerValueLabel=p[i]||"",n.listenerValue=a&&a.get(i)||void 0,n},set:function(e,t,n){var a={},i=f(e,n),r=o.getImplementationType(i);return a[r]=t.listenerValue||"",c.updateBusinessObject(e,i,a)},hidden:function(e,t){var n=f(e,t);return!n||n.script},validate:function(e,t){var n=t.listenerValue,a={};return n||(a.listenerValue=i("Must provide a value")),a}}));var g=s("scriptFormat","value",!0,i);e.entries.push({id:"listener-script-value",html:'<div data-show="isScript">'+g.template+"</div>",get:function(e,t){var n=f(e,t);return n&&n.script?g.get(e,n.script):{}},set:function(e,t,n){var a=f(e,n),i=g.set(e,t,a);return c.updateBusinessObject(e,a.script,i)},validate:function(e,t,n){var a=f(e,n);return a&&a.script?g.validate(e,t):{}},isScript:function(e,t){var n=f(e,t);return n&&n.script},script:g});var v=function(e,t){var n=f(e,t);if(n&&d(n)){var a=u(n);return a||!1}};function y(e,t){var a=f(e,t);if(a&&d(a)){var i=a.get("eventDefinitions")||[],r=n.create("bpmn:TimerEventDefinition");return i.push(r),a.eventDefinitions=i,r}}var E={idPrefix:"listener-",createTimerEventDefinition:y};l(e,t,n,v,i,E)}},"380F":function(e,t,n){"use strict";var a=n("emvA").is,i=n("emvA").getBusinessObject,r=n("XpWC"),c=n("3SBk");function o(e){var t=r.getServiceTaskLikeBusinessObject(e);return t||(t=i(e)),t}e.exports=function(e,t,n,i){var r=o(t);r&&(a(r,"activiti:TaskPriorized")||a(r,"bpmn:Participant")&&r.get("processRef"))&&(e.entries=e.entries.concat(c(t,n,{getBusinessObject:function(e){return a(r,"bpmn:Participant")?r.get("processRef"):r}},i)))}},"3Mvv":function(e,t,n){e.exports={manytomanytag:"manytomanytag___1WdX-",numberalignright:"numberalignright___2_g1X",progresspercent:"progresspercent___3oQuM",percent_border:"percent_border___AcYlY",percent_text:"percent_text___3U-aq",percent_area:"percent_area___2XDCN",namefield:"namefield___1eLXF",manytoonefield:"manytoonefield___SbrTn",manytoonefieldvalue:"manytoonefieldvalue___2nHDc",manytoonefieldicon:"manytoonefieldicon___3GeOY",onetomanyfield:"onetomanyfield___2GW3o",onetomanyfieldinfo:"onetomanyfieldinfo___BMzcO",directionaryfield:"directionaryfield___zasoh",ratefield:"ratefield___2279J",monetaryfield:"monetaryfield___1qUfy",totalfield:"totalfield___ZMYay",summarycell:"summarycell___1D_uN",totalcell:"totalcell___2xnrH",numberpositive:"numberpositive___V6jj6",nubmerzero:"nubmerzero___1WB-n",numbernegative:"numbernegative___2bYXB",datefield:"datefield___1PIb4",attachmentfield:"attachmentfield___1MvGc"}},"3SBk":function(e,t,n){"use strict";var a=n("6BL2"),i=n("hfUJ");e.exports=function(e,t,n,r){var c=n.getBusinessObject,o=a.textField({id:"externalTaskPriority",label:r("Task Priority"),modelProperty:"taskPriority",get:function(e,t){var n=c(e);return{taskPriority:n.get("activiti:taskPriority")}},set:function(e,t){var n=c(e);return i.updateBusinessObject(e,n,{"activiti:taskPriority":t.taskPriority||void 0})}});return[o]}},"4WVO":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DesignForm}));var _Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("k1fw"),antd_es_row_style__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("14J3"),antd_es_row__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("BMrR"),antd_es_space_style__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("DYRE"),antd_es_space__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("zeV3"),antd_es_card_style__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("IzEo"),antd_es_card__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("bx4M"),antd_es_tree_style__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ozfa"),antd_es_tree__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("MJZm"),antd_es_col_style__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("jCWc"),antd_es_col__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("kPKH"),antd_es_tooltip_style__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("5Dmo"),antd_es_tooltip__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("3S7+"),_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("oBTY"),_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("tJVT"),antd_es_modal_style__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("2qtc"),antd_es_modal__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("kLXV"),antd_es_message_style__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("miYZ"),antd_es_message__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("tsqr"),react__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("q1tI"),react__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_19__),_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("eVqf"),_utils_utils__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("79+z"),_ant_design_icons__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("G3dp"),_ant_design_icons__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("wJku"),_ant_design_icons__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("9jjd"),_ant_design_icons__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("ga3A"),_service__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("RfA7"),_widget_ModuleHierarchyChart__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("mzdz"),_DesignFormField__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("jZwI"),_designForm_css__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("Snfz"),_designForm_css__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(_designForm_css__WEBPACK_IMPORTED_MODULE_29__),_moduleUtils__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("jE+T"),_modules__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("WTWM"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("nKUr"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__),getTitle=function(e,t){return e.cls?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("span",{className:e.cls,children:t||e.text}):t||e.text},farray=["xtype","layout","region","rows","cols","widths","rowspan","colspan","separatelabel","hiddenlabel","width","height","fieldahead","subdataobjecttitle","collapsible","collapsed","othersetting","showdetailtip"],getChildNodesArray=function e(t){var n=[];return t.children.forEach((function(t){var a={text:t.text};t.udftitle&&(a.title=t.udftitle),!t.children&&t.itemId&&(a.itemId=t.itemId),farray.forEach((function(e){t[e]&&(a[e]=t[e])})),t.children&&t.children.length&&(a.children=e(t)),n.push(a)})),n},saveFormScheme=function(e,t){var n=t["FDataobject.objectid"];Object(_service__WEBPACK_IMPORTED_MODULE_26__["F"])({dataObjectId:n,formSchemeId:t.formschemeid,formSchemeName:t.schemename,schemeDefine:JSON.stringify(getChildNodesArray(e[0]))}).then((function(e){e.success?(antd_es_message__WEBPACK_IMPORTED_MODULE_18__["default"].success("\u8868\u5355\u65b9\u6848\u300e".concat(t.schemename,"\u300f\u5df2\u4fdd\u5b58\u3002")),Object(_modules__WEBPACK_IMPORTED_MODULE_31__["L"])(n)):antd_es_modal__WEBPACK_IMPORTED_MODULE_16__["a"].error({title:"\u8868\u5355\u65b9\u6848\u4fdd\u5b58\u5931\u8d25\uff01",width:500,content:e.msg})}))},DesignForm=function DesignForm(_ref){var formScheme=_ref.formScheme,moduleName=formScheme["FDataobject.objectid"],formschemeid=formScheme.formschemeid,hierarchyRef=Object(react__WEBPACK_IMPORTED_MODULE_19__["useRef"])(),form=Object(react__WEBPACK_IMPORTED_MODULE_19__["useRef"])(),_useState=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])([]),_useState2=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState,2),canSelectTree=_useState2[0],setCanSelectTree=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])([]),_useState4=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState3,2),canSelectTreeCheckedkey=_useState4[0],setCanSelectTreeCheckedkey=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])([]),_useState6=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState5,2),canSelectTreeExpandKey=_useState6[0],setCanSelectTreeExpandKey=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])([]),_useState8=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState7,2),canSelectTreeSelectedKey=_useState8[0],setCanSelectTreeSelectedKey=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])([]),_useState10=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState9,2),details=_useState10[0],setDetails=_useState10[1],_useState11=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])([]),_useState12=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState11,2),detailsExpandKey=_useState12[0],setDetailsExpandKey=_useState12[1],_useState13=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])([]),_useState14=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState13,2),detailsSelectedKey=_useState14[0],setDetailsSelectedKey=_useState14[1],_useState15=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])({}),_useState16=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState15,2),currModule=_useState16[0],setCurrModule=_useState16[1],_useState17=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])(!1),_useState18=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState17,2),modalVisible=_useState18[0],setModalVisible=_useState18[1],_useState19=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])({}),_useState20=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState19,2),editRecord=_useState20[0],setEditRecord=_useState20[1],fetchSelectedModuleFields=function(e,t){e!==currModule?(setCurrModule(e),e.moduleName&&Object(_service__WEBPACK_IMPORTED_MODULE_26__["m"])({moduleName:e.moduleName,isChildModule:!!e.isChild,modulePath:e.itemId}).then((function(e){var n=[];e.forEach((function(e){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(e,{key:e.text,title:getTitle(e)}),n.push(e.key),e.children&&e.children.forEach((function(t){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(t,{key:t.itemId,title:getTitle(t),parent:e}),t.children&&(n.push(t.key),t.children.forEach((function(e){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(e,{key:e.itemId,title:getTitle(e),parent:t})})))}))})),setCanSelectTreeCheckedkey([]),setCanSelectTreeExpandKey(n),setCanSelectTree(e),setCanSelectTreeSelectedKey(t||detailsSelectedKey)}))):setCanSelectTreeSelectedKey(t||[])},deleteNode=function(){if(detailsSelectedKey.length){if("root"===detailsSelectedKey[0])return void antd_es_message__WEBPACK_IMPORTED_MODULE_18__["default"].warn("\u4e0d\u80fd\u5220\u9664\u6839\u8282\u70b9\uff01");var e=Object(_moduleUtils__WEBPACK_IMPORTED_MODULE_30__["g"])(details[0].children),t=e.find((function(e){return e.key===detailsSelectedKey[0]}));if(t){if(t.children&&t.children.length)return void antd_es_message__WEBPACK_IMPORTED_MODULE_18__["default"].warn("\u8bf7\u5148\u5220\u9664\u5f53\u524d\u8282\u70b9\u7684\u6240\u6709\u5b50\u8282\u70b9\uff01");if(t.itemId)return void antd_es_message__WEBPACK_IMPORTED_MODULE_18__["default"].warn("\u8bf7\u5728\u53ef\u4f9b\u9009\u62e9\u7684\u5b57\u6bb5\u4e2d\u53d6\u6d88\u52fe\u9009\uff01");var n=t.parent.children;n.splice(n.findIndex((function(e){return e===t})),1),setDetailsSelectedKey([]),setDetails(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(details))}}else antd_es_message__WEBPACK_IMPORTED_MODULE_18__["default"].warn("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u8282\u70b9\uff01")},getEditTitle=function(e,t){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsxs"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["Fragment"],{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("span",{className:e.cls,children:t||e.udftitle||e.text}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(_ant_design_icons__WEBPACK_IMPORTED_MODULE_22__["a"],{className:"editbutton",onClick:function(){setEditRecord(e),setModalVisible(!0)}}),e.children&&e.children.length?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_tooltip__WEBPACK_IMPORTED_MODULE_12__["a"],{title:"\u628a\u6240\u6709\u5b50\u8282\u70b9\u653e\u5728\u4e0a\u7ea7\u8282\u70b9\u4e0b",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(_ant_design_icons__WEBPACK_IMPORTED_MODULE_23__["a"],{className:"editbutton",onClick:function(){var t=e.parent.children,n=t.findIndex((function(t){return t===e}));e.children.forEach((function(t){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(t,{parent:e.parent})})),t.splice.apply(t,[n,1].concat(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(e.children))),setDetails((function(e){return Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(e)}))}})}):null]})},changeTextToTitle=function e(t){Array.isArray(t)?t.forEach((function(t){return e(t)})):"[object Object]"===Object.prototype.toString.call(t)&&("root"!==t.key&&(t.title&&Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(t,{udftitle:t.title}),Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(t,{title:getEditTitle(t)})),t.children&&(t.children.forEach((function(e){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(e,{parent:t})})),e(t.children)))},syncSelected=function(e,t){setCanSelectTreeCheckedkey(e),t.checkedNodes.filter((function(e){return!e.children})).forEach((function(e){if(!Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_20__["g"])(details,"itemId").includes(e.itemId)){var t=e.text;currModule.isParent?t="".concat(currModule.qtip,"--").concat(t):currModule.isChild&&(t="".concat(currModule.qtip,"--").concat(e.parent.text,"--").concat(t));var n={key:e.itemId,itemId:e.itemId,text:t,iconCls:e.iconCls,cls:e.cls,icon:e.icon,leaf:!0};n.title=getEditTitle(n,t);var a=details[0].children.find((function(t){return t.text===e.parent.text&&!t.itemId}));a?(a.children||(a.children=[]),n.parent=a,a.children.push(n)):(a={key:Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["I"])(),text:e.parent.text||e.parent.title,udftitle:e.parent.text||e.parent.title,leaf:!1,expanded:!0,xtype:"fieldset",children:[n],parent:details[0]},a.title=getEditTitle(a),n.parent=a,detailsExpandKey.push(a.key),details[0].children.push(a))}})),Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_20__["e"])(canSelectTree).filter((function(e){return!t.checkedNodes.find((function(t){return t===e}))})).forEach((function(e){var t=Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_20__["e"])(details).find((function(t){return t.itemId===e.itemId}));if(t){var n=t.parent.children;n.splice(n.findIndex((function(e){return e.itemId===t.itemId})),1)}})),setDetails(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(details))};return Object(react__WEBPACK_IMPORTED_MODULE_19__["useEffect"])((function(){var e=Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_20__["g"])(canSelectTree,"itemId"),t=Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_20__["g"])(details,"itemId"),n=e.filter((function(e){return t.find((function(t){return t===e}))}));setCanSelectTreeCheckedkey(n)}),[canSelectTree]),Object(react__WEBPACK_IMPORTED_MODULE_19__["useEffect"])((function(){Object(_service__WEBPACK_IMPORTED_MODULE_26__["k"])({formSchemeId:formschemeid}).then((function(e){var t=[{key:"root",children:e.children,title:"\u5df2\u7ecf\u9009\u62e9\u7684\u5b57\u6bb5"}];changeTextToTitle(t),setDetailsExpandKey(Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_20__["f"])(t,"key")),setDetails(t),fetchSelectedModuleFields({moduleName:moduleName})}))}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsxs"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["Fragment"],{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsxs"])(antd_es_row__WEBPACK_IMPORTED_MODULE_2__["a"],{gutter:16,style:{height:"calc(100% )"},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_col__WEBPACK_IMPORTED_MODULE_10__["a"],{lg:12,md:24,sm:24,xs:24,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(_widget_ModuleHierarchyChart__WEBPACK_IMPORTED_MODULE_27__["a"],{moduleName:moduleName,onClick:function(e){fetchSelectedModuleFields(e)},ref:hierarchyRef})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_col__WEBPACK_IMPORTED_MODULE_10__["a"],{lg:5,md:12,sm:12,xs:24,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_card__WEBPACK_IMPORTED_MODULE_6__["a"],{title:"\u53ef\u4f9b\u9009\u62e9\u7684\u5b57\u6bb5",size:"small",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_tree__WEBPACK_IMPORTED_MODULE_8__["a"],{style:{height:"calc(100vh - 149px)",overflow:"auto"},checkable:!0,showIcon:!0,icon:function(e){return e.iconCls?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("span",{className:e.iconCls}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(_ant_design_icons__WEBPACK_IMPORTED_MODULE_24__["a"],{})},treeData:canSelectTree,checkedKeys:canSelectTreeCheckedkey,onCheck:function(e,t){syncSelected(e,t)},expandedKeys:canSelectTreeExpandKey,onExpand:function(e){return setCanSelectTreeExpandKey(e)},selectedKeys:canSelectTreeSelectedKey,onSelect:function(e){setCanSelectTreeSelectedKey(e),setDetailsSelectedKey(e)}})})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_col__WEBPACK_IMPORTED_MODULE_10__["a"],{lg:7,md:12,sm:12,xs:24,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_card__WEBPACK_IMPORTED_MODULE_6__["a"],{title:"\u5df2\u7ecf\u8bbe\u7f6e\u7684\u5206\u7ec4\u548c\u5b57\u6bb5",size:"small",extra:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsxs"])(antd_es_space__WEBPACK_IMPORTED_MODULE_4__["b"],{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("a",{href:"#",onClick:function(){var e={key:Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["I"])(),udftitle:"\u65b0\u589e\u7684\u5b57\u6bb5\u7ec4",xtype:"fieldset",parent:details[0]};e.title=getEditTitle(e),details[0].children.push(e),setDetails(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(details))},children:"\u65b0\u589e"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("a",{href:"#",onClick:function(){return deleteNode()},children:"\u5220\u9664"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("span",{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("a",{href:"#",onClick:function(){return saveFormScheme(details,formScheme)},children:"\u4fdd\u5b58"})]}),children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_tree__WEBPACK_IMPORTED_MODULE_8__["a"],{className:"selectedgroupandfield",style:{height:"calc(100vh - 149px)",overflow:"auto"},checkable:!1,showLine:!1,showIcon:!0,icon:function(e){return e.iconCls?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("span",{className:e.iconCls}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(_ant_design_icons__WEBPACK_IMPORTED_MODULE_24__["a"],{})},draggable:!0,treeData:details,expandedKeys:detailsExpandKey,onExpand:function(e){return setDetailsExpandKey(e)},selectedKeys:detailsSelectedKey,onSelect:function(e,t){setDetailsSelectedKey(e);var n=t.node,a=n.itemId;if(t.selected&&a){var i=a.substring(0,a.indexOf("|"));fetchSelectedModuleFields(hierarchyRef.current.getNodeFromItemId(i),e)}},onDrop:function(e){var t=e.node.key;e.dropToGap&&"root"!==t||e.node.itemId?Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["z"])(details,t,(function(t,n){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["z"])(details,e.dragNode.key,(function(e,a){e.parent.children.splice(a,1),Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(e,{parent:t.parent}),t.parent.children.splice(n+1,0,e)}))})):Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["z"])(details,t,(function(t){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["z"])(details,e.dragNode.key,(function(e,n){e.parent.children.splice(n,1),Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(e,{parent:t}),t.children||(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(t,{children:[]}),setDetailsExpandKey([].concat(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(detailsExpandKey),[t.key]))),t.children.unshift(e)}))})),setDetails(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(details))}})})})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_modal__WEBPACK_IMPORTED_MODULE_16__["a"],{width:820,title:"\u7f16\u8f91\u8868\u5355\u5b57\u6bb5\uff1a".concat(editRecord.udftitle||editRecord.text),visible:modalVisible,onCancel:function(){setModalVisible(!1)},okText:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsxs"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["Fragment"],{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(_ant_design_icons__WEBPACK_IMPORTED_MODULE_25__["a"],{})," \u4fdd\u5b58"]}),onOk:function onOk(){var _form$current$getValu=form.current.getValues(),othersetting=_form$current$getValu.othersetting;if(othersetting){var s=othersetting.startsWith("{")?"".concat(othersetting):"{".concat(othersetting,"}");try{eval("(".concat(s,")"))}catch(e){return void alert("\u9644\u52a0\u8bbe\u7f6e\u89e3\u6790\u9519\u8bef\uff1a".concat(s))}}setModalVisible(!1),Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(editRecord,form.current.getValues()),editRecord.itemId||Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(editRecord,{text:editRecord.udftitle}),Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(editRecord,{title:getEditTitle(editRecord)}),setDetails(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(details))},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(_DesignFormField__WEBPACK_IMPORTED_MODULE_28__["a"],{ref:form,moduleName:moduleName,init:Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},editRecord)})})]})}},"4aSi":function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var a=n("oBTY"),i=(n("DYRE"),n("zeV3")),r=(n("5Dmo"),n("3S7+")),c=(n("Q9mQ"),n("diRs")),o=(n("Awhp"),n("KrTs")),s=n("k1fw"),l=(n("MXD1"),n("CFYs")),d=n("tJVT"),u=n("q1tI"),p=n("79+z"),f=n("2Y5l"),m=n("t23M"),b=n("oOfT"),j=n.n(b),h=n("c6dC"),_=n("0owl"),O=n("+YFz"),x=n("9Cul"),g=n("ASZ0"),v=n("WTWM"),y=n("mqE+"),E=n("nKUr"),S=n("ZhIB"),C=f["a"].Divider,I=function(e){var t=e.moduleName,n=e.aggregateField,b=e.detailCount,I=e.maxColCount,D=void 0===I?4:I,k=e.formatPattern,w=void 0===k?"0,000":k,P=e.monetaryUnit,T=void 0===P?1:P,M=e.unitText,A=void 0===M?"":M,R=e.title,N=e.description,L=e.filters,B=e.filterSchemeid,K=e.items,F="jf001",U=Object(u["useState"])(D),W=Object(d["a"])(U,2),V=W[0],q=W[1],z=Object(u["useState"])(!0),G=Object(d["a"])(z,2),J=G[0],H=G[1],Y=Object(u["useState"])(!0),Z=Object(d["a"])(Y,2),Q=Z[0],$=Z[1],X=Object(u["useState"])(0),ee=Object(d["a"])(X,2),te=ee[0],ne=ee[1],ae=Object(u["useState"])([]),ie=Object(d["a"])(ae,2),re=ie[0],ce=ie[1],oe=Object(u["useState"])(0),se=Object(d["a"])(oe,2),le=se[0],de=se[1],ue=Object(u["useState"])(!1),pe=Object(d["a"])(ue,2),fe=pe[0],me=pe[1],be=Object(u["useState"])([]),je=Object(d["a"])(be,2),he=je[0],_e=je[1],Oe=Object(u["useState"])(Object(v["m"])({moduleName:t})),xe=Object(d["a"])(Oe,2),ge=xe[0],ve=xe[1],ye=Object(u["useContext"])(y["d"]),Ee=ye.parnetUserFilters,Se=function(e){return S(e/T).format(w)+Object(h["b"])(T,A)};Object(u["useEffect"])((function(){H(!0),Object(x["a"])({moduleName:t,fields:[n],groupfieldid:K[le].groupField,navigatefilters:L,userfilters:he.concat(Ee),isnumberordername:!0}).then((function(e){var t=K[le].detailCallback;t&&t(e);var n=0,a=K[le].orderby||"value",i=K[le].detailCount||b,r=e.map((function(e){var t={code:e.value,text:e.text,value:e[F],percent:0,icon:e.icon};return n+=t.value,t})).sort((function(e,t){return e[a]>t[a]?K[le].orderDesc?-1:1:e[a]<t[a]?K[le].orderDesc?1:-1:0}));if(r.length>i){var c=0,o={text:K[le].otherTitle||"\u5176\u4ed6",value:0,percent:0};r.filter((function(e,t){return t>=i-1})).forEach((function(e){o.value+=e.value,c+=1})),o.text+="(".concat(c,"\u4e2a)"),r.splice(i-1,r.length-i+1,o)}r.forEach((function(e){n&&Object(p["d"])(e,{percent:Math.round(1e4*e.value/n)/1e4})})),ce(r),ne(n),H(!1),$(!1)}))}),[le,he,Ee]);var Ce,Ie=function(e,t){return Object(E["jsx"])(l["a"],{type:"circle",percent:Math.round(1e3*e)/10,width:72,strokeLinecap:"butt",strokeColor:t,format:function(e){return Object(E["jsx"])("span",{style:{fontSize:"14px"},children:"".concat(e,"%")})}})},De=B?Object(E["jsx"])(c["a"],{visible:fe,onVisibleChange:function(e){me(e)},trigger:["click"],title:Object(E["jsx"])("span",{children:"\u8bbe\u7f6e\u7b5b\u9009\u6761\u4ef6"}),content:Object(E["jsx"])(g["c"],{visible:!0,moduleState:ge,dispatch:function(e){"modules/filterChanged"===e.type&&(ge.filters.userfilter=e.payload.userfilter,ve(Object(s["a"])({},ge)),_e(Object(g["b"])(e.payload.userfilter))),me(!1)},filterSchemeid:B,inPopover:!0}),children:he.length?Object(E["jsx"])(o["a"],{count:he.length,dot:!1,offset:[-6,6],style:{backgroundColor:"#108ee9"},children:Object(E["jsx"])(_["a"],{style:{paddingRight:"20px"},className:j.a.filtericon})}):Object(E["jsx"])(_["a"],{className:j.a.filtericon})}):null,ke=function(){return Object(E["jsx"])(f["a"],{className:j.a.staticcard,statistic:{title:Object(E["jsx"])("div",{children:[R,K.length>1?Object(E["jsx"])("span",{style:{marginLeft:"16px"},children:K.map((function(e,t){return Object(E["jsx"])(r["a"],{title:e.groupTitle,placement:"bottom",children:Object(E["jsx"])("span",{style:{cursor:"pointer"},onClick:function(){de(t)},children:Object(E["jsx"])(o["a"],{status:t===le?"success":"default",title:e.groupTitle})})},Object(p["I"])())}))},Object(p["I"])()):null,N||B?Object(E["jsxs"])(i["b"],{style:{float:"right"},children:[N?Object(E["jsx"])(r["a"],{title:N,trigger:["click"],children:Object(E["jsx"])(O["a"],{})}):null,De]},Object(p["I"])()):null]}),value:Se(te),description:Object(E["jsx"])("div",{children:[K[le].description]})}},Object(p["I"])())},we=function(e){return Object(E["jsx"])(f["a"],{loading:!Q&&J,className:j.a.staticcard,statistic:{title:[e.icon,e.text],value:Se(e.value)},chart:Ie(e.percent,e.text===K[le].otherTitle?"#F4664A":"default"),chartPlacement:"left"},Object(p["I"])())},Pe=function(){var e=[];if(re.length%2===1){e.push(Object(E["jsxs"])(f["a"].Group,{children:[ke(),Object(E["jsx"])(C,{type:"vertical"}),we(re[0])]},Object(p["I"])()));for(var t=0;t<(re.length-1)/2;t+=1)e.push(Object(E["jsxs"])(f["a"].Group,{children:[we(re[2*t+1]),Object(E["jsx"])(C,{type:"vertical"}),we(re[2*t+2])]},Object(p["I"])()))}else{e.push(Object(E["jsx"])(f["a"].Group,{children:ke()},Object(p["I"])()));for(var n=0;n<re.length/2;n+=1)e.push(Object(E["jsxs"])(f["a"].Group,{children:[we(re[2*n]),Object(E["jsx"])(C,{type:"vertical"}),we(re[2*n+1])]},Object(p["I"])()))}for(var a=e.length-1;a>0;a-=1)e.splice(a,0,Object(E["jsx"])(C,{type:"horizontal"}));return e},Te=function(){for(var e=[],t=[ke()].concat(Object(a["a"])(re.map((function(e){return we(e)})))),n=[],i=0;i<t.length;i+=1){var r=Math.trunc(i/D);n.length<r+1&&n.push([]),n[r].push(t[i])}for(var c=0;c<n.length;c+=1)e.push(Object(E["jsx"])(f["a"].Group,{children:n[c].map((function(e,t,n){return[e,t===n.length-1?null:Object(E["jsx"])(C,{type:"vertical"})]}))},Object(p["I"])()));for(var o=e.length-1;o>0;o-=1)e.splice(o,0,Object(E["jsx"])(C,{type:"horizontal"},Object(p["I"])()));return e};return Ce=2===V&&re.length>1?Object(E["jsx"])(f["a"].Group,{className:j.a.staticcardgroup,direction:"column",loading:Q&&J,children:Pe()}):1!==V&&re.length>=D?Object(E["jsx"])(f["a"].Group,{className:j.a.staticcardgroup,loading:Q&&J,direction:"column",children:Te()}):Object(E["jsxs"])(f["a"].Group,{className:j.a.staticcardgroup,loading:Q&&J,direction:1===V?"column":"row",children:[ke(),re.length?Object(E["jsx"])(C,{type:1===V?"horizontal":"vertical"}):null,re.map((function(e,t){return[we(e),t===re.length-1?null:Object(E["jsx"])(C,{type:1===V?"horizontal":"vertical"})]}))]}),Object(E["jsx"])(m["default"],{onResize:function(e){e.width<480?q(1):e.width<992?q(2):q(D)},children:Ce},"resize-observer")}},"4guX":function(e,t,n){"use strict";var a=n("6BL2"),i=n("hfUJ"),r=n("Nw6e"),c=n("EWYV"),o=n("3OWR"),s=n("3WF5"),l=["class","expression","delegateExpression"],d={"activiti:class":void 0,"activiti:expression":void 0,"activiti:delegateExpression":void 0,"activiti:resultVariable":void 0},u={"activiti:decisionRef":void 0,"activiti:decisionRefBinding":"latest","activiti:decisionRefVersion":void 0,"activiti:mapDecisionResult":"resultList","activiti:decisionRefTenantId":void 0},p={"activiti:type":void 0,"activiti:topic":void 0};e.exports=function(e,t,n,f){var m=[{value:"class",name:f("Java Class")},{value:"expression",name:f("Expression")},{value:"delegateExpression",name:f("Delegate Expression")}],b=[{value:"dmn",name:f("DMN")}],j=[{value:"external",name:f("External")}],h=[{value:"connector",name:f("Connector")}],_=[{value:"script",name:f("Script")}],O=n.getImplementationType,x=n.getBusinessObject,g=n.hasDmnSupport,v=n.hasExternalSupport,y=n.hasServiceTaskLikeSupport,E=n.hasScriptSupport,S=[],C=m.concat([]);return g&&(C=C.concat(b)),v&&(C=C.concat(j)),y&&(C=C.concat(h)),E&&(C=C.concat(_)),C.push({value:""}),S.push(a.selectBox({id:"implementation",label:f("Implementation"),selectOptions:C,modelProperty:"implType",get:function(e,t){return{implType:O(e)||""}},set:function(e,n,a){var f=x(e),m=O(e),b=n.implType,j=o({},d);if(-1!==l.indexOf(b)){var h="";-1!==l.indexOf(m)&&(h=f.get("activiti:"+m)),j["activiti:"+b]=h}g&&(j=o(j,u),"dmn"===b&&(j["activiti:decisionRef"]="")),v&&(j=o(j,p),"external"===b&&(j["activiti:type"]="external",j["activiti:topic"]="")),E&&(j["activiti:script"]=void 0,"script"===b&&(j["activiti:script"]=c.createElement("activiti:Script",{},f,t)));var _=[];if(_.push(i.updateBusinessObject(e,f,j)),y){var S=r.getExtensionElements(f,"activiti:Connector");if(_.push(s(S,(function(t){return r.removeEntry(f,e,t)}))),"connector"===b){var C=f.get("extensionElements");C||(C=c.createElement("bpmn:ExtensionElements",{values:[]},f,t),_.push(i.updateBusinessObject(e,f,{extensionElements:C})));var I=c.createElement("activiti:Connector",{},C,t);_.push(i.addAndRemoveElementsFromList(e,C,"values","extensionElements",[I],[]))}}return _}})),S}},"4kom":function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return E}));n("IzEo");var a=n("bx4M"),i=(n("ozfa"),n("MJZm")),r=(n("DYRE"),n("zeV3")),c=(n("+L6B"),n("2/Rp")),o=(n("2qtc"),n("kLXV")),s=(n("miYZ"),n("tsqr")),l=(n("g9YV"),n("wCAj")),d=n("tJVT"),u=(n("+BJd"),n("mr32")),p=(n("5Dmo"),n("3S7+")),f=n("q1tI"),m=n("ga3A"),b=n("79+z"),j=n("OOGe"),h=n("nKUr"),_=function(e,t){return Object(h["jsxs"])(p["a"],{title:t,children:[" ",e?"\u25cf":null]})},O=[{dataIndex:"query_",text:"\u53ef\u6d4f\u89c8"},{dataIndex:"new_",text:"\u53ef\u65b0\u5efa"},{dataIndex:"newnavigate_",text:"\u65b0\u5efa\u5411\u5bfc"},{dataIndex:"edit_",text:"\u53ef\u4fee\u6539"},{dataIndex:"directedit_",text:"\u76f4\u63a5\u4fee\u6539"},{dataIndex:"delete_",text:"\u53ef\u5220\u9664"},{dataIndex:"attachmentquery_",text:"\u6d4f\u89c8\u9644\u4ef6"},{dataIndex:"attachmentadd_",text:"\u65b0\u5efa\u9644\u4ef6"},{dataIndex:"attachmentedit_",text:"\u4fee\u6539\u9644\u4ef6"},{dataIndex:"attachmentdelete_",text:"\u5220\u9664\u9644\u4ef6"},{dataIndex:"approvestart_",text:"\u542f\u52a8\u6d41\u7a0b"},{dataIndex:"approvepause_",text:"\u6682\u505c\u6d41\u7a0b"},{dataIndex:"approvecancel_",text:"\u53d6\u6d88\u6d41\u7a0b"},{dataIndex:"approvechangeassign_",text:"\u66f4\u6362\u5ba1\u6279\u4eba"},{dataIndex:"auditingcancel_",text:"\u53d6\u6d88\u5ba1\u6838"},{dataIndex:"auditingchangeuser_",text:"\u66f4\u6362\u5ba1\u6838\u4eba"}],x={title:"\u7cfb\u7edf\u6a21\u5757\u6216\u5206\u7ec4",dataIndex:"text",render:function(e){return e}},g={title:"\u9644\u52a0\u6743\u9650",dataIndex:"additionfunction",render:function(e){var t=null;return Array.isArray(e)&&(t=e),"string"===typeof e&&(t=e.split(",")),t?t.map((function(e){return Object(h["jsx"])(u["a"],{children:e},e)})):null}},v=function(e){var t=e.userid,n=e.timestramp,a=Object(f["useState"])(!0),i=Object(d["a"])(a,2),r=i[0],c=i[1],o=Object(f["useState"])([]),s=Object(d["a"])(o,2),u=s[0],p=s[1],m=Object(f["useState"])([x]),v=Object(d["a"])(m,2),y=v[0],E=v[1],S=Object(f["useState"])([]),C=Object(d["a"])(S,2),I=C[0],D=C[1];return Object(f["useEffect"])((function(){c(!0),Object(j["e"])({userid:t}).then((function(e){var t={},n=1,a=function e(a){var i=a;delete i.checked;var r=i.type;if(i.key="".concat(n),n+=1,"homepagescheme"===r||"dataobject"===r){delete i.children;var c=i.attributes;Object.keys(c).forEach((function(e){i[e]=c[e],t[e]=!0}))}else i.children.forEach((function(t){e(t)}))},i=[];e.forEach((function(e){a(e),i.push(e.key)}));var r=[x];O.forEach((function(e){t[e.dataIndex]&&r.push({title:e.text.split("").map((function(e){return Object(h["jsxs"])(h["Fragment"],{children:[e,Object(h["jsx"])("br",{})]})})),dataIndex:e.dataIndex,render:function(t){return _(t,e.text)},align:"center"})})),r.push(g),r.forEach((function(e){Object(b["d"])(e,{key:e.dataIndex})})),E(r),p(e),D(i),c(!1)}))}),[n]),Object(h["jsx"])(l["a"],{scroll:{x:!0,y:"500px"},columns:y,dataSource:u,pagination:!1,expandedRowKeys:I,onExpandedRowsChange:function(e){return D(e)},loading:r,size:"small",bordered:!0})},y=function(e){var t=e.userid,n=e.msg,l=e.timestramp,u=Object(f["useState"])(!1),p=Object(d["a"])(u,2),b=p[0],_=p[1],O=Object(f["useState"])([]),x=Object(d["a"])(O,2),g=x[0],v=x[1],y=Object(f["useState"])([]),E=Object(d["a"])(y,2),S=E[0],C=E[1],I=Object(f["useState"])([]),D=Object(d["a"])(I,2),k=D[0],w=D[1],P=Object(f["useState"])(!0),T=Object(d["a"])(P,2),M=T[0],A=T[1];Object(f["useEffect"])((function(){Object(j["f"])({userid:t}).then((function(e){var t=1,n=[],a=function e(a){var i=a;i.title=i.text,i.objectid?i.key=i.objectid:(i.key="key-".concat(t),t+=1),i.checked&&n.push(i.key),i.children&&i.children.forEach((function(t){e(t)}))},i=[];e.forEach((function(e){a(e),i.push(e.key)})),_(!1),C(n),v(e),w(i)}))}),[l]);var R=function(){var e=[],t=function t(n){e.push(n.key),n.children&&n.children.forEach((function(e){return t(e)}))};g.forEach((function(e){return t(e)})),C(e),_(!0)},N=function(){var e=[],t=function t(n){var a=n.type;"query"!==a&&"attachmentquery"!==a||e.push(n.key),n.children&&n.children.forEach((function(e){return t(e)}))};g.forEach((function(e){return t(e)})),C(e),_(!0)},L=function(){C([]),_(!0)},B=function(){Object(j["h"])({userid:t,ids:S.filter((function(e){return!e.startsWith("key-")})).join(",")}).then((function(e){e.success?(s["default"].success("".concat(n,"\u4fdd\u5b58\u6210\u529f")),_(!1)):o["a"].warning({okText:"\u77e5\u9053\u4e86",title:"".concat(n,"\u4fdd\u5b58\u5931\u8d25"),content:Object(h["jsx"])("span",{dangerouslySetInnerHTML:{__html:e.msg}})})}))};return Object(h["jsxs"])("div",{style:{height:"100%",display:"flex",flexFlow:"column"},children:[Object(h["jsxs"])("div",{style:{display:"flex"},children:[Object(h["jsxs"])(r["b"],{style:{marginBottom:"16px"},children:[Object(h["jsx"])(c["a"],{onClick:R,children:"\u5168\u9009"}),Object(h["jsx"])(c["a"],{onClick:N,children:"\u4ec5\u6d4f\u89c8"}),Object(h["jsx"])(c["a"],{onClick:L,children:"\u91cd\u7f6e"})]}),Object(h["jsx"])("span",{style:{flex:1}}),Object(h["jsx"])(c["a"],{icon:Object(h["jsx"])(m["a"],{}),type:"primary",onClick:B,disabled:!b,children:"\u4fdd\u5b58"})]}),Object(h["jsx"])(a["a"],{style:{flex:1,overflowY:"auto"},children:Object(h["jsx"])(i["a"],{checkable:!0,treeData:g,expandedKeys:k,checkedKeys:S,onCheck:function(e){C(e),_(!0)},onExpand:function(e){w(e),A(!1)},autoExpandParent:M})})]})},E=function(e){var t=e.roleid,n=e.msg,l=e.display,u=e.timestramp,p=Object(f["useState"])(!1),b=Object(d["a"])(p,2),_=b[0],O=b[1],x=Object(f["useState"])([]),g=Object(d["a"])(x,2),v=g[0],y=g[1],E=Object(f["useState"])([]),S=Object(d["a"])(E,2),C=S[0],I=S[1],D=Object(f["useState"])([]),k=Object(d["a"])(D,2),w=k[0],P=k[1],T=Object(f["useState"])(!0),M=Object(d["a"])(T,2),A=M[0],R=M[1];Object(f["useEffect"])((function(){Object(j["d"])({roleid:t}).then((function(e){var t=1,n=[],a=function e(a){var i=a;i.title=i.text,i.objectid?i.key=i.objectid:(i.key="key-".concat(t),t+=1),i.checked&&n.push(i.key),i.children&&i.children.forEach((function(t){e(t)}))},i=[];e.forEach((function(e){a(e),i.push(e.key)})),O(!1),I(n),y(e),P(i)}))}),[u]);var N=function(){var e=[],t=function t(n){e.push(n.key),n.children&&n.children.forEach((function(e){return t(e)}))};v.forEach((function(e){return t(e)})),I(e),O(!0)},L=function(){var e=[],t=function t(n){var a=n.type;"query"!==a&&"attachmentquery"!==a||e.push(n.key),n.children&&n.children.forEach((function(e){return t(e)}))};v.forEach((function(e){return t(e)})),I(e),O(!0)},B=function(){I([]),O(!0)},K=function(){Object(j["g"])({roleid:t,ids:C.filter((function(e){return!e.startsWith("key-")})).join(",")}).then((function(e){e.success?(s["default"].success("".concat(n,"\u4fdd\u5b58\u6210\u529f")),O(!1)):o["a"].warning({okText:"\u77e5\u9053\u4e86",title:"".concat(n,"\u4fdd\u5b58\u5931\u8d25"),content:Object(h["jsx"])("span",{dangerouslySetInnerHTML:{__html:e.msg}})})}))};return Object(h["jsxs"])("div",{style:{height:"100%",display:"flex",flexFlow:"column"},children:[l?null:Object(h["jsxs"])("div",{style:{display:"flex"},children:[Object(h["jsxs"])(r["b"],{style:{marginBottom:"16px"},children:[Object(h["jsx"])(c["a"],{onClick:N,children:"\u5168\u9009"}),Object(h["jsx"])(c["a"],{onClick:L,children:"\u4ec5\u6d4f\u89c8"}),Object(h["jsx"])(c["a"],{onClick:B,children:"\u91cd\u7f6e"})]}),Object(h["jsx"])("span",{style:{flex:1}}),Object(h["jsx"])(c["a"],{icon:Object(h["jsx"])(m["a"],{}),type:"primary",onClick:K,disabled:!_,children:"\u4fdd\u5b58"})]}),Object(h["jsx"])(a["a"],{style:{flex:1,overflowY:"auto"},children:Object(h["jsx"])(i["a"],{checkable:!0,treeData:v,expandedKeys:w,checkedKeys:C,onCheck:function(e){I(e),O(!0)},onExpand:function(e){P(e),R(!1)},autoExpandParent:A})})]})}},"5X+9":function(e,t,n){"use strict";n.d(t,"a",(function(){return Q}));var a=n("k1fw"),i=n("q1tI"),r=n("TKgZ"),c=n("79+z"),o=n("wd/R"),s=n.n(o),l=n("4aSi"),d=(n("IzEo"),n("bx4M")),u=(n("5Dmo"),n("3S7+")),p=(n("g9YV"),n("wCAj")),f=(n("7Kak"),n("9yH6")),m=(n("Q9mQ"),n("diRs")),b=(n("Awhp"),n("KrTs")),j=n("tJVT"),h=n("c6dC"),_=n("LDJE"),O=n("sUHU"),x=n("Gl0f"),g=n("nCbN"),v=n("I+Rq"),y=n("xo9f"),E=n("f3GM"),S=n("OGz0"),C=n("9Cul"),I=n("Uj+7"),D=n.n(I),k=n("0owl"),w=n("UdsK"),P=n("lbgm"),T=n("QpHG"),M=n("x9r5"),A=n("VX7R"),R=n("+YFz"),N=n("WTWM"),L=n("ASZ0"),B=n("mqE+"),K=n("nKUr"),F=n("ZhIB"),U=function(e){var t=e.moduleName,n=e.type,r=e.title,o=e.filterSchemeid,s=e.filterPosition,l=e.description,I=e.datasetProperty,U=e.config,W=Object(i["useState"])([]),V=Object(j["a"])(W,2),q=V[0],z=V[1],G=Object(i["useState"])(Array.isArray(I)?I[0]:I),J=Object(j["a"])(G,2),H=J[0],Y=J[1],Z=Object(i["useState"])([]),Q=Object(j["a"])(Z,2),$=Q[0],X=Q[1],ee=Object(i["useState"])(!0),te=Object(j["a"])(ee,2),ne=te[0],ae=te[1],ie=Object(i["useState"])(Object(N["m"])({moduleName:t})),re=Object(j["a"])(ie,2),ce=re[0],oe=re[1],se=Object(i["useState"])(!1),le=Object(j["a"])(se,2),de=le[0],ue=le[1],pe=Object(i["useState"])([]),fe=Object(j["a"])(pe,2),me=fe[0],be=fe[1],je=Object(i["useState"])(null),he=Object(j["a"])(je,2),_e=he[0],Oe=he[1],xe=Object(i["useContext"])(B["d"]),ge=xe.parnetUserFilters;Object(i["useEffect"])((function(){ae(!0),Object(C["b"])(H,$.concat(ge)).then((function(e){ae(!1),z(e)}))}),[H,$,ge]),Object(i["useEffect"])((function(){var e=H.categoryName,t=void 0===e?"text":e,n=H.groupfieldid2,a=H.categoryName2,i=void 0===a?"text2":a,r=H.fields,c=[];c.push({dataIndex:t,title:t}),n&&c.push({dataIndex:i,title:i}),r.forEach((function(e){c.push({dataIndex:e.title,title:e.title,align:"right",render:function(t){return F(t).format(e.formatPattern||"0,0")}})})),be(c)}),[H]);var ve=Object(i["useMemo"])((function(){var e=Object(a["a"])({type:n},U);if(Array.isArray(U)){var t=I.findIndex((function(e){return e.menuText===H.menuText}));e=Object(a["a"])({type:n},U[Math.max(0,Math.min(U.length-1,t))])}if(Object(c["d"])(e,{data:"dualAxes"===e.type?[q,q]:q,appendPadding:12,loading:ne}),!["dualAxes","bidirectionalBar"].includes(e.type)){if(void 0===e.tooltip){var i=H.fields[0];e.tooltip={showTitle:!0,formatter:function(t){return{name:e.seriesField?t[e.seriesField]:i.title,value:F(t[i.title]/(i.monetaryUnit||1)).format(i.formatPattern||"0")+Object(h["b"])(i.monetaryUnit,i.unitText)}}}}void 0===e.label&&(e.label={formatter:function(e){var t=H.fields[0];return F(e[t.title]/(t.monetaryUnit||1)).format(t.formatPattern||"0")+Object(h["b"])(t.monetaryUnit)}})}if(e.slider&&e.sliderVisibleCount){var r=Math.abs(e.sliderVisibleCount),o={start:0,end:1};q.length>r?(e.sliderVisibleCount>0?Object(c["d"])(o,{end:Math.min(1,q.length>0?r/q.length:1)}):Object(c["d"])(o,{start:1-Math.min(1,q.length>0?r/q.length:1)}),Object(c["d"])(e.slider,o)):delete e.slider}return console.log(e),e}),[ne,q]),ye=null,Ee=function(){var e=Object(i["useState"])(!1),t=Object(j["a"])(e,2),n=t[0],r=t[1];return Object(K["jsx"])(m["a"],{visible:n,onVisibleChange:function(e){r(e)},trigger:["click"],title:"\u8bbe\u7f6e\u7b5b\u9009\u6761\u4ef6",content:Object(K["jsx"])(L["c"],{visible:!0,moduleState:ce,dispatch:function(e){"modules/filterChanged"===e.type&&(ce.filters.userfilter=e.payload.userfilter,oe(Object(a["a"])({},ce)),X(Object(L["b"])(e.payload.userfilter))),r(!1)},filterSchemeid:o,inPopover:!0}),children:$.length?Object(K["jsx"])(b["a"],{count:$.length,dot:!1,offset:[-6,6],style:{backgroundColor:"#108ee9"},children:Object(K["jsx"])(k["a"],{style:{paddingRight:"20px"},className:D.a.filtericon})}):Object(K["jsx"])(k["a"],{className:D.a.filtericon})})};o&&(ye="inline"===s?Object(K["jsx"])(L["a"],{moduleState:ce,dispatch:function(e){"modules/filterChanged"===e.type&&(ce.filters.userfilter=e.payload.userfilter,oe(Object(a["a"])({},ce)),X(Object(L["b"])(e.payload.userfilter)))},filterSchemeid:o}):Object(K["jsx"])(Ee,{}));var Se=[];if(Array.isArray(I)){var Ce=r.split("--");Se.push(Ce[0]),Se.push(Object(K["jsx"])(f["a"].Group,{value:H.menuText,size:"small",style:{margin:"0px 8px",fontWeight:400},onChange:function(e){Y(I.find((function(t){return t.menuText===e.target.value})))},children:I.map((function(e){return Object(K["jsx"])(f["a"].Button,{value:e.menuText,children:e.menuText},e.menuText)}))})),Ce.length>1&&Se.push(Ce[1])}else Se.push(r);var Ie=Object(K["jsx"])(p["a"],{size:"small",bordered:!0,columns:me,dataSource:q,style:{height:"100%"},pagination:!1,scroll:{y:"300px"},rowSelection:{}}),De=Object(i["useMemo"])((function(){var e=ve.type;return Oe(Object(K["jsx"])(w["a"],{})),"column"===e?Object(K["jsx"])(_["a"],Object(a["a"])({},ve),Object(c["I"])()):"bar"===e?Object(K["jsx"])(O["a"],Object(a["a"])({},ve),Object(c["I"])()):"line"===e?(Oe(Object(K["jsx"])(P["a"],{})),Object(K["jsx"])(x["a"],Object(a["a"])({},ve),Object(c["I"])())):"area"===e?(Oe(Object(K["jsx"])(T["a"],{})),Object(K["jsx"])(g["a"],Object(a["a"])({},ve),Object(c["I"])())):"pie"===e?(Oe(Object(K["jsx"])(M["a"],{})),Object(K["jsx"])(v["a"],Object(a["a"])({},ve),Object(c["I"])())):"rose"===e?(Oe(Object(K["jsx"])(M["a"],{})),Object(K["jsx"])(y["a"],Object(a["a"])({},ve),Object(c["I"])())):"dualAxes"===e?Object(K["jsx"])(E["a"],Object(a["a"])({},ve),Object(c["I"])()):"bidirectionalBar"===e?Object(K["jsx"])(S["a"],Object(a["a"])({},ve),Object(c["I"])()):null}),[ve]);return Object(K["jsx"])(d["a"],{className:"imagecard",title:Object(K["jsx"])("span",{children:[Object(K["jsx"])("span",{style:{marginRight:"4px",cursor:"pointer"},onClick:function(){ue((function(e){return!e}))},children:de?Object(K["jsx"])(A["a"],{}):_e}),Se,l?Object(K["jsx"])(u["a"],{title:l,trigger:["click"],children:Object(K["jsx"])(R["a"],{className:D.a.infoicon})},Object(c["I"])()):null]}),bordered:!1,extra:ye,children:Object(K["jsx"])(d["a"],{className:"spacecard",bordered:!1,children:de?Ie:De})})},W=n("nq7E"),V=n("m0EB"),q=(n("HEKs"),n("sy1d")),z=n("hzUk"),G=n("ZhIB"),J={basicColors:["#000000","#FAFAFB","#F4F5F7","#F3F4F6","#E7E8EA","#CECFD1","#A9AAAB","#616162","#FFFFFF","#F0F0F0","#E8E6E6","#D1D4DC","#BEC2CB","#282B33","#121826"],semanticColors:{red:"#FF4D4F",green:"#29A294"}},H=function(e){var t=e.meta||[],n={text:[],background:[]},a=[];t.forEach((function(e){e.field.startsWith("text")&&a.push(e.field)}));var i=function(e){var t=!0;return a.forEach((function(n){t=t&&e[n]})),t};return t.forEach((function(e){e.field.startsWith("jf")&&(n.text.push({field:e.field,mapping:function(e,t){return!e||t&&i(t)?{fill:"#0050b3"}:{fill:"#003a8c"}}}),n.background.push({field:e.field,mapping:function(e,t){return!e||t&&i(t)?{fill:"#ffffff"}:{fill:"#f8f9ff"}}}))})),n},Y=function(e){var t=e.disableMonetary,n=Object(i["useState"])(!0),r=Object(j["a"])(n,2),o=r[0],s=r[1],l=Object(i["useState"])(Object(h["a"])(t?"unit":"tenthousand")),u=Object(j["a"])(l,2),p=u[0],m=u[1],b=Object(i["useState"])(e.dataCfg||{}),_=Object(j["a"])(b,2),O=_[0],x=_[1],g=Object(a["a"])({},e.options);return Object(c["d"])(g,{dataCell:function(e){var n=e.spreadsheet.dataCfg,a=e.fieldValue,i=e.valueField,r=n.meta.filter((function(e){return e.field===i}))[0];if(null!==a&&void 0!==a){var o=a;t||r.disableMonetary||(o/=p.monetaryUnit),o=G(o).format(r.valueFormatter||"0,0.00"),t||r.disableMonetary||(o="".concat(o," ").concat(p.monetaryText)),Object(c["d"])(e,{fieldValue:o})}return new z["e"](e,null===e||void 0===e?void 0:e.spreadsheet)}}),g.conditions||Object(c["d"])(g,{conditions:H(e.dataCfg)}),Object(c["f"])(g,{height:480}),Object(i["useEffect"])((function(){setTimeout((function(){Object(q["default"])("".concat(q["API_HEAD"],"/platform/datamining/fetchpivotdata.do"),{method:"GET",params:{schemeid:e.dataminingSchememeid,addTotal:!!e.addTotal}}).then((function(e){s(!1),x(Object(a["a"])(Object(a["a"])({},O),{},{data:e}))}))}),100)}),[]),Object(K["jsx"])(d["a"],{title:e.title,extra:t?null:Object(K["jsx"])(f["a"].Group,{value:p.type,size:"small",onChange:function(e){m(Object(h["a"])(e.target.value))},children:Object(h["c"])().map((function(e){return Object(K["jsx"])(f["a"].Button,{value:e.value,children:e.text},e.value)}))}),children:Object(K["jsx"])(V["a"],{dataCfg:O,options:g,header:e.header,adaptive:{width:!0,height:!1},themeCfg:{palette:J},loading:o})})},Z=n("ZhIB");window.moment=s.a,window.numeral=Z,window.apply=c["d"],window.applyIf=c["f"];var Q=function(e){var t=e.widget,n={};return Object(c["g"])(n,t.datasetproperty),Object(c["g"])(n,t.relativesproperty),Object(c["g"])(n,t.subfieldsproperty),Object(c["g"])(n,t.chartproperty),Object(c["g"])(n,t.detailsproperty),Object(c["g"])(n,t.othersetting),Object(c["f"])(n,{moduleName:t.moduleName,title:t.title,description:t.description,filterSchemeid:t.filterSchemeid,dataminingSchememeid:t.dataminingSchememeid}),"staticCard"===t.widgettype?Object(K["jsx"])(r["a"],Object(a["a"])({},n)):"staticMasterDetailCard"===t.widgettype?Object(K["jsx"])(l["a"],Object(a["a"])({},n)):"antdCharts"===t.widgettype?Object(K["jsx"])(U,Object(a["a"])({},n)):"antv/s2"===t.widgettype?Object(K["jsx"])(Y,Object(a["a"])({},n)):"datamining"===t.widgettype?(n.dataminingProps||(n.dataminingProps={inContainer:!0,onlyTable:!1,disableOperate:!1,disableSchemeButton:!1}),Object(K["jsx"])("div",{className:"blocklist",children:Object(K["jsx"])(W["Datamining"],{moduleName:t.moduleName,defaultSchemeid:t.dataminingSchememeid,dataminingProps:n.dataminingProps})})):Object(K["jsx"])("span",{})}},"5Zmo":function(e,t,n){"use strict";n.d(t,"f",(function(){return k})),n.d(t,"g",(function(){return w})),n.d(t,"q",(function(){return P})),n.d(t,"l",(function(){return T})),n.d(t,"p",(function(){return M})),n.d(t,"h",(function(){return A})),n.d(t,"e",(function(){return R})),n.d(t,"k",(function(){return N})),n.d(t,"n",(function(){return L})),n.d(t,"o",(function(){return B})),n.d(t,"b",(function(){return K})),n.d(t,"c",(function(){return F})),n.d(t,"a",(function(){return U})),n.d(t,"d",(function(){return W})),n.d(t,"r",(function(){return V})),n.d(t,"j",(function(){return q})),n.d(t,"m",(function(){return z})),n.d(t,"i",(function(){return J}));n("+BJd");var a=n("mr32"),i=(n("DYRE"),n("zeV3")),r=(n("5Dmo"),n("3S7+")),c=(n("Q9mQ"),n("diRs")),o=(n("MXD1"),n("CFYs")),s=(n("pC0b"),n("GzdX")),l=n("k1fw"),d=(n("XCrF"),n("1GRj")),u=(n("tU7J"),n("wFql")),p=n("9kvl"),f=n("GYYy"),m=n("Bl1f"),b=n("Fvcw"),j=n("1x1c"),h=n("+YFz"),_=(n("Py4S"),n("bx7e")),O=n("79+z"),x=n("aYag"),g=n("WTWM"),v=n("cTrX"),y=n("3Mvv"),E=n.n(y),S=n("NB5u"),C=n("nKUr"),I=n("ZhIB"),D=u["a"].Text,k=function(e){return e?Object(C["jsxs"])("span",{style:{marginRight:"4px",whiteSpace:"nowrap"},children:[Object(C["jsx"])("span",{className:e})," "," ".concat(e)]}):null},w=function(e,t,n,a){var i={width:a.imageWidth||64,height:a.imageHeight||64,style:a.imageStyle||{}};return e?Object(C["jsx"])(d["a"],Object(l["a"])(Object(l["a"])({},i),{},{fallback:S["e"],src:"data:image/jpeg;base64,".concat(e)})):null},P=function(e,t){var n={whiteSpace:"nowrap",overflow:"hidden"};return t&&(t.width&&(n.width=t.width),t.ellipsis&&(n.textOverflow="ellipsis"),t.multiple&&(n.whiteSpace="normal"),t.style&&Object(O["d"])(n,t.style)),Object(C["jsx"])("div",{style:n,children:e})},T=function(e,t,n,a){var i=a.moduleInfo,r=a.dispatch,c=a.field,o=c&&c.ellipsis,s=c&&c.width,l=c&&c.multiple;return o&&s?Object(C["jsx"])(D,{style:{width:s},ellipsis:!!o&&{tooltip:e},strong:!0,children:Object(C["jsx"])(x["a"],{moduleInfo:i,dispatch:r,record:t,children:Object(C["jsx"])("a",{children:e})})}):Object(C["jsx"])("div",{style:{width:s,overflow:"hidden",whiteSpace:s&&l?"normal":"nowrap",fontWeight:600},children:Object(C["jsx"])(x["a"],{moduleInfo:i,dispatch:r,record:t,children:Object(C["jsx"])("a",{children:e})})})},M=function(e){return Object(C["jsx"])(s["a"],{allowHalf:!0,className:E.a.ratefield,disabled:!0,value:e})},A=function(e){return e?Object(C["jsx"])("span",{className:e>=0?E.a.numberpositive:E.a.numbernegative,children:e}):null},R=function(e,t){if(!e)return null;var n=Object(O["u"])(t);return Object(C["jsx"])("span",{className:e>0?E.a.numberpositive:0===e?E.a.nubmerzero:E.a.numbernegative,children:I(e).format(n)})},N=function(e,t,n,a,i){var r=a.monetary;if(e){if(1===r.monetaryUnit)return R(e,i);var c=e;return c/=r.monetaryUnit,Object(C["jsxs"])("span",{className:E.a.monetaryfield,children:[R(c,i)," ","columntitle"===a.monetaryPosition?"":a.monetary.monetaryColoredText]})}return null},L=function(e){var t=e||0;return t<0||t>1?"".concat(I(100*t).format("0,0")," %"):Object(C["jsx"])("div",{className:E.a.progresspercent,children:Object(C["jsx"])(o["a"],{percent:Number.parseFloat((100*t).toFixed(0)),size:"small"})})},B=function(e,t,n){var a=e||0,i=Math.floor(100*a).toFixed(0),r=n>1e6?"".concat(I(t/1e4).format("0,0.00"),"\u4e07 / ").concat(I(n/1e4).format("0,0.00"),"\u4e07"):"".concat(I(t).format("0,0.00")," / ").concat(I(n).format("0,0.00"));return Object(C["jsx"])(c["a"],{trigger:"click",title:"\u8ba1\u7b97\u516c\u5f0f",content:Object(C["jsx"])("span",{style:{whiteSpace:"nowrap"},children:r}),children:Object(C["jsx"])("div",{className:E.a.progresspercent,children:Object(C["jsx"])(o["a"],{percent:Number.parseFloat(i),size:"small"})})})},K=function(e,t,n,a){return Object(C["jsx"])("span",{className:E.a.datefield,children:e?e.substring(a?2:0,10):null})},F=function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(C["jsx"])("span",{className:E.a.datefield,children:e?e.substring(i?2:0,!1===a?19:16):null})},U=function(e){return Object(x["d"])(e)},W=function(e,t,n,a){var i=a.fieldname;return Object(C["jsxs"])("span",{className:E.a.directionaryfield,children:[" ",t["".concat(i,"_dictname")]]})},V=function(e,t,n,a){var i=a.moduleState,r=a.dispatch,c=i.moduleName,o=Object(g["x"])(c),s=o.primarykey,l=i.pinkey===t[s],d=t[S["f"]],u=d?d[s]:"",p=Array.isArray(t.children)&&t.children.length;return l&&!p&&r({type:"modules/pinkeyChanged",payload:{moduleName:c,pinkey:u}}),Object(C["jsxs"])("span",{style:{wordBreak:"keep-all",verticalAlign:"middle",display:"flex"},children:[Object(C["jsx"])("span",{style:{flex:1},children:e}),(u||i.dataSource.length>1)&&p?Object(C["jsx"])("a",{onClick:function(){r({type:"modules/pinkeyChanged",payload:{moduleName:c,pinkey:l?d&&!d[S["f"]]&&1===i.dataSource.length?"":u:t[s]}})},children:l?Object(C["jsx"])(f["a"],{}):Object(C["jsx"])(m["a"],{})}):null]})},q=function(e,t,n,a){var i=a.moduleInfo,r=a.keyField,c=a.dispatch,o=a.field,s=o&&o.ellipsis,l=o&&o.width,d=o&&o.multiple;return Object(C["jsxs"])("div",{className:E.a.manytoonefield,children:[s&&l?Object(C["jsx"])(D,{style:{width:l},ellipsis:!!s&&{tooltip:e},children:e}):Object(C["jsx"])("div",{style:{width:l,overflow:"hidden",whiteSpace:l&&d?"normal":"nowrap"},children:e}),Object(C["jsx"])("span",{className:E.a.manytoonefieldicon,children:Object(C["jsx"])(x["b"],{id:t[r],moduleInfo:i,dispatch:c})})]})},z=function(e,t,n,a){var o=a.fieldtitle,s=a.childModuleName,l=a.fieldahead,d=a.moduleInfo,u=a.dispatch,f=a.field,m=a.moduleState;if(f.dataIndex.startsWith("wavg."))return L(e);var O=Object(g["r"])(s,"onetomanytooltip"),x=function(e){var n={moduleName:d.modulename,fieldahead:l.split(".with.")[1],fieldName:d.primarykey,fieldtitle:d.title,operator:"=",fieldvalue:t[d.primarykey],text:t[d.namefield]},a=encodeURIComponent(JSON.stringify(n)),i=Object(_["getModuleUrlFormSysMenu"])(s);if(e){var r="".concat(i,"?parentFilter=").concat(a);window.open(r)}else p["c"].push({pathname:i,state:{parentFilter:a}})},y="";return e&&(y=f.dataIndex.startsWith("count")||f.fieldDefine.isOneToMany?"".concat(e," \u6761"):f.fieldDefine.ismonetary?N(e,t,n,m,f.fieldDefine.digitslen):"integer"===f.fieldDefine.fieldtype.toLowerCase()?A(e):R(e,f.fieldDefine.digitslen)),Object(C["jsxs"])("span",{className:E.a.onetomanyfield,children:[y,O&&d&&!f.disableOneToManyTooltip?Object(C["jsx"])(c["a"],{trigger:"click",title:Object(C["jsxs"])("span",{children:["".concat(t[d.namefield]," \u7684 ").concat(o),Object(C["jsxs"])(i["b"],{style:{float:"right",marginRight:"12px",marginLeft:"12px"},children:[Object(C["jsx"])(r["a"],{title:"\u8f6c\u5230".concat(o),children:Object(C["jsx"])("a",{onClick:function(){return x(!1)},children:Object(C["jsx"])(b["a"],{})})}),Object(C["jsx"])(r["a"],{title:"\u65b0\u9875\u9762\u4e2d\u6253\u5f00",children:Object(C["jsx"])("a",{onClick:function(){return x(!0)},children:Object(C["jsx"])(j["a"],{rotate:90})})})]})]}),content:Object(C["jsx"])(v["a"],{moduleName:d.modulename,fieldahead:l,childModuleName:s,parentid:t[d.primarykey],dispatch:u}),children:Object(C["jsx"])(D,{type:"secondary",className:E.a.onetomanyfieldinfo,children:Object(C["jsx"])(h["a"],{})})}):null]})},G=5,J=function(e,t,n,r){var o=r.moduleName,s=r.dispatch;if(!e)return null;var l=Object(g["x"])(o),d=function(e){return Object(C["jsx"])(x["b"],{id:e.key,moduleInfo:l,dispatch:s,children:Object(C["jsx"])(a["a"],{color:"default",className:E.a.manytomanytag,closable:!1,onClose:function(){},children:e.title})})},u=e,p=[];return u.length<=G?p=u.map((function(e){return d(e)})):(p=u.filter((function(e,t){return t<G})).map((function(e){return d(e)})),p.push(Object(C["jsx"])(c["a"],{title:"\u5176\u4ed6".concat(u.length-G,"\u4e2a").concat(l.title),trigger:"click",content:Object(C["jsx"])("div",{style:{maxWidth:"600px"},children:Object(C["jsx"])(i["b"],{size:[0,5],wrap:!0,children:u.filter((function(e,t){return t>=G})).map((function(e){return d(e)}))})}),children:Object(C["jsx"])(a["a"],{style:{cursor:"pointer"},color:"processing",children:"\u66f4\u591a..."})}))),Object(C["jsx"])("div",{children:p})}},"6X6R":function(e,t,n){"use strict";var a=n("XpWC"),i=n("gkHi"),r=n("ihRo"),c=r.escapeHTML,o=r.triggerClickEvent,s=n("4guX"),l=n("DtuC"),d=n("aonj"),u=n("Z97y"),p=n("WP2f"),f=n("6BL2"),m=n("5QZp").query,b=n("5QZp").closest,j=n("5QZp").classes;function h(e){return a.getImplementationType(e)}function _(e){return a.getServiceTaskLikeBusinessObject(e)}function O(e){return a.isDmnCapable(e)}function x(e){return a.isExternalCapable(e)}function g(e){return a.isServiceTaskLike(e)}function v(e,t){var n=b(e,".bpp-properties-panel");return m('a[data-tab-target="'+t+'"]',n)}e.exports=function(e,t,n,a){if(g(_(t))){var r=O(t),b=x(_(t));e.entries=e.entries.concat(s(t,n,{getBusinessObject:_,getImplementationType:h,hasDmnSupport:r,hasExternalSupport:b,hasServiceTaskLikeSupport:!0},a)),e.entries=e.entries.concat(l(t,n,{getBusinessObject:_,getImplementationType:h},a)),e.entries=e.entries.concat(p(t,n,{getBusinessObject:_,getImplementationType:h,hideResultVariable:function(e,t){return"expression"!==h(e)}},a)),b&&(e.entries=e.entries.concat(d(t,n,{getBusinessObject:_,getImplementationType:h},a))),r&&(e.entries=e.entries.concat(u(t,n,{getCallableType:h},a)));var y=function(e){return"connector"===h(e)};e.entries.push(f.link({id:"configureConnectorLink",label:a("Configure Connector"),handleClick:function(e,t,n){var a=v(t,"connector");return a&&o(a),!1},showLink:function(e,t){var n=m("a",t);if(n.textContent="",j(n).remove("bpp-error-message"),y(e)){var r=i.getConnector(e).get("connectorId");return r?n.textContent=a("Configure Connector"):(n.innerHTML='<span class="bpp-icon-warning"></span> '+c(a("Must configure Connector")),j(n).add("bpp-error-message")),!0}return!1}}))}}},"6ZR6":function(e,t,n){"use strict";n.d(t,"b",(function(){return ee}));n("+BJd");var a=n("mr32"),i=n("k1fw"),r=(n("miYZ"),n("tsqr")),c=n("fWQN"),o=n("mtLc"),s=n("yKVA"),l=n("879j"),d=n("q1tI"),u=n.n(d),p=n("9kvl"),f=n("bt/X"),m=n.n(f),b=n("wd/R"),j=n.n(b),h=n("Oj1a"),_=n("bx7e"),O=(n("Awhp"),n("KrTs")),x=n("tJVT"),g=(n("Znn+"),n("ZTPi")),v=n("8/dN"),y=n("yUgw"),E=n("TSYQ"),S=n.n(E),C=(n("P2fV"),n("NJEC")),I=(n("Mwp2"),n("VXEj")),D=(n("Telt"),n("Tckk")),k=n("jrin"),w=(n("T2oS"),n("W9HT")),P=n("KFNm"),T=n("zueq"),M=n("jN4g"),A=n("JyMx"),R=n("nPcI"),N=n("4i/N"),L=n("zCwN"),B=n.n(L),K=n("WTWM"),F=n("+7or"),U=n("nKUr"),W=function(e){var t=e.data,n=void 0===t?[]:t,a=e.unreadCount,i=e.onClick,r=e.onClear,c=e.onRemove,o=e.onRefresh,s=e.refreshText,l=e.showRefresh,u=e.title,p=e.onViewMore,f=e.emptyText,m=e.showClear,b=e.clearText,j=e.viewMoreText,h=e.showViewMore,_=void 0!==h&&h,O=e.loading,g=Object(d["useState"])(!1),v=Object(x["a"])(g,2),y=v[0],E=v[1];return n&&0!==n.length?Object(U["jsxs"])(w["a"],{spinning:O,children:[Object(U["jsx"])(I["b"],{className:B.a.list,dataSource:n,renderItem:function(e,t){var n=S()(B.a.item,Object(k["a"])({},B.a.read,e.read)),a=e.avatar;"warning"===a&&(a=Object(U["jsx"])(P["a"],{style:{color:"#fadb14"}})),"info"===a&&(a=Object(U["jsx"])(T["a"],{style:{color:"#1890ff"}})),"error"===a&&(a=Object(U["jsx"])(M["a"],{style:{color:"#f5222d"}})),"question"===a&&(a=Object(U["jsx"])(A["a"],{style:{color:"#fa8c16"}})),["audit","approve"].includes(e.action)?a=Object(U["jsx"])(R["a"],{style:{color:"#1890ff"}}):"claim"===e.action&&(a=Object(U["jsx"])(T["a"],{style:{color:"#1890ff"}}));var r=null;return a&&(r="string"===typeof a?Object(U["jsx"])(D["a"],{className:B.a.avatar,src:a}):Object(U["jsx"])("span",{className:B.a.iconElement,children:a})),Object(U["jsx"])(I["b"].Item,{id:"notice-".concat(e.key),className:n,onClick:function(){return i&&i(e)},children:Object(U["jsx"])(I["b"].Item.Meta,{className:B.a.meta,avatar:r,title:Object(U["jsxs"])("div",{className:B.a.title,children:[e.record&&e.record.attachmentcount?Object(U["jsx"])(F["a"],{record:e.record,moduleInfo:Object(K["x"])("FNotification")}):null,e.title,Object(U["jsx"])("div",{className:B.a.extra,children:e.extra}),e.read?Object(U["jsx"])(N["a"],{style:{float:"right"},onClick:function(){c(e)}}):null]}),description:Object(U["jsxs"])("div",{children:[Object(U["jsx"])("div",{className:B.a.description,children:e.description}),Object(U["jsx"])("div",{className:B.a.datetime,children:e.datetime})]})})},e.key||t)}}),Object(U["jsxs"])("div",{className:B.a.bottomBar,children:[m?Object(U["jsx"])(C["a"],{visible:y,onVisibleChange:function(e){e?a?E(e):r():E(e)},title:"\u8fd8\u6709 ".concat(a," \u6761").concat(u,"\u672a\u67e5\u770b\uff0c\u786e\u5b9a\u8981\u6e05\u9664\u5417\uff1f"),onConfirm:r,children:Object(U["jsxs"])("div",{children:[b," ",u]})}):null,l?Object(U["jsxs"])("div",{onClick:o,children:[s," ",u]}):null,_?Object(U["jsx"])("div",{onClick:function(e){p&&p(e)},children:j}):null]})]}):Object(U["jsx"])(w["a"],{spinning:O,children:Object(U["jsxs"])("div",{className:B.a.notFound,children:[Object(U["jsx"])("img",{src:"/empty_image.svg",alt:"not found"}),Object(U["jsx"])("div",{children:f})]})})},V=W,q=n("uZXw"),z=n("od3r"),G=n.n(z),J=g["a"].TabPane,H=function(e){var t=function(){var t=e.children,n=e.loading,a=e.onClear,r=e.onTabChange,c=e.onItemClick,o=e.onRemove,s=e.onViewMore,l=e.clearText,d=e.viewMoreText,p=e.onRefresh,f=e.refreshText,m=e.unreadCount;if(!t)return null;var b=[];return u.a.Children.forEach(t,(function(e){if(e){var t=e.props,r=t.list,u=t.title,j=t.count,h=t.tabKey,_=t.showClear,O=t.showViewMore,x=t.hidden;if(!x){var g=0;r&&r.length&&r.forEach((function(e){g+=e.count||0}));var v=j||0===j?j:g,y=v>0?"".concat(u," (").concat(v,")"):u;b.push(Object(U["jsx"])(J,{tab:y,children:Object(U["jsx"])(V,Object(i["a"])({loading:n,onRefresh:p,refreshText:f,clearText:l,viewMoreText:d,data:r,unreadCount:m,onClear:function(){return a&&a(u,h)},onClick:function(t){return c&&c(t,e.props)},onRemove:function(t){return o&&o(t,e.props)},onViewMore:function(t){return s&&s(e.props,t)},showClear:_,showViewMore:O},e.props))},h))}}})),Object(U["jsx"])(U["Fragment"],{children:Object(U["jsx"])(g["a"],{className:G.a.tabs,onChange:r,centered:!0,children:b})})},n=e.className,a=e.count,r=e.bell,c=Object(y["a"])(!1,{value:e.popupVisible,onChange:e.onPopupVisibleChange}),o=Object(x["a"])(c,2),s=o[0],l=o[1],d=S()(n,G.a.noticeButton),p=t(),f=r||Object(U["jsx"])(v["a"],{className:G.a.icon}),m=Object(U["jsx"])("span",{className:S()(d,{opened:s}),children:Object(U["jsx"])(O["a"],{count:a,style:{boxShadow:"none"},className:G.a.badge,children:f})});return p?Object(U["jsx"])(q["a"],{placement:"bottomRight",overlay:p,overlayClassName:G.a.popover,trigger:["click"],visible:s,onVisibleChange:l,children:m}):m};H.defaultProps={emptyImage:"/empty_image.svg"},H.Tab=V;var Y=H,Z=n("bsDN"),Q=n.n(Z),$=n("79+z"),X=null,ee=function(){X({type:"global/fetchNotices"})},te=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(c["a"])(this,n);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s)),e.changeReadState=function(t){var n=t.id,a=e.props.dispatch;a&&a({type:"global/changeNoticeReadState",payload:n})},e.handleNoticeClear=function(t,n){var a=e.props.dispatch;r["default"].info("\u6e05\u7a7a\u4e86".concat(" ",t)),a&&a({type:"global/clearNotices",payload:n})},e.handleNoticeRemove=function(t){var n=t.id,a=e.props.dispatch;r["default"].warn("\u5df2\u5220\u9664\u4e00\u6761\u901a\u77e5\uff01"),Object($["c"])("#notice-".concat(t.key),"backOutRight").then((function(){a&&a({type:"global/removeNotice",payload:n})}))},e.handlerNoticeReloadAll=function(){var t=e.props.dispatch;r["default"].info("\u5df2\u7ecf\u52a0\u8f7d\u4e86\u6240\u6709\u901a\u77e5\uff01"),t&&t({type:"global/reloadAllNotice"})},e.getNoticeData=function(){var t=e.props.notices,n=void 0===t?[]:t;if(!n||0===n.length||!Array.isArray(n))return{};var r=n.map((function(e){var t=Object(i["a"])({},e);if(t.datetime&&(t.datetime=j()(e.datetime).fromNow()),t.id&&(t.key=t.id),t.extra&&t.status){var n={todo:"",processing:"blue",urgent:"red",doing:"gold"}[t.status];t.extra=Object(U["jsx"])(a["a"],{color:n,style:{marginRight:0},children:t.extra})}return t}));return m()(r,"type")},e.getUnreadData=function(e){var t={};return Object.keys(e).forEach((function(n){var a=e[n];t[n]||(t[n]=0),Array.isArray(a)&&(t[n]=a.filter((function(e){return!e.read})).length)})),t},e.pushApprove=function(t){var n=t.moduleName,a=void 0===n?"":n,i={moduleName:a,fieldahead:null,fieldName:"actAssignee",fieldtitle:"\u6211\u53ef\u4ee5\u5ba1\u6279\u7684\u8bb0\u5f55",operator:"=",fieldvalue:h["a"].userid||"",text:""};e.pushModuleWithParentFilter(a,i)},e.pushClaim=function(t){var n=t.moduleName,a=void 0===n?"":n,i={moduleName:a,fieldahead:null,fieldName:"actCandidate",fieldtitle:"\u6211\u53ef\u4ee5\u63a5\u53d7\u4efb\u52a1\u7684\u8bb0\u5f55",operator:"like",fieldvalue:h["a"].userid||"",text:""};e.pushModuleWithParentFilter(a,i)},e.pushAudit=function(t){var n=t.moduleName,a=void 0===n?"":n,i={moduleName:a,fieldahead:null,fieldName:"canAuditingUserid",fieldtitle:"\u6211\u53ef\u4ee5\u5ba1\u6838\u7684\u8bb0\u5f55",operator:"=",fieldvalue:h["a"].userid||"",text:""};e.pushModuleWithParentFilter(a,i)},e.pushQuestionModule=function(t){var n=t.moduleName,a=void 0===n?"":n,i={moduleName:a,fieldahead:null,fieldName:t.filterFieldName||"",fieldtitle:t.filterText||"",operator:t.filterFieldOperator||"",fieldvalue:t.filterFieldValue||"",text:""};e.pushModuleWithParentFilter(a,i)},e.pushModuleWithParentFilter=function(e,t){var n=encodeURIComponent(JSON.stringify(t)),a=Object(_["getModuleUrlFormSysMenu"])(e);p["c"].push({pathname:a,state:{parentFilter:n}})},e}return Object(o["a"])(n,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e&&(X=e,e({type:"global/fetchNotices"}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,a=t.fetchingNotices,i=t.onNoticeVisibleChange,c=this.getNoticeData(),o=this.getUnreadData(c);return Object(U["jsxs"])(Y,{className:Q.a.action,count:n&&n.notifyCount,unreadCount:n&&n.unreadCount,onItemClick:function(t){var n=t;"event"===n.type?"approve"===n.action?e.pushApprove(n):"claim"===n.action?e.pushClaim(n):"audit"===n.action?e.pushAudit(n):e.pushQuestionModule(n):"notification"===n.type&&(n.read||(e.changeReadState(n),r["default"].info("\u5df2\u9605\u8bfb\u4e00\u6761\u901a\u77e5\uff01")))},loading:a,clearText:"\u6e05\u7a7a",refreshText:"\u5237\u65b0",onRefresh:ee,viewMoreText:"\u67e5\u770b\u66f4\u591a",onClear:this.handleNoticeClear,onRemove:function(t){return e.handleNoticeRemove(t)},onPopupVisibleChange:i,onViewMore:function(t){"notification"===t.tabKey?e.handlerNoticeReloadAll():p["c"].push({pathname:"/dashboard/workplace"})},clearClose:!0,children:[Object(U["jsx"])(Y.Tab,{tabKey:"event",title:"\u5f85\u529e",emptyText:"\u60a8\u5df2\u5b8c\u6210\u6240\u6709\u5f85\u529e",list:c.event,showRefresh:!0,showViewMore:!0}),Object(U["jsx"])(Y.Tab,{tabKey:"notification",count:o.notification,list:c.notification,title:"\u901a\u77e5",emptyText:Object(U["jsxs"])("span",{children:[Object(U["jsx"])("div",{children:"\u60a8\u5df2\u67e5\u770b\u6240\u6709\u901a\u77e5"}),Object(U["jsx"])("div",{style:{cursor:"pointer",marginTop:"12px"},onClick:this.handlerNoticeReloadAll,children:"\u91cd\u65b0\u67e5\u770b\u901a\u77e5"})]}),showClear:!0,showRefresh:!1,showViewMore:!0}),Object(U["jsx"])(Y.Tab,{tabKey:"message",list:c.message,title:"\u6d88\u606f",emptyText:"\u60a8\u5df2\u8bfb\u5b8c\u6240\u6709\u6d88\u606f"})]})}}]),n}(d["Component"]);t["a"]=Object(p["a"])((function(e){var t,n=e.user,a=e.global,i=e.loading,r=e.systemInfo;return{currentUser:n.currentUser,collapsed:a.collapsed,disableActiviti:null===(t=r.systemInfo)||void 0===t?void 0:t.systeminfo.disableActiviti,fetchingMoreNotices:i.effects["global/fetchMoreNotices"],fetchingNotices:i.effects["global/fetchNotices"],notices:a.notices}}))(te)},"6siw":function(e,t,n){"use strict";var a=n("emvA").getBusinessObject,i=n("emvA").is,r=n("6BL2"),c=n("EWYV"),o=n("Nw6e"),s=n("hfUJ"),l=n("ihRo"),d=n("3OWR"),u=n("bNQv"),p=n("J2m7");function f(){return l.nextId("Property_")}function m(e){var t=e&&b(e);return t&&t.values?t.values:[]}function b(e){return h(e)?j(e):e.properties}function j(e){return p(e.values,(function(e){return i(e,"activiti:Properties")}))}function h(e){return i(e,"bpmn:ExtensionElements")}e.exports=function(e,t,n,p){var j=n.getParent,_=n.modelProperties,O=n.createParent,x=a(e);if(i(e,"bpmn:Participant")&&(x=x.get("processRef")),x)return d(n,{addLabel:p("Add Property"),getElements:function(e,t){var n=j(e,t,x);return m(n)},addElement:function(e,n){var a=[],i=j(e,n,x);if(!i&&"function"===typeof O){var r=O(e,x);i=r.parent,a.push(r.cmd)}var o=b(i);o||(o=c.createElement("activiti:Properties",{},i,t),h(i)?a.push(s.addAndRemoveElementsFromList(e,i,"values","extensionElements",[o],[])):a.push(s.updateBusinessObject(e,i,{properties:o})));var l={};u(_,(function(e){l[e]=void 0})),_.indexOf("id")>=0&&(l.id=f());var d=c.createElement("activiti:Property",l,o,t);return a.push(s.addElementsTolist(e,o,"values",[d])),a},updateElement:function(e,t,n,a){var i=j(e,n,x),r=m(i)[a];return u(_,(function(e){t[e]=t[e]||void 0})),s.updateBusinessObject(e,r,t)},validate:function(e,t,n,a){if(_.indexOf("id")>=0){var i=j(e,n,x),r=m(i),c=r[a];if(c){var o=l.isIdValid(c,t.id,p);if(o)return{id:o}}}},removeElement:function(e,t,n){var a=[],r=j(e,t,x),c=b(r),l=m(r),d=l[n];return a.push(s.removeElementsFromList(e,c,"values",null,[d])),1===l.length&&(h(r)?u(r.values,(function(t){i(t,"activiti:Properties")&&a.push(o.removeEntry(x,e,t))})):a.push(s.updateBusinessObject(e,r,{properties:void 0}))),a}}),r.table(n)}},"7GAv":function(e,t,n){"use strict";var a=n("6BL2"),i=n("hfUJ");e.exports=function(e,t,n,r){var c=n.getBusinessObject,o=a.textField({id:"jobPriority",label:r("Job Priority"),modelProperty:"jobPriority",get:function(e,t){var n=c(e);return{jobPriority:n.get("activiti:jobPriority")}},set:function(e,t){var n=c(e);return i.updateBusinessObject(e,n,{"activiti:jobPriority":t.jobPriority||void 0})}});return[o]}},"7K0u":function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return x}));n("bbsP");var a=n("/wGt"),i=(n("+L6B"),n("2/Rp")),r=n("tJVT"),c=(n("g9YV"),n("wCAj")),o=(n("5Dmo"),n("3S7+")),s=n("q1tI"),l=n("5Zmo"),d=n("79+z"),u=n("/MfK"),p=n("yU8i"),f=n("nq7E"),m=n("Ydf/"),b=n("eVqf"),j=n("nKUr"),h={expand:"\u8bb0\u5f55\u5c55\u5f00",expandallleaf:"\u5c55\u5f00\u6240\u6709\u672b\u7ea7\u8bb0\u5f55",edittext:"\u4fee\u6539\u8bb0\u5f55\u63cf\u8ff0",deleterow:"\u5220\u9664\u8bb0\u5f55",deletechildren:"\u5220\u9664\u8bb0\u5f55\u5b50\u8282\u70b9",combinerows:"\u5408\u5e76\u8bb0\u5f55",combinerowsadd:"\u5408\u5e76\u540e\u52a0\u5165\u539f\u8bb0\u5f55",combineotherrows:"\u5408\u5e76\u5176\u4ed6\u8bb0\u5f55",combineotherrowsadd:"\u5408\u5e76\u540e\u52a0\u5165\u5176\u4ed6\u8bb0\u5f55",expandwithnavigaterecords:"\u8bb0\u5f55\u5c55\u5f00\u5bfc\u822a\u503c"},_=function(e,t,n){t({type:m["q"],payload:{deleteFormIndex:n}})},O=function(){var e=Object(s["useContext"])(f["DataminingContext"]),t=e.state,n=e.dispatch,a=[{width:36,title:Object(j["jsx"])("span",{style:{whiteSpace:"nowrap"},children:"\u5e8f\u53f7"}),dataIndex:"recno",align:"right",render:l["h"]},{title:"\u64cd\u4f5c\u7c7b\u578b",dataIndex:"type",render:function(e){return Object(l["q"])(h[e],void 0)}},{title:"\u5c55\u5f00\u7684\u5b57\u6bb5",dataIndex:"title",render:l["q"]},{title:"\u9009\u4e2d\u64cd\u4f5c\u7684\u5217",dataIndex:"rowcontext"},{width:36,align:"center",render:function(e,a,i){return Object(j["jsx"])(o["a"],{title:"\u4ece\u5f53\u524d\u884c\u5f00\u59cb\u5220\u9664\u6240\u6709\u540e\u7eed\u64cd\u4f5c",children:Object(j["jsx"])(u["a"],{onClick:function(){_(t,n,i)}})})}}],i=[],r=t.schemeState,p=r.rowGroup,O=r.dataSource;p.forEach((function(e){var t=Object(b["m"])(O,e.conditionpath,m["db"])||{};i.push({key:Object(d["I"])(),type:e.type+(e.addSelectedChildrens?"add":""),title:e.title,rowcontext:e.conditiontext||e.text||t.text})}));var x=1;return i.forEach((function(e){var t=e;t.recno=x,x+=1})),Object(j["jsx"])(c["a"],{className:"rowactionhistorytable",columns:a,dataSource:i,bordered:!0,size:"small",pagination:!1})},x=function(){var e=Object(s["useState"])(!1),t=Object(r["a"])(e,2),n=t[0],c=t[1];return Object(j["jsxs"])(j["Fragment"],{children:[Object(j["jsxs"])(i["a"],{type:n?"link":"text",size:"small",onClick:function(){c((function(e){return!e}))},children:[Object(j["jsx"])(p["a"],{})," \u64cd\u4f5c\u8bb0\u5f55"]}),Object(j["jsx"])(a["a"],{title:"\u6570\u636e\u5206\u6790\u65b9\u6848\u7684\u6570\u636e\u64cd\u4f5c\u8bb0\u5f55",visible:n,width:"50%",onClose:function(){c(!1)},children:Object(j["jsx"])(O,{})})]})}},"7Xn+":function(e,t,n){"use strict";var a=n("P7XM"),i=n("Nqmu"),r=n("f6n2"),c=n("XpWC"),o=n("emvA").is,s=n("ljet"),l=n("EBkB"),d=n("crii"),u=n("voYy"),p=n("MGoy"),f=n("JlmR"),m=n("8yiC"),b=n("6X6R"),j=n("I+bp"),h=n("c/0K"),_=n("tLJN"),O=n("mQcC"),x=n("xyw5"),g=n("EPLS"),v=n("yOq+"),y=n("IWsf"),E=n("E6KD"),S=n("ozh/"),C=n("nSXk"),I=n("JA94"),D=n("2daX"),k=n("WMCO"),w=n("wLFW"),P=n("zjkv"),T=n("nwhw"),M=n("gjfE"),A=n("LNYG"),R=n("+fzd"),N=n("I6fb"),L=n("BxCs"),B=n("17x+"),K=n("pDOZ"),F=n("x14f"),U=n("QlNo"),W=n("380F"),V=n("as5y"),q=n("emvA").getBusinessObject,z=n("vtLx"),G=n("XpWC"),J=function(e){var t=q(e);if(o(e,"bpmn:Process")||o(e,"bpmn:Participant")&&t.get("processRef"))return!0;var n=c.getServiceTaskLikeBusinessObject(e),a="external"===c.getImplementationType(n);return!!c.isExternalCapable(n)&&a},H=function(e){var t=q(e);if(o(e,"bpmn:Process")||o(e,"bpmn:Participant")&&t.get("processRef"))return!0;var n=q(e);return!(!r.isAsyncBefore(n)&&!r.isAsyncAfter(n))||!!o(e,"bpmn:Event")&&!!z.getTimerEventDefinition(e)},Y=function(e,t){return o(e,"activiti:InputParameter")?t("Input Parameter"):o(e,"activiti:OutputParameter")?t("Output Parameter"):""},Z=function(e,t){return o(e,"activiti:ExecutionListener")?t("Execution Listener"):o(e,"activiti:TaskListener")?t("Task Listener"):""},Q="This maps to the process definition key.",$="This maps to the task definition key.";function X(e,t,n,a,i,r){e=e.labelTarget||e;var c,y,S={id:"general",label:r("General"),entries:[]};o(e,"bpmn:Process")&&(c={description:Q}),o(e,"bpmn:UserTask")&&(c={description:$}),o(e,"bpmn:Participant")&&(y={processIdDescription:Q}),p(S,e,r,c),f(S,e,n,t,r),s(S,e,r,y),C(S,e,r),m(S,e,r),w(S,e,i,r);var I=P(e,i,n,r),D={id:"details",label:r("Details"),entries:[]};b(D,e,n,r),j(D,e,r),g(D,e,n,r),d(D,e,r),_(D,e,n,r),l(D,e,n,a,r),v(D,e,n,r),x(D,e,n,r),E(D,e,r);var k={id:"timeGroup",label:r("\u65f6\u95f4\u76f8\u5173\u7ec4\u4ef6"),entries:[]},T={id:"multiInstance",label:r("Multi Instance"),entries:[]};O(T,e,n,r);var M={id:"async",label:r("Asynchronous Continuations"),entries:[]};h(M,e,n,r);var A={id:"jobConfiguration",label:r("Job Configuration"),entries:[],enabled:H};B(A,e,n,r);var R={id:"externalTaskConfiguration",label:r("External Task Configuration"),entries:[],enabled:J};W(R,e,n,r);var N={id:"candidateStarterConfiguration",label:r("Candidate Starter Configuration"),entries:[]};F(N,e,n,r);var L={id:"historyConfiguration",label:r("History Configuration"),entries:[]};K(L,e,n,r);var V={id:"tasklist",label:r("Tasklist Configuration"),entries:[]};U(V,e,n,r);var q={id:"documentation",label:r("Documentation"),entries:[]};u(q,e,n,r);var z=[];return z.push(S),I.forEach((function(e){z.push(e)})),z.push(D),z.push(R),z.push(k),z.push(T),z.push(M),z.push(A),z.push(N),z.push(L),z.push(V),z.push(q),z}function ee(e,t,n,a){var i={id:"variables",label:a("Variables"),entries:[]};return S(i,e,t,a),[i]}function te(e,t,n,a){var i={id:"forms",label:a("Forms"),entries:[]};return y(i,e,t,a),[i]}function ne(e,t,n,a){var i={id:"listeners",label:a("Listeners"),entries:[]},r=I(i,e,t,a),c={id:"listener-details",entries:[],enabled:function(e,t){return r.getSelectedListener(e,t)},label:function(e,t){var n=r.getSelectedListener(e,t);return Z(n,a)}};D(c,e,t,r,a);var o={id:"listener-fields",label:a("Field Injection"),entries:[],enabled:function(e,t){return r.getSelectedListener(e,t)}};return k(o,e,t,r,a),[i,c,o]}function ae(e,t,n,a){var i={id:"input-output",label:a("Parameters"),entries:[]},r=T(i,e,t,a),c={id:"input-output-parameter",entries:[],enabled:function(e,t){return r.getSelectedParameter(e,t)},label:function(e,t){var n=r.getSelectedParameter(e,t);return Y(n,a)}};return M(c,e,t,r,a),[i,c]}function ie(e,t,n,a){var i={id:"connector-details",label:a("Details"),entries:[]};A(i,e,t,a);var r={id:"connector-input-output",label:a("Input/Output"),entries:[]},c=R(r,e,t,a),o={id:"connector-input-output-parameter",entries:[],enabled:function(e,t){return c.getSelectedParameter(e,t)},label:function(e,t){var n=c.getSelectedParameter(e,t);return Y(n,a)}};return N(o,e,t,c,a),[i,r,o]}function re(e,t,n,a){var i={id:"field-injections-properties",label:a("Field Injections"),entries:[]};return V(i,e,t,a),[i]}function ce(e,t,n,a){var i={id:"extensionElements-properties",label:a("Properties"),entries:[]};return L(i,e,t,a),[i]}function oe(e,t,n,a,r,c){i.call(this,e),this.getTabs=function(e){var i={id:"general",label:c("General"),groups:X(e,t,n,a,r,c)},s={id:"variables",label:c("Variables"),groups:ee(e,n,a,c)},l={id:"forms",label:c("Forms"),groups:te(e,n,a,c)},d={id:"listeners",label:c("Listeners"),groups:ne(e,n,a,c),enabled:function(e){return!z.getLinkEventDefinition(e)||!o(e,"bpmn:IntermediateThrowEvent")&&z.getLinkEventDefinition(e)}},u={id:"input-output",label:c("Input/Output"),groups:ae(e,n,a,c)},p={id:"connector",label:c("Connector"),groups:ie(e,n,a,c),enabled:function(e){var t=G.getServiceTaskLikeBusinessObject(e);return t&&"connector"===G.getImplementationType(t)}},f={id:"field-injections",label:c("Field Injections"),groups:re(e,n,a,c)},m={id:"extensionElements",label:c("Extensions"),groups:ce(e,n,a,c)};return[i,s,p,l,d,u,f,m]}}oe.$inject=["eventBus","canvas","bpmnFactory","elementRegistry","elementTemplates","translate"],a(oe,i),e.exports=oe},"7fyL":function(e,t,n){e.exports={footer:"footer___2U-Su",icon:"icon___1hf-W",homepage:"homepage___3s9ED",serviceman:"serviceman___5uohe",copyright:"copyright___2otww"}},"8gAX":function(e,t,n){"use strict";var a=n("emvA").getBusinessObject,i=n("ihRo").escapeHTML,r=n("6BL2"),c=n("EWYV"),o=n("hfUJ"),s=n("5QZp").classes;function l(e,t){var n=u(e);return n&&n.get(t)}function d(e){return e&&e.get("body")}function u(e){var t=a(e);return t.loopCharacteristics}function p(e){return l(e,"loopCardinality")}function f(e){var t=p(e);return d(t)}function m(e){return l(e,"completionCondition")}function b(e){var t=m(e);return d(t)}function j(e){return l(e,"activiti:collection")}function h(e){return l(e,"activiti:elementVariable")}function _(e,t,n){return c.createElement("bpmn:FormalExpression",{body:t},e,n)}function O(e,t,n,a){var i=u(e),r={};if(!n)return r[t]=void 0,o.updateBusinessObject(e,i,r);var c=i.get(t);return c?o.updateBusinessObject(e,c,{body:n}):(r[t]=_(i,n,a),o.updateBusinessObject(e,i,r))}e.exports=function(e,t,n){var a=[];return a.push({id:"multiInstance-errorMessage",html:'<div data-show="isValid"><span class="bpp-icon-warning"></span> '+i(n("Must provide either loop cardinality or collection"))+"</div>",isValid:function(e,t,n,a){var i=u(e),r=!0;if(i){var c=f(e),o=j(e);r=!c&&!o}return s(t).toggle("bpp-hidden",!r),s(n).toggle("bpp-error-message",r),r}}),a.push(r.textField({id:"multiInstance-loopCardinality",label:n("Loop Cardinality"),modelProperty:"loopCardinality",get:function(e,t){return{loopCardinality:f(e)}},set:function(e,n){return O(e,"loopCardinality",n.loopCardinality,t)}})),a.push(r.textField({id:"multiInstance-collection",label:n("Collection"),modelProperty:"collection",get:function(e,t){return{collection:j(e)}},set:function(e,t){var n=u(e);return o.updateBusinessObject(e,n,{"activiti:collection":t.collection||void 0})},validate:function(e,t,n){var a=j(e),i=h(e);if(!a&&i)return{collection:"Must provide a value"}}})),a.push(r.textField({id:"multiInstance-elementVariable",label:n("Element Variable"),modelProperty:"elementVariable",get:function(e,t){return{elementVariable:h(e)}},set:function(e,t){var n=u(e);return o.updateBusinessObject(e,n,{"activiti:elementVariable":t.elementVariable||void 0})}})),a.push(r.textField({id:"multiInstance-completionCondition",label:n("Completion Condition"),modelProperty:"completionCondition",get:function(e){return{completionCondition:b(e)}},set:function(e,n){return O(e,"completionCondition",n.completionCondition,t)}})),a}},"93hP":function(e,t,n){"use strict";n.d(t,"f",(function(){return T})),n.d(t,"c",(function(){return M})),n.d(t,"d",(function(){return A})),n.d(t,"a",(function(){return B})),n.d(t,"e",(function(){return K})),n.d(t,"b",(function(){return U}));n("IzEo");var a=n("bx4M"),i=(n("FJo9"),n("L41K")),r=(n("DYRE"),n("zeV3")),c=(n("5Dmo"),n("3S7+")),o=(n("P2fV"),n("NJEC")),s=(n("Q9mQ"),n("diRs")),l=(n("+L6B"),n("2/Rp")),d=(n("y8nQ"),n("Vl3Y")),u=(n("nRaC"),n("5RzL")),p=(n("2qtc"),n("kLXV")),f=(n("miYZ"),n("tsqr")),m=n("tJVT"),b=n("k1fw"),j=n("q1tI"),h=n("9kvl"),_=n("Ue1A"),O=n("Lyp1"),x=n("k5nK"),g=n("+YFz"),v=n("bRQS"),y=n("79+z"),E=n("sy1d"),S=n("WTWM"),C=n("6ZR6"),I=n("nKUr"),D="auditingDate",k="auditingName",w="auditingUserid",P="auditingRemark",T=function(e){return!!e[D]},M=function(e){return!T(e)&&e[w]===h["b"].userid},A=function(e,t){var n;return T(e)&&(e[w]===h["b"].userid||(null===(n=t.userLimit.auditing)||void 0===n?void 0:n.cancel))},R=function(e,t,n){var a=e.moduleName,i=e.formState;n({type:"modules/formStateChanged",payload:{moduleName:a,formState:Object(b["a"])(Object(b["a"])({},i),{},{visible:!0,formType:"audit",currRecord:t})}})},N=function(e){return T(e)?"actionblue x-fa fa-check fa-fw":M(e)?"approveaction x-fa fa-pencil fa-fw":"actionyellow x-fa fa-exclamation-triangle fa-fw"},L=function(e){var t=e.moduleState,n=e.record,a=e.className,i=e.dispatch,r="\u672a\u5ba1\u6838",c=t.moduleName,o=Object(S["x"])(c),b=n[o.primarykey],h=Object(j["useState"])(!1),_=Object(m["a"])(h,2),O=_[0],x=_[1],g=function(){return R(t,n,i)},v=function(){var e=function e(t){return t.map((function(t){return{value:t.objectid||"",label:t.text,key:t.objectid,isLeaf:t.leaf,disabled:!t.leaf,children:t.children&&t.children.length>0?e(t.children):void 0}}))},t=e(Object(S["v"])("FUser"));return Object(I["jsxs"])(d["a"],{autoComplete:"off",onFinish:function(e){Object(E["default"])("".concat(E["API_HEAD"],"/platform/audit/setaudituser.do"),{params:{moduleName:c,usercode:e.user,recordId:b}}).then((function(e){e.success?(f["default"].warn("\u5df2\u5c06\u8bb0\u5f55\u7684\u5ba1\u6838\u4eba\u5458\u8bbe\u7f6e\u4e3a\uff1a".concat(e.msg)),x(!1),i({type:"modules/refreshRecord",payload:{moduleName:c,recordId:b}}),Object(C["b"])()):p["a"].warning({okText:"\u77e5\u9053\u4e86",title:"\u8bbe\u7f6e\u5ba1\u6838\u4eba\u5458\u5931\u8d25",content:Object(I["jsx"])("span",{dangerouslySetInnerHTML:{__html:e.msg}})})}))},children:[Object(I["jsx"])(d["a"].Item,{label:"\u5ba1\u6838\u7528\u6237",name:"user",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u5ba1\u6279\u7528\u6237"}],children:Object(I["jsx"])(u["a"],{style:{width:"300px"},treeDefaultExpandAll:!0,allowClear:!0,showSearch:!0,treeNodeFilterProp:"label",treeData:t,getPopupContainer:function(e){return e.parentNode}})}),Object(I["jsx"])(d["a"].Item,{wrapperCol:{offset:10,span:16},children:Object(I["jsx"])(l["a"],{type:"primary",htmlType:"submit",children:"\u786e\u5b9a\u66f4\u6362"})})]})},y=function(){var e;return null!==(e=o.userLimit.auditing)&&void 0!==e&&e.changeuser?Object(I["jsx"])("span",{children:Object(I["jsx"])(s["a"],{visible:O,onVisibleChange:function(e){return x(e)},trigger:"click",title:"\u66f4\u6362\u5ba1\u6838\u4eba\u5458",content:v(),children:Object(I["jsx"])(l["a"],{type:"link",children:"\u66f4\u6362\u5ba1\u6838\u4eba\u5458"})})}):null};return M(n)?Object(I["jsx"])(s["a"],{content:Object(I["jsxs"])("span",{children:[r,Object(I["jsx"])("span",{style:{marginLeft:"12px"},children:Object(I["jsx"])("a",{onClick:g,children:"\u73b0\u5728\u5ba1\u6838"})}),y()]}),children:Object(I["jsx"])("a",{onClick:g,children:Object(I["jsx"])("span",{className:a})})}):Object(I["jsx"])(s["a"],{placement:"rightTop",trigger:"hover",content:Object(I["jsxs"])(I["Fragment"],{children:[r,Object(I["jsx"])("span",{style:{marginLeft:"12px"},children:"\u6b63\u5728\u7b49\u5f85 ".concat(n[k]," \u8fdb\u884c\u5ba1\u6838")}),y()]}),children:Object(I["jsx"])("span",{className:a})})},B=function(e,t,n){var a=t.modulename;Object(E["default"])("".concat(E["API_HEAD"],"/platform/audit/doaudit.do"),{params:{moduleName:a,recordId:e[t.primarykey]}}).then((function(i){i.success?(f["default"].success("".concat(e[t.namefield]," \u5df2\u5ba1\u6838\uff01")),Object(y["E"])(i.resultInfo),n({type:"modules/refreshRecord",payload:{moduleName:a,recordId:e[t.primarykey]}}),Object(C["b"])()):p["a"].warning({okText:"\u77e5\u9053\u4e86",title:"".concat(e[t.namefield]," \u5ba1\u6838\u5931\u8d25"),content:Object(I["jsx"])("span",{dangerouslySetInnerHTML:{__html:i.msg}})})}))},K=function(e,t,n){var a=t.modulename;Object(E["default"])("".concat(E["API_HEAD"],"/platform/audit/cancel.do"),{params:{moduleName:a,recordId:e[t.primarykey]}}).then((function(i){i.success?(f["default"].success("".concat(e[t.namefield]," \u7684\u5ba1\u6838\u5df2\u53d6\u6d88\uff01")),Object(y["E"])(i.resultInfo),n({type:"modules/refreshRecord",payload:{moduleName:a,recordId:e[t.primarykey]}}),Object(C["b"])()):p["a"].warning({okText:"\u77e5\u9053\u4e86",title:"".concat(e[t.namefield]," \u53d6\u6d88\u5ba1\u6838\u5931\u8d25"),content:Object(I["jsx"])("span",{dangerouslySetInnerHTML:{__html:i.msg}})})}))},F=30,U=function(e){var t=e.record,n=e.moduleState,l=e.dispatch;if(!t)return null;var d=n.moduleName,u=Object(S["x"])(d),p=N(t),f="\u300e".concat(t[u.namefield],"\u300f");if(!T(t))return Object(I["jsx"])(L,{moduleState:n,record:t,className:p,dispatch:l});var m=t[P],b=Object(I["jsx"])(a["a"],{title:Object(I["jsxs"])(I["Fragment"],{children:[Object(I["jsx"])(_["a"],{})," \u5ba1\u6838\u4fe1\u606f"]}),extra:Object(I["jsx"])(r["b"],{children:A(t,u)?Object(I["jsx"])(c["a"],{title:"\u53d6\u6d88\u5ba1\u6838",placement:"bottom",children:Object(I["jsx"])(o["a"],{icon:Object(I["jsx"])(O["a"],{style:{color:"red"}}),title:"\u8981\u53d6\u6d88 ".concat(f," \u7684\u5ba1\u6838\u5417?"),onConfirm:function(){return K(t,u,l)},children:Object(I["jsx"])(x["a"],{})})}):null}),children:Object(I["jsx"])(i["a"],{size:"small",direction:"vertical",children:Object(I["jsx"])(i["a"].Step,{title:"\u5df2\u5ba1\u6838",icon:Object(I["jsx"])(_["a"],{}),status:"finish",description:Object(I["jsxs"])("span",{children:["".concat(t[k],"(").concat(Object(y["j"])(t[D]),")"),Object(I["jsx"])("br",{}),m&&m.length>F?Object(I["jsx"])(c["a"],{title:m,children:Object(I["jsxs"])("span",{children:[Object(I["jsx"])(g["a"],{})," \u5ba1\u6838\u610f\u89c1"]})}):m]})},"AuditFinished")},"audit_info")});return Object(I["jsx"])(s["a"],{placement:"rightTop",trigger:"hover",content:b,children:Object(I["jsx"])(v["a"],{style:{margin:"0px 2px"}})})}},"9Cul":function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var a=n("oBTY"),i=n("k1fw"),r=n("jrin"),c=n("sy1d"),o=n("79+z"),s=n("mPcc"),l=new Map,d=function e(t){var n=Object(o["F"])(t),a=Object(o["b"])(Object.keys(n).sort((function(e,t){return e>t?1:-1})).map((function(e){return"".concat(e,":").concat(n[e])})).join(","));return l.has(a)?"loading"===l.get(a)?new Promise((function(n){setTimeout((function(){return n(e(t))}),100)})):new Promise((function(e){e(JSON.parse(l.get(a)))})):(l.set(a,"loading"),Object(c["default"])("".concat(c["API_HEAD"],"/platform/datamining/fetchdata.do"),{method:"POST",data:Object(s["serialize"])(n)}).then((function(e){return"loading"===l.get(a)&&l.set(a,JSON.stringify(e)),new Promise((function(e){e(JSON.parse(l.get(a)))}))})))},u=function(e,t){var n=e.moduleName,c=e.fields,s=e.filters,l=e.groupfieldid,u=e.categoryName,p=void 0===u?"text":u,f=e.groupfieldid2,m=e.categoryName2,b=void 0===m?"text2":m,j=e.orderby,h=e.orderDesc,_=e.maxCount,O=e.restHead,x=e.otherTitle,g=e.callback;return d({moduleName:n,fields:c.map((function(e){return e.fieldname})),navigatefilters:s,userfilters:t,groupfieldid:l,groupfieldid2:f,isnumberordername:!0}).then((function(e){g&&g(e);var t=e.map((function(e){var t=Object(r["a"])({code:e.value,rowid:e.rowid},p,e.text);if(f){var n=e.children.map((function(e){var n=Object(i["a"])(Object(i["a"])({},t),{},Object(r["a"])({code2:e.value,rowid:e.rowid},b,e.text));return c.forEach((function(t,a){var i="jf".concat("".concat(a+1).padStart(3,"0"));Object(o["d"])(n,Object(r["a"])({},t.title,e[i]))})),n}));return n}return c.forEach((function(n,a){var i="jf".concat("".concat(a+1).padStart(3,"0"));Object(o["d"])(t,Object(r["a"])({},n.title,e[i]))})),t}));if(f){var n=[];t.forEach((function(e){return n.push.apply(n,Object(a["a"])(e))})),t.splice.apply(t,[0,t.length].concat(n))}if(j&&t.sort((function(e,t){return e[j]>t[j]?h?-1:1:e[j]<t[j]?h?1:-1:0})),_&&t.length>_)if(x){var s=0,l=Object(r["a"])({},p,x);c.forEach((function(e){Object(o["d"])(l,Object(r["a"])({},e.title,0))})),O&&t.reverse(),t.filter((function(e,t){return t>=_-1})).forEach((function(e){c.forEach((function(t){l[t.title]+=e[t.title]})),s+=1})),l[p]+="(".concat(s,"\u4e2a)"),t.splice(_-1,t.length-_+1,l),O&&t.reverse()}else O?t.splice(0,t.length-_):t.splice(_,t.length-_);return new Promise((function(e){e(t)}))}))}},BEnz:function(e,t,n){e.exports={manytooneinfo:"manytooneinfo___2IfFN"}},BxCs:function(e,t,n){"use strict";var a=n("6siw"),i=n("EWYV"),r=n("hfUJ");e.exports=function(e,t,n,c){var o=a(t,n,{id:"properties",modelProperties:["name","value"],labels:[c("Name"),c("Value")],getParent:function(e,t,n){return n.extensionElements},createParent:function(e,t){var a=i.createElement("bpmn:ExtensionElements",{values:[]},t,n),c=r.updateBusinessObject(e,t,{extensionElements:a});return{cmd:c,parent:a}}},c);o&&e.entries.push(o)}},CSqm:function(e,t,n){"use strict";n.d(t,"c",(function(){return A})),n.d(t,"e",(function(){return R})),n.d(t,"a",(function(){return N})),n.d(t,"h",(function(){return L})),n.d(t,"g",(function(){return F})),n.d(t,"f",(function(){return U})),n.d(t,"d",(function(){return W})),n.d(t,"b",(function(){return V}));var a=n("k1fw"),i=(n("miYZ"),n("tsqr")),r=n("tJVT"),c=n("9og8"),o=n("oBTY"),s=(n("tU7J"),n("wFql")),l=n("WmNS"),d=n.n(l),u=n("q1tI"),p=n.n(u),f=n("WG1l"),m=n.n(f),b=n("aMZS"),j=n("CLjb"),h=n("RJb5"),_=n("sy1d"),O=n("mPcc"),x=n("0ioL"),g=n("ma4E"),v=n("79+z"),y=n("Ydf/"),E=n("rMKe"),S=n.n(E),C=n("nq7E"),I=n("MGWp"),D=n("eVqf"),k=n("nKUr"),w=s["a"].Text,P="property_",T=function(e){var t=[];return e.forEach((function(e){if(Array.isArray(e.children))t.push(e);else{var n,a=t.find((function(t){return t[P]===e[P]&&!t.children}));if(a)null===(n=a.value)||void 0===n||n.push.apply(n,Object(o["a"])(e.value)),a.text+=",".concat(e.text);else t.push(e)}})),t},M=function(e){var t=function t(n){var a=[];return n.forEach((function(n){var i={property_:n.groupfieldid||null,title:n.grouptitle||null,operator:"in",value:[n.value||null],text:n.text||null};if(e.checkedKeys.find((function(e){return e===n[y["db"]]})))a.push(i);else if(n[y["R"]]){var r=t(n[y["R"]]);r.length&&(i.children=r,a.push(i))}})),T(a)};return{groupFieldid:e.navigateGroup.fieldid,title:e.navigateGroup.title,operator:"in",children:t(e.dataSource[0][y["R"]])}},A=function(e){var t=[];return e.forEach((function(e){e.checkedKeys.length&&!e.checkedKeys.find((function(e){return"root"===e}))&&t.push(M(e))})),t},R=function e(t){var n=[];return t.forEach((function(t){var a=t.text;t.children&&(a+="(".concat(e(t.children),")")),n.push(a)})),n.join(",")},N=function(){var e=Object(c["a"])(d.a.mark((function e(t,n,a){var i,r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.moduleName,r=t.filters,e.abrupt("return",Object(_["default"])("".concat(_["API_HEAD"],"/platform/datamining/fetchdata.do"),{method:"POST",params:{moduleName_:i},data:Object(O["serialize"])({moduleName:i,groupfieldid:n.navigateGroup.fieldid,title:n.navigateGroup.title,conditions:JSON.stringify([]),fields:JSON.stringify(["count.*"]),parentconditions:JSON.stringify(a),sqlparamstr:r.sqlparam?JSON.stringify(Object(g["p"])(r.sqlparam)):null})}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),L=function(e,t,n){var a=n.checkedKeys,i=n.dataSource,r=[],c=function(e){return!!a.find((function(t){return t===e}))},o=function(e){for(var t=Object(D["d"])(e),n=0;n<t.length;n+=1)if(c(t[n]))return!0;return!1},s=function e(t){t.forEach((function(t){c(t[y["db"]])||(t.children&&o(t)?e(t.children):r.push(t[y["db"]]))}))};0===a.length?r.push("root"):c("root")||s(i[0].children),Object(I["b"])(e,t,n.navigateGroup.fieldid,r,y["X"])},B=function(e){var t=e.state,n=e.navigateGroup,a=e.expandRecord,i=e.groupFieldid,r=e.groupTitle,c=e.dispatch,s=t.moduleName,l=t.filters,d=[],u=a;do{d.push("".concat(u.groupfieldid,"=").concat(u.value)),u=u.parentNode}while(u);Object(_["default"])("".concat(_["API_HEAD"],"/platform/datamining/fetchdata.do"),{method:"POST",params:{moduleName_:s},data:Object(O["serialize"])({moduleName:s,groupfieldid:i,title:r,conditions:JSON.stringify([]),fields:JSON.stringify(["count.*"]),parentconditions:JSON.stringify(d),sqlparamstr:l.sqlparam?JSON.stringify(Object(g["p"])(l.sqlparam)):null})}).then((function(e){var t,s=[],l=V(e,n,a,i,r,s);a.children?(t=a.children).push.apply(t,Object(o["a"])(l)):Object(v["d"])(a,{children:l}),c({type:y["H"],payload:{navigateGroup:n,key:a.key,expandedKeys:s}})}))},K=function(e){var t=e.navigateGroup,n=e.node,a=e.search,i=Object(u["useContext"])(C["DataminingContext"]),c=i.state,o=i.dispatch,s=p.a.useRef(),l=Object(b["a"])({accept:y["T"],canDrop:function(){return!0},drop:function(e){B({state:c,dispatch:o,navigateGroup:t,expandRecord:n,groupFieldid:e.fieldid,groupTitle:e.title})},collect:function(e){return{isOver:!!e.isOver(),canDrop:e.canDrop()}}}),d=Object(r["a"])(l,2),f=d[0].isOver,_=d[1],O=Object(j["a"])({item:{type:y["U"],navigateGroup:t,node:n},options:{dropEffect:"copy"},canDrag:!0,collect:function(e){return{isDragging:e.isDragging()}}}),x=Object(r["a"])(O,3),g=x[1],v=x[2];return _(g(s)),Object(k["jsxs"])(k["Fragment"],{children:[Object(k["jsx"])(h["a"],{connect:v,src:"/images/dragrecords.png"}),Object(k["jsxs"])("div",{ref:s,className:f?S.a.dragover:"",children:[a?Object(k["jsx"])(m.a,{highlightClassName:"ant-btn-link",searchWords:[a],textToHighlight:n.text}):n.text||"\u672a\u5b9a\u4e49",Object(k["jsxs"])(w,{type:"secondary",children:["(",n[y["Y"]],")"]})]})]})},F=function(e,t,n){var a=e.navigateGroup;if(e.search!==t){var r=function e(n){n.forEach((function(n){var i=n,r=x["a"].match(i.text,t);i[y["W"]]=r?r[0]:y["Z"],i[y["hb"]]=Object(k["jsx"])(K,{node:i,navigateGroup:a,search:r?i[y["fb"]].substring(r[0],r[1]+1):""}),i.children&&e(i.children)})),n.sort((function(e,t){return e[y["W"]]-t[y["W"]]}))};if(t){if(1===t.length)return void i["default"].warn("\u8bf7\u8f93\u5165\u4e8c\u4e2a\u4ee5\u4e0a\u7684\u6587\u5b57\u6216\u5b57\u7b26\u518d\u8fdb\u884c\u67e5\u8be2");r(e.dataSource[0].children),n({type:y["F"],payload:{fieldid:a.fieldid,dataSource:Object(o["a"])(e.dataSource),search:t}})}else{var c=function e(t){t.forEach((function(t){var n=t;n[y["W"]]!==y["Z"]&&(n[y["hb"]]=Object(k["jsx"])(K,{node:n,navigateGroup:a,search:""})),delete n[y["W"]],n.children&&e(n.children)}))};c(e.dataSource[0].children),n({type:y["F"],payload:{fieldid:a.fieldid,dataSource:Object(o["a"])(e.dataSource),search:t}})}}},U=function(e,t,n,a){var i=e.dataSource,r=e.navigateGroup,c="asc"===a?1:-1,s="count"===n?y["Y"]:n,l=function e(t){t.sort((function(e,t){return e[s]>t[s]?c:e[s]<t[s]?-c:0})),t.forEach((function(t){return t.children&&e(t.children)}))};l(i[0].children),t({type:y["F"],payload:{fieldid:r.fieldid,dataSource:Object(o["a"])(e.dataSource)}})},W=function(e,t,n){var a=e.navigates,i=a.find((function(e){return e.navigateGroup.fieldid===t}));if(i){if(i.selectedKeys.find((function(e){return e===n[y["db"]]}))){var r=[];return i.selectedKeys.forEach((function(e){var t=Object(D["m"])(i.dataSource,e,y["db"]);t&&r.push(t)})),r}return[n]}return[]},V=function e(t,n,i,r,c,s){var l=[],d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=Object(a["a"])(Object(a["a"])({},e),{},{key:e.rowid});return e[y["V"]]?i.groupfieldid=r.replace("-all","-".concat(e[y["V"]])):i.groupfieldid=r,i.grouptitle=c,i.title=Object(k["jsx"])(K,{navigateGroup:n,node:i,search:t}),i};return l.push.apply(l,Object(o["a"])(t.map((function(t){var a=t.children,o=d(t,"");return o.parentNode=i,Array.isArray(a)&&a.length&&(s.push(t[y["db"]]),o.children=e(a,n,o,r,c,s)),o})))),l}},CYVn:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));n("5Dmo");var a=n("3S7+"),i=(n("+L6B"),n("2/Rp")),r=n("X13+"),c=n("nKUr"),o=function(e){var t=e.moduleState,n=e.dispatch,o=t.moduleName,s=t.currSetting.navigate.visible,l=function(){n({type:"modules/toggleNavigate",payload:{moduleName:o,toggle:"visible"}})};return Object(c["jsx"])(a["a"],{title:s?"\u9690\u85cf\u5bfc\u822a":"\u663e\u793a\u5bfc\u822a",children:Object(c["jsxs"])(i["a"],{type:s?"link":"text",size:"small",onClick:l,children:[s?Object(c["jsx"])(r["b"],{className:"anticon"}):Object(c["jsx"])(r["a"],{className:"anticon"})," \u5bfc\u822a"]})})},s=o,l=(n("qVdP"),n("jsC+")),d=(n("lUTK"),n("BvKs")),u=n("kFgV"),p=n("bRQS"),f=n("WTWM"),m=Object(c["jsx"])(u["a"],{style:{visibility:"hidden"}}),b=Object(c["jsx"])(p["a"],{}),j=function(e){var t=e.moduleState,n=e.moduleInfo,a=e.dispatch,r=n.modulename,o=n.viewschemes,s=t.filters,p=s.viewscheme,j=function(e){var t,n=e.key;a({type:"modules/filterChanged",payload:{type:"viewSchemeChange",moduleName:r,viewscheme:"cancelviewscheme"===n?{}:{viewschemeid:n,title:null===(t=Object(f["B"])(o).find((function(e){return e.value===n})))||void 0===t?void 0:t.text}}})},h=Object(c["jsxs"])(d["a"],{onClick:j,children:[p.title?Object(c["jsx"])(d["a"].Item,{children:"\u53d6\u6d88\u89c6\u56fe\u65b9\u6848"},"cancelviewscheme"):null,p.title?Object(c["jsx"])(d["a"].Divider,{}):null,Object(c["jsx"])(d["a"].ItemGroup,{title:"\u89c6\u56fe\u65b9\u6848",children:Object(f["B"])(o).map((function(e){return Object(c["jsx"])(d["a"].Item,{icon:p.viewschemeid===e.value?b:m,children:e.text},e.value)}))})]},"navigateScheme");return Object(c["jsx"])(l["a"],{overlay:h,children:Object(c["jsxs"])(i["a"],{size:"small",type:p.title?"link":"text",children:[Object(c["jsx"])(u["a"],{})," \u89c6\u56fe\u65b9\u6848 ",p.title?"\uff1a".concat(p.title):null]})})},h=j,_=n("sAbR"),O=n("lC6k"),x=n("pSPz"),g=function(e){var t=e.moduleState,n=e.dispatch,r=t.moduleName,o=t.currSetting.tableWidgetsVisible,s=function(){n({type:"modules/toggleTableWidgets",payload:{moduleName:r}})};return Object(c["jsx"])(a["a"],{title:o?"\u9690\u85cf\u5206\u6790\u5185\u5bb9":"\u663e\u793a\u5206\u6790\u5185\u5bb9",children:Object(c["jsxs"])(i["a"],{type:o?"link":"text",size:"small",onClick:s,children:[o?Object(c["jsx"])(O["a"],{}):Object(c["jsx"])(x["a"],{})," \u5206\u6790"]})})},v=g,y=function(e){var t=e.moduleState,n=e.moduleInfo,a=e.dispatch;return Object(c["jsxs"])(c["Fragment"],{children:[Object.keys(n.viewschemes).length?Object(c["jsx"])(h,{moduleState:t,moduleInfo:n,dispatch:a}):null,n.navigateSchemes.length>0?Object(c["jsx"])(s,{moduleState:t,dispatch:a}):null,Object(f["q"])(n)?Object(c["jsx"])(_["a"],{moduleState:t,dispatch:a}):null,Object(f["J"])(n)?Object(c["jsx"])(v,{moduleState:t,dispatch:a}):null,Object(c["jsx"])("span",{}),Object(c["jsx"])("span",{})]})},E=function(e){var t=e.moduleState,n=e.moduleInfo,a=e.dispatch,i=e.enableUserFilter;return Object(c["jsxs"])(c["Fragment"],{children:[Object.keys(n.viewschemes).length?Object(c["jsx"])(h,{moduleState:t,moduleInfo:n,dispatch:a}):null,i&&Object(f["q"])(n)?Object(c["jsx"])(_["a"],{moduleState:t,dispatch:a}):null,Object(c["jsx"])("span",{}),Object(c["jsx"])("span",{})]})};t["b"]=y},CaQ6:function(e,t,n){"use strict";var a=n("emvA").getBusinessObject,i=n("Nw6e").getExtensionElements,r={};e.exports=r,r.getFormData=function(e){var t=a(e),n=i(t,"activiti:FormData");if("undefined"!==typeof n)return n[0]},r.getFormFields=function(e){var t=this.getFormData(e);return"undefined"===typeof t?[]:t.fields||[]},r.getFormField=function(e,t){var n=this.getFormFields(e);return n[t]},r.getConstraints=function(e){return e&&e.validation&&e.validation.constraints?e.validation.constraints:[]},r.getEnumValues=function(e){return e&&e.values?e.values:[]}},D7g3:function(e,t,n){e.exports={filtericon:"filtericon___2DyRa",outsiderect:"outsiderect___vkgUF",outsiderectcompact:"outsiderectcompact___2iYR2",blockrow:"blockrow___3HTqf",filtercollapsepanel:"filtercollapsepanel___3BxJ_"}},DtuC:function(e,t,n){"use strict";var a=n("6BL2"),i=n("hfUJ"),r=["class","expression","delegateExpression"],c={class:"activiti:class",expression:"activiti:expression",delegateExpression:"activiti:delegateExpression"};function o(e){return-1!==r.indexOf(e)}function s(e){return c[e]}e.exports=function(e,t,n,r){var c=n.getImplementationType,l=n.getBusinessObject;function d(e){switch(e){case"class":return r("Java Class");case"expression":return r("Expression");case"delegateExpression":return r("Delegate Expression");default:return""}}var u=a.textField({id:"delegate",label:r("Value"),dataValueLabel:"delegationLabel",modelProperty:"delegate",get:function(e,t){var n=l(e),a=c(e),i=s(a),r=d(a);return{delegate:n.get(i),delegationLabel:r}},set:function(e,t,n){var a=l(e),r=c(e),o=s(r),d={};return d[o]=t.delegate||"",i.updateBusinessObject(e,a,d)},validate:function(e,t,n){return o(c(e))&&!t.delegate?{delegate:r("Must provide a value")}:{}},hidden:function(e,t){return!o(c(e))}});return[u]}},DuGg:function(e,t,n){e.exports={tooltiptable:"tooltiptable___28Vwy",tdvalue:"tdvalue___Ja6Eh",staticcard:"staticcard___1h9lh",staticspace:"staticspace___2ZNuf",filtericon:"filtericon___3sFQ3"}},E6KD:function(e,t,n){"use strict";var a=n("6BL2"),i=n("emvA").is,r=n("emvA").getBusinessObject;e.exports=function(e,t,n){var c=r(t);c&&i(t,"activiti:Initiator")&&!i(t.parent,"bpmn:SubProcess")&&e.entries.push(a.textField({id:"initiator",label:n("Initiator"),modelProperty:"initiator"}))}},EPLS:function(e,t,n){"use strict";var a=n("emvA").getBusinessObject,i=n("emvA").is,r=n("6BL2"),c=n("hfUJ"),o=n("bW/S");e.exports=function(e,t,n,s){var l;if(i(t,"bpmn:ScriptTask")&&(l=a(t)),l){var d=o("scriptFormat","script",!1,s);e.entries.push({id:"script-implementation",label:s("Script"),html:d.template,get:function(e){return d.get(e,l)},set:function(e,t,n){var a=d.set(e,t,n);return c.updateProperties(e,a)},validate:function(e,t){return d.validate(e,t)},script:d,cssClasses:["bpp-textfield"]}),e.entries.push(r.textField({id:"scriptResultVariable",label:s("Result Variable"),modelProperty:"scriptResultVariable",get:function(e,t){var n=l.get("activiti:resultVariable");return{scriptResultVariable:n}},set:function(e,t,n){return c.updateProperties(e,{"activiti:resultVariable":t.scriptResultVariable.length?t.scriptResultVariable:void 0})}}))}}},EPaA:function(e,t,n){e.exports={toolbar:"toolbar___1Z08h",left:"left___2VgW5",right:"right___3I0c6"}},FC4O:function(e,t,n){"use strict";var a=n("P/G1");function i(){this._templates={},this.set=function(e){var t=this._templates={};return e.forEach((function(e){t[e.id]=e})),this},this.get=function(e){return this._templates[e]},this.getAll=function(){return a(this._templates)}}e.exports=i},GTJ0:function(e,t,n){"use strict";var a=n("3OWR"),i=n("6BL2"),r=n("f6n2"),c=n("vtLx"),o=n("hfUJ");function s(e){return r.isAsyncBefore(e)}function l(e){return r.isAsyncAfter(e)}function d(e){return r.isExclusive(e)}function u(e,t){return r.removeFailedJobRetryTimeCycle(e,t)}function p(e){return!c.getTimerEventDefinition(e)}e.exports=function(e,t,n,r){var c=n.getBusinessObject,f=n.idPrefix||"",m=n.labelPrefix||"",b=i.checkbox({id:f+"asyncBefore",label:m+r("Asynchronous Before"),modelProperty:"asyncBefore",get:function(e,t){var n=c(e);return{asyncBefore:s(n)}},set:function(e,t){var n=c(e),i=!!t.asyncBefore,r={"activiti:asyncBefore":i,"activiti:async":!1},s=[];return l(n)||i||(r=a({"activiti:exclusive":!0},r),p(e)&&s.push(u(n,e))),s.push(o.updateBusinessObject(e,n,r)),s}}),j=i.checkbox({id:f+"asyncAfter",label:m+r("Asynchronous After"),modelProperty:"asyncAfter",get:function(e,t){var n=c(e);return{asyncAfter:l(n)}},set:function(e,t){var n=c(e),i=!!t.asyncAfter,r={"activiti:asyncAfter":i},l=[];return s(n)||i||(r=a({"activiti:exclusive":!0},r),p(e)&&l.push(u(n,e))),l.push(o.updateBusinessObject(e,n,r)),l}}),h=i.checkbox({id:f+"exclusive",label:m+r("Exclusive"),modelProperty:"exclusive",get:function(e,t){var n=c(e);return{exclusive:d(n)}},set:function(e,t){var n=c(e);return o.updateBusinessObject(e,n,{"activiti:exclusive":!!t.exclusive})},hidden:function(e){var t=c(e);return t&&!l(t)&&!s(t)}});return[b,j,h]}},HFZ8:function(e,t,n){"use strict";n("lUTK");var a=n("BvKs"),i=(n("5Dmo"),n("3S7+")),r=(n("+L6B"),n("2/Rp")),c=(n("miYZ"),n("tsqr")),o=n("4g1a"),s=n("lkk+"),l=n("1x1c"),d=n("79+z"),u=n("sy1d"),p=n("RfA7"),f=n("WTWM"),m=n("nKUr"),b="recordexport",j=function(e){var t=e.moduleState,n=e.setVisible,j=t.moduleName,h=Object(f["x"])(j),_=function(e){var n=e.schemeid,a=e.title,i=e.topdf,r=e.openinwindow,o=t.selectedRowKeys,s=t.selectedTextValue;if(0!==o.length){var l={recordids:o.join(","),moduleName:j,schemeid:n,title:a,filetype:i?"pdf":null,inline:r};if(r){var f="".concat(u["API_HEAD"],"/platform/dataobjectexport/exportexcelscheme.do?").concat(Object(d["H"])(l)),m="".concat(s[0].text+(1===o.length?"":"\u7b49".concat(s.length,"\u6761\u8bb0\u5f55")),"\u7684").concat(a),b=Object(d["w"])(f,"".concat(m,".pdf"));Object(d["A"])(b,m,"pdf")}else Object(p["e"])(l)}else c["default"].warn("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u6761\u8bb0\u5f55\uff0c\u624d\u80fd\u6267\u884c\u6b64\u5bfc\u51fa\u64cd\u4f5c\uff01")},O=function(){var e=h.excelSchemes,t=[],c=e.map((function(e){return Object(m["jsxs"])(a["a"].Item,{title:e.title,icon:e.onlypdf?Object(m["jsx"])(o["a"],{}):Object(m["jsx"])(s["a"],{}),onClick:function(){_({schemeid:e.schemeid,title:e.title,topdf:e.onlypdf||!1,openinwindow:!1})},children:[e.title,Object(m["jsx"])(i["a"],{title:"\u4e0b\u8f7dpdf\u6587\u4ef6",placement:"topRight",children:Object(m["jsx"])(r["a"],{style:{float:"right",marginRight:"0px",paddingRight:"0px"},type:"link",size:"small",onClick:function(t){t.stopPropagation(),n(!1),_({schemeid:e.schemeid,title:e.title,topdf:!0,openinwindow:!1})},children:Object(m["jsx"])(o["a"],{})})}),Object(m["jsx"])(i["a"],{title:"\u65b0\u7a97\u53e3\u4e2d\u6253\u5f00pdf\u6587\u4ef6",placement:"topRight",children:Object(m["jsx"])(r["a"],{style:{float:"right",margin:"0px",padding:"0px"},type:"link",size:"small",onClick:function(t){t.stopPropagation(),n(!1),_({schemeid:e.schemeid,title:e.title,topdf:!0,openinwindow:!0})},children:Object(m["jsx"])(l["a"],{rotate:90,style:{marginLeft:"10px"}})})})]},"".concat(b,"||").concat(e.schemeid,"||").concat(e.title))}));return c.length>0&&(t.push(Object(m["jsx"])(a["a"].ItemGroup,{title:"\u8bb0\u5f55\u5bfc\u51fa\u65b9\u6848",children:c},"_export_record_key_")),t.push(Object(m["jsx"])(a["a"].Divider,{},"_export_record_key_div"))),t};return O()};t["a"]=j},"I+bp":function(e,t,n){"use strict";var a=n("emvA").is,i=n("6BL2"),r=n("sy1d").syncRequest,c=n("sy1d").API_HEAD,o=[],s=[];function l(){if(0===o.length){var e=r(c+"/platform/dataobject/fetchcombodata.do",{params:{moduleName:"FUser"}});o.push({name:"",value:""}),e.forEach((function(e){o.push({name:e.text,value:e.value})}))}return o}function d(){if(0===s.length){var e=r(c+"/platform/dataobject/fetchcombodata.do",{params:{moduleName:"FRole"}});s.push({name:"",value:""}),e.forEach((function(e){s.push({name:e.text,value:e.value})}))}return s}e.exports=function(e,t,n){a(t,"activiti:Assignable")&&(e.entries.push(i.selectBox({id:"activiti:assignee",label:n("Assignee"),selectOptions:l(),modelProperty:"activiti:assignee"})),e.entries.push(i.textField({id:"activiti:candidateUsers",label:n("Candidate Users"),modelProperty:"activiti:candidateUsers"})),e.entries.push(i.selectBox({id:"activiti:candidateGroups",label:n("Candidate Groups"),selectOptions:d(),modelProperty:"activiti:candidateGroups"})),e.entries.push(i.textField({id:"dueDate",description:n("The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)"),label:n("Due Date"),modelProperty:"dueDate"})),e.entries.push(i.textField({id:"followUpDate",description:n("The follow up date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)"),label:n("Follow Up Date"),modelProperty:"followUpDate"})),e.entries.push(i.textField({id:"priority",label:n("Priority"),modelProperty:"priority"})))}},I3r8:function(e,t,n){"use strict";var a=n("emvA").is,i=n("EWYV"),r=n("gkHi"),c=n("hfUJ"),o=n("ihRo"),s=n("6BL2"),l=n("bW/S");function d(e,t,n,a){return i.createElement(e,a,t,n)}function u(e){return a(e,"activiti:Script")}function p(e){return a(e,"activiti:List")}function f(e){return a(e,"activiti:Map")}function m(e,t){return r.isInputOutputSupported(e,t)}e.exports=function(e,t,n,a){var i={"activiti:Map":{value:"map",label:a("Map")},"activiti:List":{value:"list",label:a("List")},"activiti:Script":{value:"script",label:a("Script")}};n=n||{};var r=!!n.insideConnector,b=n.idPrefix||"",j=n.getSelectedParameter;if(!m(e,r))return[];var h=[],_=function(e,t){return j(e,t)};h.push(s.validationAwareTextField({id:b+"parameterName",label:a("Name"),modelProperty:"name",getProperty:function(e,t){return(j(e,t)||{}).name},setProperty:function(e,t,n){var a=j(e,n);return c.updateBusinessObject(e,a,t)},validate:function(e,t,n){var i=j(e,n),r={};if(i){var c=t.name;c?o.containsSpace(c)&&(r.name=a("Name must not contain spaces")):r.name=a("Parameter must have a name")}return r},hidden:function(e,t){return!_(e,t)}}));var O=[{value:"text",name:a("Text")},{value:"script",name:a("Script")},{value:"list",name:a("List")},{value:"map",name:a("Map")}];h.push(s.selectBox({id:b+"parameterType",label:a("Type"),selectOptions:O,modelProperty:"parameterType",get:function(e,t){var n=j(e,t),a="text";if("undefined"!==typeof n){var r=n.get("definition");if("undefined"!==typeof r){var c=r.$type;a=i[c].value}}return{parameterType:a}},set:function(e,n,a){var i=j(e,a),r={value:void 0,definition:void 0},o=function(e){return d(e,i,t)},s=n.parameterType;return"script"===s?r.definition=o("activiti:Script"):"list"===s?r.definition=o("activiti:List"):"map"===s&&(r.definition=o("activiti:Map")),c.updateBusinessObject(e,i,r)},show:function(e,t){return _(e,t)}})),h.push(s.textBox({id:b+"parameterType-text",label:a("Value"),modelProperty:"value",get:function(e,t){return{value:(j(e,t)||{}).value}},set:function(e,t,n){var a=j(e,n);return t.value=t.value||void 0,c.updateBusinessObject(e,a,t)},show:function(e,t){var n=j(e,t);return n&&!n.definition}}));var x=l("scriptFormat","value",!0,a);return h.push({id:b+"parameterType-script",html:'<div data-show="isScript">'+x.template+"</div>",get:function(e,t){var n=j(e,t);return n&&u(n.definition)?x.get(e,n.definition):{}},set:function(e,t,n){var a=j(e,n),i=x.set(e,t);return c.updateBusinessObject(e,a.definition,i)},validate:function(e,t,n){var a=j(e,n);return a&&u(a.definition)?x.validate(e,a.definition):{}},isScript:function(e,t){var n=j(e,t);return n&&u(n.definition)},script:x}),h.push(s.table({id:b+"parameterType-list",modelProperties:["value"],labels:[a("Value")],addLabel:a("Add Value"),getElements:function(e,t){var n=j(e,t);return n&&p(n.definition)?n.definition.items:[]},updateElement:function(e,t,n,a){var i=j(e,n),r=i.definition.items[a];return c.updateBusinessObject(e,r,t)},addElement:function(e,n){var a=j(e,n),i=d("activiti:Value",a.definition,t,{value:void 0});return c.addElementsTolist(e,a.definition,"items",[i])},removeElement:function(e,t,n){var a=j(e,t);return c.removeElementsFromList(e,a.definition,"items",null,[a.definition.items[n]])},editable:function(e,t,n,a){var i=j(e,t),r=i.definition.items[a];return!f(r)&&!p(r)&&!u(r)},setControlValue:function(e,t,n,a,r,c){var o=j(e,t),s=o.definition.items[c];f(s)||p(s)||u(s)?n.value=i[s.$type].label:n.value=r},show:function(e,t){var n=j(e,t);return n&&n.definition&&p(n.definition)}})),h.push(s.table({id:b+"parameterType-map",modelProperties:["key","value"],labels:[a("Key"),a("Value")],addLabel:a("Add Entry"),getElements:function(e,t){var n=j(e,t);return n&&f(n.definition)?n.definition.entries:[]},updateElement:function(e,t,n,a){var i=j(e,n),r=i.definition.entries[a];return(f(r.definition)||p(r.definition)||u(r.definition))&&(t={key:t.key}),c.updateBusinessObject(e,r,t)},addElement:function(e,n){var a=j(e,n),i=d("activiti:Entry",a.definition,t,{key:void 0,value:void 0});return c.addElementsTolist(e,a.definition,"entries",[i])},removeElement:function(e,t,n){var a=j(e,t);return c.removeElementsFromList(e,a.definition,"entries",null,[a.definition.entries[n]])},editable:function(e,t,n,a){var i=j(e,t),r=i.definition.entries[a];return"key"===n||!f(r.definition)&&!p(r.definition)&&!u(r.definition)},setControlValue:function(e,t,n,a,r,c){var o=j(e,t),s=o.definition.entries[c];"key"!==a&&(f(s.definition)||p(s.definition)||u(s.definition))?n.value=i[s.definition.$type].label:n.value=r},show:function(e,t){var n=j(e,t);return n&&n.definition&&f(n.definition)}})),h}},I6fb:function(e,t,n){"use strict";var a=n("3OWR"),i=n("I3r8");e.exports=function(e,t,n,r,c){r=a({idPrefix:"connector-",insideConnector:!0},r),e.entries=e.entries.concat(i(t,n,r,c))}},IWsf:function(e,t,n){"use strict";var a=n("emvA").getBusinessObject,i=n("Nw6e").getExtensionElements,r=n("Nw6e").removeEntry,c=n("jd30"),o=n("6siw"),s=n("6BL2"),l=n("EWYV"),d=n("hfUJ"),u=n("CaQ6"),p=n("ihRo"),f=n("emvA").is,m=n("J2m7"),b=n("bNQv");function j(){return p.nextId("Value_")}function h(e,t){var n=e.id,a=e.label,i=e.modelProperty,r=e.validate;return s.textField({id:n,label:a,modelProperty:i,get:function(e,n){var a=t(e,n)||{},r={};return r[i]=a[i],r},set:function(n,a,r){var c=[];if("function"===typeof e.set){var o=e.set(n,a,r);o&&c.push(o)}var s=t(n,r),l={};return l[i]=a[i]||void 0,c.push(d.updateBusinessObject(n,s,l)),c},hidden:function(e,n){return!t(e,n)},validate:r})}function _(e){return f(e,"bpmn:StartEvent")&&!f(e.parent,"bpmn:SubProcess")||f(e,"bpmn:UserTask")}e.exports=function(e,t,n,O){if(_(t)){e.entries.push(s.textField({id:"form-key",label:O("Form Key"),modelProperty:"formKey",get:function(e,t){var n=a(e);return{formKey:n.get("activiti:formKey")}},set:function(e,t,n){var i=a(e),r=t.formKey||void 0;return d.updateBusinessObject(e,i,{"activiti:formKey":r})}}));var x=c(t,n,{id:"form-fields",label:O("Form Fields"),modelProperty:"id",prefix:"FormField",createExtensionElement:function(e,t,i){var r=a(e),c=[];t||(t=l.createElement("bpmn:ExtensionElements",{values:[]},r,n),c.push(d.updateProperties(e,{extensionElements:t})));var o=u.getFormData(e);o||(o=l.createElement("activiti:FormData",{fields:[]},t,n),c.push(d.addAndRemoveElementsFromList(e,t,"values","extensionElements",[o],[])));var s=l.createElement("activiti:FormField",{id:i},o,n);return"undefined"!==typeof o.fields?c.push(d.addElementsTolist(e,o,"fields",[s])):c.push(d.updateBusinessObject(e,o,{fields:[s]})),c},removeExtensionElement:function(e,t,n,c){var o=i(a(e),"activiti:FormData")[0],s=o.fields[c],l=[];return o.fields.length<2?l.push(r(a(e),e,o)):(l.push(d.removeElementsFromList(e,o,"fields",null,[s])),s.id===o.get("businessKey")&&l.push(d.updateBusinessObject(e,o,{businessKey:void 0}))),l},getExtensionElements:function(e){return u.getFormFields(e)},hideExtensionElements:function(e,t){return!1}});e.entries.push(x);var g=s.selectBox({id:"form-business-key",label:O("Business Key"),modelProperty:"businessKey",selectOptions:function(e,t){var n=[{name:"",value:""}],a=u.getFormFields(e);return b(a,(function(e){"boolean"!==e.type&&n.push({name:e.id,value:e.id})})),n},get:function(e,t){var n={businessKey:""},r=a(e),c=i(r,"activiti:FormData");if(c){var o=c[0],s=o.get("businessKey");n={businessKey:s}}return n},set:function(e,t,n){var r=i(a(e),"activiti:FormData")[0];return d.updateBusinessObject(e,r,{businessKey:t.businessKey||void 0})},hidden:function(e,t){var n=f(e,"bpmn:StartEvent");return!(n&&u.getFormFields(e).length>0)}});e.entries.push(g),e.entries.push(s.label({id:"form-field-header",labelText:O("Form Field"),showLabel:function(e,t){return!!v(e,t)}})),e.entries.push(s.validationAwareTextField({id:"form-field-id",label:O("ID"),modelProperty:"id",getProperty:function(e,t){var n=v(e,t)||{};return n.id},setProperty:function(e,t,n){var a=v(e,n);return d.updateBusinessObject(e,a,t)},hidden:function(e,t){return!v(e,t)},validate:function(e,t,n){var a=v(e,n);if(a){var i=t.id;if(!i||""===i.trim())return{id:"Form field id must not be empty"};var r=u.getFormFields(e),c=m(r,(function(e){return e!==a&&e.id===i}));if(c)return{id:"Form field id already used in form data."}}}})),e.entries.push(s.comboBox({id:"form-field-type",label:O("Type"),selectOptions:[{name:"string",value:"string"},{name:"long",value:"long"},{name:"boolean",value:"boolean"},{name:"date",value:"date"},{name:"enum",value:"enum"}],modelProperty:"type",emptyParameter:!0,get:function(e,t){var n=v(e,t);return n?{type:n.type}:{}},set:function(e,t,n){var r=v(e,n),c=i(a(e),"activiti:FormData")[0],o=[];return"enum"===r.type&&"enum"!==t.type&&o.push(d.updateBusinessObject(e,r,{values:void 0})),"boolean"===t.type&&r.get("id")===c.get("businessKey")&&o.push(d.updateBusinessObject(e,c,{businessKey:void 0})),o.push(d.updateBusinessObject(e,r,t)),o},hidden:function(e,t){return!v(e,t)}})),e.entries.push(h({id:"form-field-label",label:O("Label"),modelProperty:"label"},v)),e.entries.push(h({id:"form-field-defaultValue",label:O("Default Value"),modelProperty:"defaultValue"},v)),e.entries.push(s.label({id:"form-field-enum-values-header",labelText:O("Values"),divider:!0,showLabel:function(e,t){var n=v(e,t);return n&&"enum"===n.type}})),e.entries.push(s.table({id:"form-field-enum-values",labels:[O("Id"),O("Name")],modelProperties:["id","name"],show:function(e,t){var n=v(e,t);return n&&"enum"===n.type},getElements:function(e,t){var n=v(e,t);return u.getEnumValues(n)},addElement:function(e,t){var i=v(e,t),r=j(),c=l.createElement("activiti:Value",{id:r,name:void 0},a(e),n);return d.addElementsTolist(e,i,"values",[c])},removeElement:function(e,t,n){var a=v(e,t),i=a.values[n];return d.removeElementsFromList(e,a,"values",null,[i])},updateElement:function(e,t,n,a){var i=v(e,n),r=i.values[a];return t.name=t.name||void 0,d.updateBusinessObject(e,r,t)},validate:function(e,t,n,a){var i=v(e,n),r=i.values[a];if(r){var c=p.isIdValid(r,t.id,O);if(c)return{id:c}}}})),e.entries.push(s.label({id:"form-field-validation-header",labelText:O("Validation"),divider:!0,showLabel:function(e,t){return!!v(e,t)}})),e.entries.push(s.table({id:"constraints-list",modelProperties:["name","config"],labels:[O("Name"),O("Config")],addLabel:O("Add Constraint"),getElements:function(e,t){var n=v(e,t);return u.getConstraints(n)},addElement:function(e,t){var i=[],r=v(e,t),c=r.validation;c||(c=l.createElement("activiti:Validation",{},a(e),n),i.push(d.updateBusinessObject(e,r,{validation:c})));var o=l.createElement("activiti:Constraint",{name:void 0,config:void 0},c,n);return i.push(d.addElementsTolist(e,c,"constraints",[o])),i},updateElement:function(e,t,n,a){var i=v(e,n),r=u.getConstraints(i)[a];return t.name=t.name||void 0,t.config=t.config||void 0,d.updateBusinessObject(e,r,t)},removeElement:function(e,t,n){var a=[],i=v(e,t),r=u.getConstraints(i),c=r[n];return a.push(d.removeElementsFromList(e,i.validation,"constraints",null,[c])),1===r.length&&a.push(d.updateBusinessObject(e,i,{validation:void 0})),a},show:function(e,t){return!!v(e,t)}})),e.entries.push(s.label({id:"form-field-properties-header",labelText:O("Properties"),divider:!0,showLabel:function(e,t){return!!v(e,t)}})),e.entries.push(o(t,n,{id:"form-field-properties",modelProperties:["id","value"],labels:[O("Id"),O("Value")],getParent:function(e,t){return v(e,t)},show:function(e,t){return!!v(e,t)}},O))}function v(e,t){var n=x.getSelected(e,t.parentNode);if(-1!==n.idx)return u.getFormField(e,n.idx)}}},Ibjt:function(e,t,n){},JA94:function(e,t,n){"use strict";var a=n("JhtO");e.exports=function(e,t,n,i){var r=a(t,n,{},i);return e.entries=e.entries.concat(r.entries),{getSelectedListener:r.getSelectedListener}}},JhtO:function(e,t,n){"use strict";var a=n("emvA").is,i=n("emvA").getBusinessObject,r=n("jd30"),c=n("Nw6e"),o=n("hfUJ"),s=n("EWYV"),l=n("XpWC");function d(e,t){return e&&c.getExtensionElements(e,t)||[]}var u="activiti:ExecutionListener",p="activiti:TaskListener";e.exports=function(e,t,n,f){var m,b={class:f("Java Class"),expression:f("Expression"),delegateExpression:f("Delegate Expression"),script:f("Script")},j={getSelectedListener:O},h=j.entries=[],_=l.isSequenceFlow(e);function O(e,t){var n=y&&y.getSelected(e,t)||{idx:-1},a=d(m,u)[n.idx];return!a&&E&&(n=E.getSelected(e,t),a=d(m,p)[n.idx]),a}var x=function(e){return function(t,n,a,i,r,c){var o=d(m,e),s=o[c],u=l.getImplementationType(s),p=s.get("event")?s.get("event"):"<empty>",f=(p||"*")+" : "+(b[u]||"");a.text=f}},g=function(e,n,a){return function(e,i,r){var c={event:a,class:""},l=s.createElement(n,c,i,t);return o.addElementsTolist(e,i,"values",[l])}},v=function(e,t){return function(e,n,a,i){var r=d(m,t),o=r[i];if(o)return c.removeEntry(m,e,o)}};if((a(e,"bpmn:FlowElement")||a(e,"bpmn:Process")||a(e,"bpmn:Participant"))&&(m=i(e),a(e,"bpmn:Participant")&&(e=e.processRef,m=m.get("processRef")),m)){var y=r(e,t,{id:"executionListeners",label:f("Execution Listener"),modelProperty:"name",idGeneration:"false",reference:"processRef",createExtensionElement:g(e,u,_?"take":"start"),removeExtensionElement:v(e,u),getExtensionElements:function(e){return d(m,u)},onSelectionChange:function(e,t,n,a){E&&E.deselect(e,t)},setOptionLabelValue:x(u)});h.push(y)}if(a(e,"bpmn:UserTask")){m=i(e);var E=r(e,t,{id:"taskListeners",label:f("Task Listener"),modelProperty:"name",idGeneration:"false",createExtensionElement:g(e,p,"create"),removeExtensionElement:v(e,p),getExtensionElements:function(e){return d(m,p)},onSelectionChange:function(e,t,n,a){y.deselect(e,t)},setOptionLabelValue:x(p)});h.push(E)}return j}},LNYG:function(e,t,n){"use strict";var a=n("XpWC"),i=n("gkHi"),r=n("6BL2"),c=n("hfUJ");function o(e){return a.getImplementationType(e)}function s(e){return a.getServiceTaskLikeBusinessObject(e)}function l(e){return i.getConnector(e)}function d(e){return"connector"===o(e)}e.exports=function(e,t,n,a){e.entries.push(r.textField({id:"connectorId",label:a("Connector Id"),modelProperty:"connectorId",get:function(e,t){var n=s(e),a=n&&l(n),i=a&&a.get("connectorId");return{connectorId:i}},set:function(e,t,n){var a=s(e),i=l(a);return c.updateBusinessObject(e,i,{connectorId:t.connectorId||void 0})},validate:function(e,t,n){return d(e)&&!t.connectorId?{connectorId:a("Must provide a value")}:{}},hidden:function(e,t){return!d(e)}}))}},LpXo:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DesignGrid}));var _Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("k1fw"),antd_es_row_style__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("14J3"),antd_es_row__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("BMrR"),antd_es_space_style__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("DYRE"),antd_es_space__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("zeV3"),antd_es_card_style__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("IzEo"),antd_es_card__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("bx4M"),antd_es_tree_style__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ozfa"),antd_es_tree__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("MJZm"),antd_es_col_style__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("jCWc"),antd_es_col__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("kPKH"),antd_es_tooltip_style__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("5Dmo"),antd_es_tooltip__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("3S7+"),_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("oBTY"),_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("tJVT"),antd_es_modal_style__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("2qtc"),antd_es_modal__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("kLXV"),antd_es_message_style__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("miYZ"),antd_es_message__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("tsqr"),react__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("q1tI"),react__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_19__),_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("eVqf"),_utils_utils__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("79+z"),_ant_design_icons__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("G3dp"),_ant_design_icons__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("wJku"),_ant_design_icons__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("9jjd"),_ant_design_icons__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("ga3A"),_service__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("RfA7"),_widget_ModuleHierarchyChart__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("mzdz"),_DesignGridField__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("RNUq"),_designForm_css__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("Snfz"),_designForm_css__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(_designForm_css__WEBPACK_IMPORTED_MODULE_29__),_moduleUtils__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("jE+T"),_modules__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("WTWM"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("nKUr"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__),getTitle=function(e,t){return e.cls?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("span",{className:e.cls,children:t||e.text}):t||e.text},farray=["tf_title","tf_hidden","tf_locked","tf_showdetailtip","tf_width","tf_minwidth","tf_maxwidth","tf_flex","tf_autosizetimes","tf_otherSetting"],getChildNodesArray=function e(t){var n=[];return t.children.forEach((function(t){var a={text:t.text};!t.children&&t.itemId&&(a.tf_itemId=t.itemId),farray.forEach((function(e){t[e]&&(a[e]=t[e])})),t.children&&t.children.length&&(a.children=e(t)),(t.itemId||t.children&&t.children.length)&&n.push(a)})),n},saveGridScheme=function(e,t){var n=t["FDataobject.objectid"];Object(_service__WEBPACK_IMPORTED_MODULE_26__["G"])({dataObjectId:n,gridSchemeId:t.gridschemeid,gridSchemeName:t.schemename,schemeDefine:JSON.stringify(getChildNodesArray(e[0]))}).then((function(e){e.success?(antd_es_message__WEBPACK_IMPORTED_MODULE_18__["default"].success("\u5217\u8868\u65b9\u6848\u300e".concat(t.schemename,"\u300f\u5df2\u4fdd\u5b58\u3002")),Object(_modules__WEBPACK_IMPORTED_MODULE_31__["L"])(n)):antd_es_modal__WEBPACK_IMPORTED_MODULE_16__["a"].error({title:"\u5217\u8868\u65b9\u6848\u4fdd\u5b58\u5931\u8d25\uff01",width:500,content:e.msg})}))},DesignGrid=function DesignGrid(_ref){var gridScheme=_ref.gridScheme,moduleName=gridScheme["FDataobject.objectid"],gridschemeid=gridScheme.gridschemeid,hierarchyRef=Object(react__WEBPACK_IMPORTED_MODULE_19__["useRef"])(),form=Object(react__WEBPACK_IMPORTED_MODULE_19__["useRef"])(),_useState=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])([]),_useState2=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState,2),canSelectTree=_useState2[0],setCanSelectTree=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])([]),_useState4=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState3,2),canSelectTreeCheckedkey=_useState4[0],setCanSelectTreeCheckedkey=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])([]),_useState6=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState5,2),canSelectTreeExpandKey=_useState6[0],setCanSelectTreeExpandKey=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])([]),_useState8=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState7,2),canSelectTreeSelectedKey=_useState8[0],setCanSelectTreeSelectedKey=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])([]),_useState10=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState9,2),details=_useState10[0],setDetails=_useState10[1],_useState11=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])([]),_useState12=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState11,2),detailsExpandKey=_useState12[0],setDetailsExpandKey=_useState12[1],_useState13=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])([]),_useState14=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState13,2),detailsSelectedKey=_useState14[0],setDetailsSelectedKey=_useState14[1],_useState15=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])({}),_useState16=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState15,2),currModule=_useState16[0],setCurrModule=_useState16[1],_useState17=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])(!1),_useState18=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState17,2),modalVisible=_useState18[0],setModalVisible=_useState18[1],_useState19=Object(react__WEBPACK_IMPORTED_MODULE_19__["useState"])({}),_useState20=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_14__["a"])(_useState19,2),editRecord=_useState20[0],setEditRecord=_useState20[1],fetchSelectedModuleFields=function(e,t){e!==currModule?(setCurrModule(e),e.moduleName&&Object(_service__WEBPACK_IMPORTED_MODULE_26__["m"])({moduleName:e.moduleName,isChildModule:!!e.isChild,modulePath:e.itemId}).then((function(e){var n=[];e.forEach((function(e){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(e,{key:e.text,title:getTitle(e)}),n.push(e.key),e.children&&e.children.forEach((function(t){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(t,{key:t.itemId,title:getTitle(t),parent:e}),t.children&&(n.push(t.key),t.children.forEach((function(e){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(e,{key:e.itemId,title:getTitle(e),parent:t})})))}))})),setCanSelectTreeCheckedkey([]),setCanSelectTreeExpandKey(n),setCanSelectTree(e),setCanSelectTreeSelectedKey(t||detailsSelectedKey)}))):setCanSelectTreeSelectedKey(t||[])},deleteNode=function(){if(detailsSelectedKey.length){if("root"===detailsSelectedKey[0])return void antd_es_message__WEBPACK_IMPORTED_MODULE_18__["default"].warn("\u4e0d\u80fd\u5220\u9664\u6839\u8282\u70b9\uff01");var e=Object(_moduleUtils__WEBPACK_IMPORTED_MODULE_30__["g"])(details[0].children),t=e.find((function(e){return e.key===detailsSelectedKey[0]}));if(t){if(t.children&&t.children.length)return void antd_es_message__WEBPACK_IMPORTED_MODULE_18__["default"].warn("\u8bf7\u5148\u5220\u9664\u5f53\u524d\u8282\u70b9\u7684\u6240\u6709\u5b50\u8282\u70b9\uff01");if(t.itemId)return void antd_es_message__WEBPACK_IMPORTED_MODULE_18__["default"].warn("\u8bf7\u5728\u53ef\u4f9b\u9009\u62e9\u7684\u5b57\u6bb5\u4e2d\u53d6\u6d88\u52fe\u9009\uff01");var n=t.parent.children;n.splice(n.findIndex((function(e){return e===t})),1),setDetailsSelectedKey([]),setDetails(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(details))}}else antd_es_message__WEBPACK_IMPORTED_MODULE_18__["default"].warn("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u8282\u70b9\uff01")},getEditTitle=function(e,t){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsxs"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["Fragment"],{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("span",{className:e.cls,children:t||e.tf_title||e.text}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(_ant_design_icons__WEBPACK_IMPORTED_MODULE_22__["a"],{className:"editbutton",onClick:function(){setEditRecord(e),setModalVisible(!0)}}),e.children&&e.children.length?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_tooltip__WEBPACK_IMPORTED_MODULE_12__["a"],{title:"\u628a\u6240\u6709\u5b50\u8282\u70b9\u653e\u5728\u4e0a\u7ea7\u8282\u70b9\u4e0b",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(_ant_design_icons__WEBPACK_IMPORTED_MODULE_23__["a"],{className:"editbutton",onClick:function(){var t=e.parent.children,n=t.findIndex((function(t){return t===e}));e.children.forEach((function(t){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(t,{parent:e.parent})})),t.splice.apply(t,[n,1].concat(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(e.children))),setDetails((function(e){return Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(e)}))}})}):null]})},changeTextToTitle=function e(t){Array.isArray(t)?t.forEach((function(t){return e(t)})):"[object Object]"===Object.prototype.toString.call(t)&&("root"!==t.key&&(t.title&&Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(t,{tf_title:t.title}),Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(t,{title:getEditTitle(t)})),t.children&&(t.children.forEach((function(e){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(e,{parent:t})})),e(t.children)))},syncSelected=function(e,t){setCanSelectTreeCheckedkey(e),t.checkedNodes.filter((function(e){return!e.children})).forEach((function(e){if(!Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_20__["g"])(details,"itemId").includes(e.itemId)){var t=e.text;currModule.isParent?t="".concat(currModule.qtip,"--").concat(t):currModule.isChild&&(t="".concat(currModule.qtip,"--").concat(e.parent.text,"--").concat(t));var n={key:e.itemId,itemId:e.itemId,text:t,iconCls:e.iconCls,cls:e.cls,icon:e.icon,leaf:!0};n.title=getEditTitle(n,t);var a=details[0].children.find((function(t){return t.text===e.parent.text&&!t.itemId}));a?(a.children||(a.children=[]),n.parent=a,a.children.push(n)):(a={key:Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["I"])(),text:e.parent.text||e.parent.title,tf_title:e.parent.text||e.parent.title,leaf:!1,expanded:!0,xtype:"fieldset",children:[n],parent:details[0]},a.title=getEditTitle(a),n.parent=a,detailsExpandKey.push(a.key),details[0].children.push(a))}})),Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_20__["e"])(canSelectTree).filter((function(e){return!t.checkedNodes.find((function(t){return t===e}))})).forEach((function(e){var t=Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_20__["e"])(details).find((function(t){return t.itemId===e.itemId}));if(t){var n=t.parent.children;n.splice(n.findIndex((function(e){return e.itemId===t.itemId})),1)}})),setDetails(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(details))};return Object(react__WEBPACK_IMPORTED_MODULE_19__["useEffect"])((function(){var e=Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_20__["g"])(canSelectTree,"itemId"),t=Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_20__["g"])(details,"itemId"),n=e.filter((function(e){return t.find((function(t){return t===e}))}));setCanSelectTreeCheckedkey(n)}),[canSelectTree]),Object(react__WEBPACK_IMPORTED_MODULE_19__["useEffect"])((function(){Object(_service__WEBPACK_IMPORTED_MODULE_26__["l"])({gridSchemeId:gridschemeid}).then((function(e){var t=[{key:"root",children:e.children,title:"\u5df2\u7ecf\u9009\u62e9\u7684\u5b57\u6bb5"}];changeTextToTitle(t),setDetailsExpandKey(Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_20__["f"])(t,"key")),setDetails(t),fetchSelectedModuleFields({moduleName:moduleName})}))}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsxs"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["Fragment"],{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsxs"])(antd_es_row__WEBPACK_IMPORTED_MODULE_2__["a"],{gutter:16,style:{height:"calc(100% )"},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_col__WEBPACK_IMPORTED_MODULE_10__["a"],{lg:12,md:24,sm:24,xs:24,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(_widget_ModuleHierarchyChart__WEBPACK_IMPORTED_MODULE_27__["a"],{moduleName:moduleName,onClick:function(e){fetchSelectedModuleFields(e)},ref:hierarchyRef})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_col__WEBPACK_IMPORTED_MODULE_10__["a"],{lg:5,md:12,sm:12,xs:24,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_card__WEBPACK_IMPORTED_MODULE_6__["a"],{title:"\u53ef\u4f9b\u9009\u62e9\u7684\u5b57\u6bb5",size:"small",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_tree__WEBPACK_IMPORTED_MODULE_8__["a"],{style:{height:"calc(100vh - 149px)",overflow:"auto"},checkable:!0,showIcon:!0,icon:function(e){return e.iconCls?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("span",{className:e.iconCls}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(_ant_design_icons__WEBPACK_IMPORTED_MODULE_24__["a"],{})},treeData:canSelectTree,checkedKeys:canSelectTreeCheckedkey,onCheck:function(e,t){syncSelected(e,t)},expandedKeys:canSelectTreeExpandKey,onExpand:function(e){return setCanSelectTreeExpandKey(e)},selectedKeys:canSelectTreeSelectedKey,onSelect:function(e){setCanSelectTreeSelectedKey(e),setDetailsSelectedKey(e)}})})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_col__WEBPACK_IMPORTED_MODULE_10__["a"],{lg:7,md:12,sm:12,xs:24,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_card__WEBPACK_IMPORTED_MODULE_6__["a"],{title:"\u5df2\u7ecf\u8bbe\u7f6e\u7684\u5206\u7ec4\u548c\u5b57\u6bb5",size:"small",extra:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsxs"])(antd_es_space__WEBPACK_IMPORTED_MODULE_4__["b"],{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("a",{href:"#",onClick:function(){var e={key:Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["I"])(),tf_title:"\u65b0\u589e\u7684\u5b57\u6bb5\u7ec4",xtype:"fieldset",parent:details[0]};e.title=getEditTitle(e),details[0].children.push(e),setDetails(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(details))},children:"\u65b0\u589e"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("a",{href:"#",onClick:function(){return deleteNode()},children:"\u5220\u9664"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("span",{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("a",{href:"#",onClick:function(){return saveGridScheme(details,gridScheme)},children:"\u4fdd\u5b58"})]}),children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_tree__WEBPACK_IMPORTED_MODULE_8__["a"],{className:"selectedgroupandfield",style:{height:"calc(100vh - 149px)",overflow:"auto"},checkable:!1,showLine:!1,showIcon:!0,icon:function(e){return e.iconCls?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])("span",{className:e.iconCls}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(_ant_design_icons__WEBPACK_IMPORTED_MODULE_24__["a"],{})},draggable:!0,treeData:details,expandedKeys:detailsExpandKey,onExpand:function(e){return setDetailsExpandKey(e)},selectedKeys:detailsSelectedKey,onSelect:function(e,t){setDetailsSelectedKey(e);var n=t.node,a=n.itemId;if(t.selected&&a){var i=a.substring(0,a.indexOf("|"));fetchSelectedModuleFields(hierarchyRef.current.getNodeFromItemId(i),e)}},onDrop:function(e){var t=e.node.key;e.dropToGap&&"root"!==t||e.node.itemId?Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["z"])(details,t,(function(t,n){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["z"])(details,e.dragNode.key,(function(e,a){e.parent.children.splice(a,1),Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(e,{parent:t.parent}),t.parent.children.splice(n+1,0,e)}))})):Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["z"])(details,t,(function(t){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["z"])(details,e.dragNode.key,(function(e,n){e.parent.children.splice(n,1),Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(e,{parent:t}),t.children||(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(t,{children:[]}),setDetailsExpandKey([].concat(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(detailsExpandKey),[t.key]))),t.children.unshift(e)}))})),setDetails(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(details))}})})})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(antd_es_modal__WEBPACK_IMPORTED_MODULE_16__["a"],{width:820,title:"\u7f16\u8f91\u5217\u8868\u5b57\u6bb5\uff1a".concat(editRecord.tf_title||editRecord.text),visible:modalVisible,onCancel:function(){setModalVisible(!1)},okText:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsxs"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["Fragment"],{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(_ant_design_icons__WEBPACK_IMPORTED_MODULE_25__["a"],{})," \u4fdd\u5b58"]}),onOk:function onOk(){var _form$current$getValu=form.current.getValues(),othersetting=_form$current$getValu.tf_otherSetting;if(othersetting){var s=othersetting.startsWith("{")?"".concat(othersetting):"{".concat(othersetting,"}");try{eval("(".concat(s,")"))}catch(e){return void alert("\u9644\u52a0\u8bbe\u7f6e\u89e3\u6790\u9519\u8bef\uff1a".concat(s))}}setModalVisible(!1),Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(editRecord,form.current.getValues()),editRecord.itemId||Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(editRecord,{text:editRecord.tf_title}),Object(_utils_utils__WEBPACK_IMPORTED_MODULE_21__["d"])(editRecord,{title:getEditTitle(editRecord)}),setDetails(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__["a"])(details))},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__["jsx"])(_DesignGridField__WEBPACK_IMPORTED_MODULE_28__["a"],{ref:form,moduleName:moduleName,init:Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},editRecord)})})]})}},MDUV:function(e,t,n){e.exports={avatar:"avatar___3NSlz",buttongroup:"buttongroup___1Ulwd"}},MGWp:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return g}));n("ozfa");var a=n("MJZm"),i=(n("5Dmo"),n("3S7+")),r=(n("qVdP"),n("jsC+")),c=(n("+L6B"),n("2/Rp")),o=(n("lUTK"),n("BvKs")),s=(n("5NDa"),n("5rEg")),l=n("q1tI"),d=n("7vBe"),u=n("vEXw"),p=n("79+z"),f=n("CSqm"),m=n("Ydf/"),b=n("nKUr"),j=s["a"].Search,h=1,_=function(e,t){e===h&&t({type:m["C"],payload:{}})},O=function(e,t,n,a,i){t({type:m["D"],payload:{fieldid:n,checkedKeys:a}});var r=e.navigates.find((function(e){return e.navigateGroup.fieldid===n})),c=!0;if(r&&(0!==a.length&&!a.find((function(e){return"root"===e}))||0!==r.checkedKeys.length&&!r.checkedKeys.find((function(e){return"root"===e}))||(c=!1)),c){h+=1;var o=h;setTimeout((function(){_(o,t)}),i)}},x=function(e){var t=e.navigate,n=e.state,s=e.dispatch,h=t.navigateGroup;Object(l["useEffect"])((function(){0===t.dataSource.length&&Object(f["a"])(n,t,[]).then((function(e){var t=["root"],n=[{title:h.title,selectable:!1,key:"root",rowid:"root",children:Object(f["b"])(e,h,null,h.fieldid,h.title,t)}];s({type:m["F"],payload:{fieldid:h.fieldid,dataSource:n,expandedKeys:t}})}))}),[]);var _=Object(b["jsxs"])(o["a"],{onClick:function(e){var n=e.key,a=n.split("-");Object(f["f"])(t,s,a[0],a[1])},children:[Object(b["jsx"])(o["a"].Item,{icon:p["a"],children:"\u8bb0\u5f55\u6570\u7531\u5927\u5230\u5c0f"},"count-desc"),Object(b["jsx"])(o["a"].Item,{icon:Object(b["jsx"])(d["a"],{}),children:"\u8bb0\u5f55\u6570\u7531\u5c0f\u5230\u5927"},"count-asc"),Object(b["jsx"])(o["a"].Item,{icon:Object(b["jsx"])(d["a"],{}),children:"\u8bb0\u5f55\u7f16\u7801\u5347\u5e8f"},"value-asc"),Object(b["jsx"])(o["a"].Item,{icon:p["a"],children:"\u8bb0\u5f55\u7f16\u7801\u964d\u5e8f"},"value-desc"),Object(b["jsx"])(o["a"].Item,{icon:Object(b["jsx"])(d["a"],{}),children:"\u8bb0\u5f55\u6587\u672c\u5347\u5e8f"},"text-asc"),Object(b["jsx"])(o["a"].Item,{icon:p["a"],children:"\u8bb0\u5f55\u6587\u672c\u964d\u5e8f"},"text-desc")]});return Object(b["jsxs"])(b["Fragment"],{children:[Object(b["jsxs"])("div",{style:{display:"flex",marginBottom:"8px",marginTop:"-4px"},children:[Object(b["jsx"])(r["a"],{overlay:_,trigger:["click"],children:Object(b["jsx"])(c["a"],{size:"small",shape:"circle",onClick:function(){},children:Object(b["jsx"])(d["a"],{})})}),Object(b["jsx"])(i["a"],{title:"\u9009\u4e2d\u548c\u672a\u9009\u4e2d\u6761\u4ef6\u4e92\u6362",children:Object(b["jsx"])(c["a"],{style:{margin:"0px 6px"},size:"small",shape:"circle",onClick:function(){Object(f["h"])(n,s,t)},children:Object(b["jsx"])(u["a"],{})})}),Object(b["jsx"])(j,{size:"small",placeholder:"\u641c\u7d22\u6587\u672c\u6216\u7b80\u5168\u62fc",style:{flex:1},defaultValue:t.search,allowClear:!0,onSearch:function(e){Object(f["g"])(t,e,s)}})]}),Object(b["jsx"])(a["a"],{checkable:!0,multiple:!0,draggable:!1,blockNode:!0,style:{whiteSpace:"nowrap"},treeData:t.dataSource,selectedKeys:t.selectedKeys,onSelect:function(e){s({type:m["I"],payload:{fieldid:h.fieldid,selectedKeys:e}})},checkedKeys:t.checkedKeys,onCheck:function(e){O(n,s,h.fieldid,e,m["X"])},expandedKeys:t.expandedKeys,onExpand:function(e){s({type:m["E"],payload:{fieldid:h.fieldid,expandedKeys:e}})}})]})},g=function(e){var t=e.navigate,n=e.state,a=e.dispatch,i=Object(l["useMemo"])((function(){return Object(b["jsx"])(x,{navigate:t,state:n,dispatch:a})}),[t.dataSource,t.expandedKeys,t.checkedKeys,t.selectedKeys]);return i}},MR8f:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n("bbsP");var a=n("/wGt"),i=(n("5Dmo"),n("3S7+")),r=n("tJVT"),c=n("sy1d"),o=n("79+z"),s=n("4g1a"),l=n("1x1c"),d=n("q1tI"),u=n("nKUr"),p=function(e){var t=e.moduleInfo,n=e.record,p=e.scheme,f=Object(d["useState"])(!1),m=Object(r["a"])(f,2),b=m[0],j=m[1],h=function(){var e={recordids:n[t.primarykey],moduleName:t.modulename,schemeid:p.schemeid,title:p.title,filetype:"pdf",inline:!0},a="".concat(c["API_HEAD"],"/platform/dataobjectexport/exportexcelscheme.do?").concat(Object(o["H"])(e));return Object(o["w"])(a,"".concat(p.title,".pdf"))};return Object(u["jsxs"])(i["a"],{title:"\u9884\u89c8".concat(p.title,"\u7684pdf\u6587\u4ef6"),children:[Object(u["jsx"])(s["a"],{onClick:function(){j(!0)}}),Object(u["jsx"])(a["a"],{title:Object(u["jsxs"])("span",{style:{display:"flex"},children:[Object(u["jsx"])("span",{style:{flex:1},children:"".concat(n[t.namefield]," \u7684 ").concat(p.title)}),Object(u["jsx"])("span",{style:{marginRight:"32px"},className:"ant-drawer-close",children:Object(u["jsx"])(i["a"],{title:"\u5728\u65b0\u6807\u7b7e\u9875\u4e2d\u6253\u5f00pdf\u6587\u4ef6",children:Object(u["jsx"])(l["a"],{rotate:90,onClick:function(){Object(o["A"])(h(),n[t.namefield],"pdf"),j(!1)}})})})]}),placement:"right",closable:!0,visible:b,width:"80%",bodyStyle:{padding:0,margin:0},style:{zIndex:1e6},onClose:function(){return j(!1)},children:Object(u["jsx"])("iframe",{style:o["y"]?{height:"".concat(document.body.clientHeight-32-22,"px")}:{},src:h(),width:"100%",height:"100%",marginWidth:0,title:"pdfpreview"})})]})}},MjNr:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return b}));var a=n("k1fw"),i=n("wd/R"),r=n.n(i),c=n("79+z"),o=n("WTWM"),s=n("jE+T"),l=n("RfA7"),d=n("NB5u"),u=n("Ydf/"),p=function(e,t){if(!e||0===Object.keys(e).length)return{};var n=Object(a["a"])({},e);return t.fields.forEach((function(e){var t=e.fieldname,a=e.multiMode;e.isDateField&&n[t]&&!Object(i["isMoment"])(n[t])&&(n[t]=r()(n[t],s["b"])),a&&n[t]&&(n[t]=n[t].split(","))})),delete n[d["f"]],delete n[u["R"]],n},f=function(e,t){var n=Object(a["a"])({},e);return t.fields.forEach((function(e){var t=e.fieldname,a=e.multiMode;if(a){var i=n[t];Array.isArray(i)&&(0===i.length?n[t]=void 0:n[t]=i.join(","))}})),n},m=function(e){var t=e.dest,n=e.sour,i=e.moduleInfo,r=Object(a["a"])({},t);return Object.keys(r).forEach((function(e){""===r[e]&&(r[e]=null);var t=Object(o["n"])(e,i);t&&t.isDateField?r[e]?r[e].isSame(n[e],s["b"])&&delete r[e]:n[e]||delete r[e]:r[e]===n[e]&&delete r[e]})),Object.keys(r).forEach((function(e){void 0===r[e]&&(r[e]=null)})),r},b=function(e,t,n){var a={},i=t.moduleName,d=t.dataSource,u=t.filters,f=u.navigate,m=u.parentfilter,b=t.selectedRowKeys,j=t.lastInsertRecord,h=Object(o["x"])(i),_=h.primarykey;h.fields.filter((function(e){return e.defaultvalue})).forEach((function(e){var t=e.defaultvalue,n=e.fieldname;a[n]=t,"true"===t?a[n]=!0:"false"===t?a[n]=!1:"now"===t&&(a[n]=r()())}));var O=e.getFieldsValue(),x={objectname:i,parentfilter:null,navigates:null};if(f.forEach((function(e){var t=e.fieldahead;if(t&&-1===t.indexOf(".")){var n=(t?"".concat(t,"."):"")+e.fieldName;if(n in O&&(a[n]=e.fieldvalue,t)){var i=Object(o["n"])(t,h),r=Object(o["x"])(i.fieldtype),c="".concat(t,".").concat(r.namefield);c in O&&(a[c]=e.text)}}})),m){var g=m.fieldahead;if(g&&-1===g.indexOf(".")){var v=(g?"".concat(g,"."):"")+m.fieldName;if(v in O&&(a[v]=m.fieldvalue,g)){var y=Object(o["n"])(g,h),E=Object(o["x"])(y.fieldtype),S="".concat(g,".").concat(E.namefield);S in O&&(a[S]=m.text)}}}return h.istreemodel&&h.codelevel&&(j?a[_]=Object(c["t"])(j[_]):b.length&&(a[_]=Object(c["t"])(Object(s["i"])(d,b[0],_)))),f.length&&(x.navigates=JSON.stringify(f)),m&&(x.parentfilter=JSON.stringify(m)),Object(l["A"])(x).then((function(t){Object(c["E"])(t.resultInfo);var a=p(t.data,h);a&&(e.setFieldsValue(Object(c["d"])(e.getFieldsValue(),a)),n&&n((function(e){return e+1})))})),a}},MpMJ:function(e,t,n){},MrJO:function(e,t,n){"use strict";n.d(t,"b",(function(){return P}));n("qVdP");var a=n("jsC+"),i=(n("Awhp"),n("KrTs")),r=(n("5Dmo"),n("3S7+")),c=(n("+L6B"),n("2/Rp")),o=(n("lUTK"),n("BvKs")),s=(n("miYZ"),n("tsqr")),l=(n("2qtc"),n("kLXV")),d=(n("/xke"),n("TeRw")),u=n("tJVT"),p=n("q1tI"),f=n("Lyp1"),m=n("G3dp"),b=n("/MfK"),j=n("Mo4S"),h=n("4g1a"),_=n("79+z"),O=n("WTWM"),x=n("RfA7"),g=n("HFZ8"),v=n("rRzd"),y=n("zVf2"),E=n("jE+T"),S=n("oNIl"),C=n("TtZX"),I=n("93hP"),D=n("nKUr"),k=Object(D["jsx"])(f["a"],{style:{visibility:"hidden"}}),w=function(e){var t=e.moduleState,n=e.dispatch,S=e.readOnly,w=t.moduleName,P=Object(O["x"])(w),T=t.selectedRowKeys.length,M=Object(p["useState"])(!1),A=Object(u["a"])(M,2),R=A[0],N=A[1],L=Object(p["useState"])(!1),B=Object(u["a"])(L,2),K=B[0],F=B[1],U=Object(p["useState"])(!1),W=Object(u["a"])(U,2),V=W[0],q=W[1],z=t.selectedRowKeys.map((function(e){var n;return null===(n=t.selectedTextValue.find((function(t){return t.value===e})))||void 0===n?void 0:n.text})),G='<ol style="list-style-type:decimal;"><li>'.concat(z.join("</li><li>"),"</li></ol>"),J=Object(D["jsxs"])(D["Fragment"],{children:[Object(D["jsx"])(f["a"],{style:{color:"#faad14",fontSize:"18px",marginRight:"6px"}}),"\u786e\u5b9a\u8981\u5220\u9664".concat(P.title,"\u5f53\u524d\u9009\u4e2d\u7684 ").concat(t.selectedRowKeys.length," \u6761\u8bb0\u5f55\u5417?")]}),H=function(){F(!0),Object(x["c"])({moduleName:w,ids:t.selectedRowKeys.join(","),titles:z.join("~~")}).then((function(e){if(0===e.resultCode||e.okMessageList.length>0){var t='<ol style="list-style-type:decimal;"><li>'.concat(e.okMessageList.join("</li><li>"),"</li></ol>");d["default"].success({message:"".concat(P.title,"\u4ee5\u4e0b ").concat(e.okMessageList.length," \u6761\u8bb0\u5f55\u5df2\u88ab\u5220\u9664"),description:Object(D["jsx"])("span",{dangerouslySetInnerHTML:{__html:t}})}),n({type:"modules/fetchData",payload:{moduleName:w,forceUpdate:!0}})}if(e.errorMessageList.length>0){var a='<ol style="list-style-type:decimal;"><li>'.concat(e.errorMessageList.join("</li><li>"),"</li></ol>");l["a"].warning({width:550,okText:"\u77e5\u9053\u4e86",title:"".concat(P.title,"\u4ee5\u4e0b ").concat(e.errorMessageList.length," \u6761\u8bb0\u5f55\u5220\u9664\u5931\u8d25"),content:Object(D["jsx"])("span",{dangerouslySetInnerHTML:{__html:a}})})}})).finally((function(){F(!1),N(!1)}))},Y=function(){Object(x["a"])({moduleName:w,ids:t.selectedRowKeys.join(","),titles:z.join("~~")}).then((function(e){var t=e.resultInfo;if(t.success&&t.success.length>0){var a='<ol style="list-style-type:decimal;"><li>'.concat(t.success.join("</li><li>"),"</li></ol>");d["default"].success({message:"".concat(P.title,"\u4ee5\u4e0b ").concat(t.success.length," \u6761\u8bb0\u5f55\u5df2\u88ab\u5ba1\u6838"),description:Object(D["jsx"])("span",{dangerouslySetInnerHTML:{__html:a}})}),n({type:"modules/fetchData",payload:{moduleName:w,forceUpdate:!0}})}if(t.error&&t.error.length>0){var i='<ol style="list-style-type:decimal;"><li>'.concat(t.error.join("</li><li>"),"</li></ol>");l["a"].warning({width:550,okText:"\u77e5\u9053\u4e86",title:"".concat(P.title,"\u4ee5\u4e0b ").concat(t.error.length," \u6761\u8bb0\u5f55\u5ba1\u6838\u5931\u8d25"),content:Object(D["jsx"])("span",{dangerouslySetInnerHTML:{__html:i}})})}}))},Z=function(){var e=P.additionFunctions;if(!e.length)return null;var a=e.filter((function(e){return"toolbar"!==e.menuname}));if(!a.length)return null;var i=a.map((function(e){return Object(D["jsx"])(o["a"].Item,{icon:Object(_["s"])(e.iconcls),onClick:function(){q(!1);var a=e.minselectrecordnum,i=e.maxselectrecordnum,r=t.selectedRowKeys.length;if(a>r)s["default"].warn("\u8bf7\u5148\u9009\u62e9 ".concat(a," \u6761\u8bb0\u5f55,\u7136\u540e\u518d").concat(e.title,"\uff01"));else if(i&&i<r)s["default"].warn("\u8981".concat(e.title).concat(1===i?"\u53ea\u80fd":"\u6700\u591a","\u9009\u62e9 ").concat(i," \u6761\u8bb0\u5f55\uff01"));else{var c={moduleInfo:P,moduleState:t,dispatch:n,funcDefine:e,record:Object(E["o"])(t),records:Object(E["p"])(t)};y["a"][e.fcode]?y["a"][e.fcode](c):s["default"].error("".concat(P.title,"\u529f\u80fd\u300e").concat(e.title,"\u300f\u7684\u6267\u884c\u51fd\u6570\u201c").concat(e.fcode,"\u201d\u6ca1\u6709\u627e\u5230\uff01"))}},children:e.title},e.fcode)}));return i.push(Object(D["jsx"])(o["a"].Divider,{},"_menu_divider3_")),i},Q=function(e){var t=Object(O["x"])(e.moduleName),n=[];return Object(E["p"])(e).forEach((function(e){var a=Object(O["e"])(t,e);a.canDelete||n.push(a.message)})),n.length&&d["default"].warning({message:"\u4ee5\u4e0b ".concat(n.length," \u6761\u4e0d\u80fd\u5220\u9664\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u540e\u518d\u5220\u9664\u3002"),description:n.map((function(e,t){return Object(D["jsx"])("div",{children:"".concat(t+1,"\u3001").concat(e)})})),style:{width:"500px"}}),!n.length},$=function(e){var t=Object(O["x"])(e.moduleName),n=[];return Object(E["p"])(e).forEach((function(e){var a=Object(I["c"])(e);a||n.push(e[t.namefield])})),n.length&&d["default"].warning({message:"\u4ee5\u4e0b ".concat(n.length," \u6761\u4e0d\u80fd\u5ba1\u6838\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u540e\u518d\u6279\u91cf\u5ba1\u6838\u3002"),description:n.map((function(e,t){return Object(D["jsx"])("div",{children:"".concat(t+1,"\u3001").concat(e)})})),style:{width:"500px"}}),!n.length},X=function(e){var t=0;return Object(E["p"])(e).forEach((function(e){Object(I["c"])(e)&&(t+=1)})),t},ee=Object(D["jsxs"])(o["a"],{children:[P.moduleLimit.hasaudit&&X(t)?[Object(D["jsxs"])(o["a"].Item,{icon:Object(D["jsx"])(m["a"],{}),onClick:function(){q(!1),$(t)&&Y()},children:["\u6279\u91cf\u5ba1\u6838\u9009\u4e2d\u7684 ",T," \u6761\u8bb0\u5f55"]},"auditSelectRecords"),Object(D["jsx"])(o["a"].Divider,{})]:null,Object(O["D"])(P)&&!S?Object(D["jsxs"])(o["a"].Item,{danger:!0,icon:Object(D["jsx"])(b["a"],{}),onClick:function(){q(!1),Q(t)&&N(!0)},children:["\u5220\u9664\u9009\u4e2d\u7684 ",T," \u6761\u8bb0\u5f55"]},"deleteSelectRecords"):null,Object(O["D"])(P)&&!S?Object(D["jsx"])(o["a"].Divider,{}):null,S?null:Z(),Object(D["jsxs"])(o["a"].Item,{icon:Object(D["jsx"])(j["a"],{}),onClick:function(){Object(v["b"])({moduleState:t,key:"toExcel",topdf:!1,onlyselected:!0})},children:["\u9009\u4e2d\u8bb0\u5f55\u5bfc\u51faExcel\u6587\u6863",Object(D["jsx"])(r["a"],{title:"\u5bfc\u51faPdf\u6587\u4ef6",placement:"topRight",children:Object(D["jsx"])(c["a"],{style:{float:"right",paddingRight:"5px"},type:"link",size:"small",onClick:function(e){e.stopPropagation(),q(!1),Object(v["b"])({moduleState:t,key:"toExcel",topdf:!0,onlyselected:!0})},children:Object(D["jsx"])(h["a"],{style:{marginLeft:"10px"}})})})]},"toExcel"),Object(D["jsx"])(o["a"].Divider,{}),Object(v["a"])({moduleState:t,setVisible:q,onlyselected:!0}),Object(g["a"])({moduleState:t,setVisible:q}),Object(C["a"])({moduleState:t,setVisible:q}),Object(D["jsx"])(o["a"].Item,{icon:k,onClick:function(){n({type:"modules/resetSelectedRow",payload:{moduleName:t.moduleName}})},children:"\u53d6\u6d88\u6240\u6709\u9009\u4e2d\u8bb0\u5f55"},"none")]});return Object(D["jsxs"])(D["Fragment"],{children:[Object(D["jsx"])(a["a"],{overlay:ee,visible:V,onVisibleChange:function(e){return q(e)},children:Object(D["jsxs"])(c["a"],{children:["\u6279\u91cf\u64cd\u4f5c",Object(D["jsx"])(i["a"],{count:T,offset:[5,0],style:{backgroundColor:"#108ee9"}})]})}),Object(D["jsx"])(l["a"],{title:J,visible:R,okText:Object(D["jsxs"])(D["Fragment"],{children:[Object(D["jsx"])(b["a"],{})," \u5220 \u9664"]}),okType:"danger",okButtonProps:{type:"primary"},onOk:H,onCancel:function(){return N(!1)},confirmLoading:K,children:Object(D["jsx"])("span",{dangerouslySetInnerHTML:{__html:G}})})]})},P=function(e){var t=e.moduleState,n=e.dispatch,a=e.position,i=t.moduleName,r=Object(O["x"])(i),o=r.additionFunctions;if(!o.length)return null;var l=o.filter((function(e){var n=e.minselectrecordnum;return!(n>0&&0===t.selectedRowKeys.length)&&(e.menuname===a&&(!e.visibleWithEmpty||e.visibleWithEmpty&&0===t.dataSource.length)&&(!e.visibleWithRecord||e.visibleWithRecord&&t.dataSource.length>0)&&(!e.needParentFilter||e.needParentFilter&&t.filters.parentfilter))}));if(!l.length)return null;var d=l.map((function(e){var a={moduleInfo:r,moduleState:t,dispatch:n,funcDefine:e,record:Object(E["o"])(t),records:Object(E["p"])(t)};return S["a"][e.fcode]?S["a"][e.fcode](a):Object(D["jsx"])(c["a"],{icon:Object(_["s"])(e.iconcls),onClick:function(){var n=e.minselectrecordnum,i=e.maxselectrecordnum,c=t.selectedRowKeys.length;n>c?s["default"].warn("\u8bf7\u5148\u9009\u62e9 ".concat(n," \u6761\u8bb0\u5f55,\u7136\u540e\u518d").concat(e.title,"\uff01")):i&&i<c?s["default"].warn("\u8981".concat(e.title).concat(1===i?"\u53ea\u80fd":"\u6700\u591a","\u9009\u62e9 ").concat(i," \u6761\u8bb0\u5f55\uff01")):y["a"][e.fcode]?y["a"][e.fcode](a):s["default"].error("".concat(r.title,"\u529f\u80fd\u300e").concat(e.title,"\u300f\u7684\u6267\u884c\u51fd\u6570\u201c").concat(e.fcode,"\u201d\u6ca1\u6709\u627e\u5230\uff01"))},children:e.title},e.fcode)}));return d};t["a"]=w},MzlM:function(e,t,n){"use strict";n("bbsP");var a=n("/wGt"),i=(n("P2fV"),n("NJEC")),r=(n("+L6B"),n("2/Rp")),c=(n("2qtc"),n("kLXV")),o=(n("miYZ"),n("tsqr")),s=(n("5Dmo"),n("3S7+")),l=(n("DYRE"),n("zeV3")),d=(n("tU7J"),n("wFql")),u=n("k1fw"),p=(n("y8nQ"),n("Vl3Y")),f=n("tJVT"),m=n("q1tI"),b=n("G3dp"),j=n("xvlK"),h=n("lkk+"),_=n("/Faj"),O=n("Ue1A"),x=n("rLCj"),g=n("dF/Y"),v=n("FKDb"),y=n("IehP"),E=n("3R4v"),S=n("GYYy"),C=n("4i/N"),I=n("5bA4"),D=n("UESt"),k=n("Drea"),w=n("lfch"),P=n("ga3A"),T=n("Lyp1"),M=n("k5nK"),A=n("79+z"),R=n("Hx5s"),N=n("FRQA"),L=n("kDbe"),B=n("RfA7"),K=n("h7P/"),F=n("nKUr"),U=function(e){var t=Object(m["useState"])(!1),n=Object(f["a"])(t,2),a=n[0],r=n[1],c=e.changed,o=e.title,s=e.confirmAction,l=e.children,d=e.placement,u=function(){r(!1),s()},p=function(){r(!1)},b=function(e){e?c?r(!0):u():r(e)};return Object(F["jsx"])(i["a"],{placement:d||"top",title:o||"\u5f53\u524d\u8bb0\u5f55\u5df2\u4fee\u6539\u5c1a\u672a\u4fdd\u5b58\uff0c\u786e\u5b9a\u8981\u653e\u5f03\u4fee\u6539\u5417\uff1f",okText:"\u653e\u5f03\u4fee\u6539",cancelText:"\u7ee7\u7eed\u7f16\u8f91",visible:a,onVisibleChange:b,onConfirm:u,onCancel:p,icon:Object(F["jsx"])(T["a"],{}),children:l})},W=U,V=n("MjNr"),q=n("WTWM"),z=(n("qVdP"),n("jsC+")),G=(n("lUTK"),n("BvKs")),J=n("bRQS"),H=n("eFNv"),Y=["modal","drawer","mainregion"],Z={modal:"\u7a97\u53e3\u5f0f",drawer:"\u62bd\u5c49\u5f0f",mainregion:"\u4e3b\u533a\u57df"},Q="\u8868\u5355\u663e\u793a\u4f4d\u7f6e",$=function(e){var t=e.moduleName,n=e.formState,a=e.dispatch,i=e.changed,r=e.moduleState,c=n.showType,s=Object(F["jsx"])(G["a"],{onClick:function(e){var r=e.key;i?o["default"].warn("\u8bf7\u5148\u4fdd\u5b58\u6b64\u8bb0\u5f55\u518d\u6267\u884c\u6539\u53d8".concat(Q,"\u7684\u64cd\u4f5c\uff01")):a({type:"modules/formStateChanged",payload:{moduleName:t,formState:Object(u["a"])(Object(u["a"])({},n),{},{showType:r})}})},children:Object(F["jsx"])(G["a"].ItemGroup,{title:Q,children:Y.map((function(e){return Object(F["jsx"])(G["a"].Item,{disabled:!("mainregion"!==e||!r.filters.parentfilter),icon:Object(F["jsx"])(J["a"],{style:{visibility:c===e?"visible":"hidden"}}),children:Z[e]},e)}))})});return Object(F["jsx"])(z["a"],{overlay:s,trigger:["click"],children:Object(F["jsx"])(H["a"],{})})},X=n("zVf2"),ee=n("r5oo"),te=n("PpiC"),ne=n("fWQN"),ae=n("mtLc"),ie=n("yKVA"),re=n("879j"),ce=n("jYQm"),oe=n("TSYQ"),se=n.n(oe),le=n("EPaA"),de=n.n(le),ue=function(e){Object(ie["a"])(n,e);var t=Object(re["a"])(n);function n(){var e;Object(ne["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),e.getWidth=function(e){var t=e.collapsed,n=e.isMobile,a=e.siderWidth,i=document.querySelector(".ant-layout-sider");if(i)return n?void 0:"calc(100% - ".concat(t?80:a||256,"px)")},e}return Object(ae["a"])(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.className,i=t.extra,r=Object(te["a"])(t,["children","className","extra"]);return Object(F["jsx"])(ce["a"].Consumer,{children:function(t){return Object(F["jsxs"])("div",Object(u["a"])(Object(u["a"])({className:se()(a,de.a.toolbar),style:{width:e.getWidth(t),transition:"0.3s all"}},r),{},{children:[Object(F["jsx"])("div",{className:de.a.left,children:i}),Object(F["jsx"])("div",{className:de.a.right,children:n})]}))}})}}]),n}(m["Component"]),pe=n("jE+T"),fe=n("MR8f"),me=n("93hP"),be=n("oNIl"),je=n("TtZX"),he=n("NB5u"),_e=function(e){var t=e.moduleInfo,n=e.moduleState,U=e.dispatch,z=e.callback,G=e.hiddenSetNull,J=n.formState,H=J.visible,Y=J.currRecord,Z=J.formType,Q=J.showType,te=t.modulename,ne=t.primarykey,ae=t.namefield,ie=t.moduleLimit,re=t.userLimit,ce=t.formschemes[0],oe=p["a"].useForm(),se=Object(f["a"])(oe,1),le=se[0],de=Object(m["useState"])(0),_e=Object(f["a"])(de,2),Oe=_e[1],xe=Object(m["useState"])(!1),ge=Object(f["a"])(xe,2),ve=ge[0],ye=ge[1],Ee=Object(m["useState"])({}),Se=Object(f["a"])(Ee,2),Ce=Se[0],Ie=Se[1],De=Object(m["useState"])(!1),ke=Object(f["a"])(De,2),we=ke[0],Pe=ke[1],Te=Object(m["useState"])(!1),Me=Object(f["a"])(Te,2),Ae=Me[0],Re=Me[1],Ne=Object(m["useState"])(0),Le=Object(f["a"])(Ne,2),Be=Le[0],Ke=Le[1],Fe=Object(m["useState"])(!1),Ue=Object(f["a"])(Fe,2),We=Ue[0],Ve=Ue[1],qe=function(e){U({type:"modules/formStateChanged",payload:{moduleName:te,formState:e}})};if(Object(m["useEffect"])((function(){Ke(0),le.resetFields(),Ie({}),le.setFieldsValue(Object(V["b"])(Y,t)),H&&"insert"===Z&&!ve&&setTimeout((function(){le.setFieldsValue(Object(A["d"])(le.getFieldsValue(),Object(V["d"])(le,n,Oe)))}),0),"edit"===Z&&Pe(!Object(q["f"])(t,Y).canEdit)}),[Y]),("mainregion"===Q||G)&&!H)return null;var ze=function(){qe(Object(u["a"])(Object(u["a"])({},J),{},{visible:!1})),setTimeout((function(){Pe(!1),ye(!1),Ke(0),le.resetFields()}),0),z&&setTimeout((function(){z()}),0)},Ge=function(){var e=le.getFieldValue(t.namefield)||Y[t.namefield];return Object(F["jsxs"])(l["b"],{children:["edit"===Z?Object(F["jsx"])(b["a"],{}):"insert"===Z?Object(F["jsx"])(j["a"],{}):"display"===Z?Object(F["jsx"])(h["a"],{}):"approve"===Z?Object(F["jsx"])(_["a"],{}):"audit"===Z?Object(F["jsx"])(O["a"],{}):Z,Object(F["jsxs"])("span",{style:{fontWeight:400,marginLeft:"4px"},children:[" ",t.title]}),Object(F["jsx"])("span",{style:{fontSize:"16px"},children:e?" \u300e ".concat(e,"\u300f"):null}),t.moduleLimit.hasapprove&&Y[ne]&&"VActRuTask"!==te?Object(F["jsxs"])(d["a"].Text,{type:"secondary",code:!0,children:[Object(F["jsx"])("span",{className:Object(ee["e"])(t,Y),style:{marginRight:"4px"}}),Y.actProcState]}):null,t.moduleLimit.hasaudit&&Y[ne]?Object(me["f"])(Y)?he["a"]:he["b"]:null]})},Je=function(){var e=function(){return"insert"===Z||t.moduleLimit.hassqlparam?null:Object(F["jsx"])(s["a"],{title:"\u5237\u65b0\u5f53\u524d\u8bb0\u5f55",children:Object(F["jsx"])(x["a"],{onClick:function(){U({type:"modules/refreshRecord",payload:{moduleName:te,recordId:Y[ne]}})}})})},a=function(){var e;return ie.hasattachment&&null!==(e=re.attachment)&&void 0!==e&&e.query&&Y[ne]?Object(F["jsx"])(K["a"],{value:null===Y||void 0===Y?void 0:Y.attachmentdata,record:Y,_recno:0,moduleInfo:t,dispatch:U,isLink:!1,readonly:!!Be}):null},i=function(){if(!Y[ne]||Be)return null;var e=t.additionFunctions,a=[];return e.forEach((function(e){if(1===e.minselectrecordnum&&1===e.maxselectrecordnum&&!e.disableInForm){var i={moduleInfo:t,moduleState:n,dispatch:U,funcDefine:e,record:Y};a.push(be["a"][e.fcode]?be["a"][e.fcode](i):Object(F["jsx"])(s["a"],{title:e.title,children:Object(F["jsx"])("span",{className:e.iconcls,onClick:function(){X["a"][e.fcode]?X["a"][e.fcode](i):o["default"].error("".concat(t.title,"\u529f\u80fd\u300e").concat(e.title,"\u300f\u7684\u6267\u884c\u51fd\u6570\u201c").concat(e.fcode,"\u201d\u6ca1\u6709\u627e\u5230\uff01"))}})}))}})),a},r=function(){if(!Y[ne]||Be)return null;var e=t.excelSchemes;if(e&&e.length>0){var n=e[0],a=function(e){Object(B["e"])({recordids:Y[t.primarykey],moduleName:t.modulename,schemeid:n.schemeid,filetype:e})};return[n.onlypdf?null:Object(F["jsx"])(s["a"],{title:"\u5bfc\u51fa".concat(n.title),children:Object(F["jsx"])(g["a"],{onClick:function(){a(null)}})},"_download_"),Object(F["jsx"])(fe["a"],{moduleInfo:t,record:Y,scheme:n},"_recordpdf_")]}return null},c=function(){if(!Y[ne]||Be)return null;var e=t.recordPrintSchemes;return e&&e.length>0?e.map((function(e){return Object(F["jsx"])(s["a"],{title:"\u6253\u5370".concat(e.title),children:Object(F["jsx"])(v["a"],{onClick:function(){Object(je["b"])({moduleName:te,scheme:e,record:Y})}})},"".concat(e.schemeid,"_printrecord_"))})):null};return Object(F["jsxs"])(l["b"],{children:[a(),r(),c(),i(),Object(F["jsx"])($,{moduleName:te,moduleState:n,dispatch:U,formState:J,changed:!!Be}),e(),"mainregion"===Q?null:We?Object(F["jsx"])(s["a"],{title:"\u8fd8\u539f",children:Object(F["jsx"])(y["a"],{onClick:function(){return Ve(!1)}})}):Object(F["jsx"])(s["a"],{title:"\u6700\u5927\u5316",children:Object(F["jsx"])(E["a"],{onClick:function(){return Ve(!0)}})})]})},He=function(){return Object(F["jsxs"])("span",{style:{display:"flex"},children:[Ge(),Object(F["jsx"])("span",{style:{flex:1}}),Je()," "]})},Ye=function(e){var n=Object(V["a"])(e,t);if("edit"===Z){var a=Object(V["c"])({dest:n,sour:Y,moduleInfo:t});return a[ne]=Y[ne],a}return"insert"===Z||o["default"].error("\u672a\u6307\u5b9a\u7684\u8868\u5355\u7c7b\u578b\uff1a".concat(Z)),n},Ze=function(){if("edit"===Z){var e=Object(q["f"])(t,Y);if(!e.canEdit)return void o["default"].warn(e.message)}le.validateFields().then((function(e){Ie({}),Re(!0),Object(B["I"])({moduleName:te,opertype:Z,data:Ye(e)}).then((function(e){var n=e.data;if(e.success)ye(!0),o["default"].success("".concat(t.title,"\u7684\u300e").concat(n[t.namefield],"\u300f\u4fdd\u5b58\u6210\u529f\uff01")),Object(A["E"])(e.resultInfo),"insert"===Z&&Pe(!0),qe(Object(u["a"])(Object(u["a"])({},J),{},{currRecord:n})),"insert"===Z?(Object(q["K"])(te,n),U({type:"modules/insertRecord",payload:{moduleName:te,record:n}})):U({type:"modules/updateRecord",payload:{moduleName:te,record:n}});else{var a=e.message?[Object(F["jsx"])("div",{children:Object(F["jsx"])("li",{children:"string"===typeof e.message?e.message:JSON.stringify(e.message)})})]:[],i=e.data;i&&(Ie(i),Object.keys(i).forEach((function(e){var n=Object(q["n"])(e,t);a.push(Object(F["jsx"])("div",{children:Object(F["jsxs"])("li",{children:[Object(F["jsx"])("b",{children:n?n.fieldtitle:e}),"\uff1a",i[e]]})}))}))),c["a"].error({width:500,title:"\u8bb0\u5f55\u4fdd\u5b58\u65f6\u53d1\u751f\u9519\u8bef",content:Object(F["jsx"])("ul",{style:{listStyle:"decimal"},children:a})})}})).finally((function(){Re(!1)}))})).catch((function(e){console.warn(e)}))},Qe=function(){if(!n.dataSource)return null;var e=Object(F["jsx"])(W,{changed:!!Be,confirmAction:ze,children:Object(F["jsx"])(r["a"],{type:"audit"===Z||Be||ve?"default":"primary",children:"mainregion"===Q?Object(F["jsxs"])(F["Fragment"],{children:[Object(F["jsx"])(S["a"],{})," \u8fd4\u56de\u5217\u8868"]}):Object(F["jsxs"])(F["Fragment"],{children:[Object(F["jsx"])(C["a"],{})," \u5173\u95ed"]})},"closeButton")},"closeButton"),a=function(e){var n=Object(u["a"])({},e);return delete n[ne],t.fields.forEach((function(e){e.allownew||delete n[e.fieldname]})),n},c=function(e){Pe(!1),ye(!1),qe(Object(u["a"])(Object(u["a"])({},J),e))},o=function(e){U({type:"modules/selectedRowKeysChanged",payload:{moduleName:te,selectedRowKeys:[e[ne]]}}),c({currRecord:Object(u["a"])({},e)})},s=n.dataSource.findIndex((function(e){return e[ne]===Y[ne]})),l=-1!==s?Object(F["jsx"])(r["a"],{disabled:s<=0,onClick:function(){if(s>0){var e=n.dataSource[s-1];o(e)}},children:Object(F["jsx"])(I["a"],{})},"priorButton"):null,d=-1!==s?Object(F["jsx"])(r["a"],{disabled:s===n.dataSource.length-1,onClick:function(){if(s<n.dataSource.length-1){var e=n.dataSource[s+1];o(e)}},children:Object(F["jsx"])(D["a"],{})},"nextButton"):null,p=Object(q["E"])(t)?Object(F["jsxs"])(r["a"],{onClick:function(){return c({formType:"edit",currRecord:Object(u["a"])({},Y)})},children:[Object(F["jsx"])(b["a"],{}),"\u4fee\u6539"]},"editAfterInsertButton"):null,f=Object(F["jsxs"])(r["a"],{onClick:function(){return Object(ee["h"])(t,Y,U)},children:[Object(F["jsx"])(k["a"],{}),"\u542f\u52a8\u6d41\u7a0b"]}),m=Object(q["F"])(t)?Object(F["jsxs"])(r["a"],{type:"primary",onClick:function(){return c({formType:"insert",currRecord:{}})},children:[Object(F["jsx"])(j["a"],{}),"\u7ee7\u7eed\u65b0\u5efa"]},"insertButton"):null,h=Object(q["F"])(t)?Object(F["jsxs"])(r["a"],{onClick:function(){return c({formType:"insert",currRecord:{}})},children:[Object(F["jsx"])(j["a"],{}),"\u65b0\u5efa"]},"insertAfterEditButton"):null,_=t.moduleLimit.allownewinsert&&Object(q["F"])(t)?Object(F["jsxs"])(r["a"],{onClick:function(){return c({formType:"insert",currRecord:a(Y)})},children:[Object(F["jsx"])(w["a"],{}),"\u590d\u5236\u65b0\u5efa"]},"copyInsertButton"):null,O=t.moduleLimit.allownewinsert&&1===n.selectedRowKeys.length&&!Be&&0===Object.getOwnPropertyNames(Y).length?Object(F["jsxs"])(r["a"],{onClick:function(){return c({formType:"insert",currRecord:a(Object(pe["o"])(n))})},children:[Object(F["jsx"])(w["a"],{}),"\u8bfb\u5165\u9009\u4e2d\u8bb0\u5f55"]},"importRecordInsertButton"):null,x=Object(F["jsxs"])(r["a"],{type:"primary",loading:Ae,disabled:!Be,onClick:function(){Ze()},children:[Object(F["jsx"])(P["a"],{}),"\u4fdd\u5b58"]},"saveButton"),g=Object(F["jsxs"])(r["a"],{type:"primary",loading:Ae,onClick:function(){Object(me["a"])(Y,t,U)},children:[Object(F["jsx"])(P["a"],{}),"\u901a\u8fc7\u5ba1\u6838"]},"auditButton"),v=Object(F["jsx"])(i["a"],{icon:Object(F["jsx"])(T["a"],{style:{color:"red"}}),title:"\u8981\u53d6\u6d88 ".concat(Y[ae]," \u7684\u5ba1\u6838\u5417?"),onConfirm:function(){return Object(me["e"])(Y,t,U)},children:Object(F["jsxs"])(r["a"],{danger:!0,loading:Ae,children:[Object(F["jsx"])(M["a"],{}),"\u53d6\u6d88\u5ba1\u6838"]},"auditButton")});return"insert"===Z?ve?Object(F["jsxs"])(F["Fragment"],{children:[e,p,ie.hasaudit&&Object(me["c"])(Y)?g:null,Object(ee["d"])(t,Y)&&!Object(ee["g"])(Y)?f:null,_,m]}):Object(F["jsxs"])(F["Fragment"],{children:[Object(F["jsx"])("span",{style:{float:"left",marginRight:"12px"},children:O}),e,x]}):"edit"===Z?Be?Object(F["jsxs"])(F["Fragment"],{children:[e,x]}):Object(F["jsxs"])(F["Fragment"],{children:[Object(F["jsxs"])("span",{style:{float:"left",marginRight:"8px"},children:[l,d,h,ie.hasaudit&&Object(me["c"])(Y)?g:null]}),e,x]}):"audit"===Z?Object(F["jsxs"])(F["Fragment"],{children:[Object(F["jsxs"])("span",{style:{float:"left",marginRight:"8px"},children:[l,d]}),e,Object(me["c"])(Y)?g:null,Object(me["d"])(Y,t)?v:null]}):Object(F["jsxs"])(F["Fragment"],{children:[Object(F["jsxs"])("span",{style:{float:"left",marginRight:"8px"},children:[l,d,"approve"!==Z?h:null]}),e]})},$e=function(e){if("audit"===Z||"approve"===Z||"display"===Z)return o["default"].warn("\u5f53\u524d\u8868\u5355\u72b6\u6001\u4e0d\u5141\u8bb8\u4fee\u6539"),le.resetFields(),void le.setFieldsValue(Object(V["b"])(Y,t));Be&&!e[ae]||Ke((function(e){return e+1}))};Object(A["d"])(le,{onValuesChange:$e});var Xe=ce.centered,et=ce.formLayout,tt=ce.formSize,nt=ce.requiredMark;nt=!1!==nt,et="vertical"===et?"vertical":"horizontal",tt="small"===tt||"large"===tt?tt:"middle";var at="vertical"===et?{}:{flex:"0 0 ".concat(ce.labelWidth||120,"px")},it=Object(L["a"])({moduleInfo:t,moduleState:n,callback:z,details:ce.details,form:le,currRecord:Y,showType:Q,formType:Z,fieldsValidate:Ce,readOnly:we,setV:Oe,dispatch:U,requiredMark:nt,parentCols:0}),rt=Object(F["jsx"])(p["a"],{className:"moduleform",autoComplete:"off",onValuesChange:$e,form:le,labelCol:at,layout:et,requiredMark:nt,size:tt,children:"mainregion"===Q?Object(F["jsx"])(l["b"],{direction:"vertical",size:"middle",children:it}):it},"form_".concat(te,"_").concat(Z,"_").concat(Q)),ct=We?"100%":ce.width>0?"".concat(Math.min(document.body.clientWidth,ce.width),"px"):"".concat(Math.abs(ce.width),"%"),ot={title:He(),visible:H,width:ct,closable:!1};return"mainregion"===Q?Object(F["jsx"])(R["a"],{className:"pageheaderformwrapper",title:Object(F["jsxs"])(F["Fragment"],{children:[Object(F["jsx"])(W,{placement:"bottom",changed:!!Be,confirmAction:ze,children:"mainregion"===Q?Object(F["jsx"])(s["a"],{title:"\u8fd4\u56de\u5217\u8868\u754c\u9762",children:Object(F["jsx"])("a",{children:Object(F["jsx"])(S["a"],{style:{padding:"0 12px",fontSize:"16px"}})})}):Object(F["jsx"])(C["a"],{})}),Object(F["jsx"])("span",{className:"ant-page-header-heading-title",children:Ge()})]}),extra:Object(F["jsx"])("span",{className:"ant-modal-title",style:{marginRight:"24px"},children:Je()}),children:Object(F["jsxs"])(N["a"],{children:[rt,Object(F["jsx"])(ue,{children:Qe()})]})}):"drawer"===Q?Object(F["jsx"])(a["a"],Object(u["a"])(Object(u["a"])({onClose:Be?function(){}:ze,destroyOnClose:!0},ot),{},{footer:Object(F["jsx"])("div",{style:{borderTop:"0px solid #f0f0f0",padding:0},className:"ant-modal-footer",children:Qe()}),bodyStyle:{padding:"0px 24px"},title:Ge(),extra:Je(),children:rt})):Object(F["jsx"])(c["a"],Object(u["a"])(Object(u["a"])({onCancel:Be?function(){}:ze,destroyOnClose:!0},ot),{},{centered:!!Xe,footer:Qe(),bodyStyle:{maxHeight:"".concat(Math.floor(.9*(document.body.clientHeight-110)),"px"),overflowY:"auto",padding:"0px 24px"},children:rt}))};t["a"]=_e},N7gI:function(e,t,n){e.exports={__depends__:[n("Rgs+"),n("tx4b").default],__init__:["propertiesProvider"],propertiesProvider:["type",n("7Xn+")]}},Nqmu:function(e,t,n){"use strict";var a=1e3;function i(e,t){var n=this;t=t||a,e.on("propertiesPanel.isEntryVisible",t,(function(e){return n.isEntryVisible(e.entry,e.element)})),e.on("propertiesPanel.isPropertyEditable",t,(function(e){return n.isPropertyEditable(e.entry,e.propertyName,e.element)}))}i.$inject=["eventBus"],e.exports=i,i.prototype.isEntryVisible=function(e,t){return!0},i.prototype.isPropertyEditable=function(e,t,n){return!0}},Nw6e:function(e,t,n){"use strict";var a=n("hfUJ"),i=n("EWYV"),r=n("emvA").is,c={},o=function(e){return e.get("extensionElements")};c.getExtensionElements=function(e,t){var n=o(e);if("undefined"!==typeof n){var a=n.get("values");if("undefined"!==typeof a){var i=a.filter((function(e){return r(e,t)}));if(i.length)return i}}},c.addEntry=function(e,t,n,r){var c=e.get("extensionElements");return c?a.addElementsTolist(t,c,"values",[n]):(c=i.createElement("bpmn:ExtensionElements",{values:[n]},e,r),{extensionElements:c})},c.removeEntry=function(e,t,n){var i=e.get("extensionElements");return i?a.removeElementsFromList(t,i,"values","extensionElements",[n]):{}},e.exports=c},"O+pJ":function(e,t,n){"use strict";n.d(t,"g",(function(){return _})),n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return x})),n.d(t,"f",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return E}));var a=n("k1fw"),i=n("oBTY"),r=(n("miYZ"),n("tsqr")),c=n("jrin"),o=n("9og8"),s=n("WmNS"),l=n.n(s),d=n("sy1d"),u=n("79+z"),p=n("mPcc"),f=n("ma4E"),m=n("ASZ0"),b=n("Ydf/"),j=n("WpNc"),h=n("eVqf"),_=function(){var e=Object(o["a"])(l.a.mark((function e(t,n,a){var i,r,o,s,b,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=[],Object(j["h"])(n,i),Object.keys(n).forEach((function(e){0===e.indexOf("jf")&&Object(u["d"])(n,Object(c["a"])({},e,null))})),r=t.moduleName,o=t.filters,s=t.schemeState,e.next=6,Object(d["default"])("".concat(d["API_HEAD"],"/platform/datamining/fetchdata.do"),{method:"POST",params:{moduleName_:r},data:Object(p["serialize"])({moduleName:r,groupfieldid:null,conditions:JSON.stringify(Object(j["g"])(s.columnGroup)),fields:JSON.stringify(Object(j["f"])(s.fieldGroup)),parentconditions:JSON.stringify(i),navigatefilters:JSON.stringify(o.navigatefilters),viewschemeid:o.viewscheme.viewschemeid,userfilters:JSON.stringify(Object(m["b"])(o.userfilter)),sqlparamstr:o.sqlparam?JSON.stringify(Object(f["p"])(o.sqlparam)):null})});case 6:b=e.sent,Array.isArray(b)&&1===b.length&&(h=b[0],a&&(delete h.value,delete h.text),Object.keys(h).forEach((function(e){"text"!==e&&Object(u["d"])(n,Object(c["a"])({},e,h[e]))})));case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(o["a"])(l.a.mark((function e(t,n,a){var c,o,s,d,u,p,f,m,j,O,x,g,v,y,E,S,C,I,D;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=t.selectedRowKeys,o=t.schemeState.dataSource,s=[],c.forEach((function(e){var t=Object(h["m"])(o,e,b["db"]);t&&s.push(t)})),d=s[0],!s.find((function(e){return e.parentNode!==d.parentNode}))){e.next=7;break}return r["default"].warn("\u8981\u5408\u5e76\u7684\u884c\u5fc5\u987b\u5728\u540c\u4e00\u4e2a\u7236\u8282\u70b9\u4e0b\uff01"),e.abrupt("return");case 7:u="",p=[],f=[],m=d.condition,j=!0,O=m.substring(0,m.lastIndexOf("=")),x=0;case 14:if(!(x<s.length)){e.next=31;break}if(j&&(u.length<40?u+=(s[x][b["gb"]]||s[x].text)+(x===s.length-1?"":","):(j=!1,u="".concat(u.substr(0,u.length-1)," \u7b49").concat(s.length,"\u6761"))),g=s[x].condition,v=g.lastIndexOf("="),y=g.substring(0,v),y===O){e.next=22;break}return r["default"].warn("\u5408\u5e76\u7684\u6240\u6709\u884c\u5fc5\u987b\u5206\u7ec4\u5c5e\u6027\u4e00\u81f4\uff01"),e.abrupt("return");case 22:if(E=g.substr(v+1),!E.startsWith("!")){e.next=26;break}return r["default"].warn("\u4e0d\u5141\u8bb8\u5bf9\u5408\u5e76\u975e\u9009\u4e2d\u884c\u7684\u7ed3\u679c\u8fdb\u884c\u5408\u5e76\uff01"),e.abrupt("return");case 26:f.push(s[x][b["db"]]),p.push(g.substr(v+1));case 28:x+=1,e.next=14;break;case 31:for(S={text:u,condition:"".concat(O,"=").concat(p.join(",")),parentNode:d.parentNode},d.parentNode.children.splice(d.parentNode.children.findIndex((function(e){return e===d})),0,S),C=0;C<s.length;C+=1)I=Object(h["o"])(s[C]),a&&(S.children||(S.children=[]),I.parentNode=S,S.children.push(I));return Object(h["p"])({dispatch:n,fetchLoading:!0}),e.next=37,_(t,S,!0);case 37:D=[],D.push({type:"combinerows",conditionpath:f.join(","),text:u,condition:S.condition,addSelectedChildrens:a}),n({type:b["o"],payload:{dataSource:Object(i["a"])(t.schemeState.dataSource),expandPaths:D,expandedRowKeys:[S[b["db"]]]}}),n({type:b["J"],payload:{selectedRowKeys:[S[b["db"]]]}}),Object(h["p"])({dispatch:n,fetchLoading:!1});case 42:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(o["a"])(l.a.mark((function e(t,n,a){var c,o,s,d,u,p,f,m,j,O,x,g,v,y,E,S,C,I,D,k;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=t.selectedRowKeys,o=t.schemeState.dataSource,s=[],c.forEach((function(e){var t=Object(h["m"])(o,e,b["db"]);t&&s.push(t)})),d=s[0],!s.find((function(e){return e.parentNode!==d.parentNode}))){e.next=7;break}return r["default"].warn("\u8981\u5408\u5e76\u7684\u884c\u5fc5\u987b\u5728\u540c\u4e00\u4e2a\u7236\u8282\u70b9\u4e0b\uff01"),e.abrupt("return");case 7:u="",p=[],f=[],m=d.condition,j=m.substring(0,m.lastIndexOf("=")),O=!0,x=0;case 14:if(!(x<s.length)){e.next=31;break}if(O&&(u.length<40?u+=(s[x][b["gb"]]||s[x].text)+(x===s.length-1?"":","):(O=!1,u="".concat(u.substr(0,u.length-1)," \u7b49").concat(s.length,"\u6761"))),g=s[x].condition,v=g.lastIndexOf("="),y=g.substring(0,v),y===j){e.next=22;break}return r["default"].warn("\u5408\u5e76\u7684\u6240\u6709\u884c\u5fc5\u987b\u5206\u7ec4\u5c5e\u6027\u4e00\u81f4\uff01"),e.abrupt("return");case 22:if(E=g.substr(v+1),!E.startsWith("!")){e.next=26;break}return r["default"].warn("\u4e0d\u5141\u8bb8\u5bf9\u5408\u5e76\u975e\u9009\u4e2d\u884c\u7684\u7ed3\u679c\u8fdb\u884c\u5408\u5e76\uff01"),e.abrupt("return");case 26:f.push(s[x][b["db"]]),p.push(E);case 28:x+=1,e.next=14;break;case 31:for(S={text:"\u5176\u4ed6",condition:"".concat(j,"=!").concat(p.join(",")),parentNode:d.parentNode},C=S.parentNode.children.filter((function(e){return-1===s.findIndex((function(t){return t===e}))})),I=0;I<C.length;I+=1)D=Object(h["o"])(C[I]),a&&(S.children||(S.children=[]),D.parentNode=S,S.children.push(D));return S.parentNode.children.push(S),Object(h["p"])({dispatch:n,fetchLoading:!0}),e.next=38,_(t,S,!0);case 38:k=[],k.push({type:"combineotherrows",conditionpath:f.join(","),text:u,condition:S.condition,addSelectedChildrens:a}),n({type:b["o"],payload:{dataSource:Object(i["a"])(t.schemeState.dataSource),expandPaths:k,expandedRowKeys:[S[b["db"]]]}}),n({type:b["J"],payload:{selectedRowKeys:[S[b["db"]]]}}),Object(h["p"])({dispatch:n,fetchLoading:!1});case 43:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(o["a"])(l.a.mark((function e(t){var n,a,r,c,o,s,d,u,p,f;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.state,a=t.dispatch,r=t.records,c=t.group,o=t.expandallleaf,Object(h["p"])({dispatch:a,fetchLoading:!0}),s=[],d=[],u=0;case 5:if(!(u<r.length)){e.next=14;break}return p=r[u],e.next=9,Object(j["c"])({state:n,selectrecord:p,fieldid:c.fieldid,title:c.title,recordpath:!0});case 9:f=e.sent,!o&&f&&f.expandPath&&(s.push(f.expandPath),d.push(p[b["db"]]));case 11:u+=1,e.next=5;break;case 14:o&&s.push({type:"expandallleaf",fieldid:c.fieldid,title:c.title}),a({type:b["o"],payload:{dataSource:Object(i["a"])(n.schemeState.dataSource),expandPaths:s,expandedRowKeys:d}}),Object(h["p"])({dispatch:a,fetchLoading:!1});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){var t=e.state,n=e.dispatch,a=e.deletedRecord,c=t.schemeState.dataSource,o=[],s=[],l=[],d=a?[a[b["db"]]]:t.selectedRowKeys;d.length>0&&(d.forEach((function(e){var t=Object(h["m"])(c,e,b["db"]);t&&s.push(t)})),s.forEach((function(e){e[b["db"]]===b["cb"]?r["default"].warn("\u4e0d\u80fd\u5220\u9664\u603b\u8ba1\u884c\u7684\u6839\u8282\u70b9\uff01"):(l.push(e[b["db"]]),l.push.apply(l,Object(i["a"])(Object(h["d"])(e))),Object(h["o"])(e),o.push({type:"deleterow",conditionpath:e[b["db"]],conditiontext:e.text}))})),n({type:b["o"],payload:{dataSource:Object(i["a"])(t.schemeState.dataSource),expandPaths:o,deletedRowids:l}}))},y=function(e){var t=e.state,n=e.dispatch,a=e.deletedRecord,r=t.schemeState.dataSource,c=[],o=[],s=[],l=a?[a[b["db"]]]:t.selectedRowKeys;l.length>0&&(l.forEach((function(e){var t=Object(h["m"])(r,e,b["db"]);t&&o.push(t)})),o.forEach((function(e){var t=e;t.children&&(s.push.apply(s,Object(i["a"])(Object(h["d"])(t))),delete t.children,c.push({type:"deletechildren",conditionpath:t[b["db"]],conditiontext:t.text}))})),n({type:b["o"],payload:{dataSource:Object(i["a"])(t.schemeState.dataSource),expandPaths:c,deletedRowids:s}}))},E=function(){var e=Object(o["a"])(l.a.mark((function e(t){var n,c,o,s,d,p,f,m,j,O,x,g,v;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.state,c=t.dispatch,o=t.node,s=t.fieldid,d=t.title,p=t.records,f=t.pos,m=t.recordpath,p&&0!==p.length){e.next=3;break}return e.abrupt("return");case 3:j=f,O=[],x=[],m&&Object(h["p"])({dispatch:c,fetchLoading:!0}),g=JSON.parse(JSON.stringify(p)),g.forEach((function(e){var t=e;t.moduleName&&(t[b["gb"]]=t.text),t.parentNode=o})),o.children||Object(u["d"])(o,{children:[]}),g.forEach((function(e){o.children.find((function(t){return t.condition===e.condition}))?r["default"].warn("\u300e".concat(e[b["fb"]],"\u300f\u5df2\u7ecf\u5728 ").concat(o[b["fb"]]," \u8282\u70b9\u4e0b\u5b58\u5728\u4e86\uff0c\u4e0d\u5141\u8bb8\u91cd\u590d\u52a0\u5165\uff01")):(x.push(Object(a["a"])(Object(a["a"])({},e),{},{parentNode:void 0,text_:void 0})),j<0?o.children.push(e):(o.children.splice(j,0,e),j+=1))})),v=0;case 12:if(!(v<g.length)){e.next=18;break}return e.next=15,_(n,g[v],!0);case 15:v+=1,e.next=12;break;case 18:m&&(O.push({type:"expandwithnavigaterecords",conditionpath:o[b["db"]],fieldid:s,title:d,records:x,pos:j}),c({type:b["o"],payload:{dataSource:Object(i["a"])(n.schemeState.dataSource),expandPaths:O,expandedRowKeys:[o[b["db"]]]}}),Object(h["p"])({dispatch:c,fetchLoading:!1}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},OC7c:function(e,t,n){"use strict";n.r(t),n.d(t,"attachmentPdfOpenPreview",(function(){return f}));n("J+/v");var a=n("MoRW"),i=(n("+L6B"),n("2/Rp")),r=(n("IzEo"),n("bx4M")),c=(n("q1tI"),n("sy1d")),o=n("79+z"),s=n("9kvl"),l=n("nKUr"),d="".concat(c["API_HEAD"],"/platform/attachment"),u="\u9884\u89c8\u5df2\u8fc7\u671f",p=function(e){var t=e.location,n=t.query.attachmentid,c=t.query.saveName;n||(n=sessionStorage.getItem("attachmentid"),c=sessionStorage.getItem("saveName"),sessionStorage.removeItem("attachmentid"),sessionStorage.removeItem("saveName")),document.title=c||u;var p="".concat(d,"/preview.do?attachmentid=").concat(n),f=Object(o["w"])(p,c);return n?Object(l["jsx"])(r["a"],{title:document.title,style:{height:"100%"},bodyStyle:{padding:0,margin:0,height:"100%"},children:Object(l["jsx"])("iframe",{title:"pdfpreview",style:o["y"]?{height:"".concat(document.body.clientHeight-32-22,"px")}:{},src:f,width:"100%",height:"100%",marginWidth:0})}):Object(l["jsx"])(a["a"],{status:"404",title:"\u9884\u89c8\u5df2\u8fc7\u671f",subTitle:"\u9644\u4ef6\u6587\u4ef6\u9884\u89c8\u5df2\u8fc7\u671f\uff0c\u8bf7\u5728\u539f\u6a21\u5757\u754c\u9762\u4e2d\u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u3002",extra:Object(l["jsx"])(i["a"],{type:"primary",onClick:function(){return s["c"].push("/")},children:"\u8fd4\u56de\u4e3b\u9875"})})},f=function(e,t){sessionStorage.setItem("attachmentid",e);var n=t.replaceAll("}","\uff5d").replaceAll("{","\uff5b");sessionStorage.setItem("saveName",n),window.open("/attachment/preview")};t["default"]=Object(s["a"])()(p)},OH75:function(e,t,n){e.exports={listcard:"listcard___1gZUP"}},OOGe:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return _})),n.d(t,"h",(function(){return x})),n.d(t,"d",(function(){return v})),n.d(t,"g",(function(){return E}));var a=n("9og8"),i=n("WmNS"),r=n.n(i),c=n("sy1d"),o=n("mPcc");function s(e){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(c["default"])("".concat(c["API_HEAD"],"/platform/systemframe/createpersonnaluser.do"),{method:"POST",params:t}));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function d(e){return u.apply(this,arguments)}function u(){return u=Object(a["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(c["default"])("".concat(c["API_HEAD"],"/platform/systemframe/resetpassword.do"),{method:"POST",params:t}));case 1:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return f=Object(a["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(c["default"])("".concat(c["API_HEAD"],"/platform/userrole/updateadditionfunctiontocmodule.do"),{method:"POST",params:t}));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(c["default"])("".concat(c["API_HEAD"],"/platform/module/addtocompanymodule.do"),{method:"POST",params:t}));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function j(e){return h.apply(this,arguments)}function h(){return h=Object(a["a"])(r.a.mark((function e(t){var n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.userid,e.abrupt("return",Object(c["default"])("".concat(c["API_HEAD"],"/platform/userrole/getuseralllimit.do"),{params:{userid:n}}));case 2:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function _(e){return O.apply(this,arguments)}function O(){return O=Object(a["a"])(r.a.mark((function e(t){var n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.userid,e.abrupt("return",Object(c["default"])("".concat(c["API_HEAD"],"/platform/userrole/getuserlimit.do"),{params:{userid:n,addall:!0}}));case 2:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function x(e){return g.apply(this,arguments)}function g(){return g=Object(a["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(c["default"])("".concat(c["API_HEAD"],"/platform/userrole/saveuserlimit.do"),{method:"POST",body:Object(o["serialize"])(t)}));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function v(e){return y.apply(this,arguments)}function y(){return y=Object(a["a"])(r.a.mark((function e(t){var n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.roleid,e.abrupt("return",Object(c["default"])("".concat(c["API_HEAD"],"/platform/userrole/getrolelimit.do"),{params:{roleid:n}}));case 2:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function E(e){return S.apply(this,arguments)}function S(){return S=Object(a["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(c["default"])("".concat(c["API_HEAD"],"/platform/userrole/saverolelimit.do"),{method:"POST",body:Object(o["serialize"])(t)}));case 1:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}},OcID:function(e,t,n){"use strict";var a=n("Z0cm"),i=n("GoyQ"),r="Dropdown",c=["String","Text","Boolean","Hidden",r],o="property",s="activiti:property",l="activiti:inputParameter",d="activiti:outputParameter",u="activiti:in",p="activiti:out",f="activiti:in:businessKey",m="activiti:executionListener",b="activiti:field",j=[o,s,l,d,u,p,f,m,b];function h(){this._templatesById={},this._validTemplates=[],this._errors=[],this.addAll=function(e){return a(e)?e.forEach(this.add,this):this._logError("templates must be []"),this},this.add=function(e){var t=this._validateTemplate(e);return t||(this._templatesById[e.id]=e,this._validTemplates.push(e)),this},this._validateTemplate=function(e){var t,n=e.id,i=e.appliesTo,r=e.properties,c=e.scopes;return n?n in this._templatesById?this._logError("template id <"+n+"> already used"):(a(i)||(t=this._logError("missing appliesTo=[]",e)),a(r)?this._validateProperties(r)||(t=new Error("invalid properties")):t=this._logError("missing properties=[]",e),c&&(t=this._validateScopes(e,c)),t):this._logError("missing template id")},this._validateScopes=function(e,t){var n,r,c;if(!i(t)||a(t))return this._logError("invalid scopes, should be scopes={}",e);for(c in t)r=t[c],i(r)&&!a(r)||(n=this._logError("invalid scope, should be scope={}",e)),a(r.properties)?this._validateProperties(r.properties)||(n=new Error("invalid properties in scope <"+c+">")):n=this._logError("missing properties=[] in scope <"+c+">",e);return n},this._validateProperties=function(e){var t=e.filter(this._validateProperty,this);return e.length===t.length},this._validateProperty=function(e){var t,n=e.type,i=e.binding,f=i.type;return-1===c.indexOf(n)&&(t=this._logError("invalid property type <"+n+">; must be any of { "+c.join(", ")+" }")),n===r&&f!==m&&(a(e.choices)?e.choices.every(_)||(t=this._logError("{ name, value } must be specified for "+r+" choices")):t=this._logError("must provide choices=[] with "+r+" type")),i?(-1===j.indexOf(f)&&(t=this._logError("invalid property.binding type <"+f+">; must be any of { "+j.join(", ")+" }")),f!==o&&f!==s&&f!==l&&f!==b||i.name||(t=this._logError("property.binding <"+f+"> requires name")),f===d&&(i.source||(t=this._logError("property.binding <"+f+"> requires source"))),f===u&&(i.variables||i.target||(t=this._logError("property.binding <"+f+"> requires variables or target"))),f===p&&(i.variables||i.source||i.sourceExpression||(t=this._logError("property.binding <"+f+"> requires variables, sourceExpression or source"))),f===m&&"Hidden"!==n&&(t=this._logError("invalid property type <"+n+"> for "+m+"; must be <Hidden>")),!t):this._logError("property missing binding")},this._logError=function(e,t){return"string"===typeof e&&(t&&(e="template(id: "+t.id+") "+e),e=new Error(e)),this._errors.push(e),e},this.getErrors=function(){return this._errors},this.getValidTemplates=function(){return this._validTemplates}}function _(e){return"name"in e&&"value"in e}e.exports=h},OvOj:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));n("14J3");var a=n("BMrR"),i=(n("tU7J"),n("wFql")),r=(n("sRBo"),n("kaz8")),c=(n("giR+"),n("fyUT")),o=(n("OaEy"),n("2fM7")),s=(n("jCWc"),n("kPKH")),l=(n("5NDa"),n("5rEg")),d=(n("y8nQ"),n("Vl3Y")),u=n("tJVT"),p=n("q1tI"),f=n("79+z"),m=n("/9ir"),b=n("nKUr"),j=Object(p["forwardRef"])((function(e,t){var n=e.init,j=d["a"].useForm(),h=Object(u["a"])(j,1),_=h[0];return Object(p["useEffect"])((function(){_.resetFields(),_.setFieldsValue(Object(f["i"])({init:n}))}),[n]),Object(p["useImperativeHandle"])(t,(function(){return{getValues:function(){return _.getFieldsValue()}}})),Object(b["jsx"])(d["a"],{className:"moduleform",form:_,size:"middle",autoComplete:"off",labelCol:{flex:"0 0 90px"},children:Object(b["jsxs"])(a["a"],{gutter:16,children:[Object(b["jsx"])(s["a"],{span:24,children:Object(b["jsx"])(d["a"].Item,{label:"\u663e\u793a\u5185\u5bb9",name:"udftitle",children:Object(b["jsx"])(l["a"],{placeholder:"\u5982\u679c\u4e3a\u9ed8\u8ba4\u663e\u793a\u5185\u5bb9\uff0c\u8bf7\u4e0d\u8981\u4fee\u6539\u6b64\u5b57\u6bb5\u3002"})})}),Object(b["jsx"])(s["a"],{span:24,children:Object(b["jsx"])(d["a"].Item,{label:"xtype\u7c7b\u578b",name:"xtype",children:Object(b["jsx"])(o["a"],{options:[{label:"container",value:"container"},{label:"fieldset",value:"fieldset"},{label:"panel",value:"panel"},{label:"\u591a\u5bf9\u4e00\u6811\u5f62\u4e0b\u62c9\u6846",value:"usermanytoonetreefilter"}]})})}),Object(b["jsx"])(s["a"],{span:6,children:Object(b["jsx"])(d["a"].Item,{label:"\u884c\u6570",name:"rows",children:Object(b["jsx"])(c["a"],{})})}),Object(b["jsx"])(s["a"],{span:6,children:Object(b["jsx"])(d["a"].Item,{label:"\u5217\u6570",name:"cols",children:Object(b["jsx"])(c["a"],{})})}),Object(b["jsx"])(s["a"],{span:6,children:Object(b["jsx"])(d["a"].Item,{label:"\u5408\u5e76\u884c\u6570",name:"rowspan",children:Object(b["jsx"])(c["a"],{})})}),Object(b["jsx"])(s["a"],{span:6,children:Object(b["jsx"])(d["a"].Item,{label:"\u5408\u5e76\u5217\u6570",name:"colspan",children:Object(b["jsx"])(c["a"],{})})}),Object(b["jsx"])(s["a"],{span:12,children:Object(b["jsx"])(d["a"].Item,{label:"\u5404\u5217\u5bbd\u5ea6",name:"widths",children:Object(b["jsx"])(l["a"],{placeholder:"\u5982\uff1a150,50%,150,25%,25%"})})}),Object(b["jsx"])(s["a"],{span:12,children:Object(b["jsx"])(d["a"].Item,{label:"\u7b5b\u9009\u7c7b\u578b",name:"filtertype",children:Object(b["jsx"])(l["a"],{})})}),Object(b["jsx"])(s["a"],{span:12,children:Object(b["jsx"])(d["a"].Item,{label:"\u6bd4\u8f83\u7b26",name:"operator",children:Object(b["jsx"])(l["a"],{})})}),Object(b["jsx"])(s["a"],{span:12,children:Object(b["jsx"])(d["a"].Item,{label:"\u9690\u85cf\u6bd4\u8f83\u7b26",name:"hiddenoperator",valuePropName:"checked",children:Object(b["jsx"])(r["a"],{})})}),Object(b["jsx"])(s["a"],{span:24,children:Object(b["jsx"])(d["a"].Item,{label:"\u9644\u52a0\u8bbe\u7f6e",name:"othersetting",children:Object(b["jsx"])(m["a"],{jsonFieldProps:{height:"180px"}})})}),Object(b["jsx"])(s["a"],{span:24,children:Object(b["jsx"])(d["a"].Item,{label:"\u5907\u6ce8",name:"remark",children:Object(b["jsx"])(l["a"].TextArea,{})})}),Object(b["jsx"])(s["a"],{span:24,children:Object(b["jsxs"])(i["a"],{children:[Object(b["jsx"])(i["a"].Title,{level:5,children:"\u9644\u52a0\u8bbe\u7f6e\u5c5e\u6027\u8bf4\u660e\uff1a"}),Object(b["jsx"])(i["a"].Paragraph,{children:Object(b["jsxs"])("ul",{children:[Object(b["jsx"])("li",{children:"allowEmpty : boolean \u5141\u8bb8\u4e3a\u7a7a\u503c(\u9ed8\u8ba4\u4e3afalse)\uff1aboolean\u7c7b\u578b\uff0cmanytoone, dictionary \u90fd\u4f1a\u52a0\u5165 \u672a\u5b9a\u4e49\u503c"}),Object(b["jsx"])("li",{children:"addCount : boolean \u4e0d\u52a0\u5165boolean,manytoone,dictionary\u7684\u8bb0\u5f55\u6570(\u9ed8\u8ba4\u4e3atrue)"})]})})]})})]})})}))},QlNo:function(e,t,n){"use strict";var a=n("emvA").is,i=n("emvA").getBusinessObject,r=n("SFUa");e.exports=function(e,t,n,c){var o=i(t);(a(t,"activiti:Process")||a(t,"bpmn:Participant")&&o.get("processRef"))&&(e.entries=e.entries.concat(r(t,n,{getBusinessObject:function(e){var t=i(e);return a(t,"bpmn:Participant")?t.get("processRef"):t}},c)))}},RNUq:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));n("14J3");var a=n("BMrR"),i=(n("giR+"),n("fyUT")),r=(n("sRBo"),n("kaz8")),c=(n("jCWc"),n("kPKH")),o=(n("5NDa"),n("5rEg")),s=n("k1fw"),l=(n("y8nQ"),n("Vl3Y")),d=n("tJVT"),u=n("q1tI"),p=n("79+z"),f=n("/9ir"),m=n("nKUr"),b=Object(u["forwardRef"])((function(e,t){var n=e.init,b=l["a"].useForm(),j=Object(d["a"])(b,1),h=j[0];return Object(u["useEffect"])((function(){h.resetFields(),h.setFieldsValue(Object(p["i"])(Object(s["a"])({},n)))}),[n]),Object(u["useImperativeHandle"])(t,(function(){return{getValues:function(){return h.getFieldsValue()}}})),Object(m["jsx"])(l["a"],{className:"moduleform",form:h,size:"middle",autoComplete:"off",labelCol:{flex:"0 0 90px"},children:Object(m["jsxs"])(a["a"],{gutter:16,children:[Object(m["jsx"])(c["a"],{span:24,children:Object(m["jsx"])(l["a"].Item,{label:"\u663e\u793a\u5185\u5bb9",name:"tf_title",children:Object(m["jsx"])(o["a"],{placeholder:"\u5982\u679c\u4e3a\u9ed8\u8ba4\u663e\u793a\u5185\u5bb9\uff0c\u8bf7\u4e0d\u8981\u4fee\u6539\u6b64\u5b57\u6bb5\u3002"})})}),Object(m["jsx"])(c["a"],{span:12,children:Object(m["jsx"])(l["a"].Item,{label:"\u5217\u9501\u5b9a",name:"tf_locked",valuePropName:"checked",children:Object(m["jsx"])(r["a"],{})})}),Object(m["jsx"])(c["a"],{span:12,children:Object(m["jsx"])(l["a"].Item,{label:"\u9690\u85cf\u5217",name:"tf_hidden",valuePropName:"checked",children:Object(m["jsx"])(r["a"],{})})}),Object(m["jsx"])(c["a"],{span:12,children:Object(m["jsx"])(l["a"].Item,{label:"\u663e\u793a\u5b57\u6bb5tip",name:"tf_showdetailtip",valuePropName:"checked",children:Object(m["jsx"])(r["a"],{})})}),Object(m["jsx"])(c["a"],{span:12,children:Object(m["jsx"])(l["a"].Item,{label:"\u5217\u5bbd",name:"tf_width",children:Object(m["jsx"])(i["a"],{})})}),Object(m["jsx"])(c["a"],{span:12,children:Object(m["jsx"])(l["a"].Item,{label:"\u6700\u5c0f\u5217\u5bbd",name:"tf_minwidth",children:Object(m["jsx"])(i["a"],{})})}),Object(m["jsx"])(c["a"],{span:12,children:Object(m["jsx"])(l["a"].Item,{label:"\u6700\u5927\u5217\u5bbd",name:"tf_maxwidth",children:Object(m["jsx"])(i["a"],{})})}),Object(m["jsx"])(c["a"],{span:12,children:Object(m["jsx"])(l["a"].Item,{label:"\u5217flex",name:"tf_flex",children:Object(m["jsx"])(i["a"],{})})}),Object(m["jsx"])(c["a"],{span:12,children:Object(m["jsx"])(l["a"].Item,{label:"\u5217\u5bbd\u81ea\u52a8\u8c03\u6574\u6b21\u6570",name:"tf_autosizetimes",children:Object(m["jsx"])(i["a"],{})})}),Object(m["jsx"])(c["a"],{span:24,children:Object(m["jsx"])(l["a"].Item,{label:"\u9644\u52a0\u8bbe\u7f6e",name:"tf_otherSetting",children:Object(m["jsx"])(f["a"],{jsonFieldProps:{height:"180px"}})})})]})})}))},"Rgs+":function(e,t,n){e.exports={__depends__:[n("iku1"),n("tx4b").default],__init__:["customElementsPropertiesActivator","elementTemplatesLoader"],customElementsPropertiesActivator:["type",n("jjL0")],elementTemplates:["type",n("FC4O")],elementTemplatesLoader:["type",n("nNzM")]}},SFUa:function(e,t,n){"use strict";var a=n("6BL2"),i=n("hfUJ");e.exports=function(e,t,n,r){var c=n.getBusinessObject,o=a.checkbox({id:"isStartableInTasklist",label:r("Startable"),modelProperty:"isStartableInTasklist",get:function(e,t){var n=c(e),a=n.get("activiti:isStartableInTasklist");return{isStartableInTasklist:a||""}},set:function(e,t){var n=c(e);return i.updateBusinessObject(e,n,{"activiti:isStartableInTasklist":!!t.isStartableInTasklist})}});return[o]}},Snfz:function(e,t,n){},TKgZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return W}));n("14J3");var a=n("BMrR"),i=(n("jCWc"),n("kPKH")),r=n("oBTY"),c=(n("miYZ"),n("tsqr")),o=n("9og8"),s=(n("DYRE"),n("zeV3")),l=(n("5Dmo"),n("3S7+")),d=(n("Q9mQ"),n("diRs")),u=(n("Awhp"),n("KrTs")),p=n("k1fw"),f=n("tJVT"),m=n("WmNS"),b=n.n(m),j=n("q1tI"),h=n("79+z"),_=n("LDJE"),O=n("Gl0f"),x=n("nCbN"),g=n("0owl"),v=n("+YFz"),y=n("2Y5l"),E=n("wd/R"),S=n.n(E),C=n("jE+T"),I=(n("MXD1"),n("CFYs")),D=n("c6dC"),k=n("9Cul"),w=n("nKUr"),P=n("ZhIB"),T=y["a"].Statistic,M=function(e){var t=e.moduleName,n=e.title,a=e.fieldName,i=e.aggregate,r=e.filters,c=e.userfilters,s=e.formatPattern,l=void 0===s?"0,000":s,d=e.prefix,u=e.suffix,p=e.monetaryUnit,m=void 0===p?1:p,h=e.unitText,_=void 0===h?"":h,O=e.addRatio,x=e.value,g=e.total,v=e.callback,y=Object(j["useState"])(0),E=Object(f["a"])(y,2),S=E[0],C=E[1],M=Object(j["useState"])(!0),A=Object(f["a"])(M,2),R=A[0],N=A[1],L=i?"".concat(i,".").concat(a):a;return Object(j["useEffect"])((function(){if(x)return C(x),void N(!1);N(!0),Object(k["a"])({moduleName:t,fields:[L],navigatefilters:r,userfilters:c,isnumberordername:!0}).then(function(){var e=Object(o["a"])(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:v&&v(t),C(t[0].jf001),N(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[c]),Object(w["jsxs"])("div",{style:{display:"flex"},className:"staticfield",children:[Object(w["jsx"])(T,{title:[d,n,u],value:R?" ":"".concat(P(S/m).format(l)).concat(Object(D["b"])(m,_))}),O&&g?Object(w["jsx"])(I["a"],{percent:P(Math.floor(S/g*1e3)/10).format("0.0"),style:{padding:"0px 12px",flex:1}}):null]})},A=n("DuGg"),R=n.n(A),N=n("ASZ0"),L=n("WTWM"),B=n("mqE+"),K=n("ZhIB"),F=y["a"].Statistic,U={day:"\u65e5",week:"\u5468",month:"\u6708",year:"\u5e74"},W=function(e){var t=e.moduleName,n=e.title,m=e.fieldName,E=e.aggregate,I=e.dateFieldName,P=e.filters,T=e.filterSchemeid,A=e.prefix,W=e.suffix,V=e.icon,q=e.description,z=e.formatPattern,G=void 0===z?"0,000":z,J=e.monetaryUnit,H=void 0===J?1:J,Y=e.unitText,Z=void 0===Y?"":Y,Q=e.height,$=e.chartHeight,X=void 0===$?40:$,ee=e.relatives,te=e.staticFields,ne=e.chart,ae=e.chartRegion,ie=void 0===ae?"staticfield":ae,re=e.footerRegion,ce=void 0===re?"relative":re,oe=Object(j["useState"])(0),se=Object(f["a"])(oe,2),le=se[0],de=se[1],ue=Object(j["useState"])([]),pe=Object(f["a"])(ue,2),fe=pe[0],me=pe[1],be=Object(j["useState"])(!0),je=Object(f["a"])(be,2),he=je[0],_e=je[1],Oe=Object(j["useState"])(!1),xe=Object(f["a"])(Oe,2),ge=xe[0],ve=xe[1],ye=Object(j["useState"])([]),Ee=Object(f["a"])(ye,2),Se=Ee[0],Ce=Ee[1],Ie=Object(j["useState"])(Object(L["m"])({moduleName:t})),De=Object(f["a"])(Ie,2),ke=De[0],we=De[1],Pe=Object(j["useContext"])(B["d"]),Te=Pe.parnetUserFilters,Me="".concat(E,".").concat(m),Ae="jf001",Re=T?Object(w["jsx"])(d["a"],{visible:ge,onVisibleChange:function(e){ve(e)},trigger:["click"],title:Object(w["jsx"])("span",{children:"\u8bbe\u7f6e\u7b5b\u9009\u6761\u4ef6"}),content:Object(w["jsx"])(N["c"],{visible:!0,moduleState:ke,dispatch:function(e){"modules/filterChanged"===e.type&&(ke.filters.userfilter=e.payload.userfilter,we(Object(p["a"])({},ke)),Ce(Object(N["b"])(e.payload.userfilter))),ve(!1)},filterSchemeid:T,inPopover:!0}),children:Se.length?Object(w["jsx"])(u["a"],{count:Se.length,dot:!1,offset:[-6,6],style:{backgroundColor:"#108ee9"},children:Object(w["jsx"])(g["a"],{style:{paddingRight:"20px"},className:R.a.filtericon})}):Object(w["jsx"])(g["a"],{className:R.a.filtericon})}):null,Ne=function(){return q||T?Object(w["jsxs"])("div",{children:[Object(w["jsx"])("span",{children:n}),Object(w["jsxs"])(s["b"],{style:{float:"right"},children:[q?Object(w["jsx"])(l["a"],{title:q,trigger:["click"],children:Object(w["jsx"])(v["a"],{})}):null,Re]})]}):n},Le=function(){var e=Object(o["a"])(b.a.mark((function e(n){var a,i,s,l,d,u,p,f,m,j,h,_,O,x,g;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.sectionNumber,i=void 0===a?1:a,s=n.monthOnMonth,l=void 0!==s&&s,d=n.containerToday,u=void 0===d||d,p=n.wholeMonth,f=void 0!==p&&p,"day"!==n.section&&1!==i&&f&&c["default"].error("\u5bf9\u6bd4\u533a\u95f4\u8bbe\u7f6e\u4e3a\u6708\u548c\u5305\u542b\u6574\u6708\u7684\u6570\u636e\u65f6\uff0c\u533a\u95f4\u6570\u503c\u53ea\u80fd\u662f1\u3002"),m=S()().subtract(u?0:1,"day"),j=["year","month"].includes(n.section)&&f?"year"===n.section?S()(m).set("date",1).set("month",1):S()(m).set("date",1):S()(m).subtract(i,n.section).add(1,"day"),_=l?["year","month"].includes(n.section)&&f?S()(m).subtract(1,n.section):S()(j).subtract(1,"day"):S()(m).subtract(1,"year"),h=["year","month"].includes(n.section)&&f?"year"===n.section?S()(_).set("date",1).set("month",1):S()(_).set("date",1):S()(_).subtract(i,n.section).add(1,"day"),O={sectionTitle:(i>1?i:"")+U[n.section]+(l?"\u73af\u6bd4":"\u540c\u6bd4"),startDate:j.format(C["a"]),endDate:m.format(C["a"]),lastStartDate:h.format(C["a"]),lastEndDate:_.format(C["a"]),thisValue:void 0,lastValue:void 0,ratio:void 0},x=function(){var e=Object(o["a"])(b.a.mark((function e(n,a){var i;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(k["a"])({moduleName:t,fields:[Me],navigatefilters:P,userfilters:(i=[{property:I,operator:"daysection",value:"".concat(n.format(C["a"]),"--").concat(a.format(C["a"]))}]).concat.apply(i,Object(r["a"])(Se.concat(Te).filter((function(e){return e.property!==I})))),isnumberordername:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.next=10,x(j,m);case 10:return g=e.sent,O.thisValue=g[0][Ae],e.next=14,x(h,_);case 14:return g=e.sent,O.lastValue=g[0][Ae],O.lastValue&&(O.ratio=((O.thisValue||0)-O.lastValue)/O.lastValue),e.abrupt("return",new Promise((function(e){e(O)})));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(e){var t=e.sectionTitle,n=e.startDate,a=e.endDate,i=e.lastStartDate,r=e.lastEndDate,c=e.thisValue,o=e.lastValue,s=e.ratio;return Object(w["jsx"])(F,{style:{flex:1},title:Object(w["jsx"])(d["a"],{title:"".concat(t,"\u8ba1\u7b97\u8fc7\u7a0b"),content:Object(w["jsxs"])("table",{className:R.a.tooltiptable,children:[Object(w["jsxs"])("tr",{children:[Object(w["jsx"])("th",{}),Object(w["jsx"])("th",{children:"\u8d77\u59cb\u65e5\u671f"}),Object(w["jsx"])("th",{children:"\u7ec8\u6b62\u65e5\u671f"}),Object(w["jsx"])("th",{children:"\u6307\u6807\u6570\u503c"})]}),Object(w["jsxs"])("tr",{children:[Object(w["jsx"])("th",{children:"\u672c\u671f\u671f\u95f4"}),Object(w["jsx"])("td",{children:n}),Object(w["jsx"])("td",{children:a}),Object(w["jsx"])("td",{className:R.a.tdvalue,children:"".concat(K(c).format(G)," ").concat(Z)})]}),Object(w["jsxs"])("tr",{children:[Object(w["jsx"])("th",{children:"\u5bf9\u6bd4\u671f\u95f4"}),Object(w["jsx"])("td",{children:i}),Object(w["jsx"])("td",{children:r}),Object(w["jsx"])("td",{className:R.a.tdvalue,children:"".concat(K(o).format(G)," ").concat(Z)})]}),Object(w["jsxs"])("tr",{children:[Object(w["jsx"])("th",{children:"\u589e\u957f\u6bd4\u4f8b"}),Object(w["jsx"])("td",{}),Object(w["jsx"])("td",{}),Object(w["jsx"])("td",{className:R.a.tdvalue,children:"undefined"===typeof s?"\u65e0\u5bf9\u6bd4\u6570\u636e":K(s).format("0.00%")})]})]}),trigger:["click"],children:Object(w["jsx"])("span",{style:{cursor:"pointer"},children:t})}),value:"undefined"===typeof s?" ":K(s).format("0%"),trend:"undefined"===typeof s?void 0:s>0?"up":"down",layout:"horizontal"})},Ke={day:"yyyy\u5e74mm\u6708dd\u65e5",month:"yyyy\u5e74mm\u6708",year:"yyyy\u5e74"},Fe=function(e){var n=e.chartDefine,a=Object(j["useState"])([]),i=Object(f["a"])(a,2),r=i[0],c=i[1],o=n.type,s=n.sectionType,l=void 0===s?"day":s,d=n.maxCount,u=void 0===d?18:d,m=n.orderby,b=void 0===m?"text":m,h=n.orderDesc,g=void 0!==h&&h;Object(j["useEffect"])((function(){Object(k["a"])({moduleName:t,fields:[Me],navigatefilters:P,userfilters:Se.concat(Te),groupfieldid:{fieldname:I,function:Ke[l]},isnumberordername:!0}).then((function(e){var t=e.map((function(e){var t={text:e.text,value:e[Ae]/H};return t})).sort((function(e,t){return e[b]>t[b]?g?-1:1:e[b]<t[b]?g?1:-1:0})).filter((function(e,t,n){return u>0?t<u:!(u<0)||n.length-t<=-u}));c(t)}))}),[Se,Te]);var v={height:X,width:"100%",data:r,xField:"text",yField:"value",xAxis:{label:null,line:null},yAxis:{label:null,line:null,tickCount:1},tooltip:{showTitle:!1,formatter:function(e){return{name:e.text,value:e.value+Object(D["b"])(H,Z)}}}},y={text:{range:[0,1]}};switch(o){case"column":return Object(w["jsx"])(_["a"],Object(p["a"])({},v));case"line":return Object(w["jsx"])(O["a"],Object(p["a"])(Object(p["a"])({},v),{},{meta:y}));default:return Object(w["jsx"])(x["a"],Object(p["a"])(Object(p["a"])({},v),{},{meta:y}))}};Object(j["useEffect"])((function(){_e(!0),Object(k["a"])({moduleName:t,fields:[Me],navigatefilters:P,userfilters:Se.concat(Te),isnumberordername:!0}).then(function(){var e=Object(o["a"])(b.a.mark((function e(t){var n,a,i;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(de(t[0][Ae]),!ee||!ee.length){e.next=13;break}n=[],a=0;case 4:if(!(a<ee.length)){e.next=12;break}return e.next=7,Le(ee[a]);case 7:i=e.sent,n.push(i);case 9:a+=1,e.next=4;break;case 12:me(n);case 13:_e(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[Se,Te]);var Ue=function(){var e=!1;return null===te||void 0===te||te.forEach((function(t){e=e||!!t.addRatio})),Object(w["jsx"])(s["b"],{size:[8,4],wrap:!0,className:e?R.a.staticspace:"",children:null===te||void 0===te?void 0:te.map((function(e,t){return Object(w["jsx"])(M,Object(p["a"])(Object(p["a"])({},e),{},{userfilters:Se.concat(Te),total:le}),"staticfieldkey-".concat(t))}))},"spacekey")},We=function(){return Object(w["jsxs"])(a["a"],{gutter:8,children:[fe.map((function(e,t){return Object(w["jsx"])(i["a"],{span:12,children:Be(e)},"colkey-".concat(t))}))," "]},"rowkey")},Ve=Object(j["useMemo"])((function(){var e=[];return ne?(te&&e.push(Ue()),fe.length&&e.push(We()),e):"staticfield"===ce&&te?Ue():"relative"===ce&&fe.length?We():null}),[fe,Se,Te]),qe=Object(j["useMemo"])((function(){var e={height:"".concat(X,"px"),marginTop:"6px",marginBottom:"10px"};return ne?null:"staticfield"===ie&&te?Object(w["jsx"])("div",{style:e,children:Ue()}):"relative"===ie&&fe.length?Object(w["jsx"])("div",{style:e,children:We()}):null}),[fe,Se,Te]),ze=Object(j["useMemo"])((function(){return ne?Object(w["jsx"])(Fe,{chartDefine:ne}):null}),[Se,Te]);return Object(w["jsx"])(y["a"],{className:R.a.staticcard,style:{height:Q?"".concat(Q,"px"):""},loading:he,chart:ze,chartPlacement:"bottom",statistic:{title:Ne(),value:K(le/H).format(G),prefix:A,suffix:[Object(D["b"])(H,Z),W],icon:"string"===typeof V?Object(h["n"])(V):V,description:qe},footer:Ve})}},TP9V:function(e,t,n){"use strict";n.d(t,"f",(function(){return D})),n.d(t,"a",(function(){return k})),n.d(t,"i",(function(){return P})),n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return R})),n.d(t,"h",(function(){return N})),n.d(t,"g",(function(){return L})),n.d(t,"d",(function(){return F})),n.d(t,"e",(function(){return U}));var a=n("k1fw"),i=n("9og8"),r=(n("miYZ"),n("tsqr")),c=n("oBTY"),o=(n("+L6B"),n("2/Rp")),s=(n("Awhp"),n("KrTs")),l=(n("5Dmo"),n("3S7+")),d=n("WmNS"),u=n.n(d),p=n("RsOY"),f=n.n(p),m=n("zs7G"),b=n("KPg2"),j=n("JaaR"),h=n("79+z"),_=n("ASZ0"),O=n("mPcc"),x=n("sy1d"),g=n("ma4E"),v=n("WpNc"),y=n("eVqf"),E=n("rMKe"),S=n.n(E),C=n("Ydf/"),I=n("nKUr"),D=function(e){return e[C["db"]]?e[C["db"]].startsWith("field")?"sumfield":e[C["db"]].indexOf("field")>0?"subfield":e.dataIndex?"fieldingroup":"group":"group"},k=function e(t,n){for(var a=function(a){var i=t[a],r=D(i);i[C["eb"]]&&(i.className=(i.className?"".concat(i.className," "):"")+S.a.rowcellselected),i.hidden?(i.title=Object(I["jsxs"])(I["Fragment"],{children:[Object(I["jsx"])(l["a"],{title:"\u663e\u793a ".concat(i.text),children:Object(I["jsx"])("div",{style:"fieldingroup"===r?{marginLeft:"-5px",marginRight:"-5px"}:{position:"absolute",top:"4px",left:"3px"},children:Object(I["jsx"])(m["a"],{onClick:function(){n({type:C["k"],payload:{type:"toggle",rowids:[i[C["db"]]]}})}})})}),"fieldingroup"===r?null:Object(I["jsx"])(I["Fragment"],{children:"\xa0"})]}),i.width="21px",delete i.dataIndex,delete i.sorter,delete i.sortDirections,delete i.render,delete i.children):i.hideRest||a!==t.length-1&&i.children&&"\u5c0f\u8ba1"===i.text?(i.title=Object(I["jsxs"])("span",{style:{display:"flex"},children:[Object(I["jsx"])("span",{style:{flex:1},children:i.text}),Object(I["jsx"])(o["a"],{type:"text",size:"small",style:{padding:"0px"},onClick:function(){n({type:C["h"],payload:{rowid:i[C["db"]]}})},children:i.hideRest?Object(I["jsxs"])(I["Fragment"],{children:[Object(I["jsx"])(b["a"],{rotate:90}),Object(I["jsx"])(l["a"],{title:Object(y["l"])(t,a+1),children:Object(I["jsx"])(s["a"],{count:t.length-a-1,size:"small",offset:[2,-2],style:{backgroundColor:"#69c0ff",boxShadow:"0 0 0 1px #1890ff"}})})]}):Object(I["jsx"])(l["a"],{title:"\u9690\u85cf\u540e\u9762\u5269\u4f59\u7684\u5206\u7ec4",children:Object(I["jsx"])(b["a"],{rotate:270})})})]}),i.hideRest&&t.splice(a+1,t.length-(a+1))):"group"===r&&(i.title=Object(I["jsxs"])(I["Fragment"],{children:[i.text,Object(I["jsxs"])("span",{className:S.a.celltypegroup,children:[Object(I["jsx"])(j["a"],{className:S.a.eye,onClick:function(){n({type:C["k"],payload:{type:"hidden",rowids:[i[C["db"]]]}})}})," "]})]})),i.children&&e(i.children,n)},i=t.length-1;i>=0;i-=1)a(i)},w=function(e,t,n){var a=!1,i=function e(i){if(!a)for(var r=0;r<i.length;r+=1){var o=i[r];if(o[C["db"]]===t)return o.children&&n?i.splice.apply(i,[r,1].concat(Object(c["a"])(o.children))):i.splice(r,1),void(a=!0);o.children&&e(o.children)}};i(e)},P=function(e,t,n){return t.forEach((function(t){w(e,t,n)})),e},T=function(e){var t=function e(t){t.forEach((function(t){var n=t;delete n[C["eb"]],n.children&&e(n.children)}))};return t(e),e},M=function(e){var t=[],n=function e(n){n.forEach((function(n){var a=n;a[C["eb"]]&&t.push(a),a.children&&e(a.children)}))};return n(e),t},A=function(e){return e.substring(0,e.lastIndexOf("-"))},R=function(e,t){for(var n=M(e),a=A(n[0][C["db"]]),i=a?Object(y["m"])(e,a,C["db"]).children:e,o=0;o<n.length;o+=1)if(A(n[o][C["db"]])!==a)return r["default"].warn("\u5408\u5e76\u7684\u5206\u7ec4\u5fc5\u987b\u5728\u540c\u4e00\u4e2a\u7236\u5206\u7ec4\u4e4b\u4e0b\uff01"),!1;for(var s=0;s<n.length;s+=1)if(n[s].children)return r["default"].warn("\u5408\u5e76\u7684\u5206\u7ec4\u5fc5\u987b\u90fd\u662f\u6700\u672b\u7ea7\u7684\uff01"),!1;for(var l,d=[],u="",p=n[0],f=n[0].condition,m=f.substring(0,f.lastIndexOf("=")),b=!0,j=0;j<n.length;j+=1){b&&(u.length<30?u+=(n[j][C["gb"]]||n[j][C["fb"]])+(j===n.length-1?"":","):(b=!1,u="".concat(u.substr(0,u.length-1),"\u7b49").concat(n.length,"\u6761")));var h=n[j].condition,_=h.lastIndexOf("="),O=h.substring(0,_);if(O!==m)return r["default"].warn("\u5408\u5e76\u7684\u5206\u7ec4\u5fc5\u987b\u90fd\u662f\u5728\u540c\u4e00\u7ea7\uff0c\u540c\u4e00\u4e2a\u7236\u5206\u7ec4\u4e4b\u4e0b\u7684\uff01"),!1;if("\u5c0f\u8ba1"===n[j][C["fb"]])return r["default"].warn("\u5c0f\u8ba1\u5217\u4e0d\u80fd\u518d\u8fdb\u884c\u5408\u5e76\u4e86\uff01"),!1;d.push(h.substr(_+1))}return l=t?{text:u,condition:"".concat(m,"=").concat(d.join(",")),leaf:!1,children:[{text:"\u5c0f\u8ba1",condition:"".concat(m,"=").concat(d.join(",")),leaf:!0}].concat(Object(c["a"])(n))}:{text:u,condition:"".concat(m,"=").concat(d.join(",")),leaf:!0},i.splice(i.findIndex((function(e){return e===p})),0,l),n.forEach((function(e){return i.splice(i.findIndex((function(t){return t===e})),1)})),e},N=function(e,t,n,a){var i=Object(c["a"])(e.schemeState.fieldGroup),r=i.findIndex((function(e){return e[C["db"]]===n})),o=i.findIndex((function(e){return e[C["db"]]===a})),s=f()(i,{$splice:[[r,1],[o,0,i[r]]]});t({type:C["x"],payload:{fieldGroup:s}})},L=function(e,t,n,a,i){var r=e.schemeState.columnGroup,o=Object(y["m"])(r,n,C["db"]),s=o?o.children:r,l=s.findIndex((function(e){return e[C["db"]]===a})),d=s.findIndex((function(e){return e[C["db"]]===i})),u=s[l];s.splice(l,1),s.splice(d,0,u),t({type:C["j"],payload:{columnGroup:Object(c["a"])(r)}})},B=function e(t,n,a){var i=[];return t.forEach((function(t){var r="".concat(a+n+(t[C["V"]]?"-".concat(t[C["V"]]):""),"=").concat(t.value),c={condition:r,value:t.value,text:t.text,leaf:!0};t.children&&(c.children=e(t.children,n,a),c.children.unshift({condition:r,value:c.value,text:"\u5c0f\u8ba1",leaf:!0}),delete c.condition,c.leaf=!1),i.push(c)})),i},K=function(){var e=Object(i["a"])(u.a.mark((function e(t,n,a,i){var r,c,o,s,l,d,p,f,m,b,j,y,E,S,C,I,D,k;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.moduleName,c=t.filters,o=t.schemeState,s=o.setting,l=n,d=i.condition,p={moduleName:r,parentconditions:JSON.stringify(d?d.split("|||"):[]),groupfieldid:l,conditions:JSON.stringify([]),fields:JSON.stringify(Object(v["f"])(t.schemeState.fieldGroup)),sqlparamstr:c.sqlparam?JSON.stringify(Object(g["p"])(c.sqlparam)):null},l.endsWith("-auto")&&(f=l.substr(0,l.length-5),m=Object(v["e"])(f,d?d.split("|||"):[])+1,l="".concat(f,"-").concat(m),p.groupfieldid=l),s.expandColAddFilter&&Object(h["d"])(p,{navigatefilters:JSON.stringify(c.navigatefilters),viewschemeid:c.viewscheme.viewschemeid,userfilters:JSON.stringify(Object(_["b"])(c.userfilter))}),e.next=9,Object(x["default"])("".concat(x["API_HEAD"],"/platform/datamining/fetchdata.do"),{method:"POST",params:{moduleName_:r},data:Object(O["serialize"])(p)});case 9:if(b=e.sent,0!==b.length){e.next=12;break}return e.abrupt("return",null);case 12:if(d=d?"".concat(d,"|||"):"",j="asc"===s.expandItemDirection?1:-1,y="value",E=s.expandItemMode,"text"===E?y="text":"value"===E&&b.length>0&&(y=Object.keys(b[0]).find((function(e){return 0===e.indexOf("jf")}))||y),b.sort((function(e,t){return(e[y]>t[y]?1:-1)*j})),S=s.expandMaxCol,S>1&&b.length>S){if(b.length-S<3)for(C=S;C<b.length;C+=1)b[S-1].text="".concat(b[S-1].text,",").concat(b[C].text);else b[S-1].text="".concat(b[S-1].text,"\u7b49").concat(b.length-S+1,"\u4e2a");for(I=b.length,D=S;D<I;D+=1)b[S-1].value="".concat(b[S-1].value,",").concat(b.pop().value)}if(l.endsWith("-all")&&(l=l.replace("-all","")),k=B(b,l,d),0!==k.length){e.next=24;break}return e.abrupt("return",null);case 24:if("yes"!==s.expandColAddGroupName){e.next=26;break}return e.abrupt("return",[{text:a,children:k,leaf:!1}]);case 26:return e.abrupt("return",k);case 27:case"end":return e.stop()}}),e)})));return function(t,n,a,i){return e.apply(this,arguments)}}(),F=function(e,t,n,i,r,o){K(e,r,o,i).then((function(r){if(r){var o=e.schemeState.columnGroup;if("sumfield"===n)o.splice.apply(o,[o.length,0].concat(Object(c["a"])(r)));else if("group"===n||"fieldingroup"===n){var s=Object(y["m"])(o,i[C["db"]],C["db"]),l=Object(a["a"])(Object(a["a"])({},s),{},{text:"\u5c0f\u8ba1"});delete s.condition,s.children=[l].concat(Object(c["a"])(r))}t({type:C["j"],payload:{columnGroup:Object(c["a"])(o),refreshAllCount:1}})}}))},U=function(e,t,n,i,r,o,s){var l=s.map((function(e){return{condition:"".concat(e.groupfieldid,"=").concat(e.value),text:e.text,value:e.value,leaf:!0}})),d=e.schemeState.columnGroup;if("sumfield"===n)d.splice(d.length,0,{text:o,leaf:!1,children:l});else if("group"===n||"fieldingroup"===n){var u=Object(y["m"])(d,i[C["db"]],C["db"]),p=u.condition,f=p.split("|||"),m=f[f.length-1].split("=")[0];if(r!==m){var b=Object(a["a"])(Object(a["a"])({},u),{},{text:"\u5c0f\u8ba1"});delete u.condition,u.children=[b,{text:o,leaf:!1,children:l.map((function(e){return Object(a["a"])(Object(a["a"])({},e),{},{condition:"".concat(p,"|||").concat(e.condition)})}))}]}else{var j=Object(y["m"])(d,i[C["bb"]],C["db"]),h=j?j.children:d,_=i.condition,O=_.substring(0,_.lastIndexOf("="));h.splice.apply(h,[h.findIndex((function(e){return e[C["db"]]===i[C["db"]]}))+1,0].concat(Object(c["a"])(l.map((function(e){return Object(a["a"])(Object(a["a"])({},e),{},{condition:"".concat(O,"=").concat(e.value)})})).filter((function(e){return!h.find((function(t){return t.condition===e.condition}))})))))}}t({type:C["j"],payload:{columnGroup:Object(c["a"])(d),refreshAllCount:1}})}},Ti6Z:function(e,t,n){},TtZX:function(e,t,n){"use strict";n.d(t,"b",(function(){return b}));n("lUTK");var a=n("BvKs"),i=(n("miYZ"),n("tsqr")),r=(n("IzEo"),n("bx4M")),c=(n("DYRE"),n("zeV3")),o=(n("+L6B"),n("2/Rp")),s=n("FKDb"),l=n("sy1d"),d=n("bx7e"),u=n("WTWM"),p=n("jE+T"),f=n("nKUr"),m="recordprint",b=function(e){var t=e.moduleName,n=e.scheme,a=e.record,i=Object(u["x"])(t),p={visible:!0,style:{zIndex:1e6},bodyStyle:{margin:0,padding:0,height:"100%"},width:"800px",closeIcon:null,footer:null,destroyOnClose:!0,onClose:function(){return Object(d["setGlobalDrawerProps"])((function(){return{visible:!1}}))},children:Object(f["jsx"])(r["a"],{size:"default",bordered:!1,title:Object(f["jsxs"])("span",{children:[Object(f["jsx"])(s["a"],{})," ","".concat(a[i.namefield]," \u7684 ").concat(n.title)]}),style:{height:"100%"},bodyStyle:{padding:"8px",height:"90%"},extra:Object(f["jsxs"])(c["b"],{children:[Object(f["jsx"])(o["a"],{type:"primary",onClick:function(){var e=document.getElementById("_printrecord_");e.contentWindow.print()},children:"\u6253\u5370"}),Object(f["jsx"])(o["a"],{onClick:function(){Object(d["setGlobalDrawerProps"])((function(){return{visible:!1}}))},children:"\u5173\u95ed"})]}),children:Object(f["jsx"])("iframe",{title:"_printrecord_",id:"_printrecord_",src:"".concat(l["API_HEAD"],"/platform/dataobjectexport/printrecord.do?")+"moduleName=".concat(t,"&schemeId=").concat(n.schemeid,"&")+"id=".concat(a[i.primarykey],"&title=").concat(i.title)+"&t=".concat((new Date).getTime()),width:"100%",height:"100%",frameBorder:0})})};Object(d["setGlobalDrawerProps"])(p)},j=function(e){var t=e.moduleState,n=e.setVisible,r=t.moduleName,c=Object(u["x"])(r),o=function(){var e=c.recordPrintSchemes;if(!e)return null;var o=[],l=e.map((function(e){return Object(f["jsx"])(a["a"].Item,{title:e.title,icon:e.iconcls?Object(f["jsx"])("span",{className:e.iconcls}):Object(f["jsx"])(s["a"],{}),onClick:function(){var a=t.selectedRowKeys,o=t.selectedTextValue;1===a.length?(n(!1),b({moduleName:r,scheme:e,record:Object(p["n"])(t.dataSource,o[0].value||"",c.primarykey)})):i["default"].warn("\u5148\u9009\u62e9\u4e00\u6761\u8bb0\u5f55\uff0c\u624d\u80fd\u6267\u884c\u6b64\u5bfc\u51fa\u64cd\u4f5c\uff01")},children:e.title},"".concat(m,"||").concat(e.schemeid,"||").concat(e.title))}));return l.length>0&&(o.push(Object(f["jsx"])(a["a"].ItemGroup,{title:"\u8bb0\u5f55\u6253\u5370\u65b9\u6848",children:l},"_export_record_key1_")),o.push(Object(f["jsx"])(a["a"].Divider,{},"_print_record_key_div"))),o};return o()};t["a"]=j},"Uj+7":function(e,t,n){e.exports={infoicon:"infoicon___26b_I",filtericon:"filtericon___1BeJ_"}},WMCO:function(e,t,n){"use strict";var a=n("3OWR"),i=n("y2gs");e.exports=function(e,t,n,r,c){r=a({idPrefix:"listener-",insideListener:!0},r);var o=i(t,n,c,r);o&&o.length>0&&(e.entries=e.entries.concat(o))}},WP2f:function(e,t,n){"use strict";var a=n("emvA").is,i=n("3OWR"),r=n("6BL2"),c=n("hfUJ");e.exports=function(e,t,n,o){var s=n.getBusinessObject,l=n.hideResultVariable,d=n.id||"resultVariable",u=r.textField({id:d,label:o("Result Variable"),modelProperty:"resultVariable",get:function(e,t){var n=s(e);return{resultVariable:n.get("activiti:resultVariable")}},set:function(e,t,n){var r=s(e),o=t.resultVariable||void 0,l={"activiti:resultVariable":o};return a(r,"activiti:DmnCapable")&&!o&&(l=i({"activiti:mapDecisionResult":"resultList"},l)),c.updateBusinessObject(e,r,l)},hidden:function(e,t){if("function"===typeof l)return l.apply(u,arguments)}});return[u]}},WpNc:function(e,t,n){"use strict";n.d(t,"k",(function(){return S})),n.d(t,"j",(function(){return C})),n.d(t,"b",(function(){return I})),n.d(t,"d",(function(){return D})),n.d(t,"a",(function(){return k})),n.d(t,"g",(function(){return w})),n.d(t,"f",(function(){return P})),n.d(t,"h",(function(){return R})),n.d(t,"e",(function(){return N})),n.d(t,"c",(function(){return L})),n.d(t,"i",(function(){return F}));var a=n("9og8"),i=n("k1fw"),r=(n("miYZ"),n("tsqr")),c=(n("IzEo"),n("bx4M")),o=(n("BoS7"),n("Sdc0")),s=(n("y8nQ"),n("Vl3Y")),l=(n("5NDa"),n("5rEg")),d=(n("2qtc"),n("kLXV")),u=n("WmNS"),p=n.n(u),f=n("sy1d"),m=n("mPcc"),b=n("xvlK"),j=n("79+z"),h=n("ASZ0"),_=n("Ydf/"),O=n("jE+T"),x=n("O+pJ"),g=n("eVqf"),v=n("WTWM"),y=n("ma4E"),E=n("nKUr"),S=function(e,t){var n=e.moduleName,a=e.schemeState,i=Object(v["x"])(n),u="".concat(i.title,"\u6570\u636e\u5206\u6790\u65b9\u6848"),p=!1;d["a"].confirm({title:Object(E["jsxs"])("span",{children:[Object(E["jsx"])(b["a"],{})," \u65b0\u589e".concat(u)]}),icon:null,content:Object(E["jsx"])(c["a"],{children:Object(E["jsxs"])(s["a"],{autoComplete:"off",labelCol:{span:8},wrapperCol:{span:16},children:[Object(E["jsx"])(s["a"].Item,{label:"\u6570\u636e\u5206\u6790\u65b9\u6848\u540d\u79f0",name:"text",children:Object(E["jsx"])(l["a"],{autoFocus:!0,defaultValue:u,maxLength:100,onChange:function(e){u=e.target.value}})}),Object(E["jsx"])(s["a"].Item,{label:"\u5171\u4eab\u7ed9\u6240\u6709\u7528\u6237",children:Object(E["jsx"])(o["a"],{onChange:function(e){p=e}})})]})}),onOk:function(){Object(f["default"])("".concat(f["API_HEAD"],"/platform/datamining/addscheme.do"),{method:"POST",data:Object(m["serialize"])({moduleName:n,title:u,isshare:p,savepath:!0,ownerfilter:!1,fieldGroup:JSON.stringify(a.fieldGroup),rowGroup:JSON.stringify(a.rowGroup),columnGroup:JSON.stringify(a.columnGroup).replaceAll('"children"','"columns"'),setting:JSON.stringify(a.setting)})}).then((function(e){e.success?(r["default"].success("\u6570\u636e\u5206\u6790\u65b9\u6848\u300e".concat(e.tag.text,"\u300f\u5df2\u4fdd\u5b58\uff01")),t({type:_["a"],payload:{scheme:{ownerfilter:!1,savepath:!0,schemeid:e.tag.schemeid,text:e.tag.text,title:e.tag.title}}})):r["default"].error(e.msg)}))}})},C=function(e){var t=e.currentScheme,n=e.schemeState;Object(f["default"])("".concat(f["API_HEAD"],"/platform/datamining/editscheme.do"),{method:"POST",data:Object(m["serialize"])({schemeid:t.schemeid,name:t.title,savepath:!0,ownerfilter:!1,fieldGroup:JSON.stringify(n.fieldGroup),rowGroup:JSON.stringify(n.rowGroup),columnGroup:JSON.stringify(n.columnGroup).replaceAll('"children"','"columns"'),setting:JSON.stringify(n.setting)})}).then((function(e){e.success?r["default"].success("\u6570\u636e\u5206\u6790\u65b9\u6848\u300e".concat(e.tag.text,"\u300f\u5df2\u4fdd\u5b58\uff01")):r["default"].error(e.msg)}))},I=function(e,t){var n=e.currentScheme;Object(f["default"])("".concat(f["API_HEAD"],"/platform/datamining/deletescheme.do"),{method:"POST",data:Object(m["serialize"])({schemeid:n.schemeid})}).then((function(e){e.success?(r["default"].success("\u6570\u636e\u5206\u6790\u65b9\u6848\u300e".concat(n.text,"\u300f\u5df2\u5220\u9664\uff01")),t({type:_["r"],payload:{schemeid:n.schemeid}})):r["default"].error(e.msg)}))},D=function(e){var t=Object(f["syncRequest"])("".concat(f["API_HEAD"],"/platform/datamining/getschemes.do"),{params:{moduleName:e.moduleName}}),n=Object(f["syncRequest"])("".concat(f["API_HEAD"],"/platform/datamining/getexpandgroupfields.do"),{params:{moduleName:e.moduleName}}),a=Object(f["syncRequest"])("".concat(f["API_HEAD"],"/platform/datamining/getfieldschemedetail.do"),{params:{moduleName:e.moduleName}}),r=0===t.length?e.currentScheme:t[0];return e.defaultSchemeid&&(r=t.find((function(t){return t.schemeid===e.defaultSchemeid}))||r),Object(i["a"])(Object(i["a"])({},e),{},{schemes:t,refreshAllCount:0===t.length?e.refreshAllCount+1:e.refreshAllCount,currentScheme:r,aggregateFields:a,expandGroupFields:n.list,expandGroupFieldsTree:n.tree})},k=function(){var e=Object(a["a"])(p.a.mark((function e(t,n){var a,i,r,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Object(g["p"])({dispatch:n,fetchLoading:!0}),!t.currentScheme.schemeid){e.next=8;break}return e.next=4,Object(f["default"])("".concat(f["API_HEAD"],"/platform/datamining/getschemedetail.do"),{method:"POST",data:Object(m["serialize"])({schemeid:null===(i=t.currentScheme)||void 0===i?void 0:i.schemeid})});case 4:r=e.sent,a={columnGroup:r.columnGroup,fieldGroup:r.fieldGroup,isMultFieldGroup:!!(r.fieldGroup||[]).find((function(e){return e.columns})),rowGroup:r.rowGroup,setting:JSON.parse(r.setting),dataSource:[{text:"\u603b\u8ba1",rowid:_["cb"]}],sorts:[{property:void 0,direction:"ASC"}]},e.next=10;break;case 8:c=t.schemeState.fieldGroup,a={columnGroup:[],fieldGroup:c,isMultFieldGroup:!1,rowGroup:[],setting:Object(g["j"])(),dataSource:[],sorts:[{property:void 0,direction:"ASC"}]};case 10:n({type:_["Q"],payload:{schemeChanged:!0,schemeState:a,dispatch:n}});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(e){var t=[],n=Object(O["h"])(e);return n.forEach((function(e){t.push(e.condition)})),t},P=function(e){var t=[],n=Object(O["h"])(e);return n.forEach((function(e){t.push(e.aggregatefieldname)})),t},T=function(){var e=Object(a["a"])(p.a.mark((function e(t){var n,a,i;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.moduleName,a=t.filters,i=t.schemeState,e.abrupt("return",Object(f["default"])("".concat(f["API_HEAD"],"/platform/datamining/fetchdata.do"),{method:"POST",params:{moduleName_:n},data:Object(m["serialize"])({moduleName:n,conditions:JSON.stringify(w(i.columnGroup)),fields:JSON.stringify(P(i.fieldGroup)),navigatefilters:JSON.stringify(a.navigatefilters),viewschemeid:a.viewscheme.viewschemeid,userfilters:JSON.stringify(Object(h["b"])(a.userfilter)),sqlparamstr:a.sqlparam?JSON.stringify(Object(y["p"])(a.sqlparam)):null})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(a["a"])(p.a.mark((function e(t,n,a,i,r){var c,o;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c=t.moduleName,o=t.filters,e.abrupt("return",Object(f["default"])("".concat(f["API_HEAD"],"/platform/datamining/fetchdata.do"),{method:"POST",params:{moduleName_:c},data:Object(m["serialize"])({moduleName:c,groupfieldid:a,conditions:JSON.stringify(w(n.columnGroup)),fields:JSON.stringify(P(n.fieldGroup)),parentconditions:JSON.stringify(r),navigatefilters:JSON.stringify(o.navigatefilters),viewschemeid:o.viewscheme.viewschemeid,userfilters:JSON.stringify(Object(h["b"])(o.userfilter)),sqlparamstr:o.sqlparam?JSON.stringify(Object(y["p"])(o.sqlparam)):null})}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a,i,r){return e.apply(this,arguments)}}(),A=function e(t,n,a){n.forEach((function(n){var i=n;i.parentNode=t,i.condition="".concat(a+(i[_["V"]]?"-".concat(i[_["V"]]):""),"=").concat(i.value),i.moduleName&&(i[_["gb"]]=i.text),i.children&&e(i,i.children,a)}))},R=function e(t,n){t.condition&&n.unshift(t.condition),t.parentNode&&e(t.parentNode,n)},N=function(e,t){var n=0;return t.forEach((function(t){var a=t.split("=");if(a[0]!==e&&a[0].startsWith(e)){var i=parseInt(a[0].split("-")[1],10);n<i&&(n=i)}})),n},L=function(){var e=Object(a["a"])(p.a.mark((function e(t){var n,a,i,c,o,s,l,d,u,f,m,b,h,O,x,g,v,y,E,S,C,I;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.state,a=t.selectrecord,i=t.fieldid,c=t.title,o=t.recordpath,s=n.schemeState,l=s.setting,d=a,u=i,"no"!==l.expandMultiGroup){e.next=9;break}if(!Array.isArray(d.children)){e.next=9;break}return r["default"].warn("\u8282\u70b9\u300e".concat(d[_["gb"]]||d.text,"\u300f\u5df2\u7ecf\u6709\u5c55\u5f00\u7684\u5206\u7ec4\u3002\u5c55\u5f00\u591a\u4e2a\u5206\u7ec4\u8bf7\u5728\u8bbe\u7f6e\u4e2d\u5c06\u201c\u8282\u70b9\u53ef\u5c55\u5f00\u591a\u4e2a\u5206\u7ec4\u201d\u8bbe\u7f6e\u4e3a\u201c\u662f\u201d\uff01")),e.abrupt("return");case 9:return f=null,!1!==o&&(f={type:"expand",conditionpath:d[_["db"]],conditiontext:d[_["fb"]],fieldid:u,title:c}),m=[],R(d,m),u.endsWith("-auto")&&(b=u.substr(0,u.length-5),h=N(b,m)+1,u="".concat(b,"-").concat(h)),e.next=16,M(n,s,u,c,m);case 16:if(O=e.sent,Array.isArray(O)&&O.length>0){if(x="asc"===l.expandItemDirection?1:-1,g="value",v=l.expandItemMode,"text"===v?g="text":"value"===v&&O.length>0&&(g=Object.keys(O[0]).find((function(e){return 0===e.indexOf("jf")}))||g),O.sort((function(e,t){return(e[g]>t[g]?1:-1)*x})),y=l.expandMaxRow||0,y>1&&O.length>y){if(O.length-y<3)for(E=y;E<O.length;E+=1)O[y-1].text="".concat(O[y-1].text,",").concat(O[E].text);else O[y-1].text="".concat(O[y-1].text,"\u7b49").concat(O.length-y+1,"\u4e2a");for(S=O.length,C=y;C<S;C+=1)O[y-1].value="".concat(O[y-1].value,",").concat(O.pop().value)}d.leaf=!1,Array.isArray(d.children)||(d.children=[]),I=d,"yes"===l.expandRowAddGroupName&&(d.children.push({text:c,leaf:!1,expanded:!0,children:[],parentNode:d,rowid:Object(j["I"])()}),I=d.children[d.children.length-1]),u.endsWith("-all")&&(u=u.replace("-all","")),O.forEach((function(e){var t=e;t.condition="".concat(u+(t[_["V"]]?"-".concat(t[_["V"]]):""),"=").concat(t.value),t.parentNode=I,t.children&&A(t,t.children,u),I.children.push(t)}))}return e.abrupt("return",new Promise((function(e){e({expandPath:f})})));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(a["a"])(p.a.mark((function e(t){var n,a,i,r,c,o,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.state,a=t.dataSource,i=t.fieldid,r=t.fieldtitle,c=Object(O["h"])(a),o=0;case 3:if(!(o<c.length)){e.next=10;break}return s=c[o],e.next=7,L({state:n,selectrecord:s,fieldid:i,title:r,recordpath:!1});case 7:o+=1,e.next=3;break;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(a["a"])(p.a.mark((function e(t,n){var a,i,r,c,o;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.schemeState,i=a.rowGroup,r=0;case 3:if(!(r<i.length)){e.next=39;break}if(c=i[r],"expandallleaf"!==c.type){e.next=10;break}return e.next=8,B({state:t,dataSource:n,fieldid:c.fieldid,fieldtitle:c.title});case 8:e.next=36;break;case 10:if("combinerows"!==c.type){e.next=14;break}return e.delegateYield(p.a.mark((function e(){var a,i,r,o,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=[],c.conditionpath&&c.conditionpath.split(",").forEach((function(e){var t=Object(g["m"])(n,e,_["db"]);t&&a.push(t)})),i=a[0],!(a.length>0)){e.next=9;break}for(r={text:c.text,condition:c.condition,parentNode:i.parentNode},i.parentNode.children.splice(i.parentNode.children.findIndex((function(e){return e===i})),0,r),o=0;o<a.length;o+=1)s=Object(g["o"])(a[o]),c.addSelectedChildrens&&(r.children||(r.children=[]),s.parentNode=r,r.children.push(s));return e.next=9,Object(x["g"])(t,r,!0);case 9:case"end":return e.stop()}}),e)}))(),"t0",12);case 12:e.next=36;break;case 14:if("combineotherrows"!==c.type){e.next=18;break}return e.delegateYield(p.a.mark((function e(){var a,i,r,o,s,l;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=[],c.conditionpath&&c.conditionpath.split(",").forEach((function(e){var t=Object(g["m"])(n,e,_["db"]);t&&a.push(t)})),!(a.length>0)){e.next=10;break}for(i=a[0],r={text:"\u5176\u4ed6",condition:c.condition,parentNode:i.parentNode},o=r.parentNode.children.filter((function(e){return-1===a.findIndex((function(t){return t===e}))})),s=0;s<o.length;s+=1)l=Object(g["o"])(o[s]),c.addSelectedChildrens&&(r.children||(r.children=[]),l.parentNode=r,r.children.push(l));return r.parentNode.children.push(r),e.next=10,Object(x["g"])(t,r,!0);case 10:case"end":return e.stop()}}),e)}))(),"t1",16);case 16:e.next=36;break;case 18:if(!c.conditionpath){e.next=36;break}if(o=Object(g["m"])(n,c.conditionpath,_["db"]),!o){e.next=36;break}e.t2=c.type,e.next="expand"===e.t2?24:"expandwithnavigaterecords"===e.t2?27:"deleterow"===e.t2?30:"deletechildren"===e.t2?32:"edittext"===e.t2?34:36;break;case 24:return e.next=26,L({state:t,selectrecord:o,fieldid:c.fieldid,title:c.title,recordpath:!1});case 26:return e.abrupt("break",36);case 27:return e.next=29,Object(x["e"])({state:t,dispatch:function(){},node:o,fieldid:c.fieldid,title:c.title,records:c.records,pos:c.pos,recordpath:!1});case 29:return e.abrupt("break",36);case 30:return Object(g["o"])(o),e.abrupt("break",36);case 32:return delete o.children,e.abrupt("break",36);case 34:return o.text=c.text,e.abrupt("break",36);case 36:r+=1,e.next=3;break;case 39:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(a["a"])(p.a.mark((function e(t,n){var a,i,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(g["p"])({dispatch:n,fetchLoading:!0}),a=t.schemeState,e.next=4,T(t);case 4:if(i=e.sent,!a.rowGroup.length){e.next=8;break}return e.next=8,K(t,i);case 8:r=[],t.schemeChanged&&Object(g["g"])(i).length<300&&(r=Object(g["f"])(i)),n({type:_["o"],payload:{dataSource:i,expandedRowKeys:r}}),Object(g["p"])({dispatch:n,fetchLoading:!1});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},XWga:function(e,t,n){"use strict";var a=n("asz2").findExtension,i=n("asz2").findExtensions,r=n("aUXt").createFlowableProperty,c=n("aUXt").createInputParameter,o=n("aUXt").createOutputParameter,s=n("aUXt").createFlowableIn,l=n("aUXt").createFlowableOut,d=n("aUXt").createFlowableInWithBusinessKey,u=n("aUXt").createFlowableExecutionListenerScript,p=n("aUXt").createFlowableFieldInjection,f=n("bNQv"),m=["activiti:class","activiti:delegateExpression","activiti:expression"];function b(e,t,n){function r(t){var a=t.businessObject,i=a.extensionElements;return i||(i=n.create("bpmn:ExtensionElements",{values:[]}),e.updateProperties(t,{extensionElements:i})),i}function c(t,n){e.updateProperties(t,{"activiti:modelerTemplate":n&&n.id})}function o(e,i,c){var o,s=O(i,n);s&&(c?t.execute("properties-panel.update-businessobject",{element:e,businessObject:c,properties:{inputOutput:s}}):(c=r(e),o=a(e,"activiti:InputOutput"),t.execute("properties-panel.update-businessobject-list",{element:e,currentObject:c,propertyName:"values",objectsToAdd:[s],objectsToRemove:o?[o]:[]})))}function s(e,a,c){var o,s=h(a,n);s&&(c?t.execute("properties-panel.update-businessobject",{element:e,businessObject:c,properties:{field:s}}):(c=r(e),o=i(e,["activiti:Field"]),t.execute("properties-panel.update-businessobject-list",{element:e,currentObject:c,propertyName:"values",objectsToAdd:s,objectsToRemove:o||[]})))}function l(e,i,c){var o,s=_(i,n);s&&(c?t.execute("properties-panel.update-businessobject",{element:e,businessObject:c,properties:{properties:s}}):(c=r(e),o=a(e,"activiti:Properties"),t.execute("properties-panel.update-businessobject-list",{element:e,currentObject:c,propertyName:"values",objectsToAdd:[s],objectsToRemove:o?[o]:[]})))}function d(a,i,r){var c=j(i,n),o=Object.keys(c).length;o&&(r?t.execute("properties-panel.update-businessobject",{element:a,businessObject:r,properties:c}):e.updateProperties(a,c))}function u(e,a,c){var o,s=x(a,n);s&&(c?t.execute("properties-panel.update-businessobject",{element:e,businessObject:c,properties:{inout:s}}):(c=r(e),o=i(c,["activiti:In","activiti:Out"]),t.execute("properties-panel.update-businessobject-list",{element:e,currentObject:c,propertyName:"values",objectsToAdd:s,objectsToRemove:o})))}function p(e,a,c){var o,s=g(a,n);s.length&&(c?t.execute("properties-panel.update-businessobject",{element:e,businessObject:c,properties:{executionListener:s}}):(c=r(e),o=i(c,["activiti:ExecutionListener"]),t.execute("properties-panel.update-businessobject-list",{element:e,currentObject:c,propertyName:"values",objectsToAdd:s,objectsToRemove:o})))}function m(e,i,c){var f=n.create(i);o(e,c,f),s(e,c,f),l(e,c,f),d(e,c,f),u(e,c,f),p(e,c,f);var m=r(e),b=a(m,i);t.execute("properties-panel.update-businessobject-list",{element:e,currentObject:m,propertyName:"values",objectsToAdd:[f],objectsToRemove:b?[b]:[]})}this.preExecute=function(e){var t=e.element,n=e.newTemplate;c(t,n),n&&(o(t,n),s(t,n),l(t,n),d(t,n),u(t,n),p(t,n),f(n.scopes,(function(e,n){m(t,n,e)})))}}function j(e,t){var n={};return e.properties.forEach((function(e){var a,i=e.binding,r=i.name;"property"===i.type&&(a="conditionExpression"===r?t.create("bpmn:FormalExpression",{body:e.value,language:i.scriptFormat}):e.value,n[r]=a,-1!==m.indexOf(r)&&m.forEach((function(e){e!==r&&(n[e]=void 0)})))})),n}function h(e,t){var n=[];if(e.properties.forEach((function(e){var a=e.binding,i=a.type;"activiti:field"===i&&n.push(p(a,e.value,t))})),n.length)return n}function _(e,t){var n=[];if(e.properties.forEach((function(e){var a=e.binding,i=a.type;"activiti:property"===i&&n.push(r(a,e.value,t))})),n.length)return t.create("activiti:Properties",{values:n})}function O(e,t){var n=[],a=[];if(e.properties.forEach((function(e){var i=e.binding,r=i.type;"activiti:inputParameter"===r&&n.push(c(i,e.value,t)),"activiti:outputParameter"===r&&a.push(o(i,e.value,t))})),a.length||n.length)return t.create("activiti:InputOutput",{inputParameters:n,outputParameters:a})}function x(e,t){var n=[];return e.properties.forEach((function(e){var a=e.binding,i=a.type;"activiti:in"===i?n.push(s(a,e.value,t)):"activiti:out"===i?n.push(l(a,e.value,t)):"activiti:in:businessKey"===i&&n.push(d(a,e.value,t))})),n}function g(e,t){var n=[];return e.properties.forEach((function(e){var a=e.binding,i=a.type;"activiti:executionListener"===i&&n.push(u(a,e.value,t))})),n}b.$inject=["modeling","commandStack","bpmnFactory"],e.exports=b},XpWC:function(e,t,n){"use strict";var a=n("emvA"),i=a.is,r=a.getBusinessObject,c=n("vtLx"),o=n("Nw6e"),s={};e.exports=s,s.isServiceTaskLike=function(e){return i(e,"activiti:ServiceTaskLike")},s.isDmnCapable=function(e){return i(e,"activiti:DmnCapable")},s.isExternalCapable=function(e){return i(e,"activiti:ExternalCapable")},s.isTaskListener=function(e){return i(e,"activiti:TaskListener")},s.isExecutionListener=function(e){return i(e,"activiti:ExecutionListener")},s.isListener=function(e){return this.isTaskListener(e)||this.isExecutionListener(e)},s.isSequenceFlow=function(e){return i(e,"bpmn:SequenceFlow")},s.getServiceTaskLikeBusinessObject=function(e){if(i(e,"bpmn:IntermediateThrowEvent")||i(e,"bpmn:EndEvent")){var t=c.getMessageEventDefinition(e);t&&(e=t)}return this.isServiceTaskLike(e)&&r(e)},s.getImplementationType=function(e){var t=this.getServiceTaskLikeBusinessObject(e);if(!t){if(!this.isListener(e))return;t=e}if(this.isDmnCapable(t)){var n=t.get("activiti:decisionRef");if("undefined"!==typeof n)return"dmn"}if(this.isServiceTaskLike(t)){var a=o.getExtensionElements(t,"activiti:Connector");if("undefined"!==typeof a)return"connector"}if(this.isExternalCapable(t)){var i=t.get("activiti:type");if("external"===i)return"external"}var r=t.get("activiti:class");if("undefined"!==typeof r)return"class";var c=t.get("activiti:expression");if("undefined"!==typeof c)return"expression";var s=t.get("activiti:delegateExpression");if("undefined"!==typeof s)return"delegateExpression";if(this.isListener(t)){var l=t.get("script");if("undefined"!==typeof l)return"script"}}},YLpF:function(e,t,n){"use strict";n("IzEo");var a=n("bx4M"),i=(n("5NDa"),n("5rEg")),r=(n("+L6B"),n("2/Rp")),c=n("k1fw"),o=(n("y8nQ"),n("Vl3Y")),s=n("tJVT"),l=(n("iQDF"),n("+eQT")),d=n("q1tI"),u=n("SdJU"),p=n("nKUr"),f=l["a"].RangePicker,m=function(e){var t=e.moduleState,n=e.dispatch,l=e.inPagination,m=t.moduleName,b=t.filters.sqlparam,j=o["a"].useForm(),h=Object(s["a"])(j,1),_=h[0];Object(d["useEffect"])((function(){setTimeout((function(){_.setFieldsValue({startEndDate:[b.startDate.value,b.endDate.value]})}),0)}),[b]);var O=function(e){_.setFieldsValue({startEndDate:e})},x=function(){var e=Object(c["a"])({},t.filters.sqlparam),a=_.getFieldValue("startEndDate"),i=Object(s["a"])(a,2),r=i[0],o=i[1];e.startDate.value=r,e.endDate.value=o,n({type:"modules/filterChanged",payload:{type:"sqlparamChange",moduleName:m,sqlparam:e}})},g=function(){var e=Object(c["a"])({},t.filters.sqlparam);e.startDate.value=null,e.endDate.value=null,n({type:"modules/filterChanged",payload:{type:"sqlparamChange",moduleName:m,sqlparam:e}})},v=Object(p["jsx"])(o["a"],{form:_,size:"default"===t.currSetting.gridSize?"middle":t.currSetting.gridSize,children:Object(p["jsx"])(o["a"].Item,{label:"\u8d77\u6b62\u65e5\u671f",style:{padding:0,margin:0},children:Object(p["jsxs"])(i["a"].Group,{compact:!0,style:{display:"flex"},children:[Object(p["jsx"])(u["a"],{callback:O}),Object(p["jsx"])(o["a"].Item,{noStyle:!0,name:["startEndDate"],children:Object(p["jsx"])(f,{allowEmpty:[!1,!1],picker:"date",style:{flex:1},format:"YYYY-MM-DD"})}),Object(p["jsx"])(r["a"],{type:"primary",onClick:x,children:"\u67e5\u8be2"}),Object(p["jsx"])(r["a"],{onClick:g,children:"\u91cd\u7f6e"})]})})});return l?v:Object(p["jsx"])(a["a"],{bodyStyle:{paddingTop:"24px",paddingBottom:"0px",marginLeft:"16px"},bordered:!1,children:Object(p["jsxs"])("div",{style:{display:"flex"},children:[v,Object(p["jsx"])("span",{style:{flex:1}})]})})};t["a"]=m},YW4E:function(e,t,n){"use strict";n.d(t,"b",(function(){return L})),n.d(t,"c",(function(){return K})),n.d(t,"a",(function(){return X}));n("miYZ");var a=n("tsqr"),i=n("tJVT"),r=(n("iQDF"),n("+eQT")),c=(n("7Kak"),n("9yH6")),o=(n("/zsF"),n("PArb")),s=(n("Q9mQ"),n("diRs")),l=(n("OaEy"),n("2fM7")),d=(n("+L6B"),n("2/Rp")),u=(n("5NDa"),n("5rEg")),p=(n("5Dmo"),n("3S7+")),f=n("wd/R"),m=n.n(f),b=n("YO/a"),j=n("/Faj"),h=n("Ue1A"),_=n("l+S1"),O=n("+YFz"),x=n("79+z"),g=n("O7YW"),v=n("5Zmo"),y=n("ma4E"),E=n("79mi"),S=n("WTWM"),C=n("h7P/"),I=n("c6dC"),D=n("jE+T"),k=n("r5oo"),w=n("SdJU"),P=n("l5kO"),T=n("93hP"),M=n("we3Y"),A=n("NB5u"),R=n("nKUr"),N={},L=function(e){return N[e]},B=function e(t){var n=new RegExp("<[^>]*>","gm"),a=[];return t.forEach((function(t){var i=t.originText||t.menuText||t.text,r={text:i?i.replace(n,""):"",gridFieldId:t.gridFieldId};t.hidden&&(r.hidden=!0),!t.children||t.dataIndex&&t.isExport?(r.dataIndex=t.dataIndex,t.manytooneNameName&&(r.dataIndex=t.manytooneNameName),t.fieldDefine&&t.fieldDefine.fDictionaryid&&(r.dataIndex+="_dictname"),r.ismonetary=t.fieldDefine&&t.fieldDefine.ismonetary,r.unittext=t.fieldDefine&&t.fieldDefine.unittext,t.isOneToMany&&(r.unittext="\u6761")):(r.items=e(t.children),0===r.items.length&&delete r.items),!r.dataIndex&&!r.items||t.hidden||r.dataIndex===A["g"]||a.push(r)})),a},K=function(e,t){var n=[],a=function e(a){a.forEach((function(a){a.children?e(a.children):a.dataIndex&&a.fieldDefine&&!a.gridField.disableTotal&&(a.fieldDefine.allowsummary||a.isOneToMany)?n.push(a):a.dataIndex===t?n.push({namefield:!0}):n.push(null)}))};return a(e),n},F=function(e,t,n){var a,i=[];return e.moduleLimit.hasattachment&&null!==(a=e.userLimit.attachment)&&void 0!==a&&a.query&&i.push({title:Object(R["jsx"])(p["a"],{title:"\u9644\u4ef6",children:Object(R["jsx"])(b["a"],{})}),sortOrder:Object(g["b"])(t.sorts,"attachmentcount"),sorter:!0,width:66,dataIndex:"attachmentcount",menuText:"\u9644\u4ef6\u4e2a\u6570",key:"attachmentcount",align:"center",fixed:"left",render:function(t,a,i){return Object(C["b"])({record:a,_recno:i,moduleInfo:e,dispatch:n})}}),e.moduleLimit.hasapprove&&i.push({title:Object(R["jsx"])(p["a"],{title:"\u5ba1\u6279\u6d41\u7a0b",children:Object(R["jsx"])(j["a"],{})}),dataIndex:"actProcState",align:"center",key:"approvecolumn",menuText:"\u5ba1\u6279\u72b6\u6001",fixed:"left",render:function(e,a,i){return"VActRuTask"===t.moduleName?Object(k["b"])({value:e,record:a,_recno:i,moduleState:t,dispatch:n}):Object(k["a"])({value:e,record:a,_recno:i,moduleState:t,dispatch:n})}}),e.moduleLimit.hasaudit&&i.push({title:Object(R["jsx"])(p["a"],{title:"\u5ba1\u6838\u4fe1\u606f",children:Object(R["jsx"])(h["a"],{})}),dataIndex:"auditingName",key:"auditcolumn",menuText:"\u5ba1\u6838\u4fe1\u606f",fixed:"left",align:"center",render:function(e,a,i){return Object(T["b"])({value:e,record:a,_recno:i,moduleState:t,dispatch:n})}}),i},U=function(e){var t=e.additionObjectname,n=Object(S["x"])(t),a=Object(S["n"])(e.fieldid,n),i={fieldname:e.additionFieldname,fieldtitle:e.defaulttitle,fieldid:e.fieldid,aggregate:e.aggregate};return Object(x["f"])(i,a),"count"===i.aggregate&&(i.fieldtype="Integer",i.ismonetary=!1),i},W=function(e,t){var n=t.title||e.fieldtitle;return e.unittext&&(n+="(".concat(e.unittext,")")),n.replace(new RegExp("--","gm"),"")},V=null,q=function(e,t){return{filterDropdown:function(e){var n=e.setSelectedKeys,a=e.selectedKeys,i=e.confirm,r=e.clearFilters;return Object(R["jsxs"])("div",{style:{padding:8},children:[Object(R["jsx"])(u["a"],{ref:function(e){V=e},placeholder:"\u641c\u7d22 ".concat(t.fieldtitle),value:a[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return i()},style:{width:188,marginBottom:8,display:"block"}}),Object(R["jsxs"])("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(R["jsx"])(d["a"],{disabled:!a[0],type:"link",onClick:function(){return r()},size:"small",children:"\u91cd\u7f6e"}),Object(R["jsx"])(d["a"],{type:"primary",onClick:function(){return i()},size:"small",style:{marginLeft:8},children:"\u786e\u5b9a"})]})]})},filterIcon:function(e){return Object(R["jsx"])(_["a"],{style:{color:e?"#1890ff":void 0}})},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return V.select()}))}}},z=l["a"].Option,G=function(e,t,n,a){return{filterDropdown:function(e){var i=e.setSelectedKeys,r=e.selectedKeys,p=e.confirm,f=e.clearFilters;return Object(R["jsxs"])(R["Fragment"],{children:[Object(R["jsxs"])("div",{style:{padding:8},children:[Object(R["jsx"])("span",{children:Object(R["jsxs"])(u["a"].Group,{compact:!0,children:[Object(R["jsx"])(l["a"],{value:r[0]?r[0]:"=",onChange:function(e){return i([e,r[1]])},style:{width:90},children:y["a"].map((function(e){return Object(R["jsx"])(z,{value:e.value,children:e.text},e.value)}))}),Object(R["jsx"])(u["a"],{ref:function(e){V=e},placeholder:"\u641c\u7d22 ".concat(t.fieldtitle),value:r[1],onChange:function(e){return i(e.target.value?[r[0],e.target.value]:[r[0]])},onPressEnter:function(){return p()},style:{width:188,marginBottom:8,marginRight:6}}),Object(R["jsx"])(s["a"],{trigger:"click",title:"\u6570\u503c\u5b57\u6bb5\u7b5b\u9009\u8bf4\u660e",content:Object(R["jsxs"])("div",{children:[Object(R["jsx"])("b",{children:"\u5217\u8868"}),"\u53ef\u4ee5\u591a\u503c\uff0c\u4ee5\u9017\u53f7\u5206\u9694\uff1a",Object(R["jsx"])("br",{}),"\u4f8b\u5982\uff1a100,200,300 \u8868\u793a\u7b49\u4e8e\u4ee5\u4e0a\u4e09\u503c\u7684\u6570\u636e\uff1b",Object(R["jsx"])("br",{}),Object(R["jsx"])("b",{children:"\u5217\u8868\u5916"}),"\u53ef\u4ee5\u591a\u503c\uff0c\u4ee5\u9017\u53f7\u5206\u9694\uff1a",Object(R["jsx"])("br",{}),"\u4f8b\u5982\uff1a100,200,300 \u8868\u793a\u4e0d\u7b49\u4e8e\u4ee5\u4e0a\u4e09\u503c\u7684\u6570\u636e\uff1b",Object(R["jsx"])("br",{}),Object(R["jsx"])("b",{children:"\u533a\u95f4"}),"\u4ee5\u4e8c\u4e2a\u6570\u503c\u7528\u9017\u53f7\u5206\u9694\uff1a",Object(R["jsx"])("br",{}),"\u4f8b\u5982\uff1a100,1000 \u8868\u793a >=100 \u5e76\u4e14 <=1000\uff1b",Object(R["jsx"])("br",{}),Object(R["jsx"])("b",{children:"\u533a\u95f4\u5916"}),"\u4ee5\u4e8c\u4e2a\u6570\u503c\u7528\u9017\u53f7\u5206\u9694\uff1a",Object(R["jsx"])("br",{}),"\u4f8b\u5982\uff1a100,1000 \u8868\u793a>100 \u6216\u8005 <1000\uff1b"]}),children:Object(R["jsx"])("a",{children:Object(R["jsx"])(O["a"],{style:{margin:8}})})})]})}),Object(R["jsxs"])("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(R["jsx"])(d["a"],{disabled:!r[1],type:"link",onClick:function(){return f()},size:"small",children:"\u91cd\u7f6e"}),Object(R["jsx"])(d["a"],{type:"primary",onClick:function(){return p()},size:"small",style:{marginLeft:8},children:"\u786e\u5b9a"})]})]}),t.ismonetary?Object(R["jsxs"])("span",{children:[Object(R["jsx"])(o["a"],{style:{margin:"3px 0px"}}),Object(R["jsxs"])("div",{style:{padding:"10px"},children:["\u6570\u503c\u5355\u4f4d\uff1a",Object(R["jsx"])(c["a"].Group,{value:n.monetary.type,onChange:function(e){a({type:"modules/monetaryChanged",payload:{moduleName:n.moduleName,monetaryType:e.target.value}})},children:Object(I["c"])().map((function(e){return Object(R["jsx"])(c["a"].Button,{value:e.value,children:e.text},e.value)}))})]}),Object(R["jsxs"])("div",{style:{padding:"10px"},children:["\u663e\u793a\u4f4d\u7f6e\uff1a",Object(R["jsxs"])(c["a"].Group,{value:n.monetaryPosition,onChange:function(e){a({type:"modules/monetaryChanged",payload:{moduleName:n.moduleName,position:e.target.value}})},children:[Object(R["jsx"])(c["a"].Button,{value:"behindnumber",children:"\u663e\u793a\u5728\u6570\u503c\u540e"}),Object(R["jsx"])(c["a"].Button,{value:"columntitle",children:"\u663e\u793a\u5728\u5217\u5934\u4e0a"})]})]})]}):null]})},filterIcon:function(e){return Object(R["jsx"])(_["a"],{style:{color:e?"#1890ff":void 0}})},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return V.select()}))}}},J=r["a"].RangePicker,H=function(){return{filterDropdown:function(e){var t=e.setSelectedKeys,n=e.selectedKeys,a=e.confirm,i=e.clearFilters;return Object(R["jsxs"])("div",{style:{padding:8,width:"300px"},children:[Object(R["jsxs"])("div",{style:{marginBottom:8,display:"block"},children:[Object(R["jsx"])(w["a"],{callback:function(e){return t([e[0].format(D["a"]),e[1].format(D["a"])])}}),Object(R["jsx"])(J,{allowEmpty:[!0,!0],picker:"date",style:{flex:1},format:D["a"],value:[n[0]?m()(n[0],D["a"]):null,n[1]?m()(n[1],D["a"]):null],onChange:function(e,n){return t(n)}})]}),Object(R["jsxs"])("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(R["jsx"])(d["a"],{disabled:!n[0],type:"link",onClick:function(){return i()},size:"small",children:"\u91cd\u7f6e"}),Object(R["jsx"])(d["a"],{type:"primary",onClick:function(){return a()},size:"small",style:{marginLeft:8},children:"\u786e\u5b9a"})]})]})},filterIcon:function(e){return Object(R["jsx"])(_["a"],{style:{color:e?"#1890ff":void 0}})}}},Y=function(e,t,n,a,i){var r=a,c=e;if(!c.fieldDefine.aggregate)switch(t){case"image":Object(x["d"])(c,{render:function(e,t,n){return Object(v["g"])(e,t,n,c)},align:"center",width:100,sorter:!1});break;case"date":Object(x["d"])(c,{align:"center",render:function(e,t,n){return Object(v["b"])(e,t,n,c.isShortYear)}}),r.type="date",c.filteredValue=Object(y["j"])(n.filters.columnfilter,c.key),Object(x["d"])(c,H());break;case"datetime":case"timestamp":Object(x["d"])(c,{align:"center",render:function(e,t,n){return Object(v["c"])(e,t,n,c.fieldDefine.disableSecond,c.isShortYear)}}),r.type="date",c.filteredValue=Object(y["j"])(n.filters.columnfilter,c.key),Object(x["d"])(c,H());break;case"boolean":c.align="center",c.render=v["a"],c.filters=Object(y["e"])(c.fieldDefine.isrequired),c.filteredValue=Object(y["h"])(n.filters.columnfilter,c.key),r.type="combobox",r.comboValue=c.filters;break;case"integer":c.fieldDefine.isRate?Object(x["d"])(c,{render:v["p"]}):Object(x["d"])(c,{align:"right",render:v["h"]});break;case"money":case"double":case"float":c.fieldDefine.isRate?Object(x["d"])(c,{render:v["p"]}):(Object(x["d"])(c,{align:"right",render:function(e){return Object(v["e"])(e,c.fieldDefine.digitslen)}}),c.fieldDefine.ismonetary&&(c.render=function(e,t,a){return Object(v["k"])(e,t,a,n,c.fieldDefine.digitslen)}));break;case"percent":Object(x["d"])(c,{render:v["n"],align:"center"}),c.fieldDefine.divisor&&(c.render=function(e,t){return Object(v["o"])(e,t&&t[c.fieldDefine.divisor],t&&t[c.fieldDefine.denominator])});break;case"blob":c.sorter=!1;break;case"string":c.render=function(e){return Object(v["q"])(e,c)};break;default:}switch(t){case"percent":case"money":case"double":case"float":case"integer":r.type="number",c.filteredValue=Object(y["m"])(n.filters.columnfilter,c.key),Object(x["d"])(c,G(c.dataIndex,c.fieldDefine,n,i));break;default:}},Z=function(e,t){var n=e,a=n.fieldDefine.unittext,i=n.gridField.title||n.fieldDefine.fieldtitle;if(i=i.replace(new RegExp("--","gm"),"<br/>"),n.originText=i,i=i.replace("\u5c0f\u8ba1",'<span style="color : green;">\u5c0f\u8ba1</span>'),n.fieldDefine.ismonetary&&"columntitle"===t.monetaryPosition){var r=t.monetary,c="\u4e2a"===r.unittext?"":r.unittext;(a||c)&&(i+='<br/><span style="color:green;">('.concat(c).concat(a||"",")</span>"))}else a&&(i+='<br/><span style="color:green;">('.concat(a,")</span>"));n.title='<div style="text-align:center;">'.concat(i,"</div>")},Q=function(e){var t,n=e.gridField,a=e.fieldDefine,r=e.moduleInfo,c=e.moduleState,o=e.dispatch,s=e.gridType;if(n.disableGridType){var l=n.disableGridType;if("string"===typeof l&&l===s)return null;if(Array.isArray(l))for(var d=0;d<l.length;d+=1)if(l[d]===s)return null}if("onetomanygrid"===s&&a.fieldname===(null===(t=c.filters.parentfilter)||void 0===t?void 0:t.fieldahead))return null;var u={maxWidth:n.maxwidth||600,fieldDefine:a,gridField:n,gridFieldId:n.columnid,sorter:c.sortMultiple,menuText:W(a,n),dataIndex:a.fieldname,key:a.fieldname,hidden:n.hidden,groupable:!!a.allowgroup,showDetailTip:n.showdetailtip};n.columnwidth&&(u.width="".concat(n.columnwidth,"px")),n.locked&&(u.fixed="left");var f=Object(y["g"])(r.modulename,u.dataIndex);if(Object(x["d"])(f,{title:u.menuText,type:"string"}),Y(u,a.fieldtype.toLowerCase(),c,f,o),a.fDictionaryid&&(u.groupable=!0,u.render=function(e,t,n){return Object(v["d"])(e,t,n,{fieldname:a.fieldname})},u.filters=Object(E["c"])(a.fDictionaryid),u.filteredValue=Object(y["h"])(c.filters.columnfilter,a.fieldname),f.comboValue=u.filters,f.type="dictionary"),a.tooltiptpl&&(u.tooltiptpl=a.tooltiptpl),r.namefield===a.fieldname&&(u.render=function(e,t,n){return Object(v["l"])(e,t,n,{moduleInfo:r,dispatch:o,field:u})}),"iconcls"===u.dataIndex&&(u.render=function(e){return Object(v["f"])(e)}),n.flex&&(u.flex=n.flex,delete u.maxWidth),a.isManyToOne||a.isOneToOne){var m=a.manyToOneInfo.nameField;u.dataIndex=m,u.manytooneIdName=a.manyToOneInfo.keyField,u.manytooneNameName=a.manyToOneInfo.nameField,u.sorter=c.sortMultiple,u.sortOrder=Object(g["b"])(c.sorts,m);var b=Object(S["x"])(a.fieldtype);u.render=function(e,t,n){return Object(v["j"])(e,t,n,{moduleInfo:b,keyField:a.manyToOneInfo.keyField,field:u,dispatch:o})},"10"===b.selectedmode||"95"===b.selectedmode?(u.key=a.manyToOneInfo.keyField,u.filters=Object(S["w"])(a.fieldtype),u.filteredValue=Object(y["h"])(c.filters.columnfilter,u.key),f=Object(y["g"])(r.modulename,u.key),f.title=u.menuText,f.type="combobox",f.comboValue=u.filters):(u.key=u.dataIndex,Object(x["d"])(u,q(u.dataIndex,a)),u.filteredValue=Object(y["h"])(c.filters.columnfilter,u.dataIndex),f=Object(y["g"])(r.modulename,u.dataIndex),f.title=u.menuText)}if(a.isOneToMany){u.isOneToMany=!0;var j=a.fieldtype;j=j.substring(j.indexOf("<")+1,j.indexOf(">")),u.childModuleName=j,u.fieldahead=a.fieldahead,u.align="right",f.type="number",u.filteredValue=Object(y["m"])(c.filters.columnfilter,u.key),Object(x["d"])(u,G(u.dataIndex,u.fieldDefine,c,o)),u.render=function(e,t,n){return Object(v["m"])(e,t,n,{fieldtitle:u.menuText,childModuleName:u.childModuleName,fieldahead:u.fieldahead,moduleInfo:r,dispatch:o,field:u,moduleState:c})}}if(a.aggregate){var h=a.fieldname,_=h.split(".with."),O=_[0].split(".");u.isOneToMany=!0;var C=Object(i["a"])(O,2);u.childModuleName=C[1],u.fieldahead="".concat(O[1],".with.").concat(_[1]),u.align="right",f.type="number",u.filteredValue=Object(y["m"])(c.filters.columnfilter,u.key),Object(x["d"])(u,G(u.dataIndex,u.fieldDefine,c,o)),u.render=function(e,t,n){return Object(v["m"])(e,t,n,{fieldtitle:u.menuText,childModuleName:u.childModuleName,dispatch:o,fieldahead:u.fieldahead,moduleInfo:r,field:u,moduleState:c})}}if(a.isManyToMany){u.sorter=!1,u.dataIndex+="_detail";var I=a.jointable;u.joinModule=Object(S["x"])(I||""),u.manyToManyModuleName=Object(D["k"])(a.fieldtype),u.manyToManyModuleInfo=Object(S["x"])(u.manyToManyModuleName),u.manyToManyModuleTitle=Object(S["x"])(u.manyToManyModuleName).title,u.render=function(e,t,n){return Object(v["i"])(e,t,n,{moduleName:u.manyToManyModuleName,dispatch:o})},delete u.filter}Object(x["g"])(u,a.gridcolumnset),Object(x["g"])(u,n.othersetting),Z(u,c),null===u.render&&delete u.render,u.sorter&&(u.sortOrder=Object(g["b"])(c.sorts,u.key)),u.text=u.title,u.title=Object(R["jsx"])("span",{style:{whiteSpace:"nowrap"},dangerouslySetInnerHTML:{__html:u.title}}),n.titleIconCls&&(u.title=Object(R["jsx"])(p["a"],{title:u.menuText,children:Object(R["jsx"])("span",{className:n.titleIconCls})}),u.align="center"),u.filters||"string"!==a.fieldtype.toLowerCase()||(Object(x["d"])(u,q(u.dataIndex,a)),u.filteredValue=Object(y["r"])(c.filters.columnfilter,u.key),f.type="string"),n.columnRender&&(u.columnRender=n.columnRender,u.render=function(e,t,n){return Object(R["jsx"])("span",{dangerouslySetInnerHTML:{__html:u.columnRender(e,t,n)}})}),u.allowPin&&(u.render=function(e,t,n){return Object(v["r"])(e,t,n,{moduleState:c,dispatch:o})}),u.disableSorter&&(u.sorter=!1),(u.disableSearch||"onetomanygrid"===s)&&(delete u.filterDropdown,delete u.filters);var k=Object(P["b"])(c.moduleName,u.dataIndex);return k&&(u.render=function(e,t,n){return Object(R["jsx"])(k,{value:e,record:t,recno:n,dataIndex:u.dataIndex,fieldDefine:a,dispatch:o,moduleState:c})}),u},$=function e(t){for(var n=t.moduleInfo,i=t.moduleState,r=t.columns,c=t.dispatch,o=t.gridType,s=[],l=0;l<r.length;l+=1){var d=r[l];if(d.columns&&d.columns.length||!d.fieldid){d.title||(d.title="");var u={gridFieldId:d.columnid,title:Object(R["jsx"])("span",{dangerouslySetInnerHTML:{__html:d.title.replace(new RegExp("--","gm"),"<br/>")}}),hidden:d.hidden,menuText:d.title.replace(new RegExp("--","gm"),""),children:e({moduleState:i,moduleInfo:n,columns:d.columns,dispatch:c,gridType:o})};d.locked&&(u.fixed="left"),Object(x["g"])(u,d.othersetting),s.push(u)}else if(d.fieldahead)if(d.aggregate){var p=U(d);if(p){var f=Q({moduleState:i,gridField:d,fieldDefine:p,moduleInfo:n,dispatch:c,gridType:o});f&&s.push(f)}}else{var m=Object(S["b"])(n,d);if(m){var b=Q({gridField:d,fieldDefine:m,moduleInfo:n,moduleState:i,dispatch:c,gridType:o});b&&s.push(b)}}else{var j=Object(S["n"])(d.fieldid,n);if(!j){a["default"].warn("".concat(JSON.stringify(d),"\u672a\u627e\u5230\u5b57\u6bb5\u7684\u5b9a\u4e49\uff0c\u53ef\u80fd\u662f\u5206\u7ec4\u4e0b\u7684\u5b57\u6bb5\u5168\u88ab\u5220\u5149\u4e86"));continue}if(j.ishidden||j.isdisable||j.userdisable)continue;var h=Q({gridField:d,fieldDefine:j,moduleInfo:n,moduleState:i,dispatch:c,gridType:o});h&&s.push(h)}}return s},X=function(e){var t=e.moduleInfo,n=e.moduleState,a=e.gridScheme,i=e.dispatch,r=e.gridType,c=e.readOnly,o=F(t,n,i),s=o.concat($({moduleState:n,moduleInfo:t,columns:a.columns,dispatch:i,gridType:r}));return N[t.modulename]=B(s),c||s.push(Object(M["d"])({moduleInfo:t,moduleState:n,dispatch:i})),s}},Z97y:function(e,t,n){"use strict";var a=n("hfUJ"),i=n("6BL2"),r=n("EWYV"),c=n("Nw6e"),o=n("WP2f"),s=n("emvA").getBusinessObject,l=n("emvA").is,d=n("bNQv"),u={bpmn:{element:"calledElement",binding:"activiti:calledElementBinding",version:"activiti:calledElementVersion",versionTag:"activiti:calledElementVersionTag",tenantId:"activiti:calledElementTenantId"},cmmn:{element:"activiti:caseRef",binding:"activiti:caseBinding",version:"activiti:caseVersion",tenantId:"activiti:caseTenantId"},dmn:{element:"activiti:decisionRef",binding:"activiti:decisionRefBinding",version:"activiti:decisionRefVersion",versionTag:"activiti:decisionRefVersionTag",tenantId:"activiti:decisionRefTenantId"}},p=[{name:"singleEntry (TypedValue)",value:"singleEntry"},{name:"singleResult (Map<String, Object>)",value:"singleResult"},{name:"collectEntries (List<Object>)",value:"collectEntries"},{name:"resultList (List<Map<String, Object>>)",value:"resultList"}],f=[{name:"variableMappingClass",value:"variableMappingClass"},{name:"variableMappingDelegateExpression",value:"variableMappingDelegateExpression"}];function m(e){var t=[],n=s(e),a=c.getExtensionElements(n,"activiti:In");return a&&d(a,(function(e){void 0!==e.businessKey&&t.push(e)})),t}function b(e,t,n){var i=[],c=m(e);if(c.length)i.push(a.updateBusinessObject(e,c[0],{businessKey:t}));else{var o=s(e),l=o.extensionElements;l||(l=r.createElement("bpmn:ExtensionElements",{values:[]},o,n),i.push(a.updateProperties(e,{extensionElements:l})));var d=r.createElement("activiti:In",{businessKey:t},l,n);i.push(a.addAndRemoveElementsFromList(e,l,"values","extensionElements",[d],[]))}return i}function j(e){var t=m(e),n=[];return d(t,(function(t){n.push(c.removeEntry(s(e),e,t))})),n}function h(e){return-1!==["bpmn","cmmn","dmn"].indexOf(e)}e.exports=function(e,t,n,r){var c=[{name:r("latest"),value:"latest"},{name:r("deployment"),value:"deployment"},{name:r("version"),value:"version"},{name:r("versionTag"),value:"versionTag"}],d=n.getCallableType,_=[];function O(e,t){var n=d(e);return(u[n]||{})[t]}function x(e){var t=d(e),n=s(e),a=(u[t]||{}).binding;return n.get(a)}function g(e){var t=s(e),n=t.get("activiti:variableMappingClass"),a=t.get("activiti:variableMappingDelegateExpression"),i="";return"undefined"!==typeof n?i="variableMappingClass":"undefined"!==typeof a&&(i="variableMappingDelegateExpression"),i}return _.push(i.textField({id:"callable-element-ref",dataValueLabel:"callableElementLabel",modelProperty:"callableElementRef",get:function(e,t){var n,a=O(e,"element");if(a){var i=s(e);n=i.get(a)}var c="",o=d(e);return"bpmn"===o?c=r("Called Element"):"cmmn"===o?c=r("Case Ref"):"dmn"===o&&(c=r("Decision Ref")),{callableElementRef:n,callableElementLabel:c}},set:function(e,t,n){var i=t.callableElementRef,r=O(e,"element"),c={};return c[r]=i||"",a.updateProperties(e,c)},validate:function(e,t,n){var a=t.callableElementRef,i=d(e);return h(i)&&!a?{callableElementRef:r("Must provide a value")}:{}},hidden:function(e,t){return!h(d(e))}})),_.push(i.selectBox({id:"callable-binding",label:r("Binding"),selectOptions:function(e){var t,n=d(e);return t="cmmn"===n?c.filter((function(e){return"versionTag"!==e.value})):c,t},modelProperty:"callableBinding",get:function(e,t){var n,a=O(e,"binding");if(a){var i=s(e);n=i.get(a)||"latest"}return{callableBinding:n}},set:function(e,t,n){var i=t.callableBinding,r=O(e,"binding"),c=O(e,"version"),o=O(e,"versionTag"),s={};return s[r]=i,s[c]=void 0,s[o]=void 0,a.updateProperties(e,s)},hidden:function(e,t){return!h(d(e))}})),_.push(i.textField({id:"callable-version",label:r("Version"),modelProperty:"callableVersion",get:function(e,t){var n,a=O(e,"version");if(a){var i=s(e);n=i.get(a)}return{callableVersion:n}},set:function(e,t,n){var i=t.callableVersion,r=O(e,"version"),c={};return c[r]=i||void 0,a.updateProperties(e,c)},validate:function(e,t,n){var a=t.callableVersion,i=d(e);return h(i)&&"version"===x(e)&&(a?{}:{callableVersion:r("Must provide a value")})},hidden:function(e,t){var n=d(e);return!h(n)||"version"!==x(e)}})),_.push(i.textField({id:"callable-version-tag",label:r("Version Tag"),modelProperty:"versionTag",get:function(e,t){var n,a=O(e,"versionTag");if(a){var i=s(e);n=i.get(a)}return{versionTag:n}},set:function(e,t,n){var i=t.versionTag,r=O(e,"versionTag"),c={};return c[r]=i||void 0,a.updateProperties(e,c)},validate:function(e,t,n){var a=t.versionTag,i=d(e);return h(i)&&"versionTag"===x(e)&&(a?{}:{versionTag:r("Must provide a value")})},hidden:function(e,t){var n=d(e);return!h(n)||"versionTag"!==x(e)}})),_.push(i.textField({id:"tenant-id",label:r("Tenant Id"),modelProperty:"tenantId",get:function(e,t){var n,a=O(e,"tenantId");if(a){var i=s(e);n=i.get(a)}return{tenantId:n}},set:function(e,t,n){var i=t.tenantId,r=O(e,"tenantId"),c={};return c[r]=i||void 0,a.updateProperties(e,c)},hidden:function(e,t){var n=d(e);return!h(n)}})),l(s(e),"bpmn:CallActivity")&&_.push(i.checkbox({id:"callable-business-key",label:r("Business Key"),modelProperty:"callableBusinessKey",get:function(e,t){var n=m(e);return{callableBusinessKey:!!(n&&n.length>0)}},set:function(e,n,a){return n.callableBusinessKey?b(e,"#{execution.processBusinessKey}",t):j(e)}})),_.push(i.textField({id:"business-key-expression",label:r("Business Key Expression"),modelProperty:"businessKey",get:function(e,t){var n=m(e);return{businessKey:n.length?n[0].get("activiti:businessKey"):void 0}},set:function(e,n,a){var i=n.businessKey;return b(e,i,t)},validate:function(e,t,n){var a=t.businessKey;return""===a?{businessKey:r("Must provide a value")}:{}},hidden:function(e,t){return!m(e).length}})),_=_.concat(o(e,t,{id:"dmn-resultVariable",getBusinessObject:s,getImplementationType:d,hideResultVariable:function(e,t){return"dmn"!==d(e)}},r)),_.push(i.selectBox({id:"dmn-map-decision-result",label:r("Map Decision Result"),selectOptions:p,modelProperty:"mapDecisionResult",get:function(e,t){var n=s(e);return{mapDecisionResult:n.get("activiti:mapDecisionResult")||"resultList"}},set:function(e,t,n){return a.updateProperties(e,{"activiti:mapDecisionResult":t.mapDecisionResult||"resultList"})},hidden:function(e,t){var n=s(e),a=n.get("activiti:resultVariable");return!("dmn"===d(e)&&"undefined"!==typeof a)}})),_.push(i.selectBox({id:"delegateVariableMappingType",label:r("Delegate Variable Mapping"),selectOptions:f,emptyParameter:!0,modelProperty:"delegateVariableMappingType",get:function(e,t){return{delegateVariableMappingType:g(e)}},set:function(e,t,n){var i=t.delegateVariableMappingType,r={"activiti:variableMappingClass":void 0,"activiti:variableMappingDelegateExpression":void 0};return"variableMappingClass"===i?r["activiti:variableMappingClass"]="":"variableMappingDelegateExpression"===i&&(r["activiti:variableMappingDelegateExpression"]=""),a.updateProperties(e,r)},hidden:function(e,t){return"bpmn"!==d(e)}})),_.push(i.textField({id:"delegateVariableMapping",dataValueLabel:"delegateVariableMappingLabel",modelProperty:"delegateVariableMapping",get:function(e,t){var n=s(e),a="",i=void 0,c=g(e);return"variableMappingClass"===c?(a=r("Class"),i=n.get("activiti:variableMappingClass")):"variableMappingDelegateExpression"===c&&(a=r("Delegate Expression"),i=n.get("activiti:variableMappingDelegateExpression")),{delegateVariableMapping:i,delegateVariableMappingLabel:a}},set:function(e,t,n){var i=t.delegateVariableMapping,r="activiti:"+g(e),c={};return c[r]=i||void 0,a.updateProperties(e,c)},validate:function(e,t,n){var a=t.delegateVariableMapping;return"bpmn"===d(e)&&(a?{}:{delegateVariableMapping:r("Must provide a value")})},hidden:function(e,t){return!("bpmn"===d(e)&&""!==g(e))}})),_}},ZM8D:function(e,t,n){"use strict";n("DYRE");var a=n("zeV3"),i=n("q1tI"),r=n("1qKY"),c=n("qPJW"),o=n("WTWM"),s=n("mDHv"),l=n("MzlM"),d=n("aoqV"),u=n("ASZ0"),p=n("CYVn"),f=n("jE+T"),m=n("Uw7j"),b=n("nKUr"),j=function(e){var t=e.pFilter,n=e.dataminingFilter,s=e.readOnly,j=e.enableUserFilter,h=e.displayTitle,_=e.displayParentTitle,O=Object(i["useContext"])(r["a"]),x=O.dispatch,g=O.moduleState,v=g.moduleName,y=g.filters,E=y.parentfilter,S=y.dataminingFilter,C=Object(o["x"])(g.moduleName);return Object(i["useEffect"])((function(){(E&&t&&t.fieldvalue!==E.fieldvalue||JSON.stringify(n)!==JSON.stringify(S))&&x({type:"modules/init",payload:{initState:Object(o["m"])({moduleName:v,parentFilter:t,dataminingFilter:n})}})}),[t,n]),Object(b["jsxs"])(b["Fragment"],{children:[Object(b["jsxs"])("div",{style:{marginBottom:"16px",display:null!==E&&void 0!==E&&E.fieldvalue||n?"flex":"none"},children:[h?Object(b["jsxs"])("span",{style:{fontSize:"18px",padding:"8px 12px 0"},children:[Object(f["j"])(C)," ",C.title,_&&E?Object(b["jsxs"])("span",{style:{fontSize:"14px",paddingLeft:"24px"},children:[Object(b["jsx"])(m["a"],{style:{paddingRight:"2px"}}),E.fieldtitle]}):null]}):null,Object(b["jsx"])("span",{style:{flex:1}}),Object(b["jsxs"])(a["b"],{children:[Object(b["jsx"])(d["a"],{moduleInfo:C,moduleState:g,manyToOneInfo:null,dispatch:x,readOnly:s}),Object(b["jsx"])(p["a"],{enableUserFilter:j,moduleState:g,moduleInfo:C,dispatch:x})]})]}),j&&Object(o["q"])(C)?Object(b["jsx"])(u["c"],{visible:g.currSetting.userFilterRegionVisible,moduleState:g,dispatch:x}):null,Object(b["jsx"])(c["a"],{moduleState:g,moduleInfo:C,dispatch:x,fetchLoading:g.fetchLoading,gridType:"onetomanygrid",readOnly:s}),Object(b["jsx"])(l["a"],{moduleInfo:C,moduleState:g,dispatch:x})]})},h=function(e){var t=e.moduleName,n=e.parentFilter,a=e.dataminingFilter,i=e.readOnly,r=e.enableUserFilter,c=void 0!==r&&r,o=e.parentForm,l=e.displayTitle,d=e.displayParentTitle;return Object(b["jsx"])(s["a"],{moduleName:t,parentFilter:n,dataminingFilter:a,parentForm:o,children:Object(b["jsx"])(j,{pFilter:n,dataminingFilter:a,readOnly:i||!1,enableUserFilter:c,displayTitle:l,displayParentTitle:d})})};t["a"]=h},aUXt:function(e,t,n){"use strict";var a=n("3OWR");function i(e,t,n){var a,i,r=e.scriptFormat;return r?i=n.create("activiti:Script",{scriptFormat:r,value:t}):a=t,n.create("activiti:InputParameter",{name:e.name,value:a,definition:i})}function r(e,t,n){var a,i,r=e.scriptFormat;return r?i=n.create("activiti:Script",{scriptFormat:r,value:e.source}):a=e.source,n.create("activiti:OutputParameter",{name:t,value:a,definition:i})}function c(e,t,n){return n.create("activiti:Property",{name:e.name,value:t||""})}function o(e,t,n){var a=p(e,t);return n.create("activiti:In",a)}function s(e,t,n){return n.create("activiti:In",{businessKey:t})}function l(e,t,n){var a=p(e,t);return n.create("activiti:Out",a)}function d(e,t,n){var a,i,r=e.scriptFormat;return r?i=n.create("activiti:Script",{scriptFormat:r,value:t}):a=t,n.create("activiti:ExecutionListener",{event:e.event,value:a,script:i})}function u(e,t,n){var i={string:void 0,expression:void 0,name:void 0},r=a({},i);return e.expression?r.expression=t:r.string=t,r.name=e.name,n.create("activiti:Field",r)}function p(e,t){var n={};return e.target?(n.target=e.target,e.expression?n.sourceExpression=t:n.source=t):e.variables?(n.variables="all","local"===e.variables&&(n.local=!0)):(n.target=t,["source","sourceExpression"].forEach((function(t){e[t]&&(n[t]=e[t])}))),n}e.exports.createInputParameter=i,e.exports.createOutputParameter=r,e.exports.createFlowableProperty=c,e.exports.createFlowableIn=o,e.exports.createFlowableInWithBusinessKey=s,e.exports.createFlowableOut=l,e.exports.createFlowableExecutionListenerScript=d,e.exports.createFlowableFieldInjection=u},aYag:function(e,t,n){"use strict";n.d(t,"b",(function(){return me})),n.d(t,"d",(function(){return _e})),n.d(t,"a",(function(){return ve})),n.d(t,"c",(function(){return ye}));n("bP8k");var a=n("gFTJ"),i=(n("+BJd"),n("mr32")),r=(n("Q9mQ"),n("diRs")),c=n("oBTY"),o=(n("5Dmo"),n("3S7+")),s=(n("IzEo"),n("bx4M")),l=(n("DYRE"),n("zeV3")),d=n("jrin"),u=n("k1fw"),p=n("tJVT"),f=(n("pC0b"),n("GzdX")),m=(n("tU7J"),n("wFql")),b=(n("Znn+"),n("ZTPi")),j=n("q1tI"),h=n("bRQS"),_=n("4i/N"),O=n("8Skl"),x=n("UESt"),g=n("yU8i"),v=n("dF/Y"),y=n("FKDb"),E=n("+YFz"),S=(n("ye1Q"),n("Py4S")),C=n.n(S),I=n("79+z"),D=n("RfA7"),k=n("WTWM"),w=n("h7P/"),P=n("BEnz"),T=n.n(P),M=n("3Mvv"),A=n.n(M),R=n("jE+T"),N=n("r5oo"),L=n("ZM8D"),B=n("MR8f"),K=(n("MXD1"),n("CFYs")),F=n("nKUr"),U=function(e){var t=e.value,n=e.style,a=e.digitslen,i=e.symbol,r=t||0;return r<=1?Object(F["jsx"])(K["a"],{style:n,percent:Math.round(100*r),size:"default"}):Object(F["jsx"])("span",{children:"".concat(parseFloat((100*r).toFixed(a-2))).concat(i?"%":"")})},W=U,V=n("93hP"),q=n("TtZX"),z=n("NB5u"),G=n("l5kO"),J={"AbcEmployee--todayState":G["a"],"AbcInoutEmployeeRecord--state":G["a"]},H=function(e,t){return J["".concat(e,"--").concat(t)]},Y=n("kDbe"),Z=b["a"].TabPane,Q=m["a"].Text,$=n("ZhIB"),X=Object(F["jsx"])(Q,{type:"success",children:Object(F["jsx"])(h["a"],{})}),ee=Object(F["jsx"])(Q,{type:"danger",children:Object(F["jsx"])(_["a"],{})}),te=Object(F["jsx"])(Q,{type:"warning",children:"\u3007"}),ne={color:"blue",textAlign:"right",display:"block",minWidth:"80px",whiteSpace:"nowrap"},ae=function(e){return Object(F["jsx"])("span",{style:{color:"#a40",whiteSpace:"nowrap"},children:e?e.substr(0,10):null})},ie=function(e,t){return Object(F["jsx"])("span",{style:{color:"#a40",whiteSpace:"nowrap"},children:e?e.substr(0,!1===t.disableSecond?19:16):null})},re=function(e){return Object(F["jsx"])(f["a"],{disabled:!0,value:e})},ce=function(e,t,n){var a=n.moduleInfo,i=n.dispatch,r=n.record,c=n.formFieldDefine;return Object(F["jsxs"])("span",{style:ne,children:[e||""," ",t.unittext?Object(F["jsxs"])("span",{style:{color:"green"},children:[t.unittext,t.aggregate?Object(Y["b"])(r,{fieldtitle:t.fieldtitle,childModuleName:c.additionObjectname,fieldahead:c.fieldahead,moduleInfo:a,dispatch:i}):null]}):""]})},oe=function(e,t,n){var a=n.moduleInfo,i=n.dispatch,r=n.record,c=n.formFieldDefine,o=Object(I["u"])(t.digitslen);return Object(F["jsxs"])("span",{style:ne,children:[e?$(e).format(o):""," ",t.unittext?Object(F["jsxs"])("span",{style:{color:"green"},children:[t.unittext,t.aggregate?Object(Y["b"])(r,{fieldtitle:t.fieldtitle,childModuleName:c.additionObjectname,fieldahead:c.fieldahead,moduleInfo:a,dispatch:i}):null]}):""]})},se=function(e,t){return Object(F["jsx"])(W,{style:{minWidth:"80px"},value:e,symbol:!0,digitslen:t.digitslen})},le=function(e,t,n){var a=n.moduleInfo,i=n.dispatch,r=n.record;return Object(F["jsxs"])("span",{style:ne,children:[e,Object(F["jsxs"])("span",{style:{color:"green"},children:[" ".concat(t.unittext||"\u6761"),Object(Y["b"])(r,{fieldtitle:t.fieldtitle,childModuleName:t.fieldtype.substring(t.fieldtype.indexOf("<")+1,t.fieldtype.indexOf(">")),fieldahead:t.fieldahead,moduleInfo:a,dispatch:i})]})]})},de=function(e){var t,n=e.moduleInfo,a=e.record,i=e.dispatch;return n.moduleLimit.hasattachment&&null!==(t=n.userLimit.attachment)&&void 0!==t&&t.query?Object(F["jsx"])(w["a"],{value:null===a||void 0===a?void 0:a.attachmentdata,record:a,_recno:0,moduleInfo:n,dispatch:i,isLink:!1,readonly:!0},"_attachment_button_"):null},ue={},pe=function(e){var t=e.moduleInfo,n=e.record,a=e.dispatch,i=t.formschemes[0],r=Object(j["useState"])({}),c=Object(p["a"])(r,2),o=c[1],f=function e(i){return i.forEach((function(e){void 0===ue[e.detailid]&&e.collapsible&&(ue[e.detailid]=!e.collapsed)})),i.map((function(i){var r,c=function(){ue=Object(u["a"])(Object(u["a"])({},ue),{},Object(d["a"])({},i.detailid,!ue[i.detailid])),o({})},p=i.collapsible&&!ue[i.detailid],f=i.title;if("approvepanel"===i.xtype)return null;if("tabpanel"===i.xtype){i.details.forEach((function(e){Object(I["d"])(e,{tabTitle:e.title})}));for(var m=e(i.details),j=[],h=0;h<i.details.length;h+=1){var _=i.details[h];j.push(Object(F["jsx"])(Z,{tab:_.iconCls?Object(F["jsxs"])("span",{className:_.iconCls,children:[" ",_.tabTitle," "]}):_.tabTitle,children:m[h]},_.detailid))}return Object(F["jsx"])(b["a"],{tabPosition:i.tabPosition||"top",centered:!1,children:j},i.detailid)}if("approvehistory"===i.xtype){if(f||(f="\u6d41\u7a0b\u5ba1\u6279\u8bb0\u5f55"),!t.moduleLimit.hasapprove||!Object(N["g"])(n))return null;r=Object(F["jsx"])("div",{style:{padding:"12px"},children:Object(N["f"])({record:n,dispatch:a,direction:"horizontal",breakNumber:i.breakNumber})})}else if(i.subobjectid){var v=i.subobjectid,y=i.fieldahead,E={moduleName:v,parentOperateType:"display",readOnly:!0,parentFilter:{moduleName:t.objectname,fieldahead:y.split(".with.")[1],fieldName:t.primarykey,fieldtitle:t.title,operator:"=",text:n[t.namefield],fieldvalue:n[t.primarykey]}},S=Object(k["x"])(E.moduleName);f=S.title,r=Object(F["jsx"])("div",{style:{paddingTop:"12px"},children:Object(F["jsx"])(L["a"],Object(u["a"])({},E))})}else{if("panel"===i.xtype)return e(i.details);"fieldset"===i.xtype&&(r=ge({panel:i,moduleInfo:t,record:n,dispatch:a}))}var C=i.collapsible?ue[i.detailid]?Object(F["jsx"])(O["a"],{onClick:c}):Object(F["jsx"])(x["a"],{onClick:c}):Object(F["jsx"])(g["a"],{});return Object(F["jsx"])(s["a"],{size:"small",bordered:!0,bodyStyle:p?{padding:0}:{margin:"-1px -1px -1px -1px",padding:0},className:"desc_card_border_top",title:i.tabTitle||!f||i.hiddenTitle?null:Object(F["jsxs"])(l["b"],{children:[C,Object(F["jsx"])("span",{children:"".concat(f)})]}),children:Object(F["jsx"])("div",{style:p?{display:"none"}:{},children:r})},i.detailid)}))};return Object(F["jsx"])(F["Fragment"],{children:f(i.details)})},fe=function(e){var t=e.moduleInfo,n=e.record,a=e.dispatch,i=e.disableTitle,r=e.setVisible,d=e.isRecordExpand;if(null===n)return null;var u=t.modulename,p=t.primarykey,f=t.excelSchemes,b=[];if(f&&f.length>0){var j=f[0],h=function(e){Object(D["e"])({recordids:n[p],moduleName:t.modulename,schemeid:j.schemeid,filetype:e})};b=[j.onlypdf?null:Object(F["jsx"])(o["a"],{title:"\u5bfc\u51fa".concat(j.title),children:Object(F["jsx"])(v["a"],{onClick:function(){h(null)}})},"_download_"),Object(F["jsx"])(B["a"],{moduleInfo:t,record:n,scheme:j},"_recordpdf_")]}var O=function(){var e=t.recordPrintSchemes;return e&&e.length>0?e.map((function(e){return Object(F["jsx"])(o["a"],{title:"\u6253\u5370".concat(e.title),children:Object(F["jsx"])(y["a"],{onClick:function(){Object(q["b"])({moduleName:u,scheme:e,record:n})}})},"_printrecord_")})):null},x=function(){var e=[de({moduleInfo:t,record:n,dispatch:a})].concat(Object(c["a"])(b),[O(),r?Object(F["jsx"])(o["a"],{title:"\u5173\u95ed",children:Object(F["jsx"])(_["a"],{onClick:function(){return r(!1)}})},"_close_"):null]);return e.filter((function(e){return e}))},g=t.formschemes[0],E=g.popoverWidth||"auto";return Object(F["jsx"])(s["a"],{size:"default",title:i?null:Object(F["jsxs"])(l["b"],{children:[" ","".concat(t.title,"\uff1a").concat(n[t.namefield]),t.moduleLimit.hasapprove&&n[p]?Object(F["jsxs"])(m["a"].Text,{type:"secondary",code:!0,children:[Object(F["jsx"])("span",{className:Object(N["e"])(t,n),style:{marginRight:"4px"}}),n.actProcState]}):null,t.moduleLimit.hasaudit&&n[p]?Object(V["f"])(n)?z["a"]:z["b"]:null]}),className:"descriptionform",style:d?{}:{maxWidth:"".concat(document.body.clientWidth-32,"px"),width:E},bodyStyle:{padding:0,margin:-1},extra:i?null:Object(F["jsx"])(l["b"],{style:{marginLeft:"24px",verticalAlign:"middle"},children:x()}),children:Object(F["jsx"])(pe,{moduleInfo:t,record:n,dispatch:a})},"key_".concat(n[t.primarykey]))},me=function(e){var t=e.moduleInfo,n=e.id,a=e.dispatch,i=e.children,c=Object(j["useState"])(!1),o=Object(p["a"])(c,2),s=o[0],l=o[1],d=Object(j["useState"])(null),u=Object(p["a"])(d,2),f=u[0],m=u[1];return n?Object(F["jsx"])(r["a"],{trigger:"click",destroyTooltipOnHide:!0,visible:s,onVisibleChange:function(e){if(e&&!f){var a=Object(D["y"])({objectname:t.modulename,id:n}),i=a.data;m(i)}l(e)},content:void 0===f?"\u65e0\u6743\u67e5\u770b\u8be6\u7ec6\u4fe1\u606f":fe({moduleInfo:t,record:f,dispatch:a,setVisible:l})||"Loading......",children:i||Object(F["jsx"])("span",{className:T.a.manytooneinfo,children:Object(F["jsx"])(E["a"],{style:{paddingLeft:"2px"}})})},t.modulename+n):null},be=5,je=function(e,t,n){if(!e)return null;var a=Object(R["k"])(t.fieldtype),c=Object(k["x"])(a),o=e,s=function(e){return Object(F["jsx"])(me,{id:e.key,moduleInfo:c,dispatch:n,children:Object(F["jsx"])(i["a"],{className:A.a.manytomanytag,children:e.title})})},d=[];return o.length<=be?d=o.map((function(e){return s(e)})):(d=o.filter((function(e,t){return t<be})).map((function(e){return s(e)})),d.push(Object(F["jsx"])(r["a"],{title:"\u5176\u4ed6".concat(o.length-be,"\u4e2a").concat(c.title),trigger:"click",content:Object(F["jsx"])("div",{style:{maxWidth:"600px"},children:Object(F["jsx"])(l["b"],{size:[0,5],wrap:!0,children:o.filter((function(e,t){return t>=be})).map((function(e){return s(e)}))})}),children:Object(F["jsx"])(i["a"],{style:{cursor:"pointer"},color:"processing",children:"\u66f4\u591a..."})}))),Object(F["jsx"])("div",{children:d})},he=function(e,t,n){var a={width:n.imageWidth||96,height:n.imageHeight||96,style:n.imageStyle||{borderRadius:"8px"}};return e?Object(F["jsx"])("div",{style:{textAlign:"center"},children:Object(F["jsx"])(C.a,Object(u["a"])(Object(u["a"])({zIndex:19260817},a),{},{controller:{close:!0,zoom:!0,download:!0,rotate:!0,flip:!0,pagination:!0},animate:{flip:"fade"},src:e?"data:image/jpeg;base64,".concat(e):z["e"],alt:t.fieldtitle}))}):Object(F["jsx"])("div",{style:{textAlign:"center"},children:Object(F["jsx"])("img",Object(u["a"])(Object(u["a"])({alt:""},a),{},{width:32,height:32,src:z["e"]}))})},_e=function(e){return null===e||void 0===e?te:e?X:ee},Oe={whiteSpace:"pre-line",minWidth:"40px"},xe=function(e){var t=e.item,n=e.moduleInfo,i=e.record,r=e.dispatch,c=Object(k["n"])(t.fieldid,n);if(null===c&&t.fieldahead&&(c=t.aggregate?Object(k["a"])(n,t):Object(k["b"])(n,t)),c.fieldname||Object(I["d"])(c,{fieldname:t.additionFieldname,fieldtitle:"",fieldtype:"count"===t.aggregate?"Integer":"string",unittext:"count"===t.aggregate?"\u6761":void 0}),c.ishidden||c.isdisable)return null;var o=i[c.fieldname],s=H(n.modulename,c.fieldname);if(s)o=s({value:o,record:i,dataIndex:c.fieldname,dispatch:r});else if(c.fDictionaryid)o=i["".concat(c.fieldname,"_dictname")];else if(c.fieldname===n.namefield)o=Object(F["jsx"])("b",{children:o});else{if(c.isManyToOne){o=i[c.manyToOneInfo.nameField];var l=i[c.manyToOneInfo.keyField];return Object(F["jsxs"])(a["b"].Item,{label:Object(I["p"])(c.fieldtitle),span:t.colspan||1,children:[o,o?Object(F["jsx"])("span",{style:{float:"right"},children:Object(F["jsx"])(me,{id:l,dispatch:r,moduleInfo:Object(k["x"])(c.fieldtype)})}):null]},t.fieldid)}if(c.isOneToMany)o=le(o,c,{moduleInfo:n,dispatch:r,record:i});else if(c.isManyToMany)o=je(i["".concat(c.fieldname,"_detail")],c,r);else switch(c.fieldtype.toLowerCase()){case"money":case"double":case"float":o=oe(o,c,{moduleInfo:n,dispatch:r,record:i,formFieldDefine:t});break;case"integer":o=c.isRate?re(o):ce(o,c,{moduleInfo:n,dispatch:r,record:i,formFieldDefine:t});break;case"percent":o=se(o,c);break;case"date":o=ae(o);break;case"datetime":case"timestamp":o=ie(o,c);break;case"image":o=he(o,c,t);break;case"boolean":o=_e(o);break;default:}}return Object(F["jsx"])(a["b"].Item,{label:Object(I["p"])(c.fieldtitle),span:t.colspan||1,style:Oe,children:o},t.fieldid)},ge=function e(t){var n=t.panel,i=t.moduleInfo,r=t.record,c=t.dispatch,o=t.noborder,s=t.style;return n.details&&n.details.length?Object(F["jsx"])(a["b"],{bordered:!0,style:s,className:o?"noborder":"border",column:1===n.cols?{lg:1,md:1,sm:1,xs:1}:{lg:n.cols,md:2,sm:1,xs:1},size:"small",children:n.details.map((function(t){return t.fieldid?xe({item:t,moduleInfo:i,record:r,dispatch:c}):"panel"===t.xtype?Object(F["jsx"])(a["b"].Item,{className:"hiddenlabel",span:t.colspan||1,style:{padding:0,border:"0px solid #f0f0f0 !important"},children:e({panel:t,moduleInfo:i,record:r,dispatch:c,noborder:!0})},t.detailid):Object(F["jsx"])(a["b"].Item,{span:t.colspan||1,label:"\u672a\u5b9a\u4e49\u7684\u5bb9\u5668",children:"\u672a\u5b9a\u4e49\u7684\u5bb9\u5668"},t.detailid)}))}):null},ve=function(e){var t=e.moduleInfo,n=e.record,a=e.dispatch,i=e.children,c=Object(j["useState"])(!1),o=Object(p["a"])(c,2),s=o[0],l=o[1];return Object(F["jsx"])(r["a"],{trigger:"click",destroyTooltipOnHide:!0,visible:s,onVisibleChange:function(e){return l(e)},content:Object(F["jsx"])(fe,{moduleInfo:t,record:n,dispatch:a,setVisible:l}),children:i||Object(F["jsx"])("span",{className:T.a.manytooneinfo,children:Object(F["jsx"])(E["a"],{})})})},ye=function(e){var t=e.moduleInfo,n=e.record,a=e.dispatch,i=e.disableTitle,r=e.isRecordExpand;return Object(F["jsx"])(fe,{moduleInfo:t,record:n,disableTitle:i,dispatch:a,isRecordExpand:r})}},aiD7:function(e,t,n){"use strict";n("lUTK");var a=n("BvKs"),i=n("79+z"),r=n("nKUr"),c=function(e,t){var n=1,c=function e(c){return c.map((function(c){return"-"===c.text?Object(r["jsx"])(a["a"].Divider,{},"dividerkey".concat(n++)):c.menu?[c.fieldid?Object(r["jsx"])(a["a"].Item,{icon:Object(i["s"])(c.iconCls),onClick:function(){t(c)},children:c.text||c.title},c.fieldid):null,Object(r["jsx"])(a["a"].SubMenu,{title:c.text,icon:Object(i["s"])(c.iconCls),children:e(c.menu)},(c.fieldid||"submenu")+n++)]:Object(r["jsx"])(a["a"].Item,{icon:Object(i["s"])(c.iconCls),onClick:function(){t(c)},children:c.text||c.title},c.fieldid)}))};return c(e||[])};t["a"]=c},aonj:function(e,t,n){"use strict";var a=n("6BL2"),i=n("hfUJ");e.exports=function(e,t,n,r){var c=n.getImplementationType,o=n.getBusinessObject;function s(e){return"external"===c(e)}var l=a.textField({id:"externalTopic",label:r("Topic"),modelProperty:"externalTopic",get:function(e,t){var n=o(e);return{externalTopic:n.get("activiti:topic")}},set:function(e,t,n){var a=o(e);return i.updateBusinessObject(e,a,{"activiti:topic":t.externalTopic})},validate:function(e,t,n){return s(e)&&!t.externalTopic?{externalTopic:r("Must provide a value")}:{}},hidden:function(e,t){return!s(e)}});return[l]}},aoqV:function(e,t,n){"use strict";n("DYRE");var a,i=n("zeV3"),r=n("k1fw"),c=(n("+L6B"),n("2/Rp")),o=(n("miYZ"),n("tsqr")),s=n("xvlK"),l=(n("5Dmo"),n("3S7+")),d=(n("Q9mQ"),n("diRs")),u=(n("Awhp"),n("KrTs")),p=(n("Mwp2"),n("VXEj")),f=(n("bP8k"),n("gFTJ")),m=n("0owl"),b=n("ma4E"),j=n("ASZ0"),h=n("nKUr"),_=f["b"].Item,O=function(e){var t,n=e.moduleState,a=e.dispatch,r=n.moduleName,c=Object(b["l"])(n.filters.columnfilter||[],Object(b["i"])(r),"<br/>"),o=Object(h["jsxs"])(p["b"],{style:{border:"1px solid #f0f0f0"},size:"small",children:[Object(h["jsx"])(p["b"].Item,{actions:[Object(h["jsx"])("a",{onClick:function(){a({type:"modules/filterChanged",payload:{moduleName:r,type:"clearAllColumnFilter"}})},children:"\u5168\u90e8\u53d6\u6d88"},"removeAll")],children:Object(h["jsx"])("b",{children:"\u8868\u5934\u7b5b\u9009\u6761\u4ef6"})},"info"),c.map((function(e,t){return Object(h["jsx"])(p["b"].Item,{children:Object(h["jsxs"])(f["b"],{bordered:!1,column:5,size:"small",style:{width:420},children:[Object(h["jsxs"])(_,{style:{width:25,paddingBottom:0},children:[t+1,"."]},"no."),Object(h["jsx"])(_,{style:{width:100,paddingBottom:0},children:e.property},"property"),Object(h["jsx"])(_,{style:{width:60,paddingBottom:0},children:Object(h["jsx"])("span",{children:Object(b["n"])(e.operator)})},"operator"),Object(h["jsx"])(_,{style:{width:205,paddingBottom:0},children:Object(h["jsx"])("span",{dangerouslySetInnerHTML:{__html:e.value}})},"value"),Object(h["jsx"])(_,{style:{width:40,paddingBottom:0},children:Object(h["jsx"])("a",{onClick:function(){a({type:"modules/filterChanged",payload:{type:"clearColumnFilter",moduleName:r,dataIndex:e.dataIndex}})},children:"\u53d6\u6d88"},"remove")},"action")]})},"key_".concat(t.toString()))}))]}),s=Object(h["jsxs"])(p["b"],{style:{border:"1px solid #f0f0f0"},size:"small",children:[Object(h["jsx"])(p["b"].Item,{actions:[Object(h["jsx"])("a",{onClick:function(){a({type:"modules/filterChanged",payload:{type:"clearNavigateFilter",moduleName:r,index:-1}})},children:"\u5168\u90e8\u53d6\u6d88"},"removeAll")],children:Object(h["jsx"])("b",{children:"\u5bfc\u822a\u6761\u4ef6\u5217\u8868"})},"info"),null===(t=n.filters.navigate)||void 0===t?void 0:t.map((function(e,t){return Object(h["jsx"])(p["b"].Item,{children:Object(h["jsxs"])(f["b"],{bordered:!1,column:5,size:"small",style:{width:420},children:[Object(h["jsxs"])(_,{style:{width:25,paddingBottom:0},children:[t+1,"."]},"no."),Object(h["jsx"])(_,{style:{width:100,paddingBottom:0},children:e.fieldtitle},"property"),Object(h["jsx"])(_,{style:{width:60,paddingBottom:0},children:Object(h["jsx"])("span",{children:Object(b["n"])(e.operator)})},"operator"),Object(h["jsx"])(_,{style:{width:205,paddingBottom:0},children:Object(h["jsx"])("span",{dangerouslySetInnerHTML:{__html:e.text}})},"value"),Object(h["jsx"])(_,{style:{width:40,paddingBottom:0},children:Object(h["jsx"])("a",{onClick:function(){a({type:"modules/filterChanged",payload:{type:"clearNavigateFilter",moduleName:r,index:t}})},children:"\u53d6\u6d88"},"remove")},"action")]})})}))]}),O=Object(h["jsx"])(p["b"],{style:{border:"1px solid #f0f0f0"},size:"small",children:Object(h["jsx"])(p["b"].Item,{actions:[Object(h["jsx"])("a",{onClick:function(){a({type:"modules/filterChanged",payload:{type:"viewSchemeChange",moduleName:r,viewSchemeChanged:{}}})},children:"\u53d6\u6d88"},"removeAll")],children:Object(h["jsxs"])("b",{children:["\u89c6\u56fe\u65b9\u6848\uff1a",n.filters.viewscheme.title]})},"info")}),x=Object(h["jsx"])(p["b"],{style:{border:"1px solid #f0f0f0"},size:"small",children:Object(h["jsx"])(p["b"].Item,{actions:[Object(h["jsx"])("a",{onClick:function(){a({type:"modules/filterChanged",payload:{type:"searchfilter",moduleName:r,query:""}})},children:"\u53d6\u6d88"},"removeAll")],children:Object(h["jsxs"])("b",{children:["\u6587\u672c\u5b57\u6bb5\u4e2d\u5305\u542b\uff1a",n.filters.searchfilter]})},"info")}),g=Object(j["b"])(n.filters.userfilter,!0,"<br />"),v=Object(h["jsxs"])(p["b"],{style:{border:"1px solid #f0f0f0"},size:"small",children:[Object(h["jsx"])(p["b"].Item,{actions:[Object(h["jsx"])("a",{onClick:function(){var e=[],t=JSON.parse(JSON.stringify(Object(j["d"])(n.moduleName)));Object.keys(t).forEach((function(n){e.push(t[n])})),a({type:"modules/filterChanged",payload:{moduleName:r,type:"userDefineFilter",userfilter:e}})},children:"\u5168\u90e8\u53d6\u6d88"},"removeAll")],children:Object(h["jsx"])("b",{children:"\u81ea\u5b9a\u4e49\u6761\u4ef6\u5217\u8868"})},"info"),g.map((function(e,t){return Object(h["jsx"])(p["b"].Item,{children:Object(h["jsxs"])(f["b"],{bordered:!1,column:5,size:"small",style:{width:420},children:[Object(h["jsxs"])(_,{style:{width:25,paddingBottom:0},children:[t+1,"."]},"no."),Object(h["jsx"])(_,{style:{width:100,paddingBottom:0},children:e.title},"title"),Object(h["jsx"])(_,{style:{width:60,paddingBottom:0},children:Object(h["jsx"])("span",{children:Object(b["n"])(e.operator)})},"operator"),Object(h["jsx"])(_,{style:{width:205,paddingBottom:0},children:Object(h["jsx"])("span",{dangerouslySetInnerHTML:{__html:e.value}})},"value"),Object(h["jsx"])(_,{style:{width:40,paddingBottom:0},children:"\xa0"},"action")]})},"li.".concat(t+1))}))]}),y=Object(h["jsxs"])(p["b"],{style:{border:"1px solid #f0f0f0"},size:"small",children:[Object(h["jsx"])(p["b"].Item,{actions:[Object(h["jsx"])("a",{onClick:function(){a({type:"modules/filterChanged",payload:{moduleName:r,type:"resetSqlparam"}})},children:"\u5168\u90e8\u53d6\u6d88"},"removeAll")],children:Object(h["jsx"])("b",{children:"\u67e5\u8be2\u53c2\u6570"})},"sqlparam"),Object(b["q"])(n.filters.sqlparam).map((function(e,t){return Object(h["jsx"])(p["b"].Item,{children:Object(h["jsxs"])(f["b"],{bordered:!1,column:5,size:"small",style:{width:420},children:[Object(h["jsxs"])(_,{style:{width:25,paddingBottom:0},children:[t+1,"."]},"no."),Object(h["jsx"])(_,{style:{width:100,paddingBottom:0},children:e.property},"title"),Object(h["jsx"])(_,{style:{width:60,paddingBottom:0},children:Object(h["jsx"])("span",{children:Object(b["n"])(e.operator)})},"operator"),Object(h["jsx"])(_,{style:{width:205,paddingBottom:0},children:Object(h["jsx"])("span",{dangerouslySetInnerHTML:{__html:e.value}})},"value"),Object(h["jsx"])(_,{style:{width:40,paddingBottom:0},children:"\xa0"},"action")]})},"li.".concat(t+1))}))]}),E=function(){return Object(h["jsxs"])(i["b"],{direction:"vertical",children:[n.filters.sqlparam&&Object(b["o"])(n.filters.sqlparam)?y:null,n.filters.viewscheme.viewschemeid?O:null,n.filters.navigate&&n.filters.navigate.length>0?s:null,c.length>0?o:null,g.length>0?v:null,n.filters.searchfilter?x:null]})},S=Object(b["d"])(n);return S>0?Object(h["jsx"])(l["a"],{title:"\u7b5b\u9009\u6761\u4ef6: ".concat(S,"\u4e2a"),children:Object(h["jsx"])(d["a"],{content:E(),trigger:["click"],placement:"bottom",children:Object(h["jsx"])(u["a"],{count:S,dot:!1,offset:[-6,6],style:{backgroundColor:"#108ee9"},children:Object(h["jsx"])(m["a"],{style:{paddingRight:20}})})})}):null},x=O,g=(n("qVdP"),n("jsC+")),v=n("tJVT"),y=(n("lUTK"),n("BvKs")),E=n("q1tI"),S=n.n(E),C=n("Mo4S"),I=n("4g1a"),D=n("1x1c"),k=n("rdt+"),w=n("eFNv"),P=n("dF/Y"),T=(n("IzEo"),n("bx4M")),M=(n("14J3"),n("BMrR")),A=(n("giR+"),n("fyUT")),R=(n("7Kak"),n("9yH6")),N=(n("/zsF"),n("PArb")),L=(n("jCWc"),n("kPKH")),B=(n("BoS7"),n("Sdc0")),K=(n("y8nQ"),n("Vl3Y")),F=function(e){var t=e.moduleState,n=e.dispatch,a=K["a"].useForm(),i=Object(v["a"])(a,1),r=i[0],c=t.moduleName,o=t.gridExportSetting,s={padding:0,margin:0};return Object(h["jsx"])(T["a"],{title:Object(h["jsxs"])(h["Fragment"],{children:[Object(h["jsx"])(w["a"],{})," \u5217\u8868\u5bfc\u51fa\u8bbe\u7f6e"]}),size:"small",style:{border:"0px"},children:Object(h["jsx"])(K["a"],{form:r,autoComplete:"off",className:"moduleform",labelCol:{flex:"1 1 120px"},style:{width:"460px"},initialValues:o,onValuesChange:function(){n({type:"modules/gridExportSettingChanged",payload:{moduleName:c,gridExportSetting:r.getFieldsValue()}})},children:Object(h["jsxs"])(M["a"],{gutter:0,children:[Object(h["jsx"])(L["a"],{span:12,children:Object(h["jsx"])(K["a"].Item,{name:"usemonetary",label:"\u52a0\u5165\u5f53\u524d\u6570\u503c\u5355\u4f4d",valuePropName:"checked",style:s,children:Object(h["jsx"])(B["a"],{})})}),Object(h["jsx"])(L["a"],{span:12,children:Object(h["jsx"])(K["a"].Item,{name:"colorless",label:"\u65e0\u524d\u666f\u80cc\u666f\u8272",valuePropName:"checked",style:s,children:Object(h["jsx"])(B["a"],{})})}),Object(h["jsx"])(L["a"],{span:12,children:Object(h["jsx"])(K["a"].Item,{name:"sumless",label:"\u4e0d\u52a0\u5165\u603b\u8ba1\u884c",valuePropName:"checked",style:s,children:Object(h["jsx"])(B["a"],{})})}),Object(h["jsx"])(L["a"],{span:12,children:Object(h["jsx"])(K["a"].Item,{name:"unitalone",label:"\u8ba1\u91cf\u5355\u4f4d\u5355\u72ec\u4e00\u884c",valuePropName:"checked",style:s,children:Object(h["jsx"])(B["a"],{})})}),Object(h["jsx"])(N["a"],{style:{height:"3px",margin:"4px"}}),Object(h["jsx"])(L["a"],{span:24,children:Object(h["jsx"])(K["a"].Item,{name:"pagesize",label:"\u5bfc\u51fa\u7eb8\u5f20\u8bbe\u7f6e",labelCol:{span:6},wrapperCol:{span:18},children:Object(h["jsxs"])(R["a"].Group,{children:[Object(h["jsx"])(R["a"],{value:"pageautofit",children:"\u81ea\u52a8\u9002\u5e94"}),Object(h["jsx"])("br",{}),Object(h["jsx"])(R["a"],{value:"A4",children:"A4\u7eb5\u5411"}),Object(h["jsx"])(R["a"],{value:"A4landscape",children:"A4\u6a2a\u5411"}),Object(h["jsx"])("br",{}),Object(h["jsx"])(R["a"],{value:"A3",children:"A3\u7eb5\u5411"}),Object(h["jsx"])(R["a"],{value:"A3landscape",children:"A3\u6a2a\u5411"})]})})}),Object(h["jsx"])(L["a"],{span:12,children:Object(h["jsx"])(K["a"].Item,{name:"scale",label:"\u7f29\u653e\u6bd4\u4f8b(%)",children:Object(h["jsx"])(A["a"],{disabled:"pageautofit"===o.pagesize,min:1,max:1e4})})}),Object(h["jsx"])(L["a"],{span:12,children:Object(h["jsx"])(K["a"].Item,{name:"autofitwidth",label:"\u81ea\u52a8\u9002\u5e94\u5217\u5bbd",valuePropName:"checked",children:Object(h["jsx"])(B["a"],{disabled:"pageautofit"===o.pagesize})})})]})})})},U=F,W=n("HFZ8"),V=n("rRzd"),q=n("TtZX"),z=n("+1av"),G=y["a"].SubMenu,J=function(e){var t=e.moduleState,n=e.dispatch,a=Object(E["useState"])(!1),i=Object(v["a"])(a,2),r=i[0],o=i[1],s=Object(h["jsxs"])(y["a"],{children:[Object(h["jsxs"])(y["a"].Item,{icon:Object(h["jsx"])(C["a"],{}),onClick:function(){Object(V["b"])({moduleState:t,key:"toExcel",topdf:!1,onlyselected:!1})},children:["\u5217\u8868\u5bfc\u51faExcel\u6587\u6863",Object(h["jsx"])(l["a"],{title:"\u5bfc\u51fapdf\u6587\u4ef6",placement:"topRight",children:Object(h["jsx"])(c["a"],{style:{float:"right",paddingRight:"5px"},type:"link",size:"small",onClick:function(e){e.stopPropagation(),o(!1),Object(V["b"])({moduleState:t,key:"toExcel",topdf:!0,onlyselected:!1})},children:Object(h["jsx"])(I["a"],{style:{marginLeft:"10px"}})})})]},"toExcel"),Object(h["jsx"])(y["a"].Divider,{}),Object(V["a"])({moduleState:t,setVisible:o,onlyselected:!1}),Object(W["a"])({moduleState:t,setVisible:o}),Object(q["a"])({moduleState:t,setVisible:o}),Object(h["jsx"])(y["a"].ItemGroup,{title:"\u5206\u7ec4\u5b57\u6bb5\u8bbe\u7f6e",children:Object(h["jsx"])(y["a"].Item,{children:Object(h["jsx"])(z["a"],{moduleName:t.moduleName,callback:function(e){n({type:"modules/groupChanged",payload:{moduleName:t.moduleName,property:e.fieldname,title:e.title}}),o(!0)},children:0===t.groups.length?Object(h["jsx"])(c["a"],{type:"text",size:"small",icon:Object(h["jsx"])(D["a"],{}),children:"\u9009\u62e9\u5206\u7ec4\u5b57\u6bb5"}):Object(h["jsxs"])("span",{children:[Object(h["jsx"])(c["a"],{type:"text",size:"small",children:t.groups[0].title}),Object(h["jsx"])(l["a"],{title:"\u6e05\u9664\u5206\u7ec4\u8bbe\u7f6e",children:Object(h["jsx"])(c["a"],{style:{float:"right"},type:"link",size:"small",onClick:function(e){e.stopPropagation(),n({type:"modules/resetGroups",payload:{moduleName:t.moduleName}}),o(!0)},children:Object(h["jsx"])(k["a"],{})})})]})})},"subgroupitem")},"subgroup"),Object(h["jsx"])(G,{title:"\u5217\u8868\u5bfc\u51fa\u8bbe\u7f6e",icon:Object(h["jsx"])(w["a"],{}),children:Object(h["jsx"])(y["a"].Item,{style:{padding:0,margin:0},children:Object(h["jsx"])(U,{moduleState:t,dispatch:n})})},"sub3")]},"exportButton");return Object(h["jsx"])(g["a"],{overlay:s,visible:r,onVisibleChange:function(e){return o(e)},children:Object(h["jsxs"])(c["a"],{children:[Object(h["jsx"])(P["a"],{})," \u5bfc\u51fa"]})})},H=J,Y=n("MrJO"),Z=n("WTWM"),Q=(n("bbsP"),n("/wGt")),$=(n("5NDa"),n("5rEg")),X=(n("aHsQ"),n("sGsY")),ee=(n("fOrg"),n("+KLJ")),te=(n("MXD1"),n("CFYs")),ne=(n("g9YV"),n("wCAj")),ae=n("oBTY"),ie=n("9og8"),re=n("WmNS"),ce=n.n(re),oe=n("79+z"),se=n("BtR2"),le=n("wd/R"),de=n.n(le),ue=n("sy1d"),pe=n("5Zmo"),fe=n("RfA7"),me=n("jE+T"),be=n("79mi");(function(e){e[e["Init"]=0]="Init",e[e["CopyCliboard"]=1]="CopyCliboard",e[e["FirstValidate"]=2]="FirstValidate",e[e["Import"]=3]="Import"})(a||(a={}));var je=function(e){return Object(h["jsx"])("span",{children:e})},he="_dictname",_e="_manytoonename",Oe={},xe=function(e){return Oe[e]||(Oe[e]=Object(fe["r"])({moduleName:e,mainlinkage:!1})),Oe[e]},ge=function(e){var t=e.moduleState,n=e.dispatch,s=t.moduleName,l=Object(Z["x"])(s),d=Object(E["useState"])(!1),p=Object(v["a"])(d,2),f=p[0],m=p[1],b=Object(E["useState"])(a.Init),j=Object(v["a"])(b,2),_=j[0],O=j[1],x=Object(E["useState"])(""),g=Object(v["a"])(x,2),y=g[0],I=g[1],D=Object(E["useState"])([]),k=Object(v["a"])(D,2),w=k[0],P=k[1],M=Object(E["useState"])(!0),A=Object(v["a"])(M,2),R=A[0],N=A[1],L=Object(E["useState"])(!0),F=Object(v["a"])(L,2),U=F[0],W=F[1],V=Object(E["useState"])(!0),q=Object(v["a"])(V,2),z=q[0],G=q[1],J=Object(E["useState"])(0),H=Object(v["a"])(J,2),Y=H[0],re=H[1],le=Object(E["useState"])(0),Oe=Object(v["a"])(le,2),ge=Oe[0],ve=Oe[1],ye=Object(E["useState"])(0),Ee=Object(v["a"])(ye,2),Se=Ee[0],Ce=Ee[1],Ie=function(){return Object(Z["s"])(l).details.map((function(e){var t=Object(Z["n"])(e.fieldid,l);if(!t)return o["default"].warn("\u6570\u636e\u5bfc\u5165\u7684Form\u65b9\u6848\u4e2d\u7684\u5b57\u6bb5\u8981\u653e\u5728\u6839\u8282\u70b9\u4e0b\uff01"),{};var n={dataIndex:t.fieldname,title:t.fieldtitle};return t.fDictionaryid?n.render=function(e,n){return n[t.fieldname+he]||n[t.fieldname]}:t.isManyToOne&&(n.render=function(e,n){return n[t.fieldname+_e]||n[t.fieldname]}),n})).filter((function(e){return e.dataIndex}))},De=Object(E["useState"])(Ie()),ke=Object(v["a"])(De,1),we=ke[0],Pe=function(){if(y){var e=-1===y.indexOf("\t")?",":"\t",t=y.split(/\r?\n/);P(t.filter((function(e){return e})).map((function(t,n){for(var a={keyOfImportRecord:"".concat(n+1)},i=t.split(e),r=function(e){var t=i[e];a[we[e].dataIndex]=t;var n=Object(Z["n"])(we[e].dataIndex,l);if(n)if(t){if(n.isDateField){if(-1!==t.indexOf("/")){var r=t.split("/");3===r.length&&(2===r[0].length&&(r[0]="20".concat(r[0])),1===r[1].length&&(r[1]="0".concat(r[1])),1===r[2].length&&(r[2]="0".concat(r[2]))),a[we[e].dataIndex]=r.join("-")}}else if("boolean"===n.fieldtype.toLowerCase()){var c=t;"\u662f"!==t&&"yes"!==t.toLowerCase()&&"true"!==t.toLowerCase()||(c="true"),"\u5426"!==t&&"no"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(c="false"),["1","0","true","false","","null"].includes(c)?a[we[e].dataIndex]=c:a.statusOfImportRecord="".concat(a.statusOfImportRecord||"validerror:").concat(n.fieldtitle,"\u7684\u503c\u4e0d\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff1b")}else if(n.fDictionaryid){var o=Object(be["c"])(n.fDictionaryid),s=o.find((function(e){return e.text===t}));s?(a[we[e].dataIndex+he]=s.text,a[we[e].dataIndex]=s.value):a.statusOfImportRecord="".concat(a.statusOfImportRecord||"validerror:").concat(n.fieldtitle,"\u672a\u5728\u6570\u636e\u5b57\u5178\u4e2d\u627e\u5230\uff1b")}else if(n.isManyToOne){var d=xe(n.fieldtype),u=d.find((function(e){return e.value===t||e.text===t}));u?(a[we[e].dataIndex+_e]=u.text,a[we[e].dataIndex]=u.value):a.statusOfImportRecord="".concat(a.statusOfImportRecord||"validerror:").concat(n.fieldtitle,"\u672a\u627e\u5230\uff1b")}}else n.isrequired&&(a.statusOfImportRecord="".concat(a.statusOfImportRecord||"validerror:").concat(n.fieldtitle,"\u662f\u5fc5\u6dfb\u5b57\u6bb5\uff1b"))},c=0;c<we.length;c+=1)r(c);return a})))}},Te=function(e){return e?e.startsWith("success")?Object(h["jsx"])(u["a"],{status:"success",text:"\u5199\u5165\u6210\u529f"}):e.startsWith("error")?Object(h["jsx"])(u["a"],{status:"error",text:e.substring(6)}):e.startsWith("validerror")?Object(h["jsx"])(u["a"],{status:"warning",text:e.substring(11)}):e:null},Me=Object(E["useMemo"])((function(){var e={};return l.fields.filter((function(e){return!e.isdisable&&e.allownew&&e.defaultvalue})).forEach((function(t){var n=t.defaultvalue;e[t.fieldname]="true"===n||"false"!==n&&("now"===n?de()().format(me["b"]):n)})),e}),[]),Ae=Object(E["useMemo"])((function(){var e=t.filters.parentfilter;if(e){var n=e.fieldahead;if(n&&-1===n.indexOf("."))return e}return null}),[t.filters.parentfilter]),Re=function(){var e=Object(ie["a"])(ce.a.mark((function e(t){var n,a,i,c,o;return ce.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t,a=Object(r["a"])({},n),delete a.keyOfImportRecord,delete a.statusOfImportRecord,z&&Object(oe["f"])(a,Me),!U){e.next=12;break}return i={objectname:s,parentfilter:null,navigates:null},e.next=9,Object(fe["A"])(i);case 9:c=e.sent,o=c.data,o&&Object(oe["f"])(a,o);case 12:return R&&Ae&&(a["".concat(Ae.fieldahead,".").concat(Ae.fieldName)]=Ae.fieldvalue),Object.keys(a).forEach((function(e){-1!==e.indexOf(he)&&delete a[e]})),Object.keys(a).forEach((function(e){if(-1!==e.indexOf(_e)){delete a[e];var t=e.replace(_e,""),n=Object(Z["n"])(t,l),i=Object(Z["x"])(n.fieldtype);a["".concat(t,".").concat(i.primarykey)]=a[t],delete a[t]}"null"!==a[e]&&""!==a[e]||(a[e]=null)})),e.abrupt("return",Object(fe["I"])({moduleName:s,opertype:"insert",data:a}).then((function(e){if(e.success)re((function(e){return e+1})),n.statusOfImportRecord="success",P(Object(ae["a"])(w));else{var t=("string"===typeof e.message?e.message:JSON.stringify(e.message))||"",a=e.data;a&&Object.keys(a).forEach((function(e){var n=Object(Z["n"])(e,l);t+="".concat(n?n.fieldtitle:e,":").concat(a[e])})),n.statusOfImportRecord="error:".concat(t),P(Object(ae["a"])(w))}})));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(ie["a"])(ce.a.mark((function e(){var t,n,a;return ce.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=w.filter((function(e){return!e.statusOfImportRecord})),0!==t.length){e.next=4;break}return o["default"].info("\u5217\u8868\u4e2d\u6240\u6709\u65e0\u9519\u8bef\u7684\u8bb0\u5f55\u90fd\u4e0a\u4f20\u6210\u529f\u4e86\uff01"),e.abrupt("return");case 4:n=0;case 5:if(!(n<t.length)){e.next=14;break}return ve(n+1),Ce(Math.floor(100*(n+1)/t.length)),a=t[n],e.next=11,Re(a);case 11:n+=1,e.next=5;break;case 14:ve(0);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){P([]),I(w.filter((function(e){return"success"!==e.statusOfImportRecord})).map((function(e){return we.map((function(t){return e[t.dataIndex+he]||e[t.dataIndex+_e]||e[t.dataIndex]})).join("\t")})).join("\r")),O(a.Init),ve(0)},Be=function(){return Object(h["jsx"])(ne["a"],{title:function(){return"\u5bfc\u5165\u6570\u636e\u5217\u8868"},size:"small",bordered:!0,rowSelection:{type:"checkbox"},dataSource:w,rowKey:"keyOfImportRecord",pagination:{pageSize:100,position:["topRight","bottomRight"],hideOnSinglePage:!0},columns:[{dataIndex:"keyOfImportRecord",title:"\u5e8f\u53f7",width:48,align:"right",render:function(e){return Object(pe["h"])(e)}},{dataIndex:"statusOfImportRecord",title:"\u5bfc\u5165\u72b6\u6001",render:Te}].concat(Object(ae["a"])(we)).map((function(e){return Object(r["a"])(Object(r["a"])({},e),{},{title:je(e.title)})})),scroll:{x:!0,y:"100%"}})},Ke=0,Fe=0,Ue=0;w.forEach((function(e){e.statusOfImportRecord&&e.statusOfImportRecord.startsWith("error")?Ke+=1:e.statusOfImportRecord&&e.statusOfImportRecord.startsWith("validerror")?Ue+=1:"success"===e.statusOfImportRecord&&(Fe+=1)}));var We=function(){O(a.Init),I(""),P([]),ve(0)};return Object(h["jsxs"])(S.a.Fragment,{children:[Object(h["jsx"])(c["a"],{onClick:function(){return m(!0)},children:"\u5bfc\u5165"}),Object(h["jsx"])(Q["a"],{title:Object(h["jsxs"])("span",{children:[Object(h["jsx"])("span",{children:"\u300e".concat(l.title,"\u300f\u6570\u636e\u5bfc\u5165")}),Object(h["jsx"])("span",{style:{float:"right",marginRight:"36px"},children:Object(h["jsxs"])(c["a"],{size:"small",type:"link",onClick:function(){Object(oe["k"])("".concat(ue["API_HEAD"],"/platform/dataobjectimport/downloadimporttemplate.do"),{objectid:s})},children:[Object(h["jsx"])(C["a"],{}),"\u4e0b\u8f7d\u5bfc\u5165Excel\u6a21\u677f"]})})]}),bodyStyle:{border:"16px #f0f2f5 solid",margin:0},visible:f,width:"100%",onClose:function(){We(),m(!1),re(0),n({type:"modules/fetchData",payload:{moduleName:s,forceUpdate:!0}})},children:Object(h["jsxs"])("span",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(h["jsxs"])("div",{style:{display:"flex"},children:[Object(h["jsxs"])("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[Object(h["jsxs"])(i["b"],{style:{paddingBottom:16},children:[Object(h["jsx"])(c["a"],{disabled:_!==a.CopyCliboard,onClick:function(){O(a.FirstValidate),Pe()},children:"\u6570\u636e\u6821\u9a8c"}),Object(h["jsx"])(c["a"],{disabled:_!==a.FirstValidate,onClick:Ne,children:"\u6570\u636e\u5bfc\u5165"}),w.length?Object(h["jsxs"])(h["Fragment"],{children:[Fe+Ke+Ue===0?Object(h["jsx"])(c["a"],{onClick:function(){O(a.CopyCliboard),P([])},type:"link",children:"\u91cd\u65b0\u7f16\u8f91\u5bfc\u5165\u6570\u636e"}):null,w.length===Fe?Object(h["jsx"])(c["a"],{onClick:We,type:"primary",children:"\u5f00\u59cb\u65b0\u7684\u5bfc\u5165"}):null,Ke+Ue&&!ge?Object(h["jsx"])(c["a"],{onClick:Le,type:"link",children:"\u672a\u5bfc\u5165\u548c\u9519\u8bef\u7684\u8bb0\u5f55\u91cd\u65b0\u7f16\u8f91"}):null," "]}):null]}),ge?Object(h["jsx"])(te["a"],{style:{marginBottom:16},percent:Se}):null,Ae&&R?Object(h["jsx"])(ee["a"],{style:{marginBottom:16},message:Object(h["jsxs"])("span",{children:["".concat(Ae.fieldtitle,"\u300e "),Object(h["jsx"])("b",{children:"".concat(Ae.text," \u300f")})]}),type:"info"}):null,Object(h["jsxs"])(i["b"],{style:{paddingBottom:16},size:"large",children:[Ae?Object(h["jsxs"])("span",{children:["\u52a0\u5165\u9650\u5b9a\u6761\u4ef6\u6216\u5bfc\u822a\u503c\uff1a",Object(h["jsx"])(B["a"],{checkedChildren:" \u8bf7\u52a0\u5165 ",unCheckedChildren:" \u4e0d\u52a0\u5165 ",checked:R,onChange:function(e){return N(e)}})]}):null,Object(h["jsxs"])("span",{children:["\u52a0\u5165\u4ece\u670d\u52a1\u7aef\u83b7\u5f97\u7684\u7f3a\u7701\u503c\uff1a",Object(h["jsx"])(B["a"],{checkedChildren:" \u8bf7\u52a0\u5165 ",unCheckedChildren:" \u4e0d\u52a0\u5165 ",checked:U,onChange:function(e){return W(e)}})]}),Object(h["jsxs"])("span",{children:["\u52a0\u5165\u5b9e\u4f53\u5b57\u6bb5\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u503c\uff1a",Object(h["jsx"])(B["a"],{checkedChildren:" \u8bf7\u52a0\u5165 ",unCheckedChildren:" \u4e0d\u52a0\u5165 ",checked:z,onChange:function(e){return G(e)}})]})]}),w.length?Object(h["jsxs"])(i["b"],{style:{paddingBottom:16},size:"large",children:[Object(h["jsx"])(u["a"],{status:"default",text:"\u5171\u6709 ".concat(w.length," \u6761\u8bb0\u5f55")}),Object(h["jsx"])(u["a"],{status:"success",text:"\u5df2\u5bfc\u5165 ".concat(Fe," \u6761\u8bb0\u5f55")}),Object(h["jsx"])(u["a"],{status:"warning",text:"\u6821\u9a8c\u9519\u8bef ".concat(Ue," \u6761\u8bb0\u5f55")}),Object(h["jsx"])(u["a"],{status:"error",text:"\u5bfc\u5165\u5931\u8d25 ".concat(Ke," \u6761\u8bb0\u5f55")})]}):null]}),Object(h["jsx"])(X["a"],{style:{width:"200px",padding:24},title:"\u5df2\u5bfc\u5165\u8bb0\u5f55\u6570",value:Y,prefix:Object(h["jsx"])(se["a"],{})})]}),Object(h["jsx"])("div",{style:{padding:16,flex:1,backgroundColor:"#f0f2f5"},children:Object(h["jsxs"])(T["a"],{style:{height:"100%"},bodyStyle:{height:"100%"},children:[_===a.Init||_===a.CopyCliboard?Object(h["jsxs"])("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[Object(h["jsxs"])("span",{style:{marginBottom:12},children:["\u5b57\u6bb5\u987a\u5e8f\uff1a",we.map((function(e,t){return"".concat(t+1,".").concat(e.title)})).join("  ")]}),Object(h["jsx"])(K["a"],{style:{flex:1},initialValues:{uploaddata:y},children:Object(h["jsx"])(K["a"].Item,{noStyle:!0,name:"uploaddata",children:Object(h["jsx"])($["a"].TextArea,{style:{height:"100%"},autoSize:!1,onChange:function(e){var t=e.target.value;I(t),O(t?a.CopyCliboard:a.Init)},placeholder:"\u8bf7\u5c06\u5bfc\u5165\u7684\u6570\u636e\u7c98\u8d34\u5728\u6b64\u5904\uff0c\u6bcf\u884c\u4e2d\u4ee5Tab\u6216\u9017\u53f7\u5206\u9694\u5b57\u6bb5\u3002\u53ef\u4ee5\u5728Excel\u4e2d\u9009\u62e9\u6570\u636e\u590d\u5236\u540e\uff0c\u7c98\u8d34\u8fdb\u6765\u5373\u53ef\u3002"})})})]}):null,_===a.FirstValidate?Object(h["jsx"])("span",{children:Object(h["jsx"])(Be,{})}):null]})})]})})]})},ve=ge,ye=function(e){var t=e.moduleState,n=e.moduleInfo,a=e.dispatch,l=e.manyToOneInfo,d=e.readOnly,u=t.moduleName,p=t.formState;return Object(h["jsx"])("span",{children:Object(h["jsxs"])(i["b"],{size:"small",children:[l?Object(h["jsx"])(c["a"],{type:"primary",onClick:function(){if(0!==t.selectedRowKeys.length){var e=t.selectedRowKeys[0];l.setTextValue(t.selectedTextValue.find((function(t){return t.value===e})))}else o["default"].warn("\u8bf7\u5148\u9009\u62e9\u4e00\u6761".concat(n.title,"\u8bb0\u5f55\uff0c\u518d\u6267\u884c\u6b64\u64cd\u4f5c\uff01"))},children:"\u9009\u4e2d\u8fd4\u56de"}):null,l?Object(h["jsx"])(c["a"],{onClick:function(){l.setTextValue({})},children:"\u6e05\u9664\u9009\u62e9"}):null,Object(Z["F"])(n)&&!d?Object(h["jsxs"])(c["a"],{type:"primary",onClick:function(){a({type:"modules/formStateChanged",payload:{moduleName:u,formState:Object(r["a"])(Object(r["a"])({},p),{},{visible:!0,formType:"insert",currRecord:{}})}})},children:[Object(h["jsx"])(s["a"],{})," \u65b0\u5efa"]}):null,Object(Z["G"])(n)&&Object(Z["s"])(n)&&!d?Object(h["jsx"])(ve,{moduleState:t,dispatch:a}):null,d?null:Object(Y["b"])({moduleState:t,dispatch:a,position:"toolbar"}),t.selectedRowKeys.length?Object(h["jsx"])(Y["a"],{moduleState:t,dispatch:a,readOnly:d}):null,Object(h["jsx"])(H,{moduleState:t,dispatch:a}),Object(h["jsx"])(x,{moduleState:t,dispatch:a})]})})};t["a"]=ye},as5y:function(e,t,n){"use strict";var a=n("XpWC"),i=n("y2gs");e.exports=function(e,t,n,r){var c=a.getServiceTaskLikeBusinessObject(t);if(c){var o=i(t,n,r,{businessObject:c});o&&o.length>0&&(e.entries=e.entries.concat(o))}}},asz2:function(e,t,n){"use strict";var a=n("emvA").getBusinessObject,i=n("emvA").is,r=n("FF3N").isAny,c=n("J2m7"),o="activiti:modelerTemplate";function s(e){var t=a(e);if(t)return t.get(o)}function l(e,t){var n=s(e);return n&&t.get(n)}function d(e,t){return t.getAll().filter((function(t){return r(e,t.appliesTo)&&t.isDefault}))[0]}function u(e,t){var n,r=a(e);return n=i(r,"bpmn:ExtensionElements")?r:r.extensionElements,n?c(n.get("values"),(function(e){return i(e,t)})):null}function p(e,t){var n=h(e);return n?n.get("values").filter((function(e){return r(e,t)})):[]}function f(e,t){var n,a=h(e);if(a)return"activiti:in"===t.type?n=function(e){return i(e,"activiti:In")&&_(e,t)}:"activiti:out"===t.type?n=function(e){return i(e,"activiti:Out")&&_(e,t)}:"activiti:in:businessKey"===t.type&&(n=function(e){return i(e,"activiti:In")&&"businessKey"in e}),c(a.get("values"),n)}function m(e,t){return c(e.get("values"),(function(e){return e.name===t.name}))}function b(e,t){var n=e.get("inputParameters");return c(n,(function(e){return e.name===t.name}))}function j(e,t){var n=e.get("outputParameters");return c(n,(function(e){var n=e.value;if(!t.scriptFormat)return n===t.source;var a=e.definition;return!(!a||t.scriptFormat!==a.scriptFormat)&&a.value===t.source}))}function h(e){var t=a(e);return i(t,"bpmn:ExtensionElements")?t:t.extensionElements}function _(e,t){if("activiti:in"===t.type&&t.target)return e.target===t.target;if("activiti:out"===t.type){if(t.source)return e.source===t.source;if(t.sourceExpression)return e.sourceExpression===t.sourceExpression}return t.variables?"all"===e.variables&&("local"!==t.variables||e.local):void 0}e.exports.TEMPLATE_ATTR=o,e.exports.getTemplateId=s,e.exports.getTemplate=l,e.exports.getDefaultTemplate=d,e.exports.findExtension=u,e.exports.findExtensions=p,e.exports.findFlowableInOut=f,e.exports.findFlowableProperty=m,e.exports.findInputParameter=b,e.exports.findOutputParameter=j},"bW/S":function(e,t,n){"use strict";var a=n("5QZp").query,i=n("ihRo").escapeHTML,r=n("ihRo");function c(e){return r.selectedType("select[name=scriptType]",e.parentElement)}e.exports=function(e,t,n,r){return{template:'<div class="bpp-row bpp-textfield"><label for="cam-script-format">'+i(r("Script Format"))+'</label><div class="bpp-field-wrapper"><input id="cam-script-format" type="text" name="scriptFormat" /><button class="clear" data-action="script.clearScriptFormat" data-show="script.canClearScriptFormat"><span>X</span></button></div></div><div class="bpp-row"><label for="cam-script-type">'+i(r("Script Type"))+'</label><div class="bpp-field-wrapper"><select id="cam-script-type" name="scriptType" data-value><option value="script" selected>'+i(r("Inline Script"))+'</option><option value="scriptResource">'+i(r("External Resource"))+'</option></select></div></div><div class="bpp-row bpp-textfield"><label for="cam-script-resource-val" data-show="script.isScriptResource">'+i(r("Resource"))+'</label><div class="bpp-field-wrapper" data-show="script.isScriptResource"><input id="cam-script-resource-val" type="text" name="scriptResourceValue" /><button class="clear" data-action="script.clearScriptResource" data-show="script.canClearScriptResource"><span>X</span></button></div></div><div class="bpp-row"><label for="cam-script-val" data-show="script.isScript">'+i(r("Script"))+'</label><div class="bpp-field-wrapper" data-show="script.isScript"><textarea id="cam-script-val" type="text" name="scriptValue"></textarea></div></div>',get:function(n,a){var i={},r=a.get("activiti:resource"),c=a.get(t),o=a.get(e);return"undefined"!==typeof r?(i.scriptResourceValue=r,i.scriptType="scriptResource"):(i.scriptValue=c,i.scriptType="script"),i.scriptFormat=o,i},set:function(a,i,r){var c=i.scriptFormat,o=i.scriptType,s=i.scriptResourceValue,l=i.scriptValue,d={"activiti:resource":void 0};return d[t]=void 0,d[e]=void 0,n?d[e]=c||"":""!==c&&(d[e]=c),"scriptResource"===o?d["activiti:resource"]=s||"":d[t]=l||"",d},validate:function(e,t){var a={};return"script"!==t.scriptType||t.scriptValue||(a.scriptValue=r("Must provide a value")),"scriptResource"!==t.scriptType||t.scriptResourceValue||(a.scriptResourceValue=r("Must provide a value")),!n||t.scriptFormat&&0!==t.scriptFormat.length||(a.scriptFormat=r("Must provide a value")),a},clearScriptFormat:function(e,t,n,i){return a("input[name=scriptFormat]",i).value="",!0},canClearScriptFormat:function(e,t,n,i){var r=a("input[name=scriptFormat]",i);return""!==r.value},clearScriptResource:function(e,t,n,i){return a("input[name=scriptResourceValue]",i).value="",!0},canClearScriptResource:function(e,t,n,i){var r=a("input[name=scriptResourceValue]",i);return""!==r.value},clearScript:function(e,t,n,i){return a("textarea[name=scriptValue]",i).value="",!0},canClearScript:function(e,t,n,i){var r=a("textarea[name=scriptValue]",i);return""!==r.value},isScriptResource:function(e,t,n,a){var i=c(a);return"scriptResource"===i},isScript:function(e,t,n,a){var i=c(a);return"script"===i}}}},"bmo+":function(e,t,n){"use strict";n.d(t,"b",(function(){return h}));n("IzEo");var a=n("bx4M"),i=(n("5NDa"),n("5rEg")),r=(n("+L6B"),n("2/Rp")),c=n("k1fw"),o=(n("y8nQ"),n("Vl3Y")),s=n("tJVT"),l=(n("iQDF"),n("+eQT")),d=n("q1tI"),u=n("wd/R"),p=n("SdJU"),f=n("Ydf/"),m=n("nKUr"),b=l["a"].RangePicker,j=function(e){var t=e.state,n=e.dispatch,l=t.filters.sqlparam,u=o["a"].useForm(),j=Object(s["a"])(u,1),h=j[0];Object(d["useEffect"])((function(){setTimeout((function(){h.setFieldsValue({startEndDate:[l.startDate.value,l.endDate.value]})}),0)}),[l]);var _=function(e){h.setFieldsValue({startEndDate:e})},O=function(){var e=Object(c["a"])({},t.filters.sqlparam),a=h.getFieldValue("startEndDate"),i=Object(s["a"])(a,2),r=i[0],o=i[1];e.startDate.value=r,e.endDate.value=o,n({type:f["M"],payload:{sqlparam:e}})},x=function(){var e=Object(c["a"])({},t.filters.sqlparam);e.startDate.value=null,e.endDate.value=null,n({type:f["M"],payload:{sqlparam:e}})},g=Object(m["jsx"])(o["a"],{form:h,size:"middle",children:Object(m["jsx"])(o["a"].Item,{label:"\u8d77\u6b62\u65e5\u671f",style:{padding:0,margin:0},children:Object(m["jsxs"])(i["a"].Group,{compact:!0,style:{display:"flex"},children:[Object(m["jsx"])(p["a"],{callback:_}),Object(m["jsx"])(o["a"].Item,{noStyle:!0,name:["startEndDate"],children:Object(m["jsx"])(b,{allowEmpty:[!1,!1],picker:"date",style:{flex:1},format:"YYYY-MM-DD"})}),Object(m["jsx"])(r["a"],{type:"primary",onClick:O,children:"\u67e5\u8be2"}),Object(m["jsx"])(r["a"],{onClick:x,children:"\u91cd\u7f6e"})]})})});return Object(m["jsx"])(a["a"],{bodyStyle:{padding:"16px 32px",marginBottom:"16px"},bordered:!1,children:Object(m["jsxs"])("div",{style:{display:"flex"},children:[g,Object(m["jsx"])("span",{style:{flex:1}})]})})},h=function(e){var t=[];return e&&Object.keys(e).forEach((function(n){var a=e[n].value;null!==a&&t.push({source:"\u67e5\u8be2\u53c2\u6570",fieldtitle:e[n].title,operator:e[n].operator,displaycond:Object(u["isMoment"])(a)?a.format("YYYY-MM-DD"):a})})),t};t["a"]=j},bsDN:function(e,t,n){e.exports={menu:"menu___3fMWW",right:"right___2CMz5",action:"action___3ut1O",search:"search___3FPts",account:"account___1r_Ku",avatar:"avatar___1Rx79",dark:"dark___1zu9O"}},bx7e:function(e,t,n){"use strict";n.r(t),n.d(t,"sysMenuData",(function(){return Ee})),n.d(t,"hasModuleInSysMenu",(function(){return Se})),n.d(t,"getTitleFromSysMenu",(function(){return Ce})),n.d(t,"getModuleUrlFormSysMenu",(function(){return Ie})),n.d(t,"footerRender",(function(){return De})),n.d(t,"setGlobalDrawerProps",(function(){return we})),n.d(t,"setGlobalModalProps",(function(){return Pe}));n("2qtc");var a,i,r=n("kLXV"),c=(n("bbsP"),n("/wGt")),o=n("oBTY"),s=n("tJVT"),l=n("k1fw"),d=(n("Q9mQ"),n("diRs")),u=(n("J+/v"),n("MoRW")),p=(n("+L6B"),n("2/Rp")),f=n("q1tI"),m=n.n(f),b=n("Hx5s"),j=n("55Ip"),h=n("9kvl"),_=n("vobg"),O=n("pW6+"),x=n("ses9"),g=n("y0hu"),v=n("cJ7L"),y=n("zErT"),E=n("/1V0"),S=(n("H1Ta"),n("eTk0")),C=(n("+BJd"),n("5Dmo"),n("3S7+")),I=n("Lyp1"),D=(n("T2oS"),n("W9HT")),k=(n("Telt"),n("Tckk")),w=(n("lUTK"),n("BvKs")),P=(n("/xke"),n("TeRw")),T=n("fWQN"),M=n("mtLc"),A=n("yKVA"),R=n("879j"),N=n("eFNv"),L=n("aIfO"),B=n("sy1d"),K=n("uZXw"),F=n("bsDN"),U=n.n(F),W=n("nKUr"),V=function(e){Object(A["a"])(n,e);var t=Object(R["a"])(n);function n(){var e;Object(T["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),e.onMenuClick=function(t){var n=t.key;if("logout"!==n)h["c"].push("/account/".concat(n));else{var a=e.props.dispatch;a&&a({type:"login/logout"})}},e}return Object(M["a"])(n,[{key:"componentDidMount",value:function(){var e=this.props.currentUser;e&&e.needResetPassword&&P["default"].warning({key:"notification_change_password",top:66,style:{width:"450px"},duration:null,message:"\u60a8\u7684\u5bc6\u7801\u9700\u8981\u4fee\u6539",description:"\u7531\u4e8e\u60a8\u7684\u5bc6\u7801\u662f\u521d\u59cb\u5bc6\u7801\u6216\u8005\u8fc7\u4e8e\u7b80\u5355\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u5e10\u53f7\u7684\u5b89\u5168\u6027\uff0c\u8bf7\u5728\u201c\u4e2a\u4eba\u8bbe\u7f6e--\u5b89\u5168\u8bbe\u7f6e--\u4fee\u6539\u201d\u4e2d\u8fdb\u884c\u5bc6\u7801\u7684\u4fee\u6539\uff0c\u5bc6\u7801\u7b49\u7ea7\u8981\u6c42\u4e3a\u4e2d\u4ee5\u4e0a\u3002",btn:Object(W["jsx"])(p["a"],{type:"primary",onClick:function(){P["default"].close("notification_change_password"),h["c"].push({pathname:"/account/settings",state:{type:"security"}})},children:"\u7acb\u5373\u53bb\u4fee\u6539"})})}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=void 0===t?{username:""}:t,a=e.menu,i=void 0===a||a,r=Object(W["jsxs"])(w["a"],{className:U.a.menu,selectedKeys:[],onClick:this.onMenuClick,children:[i&&Object(W["jsxs"])(w["a"].Item,{children:[Object(W["jsx"])(v["a"],{}),"\u4e2a\u4eba\u4e2d\u5fc3"]},"center"),i&&Object(W["jsxs"])(w["a"].Item,{children:[Object(W["jsx"])(N["a"],{}),"\u4e2a\u4eba\u8bbe\u7f6e"]},"settings"),i&&Object(W["jsx"])(w["a"].Divider,{}),Object(W["jsxs"])(w["a"].Item,{children:[Object(W["jsx"])(L["a"],{}),"\u9000\u51fa\u767b\u5f55"]},"logout")]});return n&&n.username?Object(W["jsx"])(K["a"],{overlay:r,children:Object(W["jsxs"])("span",{className:"".concat(U.a.action," ").concat(U.a.account),children:[Object(W["jsx"])(k["a"],{size:"small",className:U.a.avatar,src:"".concat(B["API_HEAD"],"/platform/systemframe/getuserfavicon.do"),alt:"avatar"}),Object(W["jsx"])("span",{className:U.a.name,children:n.username})]})}):Object(W["jsx"])(D["a"],{size:"small",style:{marginLeft:8,marginRight:8}})}}]),n}(m.a.Component),q=Object(h["a"])((function(e){var t=e.user;return{currentUser:t.currentUser}}))(V),z=(n("OaEy"),n("2fM7")),G=n("jrin"),J=n("PpiC"),H=n("l+S1"),Y=n("yUgw"),Z=n("0ioL"),Q=n("TSYQ"),$=n.n(Q),X=n("j5Qg"),ee=n.n(X),te=function(e){var t=e.className,n=e.defaultValue,a=e.onVisibleChange,i=e.onFocus,r=e.placeholder,c=(e.open,e.defaultOpen),o=Object(J["a"])(e,["className","defaultValue","onVisibleChange","onFocus","placeholder","open","defaultOpen"]),l=Object(f["useRef"])(null),d=Object(Y["a"])(n,{value:e.value,onChange:e.onChange}),u=Object(s["a"])(d,2),p=u[0],m=u[1],b=Object(Y["a"])(c||!1,{value:e.open,onChange:a}),j=Object(s["a"])(b,2),h=j[0],_=j[1],O=$()(ee.a.input,Object(G["a"])({},ee.a.show,h));return Object(W["jsxs"])("div",{className:$()(t,ee.a.headerSearch),onClick:function(){_(!0),h&&l.current&&l.current.focus()},onTransitionEnd:function(e){var t=e.propertyName;"width"!==t||h||a&&a(h)},children:[Object(W["jsx"])(H["a"],{style:{cursor:"pointer"}},"Icon"),Object(W["jsx"])(z["a"],{className:O,showSearch:!0,allowClear:!0,value:p,style:{height:28,marginTop:-6},options:o.options,onChange:m,onFocus:i,filterOption:function(e,t){return!!Z["a"].match(t.label,e)},ref:l,defaultValue:n,"aria-label":r,placeholder:r,onBlur:function(){_(!1)}},"AutoComplete")]})},ne=te,ae=n("6ZR6"),ie=(n("qVdP"),n("jsC+")),re=(n("Awhp"),n("KrTs")),ce=(n("BoS7"),n("Sdc0")),oe=(n("miYZ"),n("tsqr")),se=n("kFgV"),le=n("/MKj"),de=n("od3r"),ue=n.n(de),pe=function(e){var t=e.dataRole,n=e.dispatch,a=Object(f["useState"])("true"===localStorage.getItem("roleChangeRefreshImmediately")),i=Object(s["a"])(a,2),r=i[0],c=i[1],o=function(e){n({type:"modules/fetchData",payload:{moduleName:e,forceUpdate:!0}})},l=function(){var e=new Set;t&&t.forEach((function(t){t.checked&&t.moduleNames.forEach((function(t){return e.add(t)}))})),e.forEach((function(e){return o(e)}))},d=function(e){e.moduleNames.forEach((function(e){return o(e)}))},u=function(e,t,a){t.stopPropagation(),Object(B["default"])("".concat(B["API_HEAD"],"/platform/userfavourite/toggledatarole.do"),{params:{roleid:a.roleId,checked:e}}).then((function(t){if(t.success){if(r)return void window.location.reload();n({type:"user/dataRoleCheckChanged",payload:{roleId:a.roleId,checked:e}}),d(a),oe["default"].warn("\u5f53\u524d\u6570\u636e\u6743\u9650\u5df2\u6539\u53d8\uff0c\u8bf7\u5237\u65b0\u5f53\u524d\u6570\u636e\u6216\u5237\u65b0\u7f51\u9875\uff01")}}))},p=function(){if(t){var e=t.map((function(e){return{roleId:e.roleId,checked:e.checked}}));Object(B["default"])("".concat(B["API_HEAD"],"/platform/userfavourite/updatedefaultdatarole.do"),{params:{rolestates:JSON.stringify(e)}}).then((function(e){e.success&&oe["default"].success("\u5df2\u5c06\u5f53\u524d\u6570\u636e\u6743\u9650\u7684\u9009\u62e9\u72b6\u6001\u4fdd\u5b58\u4e3a\u9ed8\u8ba4\u503c\uff01")}))}},m=function(){Object(B["default"])("".concat(B["API_HEAD"],"/platform/userfavourite/resetdefaultdatarole.do"),{params:{}}).then((function(e){e.success&&(n({type:"user/dataRoleCheckReset"}),l(),oe["default"].success("\u5df2\u5c06\u6570\u636e\u6743\u9650\u7684\u9ed8\u8ba4\u72b6\u6001\u8bbe\u7f6e\u4e3a\u7cfb\u7edf\u9ed8\u8ba4\u503c\uff01"))}))},b=Object(W["jsxs"])(w["a"],{children:[Object(W["jsx"])(w["a"].ItemGroup,{title:"\u53ef\u4ee5\u9009\u62e9\u7684\u6570\u636e\u6743\u9650",children:t?t.map((function(e){return Object(W["jsxs"])(w["a"].Item,{children:[Object(W["jsx"])("span",{style:{marginRight:"24px"},children:e.roleName}),Object(W["jsx"])(ce["a"],{checked:e.checked,onChange:function(t,n){return u(t,n,e)},style:{float:"right"}})]},e.roleId)})):null}),Object(W["jsx"])(w["a"].Divider,{}),Object(W["jsx"])(w["a"].Item,{onClick:p,children:"\u4fdd\u5b58\u4e3a\u6211\u7684\u9ed8\u8ba4\u8bbe\u7f6e"},"saveToDefault"),Object(W["jsx"])(w["a"].Item,{onClick:m,children:"\u91cd\u7f6e\u4e3a\u7cfb\u7edf\u9ed8\u8ba4\u9009\u9879"},"resetToDefault"),Object(W["jsx"])(w["a"].Divider,{}),Object(W["jsxs"])(w["a"].Item,{children:[Object(W["jsx"])("span",{style:{marginRight:"24px"},children:"\u6570\u636e\u6743\u9650\u66f4\u6539\u540e\u7acb\u5373\u5237\u65b0\u7f51\u9875"}),Object(W["jsx"])(ce["a"],{checked:r,onChange:function(e,t){t.stopPropagation(),c(e),localStorage.setItem("roleChangeRefreshImmediately",e?"true":"false")},style:{float:"right"}})]},"refreshimmediately")]}),j=$()(U.a.action,ue.a.noticeButton),h=Object(W["jsx"])(se["a"],{className:ue.a.icon}),_=Object(W["jsx"])("span",{className:$()(j),children:Object(W["jsx"])(re["a"],{count:null===t||void 0===t?void 0:t.filter((function(e){return e.checked})).length,style:{boxShadow:"none",background:"green"},className:ue.a.badge,children:h})});return t?Object(W["jsx"])(ie["a"],{placement:"bottomRight",overlay:b,trigger:["click"],children:_}):null},fe=Object(le["c"])((function(e){var t,n=e.user;return{user:n,dataRole:null===(t=n.currentUser)||void 0===t?void 0:t.canselectdatarole}}))(pe),me=function(e){var t=e.theme,n=e.layout,a=Object(f["useState"])([]),i=Object(s["a"])(a,2),r=i[0],c=i[1],o=U.a.right;return("dark"===t&&"top"===n||"mix"===n)&&(o="".concat(U.a.right,"  ").concat(U.a.dark)),Object(W["jsxs"])("div",{className:o,children:[Object(W["jsx"])(ne,{className:"".concat(U.a.action," ").concat(U.a.search),placeholder:"\u5e94\u7528\u5185\u641c\u7d22",defaultValue:void 0,options:r,onFocus:function(){r.length||c(Object.keys(Ee).map((function(e){return{label:Ee[e].title,value:e}})))},onChange:function(e){if(e){var t=Ie(e);h["c"].push({pathname:t})}}}),Object(W["jsx"])(C["a"],{title:"\u4f7f\u7528\u6587\u6863",children:Object(W["jsx"])("a",{style:{color:"inherit"},href:"#",rel:"noopener noreferrer",className:U.a.action,children:Object(W["jsx"])(I["a"],{})})}),Object(W["jsx"])(fe,{}),Object(W["jsx"])(ae["a"],{}),Object(W["jsx"])(q,{}),!1]})},be=Object(h["a"])((function(e){var t=e.settings;return{theme:t.navTheme,layout:t.layout}}))(me),je=n("79+z"),he=n("3Art"),_e=n("tW+H"),Oe=n("aYag"),xe=n("WTWM"),ge=n("7fyL"),ve=n.n(ge),ye=Object(W["jsx"])(u["a"],{status:403,title:"403",subTitle:"Sorry, you are not authorized to access this page.",extra:Object(W["jsx"])(p["a"],{type:"primary",children:Object(W["jsx"])(j["a"],{to:"/user/login",children:"Go Login"})})}),Ee={},Se=function(e){return!!Ee[e]},Ce=function(e){return Ee[e]?Ee[e].title:"\u672a\u5b9a\u4e49"},Ie=function(e){return Ee[e]?Ee[e].path:"/module/".concat(e)},De=function(e){var t=e.systemInfo,n=t.company,a=t.systeminfo,i=e.isLogin,r=n.servicetelnumber,c=Object(W["jsxs"])("a",{className:ve.a.serviceman,target:"_blank",rel:"noopener noreferrer",children:[Object(W["jsx"])(_["a"],{className:ve.a.icon}),n.companyname]}),o=Object(W["jsx"])("span",{className:ve.a.icon,children:"\u670d\u52a1\u5355\u4f4d:".concat(n.servicedepartment||"")});n.servicehomepage&&(o=Object(W["jsx"])("a",{className:ve.a.homepage,href:n.servicehomepage,target:"_blank",rel:"noopener noreferrer",children:o||""}));var s=Object(W["jsxs"])(W["Fragment"],{children:[r?Object(W["jsxs"])("div",{children:[Object(W["jsx"])(O["a"],{rotate:180,style:{marginRight:"10px"}}),r]}):null,n.serviceqq?Object(W["jsxs"])("div",{children:[Object(W["jsx"])(x["a"],{style:{marginRight:"10px"}}),n.serviceqq]}):null,n.serviceemail?Object(W["jsxs"])("div",{children:[Object(W["jsx"])(g["a"],{style:{marginRight:"10px"}}),n.serviceemail]}):null]});return Object(W["jsx"])(W["Fragment"],{children:Object(W["jsxs"])("div",{className:ve.a.footer,children:[i?Object(W["jsx"])(Oe["b"],{id:"00",moduleInfo:Object(xe["x"])("FCompany"),dispatch:function(){},children:c}):c,o,n.servicemen?Object(W["jsx"])(d["a"],{trigger:"click",title:Object(W["jsxs"])(W["Fragment"],{children:["\u670d\u52a1\u4eba\u5458\uff1a",n.servicemen]}),content:s,children:Object(W["jsxs"])("a",{className:ve.a.serviceman,target:"_blank",rel:"noopener noreferrer",children:[Object(W["jsx"])(v["a"],{}),n.servicemen,r?Object(W["jsxs"])("span",{children:[Object(W["jsx"])(O["a"],{rotate:180,style:{marginRight:"2px",marginLeft:"10px"}}),r]}):""]})}):"",Object(W["jsxs"])("div",{className:ve.a.copyright,children:[" ","Copyright ",Object(W["jsx"])(y["a"],{})," ",a.copyrightinfo," "]})]})})},ke=function e(t,n,a){if("-"===t.text)return null;if(!t.visible)return null;var i={path:"".concat(n,"/").concat(t.engname||t.text),name:t.text,title:t.text,icon:t.iconCls};if(t.objectid&&(t.isdatamining?(i=Object(l["a"])(Object(l["a"])({},i),{},{path:"".concat(n,"/datamining/").concat(t.objectid),moduleName:t.objectid}),_e["dataminingList"].find((function(e){return e.moduleName===t.objectid}))||_e["dataminingList"].push({moduleName:t.objectid,title:t.text})):i=Object(l["a"])(Object(l["a"])({},i),{},{path:"".concat(n,"/module/").concat(t.objectid),moduleName:t.objectid}),t.isdatamining||(Ee[t.objectid]=i)),n?a&&(i.icon?i.icon=Object(je["s"])(i.icon):i.icon=je["a"]):i.icon?i.icon=Object(je["s"])(i.icon):i.icon=Object(je["s"])("fa fa-flag-o"),t.children&&t.children.length>0){var r=!1;t.children.forEach((function(e){r=r||!!e.iconCls})),i.children=t.children.map((function(t){return e(t,i.path,r)}))}return i},we=function(e){a(e)},Pe=function(e){i(e)},Te=null,Me=function(e){var t=e.dispatch,n=e.children,d=e.settings,u=e.location,p=void 0===u?{pathname:"/"}:u,m=e.systemInfo,_=Object(f["useState"])({}),O=Object(s["a"])(_,2),x=O[0],g=O[1],y=Object(f["useState"])({}),C=Object(s["a"])(y,2),I=C[0],D=C[1];Object(f["useEffect"])((function(){a=function(e){g(Object(l["a"])({zIndex:1e6},e))},i=function(e){D(Object(l["a"])({zIndex:999990},e))},t&&(t({type:"user/fetchCurrent"}),t({type:"settings/getSetting"}),m&&!m.company.companyname&&t({type:"systemInfo/fetch",payload:{dispatch:t}}))}),[]);var k=function(e){t&&t({type:"global/changeLayoutCollapsed",payload:e})},w=Object(je["m"])(e.route.routes,p.pathname||"/")||{authority:void 0},P=Object(h["g"])(),T=P.formatMessage,M=function(){var e=Object(he["a"])().map((function(e){return ke(e,"",!0)}))||[];return e.unshift({path:"/dashboard",name:T({id:"menu.dashboard"}),icon:Object(W["jsx"])(E["a"],{}),children:[{name:T({id:"menu.dashboard.analysis"}),path:"/dashboard/analysis"},{name:T({id:"menu.dashboard.datamining"}),path:"/dashboard/datamining"},{name:T({id:"menu.dashboard.workplace"}),path:"/dashboard/workplace"}]}),e.push({name:T({id:"menu.account"}),icon:Object(W["jsx"])(v["a"],{}),path:"/account",children:[{name:T({id:"menu.account.center"}),path:"/account/center"},{name:T({id:"menu.account.settings"}),path:"/account/settings"}]}),e};return Te||(Te=M()),Object(W["jsxs"])(b["b"],Object(l["a"])(Object(l["a"])(Object(l["a"])({logo:"".concat(B["API_HEAD"],"/login/systemfavicon.do"),onCollapse:k,menuItemRender:function(e,t){return e.isUrl||e.children||!e.path?t:Object(W["jsx"])(j["a"],{to:e.path,children:t})},breadcrumbRender:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[{path:"/",breadcrumbName:T({id:"menu.home"})}].concat(Object(o["a"])(e))},itemRender:function(e,t,n,a){var i=0===n.indexOf(e);return i?Object(W["jsx"])(j["a"],{to:a.join("/"),children:e.breadcrumbName}):Object(W["jsx"])("span",{children:e.breadcrumbName})},footerRender:De,menuDataRender:function(){return Te},rightContentRender:function(){return Object(W["jsx"])(be,{})}},e),d),{},{children:[Object(W["jsx"])(S["a"],{authority:w.authority,noMatch:ye,children:n}),Object(W["jsx"])(c["a"],Object(l["a"])({},x)),Object(W["jsx"])(r["a"],Object(l["a"])({},I))]}))};t["default"]=Object(h["a"])((function(e){var t,n=e.global,a=e.settings,i=e.systemInfo,r=e.user;return Object(l["a"])(Object(l["a"])({collapsed:n.collapsed,settings:a},i),{},{isLogin:!(null===(t=r.currentUser)||void 0===t||!t.usercode)})}))(Me)},"c/0K":function(e,t,n){"use strict";var a=n("emvA").getBusinessObject,i=n("emvA").is,r=n("GTJ0");e.exports=function(e,t,n,c){i(t,"activiti:AsyncCapable")&&(e.entries=e.entries.concat(r(t,n,{getBusinessObject:a},c)))}},cRTa:function(e,t,n){"use strict";n.d(t,"a",(function(){return G}));var a=n("79+z"),i=n("5Zmo"),r=n("O7YW"),c=n("eVqf"),o=n("rMKe"),s=n.n(o),l=(n("qVdP"),n("jsC+")),d=(n("5Dmo"),n("3S7+")),u=(n("miYZ"),n("tsqr")),p=(n("y8nQ"),n("Vl3Y")),f=(n("5NDa"),n("5rEg")),m=(n("2qtc"),n("kLXV")),b=(n("lUTK"),n("BvKs")),j=n("oBTY"),h=n("q1tI"),_=n("vuKU"),O=n("93gt"),x=n("rNa/"),g=n("Ajkd"),v=n("hbnh"),y=n("ioDI"),E=n("k5nK"),S=n("rdt+"),C=n("aYag"),I=n("WTWM"),D=n("nq7E"),k=n("O+pJ"),w=n("aiD7"),P=n("Ydf/"),T=n("3Mvv"),M=n.n(T),A=n("7K0u"),R=n("nKUr"),N=function(e){var t=e.value,n=e.record,i=Object(h["useContext"])(D["DataminingContext"]),r=i.state,o=i.dispatch,s=r.selectedRowKeys.length,T=r.schemeState.rowGroup,N=Object(R["jsxs"])(b["a"],{onClick:function(e){var t=e.domEvent;t.stopPropagation()},children:[Object(R["jsx"])(b["a"].SubMenu,{icon:Object(R["jsx"])(_["a"],{}),title:"".concat(0===s?"\u5f53\u524d\u884c":"\u9009\u4e2d\u7684 ".concat(s," \u884c"),"\u6309\u5206\u7ec4\u5c55\u5f00"),children:Object(w["a"])(r.expandGroupFieldsTree||[],(function(e){var t=[];s?t.push.apply(t,Object(j["a"])(r.selectedRowKeys.map((function(e){return Object(c["m"])(r.schemeState.dataSource,e,P["db"])})))):t.push(n),Object(k["f"])({state:r,dispatch:o,records:t,group:e})}))},"expandselected"),Object(R["jsx"])(b["a"].SubMenu,{title:"".concat(Object(c["e"])(r.schemeState.dataSource).length,"\u4e2a\u672b\u7ea7\u8282\u70b9\u6309\u5206\u7ec4\u5c55\u5f00"),icon:Object(R["jsx"])(O["a"],{}),children:Object(w["a"])(r.expandGroupFieldsTree||[],(function(e){Object(k["f"])({state:r,dispatch:o,group:e,expandallleaf:!0,records:Object(c["e"])(r.schemeState.dataSource)})}))},"expandallleaf"),Object(R["jsx"])(b["a"].Divider,{}),Object(R["jsx"])(b["a"].Item,{icon:Object(R["jsx"])(x["a"],{}),disabled:s<=1,onClick:function(){Object(k["b"])(r,o,!1)},children:"\u5408\u5e76\u9009\u4e2d\u884c"},"combine"),Object(R["jsx"])(b["a"].Item,{icon:Object(R["jsx"])(g["a"],{rotate:180}),disabled:s<=1,onClick:function(){Object(k["b"])(r,o,!0)},children:"\u5408\u5e76\u540e\u52a0\u5165\u539f\u9009\u4e2d\u884c"},"combineadd"),Object(R["jsx"])(b["a"].Item,{icon:a["a"],disabled:s<=0,onClick:function(){Object(k["a"])(r,o,!1)},children:"\u5408\u5e76\u975e\u9009\u4e2d\u884c"},"combineother"),Object(R["jsx"])(b["a"].Item,{icon:a["a"],disabled:s<=0,onClick:function(){Object(k["a"])(r,o,!0)},children:"\u5408\u5e76\u540e\u52a0\u5165\u539f\u975e\u9009\u4e2d\u884c"},"combineothradd"),Object(R["jsx"])(b["a"].Item,{icon:a["a"],onClick:function(){var e=t;m["a"].confirm({title:"\u8bf7\u8f93\u5165\u5206\u7ec4\u63cf\u8ff0",icon:null,content:Object(R["jsx"])(p["a"],{autoComplete:"off",children:Object(R["jsx"])(f["a"],{name:"text",defaultValue:t,maxLength:100,onChange:function(t){e=t.target.value}})}),onOk:function(){Object(a["d"])(n,{text:e}),o({type:P["o"],payload:{dataSource:Object(j["a"])(r.schemeState.dataSource),expandPaths:[{type:"edittext",conditionpath:n[P["db"]],text:e}]}})}})},children:"\u4fee\u6539\u5f53\u524d\u884c\u5206\u7ec4\u63cf\u8ff0"},"edittext"),Object(R["jsx"])(b["a"].Divider,{}),Object(R["jsx"])(b["a"].Item,{icon:Object(R["jsx"])(v["a"],{}),disabled:!r.schemeState.dataSource[0].children,onClick:function(){return Object(k["c"])({state:r,dispatch:o,deletedRecord:s?null:n})},children:s?"\u5220\u9664\u9009\u4e2d\u884c":"\u5220\u9664\u5f53\u524d\u884c"},"clearrow"),Object(R["jsxs"])(b["a"].Item,{icon:Object(R["jsx"])(y["a"],{}),disabled:0===s&&!n[P["R"]],onClick:function(){return Object(k["d"])({state:r,dispatch:o,deletedRecord:s?null:n})},children:[s?"\u5220\u9664\u9009\u4e2d\u884c":"\u5220\u9664\u5f53\u524d\u884c","\u7684\u5b50\u8282\u70b9"]},"clearrowchildren"),Object(R["jsx"])(b["a"].Divider,{}),s?Object(R["jsx"])(b["a"].Item,{icon:a["a"],onClick:function(){o({type:P["J"],payload:{selectedRowKeys:[]}})},children:"\u53d6\u6d88\u6240\u6709\u9009\u4e2d\u8bb0\u5f55"},"clearallselected"):null,Object(R["jsxs"])(b["a"].Item,{icon:Object(R["jsx"])(E["a"],{}),disabled:0===T.length,onClick:function(){var e=T[T.length-1],t=A["b"][e.type];u["default"].info("\u6700\u540e\u4e00\u6b21\u884c\u64cd\u4f5c:".concat(t," ").concat(e[P["hb"]]||""," ").concat(e.conditiontext||e.text||""," \u5df2\u64a4\u6d88\uff01")),o({type:P["q"],payload:{deleteFormIndex:T.length-1}})},children:["\u64a4\u6d88\u884c\u64cd\u4f5c ",0===T.length?"":A["b"][T[T.length-1].type]]},"undo"),Object(R["jsx"])(b["a"].Item,{icon:Object(R["jsx"])(S["a"],{}),disabled:!r.schemeState.dataSource[0].children,onClick:function(){o({type:P["c"],payload:{}})},children:"\u6e05\u9664\u6240\u6709\u884c\u5c55\u5f00\u6570\u636e"},"clearallrow")]});return Object(R["jsxs"])(R["Fragment"],{children:[Object(R["jsx"])(l["a"],{overlay:N,trigger:["contextMenu"],children:Object(R["jsx"])("div",{className:M.a.manytoonefield,style:{flex:1,transition:"all 1s",padding:"8px 0px",margin:"-8px 0px"},children:Object(R["jsx"])("span",{className:M.a.manytoonefieldvalue,style:{marginRight:n[P["db"]]===P["cb"]?"90px":""},children:"string"===typeof t&&t.length>30?Object(R["jsx"])(d["a"],{title:t,children:"".concat(t.substr(0,28),"...")}):t})})}),n.moduleName?Object(R["jsx"])("span",{className:M.a.manytoonefieldicon,children:Object(R["jsx"])(C["b"],{id:n.value,moduleInfo:Object(I["x"])(n.moduleName),dispatch:function(){}})}):null," "]})},L=function(e,t){return Object(R["jsx"])(N,{value:e,record:t},t[P["db"]])},B=n("TP9V"),K=n("jE+T"),F="\u5206 \u7ec4 \u9879 \u76ee",U=function e(t){return t.forEach((function(t){var n=t;n.columns&&(n.children=n.columns,delete n.columns,e(n.children))})),t},W=function(e,t){var n=e[P["gb"]]||e.text,a=e.unittext,i=e.aggregate,r=e.ismonetary;n||(n="\u672a\u5b9a\u4e49");var c=n.replace(new RegExp("--","gm"),"<br/>");if("sum"===i||"avg"===i||"max"===i||"min"===i){var o="";if(r&&"columntitle"===t.monetaryPosition&&(o="\u4e2a"===t.monetary.unittext?"":t.monetary.unittext),o||a){var s=c.split("<br/>");s[s.length-1].length>2&&(c+="<br/>"),c+='<span style="color:green;">('.concat(o).concat(a||"",")</span>")}}return c},V=function(e,t){var n=e,o=n.fieldtype;"string"===typeof o&&(o=o.toLowerCase()),n.dataIndex=Object(c["h"])(n.aggregatefieldname,n.condition),n.onCell=function(e){return{record:e,column:n,isDataCell:!0}},n.sorter=!0,n.sortDirections=["ascend","descend","ascend"],n.sortOrder=Object(r["b"])(t.schemeState.sorts,n.dataIndex);var s=n.aggregatefieldname.substr(0,n.aggregatefieldname.indexOf("."));n.aggregateType=s,n.text&&(n[P["gb"]]=Object(c["c"])(n.text),n.menuText=n.text.replace(new RegExp("--","gm"),""),n.title=Object(c["c"])(n.text.replace(new RegExp("--","gm"),"<br/>"))),"wavg"===s?Object(a["d"])(n,{align:"center",render:function(e,t){return Object(i["o"])(e,t["".concat(n.dataIndex,"1")],t["".concat(n.dataIndex,"2")])},minWidth:60,filter:"number",width:110}):"count"===s?(delete n.ismonetary,delete n.unittext,Object(a["d"])(n,{align:"right",tdCls:"intcolor",format:"#",render:i["h"],filter:"number"})):"max"!==s&&"min"!==s||"date"!==o&&"datetime"!==o&&"timestamp"!==o?"sum"!==s&&"avg"!==s&&"max"!==s&&"min"!==s||(Object(a["d"])(n,{align:"right",filter:"number"}),n.fieldtype&&"integer"===n.fieldtype.toLowerCase()&&Object(a["d"])(n,{render:function(e){return Object(i["h"])(Math.round(e||0))}}),n.ismonetary&&(n.render=function(e,n,a){return Object(i["k"])(e,n,a,t,void 0)})):Object(a["d"])(n,{align:"center",xtype:"datecolumn",render:"date"===o?i["b"]:i["c"]})},q=function e(t,n,a){var i=a;t.forEach((function(t){var r=t;r[P["bb"]]=n,r[P["db"]]=n+(n&&"-")+i,i+=1,r.children&&e(r.children,r[P["db"]],a)}))},z=function e(t,n){t.forEach((function(t){var a=t;a.isCategory||a.onHeaderCell||(a.onHeaderCell=function(e){return{column:e}}),a.children?a.style="background-color:#f6f5ec;":a.style="background-color:#fffef9;",a.isCategory||(a.children?(delete a.width,e(a.children,n),a.className=s.a.parentcolumnheader,a.title=Object(R["jsx"])("span",{dangerouslySetInnerHTML:{__html:Object(c["c"])(a.text)}})):(a.className||(a.className=s.a.leafcolumnheader),a.title=Object(R["jsx"])("span",{className:s.a.columnheader,dangerouslySetInnerHTML:{__html:W(a,n)}})))}))},G=function(e,t,n,a,i,c){var o=[{fixed:"left",isCategory:!0,text:F,title:F,dataIndex:"text",key:"text",className:s.a.categorycolumn,render:c?void 0:L,sorter:!0,sortDirections:["ascend","descend","ascend"],sortOrder:Object(r["b"])(a.schemeState.sorts,"text")||Object(r["b"])(a.schemeState.sorts,"value"),rowid:"category",onHeaderCell:function(){return{isCategoryField:!0}},onCell:function(){return{isCategoryField:!0}}}];if(t){var l=U(JSON.parse(JSON.stringify(e))),d=Object(K["h"])(l);return d.forEach((function(e){var t=e;V(t,a),t.isTotalColumn=!0,a.currSetting.fieldGroupFixedLeft&&(t.fixed="left")})),o=o.concat(l),z(o,a),o}var u=Object(K["h"])(JSON.parse(JSON.stringify(e))),p=101;u.forEach((function(e){var t=e;t[P["db"]]="field-".concat(p),p+=1}));var f=Object(K["h"])(u);f.forEach((function(e){var t=e;V(t,a),t.isTotalColumn=!0,a.currSetting.fieldGroupFixedLeft&&(t.fixed="left")})),o=o.concat(u),q(n,"",201);var m=JSON.parse(JSON.stringify(n)),b=Object(K["h"])(m);return 1===f.length?(b.forEach((function(e){var t=e;"\u603b\u8ba1"===t.text&&(t.text=u[0].text),t.title=t.text,t.aggregatefieldname=f[0].aggregatefieldname,t.aggregate=f[0].aggregate,t.unitText=f[0].unitText,t.ismonetary=f[0].ismonetary,t.fieldname=f[0].fieldname,t.fieldtype=f[0].fieldtype,V(t,a)})),o=o.concat(m)):(b.forEach((function(e){var t=e,n=JSON.parse(JSON.stringify(u)).filter((function(e){return!e.hiddenInColumnGroup})),i=Object(K["h"])(n);i.forEach((function(e){var n=e;n.condition=t.condition,n[P["db"]]="".concat(t[P["db"]],"--").concat(n[P["db"]]),V(n,a)})),t.children=n})),o=o.concat(m)),z(o,a),Object(B["a"])(o,i),o}},cTrX:function(e,t,n){"use strict";n("g9YV");var a=n("wCAj"),i=(n("5Dmo"),n("3S7+")),r=n("tJVT"),c=n("q1tI"),o=n("RVw9"),s=n("79+z"),l=n("RfA7"),d=n("WTWM"),u=n("3Mvv"),p=n.n(u),f=n("5Zmo"),m=n("NB5u"),b=n("nKUr"),j=function(e){var t=e.moduleName,n=e.parentid,u=e.childModuleName,j=e.fieldahead,h=e.dispatch,_=10,O=Object(c["useState"])([]),x=Object(r["a"])(O,2),g=x[0],v=x[1],y=Object(c["useState"])(0),E=Object(r["a"])(y,2),S=E[0],C=E[1],I=Object(c["useState"])(1),D=Object(r["a"])(I,2),k=D[0],w=D[1],P=Object(c["useState"])(!0),T=Object(r["a"])(P,2),M=T[0],A=T[1];Object(c["useEffect"])((function(){A(!0),Object(l["f"])({objectid:t,parentid:n,childModuleName:u,fieldahead:j,limit:_,page:k,start:(k-1)*_}).then((function(e){A(!1);var t=1;e.msg&&e.msg.forEach((function(e){var n=e;n[m["g"]]=t+(k-1)*_,t+=1})),C(e.tag),v(e.msg||[])}))}),[k]);var R=Object(d["x"])(u),N=Object(d["r"])(u,"onetomanytooltip"),L=N.details.map((function(e){var t=Object(d["n"])(e.fieldid,R),n=t.fieldtype.toLowerCase(),a="double"===n||"float"===n||"money"===n,i="integer"===n,r="percent"===n,c="date"===n||"datetime"===n||"timestamp"===n,o={wordBreak:"keep-all",whiteSpace:"nowrap"};return(a||c||i||r)&&Object(s["d"])(o,{display:"block"}),{title:Object(b["jsx"])("span",{style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline-block",width:"100%",textAlign:"center"},children:Object(b["jsxs"])(b["Fragment"],{children:[t.fieldtitle," ",t.unittext?Object(b["jsxs"])(b["Fragment"],{children:[Object(b["jsx"])("br",{}),Object(b["jsxs"])("span",{style:{color:"green"},children:["(",t.unittext,")"]})]}):null]})}),dataIndex:t.isManyToOne||t.isOneToOne?t.manyToOneInfo.nameField:t.fDictionaryid?"".concat(t.fieldname,"_dictname"):t.fieldname,key:t.fieldname,align:a?"right":"left",render:function(e,c,s){return Object(b["jsx"])("span",{style:o,children:R.namefield===t.fieldname?Object(f["l"])(e,c,s,{moduleInfo:R,dispatch:h,field:{}}):"boolean"===n?Object(f["a"])(e):"date"===n?Object(f["b"])(e):"datetime"===n||"timestamp"===n?Object(f["c"])(e,c,s,!0):a?Object(f["e"])(e,t.digitslen):i?Object(f["h"])(e):r?Object(f["n"])(e):e})}}}));return L=[{title:Object(b["jsx"])(i["a"],{title:"\u8bb0\u5f55\u987a\u5e8f\u53f7",children:Object(b["jsx"])(o["a"],{})}),dataIndex:m["g"],key:m["g"],className:p.a.numberalignright}].concat(L),Object(b["jsxs"])(b["Fragment"],{children:[" ",Object(b["jsx"])(a["a"],{bordered:!0,loading:M,dataSource:g,columns:L,size:"small",pagination:{pageSize:_,current:k,total:S,showSizeChanger:!1,showLessItems:!0,hideOnSinglePage:!0,onChange:function(e){w(e)},showTotal:function(e,t){return Object(b["jsx"])("span",{style:{float:"right"},children:"\u5171 ".concat(e," \u6761")})}}})]})};t["a"]=j},eVqf:function(e,t,n){"use strict";n.d(t,"p",(function(){return m})),n.d(t,"j",(function(){return b})),n.d(t,"k",(function(){return j})),n.d(t,"h",(function(){return h})),n.d(t,"a",(function(){return _})),n.d(t,"i",(function(){return O})),n.d(t,"c",(function(){return g})),n.d(t,"m",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"d",(function(){return E})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return C})),n.d(t,"q",(function(){return I})),n.d(t,"o",(function(){return D})),n.d(t,"n",(function(){return k})),n.d(t,"l",(function(){return w})),n.d(t,"b",(function(){return R}));var a=n("oBTY"),i=n("wd/R"),r=n.n(i),c=n("sy1d"),o=n("79+z"),s=n("c6dC"),l=n("WTWM"),d=n("Ydf/"),u=n("lYao"),p=n("cRTa"),f=n("bmo+"),m=function(e){var t=e.dispatch,n=e.fetchLoading;t({type:d["s"],payload:{fetchLoading:n}})},b=function(){return{showdetail:"no",expandRowAddGroupName:"no",expandColAddGroupName:"yes",expandColAddFilter:"no",expandMaxCol:12,expandMaxRow:0,expandMaxLevel:0,autoHiddenZeroCol:"yes",refreshMode:"expandpath",expandMultiGroup:"no",expandItemDirection:"asc",expandItemMode:"text",addCountSumPercent:"yes",addNumberTip:"yes",leafColumnCharSize:6}},j=function(e,t){var n;"undefined"!==e&&(n=Object(l["x"])(e));var a={moduleName:e,defaultSchemeid:t,fromCache:!1,schemes:[],refreshAllCount:-1,refreshFilterDataSourceCount:0,schemeChanged:!1,selectedRowKeys:[],expandedRowKeys:[d["cb"]],fetchLoading:!1,monetary:Object(s["a"])(Object(o["r"])(e)),monetaryPosition:Object(o["q"])(e),currentScheme:{schemeid:"",text:"",title:"",savepath:!0},schemeState:{columnGroup:[],dataSource:[],fieldGroup:[{aggregate:"count",aggregatefieldname:"count.*",fieldname:"*",fieldtype:"String",leaf:!0,text:"\u8bb0\u5f55\u6570",rowid:"field-101"}],isMultFieldGroup:!1,rowGroup:[],setting:b(),sorts:[{property:void 0,direction:"ASC"}]},filters:{navigatefilters:[],viewscheme:{title:void 0,viewschemeid:void 0},userfilter:[],sqlparam:n&&n.moduleLimit&&n.moduleLimit.hassqlparam?Object(l["A"])(n):null},filterDataSource:[],navigates:[],currSetting:{fieldGroupFixedLeft:!1,navigate:{visible:!1,activeKey:""},groupRegionVisible:!1,filtersRegionVisible:!1,userFilterRegionVisible:!1,userFilterRestNumber:"undefined"!==e?Object(l["p"])(n):-1,userFilterRestHidden:"undefined"!==e&&Object(l["o"])(n)},exportSetting:{colorless:!1,disablerowgroup:!1,unittextalone:!1,pagesize:"pageautofit",autofitwidth:!0,scale:100,disablecollapsed:!1}};return a},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=e+(t||"");return"jf".concat(Object(o["b"])(n).substr(0,27))},_=function(e){var t=[];return e.forEach((function(e){var n=e.split("|||");n.forEach((function(e){var n=e.indexOf("=");t.push({property_:e.substring(0,n),operator:"in",value:e.substring(n+1,e.length)})}))})),t},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=[];return e.forEach((function(e){n.push(h(e,t))})),n},x=[],g=function(e){var t=e;if(0===x.length)for(var n=1;n<=12;n+=1)x.push({sour:"\u524d".concat(n<10?"0":"").concat(n,"\u4e2a\u6708"),tranto:r()().add(-n,"month").format("YYYY\u5e74MM\u6708")}),x.push({sour:"\u4e0b".concat(n<10?"0":"").concat(n,"\u4e2a\u6708"),tranto:r()().add(n,"month").format("YYYY\u5e74MM\u6708")});if(t)for(var a=0;a<x.length;a+=1)t=t.replace(x[a].sour,x[a].tranto);return t},v=function(e,t,n){var a=null,i=function e(i){i.forEach((function(i){a||i[n]===t&&(a=i),!a&&i.children&&Array.isArray(i.children)&&e(i.children)}))};return i(e),a},y=function(e){var t=[],n=function e(n){n.forEach((function(n){n.children&&Array.isArray(n.children)?e(n.children):t.push(n)}))};return n(e),t},E=function(e){var t=[],n=function e(n){n.forEach((function(n){t.push(n[d["db"]]),n.children&&Array.isArray(n.children)&&e(n.children)}))};return e.children&&n(e.children),t},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d["db"],n=[],a=function e(a){a.forEach((function(a){a.children&&(n.push(a[t]),e(a.children))}))};return a(e),n},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d["db"],n=[],a=function e(a){a.forEach((function(a){a.children?e(a.children):n.push(a[t])}))};return a(e),n},I=function(e,t,n){var i=function e(a){a.forEach((function(t){Array.isArray(t.children)&&e(t.children)})),a.sort((function(e,a){return"string"===typeof e[t]?e[t].localeCompare(a[t])*n:(e[t]||0)>(a[t]||0)?n:-n}))};return i(e),Object(a["a"])(e)},D=function(e){var t=e;if(t[d["ab"]]){var n=t[d["ab"]].children;Array.isArray(n)&&(n.splice(n.findIndex((function(e){return e===t})),1),0===n.length&&delete t[d["ab"]].children)}return t},k=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d["eb"],a=[],i=function e(i){i.forEach((function(i){i[n]&&a.push(i[t]),i.children&&e(i.children)}))};return i(e),a},w=function(e,t){var n=5;if(!(t>e.length)){for(var a=[],i=t;i<Math.min(e.length,t+n);i+=1)a.push(e[i].text);return a.join(" , ")+(e.length-n>t?"\u7b49".concat(e.length-t,"\u4e2a\u5206\u7ec4"):"")}},P=new RegExp("<[^>]*>","gm"),T=function e(t,n){var a=[];return t.forEach((function(t){if(!t.hidden){var i=t[d["gb"]]||t.menuText||t.text,r={text:i?i.replace(P,""):""};t.children?r.items=e(t.children,n):t.dataIndex&&(r.dataIndex=t.dataIndex,t.ismonetary&&(r.ismonetary=t.ismonetary),t.unittext&&(r.unittext=t.unittext),t.aggregate&&(r.aggregate=t.aggregate),t.aggregatefieldname&&(r.aggregatefieldname=t.aggregatefieldname),t.fieldname&&(r.fieldname=t.fieldname),t.fieldtype&&(r.fieldtype=t.fieldtype),n.push({dataIndex:t.dataIndex,ismonetary:t.ismonetary,unittext:t.unittext,aggregate:t.aggregate,fieldtype:t.fieldtype})),(r.dataIndex||r.items)&&a.push(r)}})),a},M=function(e,t){var n=e.schemeState,a=Object(p["a"])(n.fieldGroup,n.isMultFieldGroup,n.columnGroup,e,(function(){}));return T(a,t)},A=function e(t,n,a,i){var r={},c=[];return n&&(a.forEach((function(e){"text"===e.dataIndex?c.push(n[d["gb"]]||n[e.dataIndex]):c.push(n[e.dataIndex])})),r.data=c,n.children&&(i&&!t.expandedRowKeys.find((function(e){return e===n[d["db"]]}))||(r.children=[],n.children.forEach((function(n){r.children.push(e(t,n,a,i))}))))),r},R=function(e,t){var n=e.moduleName,a=e.exportSetting,i=e.monetary,r=e.filters,o=Object(l["x"])(n),s=[],d=M(e,s),p=A(e,e.schemeState.dataSource[0],s,a.disablecollapsed),m={topdf:t,moduletitle:o.title,schemename:e.currentScheme.title||"\u672a\u4fdd\u5b58\u7684\u6570\u636e\u5206\u6790\u65b9\u6848",conditions:JSON.stringify(Object(f["b"])(r.sqlparam).concat(Object(u["b"])(e.filterDataSource))),colorless:a.colorless,monerary:i.monetaryUnit,moneraryText:1===i.monetaryUnit?"":i.unittext,disablerowgroup:a.disablerowgroup,unittextalone:a.unittextalone,pagesize:a.pagesize,autofitwidth:a.autofitwidth,scale:a.scale,columns:JSON.stringify(d),leafcolumns:JSON.stringify(s),data:JSON.stringify(p)},b=[];Object.keys(m).forEach((function(e){var t=window.document.createElement("input");t.type="hidden",t.name=e,t.value="string"===typeof m[e]?m[e].replace(new RegExp('"',"gm"),"'"):m[e],b.push(t)}));var j=window.document.createElement("form");j.method="post",j.action="".concat(c["API_HEAD"],"/platform/datamining/exporttoexcel.do"),b.forEach((function(e){return j.appendChild(e)})),document.body.appendChild(j),j.submit(),document.body.removeChild(j)}},f6n2:function(e,t,n){"use strict";var a=n("3WF5"),i=n("Nw6e");function r(e){return!(!e.get("activiti:asyncBefore")&&!e.get("activiti:async"))}function c(e){return!!e.get("activiti:asyncAfter")}function o(e){return!!e.get("activiti:exclusive")}function s(e){return(i.getExtensionElements(e,"activiti:FailedJobRetryTimeCycle")||[])[0]}function l(e,t){var n=i.getExtensionElements(e,"activiti:FailedJobRetryTimeCycle");return a(n,(function(n){return i.removeEntry(e,t,n)}))}e.exports.isAsyncBefore=r,e.exports.isAsyncAfter=c,e.exports.isExclusive=o,e.exports.getFailedJobRetryTimeCycle=s,e.exports.removeFailedJobRetryTimeCycle=l},fhDF:function(e){e.exports=JSON.parse('{"name":"Activiti","uri":"http://activiti.org/bpmn","prefix":"activiti","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"InOutBinding","superClass":["Element"],"isAbstract":true,"properties":[{"name":"source","isAttr":true,"type":"String"},{"name":"sourceExpression","isAttr":true,"type":"String"},{"name":"target","isAttr":true,"type":"String"},{"name":"businessKey","isAttr":true,"type":"String"},{"name":"local","isAttr":true,"type":"Boolean","default":false},{"name":"variables","isAttr":true,"type":"String"}]},{"name":"In","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"Out","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"AsyncCapable","isAbstract":true,"extends":["bpmn:Activity","bpmn:Gateway","bpmn:Event"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false},{"name":"asyncBefore","isAttr":true,"type":"Boolean","default":false},{"name":"asyncAfter","isAttr":true,"type":"Boolean","default":false},{"name":"exclusive","isAttr":true,"type":"Boolean","default":true}]},{"name":"activiti:in","superClass":["Element"],"properties":[{"name":"source","type":"string","isAttr":true},{"name":"target","type":"string","isAttr":true}]},{"name":"activiti:out","superClass":["Element"],"properties":[{"name":"source","type":"string","isAttr":true},{"name":"target","type":"string","isAttr":true}]},{"name":"BoundaryEvent","superClass":["CatchEvent"],"properties":[{"name":"cancelActivity","default":true,"isAttr":true,"type":"Boolean"},{"name":"attachedToRef","type":"Activity","isAttr":true,"isReference":true}]},{"name":"JobPriorized","isAbstract":true,"extends":["bpmn:Process","activiti:AsyncCapable"],"properties":[{"name":"jobPriority","isAttr":true,"type":"String"}]},{"name":"SignalEventDefinition","isAbstract":true,"extends":["bpmn:SignalEventDefinition"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false}]},{"name":"ErrorEventDefinition","isAbstract":true,"extends":["bpmn:ErrorEventDefinition"],"properties":[{"name":"errorCodeVariable","isAttr":true,"type":"String"},{"name":"errorMessageVariable","isAttr":true,"type":"String"}]},{"name":"Error","isAbstract":true,"extends":["bpmn:Error"],"properties":[{"name":"activiti:errorMessage","isAttr":true,"type":"String"}]},{"name":"PotentialStarter","superClass":["Element"],"properties":[{"name":"resourceAssignmentExpression","type":"bpmn:ResourceAssignmentExpression"}]},{"name":"UserTask","isAbstract":true,"extends":["bpmn:UserTask"],"properties":[{"name":"timerEventDefinition","type":"Expression"}]},{"name":"StartEvent","isAbstract":true,"extends":["bpmn:StartEvent"],"properties":[{"name":"timerEventDefinition","type":"Expression"}]},{"name":"FormSupported","isAbstract":true,"extends":["bpmn:StartEvent","bpmn:UserTask"],"properties":[{"name":"formHandlerClass","isAttr":true,"type":"String"},{"name":"formKey","isAttr":true,"type":"String"}]},{"name":"TemplateSupported","isAbstract":true,"extends":["bpmn:Process","bpmn:FlowElement"],"properties":[{"name":"modelerTemplate","isAttr":true,"type":"String"}]},{"name":"Initiator","isAbstract":true,"extends":["bpmn:StartEvent"],"properties":[{"name":"initiator","isAttr":true,"type":"String"}]},{"name":"ScriptTask","isAbstract":true,"extends":["bpmn:ScriptTask"],"properties":[{"name":"resultVariable","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Process","isAbstract":true,"extends":["bpmn:Process"],"properties":[{"name":"candidateStarterGroups","isAttr":true,"type":"String"},{"name":"candidateStarterUsers","isAttr":true,"type":"String"},{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"},{"name":"isStartableInTasklist","isAttr":true,"type":"Boolean","default":true}]},{"name":"EscalationEventDefinition","isAbstract":true,"extends":["bpmn:EscalationEventDefinition"],"properties":[{"name":"escalationCodeVariable","isAttr":true,"type":"String"}]},{"name":"FormalExpression","isAbstract":true,"extends":["bpmn:FormalExpression"],"properties":[{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Assignable","extends":["bpmn:UserTask"],"properties":[{"name":"candidateGroups","isAttr":true,"type":"String"},{"name":"dueDate","isAttr":true,"type":"String"},{"name":"followUpDate","isAttr":true,"type":"String"},{"name":"priority","isAttr":true,"type":"String"}]},{"name":"CallActivity","extends":["bpmn:CallActivity"],"properties":[{"name":"calledElementBinding","isAttr":true,"type":"String","default":"latest"},{"name":"calledElementVersion","isAttr":true,"type":"String"},{"name":"calledElementVersionTag","isAttr":true,"type":"String"},{"name":"calledElementTenantId","isAttr":true,"type":"String"},{"name":"caseRef","isAttr":true,"type":"String"},{"name":"caseBinding","isAttr":true,"type":"String","default":"latest"},{"name":"caseVersion","isAttr":true,"type":"String"},{"name":"caseTenantId","isAttr":true,"type":"String"},{"name":"variableMappingClass","isAttr":true,"type":"String"},{"name":"variableMappingDelegateExpression","isAttr":true,"type":"String"}]},{"name":"ServiceTaskLike","extends":["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"resultVariable","isAttr":true,"type":"String"}]},{"name":"ExclusiveGateway","isAbstract":true,"extends":["bpmn:ExclusiveGateway"],"properties":[{"name":"serviceClass","isAttr":true,"type":"String"}]},{"name":"DmnCapable","extends":["bpmn:BusinessRuleTask"],"properties":[{"name":"decisionRef","isAttr":true,"type":"String"},{"name":"decisionRefBinding","isAttr":true,"type":"String","default":"latest"},{"name":"decisionRefVersion","isAttr":true,"type":"String"},{"name":"mapDecisionResult","isAttr":true,"type":"String","default":"resultList"},{"name":"decisionRefTenantId","isAttr":true,"type":"String"}]},{"name":"ExternalCapable","extends":["activiti:ServiceTaskLike"],"properties":[{"name":"type","isAttr":true,"type":"String"},{"name":"topic","isAttr":true,"type":"String"}]},{"name":"TaskPriorized","extends":["bpmn:Process","activiti:ExternalCapable"],"properties":[{"name":"taskPriority","isAttr":true,"type":"String"}]},{"name":"Properties","superClass":["Element"],"meta":{"allowedIn":["*"]},"properties":[{"name":"values","type":"Property","isMany":true}]},{"name":"Property","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"Connector","superClass":["Element"],"meta":{"allowedIn":["activiti:ServiceTaskLike"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"}]},{"name":"InputOutput","superClass":["Element"],"meta":{"allowedIn":["bpmn:FlowNode","activiti:Connector"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"},{"name":"inputParameters","isMany":true,"type":"InputParameter"},{"name":"outputParameters","isMany":true,"type":"OutputParameter"}]},{"name":"InputOutputParameter","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"InputOutputParameterDefinition","isAbstract":true},{"name":"List","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"items","isMany":true,"type":"InputOutputParameterDefinition"}]},{"name":"Map","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"entries","isMany":true,"type":"Entry"}]},{"name":"Entry","properties":[{"name":"key","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"Value","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"id","isAttr":true,"type":"String"},{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Script","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"scriptFormat","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Field","superClass":["Element"],"meta":{"allowedIn":["activiti:ServiceTaskLike","activiti:ExecutionListener","activiti:TaskListener"]},"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"expression","type":"String"},{"name":"stringValue","isAttr":true,"type":"String"},{"name":"string","type":"String"}]},{"name":"InputParameter","superClass":["InputOutputParameter"]},{"name":"OutputParameter","superClass":["InputOutputParameter"]},{"name":"Collectable","isAbstract":true,"extends":["bpmn:MultiInstanceLoopCharacteristics"],"superClass":["activiti:AsyncCapable"],"properties":[{"name":"collection","isAttr":true,"type":"String"},{"name":"elementVariable","isAttr":true,"type":"String"}]},{"name":"SequenceFlow","superClass":["FlowElement"],"properties":[{"name":"isImmediate","isAttr":true,"type":"Boolean"},{"name":"conditionExpression","type":"Expression"},{"name":"sourceRef","type":"FlowNode","isAttr":true,"isReference":true},{"name":"targetRef","type":"FlowNode","isAttr":true,"isReference":true}]},{"name":"MultiInstanceLoopCharacteristics","superClass":["LoopCharacteristics"],"properties":[{"name":"isSequential","default":false,"isAttr":true,"type":"Boolean"},{"name":"behavior","type":"MultiInstanceBehavior","default":"All","isAttr":true},{"name":"loopCardinality","type":"Expression","xml":{"serialize":"xsi:type"}},{"name":"loopDataInputRef","type":"ItemAwareElement","isReference":true},{"name":"loopDataOutputRef","type":"ItemAwareElement","isReference":true},{"name":"inputDataItem","type":"DataInput","xml":{"serialize":"property"}},{"name":"outputDataItem","type":"DataOutput","xml":{"serialize":"property"}},{"name":"complexBehaviorDefinition","type":"ComplexBehaviorDefinition","isMany":true},{"name":"completionCondition","type":"Expression","xml":{"serialize":"xsi:type"}},{"name":"oneBehaviorEventRef","type":"EventDefinition","isAttr":true,"isReference":true},{"name":"noneBehaviorEventRef","type":"EventDefinition","isAttr":true,"isReference":true}]},{"name":"FailedJobRetryTimeCycle","superClass":["Element"],"meta":{"allowedIn":["activiti:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ExecutionListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"TaskListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"required","type":"String","isAttr":true},{"name":"readable","type":"String","isAttr":true},{"name":"writable","type":"String","isAttr":true},{"name":"variable","type":"String","isAttr":true},{"name":"expression","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"default","type":"String","isAttr":true},{"name":"values","type":"Value","isMany":true}]},{"name":"FormData","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"fields","type":"FormField","isMany":true},{"name":"businessKey","type":"String","isAttr":true}]},{"name":"FormField","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"defaultValue","type":"String","isAttr":true},{"name":"properties","type":"Properties"},{"name":"validation","type":"Validation"},{"name":"values","type":"Value","isMany":true}]},{"name":"Validation","superClass":["Element"],"properties":[{"name":"constraints","type":"Constraint","isMany":true}]},{"name":"Constraint","superClass":["Element"],"properties":[{"name":"name","type":"String","isAttr":true},{"name":"config","type":"String","isAttr":true}]},{"name":"ConditionalEventDefinition","isAbstract":true,"extends":["bpmn:ConditionalEventDefinition"],"properties":[{"name":"variableName","isAttr":true,"type":"String"},{"name":"variableEvent","isAttr":true,"type":"String"}]}],"emumerations":[]}')},fhoV:function(e,t,n){"use strict";var a=n("6BL2"),i=n("hfUJ");e.exports=function(e,t,n,r){var c=n.getBusinessObject,o=a.textField({id:"candidateStarterGroups",label:r("Candidate Starter Groups"),modelProperty:"candidateStarterGroups",description:r("Specify more than one group as a comma separated list."),get:function(e,t){var n=c(e),a=n.get("activiti:candidateStarterGroups");return{candidateStarterGroups:a||""}},set:function(e,t){var n=c(e);return i.updateBusinessObject(e,n,{"activiti:candidateStarterGroups":t.candidateStarterGroups||void 0})}}),s=a.textField({id:"candidateStarterUsers",label:r("Candidate Starter Users"),modelProperty:"candidateStarterUsers",description:r("Specify more than one user as a comma separated list."),get:function(e,t){var n=c(e),a=n.get("activiti:candidateStarterUsers");return{candidateStarterUsers:a||""}},set:function(e,t){var n=c(e);return i.updateBusinessObject(e,n,{"activiti:candidateStarterUsers":t.candidateStarterUsers||void 0})}});return[o,s]}},gjfE:function(e,t,n){"use strict";var a=n("I3r8"),i=n("3OWR");e.exports=function(e,t,n,r,c){e.entries=e.entries.concat(a(t,n,i({},r),c))}},gkHi:function(e,t,n){"use strict";var a=n("emvA"),i=a.is,r=a.getBusinessObject,c=n("Nw6e"),o=n("XpWC"),s={};function l(e,t,n){var a=c.getExtensionElements(e,t)||[];return n?(a[0]||{})[n]||[]:a}function d(e,t,n){var a=s.getInputOutput(e,n);return a&&a.get(t)||[]}e.exports=s,s.getInputOutput=function(e,t){if(!t){var n=r(e);return(l(n,"activiti:InputOutput")||[])[0]}var a=this.getConnector(e);return a&&a.get("inputOutput")},s.getConnector=function(e){var t=o.getServiceTaskLikeBusinessObject(e);return t&&(l(t,"activiti:Connector")||[])[0]},s.getInputParameters=function(e,t){return d.apply(this,[e,"inputParameters",t])},s.getOutputParameters=function(e,t){return d.apply(this,[e,"outputParameters",t])},s.getInputParameter=function(e,t,n){return this.getInputParameters(e,t)[n]},s.getOutputParameter=function(e,t,n){return this.getOutputParameters(e,t)[n]},s.isInputOutputSupported=function(e,t){if(t)return!0;var n=r(e);return i(n,"bpmn:FlowNode")&&!(i(n,"bpmn:StartEvent")||i(n,"bpmn:Gateway")||i(n,"bpmn:BoundaryEvent")||i(n,"bpmn:SubProcess")&&n.get("triggeredByEvent"))},s.areOutputParametersSupported=function(e,t){var n=r(e);return t||!i(n,"bpmn:EndEvent")&&!n.loopCharacteristics}},gx9M:function(e,t,n){"use strict";n.d(t,"b",(function(){return q}));n("IzEo");var a=n("bx4M"),i=(n("DYRE"),n("zeV3")),r=(n("5Dmo"),n("3S7+")),c=n("k1fw"),o=n("oBTY"),s=n("jrin"),l=(n("2qtc"),n("kLXV")),d=(n("miYZ"),n("tsqr")),u=n("tJVT"),p=(n("tU7J"),n("wFql")),f=(n("5NDa"),n("5rEg")),m=(n("ozfa"),n("MJZm")),b=(n("Znn+"),n("ZTPi")),j=n("q1tI"),h=n("WG1l"),_=n.n(h),O=n("Lyp1"),x=n("rLCj"),g=n("vuKU"),v=n("rNa/"),y=n("Ju3Z"),E=n("Uw7j"),S=n("5yul"),C=n("GZ0F"),I=n("0ioL"),D=n("79+z"),k=n("aMZS"),w=n("RfA7"),P=n("WTWM"),T=n("ma4E"),M=n("NB5u"),A=n("RxVZ"),R=n.n(A),N=n("nKUr"),L=b["a"].TabPane,B=m["a"].DirectoryTree,K=f["a"].Search,F=p["a"].Text,U=Object(j["createContext"])({dispatch:function(){}}),W={},V=function(e,t){return W[e]=W[e].map((function(e){return e.navigateschemeid===t.navigateschemeid?t:e})),W[e]},q=function(e){W[e]&&delete W[e]},z={},G=function(e,t){z[e]=t},J=function(e){return z[e]},H={},Y=function(e,t){H[e]=t},Z=function(e,t){return H[e]||(H[e]=t),H[e]},Q=function(e,t,n){var a=e.modulename,i=e.fields,r=null;if(Object(P["E"])(e))if(n.moduleName===a){for(var c=0;c<i.length;c+=1)if(i[c].fieldname===n.fieldName&&!n.schemeDetailId&&!n.numberGroupId){r=i[c];break}}else for(var o=0;o<i.length;o+=1)if(i[o].fieldtype===n.moduleName&&i[o].fieldname===n.fieldahead){var s=Object(P["x"])(i[o].fieldtype);if(!s)continue;if(s.primarykey===n.fieldName){r=i[o];break}}return r&&r.allowedit?r.isManyToOne&&!r.allowParentValue&&n.children?null:r:null},$="ModuleDragableBodyRow",X=function(e){var t=e.node,n=e.search,a=void 0===n?"":n,i=Object(j["useContext"])(U),r=i.moduleInfo,c=i.state,o=i.dispatch,p=r,f=p.modulename,m=Object(k["a"])({accept:"".concat($+(null===c||void 0===c?void 0:c.moduleName),"toNavigate"),canDrop:function(e){return!!Q(p,e.record,t)},drop:function(e){var n=Q(p,e.record,t),a=p.primarykey||"",i=Object(P["f"])(p,e.record);i.canEdit?n&&l["a"].confirm({width:500,title:"\u786e\u5b9a\u8981\u5c06".concat(p.title,"\u300e").concat(e.record[p.namefield],"\u300f\u7684").concat(n.fieldtitle,"\u6539\u4e3a\u201c").concat(t.title,"\u201d\u5417\uff1f"),icon:Object(N["jsx"])(O["a"],{}),onOk:function(){var i=Object(s["a"])({},a,e.record[a]);if(n.isManyToOne){var r=Object(P["x"])(n.fieldtype);i["".concat(n.fieldname,".").concat(r.primarykey)]=t.fieldvalue}else i[n.fieldname]=t.fieldvalue;Object(w["I"])({moduleName:f,opertype:"edit",data:i}).then((function(e){var t=e.data;if(e.success)d["default"].success("".concat(p.title,"\u7684\u300e").concat(t[p.namefield],"\u300f\u4fdd\u5b58\u6210\u529f\uff01")),o({type:"modules/updateRecord",payload:{moduleName:f,record:t}});else{var n=e.message?[Object(N["jsx"])("div",{children:Object(N["jsx"])("li",{children:"string"===typeof e.message?e.message:JSON.stringify(e.message)})})]:[],a=e.data;a&&Object.keys(a).forEach((function(e){var t=Object(P["n"])(e,p);n.push(Object(N["jsx"])("div",{children:Object(N["jsxs"])("li",{children:[Object(N["jsx"])("b",{children:t?t.fieldtitle:e}),"\uff1a",a[e]]})}))})),l["a"].error({width:500,title:"\u8bb0\u5f55\u4fdd\u5b58\u65f6\u53d1\u751f\u9519\u8bef",content:Object(N["jsx"])("ul",{style:{listStyle:"decimal"},children:n})})}}))}}):d["default"].warn(i.message)},collect:function(e){return{isOver:!!e.isOver(),canDrop:e.canDrop()}}}),b=Object(u["a"])(m,2),h=b[0],x=h.isOver,g=h.canDrop,v=b[1];return Object(N["jsxs"])("div",{style:{display:"inline-block",height:"100%"},ref:Object(P["E"])(p)?v:null,className:x&&g?R.a.navigatedragover:"",children:[a?Object(N["jsx"])(_.a,{highlightClassName:"ant-btn-link",searchWords:[a],textToHighlight:t.title}):t.title||"\u672a\u5b9a\u4e49",Object(N["jsxs"])(F,{type:"secondary",children:["(",t.count,")"]})]})},ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={title:Object(N["jsx"])(X,{node:e,search:t}),key:e.key,isLeaf:e.isLeaf,icon:e.iconCls?Object(N["jsx"])("span",{className:e.iconCls}):null,data:e};return n},te=1,ne=function(e){return{title:Object(N["jsx"])("a",{children:"\u8fd8\u6709 ".concat(e," \u6761\u8bb0\u5f55\uff0c\u8bf7\u641c\u7d22\u5173\u952e\u5b57\u67e5\u627e")}),key:"__restkey--".concat(te++),isLeaf:!0,selectable:!1,data:null}},ae=200,ie=20,re=50,ce=100,oe=function e(t){var n=[];return n.push.apply(n,Object(o["a"])(t.filter((function(e,t){return t<ie})).map((function(t){var n=t.children,a=ee(t);return Array.isArray(n)&&n.length&&t.expanded&&(a.children=e(n)),a})))),t.length>ie&&n.push(ne(t.length-ie)),n},se=function e(t){var n=[];return n.push.apply(n,Object(o["a"])(t.map((function(t){var n=t.children,a=ee(t);return Array.isArray(n)&&n.length&&(a.children=e(n)),a})))),n},le=function e(t,n,a,i){var r=[],c=i;return t.forEach((function(t){var i=I["a"].match(t.title,n);i&&(c[0]+=1);var o=ee(t,i?t.title.substring(i[0],i[1]+1):"");if(t.isLeaf)i&&r.push(o);else{var s=e(t.children||[],n,a,c);(i||s.length)&&(s.length&&(o.children=s,a.push(t.key)),r.push(o))}})),r},de=function e(t,n,a,i){var r=[],c=i;return t.forEach((function(t){var i=t.title.indexOf(n)>-1;i&&(c[0]+=1);var o=ee(t,n);if(t.isLeaf)i&&r.push(o);else{var s=e(t.children||[],n,a,c);(i||s.length)&&(s.length&&(o.children=s,a.push(t.key)),r.push(o))}})),r},ue=function(e,t){var n,a=[],i=[0],r=/^[a-zA-Z]+$/.test(t);return n=r?{treeData:le(e,t,a,i),expandedKeys:a}:{treeData:de(e,t,a,i),expandedKeys:a},i[0]>ce&&d["default"].warn("\u7b26\u5408\u5f53\u524d\u67e5\u8be2\u5173\u952e\u5b57\u7684\u8bb0\u5f55\u592a\u591a,\u5efa\u8bae\u589e\u52a0\u641c\u7d22\u5b57\u7b26\u7684\u957f\u5ea6\uff01",5),n},pe=function e(t){var n=[];return t.forEach((function(t){!t.isLeaf&&t.children&&t.children.length&&(n.push(t.key),n.push.apply(n,Object(o["a"])(e(t.children))))})),n},fe=function(e){var t=e.moduleState,n=e.dispatch,s=t.moduleName,l=Object(P["x"])(s),p=t.filters.parentfilter,m=s;p&&(m="".concat(m,"-").concat(p.fieldahead,"-").concat(p.fieldvalue)),t.filters.sqlparam&&(m="".concat(m,"-").concat(JSON.stringify(Object(T["p"])(t.filters.sqlparam)))),W[m]||(W[m]=l.navigateSchemes.map((function(e){return{navigateschemeid:e.navigateschemeid,title:e.tf_text,loading:"needload",allowNullRecordButton:e.tf_allowNullRecordButton,isContainNullRecord:e.tf_isContainNullRecord,cascading:e.tf_cascading,allLevel:e.tf_allLevel,expandedKeys:[],canExpandedKeys:[],nodeCount:0,dataSource:[],dataSourceKeyIndex:{},treeData:[],initExpandedKeys:[],initTreeData:[]}})));var h=Object(j["useState"])(W[m]),_=Object(u["a"])(h,2),O=_[0],k=_[1];O!==W[m]&&k(W[m]);var A=function(e,t,a){var i=t.node.data;G(a,e);var r=[],c=function e(t,n){n&&t.moduleName&&r.push({moduleName:t.moduleName,fieldahead:t.fieldahead,fieldName:t.fieldName,aggregate:t.aggregate,fieldtitle:t.fieldtitle,operator:t.operator,fieldvalue:t.fieldvalue,text:t.title,isCodeLevel:t.isCodeLevel,numberGroupId:t.numberGroupId,schemeDetailId:t.schemeDetailId}),t.parent&&e(t.parent,t.addParentFilter)};c(i,!0),n({type:"modules/filterChanged",payload:{type:"navigateSelectChange",moduleName:s,navigates:r}})},R=function(e){var n=e.title,a=e.navigateschemeid,i=e.cascading,r=e.isContainNullRecord;if("loading"!==e.loading){k(V(m,Object(c["a"])(Object(c["a"])({},e),{},{loading:"loading",dataSource:[]})));var l={},d={moduleName:s,title:n,navigateschemeid:a,cascading:i,isContainNullRecord:r,parentFilter:t.filters.parentfilter};t.filters.sqlparam&&(d.sqlparamstr=JSON.stringify(Object(T["p"])(t.filters.sqlparam))),Object(w["p"])(d).then((function(t){var n=t,a=[],i=[],r=1e3,s=function e(t){var n=t;return n.title=n.text,n.isLeaf=n.leaf,delete n.cls,delete n.text,delete n.leaf,n.key="".concat(r.toString()),r+=1,n.expanded&&a.push(n.key),n.children&&(i.push(n.key),n.children.forEach((function(e){Object(D["d"])(e,{parent:n})})),n.children=n.children.map(e)),l[n.key]=n,n},d=n,p=d.children;if(p&&1===p.length&&!p[0].leaf){var f=p[0].children;if(f&&1===f.length&&!f[0].leaf){delete p[0].moduleName,delete p[0].fieldvalue;var b=p,j=Object(u["a"])(b,1);n=j[0]}}p=n.children,p&&p.length>0&&(p[0].expanded=!0),n.children||(n.children=[]);var h,_,O,x=n.children.map(s),g=r-1e3;g<=ae?(h=[].concat(i),O=se(x),_=Object(o["a"])(O)):(h=[].concat(a),O=oe(x),_=Object(o["a"])(O));var v=Object(c["a"])(Object(c["a"])({},e),{},{expandedKeys:h,canExpandedKeys:i,dataSource:x,dataSourceKeyIndex:l,loading:"loaded",nodeCount:g,treeData:O,initExpandedKeys:h,initTreeData:_});e.search&&(v=Object(c["a"])(Object(c["a"])({},v),ue(x,e.search))),k(V(m,v))}))}},F=function(){return O.forEach((function(e){R(e)}))},q=function(e){Object(D["d"])(e,{cascading:!e.cascading}),R(e)},z=function(e){Object(D["d"])(e,{isContainNullRecord:!e.isContainNullRecord}),R(e)},H=function(e,t){var n=e.dataSourceKeyIndex[t.key].children,a=!1,i=e.search;i&&(a=/^[a-zA-Z]+$/.test(i));var r=function r(o){return o.map((function(o){var s=Object(c["a"])({},o);return s.key===t.key&&(s.children=n.filter((function(e,t){return t<re})).map((function(t){if(a){var n=I["a"].match(t.title,i);return ee(t,n?t.title.substring(n[0],n[1]+1):"")}return ee(t,e.search)})),n.length>re&&s.children.push(ne(n.length-re))),s.children&&(s.children=r(s.children)),s}))};return r(e.treeData)},Q=function(e){return Object(N["jsx"])(B,{blockNode:!0,style:{whiteSpace:"nowrap"},expandAction:"doubleClick",onSelect:function(t,n){return A(t,n,m+e.navigateschemeid)},selectedKeys:J(m+e.navigateschemeid),onExpand:function(t,n){var a=n.expanded,i=n.node;if(a&&(!i.children||i.children.length!==i[M["c"]].children.length&&i.children.length!==re+1)){var r=H(e,i);k(V(m,Object(c["a"])(Object(c["a"])({},e),{},{expandedKeys:t,treeData:r})))}else k(V(m,Object(c["a"])(Object(c["a"])({},e),{},{expandedKeys:t})))},expandedKeys:e.expandedKeys,treeData:e.treeData})},$=function(){return Object(N["jsx"])(i["b"],{children:Object(N["jsx"])(r["a"],{title:"\u5237\u65b0\u6240\u6709\u5bfc\u822a\u6570\u636e",children:Object(N["jsx"])(x["a"],{onClick:F})})})},X=function(e){return 1===e.allLevel&&e.nodeCount<=ie&&!e.allowNullRecordButton?null:Object(N["jsxs"])(f["a"].Group,{size:"small",style:{display:"flex",paddingBottom:3},children:[Object(N["jsxs"])(i["b"],{children:[Object(N["jsx"])(r["a"],{title:"\u5168\u90e8\u5c55\u5f00",children:Object(N["jsx"])(g["a"],{style:{cursor:"pointer"},onClick:function(){var t=pe(e.treeData);k(V(m,Object(c["a"])(Object(c["a"])({},e),{},{expandedKeys:t})))}})}),Object(N["jsx"])(r["a"],{title:"\u5b50\u7ea7\u5168\u90e8\u6298\u53e0",children:Object(N["jsx"])(v["a"],{style:{cursor:"pointer"},onClick:function(){var t=e.treeData.filter((function(e){return!e.isLeaf})).map((function(e){return e.key}));k(V(m,Object(c["a"])(Object(c["a"])({},e),{},{expandedKeys:t})))}})}),e.allLevel>1?e.cascading?Object(N["jsx"])(r["a"],{title:"\u5e76\u5217\u663e\u793a\u5404\u5bfc\u822a",children:Object(N["jsx"])(y["a"],{style:{cursor:"pointer"},onClick:function(){return q(e)}})}):Object(N["jsx"])(r["a"],{title:"\u5c42\u53e0\u663e\u793a\u5404\u5bfc\u822a",children:Object(N["jsx"])(E["a"],{style:{cursor:"pointer"},onClick:function(){return q(e)}})}):null,e.allowNullRecordButton&&(e.isContainNullRecord?Object(N["jsx"])(r["a"],{title:"\u9690\u85cf\u65e0\u8bb0\u5f55\u7684\u5bfc\u822a\u9879\u76ee",children:Object(N["jsx"])(S["a"],{style:{cursor:"pointer"},onClick:function(){return z(e)}})}):Object(N["jsx"])(r["a"],{title:"\u663e\u793a\u65e0\u8bb0\u5f55\u7684\u5bfc\u822a\u9879\u76ee",children:Object(N["jsx"])(C["a"],{style:{cursor:"pointer"},onClick:function(){return z(e)}})})),Object(N["jsx"])("span",{})]}),Object(N["jsx"])(K,{size:"middle",placeholder:"\u641c\u7d22\u6587\u672c\u6216\u7b80\u5168\u62fc",style:{flex:1},defaultValue:e.search,allowClear:!0,onSearch:function(t){if(t){if(1===t.length)return void d["default"].warn("\u8bf7\u8f93\u5165\u4e8c\u4e2a\u4ee5\u4e0a\u7684\u6587\u5b57\u6216\u5b57\u7b26\u518d\u8fdb\u884c\u67e5\u8be2");k(V(m,Object(c["a"])(Object(c["a"])({},e),{},{search:t},ue(e.dataSource,t))))}else k(V(m,Object(c["a"])(Object(c["a"])({},e),{},{search:t,treeData:Object(o["a"])(e.initTreeData),expandedKeys:Object(o["a"])(e.initExpandedKeys)})))}})]})};if(O.length>1)return Object(N["jsx"])(U.Provider,{value:{state:t,moduleInfo:l,dispatch:n},children:Object(N["jsx"])(a["a"],{title:"\u5bfc\u822a",bordered:!1,bodyStyle:{overflowY:"auto"},extra:$(),size:"small",children:Object(N["jsx"])(b["a"],{className:"navigate",defaultActiveKey:Z(s,O[0].navigateschemeid),onChange:function(e){return Y(s,e)},style:{marginTop:"-10px"},children:O.map((function(e){var t=e.navigateschemeid,n=e.title;return Object(N["jsx"])(L,{tab:n,children:"loaded"===e.loading?Object(N["jsxs"])(N["Fragment"],{children:[" ",X(e),Q(e)]}):Object(N["jsx"])(a["a"],{loading:!0,bordered:!1,children:Object(N["jsx"])(N["Fragment"],{children:R(e)})})},t)}))})})});var te=O[0];return"loaded"===te.loading?Object(N["jsx"])(U.Provider,{value:{state:t,moduleInfo:l,dispatch:n},children:Object(N["jsx"])(a["a"],{bordered:!1,bodyStyle:{overflowY:"auto"},title:Object(N["jsxs"])(N["Fragment"],{children:[te.title," \u5bfc\u822a"]}),extra:$(),size:"small",children:Object(N["jsxs"])(N["Fragment"],{children:[" ",X(te),Q(te)]})})}):(R(te),Object(N["jsx"])(a["a"],{loading:!0,bordered:!1,title:Object(N["jsxs"])(N["Fragment"],{children:[te.title," \u5bfc\u822a"]}),extra:$(),size:"small"}))};t["a"]=fe},"h7P/":function(e,t,n){"use strict";n.d(t,"a",(function(){return H})),n.d(t,"b",(function(){return Y}));n("2qtc");var a=n("kLXV"),i=(n("bbsP"),n("/wGt")),r=(n("Q9mQ"),n("diRs")),c=(n("IzEo"),n("bx4M")),o=n("k1fw"),s=(n("DZo9"),n("8z0m")),l=(n("DYRE"),n("zeV3")),d=(n("P2fV"),n("NJEC")),u=(n("qVdP"),n("jsC+")),p=(n("+L6B"),n("2/Rp")),f=(n("miYZ"),n("tsqr")),m=(n("lUTK"),n("BvKs")),b=(n("5Dmo"),n("3S7+")),j=n("tJVT"),h=n("q1tI"),_=n("79+z"),O=n("5CnO"),x=n("z7Xi"),g=n("Lyp1"),v=n("/MfK"),y=n("ymrT"),E=n("4g1a"),S=n("YO/a"),C=n("Nj6f"),I=n("VX7R"),D=n("26re"),k=n("U+PY"),w=n("1x1c"),P=n("eyie"),T=n("Py4S"),M=n.n(T),A=n("sy1d"),R=n("RfA7"),N=n("3Mvv"),L=n.n(N),B=n("WTWM"),K=n("OC7c"),F=n("ZM8D"),U=n("nKUr"),W=function(e){var t=e.moduleName,n=e.idvalue,a=e.titlevalue,i=e.readOnly,r=Object(B["x"])(t),c={moduleName:t,fieldahead:null,fieldName:"objectid",fieldtitle:r.title,operator:"=",fieldvalue:n,text:a};return Object(U["jsx"])(F["a"],{moduleName:"FDataobjectattachment",parentFilter:c,parentOperateType:"display",readOnly:i})},V={bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",tif:"image/tiff",tiff:"image/tiff",jif:"image/pipeg",jfif:"image/pipeg"},q=function(e){return V[e]||"notimagefile"},z=function(e){return!!V[e]},G="".concat(A["API_HEAD"],"/platform/attachment"),J=!1,H=function(e){var t,n=e.value,T=void 0===n?[]:n,A=e.record,N=e.moduleInfo,F=e.dispatch,V=(e.isLink,e.readonly),H=void 0!==V&&V,Y=!1,Z=T.length,Q=N.primarykey,$=N.namefield,X=N.modulename,ee=N.attachmentTypes,te=N.userLimit.attachment,ne=void 0===te?{}:te,ae=Object(h["useState"])(!1),ie=Object(j["a"])(ae,2),re=ie[0],ce=ie[1],oe=Object(h["useState"])(J),se=Object(j["a"])(oe,2),le=se[0],de=se[1],ue=Object(h["useState"])(Z<=5?"picture":"text"),pe=Object(j["a"])(ue,2),fe=pe[0],me=pe[1],be=Object(h["useState"])(!1),je=Object(j["a"])(be,2),he=je[0],_e=je[1],Oe=Object(h["useState"])(!1),xe=Object(j["a"])(Oe,2),ge=xe[0],ve=xe[1],ye=Object(h["useState"])({url:"",title:"",uid:"",filename:"",ispdf:!1}),Ee=Object(j["a"])(ye,2),Se=Ee[0],Ce=Ee[1],Ie=Object(h["useState"])(!1),De=Object(j["a"])(Ie,2),ke=De[0],we=De[1],Pe=Object(h["useState"])("99"),Te=Object(j["a"])(Pe,2),Me=Te[0],Ae=Te[1],Re=!1;if(!A)return null;var Ne=[],Le=null;Z?Le="".concat(Z>=10?"":"0").concat(Z):ne.add&&!H&&(Le=Object(U["jsx"])(b["a"],{title:"\u70b9\u51fb".concat(H?"\u67e5\u770b":"\u4e0a\u4f20","\u9644\u4ef6"),children:Object(U["jsx"])(O["a"],{})}));var Be=function(e){var t;return{uid:e.id,status:"done",name:"".concat(e.title,"  "),filename:e.filename,fileext:e.fileext||"",type:q(e.fileext),pdfpreview:e.pdfpreview,previewmode:e.previewmode,url:e.thumbnail||z(e.fileext)?"".concat(G,"/thumbnail.do?attachmentid=").concat(e.id):"direct"===e.previewmode||"pdf"===(null===(t=e.fileext)||void 0===t?void 0:t.toLowerCase())||e.pdfpreview?"".concat(e.id):null}},Ke=T.map(Be).sort((function(e,t){return e.fileext>t.fileext||e.fileext===t.fileext&&e.filename>t.filename?1:-1}));Ne=Ke;var Fe=Object(U["jsx"])(m["a"],{onClick:function(e){Ae(e.key)},children:null===(t=N.attachmentTypes)||void 0===t?void 0:t.map((function(e){return Object(U["jsx"])(m["a"].Item,{children:e.text},e.value)}))}),Ue=ne.add&&!H&&Object(B["d"])(N,A)?ee&&ee.length?Object(U["jsx"])(u["a"],{overlay:Fe,children:Object(U["jsxs"])(p["a"],{size:"small",onClick:function(e){e.stopPropagation(),f["default"].warn("\u8bf7\u9009\u62e9\u4e00\u4e2a\u9644\u4ef6\u7c7b\u578b")},children:[Object(U["jsx"])(x["a"],{}),"\u4e0a\u4f20\u9644\u4ef6"]})}):Object(U["jsxs"])(p["a"],{size:"small",children:[Object(U["jsx"])(x["a"],{}),"\u4e0a\u4f20\u9644\u4ef6"]}):null,We={defaultFileList:Ke,withCredentials:!0,action:"".concat(G,"/upload.do?objectid=").concat(X,"&idvalue=").concat(A[Q],"&atype=").concat(Me||"99","&ftype=99"),multiple:!0,listType:fe,onRemove:function(e){if(e.response&&!e.response.success)return!0;if("uploading"===e.status)return!1;var t="\u9644\u4ef6\u300e".concat(e.name.trim(),"\u300f");return!!Re&&(Re=!1,Object(R["b"])({moduleName:"FDataobjectattachment",recordId:e.uid}).then((function(e){return 0===e.resultCode?(ce(!0),f["default"].success("".concat(A[$],"\u7684").concat(t,"\u5df2\u6210\u529f\u5220\u9664\uff01")),!0):(f["default"].error(Object(U["jsx"])("span",{dangerouslySetInnerHTML:{__html:"".concat(A[$],"\u7684").concat(t,"\u5220\u9664\u5931\u8d25\uff01<br /><br />").concat(e.message)}})),!1)})))},onChange:function(e){var t=e.file,n=e.file,a=n.status,i=n.response,r=i?Object(U["jsxs"])("span",{children:["\u9644\u4ef6\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\uff1a",i.msg]}):"";if(Ne=e.fileList,"error"===a)f["default"].error(r),t.error.statusText=i.msg;else if("done"===a)if(i.success){ce(!0);var c=t.uid;e.fileList.forEach((function(e){e.uid===c&&(i.msg.fileext=Object(_["o"])(i.msg.filename),Object(_["d"])(e,Be(i.msg)))}))}else f["default"].error(r),t.error.statusText=i.msg},showUploadList:{removeIcon:Object(U["jsx"])(d["a"],{icon:Object(U["jsx"])(g["a"],{style:{color:"red"}}),title:"\u786e\u5b9a\u5220\u9664\u6b64\u9644\u4ef6\uff1f",onConfirm:function(){Re=!0},children:Object(U["jsx"])(v["a"],{})}),showRemoveIcon:!!ne.delete&&!H&&Object(B["c"])(N,A),showDownloadIcon:!0,showPreviewIcon:!0}},Ve=function(e){window.location.href="".concat(G,"/download.do?attachmentid=").concat(e.uid)},qe=function(){window.location.href="".concat(G,"/downloadall.do?moduleName=").concat(X,"&idkey=").concat(A[Q])},ze=function(e){var t=e;if("uploading"!==t.status)if("error"!==t.status){var n="pdf"===t.fileext.toLowerCase()||t.pdfpreview;if("image"===t.previewmode){var a=Ne.filter((function(e){return"image"===e.previewmode})).map((function(e){return{src:"".concat(G,"/preview.do?attachmentid=").concat(e.uid),alt:e.filename}})),i=Ne.filter((function(e){return"image"===e.previewmode})).findIndex((function(e){return e.uid===t.uid}));-1===i&&(a.push({src:"".concat(G,"/preview.do?attachmentid=").concat(t.uid),alt:t.filename}),i=a.length),M.a.browsing({set:a,defaultPage:i,zIndex:19260817,hideOnScroll:!1,onBrowsing:function(e){Y=e},controller:{close:!0,zoom:!0,download:!1,rotate:!0,flip:!0,pagination:!0},animate:{flip:"swipe"}})}else if("direct"===t.previewmode||n){var r="".concat(A[$],"\u7684\u9644\u4ef6\u300e").concat(t.name.trim(),"\u300f"),c="".concat(G,"/preview.do?attachmentid=").concat(t.uid),o="".concat(t.name.substr(0,t.name.lastIndexOf(".")),".pdf");c=n?Object(_["w"])(c,o):c,le?n?Object(K["attachmentPdfOpenPreview"])(t.uid,o):Object(_["A"])(c,r,t.previewmode):(Ce({url:c,title:r,uid:t.uid,filename:o,ispdf:n}),ve(!0))}else f["default"].warn("\u6b64\u9644\u4ef6\u6587\u4ef6\u4e0d\u80fd\u5728\u6d4f\u89c8\u5668\u4e2d\u9884\u89c8\uff0c\u4f60\u53ef\u4e0b\u8f7d\u540e\u518d\u8fdb\u884c\u64cd\u4f5c\uff01")}else f["default"].warn("\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\uff0c\u65e0\u6cd5\u9884\u89c8...");else f["default"].warn("\u6587\u4ef6\u6b63\u5728\u4e0a\u4f20\u4e2d\uff0c\u8bf7\u7a0d\u5019\u9884\u89c8...")},Ge=function(e,t){var n=e,a=n.fileext;return"text"===t?"image"===n.previewmode?Object(U["jsx"])(y["a"],{}):"pdf"===a?Object(U["jsx"])(E["a"],{}):Object(U["jsx"])(S["a"],{}):["doc","docx","html","mov","mp3","mp4","pdf","ppt","pptx","psd","rar","wav","xls","xlsx","zip"].includes(a)?Object(U["jsx"])("img",{src:"/attachment/".concat(a,".png"),alt:""}):Object(U["jsx"])(b["a"],{title:n.name,children:Object(U["jsxs"])(U["Fragment"],{children:[Object(U["jsx"])("img",{src:"/attachment/otherfile.png",alt:""})," "]})})},Je=function(){re&&(ce(!1),F({type:"modules/refreshRecord",payload:{moduleName:X,recordId:A[Q]}}))};return 0!==T.length||ne.add&&Object(B["d"])(N,A)?Object(U["jsxs"])(U["Fragment"],{children:[Object(U["jsx"])(r["a"],{placement:"rightTop",trigger:"click",visible:he,destroyTooltipOnHide:!0,onVisibleChange:function(e){_e(Y||e),Je()},content:Object(U["jsx"])(c["a"],{size:"small",title:"".concat(A[$],"\u7684\u9644\u4ef6"),extra:Object(U["jsxs"])(l["b"],{children:[Object(U["jsx"])("span",{}),Object(U["jsx"])(b["a"],{title:"\u5c06\u6240\u6709\u9644\u4ef6\u6587\u4ef6\u538b\u7f29\u6210.zip\u6587\u4ef6\u540e\u4e0b\u8f7d",children:Object(U["jsx"])(C["a"],{onClick:qe})}),Object(U["jsx"])("span",{}),"text"===fe?Object(U["jsx"])("a",{children:Object(U["jsx"])(I["a"],{onClick:function(){return me("text")}})}):Object(U["jsx"])(I["a"],{onClick:function(){return me("text")}}),"picture"===fe?Object(U["jsx"])("a",{children:Object(U["jsx"])(D["a"],{onClick:function(){return me("picture")}})}):Object(U["jsx"])(D["a"],{onClick:function(){return me("picture")}}),"picture-card"===fe?Object(U["jsx"])("a",{children:Object(U["jsx"])(k["a"],{onClick:function(){return me("picture-card")}})}):Object(U["jsx"])(k["a"],{onClick:function(){return me("picture-card")}}),Object(U["jsx"])("span",{}),Object(U["jsx"])(b["a"],{title:"".concat(le?"\u5728\u65b0\u6807\u7b7e\u9875":"\u5728\u5f53\u524d\u9875","\u4e2d\u9884\u89c8PDF\u7c7b\u6587\u4ef6"),children:Object(U["jsx"])(w["a"],{rotate:le?90:-90,onClick:function(){J=!J,de(J)}})}),Object(U["jsx"])(b["a"],{title:"\u9644\u4ef6\u6240\u6709\u5c5e\u6027",children:Object(U["jsx"])(P["a"],{onClick:function(){Je(),_e(!1),we(!0)}})})]}),children:Object(U["jsx"])(s["a"],Object(o["a"])(Object(o["a"])({},We),{},{onPreview:ze,onDownload:Ve,iconRender:Ge,children:Ue}))}),children:Object(U["jsxs"])("span",{className:L.a.attachmentfield,children:[0===T.length?"":Object(U["jsx"])(S["a"],{}),Le]})}),Object(U["jsx"])(i["a"],{title:Object(U["jsxs"])("span",{style:{display:"flex"},children:[Object(U["jsx"])("span",{style:{flex:1},children:Se.title}),Object(U["jsx"])("span",{style:{marginRight:"32px"},className:"ant-drawer-close",children:Object(U["jsx"])(b["a"],{title:"\u5728\u65b0\u6807\u7b7e\u9875\u4e2d\u6253\u5f00pdf\u6587\u4ef6",children:Object(U["jsx"])(w["a"],{rotate:90,onClick:function(){Se.ispdf?Object(K["attachmentPdfOpenPreview"])(Se.uid,Se.filename):Object(_["A"])(Se.url,Se.title,"notimage"),ve(!1)}})})})]}),placement:"right",closable:!0,visible:ge,width:"80%",bodyStyle:{padding:0,margin:0},style:{zIndex:1e6},onClose:function(){ve(!1)},afterVisibleChange:function(e){Y=e},children:Object(U["jsx"])("iframe",{style:_["y"]?{height:"".concat(document.body.clientHeight-32-22,"px")}:{},src:Se.url,width:"100%",height:"100%",marginWidth:0,title:"drawepdfpreview"})}),Object(U["jsx"])(a["a"],{visible:ke,destroyOnClose:!0,onCancel:function(){we(!1)},title:Object(U["jsxs"])(U["Fragment"],{children:[" ",Object(U["jsx"])(S["a"],{})," ".concat(A[$],"\u7684\u9644\u4ef6\u5217\u8868")]}),footer:!1,width:"80%",children:Object(U["jsx"])(W,{moduleName:X,idvalue:A[N.primarykey],titlevalue:A[N.namefield],readOnly:!ne.edit})})]}):null},Y=function(e){var t=e.record,n=e._recno,a=e.moduleInfo,i=e.dispatch;return Object(U["jsx"])(H,{value:t.attachmentdata,record:t,_recno:n,moduleInfo:a,dispatch:i,isLink:!0,readonly:!1})}},hCsx:function(e,t,n){"use strict";var a=n("6BL2"),i=n("hfUJ");e.exports=function(e,t,n,r){var c=n.getBusinessObject,o=a.textField({id:"historyTimeToLive",label:r("History Time To Live"),modelProperty:"historyTimeToLive",get:function(e,t){var n=c(e),a=n.get("activiti:historyTimeToLive");return{historyTimeToLive:a||""}},set:function(e,t){var n=c(e);return i.updateBusinessObject(e,n,{"activiti:historyTimeToLive":t.historyTimeToLive||void 0})}});return[o]}},hfUJ:function(e,t,n){"use strict";var a={};e.exports=a,a.updateProperties=function(e,t){return{cmd:"element.updateProperties",context:{element:e,properties:t}}},a.updateBusinessObject=function(e,t,n){return{cmd:"properties-panel.update-businessobject",context:{element:e,businessObject:t,properties:n}}},a.addElementsTolist=function(e,t,n,a){return{cmd:"properties-panel.update-businessobject-list",context:{element:e,currentObject:t,propertyName:n,objectsToAdd:a}}},a.removeElementsFromList=function(e,t,n,a,i){return{cmd:"properties-panel.update-businessobject-list",context:{element:e,currentObject:t,propertyName:n,referencePropertyName:a,objectsToRemove:i}}},a.addAndRemoveElementsFromList=function(e,t,n,a,i,r){return{cmd:"properties-panel.update-businessobject-list",context:{element:e,currentObject:t,propertyName:n,referencePropertyName:a,objectsToAdd:i,objectsToRemove:r}}},a.setList=function(e,t,n,a){return{cmd:"properties-panel.update-businessobject-list",context:{element:e,currentObject:t,propertyName:n,updatedObjectList:a}}}},hgP1:function(e,t,n){"use strict";var a=n("emvA").getBusinessObject,i=n("EWYV"),r=n("Nw6e"),c=n("gkHi"),o=n("hfUJ"),s=n("jd30");function l(e,t){return c.getInputOutput(e,t)}function d(e){return c.getConnector(e)}function u(e,t){return c.getInputParameters(e,t)}function p(e,t){return c.getOutputParameters(e,t)}function f(e,t,n){return c.getInputParameter(e,t,n)}function m(e,t,n){return c.getOutputParameter(e,t,n)}function b(e,t,n,a){return i.createElement(e,a,t,n)}function j(e,t,n){return b("activiti:InputOutput",e,t,n)}function h(e,t,n,a){return b(e,t,n,a)}function _(e,t){return c.isInputOutputSupported(e,t)}function O(e,t){return c.areOutputParametersSupported(e,t)}e.exports=function(e,t,n,i){var c={"activiti:Map":i("Map"),"activiti:List":i("List"),"activiti:Script":i("Script")};n=n||{};var b=!!n.insideConnector,x=n.idPrefix||"",g=function(e,t){var n=I&&I.getSelected(e,t)||{idx:-1},a=f(e,b,n.idx);return!a&&D&&(n=D.getSelected(e,t),a=m(e,b,n.idx)),a},v={getSelectedParameter:g},y=v.entries=[];if(!_(e))return v;var E=function(e,n,a){return function(a,i,r){var c=[],s=l(a,b);if(!s){var u=b?d(a):i;s=j(u,t,{inputParameters:[],outputParameters:[]}),b?c.push(o.updateBusinessObject(a,u,{inputOutput:s})):c.push(o.addAndRemoveElementsFromList(a,i,"values","extensionElements",[s],[]))}var p=h(e,s,t,{name:r});return c.push(o.addElementsTolist(a,s,n,[p])),c}},S=function(e,t,n){return function(i,c,s,u){var p=l(i,b),f=e(i,b,u),m=[];m.push(o.removeElementsFromList(i,p,t,null,[f]));var j=p.get(t).length-1,h=(p.get(n)||[]).length;if(!j&&!h)if(b){var _=d(i);m.push(o.updateBusinessObject(i,_,{inputOutput:void 0}))}else m.push(r.removeEntry(a(i),i,p));return m}},C=function(e){return function(t,n,a,i,r,o){var s=e(t,b,o),l="Text",d=s.get("definition");if("undefined"!==typeof d){var u=d.$type;l=c[u]}a.text=(r||"")+" : "+l}},I=s(e,t,{id:x+"inputs",label:i("Input Parameters"),modelProperty:"name",prefix:"Input",resizable:!0,createExtensionElement:E("activiti:InputParameter","inputParameters"),removeExtensionElement:S(f,"inputParameters","outputParameters"),getExtensionElements:function(e){return u(e,b)},onSelectionChange:function(e,t,n,a){D&&D.deselect(e,t)},setOptionLabelValue:C(f)});if(y.push(I),O(e,b)){var D=s(e,t,{id:x+"outputs",label:i("Output Parameters"),modelProperty:"name",prefix:"Output",resizable:!0,createExtensionElement:E("activiti:OutputParameter","outputParameters"),removeExtensionElement:S(m,"outputParameters","inputParameters"),getExtensionElements:function(e){return p(e,b)},onSelectionChange:function(e,t,n,a){I.deselect(e,t)},setOptionLabelValue:C(m)});y.push(D)}return v}},ihRo:function(e,t,n){"use strict";var a=n("5QZp").query,i=n("5QZp").clear,r=n("emvA").is,c=n("bNQv"),o=n("5QZp").domify,s=n("5qT8").default,l=/\s/,d=/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i,u=/^[a-z_][\w-.]*$/i,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function f(e){if(e.selectedIndex>=0)return e.options[e.selectedIndex].value}function m(e,t){var n=a(e,t);return f(n)}function b(e){var t=e;while(t.$parent)t=t.$parent;return t}function j(e,t){var n=e||[],a=[];return c(n,(function(e){r(e,t)&&a.push(e)})),a}function h(e,t){var n=b(e);return j(n.rootElements,t)}function _(e){while(e.firstChild)e.removeChild(e.firstChild)}function O(e){return e.push({label:"",value:"",name:""})}function x(e,t){var n=[],a=h(e,t);return c(a,(function(e){n.push({label:(e.name||"")+" (id="+e.id+")",value:e.id,name:e.name})})),n}function g(e,t,n,r){var s=x(t,n);O(s);var l=a(e,r);return i(l),c(s,(function(e){var t=o('<option value="'+I(e.value)+'">'+I(e.label)+"</option>");l.appendChild(t)})),s}function v(e,t,n){var a=e.$model.ids.assigned(t),i=a&&a!==e;return!t||i?n("Element must have an unique id."):y(t,n)}function y(e,t){return E(e)?t("Id must not contain spaces."):u.test(e)?void 0:d.test(e)?t("Id must not contain prefix."):t("Id must be a valid QName.")}function E(e){return l.test(e)}function S(e){var t=new s([32,32,1]);return t.nextPrefixed(e)}function C(e){var t,n="click";if(document.createEvent){try{t=new MouseEvent(n,{view:window,bubbles:!0,cancelable:!0})}catch(a){t=document.createEvent("MouseEvent"),t.initEvent(n,!0,!0)}return e.dispatchEvent(t)}return t=document.createEventObject(),e.fireEvent("on"+n,t)}function I(e){return e=""+e,e&&e.replace(/[&<>"']/g,(function(e){return p[e]}))}e.exports.selectedOption=f,e.exports.selectedType=m,e.exports.getRoot=b,e.exports.filterElementsByType=j,e.exports.findRootElementsByType=h,e.exports.removeAllChildren=_,e.exports.addEmptyParameter=O,e.exports.refreshOptionsModel=x,e.exports.updateOptionsDropDown=g,e.exports.isIdValid=v,e.exports.validateId=y,e.exports.containsSpace=E,e.exports.nextId=S,e.exports.triggerClickEvent=C,e.exports.escapeHTML=I},iku1:function(e,t,n){"use strict";var a=n("XWga"),i=n("asz2").getTemplate,r=n("asz2").getDefaultTemplate;function c(e,t,n,i){e.registerHandler("propertiesPanel.flowable.changeTemplate",a),n.on(["commandStack.shape.create.postExecuted"],(function(n){o(n.context.shape,t,e)})),n.on(["commandStack.connection.create.postExecuted"],(function(n){o(n.context.connection,t,e)}))}function o(e,t,n){if(!i(e,t)&&r(e,t)){var a="propertiesPanel.flowable.changeTemplate",c={element:e,newTemplate:r(e,t)};n.execute(a,c)}}c.$inject=["commandStack","elementTemplates","eventBus","elementRegistry"],e.exports={__init__:[c]}},j5Qg:function(e,t,n){e.exports={headerSearch:"headerSearch___RN1il",input:"input___3Vzpl",show:"show___VZRKu"}},jQdF:function(e,t,n){e.exports={onetomanyfieldinfo:"onetomanyfieldinfo___2qutp"}},jZwI:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));n("14J3");var a=n("BMrR"),i=(n("miYZ"),n("tsqr")),r=(n("sRBo"),n("kaz8")),c=(n("giR+"),n("fyUT")),o=(n("OaEy"),n("2fM7")),s=(n("O3gP"),n("lrIw")),l=(n("jCWc"),n("kPKH")),d=(n("5NDa"),n("5rEg")),u=n("k1fw"),p=(n("y8nQ"),n("Vl3Y")),f=n("tJVT"),m=n("q1tI"),b=n("79mi"),j=n("4i/N"),h=(n("Q9mQ"),n("diRs")),_=n("1x1c"),O=n("mzdz"),x=n("nKUr"),g=function(e){var t=e.title,n=e.moduleName,a=e.callback,i=e.defaultFieldahead,r=Object(m["useState"])(!1),c=Object(f["a"])(r,2),o=c[0],s=c[1],l=Object(m["useRef"])();return Object(x["jsx"])(h["a"],{visible:o,onVisibleChange:function(e){return s(e)},title:t,trigger:["click"],overlayStyle:{maxWidth:"80%",maxHeight:"".concat(document.body.clientHeight-200,"px"),minHeight:"300px",overflow:"auto"},content:Object(x["jsx"])(O["a"],{moduleName:n,defaultFieldahead:i,ref:l,onSelect:function(e){s(!1),a(e)}}),children:Object(x["jsx"])(_["a"],{})})},v=n("79+z"),y=n("/9ir"),E=[{value:"fieldset"},{value:"panel"},{value:"tabpanel"},{value:"fieldcontainer"},{value:"container"},{value:"approvepanel"},{value:"approvehistory"},{value:"approvediagram"}],S=Object(m["forwardRef"])((function(e,t){var n=e.init,h=e.moduleName,_=p["a"].useForm(),O=Object(f["a"])(_,1),S=O[0];return Object(m["useEffect"])((function(){S.resetFields(),S.setFieldsValue(Object(v["i"])(Object(u["a"])({},n)))}),[n]),Object(m["useImperativeHandle"])(t,(function(){return{getValues:function(){return S.getFieldsValue()}}})),Object(x["jsx"])(p["a"],{className:"moduleform",form:S,size:"middle",autoComplete:"off",labelCol:{flex:"0 0 90px"},children:Object(x["jsxs"])(a["a"],{gutter:16,children:[Object(x["jsx"])(l["a"],{span:12,children:Object(x["jsx"])(p["a"].Item,{label:"\u663e\u793a\u5185\u5bb9",name:"udftitle",children:Object(x["jsx"])(d["a"],{placeholder:"\u5982\u679c\u4e3a\u9ed8\u8ba4\u663e\u793a\u5185\u5bb9\uff0c\u8bf7\u4e0d\u8981\u4fee\u6539\u6b64\u5b57\u6bb5\u3002"})})}),Object(x["jsx"])(l["a"],{span:12,children:Object(x["jsx"])(p["a"].Item,{label:"xtype\u7c7b\u578b",name:"xtype",children:Object(x["jsx"])(s["a"],{options:E})})}),Object(x["jsx"])(l["a"],{span:12,children:Object(x["jsx"])(p["a"].Item,{label:"\u5bb9\u5668layout",name:"layout",children:Object(x["jsx"])(o["a"],{allowClear:!0,children:Object(b["b"])("990026").data.map((function(e){var t=e.value,n=e.text;return Object(x["jsx"])(o["a"].Option,{value:t||"",children:n},"key-".concat(t))}))})})}),Object(x["jsx"])(l["a"],{span:12,children:Object(x["jsx"])(p["a"].Item,{label:"\u5e03\u5c40\u4f4d\u7f6e",name:"region",children:Object(x["jsx"])(o["a"],{allowClear:!0,children:Object(b["b"])("990024").data.map((function(e){var t=e.value,n=e.text;return Object(x["jsx"])(o["a"].Option,{value:t||"",children:n},"key-".concat(t))}))})})}),Object(x["jsx"])(l["a"],{span:6,children:Object(x["jsx"])(p["a"].Item,{label:"\u884c\u6570",name:"rows",children:Object(x["jsx"])(c["a"],{})})}),Object(x["jsx"])(l["a"],{span:6,children:Object(x["jsx"])(p["a"].Item,{label:"\u5217\u6570",name:"cols",children:Object(x["jsx"])(c["a"],{})})}),Object(x["jsx"])(l["a"],{span:12,children:Object(x["jsx"])(p["a"].Item,{label:"\u5404\u5217\u5bbd\u5ea6",name:"widths",children:Object(x["jsx"])(d["a"],{placeholder:"\u5982\uff1a150,50%,150,25%,25%"})})}),Object(x["jsx"])(l["a"],{span:6,children:Object(x["jsx"])(p["a"].Item,{label:"\u5408\u5e76\u884c\u6570",name:"rowspan",children:Object(x["jsx"])(c["a"],{})})}),Object(x["jsx"])(l["a"],{span:6,children:Object(x["jsx"])(p["a"].Item,{label:"\u5408\u5e76\u5217\u6570",name:"colspan",children:Object(x["jsx"])(c["a"],{})})}),Object(x["jsx"])(l["a"],{span:6,children:Object(x["jsx"])(p["a"].Item,{label:"\u5bbd\u5ea6",name:"width",children:Object(x["jsx"])(c["a"],{})})}),Object(x["jsx"])(l["a"],{span:6,children:Object(x["jsx"])(p["a"].Item,{label:"\u9ad8\u5ea6",name:"height",children:Object(x["jsx"])(c["a"],{})})}),Object(x["jsx"])(l["a"],{span:5,children:Object(x["jsx"])(p["a"].Item,{label:"\u53ef\u6298\u53e0",name:"collapsible",valuePropName:"checked",children:Object(x["jsx"])(r["a"],{})})}),Object(x["jsx"])(l["a"],{span:5,children:Object(x["jsx"])(p["a"].Item,{label:"\u9ed8\u8ba4\u6298\u53e0",name:"collapsed",valuePropName:"checked",children:Object(x["jsx"])(r["a"],{})})}),Object(x["jsx"])(l["a"],{span:5,children:Object(x["jsx"])(p["a"].Item,{label:"\u5206\u79bblabel",name:"separatelabel",valuePropName:"checked",children:Object(x["jsx"])(r["a"],{})})}),Object(x["jsx"])(l["a"],{span:5,children:Object(x["jsx"])(p["a"].Item,{label:"\u9690\u85cflabel",name:"hiddenlabel",valuePropName:"checked",children:Object(x["jsx"])(r["a"],{})})}),Object(x["jsx"])(l["a"],{span:4,children:Object(x["jsx"])(p["a"].Item,{label:"\u663e\u793a\u5b57\u6bb5tip",name:"showdetailtip",valuePropName:"checked",children:Object(x["jsx"])(r["a"],{})})}),Object(x["jsx"])(l["a"],{span:24,children:Object(x["jsx"])(p["a"].Item,{label:"\u5173\u8054\u5b50\u6a21\u5757",name:"fieldahead",children:Object(x["jsx"])(d["a"],{readOnly:!0,addonAfter:Object(x["jsx"])(j["a"],{onClick:function(){S.setFieldsValue({subdataobjecttitle:void 0,fieldahead:void 0})}})})})}),Object(x["jsx"])(l["a"],{span:24,children:Object(x["jsx"])(p["a"].Item,{label:"\u5173\u8054\u5b50\u6a21\u5757",name:"subdataobjecttitle",children:Object(x["jsx"])(d["a"],{readOnly:!0,addonAfter:Object(x["jsx"])(g,{moduleName:h,title:"\u9009\u62e9\u5b50\u6a21\u5757",defaultFieldahead:n.fieldahead,callback:function(e){e.itemId&&-1!==e.itemId.indexOf(".with.")?S.setFieldsValue({subdataobjecttitle:e.qtip,fieldahead:e.itemId}):i["default"].warn("\u8bf7\u9009\u62e9\u5f53\u524d\u6a21\u5757\u7684\u5b50\u6a21\u5757\uff01")}})})})}),Object(x["jsx"])(l["a"],{span:24,children:Object(x["jsx"])(p["a"].Item,{label:"\u9644\u52a0\u8bbe\u7f6e",name:"othersetting",children:Object(x["jsx"])(y["a"],{jsonFieldProps:{height:"180px"}})})})]})})}))},jd30:function(e,t,n){"use strict";var a=n("emvA").getBusinessObject,i=n("5QZp").query,r=n("5QZp").closest,c=n("5QZp").domify,o=n("bNQv"),s=n("EWYV"),l=n("hfUJ"),d=n("ihRo"),u=d.escapeHTML;function p(e,t){var n=r(e,"div.bpp-properties-tab"),a="select[name=selectedExtensionElement]"+(t?"[id=cam-extensionElements-"+t+"]":"");return i(a,n)}function f(e,t){var n=p(e,t);return{value:(n||{}).value,idx:(n||{}).selectedIndex}}function m(e){return e+="_",d.nextId(e)}var b="create-extension-element",j="remove-extension-element";e.exports=function(e,t,n,i){var r=n.id,d=n.prefix||"elem",h=n.label||r,_=!1!==n.idGeneration||n.idGeneration,O=n.businessObject||a(e),x=n.modelProperty||"id",g=n.getExtensionElements,v=n.createExtensionElement,y="function"===typeof v,E=n.removeExtensionElement,S="function"===typeof E,C=n.onSelectionChange,I=n.hideExtensionElements,D="function"===typeof I,k=n.setOptionLabelValue,w=n.size||5,P=n.resizable,T=n.reference||void 0,M=function(e,t,n,a){if("function"===typeof C)return C(e,t,n,a)},A=function(e){return'<option value="'+u(e)+'" data-value data-name="extensionElementValue">'+u(e)+"</option>"},R=function(e,t){P&&(e.size=t>w?t:w)};return{id:r,html:'<div class="bpp-row bpp-element-list" '+(D?'data-show="hideElements"':"")+'><label for="cam-extensionElements-'+u(r)+'">'+u(h)+'</label><div class="bpp-field-wrapper"><select id="cam-extensionElements-'+u(r)+'"name="selectedExtensionElement" size="'+u(w)+'" data-list-entry-container data-on-change="selectElement"></select>'+(y?'<button class="add" id="cam-extensionElements-create-'+u(r)+'" data-action="createElement"><span>+</span></button>':"")+(S?'<button class="clear" id="cam-extensionElements-remove-'+u(r)+'" data-action="removeElement" data-disable="disableRemove"><span>-</span></button>':"")+"</div></div>",get:function(e,t){var n=g(e,t),a=[];o(n,(function(e){a.push({extensionElementValue:e.get(x)})}));var i=p(t.parentNode,r);return R(i,a.length),a},set:function(e,n,i){var r=this.__action;delete this.__action,O=O||a(e);var c=T&&O.get(T)?O.get(T):O,o=c.get("extensionElements");if(r.id===b){var d=[];return o||(o=s.createElement("bpmn:ExtensionElements",{values:[]},c,t),d.push(l.updateBusinessObject(e,c,{extensionElements:o}))),d.push(v(e,o,r.value,i)),d}if(r.id===j)return E(e,o,r.value,r.idx,i)},createListEntryTemplate:function(e,t,n){return R(n,n.options.length+1),A(e.extensionElementValue)},deselect:function(e,t){var n=p(t,r);n.selectedIndex=-1},getSelected:function(e,t){return f(t,r)},setControlValue:function(e,t,n,a,i,r){t.value=i,k?k(e,t,n,a,i,r):t.text=i},createElement:function(e,t){var n;_&&(n=m(d));var a=p(t,r),i=c(A(n));return a.appendChild(i),a.lastChild.selected="selected",M(e,t),R(a,a.options.length),this.__action={id:b,value:n},!0},removeElement:function(e,t){var n=f(t,r),a=p(t,r);return a.removeChild(a.options[n.idx]),R(a,a.options.length),this.__action={id:j,value:n.value,idx:n.idx},!0},hideElements:function(e,t,n,a){return!I(e,t,n,a)},disableRemove:function(e,t,n,a){return(f(t,r)||{}).idx<0},selectElement:M}}},jjL0:function(e,t,n){"use strict";var a=n("P7XM"),i=n("asz2").getTemplate,r=n("Nqmu"),c=1100;function o(e,t){r.call(this,e,c),this.isEntryVisible=function(e,n){var a=i(n,t);if(a&&!u(e,a))return!1},this.isPropertyEditable=function(e,n,a){var r=i(a,t);if(r&&!p(e,r))return!1}}o.$inject=["eventBus","elementTemplates"],a(o,r),e.exports=o;var s=/^custom-/,l={_all:!1,id:!0,name:!0};function d(e){return s.test(e.id)}function u(e,t){var n=e.id;if("elementTemplate-chooser"===n||d(e))return!0;var a=t.entriesVisible||l;if("boolean"===typeof a)return a;var i=a._all||!1,r=a[n];return!0===i&&!1!==r||!1===i&&!0===r}function p(e,t){var n;return!d(e)||(n=f(t,e),n&&!1!==n.editable)}function f(e,t){var n,a=t.id.replace("custom-"+e.id+"-","");if(-1!==a.indexOf("-")){var i=a.split("-");if(2===i.length){var r=i[0].replace(/_/g,":");if(n=parseInt(i[1],10),r&&!isNaN(n))return e.scopes[r].properties[n]}}else if(n=parseInt(a,10),!isNaN(n))return e.properties[n];throw new Error("cannot extract property index for entry <"+t.id+">")}},k3O3:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("k1fw"),i=(n("B9cy"),n("Ol7k")),r=n("WGjm"),c=n("gx9M"),o=n("WTWM"),s=n("nKUr"),l=i["a"].Sider,d=function(e){var t=e.moduleState,n=e.dispatch,i=t.moduleName,d=Object(o["x"])(i);if(!d.navigateSchemes.length)return null;var u=t.currSetting.navigate.visible,p=function(){n({type:"modules/toggleNavigate",payload:{moduleName:i,toggle:"visible"}})},f=120,m={enable:{top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},minWidth:u?f:void 0,maxWidth:500,size:u?void 0:{width:0,height:0},onResizeStop:function(e,t,n){var a=parseInt(n.style.width,10);a<=f&&setTimeout((function(){p()}),0)}};return u?Object(s["jsx"])(r["a"],Object(a["a"])(Object(a["a"])({},m),{},{children:Object(s["jsx"])(l,{style:{marginBottom:"20px",minWidth:"120px"},collapsed:!1,collapsible:!0,theme:"light",breakpoint:"lg",width:"auto",collapsedWidth:"0",zeroWidthTriggerStyle:{width:"24px",right:u?"-24px":"-8px"},onBreakpoint:function(e){e&&u&&p()},onCollapse:function(e,t){"clickTrigger"===t&&p()},children:Object(s["jsx"])(c["a"],{moduleState:t,dispatch:n})},"visibleSider")})):Object(s["jsx"])(l,{style:{marginBottom:"20px",minWidth:"120px"},collapsed:!0,collapsible:!0,theme:"light",collapsedWidth:"0",zeroWidthTriggerStyle:{width:"24px",right:u?"-24px":"-8px"},onCollapse:function(e,t){"clickTrigger"===t&&p()}},"invisibleSider")}},kDbe:function(e,t,n){"use strict";n.d(t,"c",(function(){return tt})),n.d(t,"b",(function(){return at})),n.d(t,"a",(function(){return rt}));n("jCWc");var a=n("kPKH"),i=(n("14J3"),n("BMrR")),r=(n("IzEo"),n("bx4M")),c=(n("tU7J"),n("wFql")),o=(n("DYRE"),n("zeV3")),s=(n("5Dmo"),n("3S7+")),l=(n("BoS7"),n("Sdc0")),d=(n("iQDF"),n("+eQT")),u=(n("8dk+"),n("eZ87")),p=(n("pC0b"),n("GzdX")),f=(n("giR+"),n("fyUT")),m=(n("sRBo"),n("kaz8")),b=(n("nRaC"),n("5RzL")),j=(n("7Kak"),n("9yH6")),h=(n("O3gP"),n("lrIw")),_=(n("OaEy"),n("2fM7")),O=n("k1fw"),x=(n("5NDa"),n("5rEg")),g=(n("Q9mQ"),n("diRs")),v=n("jrin"),y=n("tJVT"),E=(n("Znn+"),n("ZTPi")),S=(n("y8nQ"),n("Vl3Y")),C=n("q1tI"),I=n("9kvl"),D=n("l+S1"),k=n("Fvcw"),w=n("1x1c"),P=n("+YFz"),T=n("8Skl"),M=n("UESt"),A=n("p8w8"),R=n("8kvQ"),N=n("/Faj"),L=n("yU8i"),B=n("79+z"),K=n("0ioL"),F=n("79mi"),U=n("WTWM"),W=n("jQdF"),V=n.n(W),q=n("jE+T"),z=n("sy1d"),G=n("s4NR"),J=n.n(G),H=n("nKUr"),Y=_["a"].Option,Z=function(e,t){var n,a,i=e.fieldDefine,r=e.fieldProps,c=e.currRecord,o=Object(C["useState"])([]),s=Object(y["a"])(o,2),l=s[0],d=s[1];Object(C["useEffect"])((function(){var e=c[i.manyToOneInfo.keyField],t=c[i.manyToOneInfo.nameField];e&&t&&(l.find((function(t){return t.value===e}))||(d([{value:e,text:t}]),setTimeout((function(){d([])}),0)))}),[c]);var u=function(e,t){function r(){var a=J.a.encode({moduleName:i.fieldtype,mainlinkage:!0,query:e});Object(I["f"])("".concat(z["API_HEAD"],"/platform/dataobject/fetchcombodata.do?").concat(a)).then((function(a){n===e&&t(a)}))}a&&(clearTimeout(a),a=null),n=e,a=setTimeout(r,300)},p=function(e){e&&e.length>=2?u(e,(function(e){"41"!==t&&"51"!==t||0===e.length&&e.push({text:"".concat(n,"(\u65b0\u5efa)"),value:n}),d(e)})):d([])},f=l.map((function(e){return Object(H["jsx"])(Y,{value:e.value,children:e.text},e.value)}));return Object(H["jsx"])(_["a"],Object(O["a"])(Object(O["a"])({},r),{},{showSearch:!0,allowClear:!0,defaultActiveFirstOption:!1,showArrow:!0,filterOption:!1,onSearch:p,notFoundContent:null,getPopupContainer:function(e){return e.parentNode},children:f}))},Q=n("ZM8D"),$=n("r5oo"),X=(n("P2fV"),n("NJEC")),ee=(n("2qtc"),n("kLXV")),te=(n("miYZ"),n("tsqr")),ne=n("2/Rp"),ae=n("Lyp1"),ie=n("6ZR6"),re=n("MjNr"),ce=n("oBTY"),oe=20,se="approve_comments",le="|||",de=function(e){if(e){var t=localStorage.getItem(se),n=t?t.split(le):[],a=n.findIndex((function(t){return t===e}));-1!==a&&0===a||(-1===a?n.splice(0,0,e):0!==a&&n.splice.apply(n,[0,0].concat(Object(ce["a"])(n.splice(a,1)))),localStorage.setItem(se,n.filter((function(e,t){return t<oe})).join(le)))}},ue=function(){var e=localStorage.getItem(se),t=e?e.split(le):[];return t.map((function(e){return{value:e}}))},pe=new Map,fe=S["a"].Item,me=function(e,t){var n="".concat(e,"+").concat(t);if(!pe.has(n)){var a=Object(z["syncRequest"])("".concat(z["API_HEAD"],"/platform/workflow/task/getdefinfo.do"),{params:{procdefid:e,taskkey:t}});Array.isArray(a.outgoing)&&a.outgoing.sort((function(e,t){return e.orderno&&t.orderno?e.orderno-t.orderno:e.id<t.id?-1:1})),pe.set(n,a)}return pe.get(n)},be="approve_context_",je=function(e){var t=e.moduleInfo,n=e.record,r=e.dispatch,c=e.moduleState,l=e.callback,u=S["a"].useForm(),p=Object(y["a"])(u,1),b=p[0],j=Object(C["useState"])({}),_=Object(y["a"])(j,2),g=_[0],v=_[1];Object(C["useEffect"])((function(){v({}),b.resetFields(),b.setFieldsValue(Object(re["b"])(n,t))}),[n]);var E={flex:"0 0 120px"},I=n.actProcDefId,D=n.actTaskDefKey,k=me(I,D),w=function(e){var a=e.submitData,i=e.button,o=t.primarykey,s=t.namefield,d=t.modulename,u=n[o],p=n[s],f=a[be];de(f);var m=Object(O["a"])({},a);delete m[be],Object.getOwnPropertyNames(m).length>0?m[t.primarykey]=u:m=null,Object(z["default"])("".concat(z["API_HEAD"],"/platform/workflow/runtime/complete.do"),{params:{objectName:d,id:u,name:p,taskId:n.actExecuteTaskId,outgoingid:i.id,outgoingname:i.name,type:i.name,content:f||"",moduledata:m?JSON.stringify(m):m}}).then((function(e){if(e.success){v({});var n="\u300e".concat(p,"\u300f\u7684 ").concat(i.name," \u64cd\u4f5c\u5df2\u5b8c\u6210!");te["default"].success(n),Object(ie["b"])(),0===c.dataSource.length?(r({type:"modules/formStateChanged",payload:{moduleName:d,formState:{visible:!1,formType:"approve",currRecord:{}}}}),l&&setTimeout((function(){l()}),0)):r({type:"modules/refreshRecord",payload:{moduleName:d,recordId:u}})}else{var a=e.message?[Object(H["jsx"])("div",{children:Object(H["jsx"])("li",{children:"string"===typeof e.message?e.message:JSON.stringify(e.message)})})]:[],o=e.data;o&&(v(o),Object.keys(o).forEach((function(e){var n=Object(U["n"])(e,t);a.push(Object(H["jsx"])("div",{children:Object(H["jsxs"])("li",{children:[Object(H["jsx"])("b",{children:n?n.fieldtitle:e}),"\uff1a",o[e]]},"key_".concat(e))}))}))),ee["a"].error({width:500,title:"\u8bb0\u5f55\u4fdd\u5b58\u65f6\u53d1\u751f\u9519\u8bef",content:Object(H["jsx"])("ul",{style:{listStyle:"decimal"},children:a})})}}))},T=function(){var e;return null===(e=k.formdata)||void 0===e?void 0:e.map((function(e){var t,n=(e.type||"string").toLowerCase(),i=e.colspan||1,r={};switch(n){case"double":case"float":t=Object(H["jsx"])(f["a"],{className:"double",precision:2,formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{width:"138px"}});break;case"int":case"integer":t=Object(H["jsx"])(f["a"],{precision:0,className:"integer",formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{width:"120px"}});break;case"percent":t=tt(2,{});break;case"date":t=Object(H["jsx"])(d["a"],{format:q["a"]});break;case"datetime":case"timestamp":t=Object(H["jsx"])(d["a"],{showTime:!0,format:q["c"]});break;case"boolean":t=Object(H["jsx"])(m["a"],{}),r.valuePropName="checked";break;case"string":var c=e.fieldlen;t=c>0&&c<=100?Object(H["jsx"])(x["a"],{maxLength:c,style:c<=10?{maxWidth:"".concat(16*c+24,"px")}:{}}):0===c?Object(H["jsx"])(x["a"].TextArea,{autoSize:!0}):Object(H["jsx"])(x["a"].TextArea,{maxLength:c,autoSize:{maxRows:10}});break;default:}return Object(H["jsx"])(a["a"],{xs:24,md:12*Math.min(i,2),xl:12*Math.min(i,2),children:e.unittext?Object(H["jsxs"])(fe,{label:e.label,labelCol:E,children:[Object(H["jsx"])(fe,Object(O["a"])(Object(O["a"])({noStyle:!0,name:e.id,validateStatus:g[e.id]?"error":void 0,help:g[e.id]||e.help},r),{},{children:t}),e.id),Object(H["jsx"])("span",{style:{paddingLeft:"5px"},children:e.unittext})]},"".concat(e.id,"1")):Object(H["jsx"])(fe,Object(O["a"])(Object(O["a"])({label:e.label,name:e.id,validateStatus:g[e.id]?"error":void 0,help:g[e.id]||e.help},r),{},{labelCol:E,children:t}),e.id)},e.id)}))};return Object(H["jsx"])(S["a"],{className:"moduleform",autoComplete:"off",form:b,children:Object(H["jsxs"])(i["a"],{gutter:16,children:[T(),Object(H["jsx"])(a["a"],{xs:24,children:Object(H["jsx"])(fe,{label:"\u5ba1\u6279\u610f\u89c1",name:be,labelCol:E,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5ba1\u6279\u610f\u89c1"}],children:Object(H["jsx"])(h["a"],{options:ue(),filterOption:function(e,t){return-1!==t.value.toUpperCase().indexOf(e.toUpperCase())},children:Object(H["jsx"])(x["a"].TextArea,{autoSize:{maxRows:10},maxLength:800,style:{minHeight:"54px"}})})},be)},be),Object(H["jsx"])(a["a"],{xs:24,children:Object(H["jsx"])(o["b"],{style:{float:"right",marginTop:"4px"},children:k.outgoing.map((function(e,t){return Object(H["jsx"])(S["a"].Item,{noStyle:!0,shouldUpdate:!0,children:function(n){return Object(H["jsx"])(X["a"],{icon:Object(H["jsx"])(ae["a"],{style:{color:"red"}}),title:"\u786e\u5b9a\u8981\u6267\u884c\u300e".concat(e.name,"\u300f\u7684\u4efb\u52a1\u64cd\u4f5c\u5417?"),onConfirm:function(){n.validateFields().then((function(t){w({submitData:t,button:e})}))},children:Object(H["jsxs"])(ne["a"],{icon:e.icon?Object(H["jsx"])("span",{style:{paddingRight:"4px"},children:Object(B["n"])(e.icon)}):void 0,danger:e.danger,style:e.style,type:e.type||(0===t?"primary":"default"),children:[e.name,e.tooltip?Object(H["jsx"])(s["a"],{title:e.tooltip,placement:"bottom",children:Object(H["jsx"])(P["a"],{})}):null]})})}})}))})},"approve_buttons")]})})},he=n("aYag"),_e=(n("B9cy"),n("Ol7k")),Oe=(n("/zsF"),n("PArb")),xe=n("1qKY"),ge=n("qPJW"),ve=n("mDHv"),ye=n("MzlM"),Ee=n("aoqV"),Se=n("ASZ0"),Ce=n("CYVn"),Ie=n("k3O3"),De=function(e){var t=e.manyToOneInfo,n=Object(C["useContext"])(xe["a"]),a=n.dispatch,i=n.moduleState,c=i.moduleName,s=Object(U["x"])(i.moduleName);Object(C["useEffect"])((function(){var e=Object(U["m"])({moduleName:c});a({type:"modules/init",payload:{initState:Object(O["a"])(Object(O["a"])({},e),{},{currSetting:Object(O["a"])(Object(O["a"])({},e.currSetting),{},{gridSize:"small"})})}})}),[c]);var l=!0,d=s.navigateSchemes.length,u=i.currSetting.navigate.visible;return Object(H["jsxs"])("div",{children:[Object(H["jsxs"])("div",{style:{display:"flex"},children:[Object(H["jsx"])("span",{style:{flex:1,fontSize:"16px",fontWeight:"bold",margin:"8px 8px"},children:"\u9009\u62e9 ".concat(s.title)}),Object(H["jsxs"])(o["b"],{children:[Object(H["jsx"])(Ee["a"],{moduleInfo:s,moduleState:i,manyToOneInfo:t,dispatch:a,readOnly:l}),Object(H["jsx"])(Ce["b"],{moduleState:i,moduleInfo:s,dispatch:a})]})]}),Object(H["jsx"])(Oe["a"],{style:{margin:"8px 0px 0px",padding:0}}),Object(H["jsxs"])(_e["a"],{style:{padding:"16px"},children:[Object(H["jsx"])(Ie["a"],{moduleState:i,dispatch:a}),Object(H["jsxs"])(_e["a"].Content,{style:d&&u?{margin:"0 0 0 16px"}:{},children:[Object(U["q"])(s)?Object(H["jsx"])(Se["c"],{visible:i.currSetting.userFilterRegionVisible,moduleState:i,dispatch:a}):null,Object(H["jsx"])(r["a"],{bordered:!1,bodyStyle:{paddingTop:"0px",paddingBottom:"0px"},children:Object(H["jsx"])(ge["a"],{moduleState:i,moduleInfo:s,dispatch:a,fetchLoading:i.fetchLoading,gridType:"selectfield",readOnly:l,manyToOneInfo:t})})]})]}),Object(H["jsx"])(ye["a"],{moduleInfo:s,moduleState:i,dispatch:a})]})},ke=function(e){var t=e.moduleName,n=e.manyToOneInfo;return Object(H["jsx"])(ve["b"],{moduleName:t,children:Object(H["jsx"])(De,{manyToOneInfo:n})})},we=ke,Pe=n("191G"),Te=n("PpiC"),Me=n("ZhIB"),Ae="digitslen",Re=function(e){var t=e.value,n=e.onChange,a=e.name,i=Object(Te["a"])(e,["value","onChange","name"]),r=i[Ae];return Object(H["jsx"])(f["a"],Object(O["a"])(Object(O["a"])({className:"percent",value:parseFloat((100*(t||0)).toFixed(r-2)),onChange:function(e){var t=parseFloat((e/100).toFixed(r));n(t)}},i),{},{formatter:function(e){return e&&parseFloat("".concat(e))?document.activeElement.id!==a?Me(e).format(Object(B["u"])(r-2)):e:""}}))},Ne=n("TbSD"),Le=n("cTrX"),Be=n("bx7e"),Ke=n("/9ir"),Fe=(n("6UJt"),n("DFOY")),Ue=function(e,t){if(t){var n=[],a=!1,i=function e(i,r){for(var c=0;c<i.length;c+=1){if(a)return;if(n.splice(r,n.length,i[c].value),i[c].value===t)return void(a=!0);if(i[c].children){if(a)return;e(i[c].children,r+1)}}};return i(e,0),a?n:[]}return[]},We=function(e){var t=e.value,n=e.onChange,a=e.options,i=Object(Te["a"])(e,["value","onChange","options"]);return Object(H["jsx"])(Fe["a"],Object(O["a"])(Object(O["a"])({},i),{},{value:Ue(a,t),allowClear:!0,showSearch:!0,options:a,onChange:function(e){e&&e.length?n(e[e.length-1]):n(void 0)},fieldNames:{label:"text",value:"value",children:"children"},getPopupContainer:function(e){return e.parentNode}}))},Ve=We,qe=n("ZhIB"),ze=S["a"].Item,Ge=E["a"].TabPane,Je={};V.a._;var He=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return e.isManyToOne||e.isOneToOne?t?e.manyToOneInfo.nameField:e.manyToOneInfo.keyField:e.fDictionaryid&&t?"".concat(e.fieldname,"_dictname"):e.fieldname},Ye=function(e){var t=e.fieldDefine,n=e.form,a=Object(C["useState"])(!1),i=Object(y["a"])(a,2),r=i[0],c=i[1];return Object(H["jsx"])(g["a"],{trigger:"click",visible:r,onVisibleChange:function(e){return c(e)},overlayClassName:"manytoonepopover",overlayStyle:{width:"80%",maxHeight:"".concat(document.body.clientHeight-200,"px"),overflow:"auto"},content:Object(H["jsx"])(we,{manyToOneInfo:{form:n,setTextValue:function(e){var a,i=(a={},Object(v["a"])(a,He(t),e.value),Object(v["a"])(a,He(t,!0),e.text),a);n.setFieldsValue(i),n.onValuesChange(i,n.getFieldsValue()),c(!1)}},moduleName:t.fieldtype}),children:Object(H["jsx"])(D["a"],{})})},Ze=function(e){var t,n=e.fieldDefine,a=e.fieldProps;if(a.readOnly)return Object(H["jsx"])(x["a"],Object(O["a"])({},a));var i=null===(t=n.propertyvalue)||void 0===t?void 0:t.split(",").map((function(e,t){return Object(H["jsx"])(_["a"].Option,{value:e||"",children:e},"key-".concat(t))}));return n.multiMode?Object(H["jsx"])(_["a"],{mode:n.multiMode,tokenSeparators:[","],allowClear:!0,showSearch:!0,getPopupContainer:function(e){return e.parentNode},children:i}):Object(H["jsx"])(h["a"],Object(O["a"])(Object(O["a"])({},a),{},{allowClear:!0,showSearch:!0,getPopupContainer:function(e){return e.parentNode},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:i}))},Qe=function(e){var t=e.fieldDefine,n=e.fieldProps;if(n.readOnly)return Object(H["jsx"])(x["a"],Object(O["a"])({},n));var a=Object(F["d"])(t.fPropertyid,t.fieldid).map((function(e,t){var n=e.text;return Object(H["jsx"])(_["a"].Option,{value:n||"",children:n},"key-".concat(t.toString()))}));return t.multiMode?Object(H["jsx"])(_["a"],{mode:t.multiMode,tokenSeparators:[","],allowClear:!0,showSearch:!0,getPopupContainer:function(e){return e.parentNode},children:a}):Object(H["jsx"])(h["a"],Object(O["a"])(Object(O["a"])({},n),{},{allowClear:!0,showSearch:!0,getPopupContainer:function(e){return e.parentNode},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:a}))},$e=function(e){var t=e.fieldDefine,n=e.formFieldDefine,a=e.fieldProps;if(a.readOnly)return Object(H["jsx"])(x["a"],Object(O["a"])({},a));var i=Object(F["b"])(t.fDictionaryid||""),r=i.inputmethod,c=i.data;return"40"===r?Object(H["jsx"])(j["a"].Group,Object(O["a"])(Object(O["a"])({},a),{},{buttonStyle:"solid",children:c.map((function(e){var t=e.value,a=e.text;return n.radioButton?Object(H["jsx"])(j["a"].Button,{value:t,children:a},"key-".concat(t)):Object(H["jsx"])(j["a"],{value:t,children:a},"key-".concat(t))}))})):"50"===r?Object(H["jsx"])(j["a"].Group,Object(O["a"])(Object(O["a"])({},a),{},{buttonStyle:"solid",children:c.map((function(e){var t=e.value,n=e.text;return Object(H["jsx"])(j["a"].Button,{value:t,children:n},"key-".concat(t))}))})):Object(H["jsx"])(_["a"],Object(O["a"])(Object(O["a"])({},a),{},{allowClear:!0,showSearch:"10"!==r,getPopupContainer:function(e){return e.parentNode},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:c.map((function(e){var t=e.value,n=e.text;return Object(H["jsx"])(_["a"].Option,{value:t||"",children:("30"===r?"".concat(t,"-"):"")+n},"key-".concat(t))}))}))},Xe=function(e){var t=e.fieldDefine,n=e.currRecord,a=e.formFieldDefine,i=e.fieldProps,r=e.dispatch,c=t.fieldtype,o=t.allowParentValue,s=Object(U["x"])(c);if(i.readOnly)return Object(H["jsx"])(x["a"],Object(O["a"])(Object(O["a"])({},i),{},{suffix:Object(H["jsx"])(he["b"],{id:n[He(t)],moduleInfo:s,dispatch:r})}));var l=s.selectedmode;if("95"===l){var d=Object(U["w"])(c).map((function(e){var t=e.value,n=e.text;return a.radioButton?Object(H["jsx"])(j["a"].Button,{value:t,children:n},"key-".concat(t)):Object(H["jsx"])(j["a"],{value:t,children:n},"key-".concat(t))}));if(d.length<=30)return Object(H["jsx"])(j["a"].Group,Object(O["a"])(Object(O["a"])({buttonStyle:"solid"},i),{},{children:d}));l="20"}if("10"===l||"20"===l||"30"===l){var u=Object(U["w"])(c).map((function(e){var t=e.value,n=e.text;return{value:t,label:("30"===l?"".concat(t,"-"):"")+n}}));return Object(H["jsx"])(_["a"],Object(O["a"])(Object(O["a"])({allowClear:!0,showSearch:"10"!==l},i),{},{options:u,getPopupContainer:function(e){return e.parentNode},filterOption:function(e,t){return t.label&&!!K["a"].match(t.label.toLowerCase(),e.toLowerCase())}}))}if("40"===l||"41"===l||"50"===l||"51"===l)return Z(e,l);if("60"===l){var p=function e(t){return t.map((function(t){return{value:t.value||"",label:t.text,key:t.value,isLeaf:t.leaf,disabled:!!t.disabled,children:t.children&&t.children.length>0?e(t.children):void 0}}))},f=p(Object(U["u"])(c,!!o,!!a.addCodeToText,!!a.shortName));return Object(H["jsx"])(b["a"],Object(O["a"])(Object(O["a"])({},i),{},{treeDefaultExpandAll:!0,allowClear:!0,showSearch:!0,treeNodeFilterProp:"label",treeData:f,getPopupContainer:function(e){return e.parentNode}}))}if("70"===l||"71"===l){var m=function e(t){return t.map((function(t){var n;return n={value:t.objectid||""},Object(v["a"])(n,"70"===l?"label":"text",t.text),Object(v["a"])(n,"key",t.objectid),Object(v["a"])(n,"isLeaf",t.leaf),Object(v["a"])(n,"disabled","70"===l&&!t.leaf),Object(v["a"])(n,"children",t.children&&t.children.length>0?e(t.children):void 0),n}))},h=m(Object(U["v"])(c));return"70"===l?Object(H["jsx"])(b["a"],Object(O["a"])(Object(O["a"])({},i),{},{treeDefaultExpandAll:!0,allowClear:!0,showSearch:!0,treeNodeFilterProp:"label",treeData:h,getPopupContainer:function(e){return e.parentNode}})):Object(H["jsx"])(Ve,Object(O["a"])(Object(O["a"])({},i),{},{changeOnSelect:a.changeOnSelect,options:h}))}if("80"===l){var g=void 0===a.shortName||!!a.shortName,y=Object(U["u"])(c,!0,!1,g);return Object(H["jsx"])(Ve,Object(O["a"])(Object(O["a"])({},i),{},{changeOnSelect:a.changeOnSelect,options:y}))}return Object(H["jsx"])(H["Fragment"],{})},et=function(e){var t=e.fieldDefine,n=e.formFieldDefine,a=e.fieldProps;return n.tagSelect?Object(H["jsx"])(Ne["a"],{hideCheckAll:!!n.hideCheckAll,expandable:n.expandable,expand:!n.expandable||n.expand,children:Object(U["w"])(Object(q["k"])(t.fieldtype)).map((function(e){return Object(H["jsx"])(Ne["a"].Option,{value:e.value,children:e.text},e.value)}))}):"manytomanycheckboxgroup"===n.xtype?Object(H["jsx"])(m["a"].Group,Object(O["a"])(Object(O["a"])({},a),{},{children:Object(U["w"])(Object(q["k"])(t.fieldtype)).map((function(e){return Object(H["jsx"])(m["a"],{value:e.value,children:e.text},e.value)}))})):Object(H["jsx"])(_["a"],Object(O["a"])(Object(O["a"])({mode:"multiple",allowClear:!0},a),{},{getPopupContainer:function(e){return e.parentNode},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:Object(U["w"])(Object(q["k"])(t.fieldtype)).map((function(e){return Object(H["jsx"])(_["a"].Option,{value:e.value,label:e.label,children:e.text},e.value)}))}))},tt=function(e,t){return Object(H["jsx"])(f["a"],Object(O["a"])({precision:e,step:.01,formatter:function(t){if(!t)return"";var n;if(Number.isFinite(t))n=(100*t).toFixed(e-2);else{var a=t.split("|||");if(2===a.length)return"".concat(a[1],"%");n=(100*Number.parseFloat(a[0])).toFixed(e-2)}return"".concat(n,"%")},parser:function(t){var n=t.replace("%",""),a=(Number.parseFloat(n)/100).toFixed(e);return"".concat(a,"|||").concat(n)},style:{width:"100px"}},t))},nt=function(e){var t=e.fieldDefine,n=e.formFieldDefine,a=e.fieldProps,i=e.name,r=t.fieldname;if(t.fDictionaryid)return $e(e);if(t.propertyvalue)return Ze(e);if(t.fPropertyid)return Qe(e);if(t.fieldrelation)return t.isManyToOne||t.isOneToOne?Xe(e):t.isManyToMany?et(e):t.isOneToMany?Object(H["jsx"])(f["a"],Object(O["a"])({className:"integer",precision:0,formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}},a)):Object(H["jsxs"])("span",{style:{color:"red"},children:["\u672a\u5904\u7406\u7684\u5b57\u6bb5\uff1a",t.fieldtitle]});var c,o=t.fieldtype,s=n.checkedText||"\u662f",b=n.uncheckedText||"\u5426";switch(o.toLowerCase()){case"integer":c=t.isRate?Object(H["jsx"])(p["a"],Object(O["a"])(Object(O["a"])({allowClear:!0},a),{},{disabled:a.readOnly})):Object(H["jsx"])(f["a"],Object(O["a"])({precision:0,className:"integer",formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}},a));break;case"money":case"double":c=t.isRate?Object(H["jsx"])(p["a"],Object(O["a"])(Object(O["a"])({allowHalf:!0,allowClear:!0},a),{},{disabled:a.readOnly})):Object(H["jsx"])(f["a"],Object(O["a"])({className:"double",precision:t.digitslen||2,formatter:function(e){return e?document.activeElement.id!==i?qe(e).format(Object(B["u"])(t.digitslen||2)):e:""}},a));break;case"float":c=t.isRate?Object(H["jsx"])(p["a"],Object(O["a"])(Object(O["a"])({allowHalf:!0,allowClear:!0},a),{},{disabled:a.readOnly})):Object(H["jsx"])(f["a"],Object(O["a"])({className:"double",precision:t.digitslen||2},a));break;case"percent":var h=Math.max(t.digitslen||2,2);c=n.slider?Object(H["jsx"])(u["a"],{tipFormatter:function(e){return"".concat(parseFloat((100*(e||0)).toFixed(h-2)),"%")},min:0,max:1,marks:{0:"0%",1:"100%"},step:h>=2?.001:.01}):Object(H["jsx"])(Re,Object(O["a"])(Object(O["a"])({},a),{},{digitslen:h,name:i}));break;case"date":c=Object(H["jsx"])(d["a"],Object(O["a"])(Object(O["a"])({format:q["a"]},a),{},{placeholder:a.readOnly?"":void 0}));break;case"datetime":case"timestamp":var _=!1===t.disableSecond?q["b"]:q["c"];c=Object(H["jsx"])(d["a"],Object(O["a"])(Object(O["a"])({showTime:!0,format:_},a),{},{placeholder:a.readOnly?"":void 0}));break;case"boolean":c=n.switch?Object(H["jsx"])(l["a"],Object(O["a"])(Object(O["a"])({},a),{},{checkedChildren:Object(H["jsx"])("span",{style:{margin:"2px"},children:s}),unCheckedChildren:Object(H["jsx"])("span",{style:{margin:"2px"},children:b})})):n.radio?Object(H["jsxs"])(j["a"].Group,Object(O["a"])(Object(O["a"])({},a),{},{children:[Object(H["jsx"])(j["a"],{value:!0,children:s}),Object(H["jsx"])(j["a"],{value:!1,children:b})]})):n.radioButton?Object(H["jsxs"])(j["a"].Group,Object(O["a"])(Object(O["a"])({},a),{},{buttonStyle:"solid",children:[Object(H["jsx"])(j["a"].Button,{value:!0,children:s}),Object(H["jsx"])(j["a"].Button,{value:!1,children:b})]})):Object(H["jsx"])(m["a"],Object(O["a"])({},a));break;case"image":c=Object(H["jsx"])(Pe["a"],Object(O["a"])(Object(O["a"])({},a),{},{imageWidth:n.imageWidth,imageHeight:n.imageHeight,imageStyle:n.imageStyle}));break;case"string":if(n.jsonField)c=Object(H["jsx"])(Ke["a"],Object(O["a"])(Object(O["a"])({},a),{},{jsonFieldProps:n.jsonFieldProps}));else{var g=["creater","lastmodifier"].includes(r.toLowerCase())?10:t.fieldlen;c=g>0&&g<=100?Object(H["jsx"])(x["a"],Object(O["a"])(Object(O["a"])({maxLength:g},a),{},{style:g<=10?{maxWidth:"".concat(16*g+24,"px")}:{}})):0===g?Object(H["jsx"])(x["a"].TextArea,Object(O["a"])({autoSize:!0},a)):Object(H["jsx"])(x["a"].TextArea,Object(O["a"])({maxLength:g,autoSize:{maxRows:10}},a))}break;default:c=Object(H["jsx"])(x["a"],Object(O["a"])(Object(O["a"])({},a),{},{style:{maxWidth:"300px"},autoFocus:!0}))}return c},at=function(e,t){var n=t.fieldtitle,a=t.childModuleName,i=t.fieldahead,r=t.moduleInfo,l=t.dispatch,d=Object(U["r"])(a,"onetomanytooltip"),u=function(t){var n={moduleName:r.modulename,fieldahead:i.split(".with.")[1],fieldName:r.primarykey,fieldtitle:r.title,operator:"=",fieldvalue:e[r.primarykey],text:e[r.namefield]},c=encodeURIComponent(JSON.stringify(n)),o=Object(Be["getModuleUrlFormSysMenu"])(a);if(t){var s="".concat(o,"?parentFilter=").concat(c);window.open(s)}else I["c"].push({pathname:o,state:{parentFilter:c}})};return d&&r&&void 0!==e[r.namefield]?Object(H["jsx"])(g["a"],{trigger:"click",title:Object(H["jsxs"])("span",{children:["".concat(e[r.namefield]," \u7684 ").concat(n),Object(H["jsxs"])(o["b"],{style:{float:"right",marginRight:"12px",marginLeft:"12px"},children:[Object(H["jsx"])(s["a"],{title:"\u8f6c\u5230".concat(n),children:Object(H["jsx"])("a",{onClick:function(){return u(!1)},children:Object(H["jsx"])(k["a"],{})})}),Object(H["jsx"])(s["a"],{title:"\u65b0\u9875\u9762\u4e2d\u6253\u5f00",children:Object(H["jsx"])("a",{onClick:function(){return u(!0)},children:Object(H["jsx"])(w["a"],{rotate:90})})})]})]}),content:Object(H["jsx"])(Le["a"],{moduleName:r.modulename,fieldahead:i,childModuleName:a,parentid:e[r.primarykey],dispatch:l}),children:Object(H["jsx"])(c["a"].Text,{type:"secondary",className:V.a.onetomanyfieldinfo,children:Object(H["jsx"])(P["a"],{})})}):null},it=function(e){var t,n=e.formFieldDefine,a=e.moduleInfo,i=e.fieldsValidate,r=e.form,c=e.readOnly,o=e.formType,s=e.currRecord,l=e.dispatch,d=(e.requiredMark,Object(U["n"])(n.fieldid,a));if(null===d&&(n.fieldahead&&(d=n.aggregate?Object(U["a"])(a,n):Object(U["b"])(a,n)),null===d))return Object(H["jsx"])("div",{style:{color:"red"},children:JSON.stringify(n)});if(d.isdisable)return null;var u=d,p=u.fieldname,f=u.fieldtype,m=u.isrequired,b=u.allownew,j=u.allowedit,h=Object(B["p"])(d.fieldtitle),_=d.unittext||(d.isOneToMany?"\u6761":d.unittext);_||"percent"!==d.fieldtype.toLowerCase()||n.slider||(_="%");var g=!!m,v=c;(n.fieldahead||"display"===o||"approve"===o||"audit"===o||"insert"===o&&!b||"edit"===o&&!j)&&(v=!0,g=!1);var y=n.label,E=n.labelWidth,C={key:n.detailid,name:He(d,v),hidden:d.ishidden,validateStatus:i[p]?"error":void 0,help:i[p]||n.help||d.help,labelCol:E?{flex:"0 0 ".concat(E,"px")}:void 0};y&&Object(B["d"])(C,{label:Object(H["jsx"])("span",{dangerouslySetInnerHTML:{__html:y}})}),"boolean"===f.toLowerCase()&&(C.valuePropName=n.radio||n.radioButton?"value":"checked",g=!1);var I,D,k={readOnly:v,disabled:v&&("insert"===o||"edit"===o),placeholder:v?void 0:n.placeholder||d.placeholder,addonAfter:_},w=[];if(!v){if(g&&w.push({required:g,message:n.requiredMessage||d.requiredMessage||"\u8bf7\u8f93\u5165".concat(h)}),d.maxval){var P=.01===d.maxval?0:d.maxval;w.push({type:"number",max:P,message:"".concat(h,"\u6700\u5927\u503c\u4e3a").concat(P)})}if(d.minval){var T=.01===d.minval?0:d.minval;w.push({type:"number",min:T,message:"".concat(h,"\u6700\u5c0f\u503c\u4e3a").concat(T)})}}if(d.isManyToOne&&(D=Object(U["x"])(f)),!d.isManyToOne||d.fieldahead||v||"90"!==(null===(t=D)||void 0===t?void 0:t.selectedmode)){var M=nt({moduleInfo:a,name:C.name,fieldDefine:d,formFieldDefine:n,form:r,fieldProps:k,currRecord:s,dispatch:l});_&&f.toLowerCase(),I=Object(H["jsx"])(ze,Object(O["a"])(Object(O["a"])({label:h},C),{},{rules:w,children:M}))}else C.name=d.manyToOneInfo.nameField,I=Object(H["jsxs"])(H["Fragment"],{children:[Object(H["jsx"])(ze,Object(O["a"])(Object(O["a"])({label:h},C),{},{rules:w,children:Object(H["jsx"])(x["a"],Object(O["a"])(Object(O["a"])({},k),{},{readOnly:!0,addonAfter:Object(H["jsx"])(Ye,{fieldDefine:d,form:r})}))})),Object(H["jsx"])(ze,{noStyle:!0,name:d.manyToOneInfo.keyField,children:Object(H["jsx"])(x["a"],{hidden:!0})})]});if(n.parentField){var A=n.parentField,R=A.fieldName,N=A.visibleValue;return Object(H["jsx"])(S["a"].Item,{noStyle:!0,shouldUpdate:function(e,t){return e[R]!==t[R]},children:function(e){var t=e.getFieldValue;return t(R)===N?I:null}})}return I},rt=function e(t){var n=t.details,c=t.moduleInfo,s=t.moduleState,l=t.callback,d=t.form,u=t.fieldsValidate,p=t.readOnly,f=t.dispatch,m=t.showType,b=t.parentCols,j=t.setV,h=t.formType,_=t.currRecord,x=t.requiredMark,g=[],y=!0;return n.forEach((function(n){var S=null,C=n.fieldid,I=n.xtype,D=n.layout,k=n.detailid,w=n.title,P=n.subobjectid,K=n.fieldahead,F=n.collapsible&&!Je[k],W=function(){Je=Object(O["a"])(Object(O["a"])({},Je),{},Object(v["a"])({},k,!Je[k])),j({})},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;void 0===Je[k]&&n.collapsible&&(Je[k]=!n.collapsed);var a=n.collapsible?Je[k]?Object(H["jsx"])(T["a"],{onClick:W}):Object(H["jsx"])(M["a"],{onClick:W}):t,i="".concat(n.collapsible&&!Je[k]?"collapsed":""," ").concat(y||n.tabTitle||"panel"===I?"card_border_top_first":"card_border_top");return{key:k,size:"small",bordered:!1,className:i,icon:a,title:Object(H["jsxs"])(o["b"],{children:[a,Object(H["jsx"])("span",{children:"".concat(e)})]})}};if(P){var q={moduleName:P,parentOperateType:h,parentFilter:{moduleName:c.objectname,fieldahead:K.split(".with.")[1],fieldName:c.primarykey,fieldtitle:c.title,operator:"=",text:_[c.namefield],fieldvalue:_[c.primarykey]},parentForm:{moduleName:c.objectname,dispatch:f,currRecord:_}},z=Object(U["x"])(q.moduleName),G=V(z.title,Object(H["jsx"])(A["a"],{}));n.tabTitle&&delete G.title,S=Object(H["jsx"])(r["a"],Object(O["a"])(Object(O["a"])({},G),{},{children:Object(H["jsx"])("span",{style:F?{display:"none"}:{},children:Object(H["jsx"])(Q["a"],Object(O["a"])({},q))})}))}else if("approvehistory"===I){if(_&&Object($["g"])(_)){var J=V(w||"\u6d41\u7a0b\u5ba1\u6279\u8bb0\u5f55",Object(H["jsx"])(R["a"],{}));n.tabTitle&&delete J.title,S=Object(H["jsx"])(r["a"],Object(O["a"])(Object(O["a"])({},J),{},{children:Object(H["jsx"])("span",{style:F?{display:"none"}:{},children:Object($["f"])({record:_,direction:n.direction,breakNumber:n.breakNumber})})}))}}else if("approvepanel"===I){if(Object($["c"])(_)){var Y=V(w||"\u6d41\u7a0b\u4efb\u52a1\u5ba1\u6279",Object(H["jsx"])(N["a"],{}));n.tabTitle&&delete Y.title,S=Object(H["jsx"])(r["a"],Object(O["a"])(Object(O["a"])({},Y),{},{children:Object(H["jsx"])("span",{style:F?{display:"none"}:{},children:Object(H["jsx"])(je,{moduleInfo:c,dispatch:f,record:_,moduleState:s,callback:l})})}))}}else if(C)S=Object(H["jsx"])(it,{formFieldDefine:n,moduleInfo:c,dispatch:f,fieldsValidate:u,form:d,readOnly:p,formType:h,currRecord:_,requiredMark:x});else if("tabpanel"===I){n.details.forEach((function(e){Object(B["d"])(e,{tabTitle:e.title})}));for(var Z=e(Object(O["a"])(Object(O["a"])({},t),{},{details:n.details,parentCols:0})),X=[],ee=0;ee<n.details.length;ee+=1){var te=n.details[ee];X.push(Object(H["jsx"])(Ge,{tab:te.iconCls?Object(H["jsxs"])("span",{className:te.iconCls,children:[" ",te.tabTitle," "]}):te.tabTitle,children:Z[ee]},te.detailid))}S=Object(H["jsx"])(r["a"],{className:"".concat(m,"-").concat(I," card_border_top"),bodyStyle:{paddingTop:0,paddingBottom:0},size:"small",bordered:!1,children:Object(H["jsx"])(E["a"],{centered:!1,tabPosition:n.tabPosition||"top",children:X},n.detailid)},n.detailid)}else if("fieldset"===I||"panel"===I){var ne=D&&"table"!==D?0:n.cols||1,ae=e(Object(O["a"])(Object(O["a"])({},t),{},{details:n.details,parentCols:ne})),ie=V(w,Object(H["jsx"])(L["a"],{}));ie.bodyStyle=n.style,ie.className="".concat(m,"-").concat(I).concat(ie.className?" ".concat(ie.className):""),!n.tabTitle&&w?(ie.title=!0===n.hiddenTitle&&"mainregion"!==m?null:Object(H["jsxs"])(o["b"],{children:[ie.icon,Object(H["jsx"])("span",{children:w})]}),S=ne?Object(H["jsx"])(r["a"],Object(O["a"])(Object(O["a"])({},ie),{},{children:Object(H["jsx"])("span",{style:F?{display:"none"}:{},children:Object(H["jsx"])(i["a"],{gutter:16,children:ae})})})):Object(H["jsx"])(r["a"],Object(O["a"])(Object(O["a"])({},ie),{},{children:Object(H["jsx"])("span",{style:F?{display:"none"}:{},children:ae})}))):(delete ie.title,S=ne?Object(H["jsx"])(i["a"],{style:n.style,gutter:16,children:ae},n.detailid):Object(H["jsx"])(r["a"],Object(O["a"])(Object(O["a"])({},ie),{},{children:ae}))),y=!1}else"container"===I&&(S=Object(H["jsx"])("span",{style:{padding:12},dangerouslySetInnerHTML:{__html:n.html}}));if(S)if(b){var re=n.colspan||1;g.push(Object(H["jsx"])(a["a"],{xs:24,md:1===b?24:12*Math.min(re,2),xl:1===b?24:24/b*Math.min(re,b),children:S},n.detailid))}else g.push(S)})),g}},kQYD:function(e,t,n){"use strict";var a=n("6BL2"),i=n("KsRC"),r=n("qCX4");e.exports=function(e,t,n,c,o,s,l){var d=function(e){return function(t){var n=c.get("activiti:"+e),a={};return a[e]=n,a}},u=function(e){return function(t,n){var a={};return a["activiti:"+e]=n[e]||void 0,i.updateBusinessObject(t,c,a)}};e.entries=e.entries.concat(r(t,c,n,{id:"error-element-message",label:l("Error Message"),referenceProperty:"errorRef",modelProperty:"errorMessage"})),o&&e.entries.push(a.textField({id:"errorCodeVariable",label:l("Error Code Variable"),modelProperty:"errorCodeVariable",get:d("errorCodeVariable"),set:u("errorCodeVariable")})),s&&e.entries.push(a.textField({id:"errorMessageVariable",label:l("Error Message Variable"),modelProperty:"errorMessageVariable",get:d("errorMessageVariable"),set:u("errorMessageVariable")}))}},l5kO:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return N}));n("+L6B");var a=n("2/Rp"),i=(n("y8nQ"),n("Vl3Y")),r=(n("iQDF"),n("+eQT")),c=(n("miYZ"),n("tsqr")),o=n("tJVT"),s=(n("5Dmo"),n("3S7+")),l=(n("Q9mQ"),n("diRs")),d=n("k1fw"),u=(n("Awhp"),n("KrTs")),p=n("q1tI"),f=n("Icgb"),m=n("bRQS"),b=n("Hp1U"),j=n("3Mvv"),h=n.n(j),_=n("WTWM"),O=n("oNIl"),x=n("aYag"),g=n("5Zmo"),v=n("wd/R"),y=n.n(v),E=n("jE+T"),S=n("sy1d"),C=n("mPcc"),I=n("nKUr"),D=function(e){var t=e.record,n=e.dataIndex,a=t["".concat(n,"_dictname")],i="\u5728\u5efa\u4e2d"===a?"processing":"\u5df2\u7ae3\u5de5"===a?"success":"\u5df2\u505c\u5efa"===a?"warning":"default";return Object(I["jsx"])("span",{className:h.a.directionaryfield,children:Object(I["jsx"])(u["a"],{status:i,text:a})})},k=function(e){var t=e.value,n=e.record,a=e.fieldDefine,i=n[a.manyToOneInfo.keyField],r="10"===i?"warning":"90"===i?"success":"99"===i?"default":"processing";return Object(I["jsx"])("span",{className:h.a.directionaryfield,children:Object(I["jsx"])(u["a"],{status:r,text:t})})},w=function(e){var t=e.value,n=e.dataIndex,a=e.record,i=e.dispatch,r=e.moduleState,c=Object(_["x"])("PmPayment"),o=c.additionFunctions,s=o.find((function(e){return"paymentCreatePaymentDetail"===e.fcode}));return"20"===t&&s?Object(O["c"])({moduleInfo:c,moduleState:r,record:a,funcDefine:Object(d["a"])(Object(d["a"])({},s),{},{iconcls:null,buttonType:"link"}),dispatch:i}):Object(I["jsx"])(l["a"],{content:a["".concat(n,"_dictname")],children:"10"===t?Object(I["jsx"])(f["a"],{}):"20"===t?Object(I["jsx"])("a",{children:Object(I["jsx"])("span",{className:"approveaction x-fa fa-jpy fa-fw"})}):Object(I["jsx"])(m["a"],{})})},P=function(e){var t=e.value,n="\u4f53\u6e29\u6b63\u5e38"===t?"success":"\u4f53\u6e29\u8fc7\u9ad8\u5f02\u5e38"===t||"\u4f53\u6e29\u8fc7\u4f4e\u5f02\u5e38"===t?"error":"default";return t?Object(I["jsx"])("span",{children:Object(I["jsx"])(u["a"],{status:n,text:t})}):null},T=function(e){var t=e.value,n=e.record,a="0"===t?"success":"1"===t?"error":"default";return Object(I["jsx"])("span",{children:Object(I["jsx"])(u["a"],{status:a,text:n.faceState_dictname})})},M=function(e){var t=e.value,n=e.record,a=e.dispatch;return Object(I["jsx"])(x["b"],{id:n.actBusinessKey,moduleInfo:Object(_["x"])(n.objectname),dispatch:a,children:Object(I["jsx"])("a",{children:Object(I["jsx"])("span",{className:h.a.namefield,children:"string"===typeof t&&t.length>30?Object(I["jsx"])(s["a"],{title:t,children:"".concat(t.substr(0,28),"...")}):t})})})},A=function(e){var t=e.value,n=e.record,s=e.dispatch,d=Object(p["useState"])(!1),u=Object(o["a"])(d,2),f=u[0],m=u[1],j=n.detailId,h=function(e){Object(S["default"])("".concat(S["API_HEAD"],"/business/agriculture/sddetail.do"),{method:"POST",body:Object(C["serialize"])({detailId:j,sddate:e.sddate.format(E["a"])})}).then((function(e){e.success?(c["default"].info("\u4e13\u9879\u8d44\u91d1\u6307\u6807\u5df2\u4e0b\u8fbe\u5b8c\u6210\uff01"),m(!1),s({type:"modules/refreshRecord",payload:{moduleName:"AgrIndicatorDetail",recordId:j}})):c["default"].error("\u4e13\u9879\u8d44\u91d1\u6307\u6807\u4e0b\u8fbe\u5931\u8d25:".concat(e.msg))}))};return t?Object(g["b"])(t):Object(I["jsx"])(l["a"],{visible:f,onVisibleChange:function(e){return m(e)},trigger:"click",title:"\u4e13\u9879\u8d44\u91d1\u4e0b\u8fbe",content:Object(I["jsxs"])(i["a"],{labelCol:{span:9},wrapperCol:{span:15},onFinish:h,initialValues:{sddate:y()()},children:[Object(I["jsx"])(i["a"].Item,{name:"sddate",label:"\u4e0b\u8fbe\u65e5\u671f",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4e0b\u8fbe\u65e5\u671f\uff01"}],children:Object(I["jsx"])(r["a"],{})}),Object(I["jsx"])(i["a"].Item,{wrapperCol:{offset:8,span:16},children:Object(I["jsx"])(a["a"],{type:"primary",htmlType:"submit",children:"\u4e0b\u8fbe"})})]}),children:Object(I["jsx"])(a["a"],{type:"link",size:"small",icon:Object(I["jsx"])(b["a"],{style:{margin:"0px 2px"}}),children:"\u4e0b\u8fbe"})})},R={"VActRuTask--actBusinessName":M,"VActFinishTask--actBusinessName":M,"VActAllRuTask--actBusinessName":M,"VActAllFinishTask--actBusinessName":M,"PmGlobal--state":D,"PmAgreement--pmAgreementState.name":k,"PmPayment--payoutStatus":w,"AbcEmployee--todayState":P,"AbcEmployee--faceState":T,"AbcInoutEmployeeRecord--state":P,"AgrIndicatorDetail--date":A},N=function(e,t){return R["".concat(e,"--").concat(t)]}},lYao:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return j}));var a=n("k1fw"),i=n("oBTY"),r=n("ma4E"),c=n("ASZ0"),o=n("sy1d"),s=n("79+z"),l=n("mPcc"),d=n("Ydf/"),u=n("MGWp"),p=n("CSqm"),f=function(e,t){var n=e.filterDataSource,a=e.filters,c=[];0!==n.length&&(n.forEach((function(e){var t=e.conditiontype,n=e.originfilter;switch(t){case"viewscheme":c.push({type:"viewscheme",schemeid:n.viewschemeid});break;case"userfilter":c.push({type:"userfilter",userfilter:n});break;case"navigatefilter":c.push({type:"navigatefilter",navigatefilter:n});break;default:}})),Object(o["default"])("".concat(o["API_HEAD"],"/platform/datamining/getfiltercount.do"),{method:"POST",data:Object(l["serialize"])({moduleName:e.moduleName,fields:JSON.stringify(["count.*"]),filters:JSON.stringify(c),sqlparamstr:a.sqlparam?JSON.stringify(Object(r["p"])(a.sqlparam)):null})}).then((function(e){for(var a=0;a<n.length;a+=1)n[a].recordnum=e[a];t({type:d["y"],payload:{filterDataSource:Object(i["a"])(n)}})})))},m=function(e,t,n){var i=n.conditiontype;if("viewscheme"===i)t({type:"filterChanged",payload:{type:"viewSchemeChange",viewscheme:{}}});else if("userfilter"===i){var r=e.filters.userfilter;t({type:"filterChanged",payload:{type:"userDefineFilter",userfilter:r.map((function(e){return e.property===n.property?Object(a["a"])(Object(a["a"])({},e),{},{value:void 0}):e}))}})}else"navigatefilter"===i&&Object(u["b"])(e,t,n.property||"",[],0)},b=function(e,t){var n=t,a=e.viewscheme,i=e.navigatefilters,o=n.findIndex((function(e){return"viewscheme"===e.conditiontype}));if(a.viewschemeid){var l={key:Object(s["I"])(),pin:!1,locked:!1,source:"\u89c6\u56fe\u65b9\u6848",conditiontype:"viewscheme",displaycond:a.title||"",originfilter:a,recordnum:-1};-1===o?n.splice(0,0,l):n[o].originfilter.viewschemeid!==a.viewschemeid&&n.splice(o,1,l)}else-1!==o&&n.splice(o,1);var d=Object(c["b"])(e.userfilter,!0,","),u=Object(c["b"])(e.userfilter);return n=n.filter((function(e){return"userfilter"!==e.conditiontype||d.find((function(t){return t.property===e.property}))})),d.forEach((function(e){var t={key:Object(s["I"])(),pin:!1,locked:!1,source:"\u7528\u6237\u7b5b\u9009",conditiontype:"userfilter",property:e.property,fieldtitle:e.title,operator:Object(r["n"])(e.operator),displaycond:Array.isArray(e.value)?e.value.join(","):e.value,originfilter:u.find((function(t){return t.property===e.property})),recordnum:-1},a=n.findIndex((function(t){return"userfilter"===t.conditiontype&&t.property===e.property}));-1!==a?n.splice(a,1,t):n.push(t)})),n=n.filter((function(e){return"navigatefilter"!==e.conditiontype||i.find((function(t){return t.groupFieldid===e.property}))})),i.forEach((function(e){var t={key:Object(s["I"])(),pin:!1,locked:!1,source:"\u5bfc\u822a\u6761\u4ef6",conditiontype:"navigatefilter",property:e.groupFieldid,fieldtitle:e.title,operator:Object(r["n"])(e.operator),displaycond:Object(p["e"])(e.children),originfilter:e,recordnum:-1},a=n.findIndex((function(t){return"navigatefilter"===t.conditiontype&&t.property===e.groupFieldid}));-1!==a?n.splice(a,1,t):n.push(t)})),n.forEach((function(e){var t=e;t.recordnum=-1})),n},j=function(e){var t=[];return e.forEach((function(e){t.push({source:e.source,fieldtitle:e.fieldtitle,operator:e.operator,displaycond:e.displaycond})})),t}},mDHv:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var a=n("tJVT"),i=n("q1tI"),r=n("WTWM"),c=n("1qKY"),o=n("nKUr"),s=function(e){var t=e.moduleName,n=e.parentFilter,s=e.dataminingFilter,l=e.parentForm,d=e.children,u=Object(i["useReducer"])(c["b"],Object(r["m"])({moduleName:t,parentFilter:n,dataminingFilter:s,parentForm:l})),p=Object(a["a"])(u,2),f=p[0],m=p[1];return Object(o["jsx"])(c["a"].Provider,{value:{moduleState:f,dispatch:Object(c["c"])(f,m)},children:d})},l=function(e){var t=e.moduleName,n=e.children,s=Object(i["useReducer"])(c["b"],Object(r["m"])({moduleName:t})),l=Object(a["a"])(s,2),d=l[0],u=l[1];return Object(o["jsx"])(c["a"].Provider,{value:{moduleState:d,dispatch:Object(c["d"])(d,u)},children:n})}},mQcC:function(e,t,n){"use strict";var a=n("emvA").getBusinessObject,i=n("emvA").is,r=n("8gAX"),c=n("zOnR"),o=n("GTJ0");function s(e){var t=a(e);return t.loopCharacteristics}function l(e){var t=s(e);return!!t&&i(t,"activiti:Collectable")}e.exports=function(e,t,n,a){l(t)&&(e.entries=e.entries.concat(r(t,n,a)),e.entries=e.entries.concat(o(t,n,{getBusinessObject:s,idPrefix:"multiInstance-",labelPrefix:a("Multi Instance ")},a)),e.entries=e.entries.concat(c(t,n,{getBusinessObject:s,idPrefix:"multiInstance-",labelPrefix:a("Multi Instance ")},a)))}},"mqE+":function(e,t,n){"use strict";n.d(t,"d",(function(){return W})),n.d(t,"c",(function(){return H})),n.d(t,"a",(function(){return Y})),n.d(t,"b",(function(){return Z}));n("J+/v");var a=n("MoRW"),i=n("oBTY"),r=(n("R9oj"),n("ECub")),c=(n("14J3"),n("BMrR")),o=(n("jCWc"),n("kPKH")),s=(n("fu2T"),n("gK9i")),l=n("jrin"),d=(n("Q9mQ"),n("diRs")),u=(n("Awhp"),n("KrTs")),p=n("tJVT"),f=n("k1fw"),m=(n("Znn+"),n("ZTPi")),b=n("q1tI"),j=n("t23M"),h=n("TSYQ"),_=n.n(h),O=n("sy1d"),x=n("D7g3"),g=n.n(x),v=n("79+z"),y=n("5X+9"),E=n("ASZ0"),S=n("WTWM"),C=n("0owl"),I=n("nKUr"),D=m["a"].TabPane,k={},w={xs:24,sm:12,md:12,lg:12,xl:6,xxl:6},P={xs:24,sm:24,md:24,lg:18,xl:18,xxl:18},T={xs:24,sm:24,md:24,lg:6,xl:6,xxl:6},M={xs:24,sm:24,md:24,lg:24,xl:12,xxl:12},A={xs:24,sm:12,md:6,lg:12,xl:6,xxl:6},R={xs:24,sm:12,md:12,lg:24,xl:12,xxl:12},N=function(e){return 2===e||"2"===e?M:4===e||"4"===e?{span:24}:3===e||"3"===e?P:-1===e||"-1"===e?T:w},L=function(e){return 2===e?R:4===e?{span:24}:-1===e?T:3===e?P:A},B=function(e){return Object(I["jsxs"])("span",{children:[e.iconCls?Object(v["n"])(e.iconCls):null," ",e.title]})},K=Object(b["createContext"])({compact:!1}),F={},U=function(e,t){return F[e]||(F[e]=Object(S["m"])({moduleName:t})),F[e]},W=Object(b["createContext"])({parnetUserFilters:[]}),V=function(e){var t=e.tab,n=e.states,a=e.setStates;return Object(I["jsx"])(E["a"],{moduleState:n[t.detailid],dispatch:function(e){if("modules/filterChanged"===e.type){var i=n[t.detailid];i.filters.userfilter=e.payload.userfilter,a(Object(f["a"])({},n))}},filterSchemeid:t.filterSchemeid})},q=function(e){var t=e.tab,n=e.states,a=e.setStates,i=Object(b["useState"])(!1),r=Object(p["a"])(i,2),c=r[0],o=r[1],s=n[t.detailid].filters.userfilter,l=Object(E["b"])(s);return Object(I["jsx"])(d["a"],{visible:c,onVisibleChange:function(e){o(e)},trigger:["click"],title:"\u8bbe\u7f6e\u7b5b\u9009\u6761\u4ef6",content:Object(I["jsx"])(E["c"],{visible:!0,moduleState:n[t.detailid],dispatch:function(e){if("modules/filterChanged"===e.type){var i=n[t.detailid];i.filters.userfilter=e.payload.userfilter,a(Object(f["a"])({},n))}o(!1)},filterSchemeid:t.filterSchemeid,inPopover:!0}),children:Object(I["jsx"])("span",{style:{paddingRight:"16px"},children:l.length?Object(I["jsx"])(u["a"],{count:l.length,dot:!1,offset:[-6,6],style:{backgroundColor:"#108ee9"},children:Object(I["jsx"])(C["a"],{style:{paddingRight:"20px"},className:g.a.filtericon})}):Object(I["jsx"])(C["a"],{className:g.a.filtericon})})})},z=function(e){var t={};return e.items.forEach((function(e){e.filterSchemeid&&e.moduleName&&(t[e.detailid]=U(e.detailid,e.moduleName))})),t},G=function(e){var t=e.block,n=e.outsideClass,a=e.list,i=void 0!==a&&a,r=Object(b["useState"])(z(t)),c=Object(p["a"])(r,2),o=c[0],d=c[1],u=i?{activeKey:t.items.map((function(e){return e.detailid}))}:{defaultActiveKey:t.items.map((function(e){return!1===e.active?null:e.detailid}))};return Object(I["jsx"])(s["a"],Object(f["a"])(Object(f["a"])({className:"blockcollapse",collapsible:"header",bordered:!0,accordion:t.accordion&&!i},u),{},{children:t.items.map((function(e){var t=null;e.filterSchemeid&&(t="inline"===e.filterPosition?Object(I["jsx"])(V,{tab:e,states:o,setStates:d}):Object(I["jsx"])(q,{tab:e,states:o,setStates:d}));var a=Object(I["jsx"])("div",{className:n,children:Object(I["jsx"])(Y,{block:e},e.detailid)});return Object(I["jsx"])(s["a"].Panel,{showArrow:!i,className:_()(Object(l["a"])({},g.a.filtercollapsepanel,"inline"===e.filterPosition)),header:B(e),extra:t,children:e.filterSchemeid?Object(I["jsx"])(W.Provider,{value:{parnetUserFilters:Object(E["b"])(o[e.detailid].filters.userfilter)},children:a}):a},e.detailid)}))}))},J=function(e){var t=e.block,n=e.outsideClass,a=Object(b["useState"])(z(t)),i=Object(p["a"])(a,2),r=i[0],c=i[1],o=Object(b["useState"])(t.items[0].detailid),s=Object(p["a"])(o,2),l=s[0],d=s[1],u=t.items.find((function(e){return e.detailid===l})),f=null;return u&&u.filterSchemeid&&(f="inline"===u.filterPosition?Object(I["jsx"])(V,{tab:u,states:r,setStates:c}):Object(I["jsx"])(q,{tab:u,states:r,setStates:c})),Object(I["jsx"])(m["a"],{tabPosition:t.tabPosition||"top",className:"blocktabs",tabBarExtraContent:f,activeKey:l,onChange:function(e){return d(e)},children:t.items.map((function(e,t){var a=Object(I["jsx"])("div",{className:n,children:Object(I["jsx"])(Y,{block:e},e.detailid)});return Object(I["jsx"])(D,{tab:B(e),tabKey:"block-".concat(t),children:e.filterSchemeid?Object(I["jsx"])(W.Provider,{value:{parnetUserFilters:Object(E["b"])(r[e.detailid].filters.userfilter)},children:a}):a},e.detailid)}))})},H=function(e){var t=e.tableWidgets;return Object(I["jsx"])(c["a"],{gutter:[12,12],className:g.a.blockrow,children:t.map((function(e){var t=e.response;t||(t=N(e.colspan));var n={height:e.height?"".concat(e.height,"px"):"auto"};return e.style&&Object(v["d"])(n,e.style),Object(I["jsx"])(o["a"],Object(f["a"])(Object(f["a"])({},t),{},{style:n,children:Object(I["jsx"])("div",{className:"innercard",children:Object(I["jsx"])(y["a"],{widget:e})})}),e.widgetid)}))})},Y=function e(t){var n,a=t.block,i=t.inner,s=void 0!==i&&i,d=Object(b["useContext"])(K),u=d.compact,p=_()((n={},Object(l["a"])(n,g.a.outsiderectcompact,u),Object(l["a"])(n,g.a.outsiderect,!u),n));if(a.xtype){var m=a.xtype.toLowerCase();if("tabpanel"===m&&!u)return Object(I["jsx"])(J,{block:a,outsideClass:p});if("collapse"===m||"tabpanel"===m&&u)return Object(I["jsx"])(G,{block:a,outsideClass:p});if("list"===m)return Object(I["jsx"])(G,{block:a,outsideClass:p,list:!0})}return a.items&&a.items.length?Object(I["jsx"])(c["a"],{gutter:u?[0,1]:[12,12],className:g.a.blockrow,children:a.items.map((function(t){var n=t.response;n||(n=s&&4!==a.colspan?L(t.colspan):N(t.colspan));var i={height:t.height?"".concat(t.height,"px"):"auto"};return t.style&&Object(v["d"])(i,t.style),Object(I["jsx"])(o["a"],Object(f["a"])(Object(f["a"])({},n),{},{style:i,children:Object(I["jsx"])("div",{className:"innercard",children:Object(I["jsx"])(e,{block:t,inner:!0})})}),t.detailid)}))}):a.fovDataobjectwidget?Object(I["jsx"])(y["a"],{widget:a.fovDataobjectwidget}):Object(I["jsx"])(r["a"],{description:"\u672a\u8bbe\u7f6e\u5b9e\u4f53\u5bf9\u8c61\u7ec4\u4ef6"})},Z=function(e){var t,n=e.type,r=Object(b["useState"])([]),c=Object(p["a"])(r,2),o=c[0],d=c[1],u=Object(b["useState"])(!1),f=Object(p["a"])(u,2),h=f[0],x=f[1],y=Object(b["useState"])(!1),E=Object(p["a"])(y,2),S=E[0],C=E[1];Object(b["useEffect"])((function(){k[n]?(d(k[n]),x(!0)):Object(O["default"])("".concat(O["API_HEAD"],"/platform/homepage/getinfo.do"),{method:"POST",params:{type:n}}).then((function(e){var t=[];t.push.apply(t,Object(i["a"])(e)),Object(v["B"])(t,t),Object(v["e"])(t),k[n]=t,d(t),x(!0)}))}),[n]);var w=null,P=_()((t={},Object(l["a"])(t,g.a.outsiderectcompact,S),Object(l["a"])(t,g.a.outsiderect,!S),t));return w=o.length>0?o.length>1?S?Object(I["jsx"])(s["a"],{className:"blockcollapse",bordered:!0,defaultActiveKey:o.map((function(e){return e.homepageschemeid})),children:o.map((function(e){return Object(I["jsx"])(s["a"].Panel,{header:B(e),children:Object(I["jsx"])("div",{className:P,children:Object(I["jsx"])(Y,{block:e.items[0]},e.items[0].detailid)})},e.homepageschemeid)}))}):Object(I["jsx"])(m["a"],{tabPosition:"top",className:"blocktabs",children:o.map((function(e,t){return Object(I["jsx"])(D,{tab:B(e),tabKey:"block-".concat(t),children:Object(I["jsx"])("div",{className:P,children:Object(I["jsx"])(Y,{block:e.items[0]},e.items[0].detailid)})},e.homepageschemeid)}))}):Object(I["jsx"])("div",{className:"innercard",children:Object(I["jsx"])(Y,{block:o[0].items[0]},o[0].items[0].detailid)}):h?Object(I["jsx"])(a["a"],{status:"warning",title:"\u672a\u8bbe\u7f6e\u5206\u6790\u9875\u65b9\u6848",subTitle:"\u5c1a\u672a\u8bbe\u7f6e\u60a8\u7684\u5206\u6790\u9875\u65b9\u6848\uff0c\u8bf7\u54a8\u8be2\u7ba1\u7406\u5458\u8fdb\u884c\u8bbe\u7f6e\uff01"}):null,Object(I["jsx"])(j["default"],{onResize:function(e){e.width<=576?S||C(!0):S&&C(!1)},children:Object(I["jsx"])(K.Provider,{value:{compact:S},children:Object(I["jsx"])("div",{className:P,children:w})})},"resize-observer")}},mzdz:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));n("IzEo");var a,i,r=n("bx4M"),c=(n("+L6B"),n("2/Rp")),o=n("k1fw"),s=n("tJVT"),l=(n("Znn+"),n("ZTPi")),d=n("q1tI"),u=n("RfA7"),p=n("L8Vn"),f=n.n(p),m=n("jE+T"),b=(n("MpMJ"),n("nKUr")),j=l["a"].TabPane,h=new Map,_=function(e){return h.has(e)||h.set(e,Object(u["n"])({moduleName:e})),JSON.parse(JSON.stringify(h.get(e)))},O=function e(t){if(Array.isArray(t))t.forEach((function(t){return e(t)}));else if("[object Object]"===Object.prototype.toString.call(t)){var n=t;n.name=t.text.replace(/<[^>]+>/g,""),n.id=t.itemId,t.children&&e(t.children)}},x=Object(d["forwardRef"])((function(e,t){var n=e.moduleName,u=e.onClick,p=e.onSelect,h=e.defaultFieldahead,x=Object(d["useState"])({}),g=Object(s["a"])(x,2),v=g[0],y=g[1],E=Object(d["useState"])({}),S=Object(s["a"])(E,2),C=S[0],I=S[1],D=Object(d["useState"])("parent"),k=Object(s["a"])(D,2),w=k[0],P=k[1],T=Object(d["useState"])({}),M=Object(s["a"])(T,2),A=M[0],R=M[1],N=function(e){var t=e.nodeData,n=t.isBase,a=t.isParent,i=t.isChild,r=t.disabled,c=t.itemId,o=c===A.itemId?" current":"",s=t.iconCls?Object(b["jsx"])("span",{className:t.iconCls,children:" ".concat(t.name)}):t.name;if(n)return Object(b["jsxs"])("div",{children:[Object(b["jsx"])("div",{className:"base".concat(o),children:s}),Object(b["jsx"])("div",{className:"type",children:t.title})]});var l="disabled";return a&&!r&&(l="parent".concat(o)),i&&!r&&(l="child".concat(o)),Object(b["jsx"])("div",{children:Object(b["jsx"])("div",{className:l,children:s})})};return Object(d["useImperativeHandle"])(t,(function(){return{getNodeFromItemId:function(e){var t=v;if(e){var n=Object(m["g"])(v.children?v.children[0].children:a.children[0].children),r=Object(m["g"])(C.children?C.children[0].children:i.children[0].children);t=n.find((function(t){return t.itemId===e}))||r.find((function(t){return t.itemId===e}))}return R(t),t},getCurrentModule:function(){return A}}})),Object(d["useEffect"])((function(){var e=_(n);O(e);var t=Object(o["a"])({},e.children[0]);t.name=t.moduleTitle,t.title="\u57fa\u51c6\u6a21\u5757",t.children=t.children.filter((function(e){return e.isParent})),a=t,y(t);var r=Object(o["a"])({},e.children[0]);if(r.name=r.moduleTitle,r.title="\u57fa\u51c6\u6a21\u5757",r.children=r.children.filter((function(e){return e.isChild})),i=r,I(r),h){var c=Object(m["g"])(t.children),s=Object(m["g"])(r.children);R(c.find((function(e){return e.itemId===h}))||s.find((function(e){return e.itemId===h})))}else R(t)}),[n]),Object(d["useEffect"])((function(){A.itemId&&-1!==A.itemId.indexOf(".with.")?P("child"):A.itemId&&P("parent")}),[A]),Object(b["jsx"])(r["a"],{title:"\u6a21\u5757\u5173\u8054\u5173\u7cfb\u56fe",size:"small",style:{height:"100%"},bodyStyle:{paddingTop:0,paddingBottom:0,height:"calc(100% -24px)"},extra:Object(b["jsx"])("span",{children:A.qtip?Object(b["jsxs"])("span",{children:["\u5f53\u524d\u9009\u4e2d\u6a21\u5757\uff1a",Object(b["jsx"])(c["a"],{type:p?"primary":"link",onClick:function(){p&&p(A)},children:A.qtip})]}):""}),children:Object(b["jsxs"])(l["a"],{activeKey:w,onChange:function(e){P(e)},children:[Object(b["jsx"])(j,{tab:"\u7236\u6a21\u5757",children:Object(b["jsx"])(f.a,{datasource:v,direction:"b2t",collapsible:!0,chartClass:"moduleChart",NodeTemplate:N,onClickNode:function(e){e.disabled||(R(e),u&&u(e))}})},"parent"),Object(b["jsx"])(j,{tab:"\u5b50\u6a21\u5757",children:Object(b["jsx"])(f.a,{datasource:C,direction:"b2t",collapsible:!0,chartClass:"moduleChart",NodeTemplate:N,onClickNode:function(e){e.disabled||(R(e),u&&u(e))}})},"child")]})})}))},nNzM:function(e,t,n){"use strict";var a=n("OcID");function i(e,t,n){this._loadTemplates=e,this._eventBus=t,this._elementTemplates=n;var a=this;t.on("diagram.init",(function(){a.reload()}))}e.exports=i,i.$inject=["config.elementTemplates","eventBus","elementTemplates"],i.prototype.reload=function(){var e=this,t=this._loadTemplates;if("undefined"!==typeof t)return"function"===typeof t?t((function(t,n){if(t)return e.templateErrors([t]);e.setTemplates(n)})):t.length?this.setTemplates(t):void 0},i.prototype.setTemplates=function(e){var t=this._elementTemplates,n=(new a).addAll(e),i=n.getErrors(),r=n.getValidTemplates();t.set(r),i.length&&this.templateErrors(i),this.templatesChanged()},i.prototype.templatesChanged=function(){this._eventBus.fire("elementTemplates.changed")},i.prototype.templateErrors=function(e){this._eventBus.fire("elementTemplates.errors",{errors:e})}},nSXk:function(e,t,n){"use strict";var a=n("6BL2"),i=n("hfUJ"),r=n("emvA").is,c=n("emvA").getBusinessObject;e.exports=function(e,t,n){var o=c(t);if(o&&(r(t,"bpmn:Process")||r(t,"bpmn:Participant")&&o.get("processRef"))){var s=a.textField({id:"versionTag",label:n("Version Tag"),modelProperty:"versionTag"});r(t,"bpmn:Participant")&&(s.get=function(e){var t=o.get("processRef");return{versionTag:t.get("activiti:versionTag")}},s.set=function(e,t){var n=o.get("processRef");return i.updateBusinessObject(e,n,{"activiti:versionTag":t.versionTag||void 0})}),e.entries.push(s)}}},nq7E:function(e,t,n){"use strict";n.r(t),n.d(t,"DataminingContext",(function(){return It})),n.d(t,"Datamining",(function(){return kt}));var a=n("tJVT"),i=(n("h7lp"),n("bf48")),r=(n("B9cy"),n("Ol7k")),c=(n("tU7J"),n("wFql")),o=n("q1tI"),s=n.n(o),l=n("xB/3"),d=n("Hx5s"),u=n("WTWM"),p=n("ASZ0"),f=(n("DYRE"),n("zeV3")),m=(n("+L6B"),n("2/Rp")),b=n("79+z"),j=n("4i/N"),h=n("arHk"),_=n("uAnT"),O=n("CLjb"),x=n("hco6"),g=n("Ydf/"),v=n("rMKe"),y=n.n(v),E=n("nKUr"),S=function(e){var t=e.fieldid,n=e.title,i=e.iconCls,r=e.dispatch,c=Object(O["a"])({item:{type:g["T"],fieldid:t,title:n},options:{dropEffect:"copy"},canDrag:!0,collect:function(e){return{isDragging:!!e.isDragging()}}}),o=Object(a["a"])(c,2),s=o[0].isDragging,l=o[1];return Object(E["jsx"])("span",{ref:l,children:Object(E["jsx"])(m["a"],{icon:i?Object(b["s"])(i):null,type:s?"dashed":"default",size:"small",onClick:function(){r({type:g["B"],payload:{navigateGroup:{fieldid:t,title:n,iconCls:i}}})},color:s?"warning":"default",children:n},t)})},C=function(e){var t,n,i=e.state,r=e.dispatch,c=Object(o["useState"])("#fff"),s=Object(a["a"])(c,2),l=s[0],d=s[1],u=Object(o["useState"])(!1),p=Object(a["a"])(u,2),m=p[0],b=p[1],O=Object(o["useState"])({left:document.documentElement.clientWidth-240-24,top:89}),v=Object(a["a"])(O,2),C=v[0],I=v[1],D=function(){r({type:g["O"],payload:{}})},k=function(){b((function(e){return!e}))};return Object(E["jsxs"])("div",{className:y.a.groupregion,style:{display:i.currSetting.groupRegionVisible?"block":"none",backgroundColor:l,left:C.left,top:C.top},children:[Object(E["jsx"])(x["a"],{style:{zIndex:10001},ref:function(e){n=e},enableResizing:!1,default:{x:0,y:0,width:"100%",height:"24px"},onDragStart:function(){d("#fafafa")},onDrag:function(){},onDragStop:function(e,t){n.updatePosition({x:0,y:0}),d("#fff"),I({left:Math.max(C.left+t.x,0),top:Math.max(C.top+t.y,0)})},children:Object(E["jsxs"])("div",{style:{height:"24px",backgroundColor:"#e0e2e5"},children:[Object(E["jsx"])("span",{className:y.a.groupregiontitle,children:"\u53ef\u5206\u7ec4\u9879\u76ee"}),Object(E["jsx"])(j["a"],{className:y.a.tool,onClick:D}),m?Object(E["jsx"])(h["a"],{className:y.a.tool,onClick:k}):Object(E["jsx"])(_["a"],{className:y.a.tool,onClick:k})]})}),Object(E["jsx"])("div",{className:y.a.groupregindeephead}),Object(E["jsx"])("div",{className:y.a.groupregionbody,style:{display:m?"none":"block"},children:Object(E["jsx"])(f["b"],{size:[6,6],wrap:!0,children:null===(t=i.expandGroupFields)||void 0===t?void 0:t.map((function(e){return Object(E["jsx"])(S,{fieldid:e.fieldid,title:e.title,iconCls:e.iconCls,dispatch:r},e.fieldid)}))})})]})},I=C,D=n("jrin"),k=n("oBTY"),w=n("k1fw"),P=n("RsOY"),T=n.n(P),M=n("c6dC"),A=n("eVqf"),R=n("CSqm"),N=n("lYao"),L=n("WpNc"),B=n("TP9V"),K={},F=function(e,t){var n=t||"";return K[e+n]?Object(w["a"])(Object(w["a"])({},K[e+n]),{},{fromCache:!0}):Object(A["k"])(e,t)},U=function(e){var t=e.defaultSchemeid||"";K[e.moduleName+t]=e},W=function(e,t){var n=t.type,a=t.payload,i=e,r=null;switch(n){case g["K"]:i=T()(e,{schemeState:{setting:{$apply:function(e){return Object(w["a"])(Object(w["a"])({},e),a)}}}});break;case g["n"]:i=T()(e,{exportSetting:{$set:a.exportSetting}});break;case g["a"]:i=T()(e,{schemes:{$push:[a.scheme]},currentScheme:{$set:a.scheme}});break;case g["r"]:var c=e.schemes.filter((function(e){return e.schemeid!==a.schemeid}));i=T()(e,{schemes:{$set:c},currentScheme:{$set:c.length?c[0]:{schemeid:"",text:"",title:"",savepath:!0}}});break;case g["u"]:i=T()(e,{currSetting:{$toggle:["fieldGroupFixedLeft"]}});break;case g["t"]:i=T()(e,{schemeState:{fieldGroup:{$push:[a.field]}},refreshAllCount:{$apply:function(e){return e+1}}});break;case g["w"]:var o=e.schemeState.fieldGroup.filter((function(e){return e[g["db"]]!==a[g["db"]]}));o.find((function(e){return!e.hiddenInColumnGroup}))||delete o[0].hiddenInColumnGroup,i=T()(e,{schemeState:{fieldGroup:{$set:o}}});break;case g["v"]:var s=e.schemeState.fieldGroup.find((function(e){return e[g["db"]]===a[g["db"]]}));s&&(s.hiddenInColumnGroup=!s.hiddenInColumnGroup),i=T()(e,{schemeState:{fieldGroup:{$apply:function(e){return Object(k["a"])(e)}}}});break;case g["x"]:i=T()(e,{schemeState:{fieldGroup:{$set:a.fieldGroup}}});break;case g["j"]:i=T()(e,{schemeState:{columnGroup:{$set:Object(k["a"])(a.columnGroup)}},refreshAllCount:{$apply:function(e){return e+(a.refreshAllCount?1:0)}}});break;case g["h"]:var l=a[g["db"]],d=Object(A["m"])(e.schemeState.columnGroup,l,g["db"]);d.hideRest=!d.hideRest,i=T()(e,{schemeState:{columnGroup:{$set:Object(k["a"])(e.schemeState.columnGroup)}}});break;case g["f"]:var u=Object(A["m"])(e.schemeState.columnGroup,a.rowid,g["db"]);u&&(u[g["fb"]]=a.text,i=T()(e,{schemeState:{columnGroup:{$set:Object(k["a"])(e.schemeState.columnGroup)}}}));break;case g["g"]:i=T()(e,{schemeState:{columnGroup:{$set:Object(k["a"])(Object(B["i"])(e.schemeState.columnGroup,a.rowids,a.keepChildren))}}});break;case g["k"]:a.rowids.forEach((function(t){r=Object(A["m"])(e.schemeState.columnGroup,t,g["db"]),r&&(r.hidden="hidden"===a.type||!r.hidden),r.hidden&&(r[g["eb"]]=!1)})),i=T()(e,{schemeState:{columnGroup:{$set:Object(k["a"])(e.schemeState.columnGroup)}}});break;case g["i"]:r=Object(A["m"])(e.schemeState.columnGroup,a.rowid,g["db"]),r&&(r[g["eb"]]=!r[g["eb"]]),i=T()(e,{schemeState:{columnGroup:{$set:Object(k["a"])(e.schemeState.columnGroup)}}});break;case g["d"]:i=T()(e,{schemeState:{columnGroup:{$set:Object(k["a"])(Object(B["b"])(e.schemeState.columnGroup))}}});break;case g["e"]:var p=Object(B["c"])(e.schemeState.columnGroup,a.keepChildren);p&&(i=T()(e,{schemeState:{columnGroup:{$set:Object(k["a"])(p)}},refreshAllCount:{$apply:function(e){return e+1}}}));break;case g["B"]:e.navigates.find((function(e){return e.navigateGroup.fieldid===a.navigateGroup.fieldid}))||(i=T()(e,{navigates:{$push:[{navigateGroup:a.navigateGroup,dataSource:[],expandedKeys:[],selectedKeys:[],checkedKeys:[]}]}})),i=T()(i,{currSetting:{navigate:{visible:{$set:!0},activeKey:{$set:a.navigateGroup.fieldid}}}});break;case g["G"]:if(i=T()(e,{navigates:{$apply:function(e){return e.filter((function(e){return e.navigateGroup.fieldid!==a.fieldid}))}}}),i.currSetting.navigate.activeKey===a.fieldid&&(i=T()(i,{currSetting:{navigate:{activeKey:{$set:i.navigates.length?i.navigates[0].navigateGroup.fieldid:""}}}})),e.filters.navigatefilters.find((function(e){return e.groupFieldid===a.fieldid}))){var f=Object(R["c"])(i.navigates);i=T()(i,{filters:{navigatefilters:{$set:f}}}),i=T()(i,{refreshAllCount:{$apply:function(e){return e+1}},refreshFilterDataSourceCount:{$apply:function(e){return e+1}},filterDataSource:{$set:Object(N["c"])(i.filters,Object(k["a"])(i.filterDataSource))}})}break;case g["A"]:i=T()(e,{currSetting:{navigate:{activeKey:{$set:a.activeKey}}}});break;case g["F"]:i=T()(e,{navigates:{$apply:function(e){return e.map((function(e){return e.navigateGroup.fieldid!==a.fieldid?e:Object(w["a"])(Object(w["a"])({},e),{},{dataSource:a.dataSource,expandedKeys:a.expandedKeys||e.expandedKeys,search:a.search})}))}}});break;case g["E"]:i=T()(e,{navigates:{$apply:function(e){return e.map((function(e){return e.navigateGroup.fieldid!==a.fieldid?e:Object(w["a"])(Object(w["a"])({},e),{},{expandedKeys:a.expandedKeys})}))}}});break;case g["I"]:i=T()(e,{navigates:{$apply:function(e){return e.map((function(e){return e.navigateGroup.fieldid!==a.fieldid?e:Object(w["a"])(Object(w["a"])({},e),{},{selectedKeys:a.selectedKeys})}))}}});break;case g["D"]:i=T()(e,{navigates:{$apply:function(e){return e.map((function(e){return e.navigateGroup.fieldid!==a.fieldid?e:Object(w["a"])(Object(w["a"])({},e),{},{checkedKeys:a.checkedKeys})}))}}});var m=Object(R["c"])(i.navigates);i=T()(i,{filters:{navigatefilters:{$set:m}}}),i=T()(i,{filterDataSource:{$set:Object(N["c"])(i.filters,Object(k["a"])(i.filterDataSource))}});break;case g["C"]:i=T()(e,{refreshAllCount:{$apply:function(e){return e+1}},refreshFilterDataSourceCount:{$apply:function(e){return e+1}}});break;case g["H"]:i=T()(e,{navigates:{$set:e.navigates.map((function(e){var t,n=e.expandedKeys;return e.navigateGroup.fieldid!==a.navigateGroup.fieldid?e:Object(w["a"])(Object(w["a"])({},e),{},{dataSource:Object(k["a"])(e.dataSource),expandedKeys:(t=n.find((function(e){return e===a.key}))?n:[].concat(Object(k["a"])(n),[a.key])).concat.apply(t,Object(k["a"])(a.expandedKeys))})}))}});break;case"modules/filterChanged":case"filterChanged":var b=a.type;"viewSchemeChange"===b&&(i=T()(e,{refreshAllCount:{$apply:function(e){return e+1}},filters:{viewscheme:{$set:a.viewscheme}}})),"userDefineFilter"===b&&(i=T()(e,{refreshAllCount:{$apply:function(e){return e+1}},filters:{userfilter:{$set:a.userfilter}}})),i=T()(i,{selectedRowKeys:{$set:[]},filterDataSource:{$set:Object(N["c"])(i.filters,Object(k["a"])(i.filterDataSource))},refreshFilterDataSourceCount:{$apply:function(e){return e+1}}});break;case g["M"]:i=T()(e,{filters:{sqlparam:{$set:a.sqlparam}},refreshAllCount:{$apply:function(e){return e+1}},refreshFilterDataSourceCount:{$apply:function(e){return e+1}}});break;case g["o"]:if(i=T()(e,{schemeChanged:{$set:!1},schemeState:{dataSource:{$set:a.dataSource}}}),a.expandedRowKeys&&a.expandedRowKeys.length){var j=[];a.expandedRowKeys.forEach((function(t){e.expandedRowKeys.find((function(e){return e===t}))||j.push(t)})),e.expandedRowKeys.find((function(e){return e===a.expandedRowKey}))||(i=T()(i,{expandedRowKeys:{$push:j}}))}if(a.expandPaths&&a.expandPaths.length&&(i=T()(i,{schemeState:{rowGroup:{$push:a.expandPaths}}})),a.deletedRowids&&a.deletedRowids.length){var h=a.deletedRowids;i=T()(i,{expandedRowKeys:{$set:e.expandedRowKeys.filter((function(e){return!h.find((function(t){return t===e}))}))},selectedRowKeys:{$set:e.selectedRowKeys.filter((function(e){return!h.find((function(t){return t===e}))}))}})}break;case g["s"]:i=T()(e,{fetchLoading:{$set:a.fetchLoading}});break;case g["p"]:i=Object(L["d"])(e);break;case g["l"]:i=T()(e,{selectedRowKeys:{$set:[]},expandedRowKeys:{$set:[g["cb"]]},currentScheme:{$set:a.currentScheme}});break;case g["Q"]:i=T()(e,{schemeChanged:{$apply:function(){return!0===a.schemeChanged}},refreshAllCount:{$apply:function(e){return e+1}},schemeState:{$merge:a.schemeState}});break;case g["z"]:var _=a.position,O=a.monetaryType;i=T()(e,{monetaryPosition:{$set:_||e.monetaryPosition},monetary:{$set:O?Object(M["a"])(O):e.monetary}});break;case"modules/toggleUserFilter":i=T()(e,{currSetting:{$toggle:["userFilterRegionVisible"]}});break;case g["L"]:var x=a.property,v=a.direction;i=T()(e,{schemeState:{dataSource:{$set:Object(A["q"])(e.schemeState.dataSource,x,"ASC"===v?1:-1)},sorts:{$set:[{property:x,direction:v}]}}});break;case g["O"]:i=T()(e,{currSetting:{$toggle:["groupRegionVisible"]}});break;case g["N"]:i=T()(e,{currSetting:{$toggle:["filtersRegionVisible"]}});break;case g["P"]:i=T()(e,{currSetting:{navigate:{$toggle:["visible"]}}});break;case g["J"]:i=T()(e,{selectedRowKeys:{$set:a.selectedRowKeys}});break;case g["m"]:i=a.expandedRowKeys?T()(e,{expandedRowKeys:{$set:a.expandedRowKeys}}):a.expanded?T()(e,{expandedRowKeys:{$push:[a.key]}}):T()(e,{expandedRowKeys:{$apply:function(e){return e.filter((function(e){return e!==a.key}))}}});break;case g["c"]:i=T()(e,{expandedRowKeys:{$set:[]},selectedRowKeys:{$set:[]},schemeState:{rowGroup:{$set:[]}},refreshAllCount:{$apply:function(e){return e+1}}});break;case g["b"]:i=T()(e,{schemeState:{columnGroup:{$set:[]}}});break;case g["y"]:i=T()(i,{filterDataSource:{$set:a.filterDataSource},refreshFilterDataSourceCount:{$apply:function(e){return e+(a.refreshCount?1:0)}}});break;case g["q"]:i=T()(i,{schemeState:{rowGroup:{$apply:function(e){return e.filter((function(e,t){return t<a.deleteFormIndex}))}}},refreshAllCount:{$apply:function(e){return e+1}},selectedRowKeys:{$set:[]}});break;default:break}return i.schemeState.fieldGroup.find((function(e,t){return e[g["db"]]!=="field-".concat(101+t)}))&&(i=T()(i,{schemeState:{fieldGroup:{$set:i.schemeState.fieldGroup.map((function(e,t){return Object(w["a"])(Object(w["a"])({},e),{},Object(D["a"])({},g["db"],"field-".concat(101+t)))}))}}})),i.fromCache=!1,U(i),i},V=(n("bbsP"),n("/wGt")),q=(n("IzEo"),n("bx4M")),z=(n("g9YV"),n("wCAj")),G=(n("lUTK"),n("BvKs")),J=n("DNOK"),H=n("sj+h"),Y=n("CTl7"),Z=n("GZ0F"),Q=n("vuKU"),$=n("rNa/"),X=function(e,t){var n=e.schemeState.dataSource,a=function(e){t({type:g["J"],payload:{selectedRowKeys:e}})};return[{key:z["a"].SELECTION_ALL,text:Object(E["jsxs"])(f["b"],{children:[Object(E["jsx"])(J["a"],{}),"\u5168\u9009\u6240\u6709\u8bb0\u5f55"]}),onSelect:function(){a(Object(A["d"])({children:n}))}},{key:"selected_clear",text:Object(E["jsxs"])(f["b"],{children:[Object(E["jsx"])(H["a"],{}),"\u53d6\u6d88\u6240\u6709\u9009\u4e2d\u8bb0\u5f55"]}),onSelect:function(){a([])}},{key:z["a"].SELECTION_INVERT,text:Object(E["jsxs"])(f["b"],{children:[Object(E["jsx"])(Y["a"],{}),"\u53cd\u9009\u6240\u6709\u8bb0\u5f55"]}),onSelect:function(){a(Object(A["d"])({children:n}).filter((function(t){return!e.selectedRowKeys.find((function(e){return e===t}))})))}},{key:"select_allleaf",text:Object(E["jsxs"])(f["b"],{children:[Object(E["jsx"])(Z["a"],{style:{visibility:"hidden"}}),"\u9009\u62e9\u6240\u6709\u672b\u7ea7\u8282\u70b9"]}),onSelect:function(){a(Object(A["g"])(n))}},{key:"select_allnotleaf",text:Object(E["jsxs"])(f["b"],{children:[Object(E["jsx"])(Z["a"],{style:{visibility:"hidden"}}),"\u9009\u62e9\u6240\u6709\u975e\u672b\u7ea7\u8282\u70b9"]}),onSelect:function(){a(Object(A["f"])(n))}},{text:Object(E["jsx"])(G["a"].Divider,{})},{key:"expandAll",text:Object(E["jsxs"])(f["b"],{children:[Object(E["jsx"])(Q["a"],{}),"\u5c55\u5f00\u6240\u6709\u884c"]}),onSelect:function(){t({type:g["m"],payload:{expandedRowKeys:Object(A["f"])(e.schemeState.dataSource)}})}},{key:"collapseAll",text:Object(E["jsxs"])(f["b"],{children:[Object(E["jsx"])($["a"],{}),"\u6298\u53e0\u81f3\u603b\u8ba1\u884c"]}),onSelect:function(){t({type:g["m"],payload:{expandedRowKeys:[e.schemeState.dataSource[0][g["db"]]]}})}}]},ee=(n("qVdP"),n("jsC+")),te=(n("y8nQ"),n("Vl3Y")),ne=(n("5NDa"),n("5rEg")),ae=(n("2qtc"),n("kLXV")),ie=n("PpiC"),re=n("aMZS"),ce=n("fHMl"),oe=n("KPg2"),se=n("GedM"),le=n("fVCw"),de=n("hbnh"),ue=n("/MfK"),pe=n("9BLJ"),fe=n("xvlK"),me=n("7vBe"),be=n("Nnhj"),je=n("rdt+"),he=n("aiD7"),_e=function(e,t){var n,a=null===(n=e.aggregateFields)||void 0===n?void 0:n.filter((function(t){return!e.schemeState.fieldGroup.find((function(e){return e.aggregatefieldname===t.aggregatefieldname}))})).map((function(e){return Object(E["jsx"])(G["a"].Item,{onClick:function(){return t(e)},children:e.text},e.aggregatefieldname)}));return a&&a.length?a:[Object(E["jsx"])(G["a"].Item,{children:"\u5b9a\u4e49\u7684\u805a\u5408\u5b57\u6bb5\u90fd\u5df2\u52a0\u5165\uff0c\u5982\u9700\u8981\u66f4\u591a\u5b57\u6bb5\u8bf7\u54a8\u8be2\u7ba1\u7406\u5458"},"noanymore")]},Oe="DragableHeaderCell",xe=function(e){var t=e.children,n=e.column,i=e.className,r=Object(ie["a"])(e,["children","column","className"]),c=Object(o["useContext"])(It),l=c.state,d=c.dispatch,u=Object(B["f"])(n),p="sumfield"===u&&l.schemeState.fieldGroup.length>1||"group"===u||"fieldingroup"===u,f=Object(A["n"])(l.schemeState.columnGroup,g["db"],g["eb"]).length,m=s.a.useRef(),j=Object(re["a"])({accept:Oe,canDrop:function(e,t){var a=t.getItem()||{},i=a.column,r=i||{},c=r.isTotalColumn,o=r[g["db"]],s=r[g["bb"]];return o!==n[g["db"]]&&(c&&n.isTotalColumn||s===n[g["bb"]])},collect:function(e){var t=e.getItem()||{},a=t.column,i=a||{},r=i.rowid,c=i.isTotalColumn,o=i[g["bb"]];return r===n[g["db"]]?{}:{isMoveOver:e.isOver(),canMoveDrop:r!==n[g["db"]]&&(c&&n.isTotalColumn||o===n[g["bb"]]),dropClassName:r<n[g["db"]]?" drop-over-right":" drop-over-left"}},drop:function(e){var t=e.column;n.isTotalColumn?Object(B["h"])(l,d,t[g["db"]],n[g["db"]]):Object(B["g"])(l,d,n[g["bb"]],t[g["db"]],n[g["db"]])}}),h=Object(a["a"])(j,2),_=h[0],x=_.isMoveOver,v=_.canMoveDrop,y=_.dropClassName,S=h[1],C=Object(O["a"])({item:{type:Oe,column:n},collect:function(e){return{isDragging:e.isDragging()}}}),I=Object(a["a"])(C,2),D=I[1];p&&S(D(m));var k=Object(re["a"])({accept:g["T"],canDrop:function(){return!0},drop:function(e){Object(B["d"])(l,d,u,"group"===u||"fieldingroup"===u?n:{},e.fieldid,e.text||e.title)},collect:function(e){return{isGroupExpandFieldOver:!!e.isOver(),canDrop:e.canDrop()}}}),P=Object(a["a"])(k,2),T=P[0].isGroupExpandFieldOver,M=P[1],N=Object(re["a"])({accept:g["U"],canDrop:function(){return!0},drop:function(e){var t=Object(R["d"])(l,e.navigateGroup.fieldid,e.node),a=[];t.forEach((function(e){a.push({condition:"".concat(e.groupfieldid,"=").concat(e.value),text:e.text,value:e.value})})),Object(B["e"])(l,d,u,"group"===u||"fieldingroup"===u?n:{},e.navigateGroup.fieldid,e.navigateGroup.text||e.navigateGroup.title,t)},collect:function(e){return{isNavigateOver:!!e.isOver(),canDrop:e.canDrop()}}}),L=Object(a["a"])(N,2),K=L[0].isNavigateOver,F=L[1];("sumfield"===u||"fieldingroup"===u||"group"===u&&n.condition)&&M(F(m));var U=function(e){d({type:g["g"],payload:{rowids:f?Object(A["n"])(l.schemeState.columnGroup,g["db"],g["eb"]):[n[g["db"]]],keepChildren:e}})},W=function(){d({type:g["i"],payload:{rowid:n[g["db"]]}})},V=function(e){d({type:g["e"],payload:{keepChildren:e}})},q=Object(E["jsxs"])(G["a"],{children:["fieldingroup"===u?Object(E["jsx"])(G["a"].Item,{icon:b["a"],onClick:W,children:n[g["eb"]]?"\u53d6\u6d88\u9009\u4e2d\u5f53\u524d\u5206\u7ec4":"\u9009\u4e2d\u5f53\u524d\u5206\u7ec4"},"toggleselected"):null,f>=2||1===f&&!n[g["eb"]]?Object(E["jsx"])(G["a"].Item,{icon:b["a"],onClick:function(){d({type:g["d"],payload:{}})},children:"\u53d6\u6d88\u9009\u4e2d\u7684 ".concat(f," \u4e2a\u5206\u7ec4")},"clearallselected"):null,Object(E["jsxs"])(G["a"].Item,{icon:Object(E["jsx"])(ce["a"],{}),onClick:function(){d({type:g["k"],payload:{type:"hidden",rowids:f?Object(A["n"])(l.schemeState.columnGroup,g["db"],g["eb"]):[n[g["db"]]]}})},children:[" ",f?"\u9690\u85cf\u9009\u4e2d\u7684 ".concat(f," \u4e2a\u5206\u7ec4"):"\u9690\u85cf\u5f53\u524d\u5206\u7ec4"]},"togglevisible"),Object(E["jsxs"])(G["a"].Item,{icon:Object(E["jsx"])(oe["a"],{rotate:n.hideRest?90:270}),onClick:function(){d({type:g["h"],payload:{rowid:n[g["db"]]}})},children:[" ","".concat(n.hideRest?"\u663e\u793a":"\u9690\u85cf","\u540e\u9762\u5269\u4f59\u7684\u5206\u7ec4")]},"hiddenrest"),Object(E["jsx"])(G["a"].Divider,{}),"fieldingroup"===u||"group"===u&&n.condition?Object(E["jsxs"])(E["Fragment"],{children:[Object(E["jsx"])(G["a"].SubMenu,{icon:Object(E["jsx"])(Q["a"],{}),title:"\u6309\u5206\u7ec4\u5c55\u5f00",children:Object(he["a"])(l.expandGroupFieldsTree||[],(function(e){Object(B["d"])(l,d,u,n,e.fieldid,e.text||e.title)}))},"fieldexpand"),Object(E["jsx"])(G["a"].Divider,{})]}):null,Object(E["jsx"])(G["a"].Item,{icon:Object(E["jsx"])(se["a"],{}),disabled:f<=1,onClick:function(){return V(!1)},children:"\u5408\u5e76\u9009\u4e2d\u7684 ".concat(f," \u4e2a\u5206\u7ec4")},"combine"),Object(E["jsx"])(G["a"].Item,{icon:Object(E["jsx"])(le["a"],{}),disabled:f<=1,onClick:function(){return V(!0)},children:"\u5408\u5e76\u9009\u4e2d\u7684 ".concat(f," \u4e2a\u540e\u52a0\u5165\u539f\u5206\u7ec4")},"combineadd"),Object(E["jsx"])(G["a"].Item,{icon:b["a"],onClick:function(){var e=n.text;ae["a"].confirm({title:"\u8bf7\u8f93\u5165\u5206\u7ec4\u63cf\u8ff0",icon:null,content:Object(E["jsx"])(te["a"],{autoComplete:"off",children:Object(E["jsx"])(ne["a"],{name:"text",defaultValue:n.text,maxLength:100,onChange:function(t){e=t.target.value}})}),onOk:function(){d({type:g["f"],payload:{rowid:n[g["db"]],text:e}})}})},children:"\u4fee\u6539\u5f53\u524d\u884c\u5206\u7ec4\u63cf\u8ff0"},"edittext"),Object(E["jsx"])(G["a"].Divider,{}),Object(E["jsx"])(G["a"].Item,{icon:Object(E["jsx"])(de["a"],{}),onClick:function(){U(!0)},children:"".concat(f?"\u4ec5\u5220\u9664\u9009\u4e2d\u7684 ".concat(f," \u4e2a\u5206\u7ec4"):"\u4ec5\u5220\u9664\u5f53\u524d\u5206\u7ec4","(\u4fdd\u7559\u5b50\u5206\u7ec4)")},"removecolumnkeepchildren"),Object(E["jsx"])(G["a"].Item,{icon:Object(E["jsx"])(ue["a"],{}),onClick:function(){U(!1)},children:"".concat(f?"\u5220\u9664\u9009\u4e2d\u7684 ".concat(f," \u4e2a\u5206\u7ec4"):"\u5220\u9664\u5f53\u524d\u5206\u7ec4","\u53ca\u5176\u5b50\u5206\u7ec4")},"removecolumn")]}),z=Object(E["jsxs"])(G["a"],{children:[Object(E["jsx"])(G["a"].SubMenu,{icon:Object(E["jsx"])(Q["a"],{}),title:"\u805a\u5408\u5b57\u6bb5\u6309\u5206\u7ec4\u5c55\u5f00",children:Object(he["a"])(l.expandGroupFieldsTree||[],(function(e){Object(B["d"])(l,d,u,{},e.fieldid,e.text||e.title)}))},"fieldexpand"),Object(E["jsx"])(G["a"].Divider,{}),Object(E["jsx"])(G["a"].Item,{icon:b["a"],onClick:function(){d({type:g["u"],payload:{}})},children:"".concat(l.currSetting.fieldGroupFixedLeft?"\u89e3\u9664":"","\u603b\u8ba1\u5217\u56fa\u5b9a\u5728\u5de6\u8fb9")},"fieldGroupFixedLeft"),Object(E["jsx"])(G["a"].Divider,{}),Object(E["jsx"])(G["a"].Item,{disabled:l.schemeState.fieldGroup.length<=1||!n.hiddenInColumnGroup&&1===l.schemeState.fieldGroup.filter((function(e){return!e.hiddenInColumnGroup})).length,icon:n.hiddenInColumnGroup?Object(E["jsx"])(pe["a"],{}):Object(E["jsx"])(ce["a"],{}),onClick:function(){d({type:g["v"],payload:{rowid:n[g["db"]]}})},children:(n.hiddenInColumnGroup?"\u5728\u5206\u7ec4\u4e2d\u663e\u793a ":"\u5728\u5206\u7ec4\u4e2d\u9690\u85cf ")+n[g["fb"]]},g["v"]),Object(E["jsx"])(G["a"].SubMenu,{icon:Object(E["jsx"])(fe["a"],{}),title:"\u589e\u52a0\u805a\u5408\u5b57\u6bb5",children:_e(l,(function(e){d({type:g["t"],payload:{field:e}})}))},"addagreegatefield"),Object(E["jsx"])(G["a"].Item,{icon:Object(E["jsx"])(ue["a"],{}),disabled:l.schemeState.fieldGroup.length<=1,onClick:function(){d({type:g["w"],payload:{rowid:n[g["db"]]}})},children:"\u5220\u9664\u5f53\u524d\u5206\u7ec4\u5b57\u6bb5"},g["w"])]}),J=Object(E["jsx"])("th",Object(w["a"])(Object(w["a"])({ref:m,onDoubleClick:W},r),{},{className:i+(x&&v?" ".concat(y):"")+(T||K?" groupexpandoverheadercell":""),children:t}));return n.hidden||"subfield"===u?J:Object(E["jsx"])(ee["a"],{overlay:"sumfield"===u?z:q,trigger:["contextMenu"],children:J})},ge=function(){var e=Object(o["useContext"])(It),t=e.state,n=e.dispatch,a=Object(E["jsxs"])(G["a"],{onClick:function(e){var t=e.domEvent;t.stopPropagation()},children:[Object(E["jsx"])(G["a"].Item,{icon:Object(E["jsx"])(Q["a"],{}),onClick:function(){n({type:g["m"],payload:{expandedRowKeys:Object(A["f"])(t.schemeState.dataSource)}})},children:"\u5c55\u5f00\u6240\u6709\u884c"},"expandAll"),Object(E["jsx"])(G["a"].Item,{icon:Object(E["jsx"])($["a"],{}),onClick:function(){n({type:g["m"],payload:{expandedRowKeys:[t.schemeState.dataSource[0][g["db"]]]}})},children:"\u6298\u53e0\u81f3\u603b\u8ba1\u884c"},"collapseAll"),Object(E["jsxs"])(G["a"].ItemGroup,{title:"\u6392\u5e8f\u8bbe\u7f6e",children:[Object(E["jsx"])(G["a"].Item,{icon:Object(E["jsx"])(me["a"],{}),onClick:function(){n({type:g["L"],payload:{property:"value",direction:"ASC"}})},children:"\u5206\u7ec4\u7f16\u7801\u5347\u5e8f"},"value-asc"),Object(E["jsx"])(G["a"].Item,{icon:Object(E["jsx"])(be["a"],{}),onClick:function(){n({type:g["L"],payload:{property:"value",direction:"DESC"}})},children:"\u5206\u7ec4\u7f16\u7801\u964d\u5e8f"},"value-desc")]}),Object(E["jsxs"])(G["a"].ItemGroup,{title:"\u91cd\u7f6e\u884c\u6216\u5217",children:[Object(E["jsx"])(G["a"].Item,{icon:Object(E["jsx"])(je["a"],{}),onClick:function(){n({type:g["c"],payload:{}})},children:"\u6e05\u9664\u6240\u6709\u884c\u5c55\u5f00\u6570\u636e"},"clearrowexpand"),Object(E["jsx"])(G["a"].Item,{icon:Object(E["jsx"])(je["a"],{}),onClick:function(){n({type:g["b"],payload:{}})},children:"\u6e05\u9664\u6240\u6709\u5217\u5c55\u5f00\u5206\u7ec4"},"clearcolumnexpand")]})]},"category_popup_menu");return a},ve=function(e){var t=e.children,n=e.column,a=e.isCategoryField,i=e.className,r=Object(ie["a"])(e,["children","column","isCategoryField","className"]);return n?xe(Object(w["a"])({children:t,column:n,className:i},r)):a?Object(E["jsx"])(ee["a"],{overlay:ge(),trigger:["contextMenu"],children:Object(E["jsx"])("th",Object(w["a"])(Object(w["a"])({},r),{},{className:i,children:t}))}):Object(E["jsx"])("th",Object(w["a"])(Object(w["a"])({},r),{},{className:i,children:t}))},ye=n("cRTa"),Ee=n("O+pJ"),Se=function(e){var t=e.index,n=e.record,i=e.moveRow,r=e.className,c=e.style,l=Object(ie["a"])(e,["index","record","moveRow","className","style"]),d=Object(o["useContext"])(It),u=d.state,p=d.dispatch,f=s.a.useRef(),m=Object(re["a"])({accept:g["S"],canDrop:function(e,t){var a=t.getItem()||{},i=a.record;return i&&n&&i.parentNode===n.parentNode},collect:function(e){var a=e.getItem()||{},i=a.index,r=a.record;return i===t?{}:{isMoveOver:e.isOver(),canMoveDrop:r&&n&&r.parentNode===n.parentNode,dropClassName:i<t?" drop-over-downward":" drop-over-upward"}},drop:function(e){i(e.record.parentNode.children.indexOf(e.record),n.parentNode.children.indexOf(n),e.record)}}),b=Object(a["a"])(m,2),j=b[0],h=j.isMoveOver,_=j.canMoveDrop,x=j.dropClassName,v=b[1],y=Object(O["a"])({item:{type:g["S"],index:t,record:n},collect:function(e){return{isDragging:e.isDragging()}}}),S=Object(a["a"])(y,2),C=S[1];v(C(f));var I=Object(re["a"])({accept:g["T"],canDrop:function(){return!0},drop:function(e){var t=[],a=u.selectedRowKeys.find((function(e){return e===n[g["db"]]}));a?t.push.apply(t,Object(k["a"])(u.selectedRowKeys.map((function(e){return Object(A["m"])(u.schemeState.dataSource,e,g["db"])})))):t.push(n),Object(Ee["f"])({state:u,dispatch:p,records:t,group:e})},collect:function(e){return{isGroupExpandOver:!!e.isOver(),canDrop:e.canDrop()}}}),D=Object(a["a"])(I,2),P=D[0].isGroupExpandOver,T=D[1],M=Object(re["a"])({accept:g["U"],canDrop:function(){return!0},drop:function(e){var t=Object(R["d"])(u,e.navigateGroup.fieldid,e.node),a=[];t.forEach((function(e){a.push({condition:"".concat(e.groupfieldid,"=").concat(e.value),leaf:!0,moduleName:e.moduleName,text:e.text,value:e.value})}));var i=n,r=-1,c=n.condition;c&&c.split("=")[0]===e.node.groupfieldid&&(i=i.parentNode,r=i.children.findIndex((function(e){return e===n}))),Object(Ee["e"])({state:u,dispatch:p,node:i,fieldid:e.navigateGroup.fieldid,title:e.navigateGroup.title,records:a,pos:r,recordpath:!0})},collect:function(e){return{isNavigateOver:!!e.isOver(),canDrop:e.canDrop()}}}),N=Object(a["a"])(M,2),L=N[0].isNavigateOver,B=N[1];return T(B(f)),Object(E["jsx"])("tr",Object(w["a"])({ref:f,style:Object(w["a"])({},c),className:"".concat(r).concat(h&&_?x:"").concat(P||L?" ant-table-row-selected":"")},l))},Ce=n("bmo+"),Ie=(n("Q9mQ"),n("diRs")),De=n("ZM8D"),ke=n("ma4E"),we=function(e){var t=e.isDataCell,n=e.column,a=e.record,i=e.children,r=Object(ie["a"])(e,["isDataCell","column","record","children"]),c=Object(o["useContext"])(Pe);return t&&a[n.dataIndex]?Object(E["jsx"])("td",Object(w["a"])(Object(w["a"])({},r),{},{children:Object(E["jsx"])("span",{style:{cursor:"pointer"},onDoubleClick:function(){var e=[];Object(L["h"])(a,e),n.condition&&e.push(n.condition),c.setDetailDrawerProps({visible:!0,conditions:e})},children:i})})):Object(E["jsx"])("td",Object(w["a"])(Object(w["a"])({},r),{},{children:i}))},Pe=Object(o["createContext"])({}),Te=function(e){var t=e.state,n=e.dispatch,i=e.disableOperate,r=Object(o["useState"])({visible:!1,setDetailDrawerProps:function(){}}),c=Object(a["a"])(r,2),s=c[0],l=c[1],d=t.moduleName,f=t.schemeState,m=f.dataSource,b=Object(u["x"])(d),j=function(e,t,a,i){var r=i.action;"sort"===r&&!Array.isArray(a)&&a.field&&"string"===typeof a.field&&a.order&&n({type:g["L"],payload:{property:a.field,direction:"descend"===a.order?"DESC":"ASC"}})},h=function(e){n({type:g["J"],payload:{selectedRowKeys:e}})},_=function(e,a){var i=t.selectedRowKeys,r=e[g["db"]],c=[];if(a)c.push.apply(c,Object(k["a"])(i)),c.find((function(e){return e===r}))?c.splice(c.findIndex((function(e){return e===r})),1):c.push(r);else{if(1===i.length&&i[0]===r)return;c.push(r)}n({type:g["J"],payload:{selectedRowKeys:c}})},O={body:{row:function(e){return Object(E["jsx"])(Se,Object(w["a"])({},e))},cell:function(e){return Object(E["jsx"])(we,Object(w["a"])({},e))}},header:{cell:function(e){return Object(E["jsx"])(ve,Object(w["a"])({},e))}}};i&&(delete O.body.row,delete O.header),t.schemeState.isMultFieldGroup&&delete O.header;var x=Object(o["useCallback"])((function(e,a,i){if(i.parentNode){var r=i.parentNode.children,c=r[e];r.splice(e,1),r.splice(a,0,c),n({type:g["o"],payload:{dataSource:Object(k["a"])(t.schemeState.dataSource)}})}}),[t.schemeState.dataSource]),v=Object(o["useMemo"])((function(){return Object(ye["a"])(f.fieldGroup,f.isMultFieldGroup,f.columnGroup,t,n,i)}),[f.fieldGroup,f.columnGroup,t.monetary,t.monetaryPosition,t.schemeState.sorts,t.currSetting.fieldGroupFixedLeft,t.schemeState.dataSource]);return Object(E["jsxs"])(E["Fragment"],{children:[b.moduleLimit.hassqlparam?Object(E["jsx"])(Ce["a"],{state:t,dispatch:n}):null,Object(E["jsx"])(q["a"],{className:"dataminingcard",children:Object(E["jsx"])(Pe.Provider,{value:{setDetailDrawerProps:l},children:Object(E["jsx"])(z["a"],{className:"dataminingtable",size:"small",bordered:!0,sticky:{offsetHeader:48},tableLayout:"auto",loading:t.fetchLoading,pagination:!1,columns:v,dataSource:m,scroll:{x:!0},indentSize:15,rowKey:g["db"],onChange:j,showSorterTooltip:!1,expandable:{defaultExpandAllRows:!0},rowSelection:{type:"checkbox",selectedRowKeys:t.selectedRowKeys,onChange:h,selections:X(t,n)},components:O,onRow:function(e,t){return{index:t,record:e,moveRow:x,onClick:function(t){(t.shiftKey||t.ctrlKey)&&_(e,t.shiftKey||t.ctrlKey)},onDoubleClick:function(){_(e,!0)},onContextMenu:function(){}}},expandedRowKeys:t.expandedRowKeys,onExpand:function(e,t){n({type:g["m"],payload:{expanded:e,key:t[g["db"]]}})}})})}),Object(E["jsx"])(V["a"],{placement:"bottom",height:600,visible:s.visible,destroyOnClose:!0,closable:!1,onClose:function(){l({visible:!1})},children:s.visible?Object(E["jsx"])(De["a"],{moduleName:t.moduleName,parentOperateType:"display",displayTitle:!0,readOnly:!0,parentFilter:void 0,dataminingFilter:{conditions:Object(A["a"])(s.conditions||[]),navigatefilters:t.filters.navigatefilters,viewschemeid:t.filters.viewscheme.viewschemeid,userfilters:Object(p["b"])(t.filters.userfilter),sqlparamstr:t.filters.sqlparam?Object(ke["p"])(t.filters.sqlparam):null}}):null})]})},Me=Te,Ae=n("sAbR"),Re=n("ga3A"),Ne=n("Lyp1"),Le=n("bRQS"),Be=n("+GxG"),Ke=function(){var e=Object(o["useContext"])(It),t=e.state,n=e.dispatch,a=t.currentScheme,i=[Object(E["jsx"])(G["a"].Item,{icon:Object(E["jsx"])(fe["a"],{}),onClick:function(){Object(L["k"])(t,n)},children:"\u5f53\u524d\u6570\u636e\u5206\u6790\u65b9\u6848\u53e6\u5b58\u4e3a"},"addscheme"),Object(E["jsx"])(G["a"].Item,{icon:Object(E["jsx"])(Re["a"],{}),disabled:0===t.schemes.length,onClick:function(){Object(L["j"])(t)},children:"\u4fdd\u5b58\u5230\u5f53\u524d\u6570\u636e\u5206\u6790\u65b9\u6848"},"savescheme"),Object(E["jsx"])(G["a"].Item,{danger:!0,icon:Object(E["jsx"])(ue["a"],{}),disabled:0===t.schemes.length,onClick:function(){return ae["a"].confirm({title:"\u786e\u5b9a\u5220\u9664",icon:Object(E["jsx"])(Ne["a"],{}),width:500,content:"\u786e\u5b9a\u8981\u5220\u9664\u6570\u636e\u5206\u6790\u65b9\u6848\u300e".concat(t.currentScheme.text,"\u300f\u5417\uff1f"),okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){return Object(L["b"])(t,n)}})},children:"\u5220\u9664\u5f53\u524d\u6570\u636e\u5206\u6790\u65b9\u6848"},"deletescheme"),Object(E["jsx"])(G["a"].ItemGroup,{title:"\u6240\u6709\u6570\u636e\u5206\u6790\u65b9\u6848",children:0===t.schemes.length?Object(E["jsx"])(G["a"].Item,{disabled:!0,children:"\u6682\u65e0\u6570\u636e\u5206\u6790\u65b9\u6848"},"_noscheme_"):t.schemes.map((function(e){return Object(E["jsx"])(G["a"].Item,{icon:(null===a||void 0===a?void 0:a.schemeid)===e.schemeid?Object(E["jsx"])(Le["a"],{}):Object(E["jsx"])(Le["a"],{style:{visibility:"hidden"}}),onClick:function(){n({type:g["l"],payload:{currentScheme:e}})},children:e.title},e.schemeid)}))},"schemes")],r=Object(E["jsx"])(G["a"],{children:i});return Object(E["jsx"])(ee["a"],{overlay:r,children:Object(E["jsxs"])(m["a"],{type:"text",size:"small",children:[Object(E["jsx"])(Be["a"],{}),"\u5206\u6790\u65b9\u6848"]})})},Fe=Ke,Ue=(n("giR+"),n("fyUT")),We=(n("BoS7"),n("Sdc0")),Ve=(n("7Kak"),n("9yH6")),qe=n("eFNv"),ze=function(){var e=Object(o["useContext"])(It),t=e.state,n=e.dispatch,i=t.schemeState.setting,r=Object(o["useState"])(!1),c=Object(a["a"])(r,2),s=c[0],l=c[1],d=function(e){var t=e.property,a=e.value;n({type:g["K"],payload:Object(D["a"])({},t,a)})},u=[Object(E["jsxs"])(G["a"].ItemGroup,{title:"\u6570\u503c\u5355\u4f4d\u8bbe\u7f6e",children:[Object(E["jsx"])(G["a"].Item,{children:Object(E["jsxs"])("div",{children:["\u6570\u503c\u5355\u4f4d\uff1a",Object(E["jsx"])(Ve["a"].Group,{value:t.monetary.type,onChange:function(e){n({type:g["z"],payload:{monetaryType:e.target.value}})},children:Object(M["c"])().map((function(e){return Object(E["jsx"])(Ve["a"].Button,{value:e.value,children:e.text},e.value)}))})]})},"monetarytype"),Object(E["jsx"])(G["a"].Item,{children:Object(E["jsxs"])("div",{children:["\u663e\u793a\u4f4d\u7f6e\uff1a",Object(E["jsxs"])(Ve["a"].Group,{value:t.monetaryPosition,onChange:function(e){n({type:g["z"],payload:{position:e.target.value}})},children:[Object(E["jsx"])(Ve["a"].Button,{value:"behindnumber",children:"\u663e\u793a\u5728\u6570\u503c\u540e"}),Object(E["jsx"])(Ve["a"].Button,{value:"columntitle",children:"\u663e\u793a\u5728\u5217\u5934\u4e0a"})]})]})},"monetaryposition")]},"itemgroupmonerary"),Object(E["jsxs"])(G["a"].ItemGroup,{title:"\u6570\u636e\u5206\u6790\u8bbe\u7f6e",children:[Object(E["jsx"])(G["a"].Item,{children:Object(E["jsxs"])("div",{children:["\u5c55\u5f00\u884c\u65f6\u52a0\u5165\u5206\u7ec4\u540d\u79f0\u884c\uff1a",Object(E["jsx"])(We["a"],{checked:"yes"===i.expandRowAddGroupName,onChange:function(e){d({property:"expandRowAddGroupName",value:e?"yes":"no"})}})]})},"expandRowAddGroupName"),Object(E["jsx"])(G["a"].Item,{children:Object(E["jsxs"])("div",{children:["\u5c55\u5f00\u5217\u65f6\u52a0\u5165\u5206\u7ec4\u540d\u79f0\u7ec4\uff1a",Object(E["jsx"])(We["a"],{checked:"yes"===i.expandColAddGroupName,onChange:function(e){d({property:"expandColAddGroupName",value:e?"yes":"no"})}})]})},"expandColAddGroupName"),Object(E["jsx"])(G["a"].Item,{children:Object(E["jsxs"])("div",{children:["\u5217\u5c55\u5f00\u65f6\u7684\u6700\u5927\u5b50\u9879\u6570\uff1a",Object(E["jsx"])(Ue["a"],{value:i.expandMaxCol,min:0,onChange:function(e){d({property:"expandMaxCol",value:e})}})]})},"expandMaxCol"),Object(E["jsx"])(G["a"].Item,{children:Object(E["jsxs"])("div",{children:["\u603b\u8ba1\u4e3a\u7a7a\u5206\u7ec4\u5217\u81ea\u52a8\u9690\u85cf\uff1a",Object(E["jsx"])(We["a"],{checked:"yes"===i.autoHiddenZeroCol,onChange:function(e){d({property:"autoHiddenZeroCol",value:e?"yes":"no"})}})]})},"autoHiddenZeroCol"),Object(E["jsx"])(G["a"].Item,{children:Object(E["jsxs"])("div",{children:["\u884c\u53ef\u4ee5\u5c55\u5f00\u591a\u4e2a\u5206\u7ec4\uff1a",Object(E["jsx"])(We["a"],{checked:"yes"===i.expandMultiGroup,onChange:function(e){d({property:"expandMultiGroup",value:e?"yes":"no"})}})]})},"expandMultiGroup")]},"itemgroupexpandrowadd")];return Object(E["jsx"])(ee["a"],{overlay:Object(E["jsx"])(G["a"],{children:u}),visible:s,onVisibleChange:function(){return l((function(e){return!e}))},children:Object(E["jsxs"])(m["a"],{type:"text",size:"small",children:[Object(E["jsx"])(qe["a"],{}),"\u8bbe\u7f6e"]})})},Ge=ze,Je=n("kFgV"),He=Object(E["jsx"])(Je["a"],{style:{visibility:"hidden"}}),Ye=Object(E["jsx"])(Le["a"],{}),Ze=function(){var e=Object(o["useContext"])(It),t=e.state,n=e.dispatch,a=t.moduleName,i=t.filters,r=i.viewscheme,c=Object(u["x"])(a),s=c.viewschemes,l=function(e){var t,a=e.key;n({type:"filterChanged",payload:{type:"viewSchemeChange",viewscheme:"cancelviewscheme"===a?{}:{viewschemeid:a,title:null===(t=Object(u["B"])(s).find((function(e){return e.value===a})))||void 0===t?void 0:t.text}}})},d=Object(E["jsxs"])(G["a"],{onClick:l,children:[r.title?Object(E["jsx"])(G["a"].Item,{children:"\u53d6\u6d88\u89c6\u56fe\u65b9\u6848"},"cancelviewscheme"):null,r.title?Object(E["jsx"])(G["a"].Divider,{}):null,Object(E["jsx"])(G["a"].ItemGroup,{title:"\u89c6\u56fe\u65b9\u6848",children:Object(u["B"])(s).map((function(e){return Object(E["jsx"])(G["a"].Item,{icon:r.viewschemeid===e.value?Ye:He,children:e.text},e.value)}))})]},"viewScheme");return Object(E["jsx"])(ee["a"],{overlay:d,children:Object(E["jsxs"])(m["a"],{size:"small",type:r.title?"link":"text",children:[Object(E["jsx"])(Je["a"],{})," \u89c6\u56fe\u65b9\u6848 ",r.title?"\uff1a".concat(r.title):null]})})},Qe=Ze,$e=(n("5Dmo"),n("3S7+")),Xe=function(e){var t=e.state,n=e.dispatch,a=t.currSetting.groupRegionVisible,i=function(){n({type:g["O"],payload:{}})};return Object(E["jsx"])($e["a"],{title:a?"\u9690\u85cf\u5206\u7ec4\u5217\u8868":"\u663e\u793a\u5206\u7ec4\u5217\u8868",children:Object(E["jsxs"])(m["a"],{type:a?"link":"text",size:"small",onClick:i,children:[Object(E["jsx"])(Q["a"],{})," \u5206\u7ec4"]})})},et=Xe,tt=(n("Awhp"),n("KrTs")),nt=n("Uw7j"),at=function(e){var t=e.state,n=e.dispatch,a=t.currSetting.filtersRegionVisible,i=function(){n({type:g["N"],payload:{}})};return Object(E["jsx"])($e["a"],{title:a?"\u9690\u85cf\u6761\u4ef6\u5217\u8868":"\u663e\u793a\u6761\u4ef6\u5217\u8868",children:Object(E["jsxs"])(m["a"],{type:a?"link":"text",size:"small",onClick:i,children:[Object(E["jsx"])(nt["a"],{})," \u6761\u4ef6",t.filterDataSource.length?Object(E["jsx"])(tt["a"],{dot:!0,status:"success",style:{marginLeft:"4px"}}):null]})})},it=at,rt=n("7K0u"),ct=n("X13+"),ot=function(e){var t=e.state,n=e.dispatch,a=t.currSetting.navigate.visible,i=function(){n({type:g["P"],payload:{}})};return Object(E["jsx"])($e["a"],{title:a?"\u9690\u85cf\u5bfc\u822a":"\u663e\u793a\u5bfc\u822a",children:Object(E["jsxs"])(m["a"],{type:a?"link":"text",size:"small",onClick:i,children:[a?Object(E["jsx"])(ct["b"],{className:"anticon"}):Object(E["jsx"])(ct["a"],{className:"anticon"})," \u5bfc\u822a"]})})},st=ot,lt=(n("14J3"),n("BMrR")),dt=(n("/zsF"),n("PArb")),ut=(n("jCWc"),n("kPKH")),pt=n("dF/Y"),ft=function(e){var t=e.state,n=e.dispatch,i=te["a"].useForm(),r=Object(a["a"])(i,1),c=r[0],o=t.exportSetting,s={padding:0,margin:4};return Object(E["jsx"])(q["a"],{title:"\u6570\u636e\u5206\u6790\u5217\u8868\u5bfc\u51fa\u8bbe\u7f6e",size:"small",bodyStyle:{padding:0,margin:0},extra:Object(E["jsxs"])(f["b"],{children:[Object(E["jsx"])(m["a"],{type:"primary",onClick:function(){Object(A["b"])(t,!1)},children:"\u5bfc\u51fa\u81f3Excel\u6587\u6863"}),Object(E["jsx"])(m["a"],{onClick:function(){Object(A["b"])(t,!0)},children:"\u5bfc\u51fa\u81f3PDF\u6587\u6863"})]}),children:Object(E["jsx"])(te["a"],{form:c,autoComplete:"off",labelCol:{flex:"1 1 120px"},style:{width:"480px",padding:"4px",margin:0},initialValues:o,onValuesChange:function(){n({type:g["n"],payload:{exportSetting:c.getFieldsValue()}})},children:Object(E["jsxs"])(lt["a"],{gutter:0,children:[Object(E["jsx"])(ut["a"],{span:12,children:Object(E["jsx"])(te["a"].Item,{name:"unittextalone",label:"\u8ba1\u91cf\u5355\u4f4d\u5355\u72ec\u4e00\u884c",valuePropName:"checked",style:s,children:Object(E["jsx"])(We["a"],{})})}),Object(E["jsx"])(ut["a"],{span:12,children:Object(E["jsx"])(te["a"].Item,{name:"colorless",label:"\u65e0\u524d\u666f\u80cc\u666f\u8272",valuePropName:"checked",style:s,children:Object(E["jsx"])(We["a"],{})})}),Object(E["jsx"])(ut["a"],{span:12,children:Object(E["jsx"])(te["a"].Item,{name:"disablecollapsed",label:"\u4e0d\u5305\u62ec\u6298\u53e0\u884c",valuePropName:"checked",style:s,children:Object(E["jsx"])(We["a"],{})})}),Object(E["jsx"])(ut["a"],{span:12,children:Object(E["jsx"])(te["a"].Item,{name:"disablerowgroup",label:"\u4e0d\u52a0\u5165\u884c\u7ec4\u5408",valuePropName:"checked",style:s,children:Object(E["jsx"])(We["a"],{})})}),Object(E["jsx"])(dt["a"],{style:{height:"3px",margin:"4px"}}),Object(E["jsx"])(ut["a"],{span:24,children:Object(E["jsx"])(te["a"].Item,{name:"pagesize",label:"\u5bfc\u51fa\u7eb8\u5f20\u8bbe\u7f6e",labelCol:{span:6},wrapperCol:{span:18},style:s,children:Object(E["jsxs"])(Ve["a"].Group,{children:[Object(E["jsx"])(Ve["a"],{value:"pageautofit",children:"\u81ea\u52a8\u9002\u5e94"}),Object(E["jsx"])("br",{}),Object(E["jsx"])(Ve["a"],{value:"A4",children:"A4\u7eb5\u5411"}),Object(E["jsx"])(Ve["a"],{value:"A4landscape",children:"A4\u6a2a\u5411"}),Object(E["jsx"])("br",{}),Object(E["jsx"])(Ve["a"],{value:"A3",children:"A3\u7eb5\u5411"}),Object(E["jsx"])(Ve["a"],{value:"A3landscape",children:"A3\u6a2a\u5411"})]})})}),Object(E["jsx"])(ut["a"],{span:12,children:Object(E["jsx"])(te["a"].Item,{name:"scale",label:"\u7f29\u653e\u6bd4\u4f8b(%)",style:s,children:Object(E["jsx"])(Ue["a"],{disabled:"pageautofit"===o.pagesize,min:1,max:1e4})})}),Object(E["jsx"])(ut["a"],{span:12,children:Object(E["jsx"])(te["a"].Item,{name:"autofitwidth",label:"\u81ea\u52a8\u9002\u5e94\u5217\u5bbd",valuePropName:"checked",style:s,children:Object(E["jsx"])(We["a"],{disabled:"pageautofit"===o.pagesize})})})]})})})},mt=function(e){var t=e.state,n=e.dispatch;return Object(E["jsx"])(Ie["a"],{content:Object(E["jsx"])(ft,{state:t,dispatch:n}),style:{padding:0,margin:0},placement:"bottomRight",children:Object(E["jsxs"])(m["a"],{type:"text",size:"small",children:[Object(E["jsx"])(pt["a"],{}),"\u5bfc\u51fa"]})})},bt=function(e){var t=e.state,n=e.dispatch,a=e.disableSchemeButton,i=t.moduleName,r=Object(u["x"])(i);return Object(E["jsxs"])(f["b"],{size:[2,0],wrap:!0,style:{paddingTop:"6px"},children:[a?null:Object(E["jsx"])(Fe,{}),Object(u["B"])(r.viewschemes).length?Object(E["jsx"])(Qe,{}):null,Object(E["jsx"])(st,{state:t,dispatch:n}),Object(u["q"])(r)?Object(E["jsx"])(Ae["a"],{moduleState:t,dispatch:n}):null,Object(E["jsx"])(it,{state:t,dispatch:n}),Object(E["jsx"])(et,{state:t,dispatch:n}),Object(E["jsx"])(rt["a"],{}),Object(E["jsx"])(mt,{state:t,dispatch:n}),Object(E["jsx"])(Ge,{})]})},jt=bt,ht=n("5Zmo"),_t=n("ye1Q"),Ot=function(){var e=Object(o["useContext"])(It),t=e.state,n=e.dispatch,i=[{title:"\u6761\u4ef6\u6765\u6e90",dataIndex:"source",width:90,render:ht["q"]},{title:"\u67e5\u8be2\u5b57\u6bb5",dataIndex:"fieldtitle",width:150,render:function(e){return Object(E["jsx"])("span",{style:{fontWeight:700},children:e})}},{title:"\u6bd4\u8f83\u7b26",dataIndex:"operator",width:90},{title:"\u67e5\u8be2\u6761\u4ef6",dataIndex:"displaycond",flex:1,render:function(e){return Object(E["jsx"])("span",{className:y.a.filtertitle,children:e})}},{title:"\u8bb0\u5f55\u6570",dataIndex:"recordnum",width:80,align:"right",render:function(e){return-1===e?Object(E["jsx"])(_t["a"],{}):Object(ht["h"])(e)}},{width:36,align:"center",render:function(e,a){return Object(E["jsx"])($e["a"],{title:"\u5220\u9664\u6b64\u6761\u4ef6",children:Object(E["jsx"])(ue["a"],{onClick:function(){Object(N["a"])(t,n,a)}})})}}],r="DataminingConditionDragableBodyRow",c=function(e){var t=e.index,n=e.moverow,i=e.className,c=e.style,o=Object(ie["a"])(e,["index","moverow","className","style"]),l=s.a.useRef(),d=Object(re["a"])({accept:r,collect:function(e){var n=e.getItem()||{},a=n.index;return a===t?{}:{isOver:e.isOver(),dropClassName:a<t?" drop-over-downward":" drop-over-upward"}},drop:function(e){n(e.index,t)}}),u=Object(a["a"])(d,2),p=u[0],f=p.isOver,m=p.dropClassName,b=u[1],j=Object(O["a"])({item:{type:r,index:t},collect:function(e){return{isDragging:e.isDragging()}}}),h=Object(a["a"])(j,2),_=h[1];return b(_(l)),Object(E["jsx"])("tr",Object(w["a"])({ref:l,className:"".concat(i).concat(f?m:""),style:Object(w["a"])({},c)},o))},l={body:{row:c}},d=Object(o["useCallback"])((function(e,a){var i=t.filterDataSource,r=i[e];e!==a&&n({type:g["y"],payload:{filterDataSource:T()(i,{$splice:[[e,1],[a,0,r]]}).map((function(e){return Object(w["a"])(Object(w["a"])({},e),{},{recordnum:-1})})),refreshCount:!0}})}),[t.filterDataSource]);return Object(E["jsx"])(q["a"],{className:"dataminingcard",style:{marginBottom:"16px",height:"auto"},children:Object(E["jsx"])(z["a"],{className:"dataminingconditiontable",columns:i,dataSource:t.filterDataSource,bordered:!0,size:"small",pagination:!1,components:t.filterDataSource.length>1?l:void 0,onRow:function(e,t){return{index:t,moverow:d,onClick:function(){}}}})})},xt=(n("R9oj"),n("ECub")),gt=(n("miYZ"),n("tsqr")),vt=(n("Znn+"),n("ZTPi")),yt=n("WGjm"),Et=n("MGWp"),St=function(){var e=Object(o["useContext"])(It),t=e.state,n=e.dispatch,a=t.navigates,i=t.currSetting.navigate.visible,c=Object(E["jsx"])(vt["a"],{onEdit:function(e,t){"remove"===t&&n({type:g["G"],payload:{fieldid:e}})},activeKey:t.currSetting.navigate.activeKey,onChange:function(e){n({type:g["A"],payload:{activeKey:e}})},type:"editable-card",hideAdd:!0,size:"small",children:a.map((function(e){return Object(E["jsx"])(vt["a"].TabPane,{closable:!0,tab:e.navigateGroup.title,children:Object(E["jsx"])(Et["a"],{navigate:e,state:t,dispatch:n})},e.navigateGroup.fieldid)}))}),s=Object(E["jsx"])(G["a"],{children:Object(he["a"])(t.expandGroupFieldsTree||[],(function(e){t.navigates.find((function(t){return t.navigateGroup.fieldid===e.fieldid}))?gt["default"].warn("".concat(e.title,"\u5728\u5bfc\u822a\u533a\u57df\u4e2d\u5df2\u7ecf\u5b58\u5728\u4e86\uff01")):n({type:g["B"],payload:{navigateGroup:e}})}))}),l=120,d={enable:{top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},minWidth:i?l:void 0,maxWidth:500,size:i?void 0:{width:0,height:0},style:{marginRight:"12px"}};return t.currSetting.navigate.visible?Object(E["jsx"])(yt["a"],Object(w["a"])(Object(w["a"])({},d),{},{children:Object(E["jsx"])(r["a"].Sider,{theme:"light",width:"auto",children:Object(E["jsxs"])(q["a"],{bodyStyle:{paddingTop:0},title:"\u6761\u4ef6\u5bfc\u822a",extra:Object(E["jsxs"])(f["b"],{children:[Object(E["jsx"])(ee["a"],{overlay:s,trigger:["click"],children:Object(E["jsx"])(fe["a"],{})}),Object(E["jsx"])(j["a"],{onClick:function(){n({type:g["P"],payload:{}})}})]}),size:"small",children:[0===t.navigates.length?Object(E["jsx"])(xt["a"],{style:{marginTop:"48px"},description:"\u6682\u65e0\u5bfc\u822a\u5206\u7ec4"}):null,c]})})})):null},Ct=n("jE+T"),It=Object(o["createContext"])({state:Object(A["k"])("undefined"),dispatch:function(){}}),Dt=function(e){var t=e.inContainer,n=e.onlyTable,a=e.disableOperate,l=e.disableSchemeButton,f=Object(o["useContext"])(It),m=f.state,b=f.dispatch,j=m.moduleName,h=m.currentScheme,_=Object(u["x"])(j);Object(o["useEffect"])((function(){m.schemes.length||b({type:g["p"],payload:{}})}),[]),Object(o["useEffect"])((function(){m.fromCache||(h.schemeid||!h.schemeid&&0===m.schemes.length)&&Object(L["a"])(m,b)}),[h]),Object(o["useEffect"])((function(){m.fromCache||m.refreshAllCount>0&&Object(L["i"])(m,b)}),[m.refreshAllCount]),Object(o["useEffect"])((function(){m.fromCache||m.refreshFilterDataSourceCount>0&&m.currSetting.filtersRegionVisible&&setTimeout((function(){Object(N["d"])(m,b)}),600)}),[m.refreshFilterDataSourceCount]),Object(o["useEffect"])((function(){m.fromCache||m.currSetting.filtersRegionVisible&&m.filterDataSource.length&&-1===m.filterDataSource[0].recordnum&&Object(N["d"])(m,b)}),[m.currSetting.filtersRegionVisible]);var O=Object(o["useMemo"])((function(){return Object(E["jsx"])(Me,{state:m,dispatch:b,disableOperate:a})}),[m.schemeState.dataSource,m.selectedRowKeys,m.expandedRowKeys,m.fetchLoading,m.monetary,m.monetaryPosition,m.schemeState.columnGroup,m.schemeState.fieldGroup,m.currSetting.fieldGroupFixedLeft]),x=Object(E["jsxs"])("span",{children:[Object(Ct["j"])(_)," ",_.title,Object(E["jsx"])(c["a"].Text,{type:"secondary",style:{fontSize:"14px",marginLeft:"24px",fontWeight:400},children:m.currentScheme.title})]}),v=Object(E["jsxs"])(s.a.Fragment,{children:[Object(E["jsx"])(I,{state:m,dispatch:b},m.moduleName),Object(E["jsxs"])(r["a"],{className:"datamininglayout",children:[Object(E["jsx"])(St,{}),Object(E["jsxs"])(r["a"].Content,{children:[Object(u["q"])(_)?Object(E["jsx"])("div",{className:"dataminingcard",children:Object(E["jsx"])(p["c"],{visible:m.currSetting.userFilterRegionVisible,moduleState:m,dispatch:b})}):null,m.currSetting.filtersRegionVisible?Object(E["jsx"])(Ot,{}):null,O]})]})]});return t?Object(E["jsxs"])("div",{children:[n?null:Object(E["jsx"])(i["a"],{title:x,extra:Object(E["jsx"])(jt,{state:m,dispatch:b,disableSchemeButton:l})}),Object(E["jsx"])("div",{className:n?y.a.dataminingcardintabonlytable:y.a.dataminingcardintab,children:v})]}):Object(E["jsx"])(d["a"],{title:x,extra:Object(E["jsx"])(jt,{state:m,dispatch:b}),children:v})},kt=function(e){var t=e.moduleName,n=e.defaultSchemeid,i=e.dataminingProps,r=Object(o["useReducer"])(W,F(t,n)),c=Object(a["a"])(r,2),s=c[0],d=c[1],u=i||{},p=u.inContainer,f=u.onlyTable,m=u.disableOperate,b=u.disableSchemeButton;return Object(E["jsx"])(l["a"],{children:Object(E["jsx"])(It.Provider,{value:{state:s,dispatch:d},children:Object(E["jsx"])(Dt,{inContainer:p,onlyTable:f,disableOperate:m,disableSchemeButton:b})})})},wt=function(e){var t=e.route,n=e.match,a=t.name||n.params.moduleName;return Object(E["jsx"])(kt,{moduleName:a},a)};t["default"]=wt},nwhw:function(e,t,n){"use strict";var a=n("hgP1");e.exports=function(e,t,n,i){var r=a(t,n,{},i);return e.entries=e.entries.concat(r.entries),{getSelectedParameter:r.getSelectedParameter}}},oNIl:function(e,t,n){"use strict";n.d(t,"c",(function(){return R})),n.d(t,"b",(function(){return N})),n.d(t,"a",(function(){return L}));n("+L6B");var a=n("2/Rp"),i=n("k1fw"),r=(n("2qtc"),n("kLXV")),c=(n("miYZ"),n("tsqr")),o=n("q1tI"),s=n.n(o),l=n("sy1d"),d=n("Lyp1"),u=n("79+z"),p=n("WTWM"),f=n("mDHv"),m=n("MzlM"),b=n("1qKY"),j=n("NB5u"),h=(n("DYRE"),n("zeV3")),_=(n("fOrg"),n("+KLJ")),O=n("nKUr"),x=function(e){var t=e.dispatch;Object(l["default"])("".concat(l["API_HEAD"],"/abcgate/device/checkonline.do"),{}).then((function(e){e.success?(t({type:"modules/fetchData",payload:{moduleName:"AbcDevice",forceUpdate:!0}}),c["default"].info(e.msg)):c["default"].error(e.msg)}))},g=!1,v=function(e){if(g)c["default"].warn("\u6b63\u5728\u8fdb\u884c\u7167\u7247\u5206\u914d\u64cd\u4f5c\uff01");else{g=!0;var t=e.record,n=e.dispatch,a=t.classId,i=t.className,o=c["default"].loading("\u6b63\u5728\u5c06".concat(i,"\u7684\u7167\u7247\u6839\u636e\u59d3\u540d\u3001\u5b66\u53f7\u6216\u5de5\u53f7\u3001\u624b\u673a\u53f7\u5206\u914d\u7ed9\u4eba\u5458\uff0c\u8bf7\u7a0d\u5019"),0);Object(l["default"])("".concat(l["API_HEAD"],"/abcgate/class/dispatchemployeephoto.do"),{timeout:6e5,params:{classId:a}}).then((function(e){if(e.success){n({type:"modules/refreshRecord",payload:{moduleName:"AbcClass",recordId:a}});var t=e.msg,i=Object(O["jsxs"])(h["b"],{direction:"vertical",children:[t.already.length?Object(O["jsx"])(_["a"],{message:"\u539f\u5df2\u8bc6\u522b\u7167\u7247\u7684\u4eba\u5458",description:Object(O["jsxs"])(O["Fragment"],{children:[Object(O["jsx"])("b",{children:t.already.join(",")}),Object(O["jsx"])("br",{}),Object(O["jsx"])(O["Fragment"],{children:"\u4e00\u822c\u662f\u7167\u7247\u4e0a\u4f20\u91cd\u590d\u4e86\u3002\u5982\u679c\u8981\u91cd\u590d\u4e0a\u4f20\uff0c\u8bf7\u5230\u4eba\u5458\u4fe1\u606f\u91cc\u7ee7\u7eed\u4e0a\u4f20\uff0c\u5373\u53ef\u8fdb\u884c\u8bc6\u522b\u5224\u65ad\u3002"})]}),type:"warning"}):null,t.success.length?Object(O["jsx"])(_["a"],{message:"\u672c\u6b21\u8bc6\u522b\u7167\u7247\u7684\u4eba\u5458",description:Object(O["jsx"])(O["Fragment"],{children:Object(O["jsx"])("b",{children:t.success.join(",")})}),type:"info"}):null,t.failure.length?Object(O["jsx"])(_["a"],{message:"\u672c\u6b21\u672a\u8bc6\u522b\u7167\u7247\u4eba\u5458",description:Object(O["jsxs"])(O["Fragment"],{children:[Object(O["jsx"])("b",{children:t.failure.join(",")}),Object(O["jsx"])("br",{}),Object(O["jsx"])(O["Fragment"],{children:"\u7167\u7247\u672a\u80fd\u88ab\u68c0\u6d4b\u51fa\u4eba\u8138\u6570\u636e\uff0c\u9700\u8981\u91cd\u65b0\u62cd\u7167\u4e0a\u4f20\uff0c\u539f\u6765\u7684\u7167\u7247\u9644\u4ef6\u53ef\u4ee5\u5728\u4eba\u5458\u91cc\u9762\u5220\u9664\u3002"})]}),type:"warning"}):null,t.notFind.length?Object(O["jsx"])(_["a"],{message:"\u6ca1\u6709\u53d1\u73b0\u4eba\u5458\u7684\u7167\u7247",description:Object(O["jsxs"])(O["Fragment"],{children:[Object(O["jsx"])("b",{children:t.notFind.join(",")}),Object(O["jsx"])("br",{}),Object(O["jsx"])(O["Fragment"],{children:"\u8bf7\u68c0\u67e5\u6587\u4ef6\u540d\u662f\u5426\u662f\u4eba\u5458\u59d3\u540d\uff0c\u5de5\u53f7\u6216\u624b\u673a\u53f7\u7801\u3002\n            \u8fd9\u4e9b\u9644\u4ef6\u53ef\u4ee5\u5220\u9664\uff0c\u6539\u540d\u540e\u518d\u91cd\u65b0\u4e0a\u4f20\u3002"})]}),type:"error"}):null]});r["a"].info({title:"\u4eba\u5458\u7167\u7247\u5206\u6790\u7ed3\u679c",width:500,content:i})}else c["default"].error(e.msg)})).finally((function(){g=!1,o()}))}},y="agreementId",E="planId",S="auditingDate",C="paymentId",I=function(e){e&&e.dispatch({type:"modules/refreshRecord",payload:{moduleName:"PmAgreement",recordId:e.currRecord[y]}})},D=function(e){var t=e.moduleState,n=e.dispatch,a=t,i=a.moduleName,o=a.filters.parentfilter,s=a.parentForm;if(o&&"pmAgreement"===(null===o||void 0===o?void 0:o.fieldahead)){var d="\u300e".concat(o.text,"\u300f");Object(l["default"])("".concat(l["API_HEAD"],"/pm/plan/autoplan.do"),{params:{agreementId:o.fieldvalue}}).then((function(e){e.success?(c["default"].success("\u5408\u540c".concat(d,"\u7684\u4ed8\u6b3e\u8ba1\u5212\u5df2\u5236\u4f5c\u5b8c\u6210\uff01")),n({type:"modules/fetchData",payload:{moduleName:i,forceUpdate:!0}}),I(s)):r["a"].error({title:"\u5408\u540c".concat(d,"\u7684\u4ed8\u6b3e\u8ba1\u5212\u5236\u4f5c\u5931\u8d25\uff01"),width:500,content:e.msg})}))}else c["default"].warn("\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u5408\u540c\uff0c\u6216\u8005\u5408\u540c\u4ed8\u6b3e\u8ba1\u5212\u6a21\u5757\u5728\u5408\u540c\u4e4b\u4e0b\uff01")},k=function(e){var t=e.moduleState,n=e.dispatch,a=t.moduleName,i=t.filters.parentfilter,o=t.parentForm;if(i&&"pmAgreement"===(null===i||void 0===i?void 0:i.fieldahead)){var s="\u300e".concat(i.text,"\u300f");Object(l["default"])("".concat(l["API_HEAD"],"/pm/plan/autobalance.do"),{params:{agreementId:i.fieldvalue}}).then((function(e){e.success?(c["default"].success("\u5408\u540c".concat(s,"\u7684\u4ed8\u6b3e\u8ba1\u5212\u672b\u6761\u5e73\u8861\u5df2\u5b8c\u6210\uff01")),Object(u["E"])(e.resultInfo),n({type:"modules/fetchData",payload:{moduleName:a,forceUpdate:!0}}),I(o)):r["a"].error({title:"\u5408\u540c".concat(s,"\u7684\u4ed8\u6b3e\u8ba1\u5212\u672b\u6761\u5e73\u8861\u5931\u8d25\uff01"),width:500,content:e.msg})}))}else c["default"].warn("\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u5408\u540c\uff0c\u6216\u8005\u5408\u540c\u4ed8\u6b3e\u8ba1\u5212\u6a21\u5757\u5728\u5408\u540c\u4e4b\u4e0b\uff01")},w=function(e){var t=e.record,n=e.moduleState,a=e.dispatch,i=n.moduleName,o=n.filters.parentfilter,s=n.parentForm;o&&"pmAgreement"===(null===o||void 0===o?void 0:o.fieldahead)?r["a"].confirm({title:"\u786e\u5b9a\u8981\u4ece\u5f53\u524d\u7684\u9009\u4e2d\u8bb0\u5f55\u5904\u5f00\u59cb\u6267\u884c\u7ed3\u7b97\u91d1\u989d\u7684\u6309\u6bd4\u4f8b\u5e73\u8861\u5417?",icon:Object(O["jsx"])(d["a"],{}),onOk:function(){var e="\u300e".concat(o.text,"\u300f");Object(l["default"])("".concat(l["API_HEAD"],"/pm/plan/balancebyrecord.do"),{params:{planId:t[E]}}).then((function(t){t.success?(c["default"].success("\u5408\u540c".concat(e,"\u7684\u5ba1\u8ba1\u6216\u7ed3\u7b97\u91d1\u989d\u53d8\u66f4\u540e\u5e73\u8861\u5df2\u5b8c\u6210\uff0c\u8bf7\u590d\u6838\u5e73\u8861\u540e\u7684\u4ed8\u6b3e\u8ba1\u5212\uff01")),a({type:"modules/fetchData",payload:{moduleName:i,forceUpdate:!0}}),I(s)):r["a"].error({title:"\u5408\u540c".concat(e,"\u7684\u5ba1\u8ba1\u6216\u7ed3\u7b97\u91d1\u989d\u53d8\u66f4\u540e\u5e73\u8861\u5931\u8d25\uff01"),width:500,content:t.msg})}))}}):c["default"].warn("\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u5408\u540c\uff0c\u6216\u8005\u5408\u540c\u4ed8\u6b3e\u8ba1\u5212\u6a21\u5757\u5728\u5408\u540c\u4e4b\u4e0b\uff01")},P=function(e){var t=e.record,n=e.funcDefine,r=e.dispatch;if(!t||!t[S]||!t.paymentAllowAmount)return null;var c="PmPayment",s=y,l=Object(p["x"])(c),d={moduleName:"PmAgreement",fieldahead:"pmAgreement",fieldName:s,fieldtitle:"\u9879\u76ee\u5408\u540c",operator:"=",fieldvalue:t[s],text:t[j["d"]]},h=function(){var e=Object(o["useContext"])(b["a"]),d=e.moduleState,p=d.formState,f=e.dispatch;return Object(O["jsxs"])(O["Fragment"],{children:[Object(O["jsx"])(a["a"],{icon:Object(u["s"])(n.iconcls),onClick:function(){f({type:"modules/formStateChanged",payload:{moduleName:c,formState:Object(i["a"])(Object(i["a"])({},p),{},{visible:!0,formType:"insert",currRecord:{}})}})},children:n.title},"button-".concat(t[s])),Object(O["jsx"])(m["a"],{moduleInfo:l,moduleState:d,dispatch:f,callback:function(){r({type:"modules/refreshRecord",payload:{moduleName:"PmAgreement",recordId:t[s]}})}})]})};return Object(O["jsx"])(f["a"],{moduleName:c,parentFilter:d,children:Object(O["jsx"])(h,{})},t[s])},T=function(e){var t=e.record,n=e.funcDefine,r=e.dispatch;if(!t||!t[S]||t.paymentDetailAmount===t.paymentFinishedAmount)return null;var c="PmPaymentDetail",s=y,l=Object(p["x"])(c),d={moduleName:"PmAgreement",fieldahead:"pmPayment.pmAgreement",fieldName:s,fieldtitle:"\u9879\u76ee\u5408\u540c",operator:"=",fieldvalue:t[s],text:t[j["d"]]},h=function(){var e=Object(o["useContext"])(b["a"]),d=e.moduleState,p=d.formState,f=e.dispatch;return Object(O["jsxs"])(O["Fragment"],{children:[Object(O["jsx"])(a["a"],{icon:Object(u["s"])(n.iconcls),onClick:function(){f({type:"modules/formStateChanged",payload:{moduleName:c,formState:Object(i["a"])(Object(i["a"])({},p),{},{visible:!0,formType:"insert",currRecord:{}})}})},children:n.title},"button-".concat(t[s])),Object(O["jsx"])(m["a"],{moduleInfo:l,moduleState:d,dispatch:f,callback:function(){r({type:"modules/refreshRecord",payload:{moduleName:"PmAgreement",recordId:t[s]}})}})]})};return Object(O["jsx"])(f["a"],{moduleName:c,parentFilter:d,children:Object(O["jsx"])(h,{})},t[s])},M=function(e){var t=e.moduleState,n=e.record,i=e.funcDefine,o=e.dispatch;if(!n)return null;var s=y,p="\u300e".concat(n[j["d"]],"\u300f");return n[S]&&n.amount===n.paymentDetailAmount&&n["pmAgreementState.stateCode"]<"99"?Object(O["jsx"])(a["a"],{icon:Object(u["s"])(i.iconcls),onClick:function(){r["a"].confirm({title:"\u786e\u5b9a\u8981\u628a\u5408\u540c".concat(p,"\u5b58\u6863\u5417\uff1f"),icon:Object(O["jsx"])(d["a"],{}),width:500,onOk:function(){Object(l["default"])("".concat(l["API_HEAD"],"/pm/agreement/filed.do"),{params:{agreementId:n[s]}}).then((function(e){e.success?(c["default"].success("\u5408\u540c".concat(p,"\u5df2\u5b58\u6863\uff01")),o({type:"modules/refreshRecord",payload:{moduleName:t.moduleName,recordId:n[s]}})):r["a"].error({title:"\u5408\u540c".concat(p,"\u5b58\u6863\u5931\u8d25\uff01"),width:500,content:e.msg})}))}})},children:i.title},"button-".concat(n[s])):null},A=function(e){var t=e.moduleState,n=e.record,i=e.funcDefine,o=e.dispatch;if(!n)return null;var s=C,p="\u5408\u540c\u300e".concat(n["pmAgreement.name"],"\u300f\u7684\u4ed8\u6b3e\u5ba1\u6279\u8868\u300e").concat(n.reason,"\u300f");return"\u672a\u542f\u52a8"===n.actProcState?Object(O["jsx"])(a["a"],{icon:Object(u["s"])(i.iconcls),onClick:function(){r["a"].confirm({title:"\u786e\u5b9a\u8981\u5bf9".concat(p,"\u76f4\u63a5\u5ba1\u6279\u901a\u8fc7\u5417\uff1f(\u53ea\u5bf9\u4e8e\u4ee5\u524d\u5df2\u7ecf\u5ba1\u6279\u8fc7\u7684\u548c\u672a\u5728\u7ebf\u4e0a\u5ba1\u6279\u7684\u9002\u7528)"),icon:Object(O["jsx"])(d["a"],{}),width:500,onOk:function(){Object(l["default"])("".concat(l["API_HEAD"],"/pm/payment/autoapprove.do"),{params:{paymentId:n[s]}}).then((function(e){e.success?(c["default"].success("".concat(p,"\u5df2\u8bbe\u7f6e\u4e3a\u901a\u8fc7\u5ba1\u6279\uff0c\u53ef\u4ee5\u8fdb\u884c\u652f\u4ed8\uff01")),o({type:"modules/refreshRecord",payload:{moduleName:t.moduleName,recordId:n[s]}})):r["a"].error({title:"".concat(p,"\u76f4\u63a5\u5ba1\u6279\u901a\u8fc7\u5931\u8d25\uff01"),width:500,content:e.msg})}))}})},children:i.title},"button-".concat(n[s])):null},R=function(e){var t=e.record,n=e.funcDefine,r=e.dispatch,c=e.moduleState.parentForm;if(!t||"20"!==t.payoutStatus)return null;var l="PmPaymentDetail",d="paymentId",j=Object(p["x"])(l),h={moduleName:"PmPayment",fieldahead:"pmPayment",fieldName:d,fieldtitle:"\u9879\u76ee\u5408\u540c\u8bf7\u6b3e\u5355",operator:"=",fieldvalue:t[d],text:t.reason},_=function(){var e=Object(o["useContext"])(b["a"]),p=e.moduleState,f=p.formState,h=e.dispatch;return Object(O["jsxs"])(s.a.Fragment,{children:[Object(O["jsx"])(a["a"],{icon:"link"===n.buttonType?null:Object(u["s"])(n.iconcls),type:n.buttonType||void 0,style:"link"===n.buttonType?{padding:0,margin:0,height:"inherit"}:{},onClick:function(){h({type:"modules/formStateChanged",payload:{moduleName:l,formState:Object(i["a"])(Object(i["a"])({},f),{},{visible:!0,formType:"insert",currRecord:{}})}})},children:n.title},"button-".concat(t[d])),Object(O["jsx"])(m["a"],{moduleInfo:j,moduleState:p,dispatch:h,hiddenSetNull:!0,callback:function(){r({type:"modules/refreshRecord",payload:{moduleName:"PmPayment",recordId:t[d]}}),I(c)}})]})};return Object(O["jsx"])(f["a"],{moduleName:l,parentFilter:h,children:Object(O["jsx"])(_,{})},t[d])},N={agreementPlanAutoCreate:D,agreementPlanAutoBalance:k,agreementPlanbalanceByRecord:w,deviceCheckOnline:x,dispatchEmployeePhoto:v},L={agreementCreatePayment:P,agreementCreatePaymentDetail:T,agreementFiled:M,paymentCreatePaymentDetail:R,paymentAutoApprove:A}},oOfT:function(e,t,n){e.exports={staticcard:"staticcard___QRdDu",staticcardgroup:"staticcardgroup___xj5WP",filtericon:"filtericon___2MFSl"}},od3r:function(e,t,n){e.exports={popover:"popover___3CK4c",noticeButton:"noticeButton___2tmwZ",icon:"icon___1g-4R",badge:"badge___2Vc9h",tabs:"tabs___dTkaB"}},"ozh/":function(e,t,n){"use strict";var a=n("emvA").is,i=n("FF3N").isAny,r=n("emvA").getBusinessObject,c=n("k4Da"),o=n("Nw6e"),s=n("hfUJ"),l=n("EWYV"),d=n("vtLx"),u=n("jd30"),p=n("6BL2");function f(e,t){var n=r(e),a=d.getSignalEventDefinition(n);return o.getExtensionElements(a||n,t)||[]}function m(e,t){var n=f(e,t);return c(n,(function(e){return!e.businessKey}))}function b(e){var t="source";return"all"===e.variables?t="variables":"undefined"!==typeof e.source?t="source":"undefined"!==typeof e.sourceExpression&&(t="sourceExpression"),t}var j="activiti:In",h="activiti:Out",_=/\s/;e.exports=function(e,t,n,c){var f=[{name:c("Source"),value:"source"},{name:c("Source Expression"),value:"sourceExpression"},{name:c("All"),value:"variables"}],O=d.getSignalEventDefinition(t);if((a(t,"activiti:CallActivity")||O)&&(!O||i(t,["bpmn:IntermediateThrowEvent","bpmn:EndEvent"]))){var x=function(e,t){return!!g(e,t)},g=function(e,t){var n=t.parentNode,a=S.getSelected(e,n),i=m(e,j)[a.idx];return!i&&C&&(a=C.getSelected(e,n),i=m(e,h)[a.idx]),i},v=function(e){return function(t,n,a,i,r,c){var o=m(t,e),s=o[c],l=(s.target||"<undefined>")+" := ",d=b(s);"variables"===d?l="all":l+="source"===d?s.source||"<empty>":"sourceExpression"===d&&s.sourceExpression||"<empty>",a.text=l}},y=function(e){return function(t,a,i){var r=l.createElement(e,{source:""},a,n);return s.addElementsTolist(t,a,"values",[r])}},E=function(e){return function(t,n,a,i){var c=m(t,e),s=c[i];if(s)return o.removeEntry(O||r(t),t,s)}},S=u(t,n,{id:"variableMapping-in",label:c("In Mapping"),modelProperty:"source",prefix:"In",idGeneration:!1,resizable:!0,businessObject:O||r(t),createExtensionElement:y(j),removeExtensionElement:E(j),getExtensionElements:function(e){return m(e,j)},onSelectionChange:function(e,t,n,a){C&&C.deselect(e,t.parentNode)},setOptionLabelValue:v(j)});if(e.entries.push(S),!O){var C=u(t,n,{id:"variableMapping-out",label:c("Out Mapping"),modelProperty:"source",prefix:"Out",idGeneration:!1,resizable:!0,createExtensionElement:y(h),removeExtensionElement:E(h),getExtensionElements:function(e){return m(e,h)},onSelectionChange:function(e,t,n,a){S.deselect(e,t.parentNode)},setOptionLabelValue:v(h)});e.entries.push(C)}e.entries.push(p.label({id:"variableMapping-typeLabel",get:function(e,t){var n=g(e,t),i="";return a(n,j)?i=c("In Mapping"):a(n,h)&&(i=c("Out Mapping")),{label:i}},showLabel:function(e,t){return x(e,t)}})),e.entries.push(p.selectBox({id:"variableMapping-inOutType",label:c("Type"),selectOptions:f,modelProperty:"inOutType",get:function(e,t){var n=g(e,t)||{};return{inOutType:b(n)}},set:function(e,t,n){var a=t.inOutType,i={source:void 0,sourceExpression:void 0,variables:void 0};"source"===a?i.source="":"sourceExpression"===a?i.sourceExpression="":"variables"===a&&(i.variables="all",i.target=void 0);var r=g(e,n);return s.updateBusinessObject(e,r,i)},hidden:function(e,t){return!x(e,t)}})),e.entries.push(p.textField({id:"variableMapping-source",dataValueLabel:"sourceLabel",modelProperty:"source",get:function(e,t){var n=g(e,t)||{},a="",i=b(n);return"source"===i?a=c("Source"):"sourceExpression"===i&&(a=c("Source Expression")),{source:n[i],sourceLabel:a}},set:function(e,t,n){t.source=t.source||void 0;var a=g(e,n),i=b(a),r={};return r[i]=t.source||"",s.updateBusinessObject(e,a,r)},validate:function(e,t,n){var a=g(e,n),i={};if(a){t.source||(i.source=i.source=t.sourceLabel?c("Mapping must have a {value}",{value:t.sourceLabel.toLowerCase()}):c("Mapping must have a value"));var r=b(a);_.test(t.source)&&"sourceExpression"!==r&&(i.source=c("{label} must not contain whitespace",{label:t.sourceLabel}))}return i},hidden:function(e,t){var n=g(e,t);return!n||n&&n.variables}})),e.entries.push(p.textField({id:"variableMapping-target",label:c("Target"),modelProperty:"target",get:function(e,t){return{target:(g(e,t)||{}).target}},set:function(e,t,n){t.target=t.target||void 0;var a=g(e,n);return s.updateBusinessObject(e,a,t)},validate:function(e,t,n){var a=g(e,n),i={};if(a){var r=b(a);t.target||"variables"===r||(i.target=c("Mapping must have a target")),t.target&&_.test(t.target)&&"variables"!==r&&(i.target=c("Target must not contain whitespace"))}return i},hidden:function(e,t){var n=g(e,t);return!n||n&&n.variables}})),e.entries.push(p.checkbox({id:"variableMapping-local",label:c("Local"),modelProperty:"local",get:function(e,t){return{local:(g(e,t)||{}).local}},set:function(e,t,n){t.local=t.local||!1;var a=g(e,n);return s.updateBusinessObject(e,a,t)},hidden:function(e,t){return!x(e,t)}}))}}},pDOZ:function(e,t,n){"use strict";var a=n("emvA").is,i=n("emvA").getBusinessObject,r=n("hCsx");e.exports=function(e,t,n,c){var o=i(t);(a(t,"activiti:Process")||a(t,"bpmn:Participant")&&o.get("processRef"))&&(e.entries=e.entries.concat(r(t,n,{getBusinessObject:function(e){var t=i(e);return a(t,"bpmn:Participant")?t.get("processRef"):t}},c)))}},qPJW:function(e,t,n){"use strict";n("g9YV");var a=n("wCAj"),i=(n("R9oj"),n("ECub")),r=n("jrin"),c=n("oBTY"),o=n("k1fw"),s=(n("IzEo"),n("bx4M")),l=(n("DYRE"),n("zeV3")),d=(n("5NDa"),n("5rEg")),u=n("tJVT"),p=(n("5Dmo"),n("3S7+")),f=n("q1tI"),m=n.n(f),b=n("rLCj"),j=n("vuKU"),h=n("rNa/"),_=n("79+z"),O=n("ma4E"),x=n("WTWM"),g=(n("qVdP"),n("jsC+")),v=(n("+L6B"),n("2/Rp")),y=(n("lUTK"),n("BvKs")),E=n("bRQS"),S=n("7vBe"),C=n("Nnhj"),I=n("8Skl"),D=n("nKUr"),k=Object(D["jsx"])(E["a"],{style:{visibility:"hidden"}}),w=function(e){var t=e.moduleState,n=e.dispatch,a=t.moduleName,i=Object(x["x"])(a),r=Object(x["z"])(i),c=t.sorts,o=c.length>0||!!t.sortschemeid,s=t.sortMultiple.multiple,l=Object(D["jsxs"])(y["a"],{children:[Object(D["jsx"])(y["a"].Item,{disabled:!o,onClick:function(){n({type:"modules/resetSorts",payload:{moduleName:a}})},children:"\u6062\u590d\u9ed8\u8ba4\u6392\u5e8f"},"reset"),Object(D["jsx"])(y["a"].Divider,{}),r.length>0?Object(D["jsx"])(y["a"].ItemGroup,{title:"\u6392\u5e8f\u65b9\u6848",children:r.map((function(e){var i=e.sortschemeid;return Object(D["jsx"])(y["a"].Item,{icon:i===t.sortschemeid?Object(D["jsx"])(E["a"],{}):k,onClick:function(){n({type:"modules/sortSchemeChanged",payload:{moduleName:a,sortschemeid:i}})},children:e.schemename},i)}))}):null,r.length>0?Object(D["jsx"])(y["a"].Divider,{}):null,Object(D["jsx"])(y["a"].Item,{icon:s?k:Object(D["jsx"])(E["a"],{}),onClick:function(){n({type:"modules/sortMultipleChanged",payload:{moduleName:a,sortMultiple:{}}})},children:"\u5355\u5b57\u6bb5\u6392\u6bb5"},"single"),Object(D["jsx"])(y["a"].Item,{icon:s?Object(D["jsx"])(E["a"],{}):k,onClick:function(){n({type:"modules/sortMultipleChanged",payload:{moduleName:a,sortMultiple:{multiple:1}}})},children:"\u591a\u5b57\u6bb5\u6392\u5e8f"},"mult"),c.length>0?Object(D["jsx"])(y["a"].Divider,{}):null,c.length>0?Object(D["jsx"])(y["a"].ItemGroup,{title:"\u5f53\u524d\u6392\u5e8f",children:c.map((function(e){return Object(D["jsx"])(y["a"].Item,{icon:"ASC"===e.direction?Object(D["jsx"])(S["a"],{}):Object(D["jsx"])(C["a"],{}),children:e.title},e.property)}))}):null]});return Object(D["jsx"])(g["a"],{overlay:l,trigger:["click"],children:Object(D["jsxs"])(v["a"],{size:"small",type:o?"link":"text",style:{padding:"0px"},children:[Object(D["jsx"])(S["a"],{}),Object(D["jsx"])(I["a"],{})]})})},P=w,T=n("jE+T"),M=n("YW4E"),A=(n("Znn+"),n("ZTPi")),R=n("ZM8D"),N=n("aYag"),L=function(e){var t=e.moduleInfo,n=e.item,a=e.record,i=e.parentOperateType,r=e.displayTitle,c={moduleName:n.subobjectname,parentOperateType:i,parentFilter:{moduleName:t.objectname,fieldahead:n.fieldahead.split(".with.")[1],fieldName:t.primarykey,fieldtitle:t.title,operator:"=",text:a[t.namefield],fieldvalue:a[t.primarykey]},displayTitle:r};return Object(D["jsx"])(R["a"],Object(o["a"])({},c))},B=function(e){var t=e.record,n=e.moduleInfo,a=e.dispatch,i="display",r=Object(x["l"])(n),c=function(e){return e.subobjectname?L({moduleInfo:n,item:e,record:t,parentOperateType:i,displayTitle:!0}):Object(D["jsx"])("div",{style:{borderCollapse:"collapse"},children:Object(D["jsx"])(N["c"],{record:t,disableTitle:!0,moduleInfo:n,dispatch:a,isRecordExpand:!0})})};return 1===r.length?Object(D["jsx"])(s["a"],{children:c(r[0])}):Object(D["jsx"])(s["a"],{children:Object(D["jsx"])(A["a"],{children:r.map((function(e){if(e.subobjectname){var t=Object(x["x"])(e.subobjectname);return Object(D["jsx"])(A["a"].TabPane,{tab:e.title||t.title,children:c(e)},e.associatedetailid)}return Object(D["jsx"])(A["a"].TabPane,{tab:e.title||n.title,children:c(e)},e.associatedetailid)}))})})},K=(n("tU7J"),n("wFql")),F=n("5Zmo"),U=n("3Mvv"),W=n.n(U),V=K["a"].Text,q=function(e,t,n){var i=function(t){var n=0;return e.forEach((function(e){n+=e[t]||0})),n},r=function(e){if(e.dataIndex.startsWith("wavg"))return null;var n=e.fieldDefine,a=i(e.dataIndex);if(n.ismonetary)return Object(F["k"])(a,{},0,t,n.digitslen);if(n.divisor&&n.denominator){var r=i(n.divisor),c=i(n.denominator);return Object(F["o"])(0!==c?r/c:0,r,c)}return e.isOneToMany?e.dataIndex.startsWith("count")?Object(D["jsxs"])("span",{style:{marginRight:"17px"},children:[Object(F["h"])(a),Object(D["jsx"])("span",{className:W.a.onetomanyfield,children:" \u6761"})]}):Object(F["e"])(a,2):e.render(a)},c=function(e){if(e.dataIndex.startsWith("wavg"))return null;var n=e.fieldDefine,a=t.remoteRoot,i=a[e.dataIndex];if(n.ismonetary)return Object(F["k"])(i,{},0,t,n.digitslen);if(n.divisor&&n.denominator){var r=a[n.divisor],c=a[n.denominator];return Object(F["o"])(0!==c?r/c:0,r,c)}return e.isOneToMany?e.dataIndex.startsWith("count")?Object(D["jsxs"])("span",{style:{marginRight:"17px"},children:[Object(F["h"])(i),Object(D["jsx"])("span",{className:W.a.onetomanyfield,children:" \u6761"})]}):Object(F["e"])(i,2):e.render(i)};return 0===e.length?null:Object(D["jsxs"])(D["Fragment"],{children:[Object(D["jsx"])(a["a"].Summary.Row,{children:n.map((function(n,i){var c=null,o=1;return n&&(n.namefield?(o=n.colSpan||1,c=Object(D["jsxs"])("span",{className:W.a.totalfield,children:[Object(D["jsx"])(V,{strong:!0,children:t.gridParams.total>e.length?"\u672c\u9875\u5c0f\u8ba1":"\u5c0f\u8ba1"}),Object(D["jsx"])(V,{type:"secondary",children:" (".concat(e.length,"\u6761)")})]})):c=Object(D["jsx"])(V,{strong:!0,style:{float:n.fieldDefine.divisor?"left":"right"},children:r(n)})),Object(D["jsx"])(a["a"].Summary.Cell,{className:W.a.summarycell,index:i,colSpan:o,children:c},"".concat(t.moduleName,"_summary").concat(i.toString()))}))},"".concat(t.moduleName,"_summary")),t.remoteRoot&&Object.getOwnPropertyNames(t.remoteRoot).length&&t.gridParams.total>e.length?Object(D["jsx"])(a["a"].Summary.Row,{children:n.map((function(e,n){var i=null,r=1;return e&&(e.namefield?(r=e.colSpan||1,i=Object(D["jsxs"])("span",{className:W.a.totalfield,children:[Object(D["jsx"])(V,{strong:!0,children:"\u603b\xa0\xa0\xa0\xa0\u8ba1"}),Object(D["jsx"])(V,{type:"secondary",children:" (".concat(t.gridParams.total,"\u6761)")})]})):i=Object(D["jsx"])(V,{strong:!0,style:{float:e.fieldDefine.divisor?"left":"right"},children:c(e)})),Object(D["jsx"])(a["a"].Summary.Cell,{className:W.a.totalcell,index:n,colSpan:r,children:i},"".concat(t.moduleName,"_total").concat(n.toString()))}))},"".concat(t.moduleName,"_total")):null]})},z=n("9hi+"),G=Object(D["jsx"])(E["a"],{style:{visibility:"hidden"}}),J=function(e){var t=e.moduleState,n=e.dispatch,a=t.moduleName,i=t.currSetting.gridSize,r=function(e,t){return Object(D["jsx"])(y["a"].Item,{children:Object(D["jsxs"])("span",{style:{paddingRight:"48px"},children:[i===e?Object(D["jsx"])(E["a"],{}):G," ".concat(t)]})},e)},c=Object(D["jsx"])(y["a"],{onClick:function(e){var t=e.key;n({type:"modules/gridSizeChanged",payload:{moduleName:a,size:t}})},children:Object(D["jsxs"])(y["a"].ItemGroup,{title:"\u8868\u683c\u5bc6\u5ea6",children:[r("default","\u5bbd\u677e"),r("middle","\u4e2d\u7b49"),r("small","\u7d27\u51d1")]})});return Object(D["jsx"])(g["a"],{overlay:c,trigger:["click"],children:Object(D["jsx"])(z["a"],{style:{cursor:"pointer"}})})},H=J,Y=(n("BoS7"),n("Sdc0")),Z=(n("7Kak"),n("9yH6")),Q=n("eFNv"),$=n("c6dC"),X=function(){return Object(D["jsx"])(E["a"],{style:{visibility:"hidden"}})},ee=function(){return Object(D["jsx"])(E["a"],{})},te=function(e){var t=e.moduleState,n=e.dispatch,a=e.gridType,i=t.moduleName,r=Object(x["x"])(i),c=Object(x["E"])(r)&&r.navigateSchemes.length&&"normal"===a,o=Object(x["k"])(r.gridschemes),s=Object(f["useState"])(!1),l=Object(u["a"])(s,2),d=l[0],p=l[1],m=Object(D["jsx"])(y["a"],{children:[o.length>1?Object(D["jsx"])(y["a"].ItemGroup,{title:"\u8868\u683c\u65b9\u6848",children:o.map((function(e){return Object(D["jsx"])(y["a"].Item,{icon:t.currentGridschemeid===e.gridschemeid?ee():X(),onClick:function(e){var t=e.key;n({type:"modules/gridSchemeChanged",payload:{moduleName:i,gridschemeid:t}}),p(!1)},children:e.schemename},e.gridschemeid)}))}):null,Object(x["I"])(r)?Object(D["jsxs"])(y["a"].ItemGroup,{title:"\u91d1\u989d\u5355\u4f4d\u8bbe\u7f6e",children:[Object(D["jsxs"])(y["a"].Item,{children:[X(),"\u6570\u503c\u5355\u4f4d\uff1a",Object(D["jsx"])(Z["a"].Group,{value:t.monetary.type,onChange:function(e){n({type:"modules/monetaryChanged",payload:{moduleName:i,monetaryType:e.target.value}}),e.preventDefault()},children:Object($["c"])().map((function(e){return Object(D["jsx"])(Z["a"].Button,{value:e.value,children:e.text},e.value)}))})]},"monerarytype"),Object(D["jsx"])(y["a"].Item,{children:Object(D["jsxs"])("span",{children:[X(),"\u663e\u793a\u4f4d\u7f6e\uff1a",Object(D["jsxs"])(Z["a"].Group,{value:t.monetaryPosition,onChange:function(e){n({type:"modules/monetaryChanged",payload:{moduleName:i,position:e.target.value}})},children:[Object(D["jsx"])(Z["a"].Button,{value:"behindnumber",children:"\u663e\u793a\u5728\u6570\u503c\u540e"}),Object(D["jsx"])(Z["a"].Button,{value:"columntitle",children:"\u663e\u793a\u5728\u5217\u5934\u4e0a"})]})]})},"moneraryposition")]}):null,Object(x["E"])(r)&&(c||r.orderfield||r.istreemodel&&r.parentkey)?Object(D["jsxs"])(y["a"].ItemGroup,{title:"\u8bb0\u5f55\u62d6\u52a8\u8bbe\u7f6e",children:[c?Object(D["jsxs"])(y["a"].Item,{children:[Object(D["jsx"])("span",{style:{marginRight:"24px"},children:"\u53ef\u62d6\u52a8\u81f3\u5bfc\u822a\u4fee\u6539\u5b57\u6bb5\u503c"}),Object(D["jsx"])(Y["a"],{checked:t.currSetting.canDragToNavigate,onChange:function(){n({type:"modules/toggleCanDragToNavigate",payload:{moduleName:i}})},style:{float:"right"}})]},"dragtonavigate"):null,r.orderfield||r.istreemodel&&r.parentkey?Object(D["jsxs"])(y["a"].Item,{children:[Object(D["jsx"])("span",{style:{marginRight:"24px"},children:"\u53ef\u62d6\u52a8\u8bb0\u5f55\u6539\u53d8\u987a\u5e8f"}),Object(D["jsx"])(Y["a"],{checked:t.currSetting.canDragChangeRecno,onChange:function(){n({type:"modules/toggleCanDragChangeRecno",payload:{moduleName:i}})},style:{float:"right"}})]},"dragtochangerecno"):null,r.istreemodel&&r.parentkey?Object(D["jsxs"])(y["a"].Item,{children:[Object(D["jsx"])("span",{style:{marginRight:"24px"},children:"\u5c06\u8981\u62d6\u52a8\u81f3\u53f6\u8282\u70b9\u4e0b"}),Object(D["jsx"])(Y["a"],{checked:t.currSetting.canDragToLeafNode,onChange:function(){n({type:"modules/toggleCanDragToLeafNode",payload:{moduleName:i}})},style:{float:"right"}})]},"dragtochangerecno"):null]}):null].filter((function(e){return e}))});return m.props.children.length?Object(D["jsx"])(g["a"],{overlay:m,trigger:["click"],visible:d,onVisibleChange:function(e){return p(e)},children:Object(D["jsx"])(Q["a"],{style:{cursor:"pointer"}})}):null},ne=te,ae=n("MrJO"),ie=n("YLpF"),re=(n("miYZ"),n("tsqr")),ce=n("PpiC"),oe=n("aMZS"),se=n("CLjb"),le=n("RJb5"),de=n("1M5+"),ue=n("NB5u"),pe=n("1qKY"),fe="ModuleDragableBodyRow",me=function(e){var t,n=e.index,a=e.record,i=e.moduleState,r=e.moveRow,c=e.moveToNewParent,s=e.className,l=e.style,d=Object(ce["a"])(e,["index","record","moduleState","moveRow","moveToNewParent","className","style"]),p=Object(f["useContext"])(pe["a"]),b=Object(f["useContext"])(de["ModuleContext"]);t=p&&p.moduleState?p.moduleState:b.state;var j=t.currSetting.canDragChangeRecno?fe+t.moduleName:"".concat(fe+t.moduleName,"toNavigate"),h=m.a.useRef(),_=Object(x["x"])(t.moduleName),O=_.istreemodel,g=Object(oe["a"])({accept:j,canDrop:function(e,t){var n=t.getItem()||{},i=n.record;return i&&a},collect:function(e){var t=e.getItem()||{},i=t.index,r=t.record;if(!O)return i===n?{}:{isMoveOver:e.isOver(),canMoveDrop:r&&a,dropClassName:i<n?" drop-over-downward":" drop-over-upward"};if(a&&r){if(a[ue["f"]]===r[ue["f"]])return i===n?{}:{isMoveOver:e.isOver(),canMoveDrop:r&&a,dropClassName:i<n?" drop-over-downward":" drop-over-upward"};var c=!1,o=a;while(o){if(o[ue["f"]]===r){c=!0;break}o=o[ue["f"]]}return c?{}:{isMoveOver:e.isOver(),canMoveDrop:r&&a,dropClassName:" drop-over-downward"}}return{}},drop:function(e){var o,s,l=e.record;if(O){var d=((null===(o=l[ue["f"]])||void 0===o?void 0:o.children)||i.dataSource).indexOf(l),u=((null===(s=a[ue["f"]])||void 0===s?void 0:s.children)||i.dataSource).indexOf(a);if(a[ue["f"]]===l[ue["f"]])d!==u&&(t.currSetting.canDragToLeafNode?c(d,u,l,a):r(d,u,l));else{var p=!1,f=a;while(f){if(f[ue["f"]]===l){p=!0;break}f=f[ue["f"]]}p||c(d,u,l,a)}}else{var m=e.index;m!==n&&(Object(x["g"])(t)?r(m,n,l):re["default"].warn("\u5fc5\u987b\u5148\u5728\u5bfc\u822a\u4e2d\u9009\u62e9\u987a\u5e8f\u5b57\u6bb5\u7684\u9650\u5b9a\u5b57\u6bb5\u503c\u3002"))}}}),v=Object(u["a"])(g,2),y=v[0],E=y.isMoveOver,S=y.canMoveDrop,C=y.dropClassName,I=v[1],k=Object(se["a"])({item:{type:j,index:n,record:a},collect:function(e){return{isDragging:e.isDragging()}}}),w=Object(u["a"])(k,3),P=w[1],T=w[2];return t.currSetting.canDragChangeRecno?I(P(h)):P(h),Object(D["jsxs"])(D["Fragment"],{children:[t.currSetting.canDragChangeRecno?null:Object(D["jsx"])(le["a"],{connect:T,src:"/images/dragrecords.png"}),Object(D["jsx"])("tr",Object(o["a"])({ref:h,style:Object(o["a"])({},l),className:"".concat(s).concat(E&&S?C:"")},d))]})},be=(n("2qtc"),n("kLXV")),je=(n("giR+"),n("fyUT")),he=(n("y8nQ"),n("Vl3Y")),_e=n("VX7R"),Oe=n("Lyp1"),xe=n("sy1d"),ge=n("eVqf"),ve=function(e){var t=e.moduleState,n=e.dispatch,a=t.moduleName,i=t.dataSource,o=Object(x["x"])(a),l=Object(f["useState"])(!1),d=Object(u["a"])(l,2),b=d[0],j=d[1],h=Object(f["useState"])("reset"),O=Object(u["a"])(h,2),g=O[0],y=O[1],E=he["a"].useForm(),S=Object(u["a"])(E,1),C=S[0],I=function(){var e=[];i.forEach((function(t){return e.push(t[o.primarykey])})),Object(xe["default"])("".concat(xe["API_HEAD"],"/platform/dataobject/updateorderno.do"),{params:{objectid:a,ids:e.join(","),addparent:C.getFieldValue("addparent"),startnumber:C.getFieldValue("startnumber"),stepnumber:C.getFieldValue("stepnumber")}}).then((function(e){if(e.success){var t=0;i.forEach((function(n){Object(_["d"])(n,Object(r["a"])({},e.tag,e.msg[t].text)),t+=1})),n({type:"modules/updateDataSource",payload:{moduleName:a,dataSource:Object(c["a"])(i),recordOrderChanged:!1}}),re["default"].info("\u91cd\u65b0\u751f\u6210\u5f53\u524d\u9875\u8bb0\u5f55\u7684\u987a\u5e8f\u53f7\u5df2\u5b8c\u6210\uff01")}else re["default"].error(e.msg)}))},k=function(){var e=[];i.forEach((function(t){return e.push(t[o.primarykey])})),Object(xe["default"])("".concat(xe["API_HEAD"],"/platform/dataobject/updatepageorderno.do"),{params:{objectid:a,ids:e.join(",")}}).then((function(e){if(e.success){var t=0;i.forEach((function(n){Object(_["d"])(n,Object(r["a"])({},e.tag,e.msg[t])),t+=1})),n({type:"modules/updateDataSource",payload:{moduleName:a,dataSource:Object(c["a"])(i),recordOrderChanged:!1}}),re["default"].info("\u5f53\u524d\u9875\u8bb0\u5f55\u7684\u987a\u5e8f\u53f7\u6309\u7167\u5f53\u524d\u9875\u4e2d\u8bb0\u5f55\u7684\u987a\u5e8f\u53f7\u91cd\u65b0\u6392\u5e8f\u5df2\u5b8c\u6210\uff01")}else re["default"].error(e.msg)}))},w=function(){var e=[];if(1===t.selectedRowKeys.length){var r=Object(ge["m"])(i,t.selectedRowKeys[0],o.primarykey),c=r[ue["f"]]?r[ue["f"]].children:i;c.forEach((function(t){return e.push(t[o.primarykey])})),Object(xe["default"])("".concat(xe["API_HEAD"],"/platform/dataobject/updateorderno.do"),{params:{objectid:a,ids:e.join(","),addparent:C.getFieldValue("addparent"),startnumber:C.getFieldValue("startnumber"),stepnumber:C.getFieldValue("stepnumber"),parentnumber:r[ue["f"]]?r[ue["f"]][o.orderfield]:0}}).then((function(e){e.success?(n({type:"modules/fetchData",payload:{moduleName:a,forceUpdate:!0}}),re["default"].info("\u9009\u4e2d\u8bb0\u5f55\u7684\u6240\u6709\u540c\u7ea7\u8bb0\u5f55\u5df2\u6309\u5f53\u524d\u987a\u5e8f\u91cd\u65b0\u6392\u5217\uff01")):re["default"].error(e.msg)}))}else re["default"].warn("\u8bf7\u9009\u62e9\u4e00\u4e2a\u9700\u8981\u66f4\u65b0\u7684\u7ea7\u522b\u8bb0\u5f55\u4e2d\u7684\u4efb\u610f\u4e00\u6761\u8bb0\u5f55\uff01")};return Object(D["jsxs"])(m.a.Fragment,{children:[Object(D["jsx"])(p["a"],{title:"\u66f4\u65b0\u987a\u5e8f\u53f7",children:Object(D["jsx"])(v["a"],{type:"link",style:{padding:0,margin:0},onClick:function(){return j(!0)},children:Object(D["jsx"])(_e["a"],{})})}),Object(D["jsx"])(be["a"],{visible:b,title:Object(D["jsxs"])(D["Fragment"],{children:[Object(D["jsx"])(Oe["a"],{})," \u786e\u8ba4\u66f4\u65b0\u987a\u5e8f\u53f7"]}),onCancel:function(){return j(!1)},destroyOnClose:!0,bodyStyle:{paddingTop:"4px"},onOk:function(){"reset"===g?o.istreemodel?w():I():k()},children:Object(D["jsxs"])(A["a"],{activeKey:g,onTabClick:function(e){return y(e)},children:[Object(D["jsxs"])(A["a"].TabPane,{tab:"\u91cd\u65b0\u751f\u6210\u987a\u5e8f\u53f7",children:[o.istreemodel?Object(D["jsx"])(K["a"],{children:Object(D["jsx"])(K["a"].Paragraph,{style:{textAlign:"center"},children:Object(D["jsx"])(K["a"].Text,{strong:!0,children:"\u5c06\u9009\u4e2d\u8bb0\u5f55\u7684\u6240\u6709\u540c\u7ea7\u8bb0\u5f55\u6309\u5f53\u524d\u987a\u5e8f\u91cd\u65b0\u6392\u5217"})})}):Object(D["jsxs"])(K["a"],{children:[Object(D["jsx"])(K["a"].Paragraph,{style:{textAlign:"center"},children:Object(D["jsx"])(K["a"].Text,{strong:!0,children:"\u5bf9\u5f53\u524d\u9875\u7684\u8bb0\u5f55\uff0c\u6309\u7167\u4e0b\u9762\u7684\u8bbe\u7f6e\u91cd\u65b0\u751f\u6210\u987a\u5e8f\u53f7\u3002"})}),Object(D["jsxs"])(K["a"].Paragraph,{children:["\u6ce8\u610f\uff1a\u53ea\u4f1a\u5bf9\u5f53\u524d\u9875\u7684\u8bb0\u5f55\u8fdb\u884c\u64cd\u4f5c\u66f4\u65b0\uff0c\u5176\u4ed6\u9875\u7684\u8bb0\u5f55\u5c06\u4e0d\u4f1a\u8fdb\u884c\u66f4\u65b0\uff1b",Object(D["jsx"])("br",{}),"\u5982\u679c\u6ca1\u80fd\u663e\u793a\u6240\u6709\u8981\u66f4\u65b0\u987a\u5e8f\u53f7\u7684\u8bb0\u5f55\uff0c\u8bf7\u6539\u53d8\u9875\u5927\u5c0f\uff1b"]})]}),Object(D["jsx"])(K["a"].Paragraph,{style:{textAlign:"center"},children:Object(D["jsx"])(K["a"].Text,{type:"danger",children:"(\u5982\u679c\u4f60\u4e0d\u786e\u5b9a\u6267\u884c\u7684\u7ed3\u679c\uff0c\u90a3\u4e48\u8bf7\u4e0d\u8981\u6267\u884c\u6b64\u64cd\u4f5c!!!)"})}),Object(D["jsx"])(s["a"],{bodyStyle:{padding:"12px"},children:Object(D["jsxs"])(he["a"],{form:C,className:"moduleform",labelCol:{span:8},wrapperCol:{span:16},children:[Object(D["jsx"])(he["a"].Item,{label:"\u52a0\u5165\u7236\u8bb0\u5f55\u987a\u5e8f\u503c",name:"addparent",style:{marginBottom:"8px"},children:Object(D["jsx"])(Y["a"],{})}),Object(D["jsx"])(he["a"].Item,{label:"\u8d77\u59cb\u987a\u5e8f\u53f7",name:"startnumber",initialValue:10,style:{marginBottom:"8px"},children:Object(D["jsx"])(je["a"],{})}),Object(D["jsx"])(he["a"].Item,{label:"\u9012\u8fdb\u503c",name:"stepnumber",initialValue:10,style:{marginBottom:"8px"},children:Object(D["jsx"])(je["a"],{min:1,step:10})})]})})]},"reset"),Object(D["jsxs"])(A["a"].TabPane,{tab:"\u6309\u539f\u987a\u5e8f\u53f7\u66f4\u65b0",disabled:o.istreemodel,children:[Object(D["jsxs"])(K["a"],{children:[Object(D["jsx"])(K["a"].Paragraph,{style:{textAlign:"center"},children:Object(D["jsx"])(K["a"].Text,{strong:!0,children:"\u5bf9\u5f53\u524d\u9875\u7684\u8bb0\u5f55\u6309\u7167\u8bb0\u5f55\u7684\u987a\u5e8f\u53f7\u91cd\u65b0\u6392\u5e8f\u3002(\u4e0d\u4f1a\u4ea7\u751f\u65b0\u7684\u5e8f\u53f7)"})}),Object(D["jsxs"])(K["a"].Paragraph,{children:["\u6ce8\u610f\uff1a\u53ea\u4f1a\u5bf9\u5f53\u524d\u9875\u7684\u8bb0\u5f55\u8fdb\u884c\u64cd\u4f5c\u66f4\u65b0\uff0c\u5176\u4ed6\u9875\u7684\u8bb0\u5f55\u5c06\u4e0d\u4f1a\u8fdb\u884c\u66f4\u65b0\uff1b",Object(D["jsx"])("br",{}),"\u5982\u679c\u6ca1\u80fd\u663e\u793a\u6240\u6709\u8981\u66f4\u65b0\u987a\u5e8f\u53f7\u7684\u8bb0\u5f55\uff0c\u8bf7\u6539\u53d8\u9875\u5927\u5c0f\uff1b"]})]}),Object(D["jsx"])(K["a"].Paragraph,{style:{textAlign:"center"},children:Object(D["jsx"])(K["a"].Text,{type:"danger",children:"(\u5982\u679c\u4f60\u4e0d\u786e\u5b9a\u6267\u884c\u7684\u7ed3\u679c\uff0c\u90a3\u4e48\u8bf7\u4e0d\u8981\u6267\u884c\u6b64\u64cd\u4f5c!!!)"})})]},"updage")]})})]})},ye=n("Ibjt"),Ee=n.n(ye),Se=n("fFwQ"),Ce=function(e){var t=e.moduleInfo,n=e.record,a=t.modulename,i=t.primarykey,r=Object(f["useState"])("loading"),c=Object(u["a"])(r,2),o=c[0],l=c[1];return Object(f["useEffect"])((function(){Object(xe["default"])("".concat(xe["API_HEAD"],"/platform/dataobject/getexpandbody.do"),{params:{moduleName:a,recordId:n[i]}}).then((function(e){l(e.msg||"\u6682\u65e0\u5185\u5bb9")}))}),[]),Object(D["jsx"])(s["a"],{className:"markdowncard",children:Object(D["jsx"])("span",{className:"markdown ".concat(Ee.a._),dangerouslySetInnerHTML:{__html:Se.parse(o)}})})},Ie=n("RfA7"),De=(n("Mwp2"),n("VXEj")),ke=(n("XCrF"),n("1GRj")),we=n("dF/Y"),Pe=n("FKDb"),Te=n("RVw9"),Me=n("mhS7"),Ae=n.n(Me),Re=n("TSYQ"),Ne=n.n(Re),Le=n("r5oo"),Be=n("h7P/"),Ke=n("93hP"),Fe=n("MR8f"),Ue=n("TtZX"),We=n("we3Y"),Ve=n("l5kO"),qe=n("OH75"),ze=n.n(qe),Ge=(n("+BJd"),n("mr32")),Je=(n("14J3"),n("BMrR")),He=(n("jCWc"),n("kPKH")),Ye=n("wd/R"),Ze=n.n(Ye),Qe=function(e){return Object(D["jsx"])("span",{style:{fontWeight:500},children:e})},$e=function(e){var t=e.record,n=e.moduleInfo,a=e.dispatch,i=e.moduleState,r={dataIndex:"FUsers",fieldDefine:Object(x["n"])("FUsers",n)};return Object(D["jsxs"])(Je["a"],{children:[Object(D["jsxs"])(He["a"],{span:24,children:["\u6240\u5c5e\u90e8\u95e8\uff1a",Qe(t["FOrganization.orgname"])]}),Object(D["jsxs"])(He["a"],{span:24,children:["\u4eba\u5458\u7f16\u7801\uff1a",Qe(t.personnelcode)]}),Object(D["jsxs"])(He["a"],{span:16,children:["\u7cfb\u7edf\u7528\u6237\uff1a",Object(F["m"])(t.FUsers,t,0,{fieldtitle:"\u7cfb\u7edf\u7528\u6237",childModuleName:"FUser",fieldahead:r.fieldDefine.fieldahead,moduleInfo:n,dispatch:a,field:r,moduleState:i})]}),Object(D["jsxs"])(He["a"],{span:8,children:["\u6709\u6548\uff1a",Object(F["a"])(t.isvalid)]})]})},Xe=function(e){var t=e.record,n=Ze()().diff(Ze()(t.actTaskCreateTime,T["b"]),"days");return Object(D["jsxs"])(Je["a"],{children:[Object(D["jsxs"])(He["a"],{span:24,children:["\u6a21\u5757\u540d\u79f0\uff1a",Qe(t.objecttitle)]}),Object(D["jsxs"])(He["a"],{span:24,children:["\u4efb\u52a1\u540d\u79f0\uff1a",Qe(t.actExecuteTaskName)]}),Object(D["jsxs"])(He["a"],{span:16,children:["\u4efb\u52a1\u63a5\u53d7\u65f6\u95f4\uff1a",Qe(t.actTaskCreateTime.substring(0,16))]}),Object(D["jsx"])(He["a"],{span:8,children:Object(D["jsx"])(Ge["a"],{style:{float:"right"},color:n>=2?"warning":"processing",children:Ze()(t.actTaskCreateTime,T["b"]).fromNow()})}),Object(D["jsxs"])(He["a"],{span:24,children:["\u6d41\u7a0b\u542f\u52a8\u65f6\u95f4\uff1a",Qe(t.actStartTime.substring(0,16))]})]})},et={FPersonnel:$e,VActRuTask:Xe},tt=n("fFwQ"),nt=function(e){var t=e.moduleState,n=e.moduleInfo,a=e.dispatch,i=e.paginationProps,r=e.selectRow,l=e.size,d={gutter:16,xs:1,sm:2,md:2,lg:3,xl:3,xxl:3},u="listgridkey".concat(!!t.currSetting.navigate.visible),f=function(e,i){var l,d=[],u={dispatch:a,moduleInfo:n,moduleState:t,record:e},f=function(){var t=n.excelSchemes,a=[];if(t&&t.length>0){var i=t[0],r=function(t){Object(Ie["e"])({recordids:e[n.primarykey],moduleName:n.modulename,schemeid:i.schemeid,filetype:t})};return i.onlypdf||a.push(Object(D["jsx"])(p["a"],{title:"\u5bfc\u51fa".concat(i.title),children:Object(D["jsx"])(we["a"],{onClick:function(){r(null)}})},"_download_")),a.push(Object(D["jsx"])(Fe["a"],{moduleInfo:n,record:e,scheme:i},"_recordpdf_")),a}return[]},m=function(){var a=n.recordPrintSchemes;return a&&a.length>0?a.map((function(n){return Object(D["jsx"])(p["a"],{title:"\u6253\u5370".concat(n.title),children:Object(D["jsx"])(Pe["a"],{onClick:function(){Object(Ue["b"])({moduleName:t.moduleName,scheme:n,record:e})}})},"_printrecord_")})):[]};n.moduleLimit.hasapprove&&d.push(Object(D["jsx"])("span",{children:"VActRuTask"===t.moduleName?Object(Le["b"])({value:void 0,record:e,_recno:i,moduleState:t,dispatch:a}):Object(Le["a"])({value:void 0,record:e,_recno:i,moduleState:t,dispatch:a})})),n.moduleLimit.hasaudit&&d.push(Object(Ke["b"])({value:void 0,record:e,_recno:i,moduleState:t,dispatch:a})),d.push.apply(d,Object(c["a"])(f())),d.push.apply(d,Object(c["a"])(m())),d.push.apply(d,Object(c["a"])(Object(We["e"])({moduleInfo:n,moduleState:t,dispatch:a,record:e}))),d.push(Object(D["jsx"])(We["b"],Object(o["a"])({},u))),Object(x["E"])(n)&&d.push(Object(D["jsx"])(We["c"],Object(o["a"])({},u))),Object(x["D"])(n)&&d.push(Object(D["jsx"])(We["a"],Object(o["a"])({},u)));for(var b=d.length;b<6;b+=1)d.splice(0,0,null);var j=Object(Ve["b"])(t.moduleName,n.namefield),h=t.selectedRowKeys.includes(e[n.primarykey]);return Object(D["jsx"])(De["b"].Item,{className:Ne()({selected:h,notselected:!h}),children:Object(D["jsx"])(s["a"].Grid,{children:Object(D["jsx"])(s["a"],{size:"small"===t.currSetting.gridSize?"small":"default",onClick:function(){r(e)},bordered:!1,actions:d,children:Object(D["jsx"])(s["a"].Meta,{avatar:e.favicon||e.iconfile?Object(D["jsx"])(Ae.a,{className:"hiddedeyes",src:Object(D["jsx"])(ke["a"],{src:"data:image/jpeg;base64,".concat(e.favicon||e.iconfile)})}):Object(D["jsx"])(Ae.a,{icon:n.iconcls?Object(_["n"])(n.iconcls):Object(D["jsx"])(Te["a"],{})}),title:[n.moduleLimit.hasattachment&&(null===(l=n.userLimit.attachment)||void 0===l?void 0:l.query)&&Object(D["jsx"])("span",{style:{fontSize:"14px",fontWeight:300,marginLeft:"12px",float:"right"},children:Object(Be["b"])({record:e,_recno:i,moduleInfo:n,dispatch:a})}),j?j({value:e[n.namefield],record:e,recno:i,dataIndex:n.namefield,fieldDefine:Object(x["n"])(n.namefield,n),dispatch:a,moduleState:t}):Object(D["jsx"])(N["a"],{moduleInfo:n,dispatch:a,record:e,children:Object(D["jsx"])("a",{className:"title",children:e[n.namefield]})},"pd--".concat(t.moduleName,"--").concat(e[n.primarykey]))],description:et[t.moduleName]?et[t.moduleName]({moduleInfo:n,moduleState:t,dispatch:a,record:e,recno:i}):Object(D["jsx"])("span",{className:"markdowncard",children:Object(D["jsx"])("span",{className:"markdown",dangerouslySetInnerHTML:{__html:tt.parse(Object(_["G"])(n.tooltiptpl||"",e))}})})})},"".concat(t.moduleName,"--").concat(e[n.primarykey]))})})};return Object(D["jsx"])(De["b"],{style:{marginBottom:"16px"},className:ze.a.listcard,grid:d,dataSource:t.dataSource,pagination:Object(o["a"])(Object(o["a"])({},i),{},{position:void 0,size:l}),renderItem:f},u)},at=n("+GxG"),it=function(e){var t=e.moduleState,n=e.dispatch,a=t.moduleName,i=t.currSetting.isShowListCard,r=function(){return n({type:"modules/toggleIsShowListCard",payload:{moduleName:a}})};return Object(D["jsx"])("span",{style:{cursor:"pointer"},children:i?Object(D["jsx"])(p["a"],{title:"\u663e\u793a\u6807\u51c6\u5217\u8868",children:Object(D["jsx"])(Te["a"],{onClick:r})}):Object(D["jsx"])(p["a"],{title:"\u663e\u793a\u5361\u7247\u5217\u8868",children:Object(D["jsx"])(at["a"],{onClick:r})})})},rt=n("fFwQ"),ct=function(e){var t=e.moduleState,n=e.moduleInfo,m=e.dispatch,g=e.fetchLoading,v=e.gridType,y=e.readOnly,E=e.manyToOneInfo,S=t.moduleName;Object(f["useEffect"])((function(){m({type:"modules/fetchData",payload:{moduleName:S}})}),[t.dataSourceLoadCount]);var C=function(e){e!==t.gridParams.curpage&&m({type:"modules/pageChanged",payload:{moduleName:S,page:e}})},I=function(e,t){m({type:"modules/pageSizeChanged",payload:{moduleName:S,limit:t}})},k=function(e,t,n,a){var i=a.action;if("filter"===i)m({type:"modules/filterChanged",payload:{type:"columnFilterChange",moduleName:S,columnfilter:t}});else if("sort"===i){var r="menuText",c=function(e){return{order:e.order,field:e.field,columnKey:e.columnKey,column:{menuText:e.column&&e.column[r]}}},o=Array.isArray(n)?n.map((function(e){return c(e)})):c(n);m({type:"modules/columnSortChanged",payload:{moduleName:S,columnsorter:o}})}},w=function(e){m({type:"modules/selectedRowKeysChanged",payload:{moduleName:S,selectedRowKeys:e}})},A=function(e){var a=t.selectedRowKeys,i=n.primarykey;1===a.length&&a[0]===e[i]||m({type:"modules/selectedRowKeysChanged",payload:{moduleName:S,selectedRowKeys:[e[i]]}})},R=t.gridParams,L=R.limit,K=R.curpage,F=R.total,U=function(){m({type:"modules/fetchData",payload:{moduleName:S,forceUpdate:!0}})},W=Object(D["jsx"])(p["a"],{title:"\u5237\u65b0\u5f53\u524d\u9875\u6570\u636e",children:Object(D["jsx"])(b["a"],{onClick:U})}),V=Object(f["useState"])(t.filters.searchfilter),z=Object(u["a"])(V,2),G=z[0],J=z[1];Object(f["useEffect"])((function(){J(t.filters.searchfilter)}),[t.filters.searchfilter]);var Y={showLessItems:!0,hideOnSinglePage:!1,showSizeChanger:!n.istreemodel,showQuickJumper:!1,pageSize:n.istreemodel?1e4:L,current:K,total:F,showTotal:function(e,a){return Object(D["jsxs"])("div",{className:"paginationtoolbar",style:{display:"flex",marginLeft:"16px"},children:[n.moduleLimit.hassqlparam?Object(D["jsx"])(ie["a"],{moduleState:t,dispatch:m,inPagination:!0}):null,n.istreemodel||"onetomanygrid"===v?null:Object(D["jsx"])(d["a"].Search,{size:"default"===t.currSetting.gridSize?"middle":t.currSetting.gridSize,allowClear:!0,loading:g&&!!t.filters.searchfilter,style:{width:"180px",paddingRight:"8px"},placeholder:"\u6587\u672c\u5b57\u6bb5\u4e2d\u641c\u7d22",value:G,onSearch:function(e){m({type:"modules/filterChanged",payload:{type:"searchfilter",moduleName:S,query:e}})},onChange:function(e){J(e.target.value)}},t.moduleName),y?null:Object(D["jsx"])(l["b"],{size:"middle",children:Object(ae["b"])({moduleState:t,dispatch:m,position:"pagination"})}),Object(D["jsx"])("div",{style:{flex:1}}),Object(D["jsxs"])(l["b"],{size:"middle",style:{whiteSpace:"nowrap"},children:[n.orderfield&&t.recordOrderChanged?Object(D["jsx"])(ve,{moduleState:t,dispatch:m}):null,n.tooltiptpl?Object(D["jsx"])(it,{moduleState:t,dispatch:m}):null,Object(D["jsx"])(H,{moduleState:t,dispatch:m}),Object(D["jsx"])(P,{moduleState:t,dispatch:m}),Object(D["jsx"])(ne,{moduleState:t,dispatch:m,gridType:v}),document.body.clientWidth>768?"\u663e\u793a".concat(a[0],"-").concat(a[1],",\u5171").concat(e,"\u6761"):null,W]})]})},onChange:C,onShowSizeChange:I,position:"onetomanygrid"===v?["bottomRight"]:["topRight","bottomRight"],pageSizeOptions:["10","15","20","50","100","200","500"]},Z=Object(x["t"])(t.currentGridschemeid,n),Q=Object(f["useMemo"])((function(){return Object(M["a"])({gridScheme:Z,moduleInfo:n,moduleState:t,dispatch:m,gridType:v,readOnly:y})}),[t.currentGridschemeid,t.monetary,t.monetaryPosition,t.filters.columnfilter,t.sorts,t.formState.showType,t.dataSource,t.pinkey]),$={};Z.width&&($.scroll={x:Z.width}),Z.height&&($.scroll={y:Z.height}),n.istreemodel?($.expandedRowKeys=t.expandedRowKeys,$.onExpand=function(e,t){m({type:"modules/expandChanged",payload:{moduleName:n.moduleid,expanded:e,key:t[n.primarykey]}})}):Z.expandRecord?$.expandable={expandedRowRender:function(e){return Object(D["jsx"])("div",{style:{borderCollapse:"collapse"},children:Object(D["jsx"])(N["c"],{record:e,disableTitle:!0,moduleInfo:n,dispatch:m,isRecordExpand:!0})})}}:n.rowbodytpl?"loading..."===n.rowbodytpl?$.expandable={expandedRowRender:function(e){return Object(D["jsx"])(Ce,{moduleInfo:n,record:e})}}:$.expandable={expandedRowRender:function(e){return Object(D["jsx"])(s["a"],{className:"markdowncard",children:Object(D["jsx"])("span",{className:"markdown",dangerouslySetInnerHTML:{__html:rt.parse(Object(_["G"])(n.rowbodytpl||"",e))}})})}}:Object(x["C"])(n)&&($.expandable={expandedRowRender:function(e){return B({record:e,moduleInfo:n,dispatch:m})}}),$.expandable&&($.expandedRowKeys=t.expandedRowKeys,$.onExpand=function(e,t){m({type:"modules/expandChanged",payload:{moduleName:n.moduleid,expanded:e,key:t[n.primarykey],title:t[n.namefield],selected:!0}})});var X=Object(M["c"])(Q,n.namefield);X.splice(0,0,null),$.expandable&&X.splice(0,0,null),X.some((function(e){return e&&!e.namefield}))&&($.summary=n.istreemodel?null:function(e){return q(e,t,X)});var ee={};(t.currSetting.canDragChangeRecno||t.currSetting.canDragToNavigate)&&Object(_["d"])(ee,{body:{row:function(e){return Object(D["jsx"])(me,Object(o["a"])({},e))}}});var te=Object(f["useCallback"])((function(e,n,a){var i=t.dataSource;a[ue["f"]]&&(i=a[ue["f"]].children);var r=i[e];i.splice(e,1),i.splice(n,0,r),m({type:"modules/updateDataSource",payload:{moduleName:S,dataSource:Object(c["a"])(t.dataSource),recordOrderChanged:!0}})}),[t.dataSource]),re=Object(f["useCallback"])((function(e,a,i,o){if(!t.currSetting.canDragToLeafNode||!Array.isArray(o.children)){var s=t.dataSource;i[ue["f"]]&&(s=i[ue["f"]].children);var l=s[e];s.splice(e,1),i[ue["f"]]&&0===s.length&&delete i[ue["f"]].children;var d=t.dataSource,u=null;t.currSetting.canDragToLeafNode&&!Array.isArray(o.children)?(Object(_["d"])(o,{children:[]}),d=o.children,u=o[n.primarykey],Object(_["d"])(i,Object(r["a"])({},ue["f"],o))):o[ue["f"]]?(Object(_["d"])(i,Object(r["a"])({},ue["f"],o[ue["f"]])),u=o[ue["f"]][n.primarykey],d=o[ue["f"]].children):delete i[ue["f"]],d.splice(a+1,0,l),m({type:"modules/updateDataSource",payload:{moduleName:S,dataSource:Object(c["a"])(t.dataSource),recordOrderChanged:!0}}),Object(Ie["O"])({objectname:S,id:i[n.primarykey],parentkey:u})}}),[t.dataSource,t.currSetting.canDragToLeafNode]),ce=function(){return[{key:"expandAll",text:Object(D["jsxs"])(l["b"],{children:[Object(D["jsx"])(j["a"],{}),"\u5168\u90e8\u5c55\u5f00"]}),onSelect:function(){m({type:"modules/treeExpandAll",payload:{moduleName:S}})}},{key:"collapseAll",text:Object(D["jsxs"])(l["b"],{children:[Object(D["jsx"])(h["a"],{}),"\u5168\u90e8\u6298\u53e0"]}),onSelect:function(){m({type:"modules/treeCollapseAll",payload:{moduleName:S}})}}]};return t.currSetting.isShowListCard?Object(D["jsx"])(nt,{moduleInfo:n,moduleState:t,dispatch:m,paginationProps:Y,selectRow:A,size:t.currSetting.gridSize}):Object(D["jsx"])(a["a"],Object(o["a"])({className:"moduletable",columns:Q,size:t.currSetting.gridSize,loading:g,bordered:!0,showSorterTooltip:!1,dataSource:n.istreemodel&&t.pinkey&&!Object(O["d"])(t)?[Object(T["m"])(t.dataSource,t.pinkey,n.primarykey)]:t.dataSource,rowKey:n.primarykey,rowSelection:{type:"selectfield"===v?"radio":"checkbox",selectedRowKeys:t.selectedRowKeys,onChange:w,selections:!n.istreemodel||ce()},onRow:function(e,a){return{record:e,index:a,moduleState:t,moveRow:te,moveToNewParent:re,onClick:function(){A(e)},onDoubleClick:function(){"selectfield"===v&&E.setTextValue({value:e[n.primarykey],text:e[n.namefield]})}}},pagination:Y,locale:{emptyText:Object(D["jsx"])(i["a"],{style:"onetomanygrid"===v?{margin:0}:{},description:Object(D["jsxs"])("span",{children:["\u6682\u65e0\u6570\u636e",Object(D["jsx"])(p["a"],{title:"\u5237\u65b0",children:Object(D["jsx"])(b["a"],{onClick:U,style:{marginLeft:"8px",cursor:"pointer"}})}),t.filters.searchfilter?Object(D["jsx"])(d["a"].Search,{size:"small",allowClear:!0,loading:g&&!!t.filters.searchfilter,style:{width:"120px",paddingLeft:"10px"},placeholder:"\u6587\u672c\u5b57\u6bb5\u4e2d\u641c\u7d22",value:G,onSearch:function(e){m({type:"modules/filterChanged",payload:{type:"searchfilter",moduleName:S,query:e}})},onChange:function(e){J(e.target.value)}},t.moduleName):null]}),image:i["a"].PRESENTED_IMAGE_SIMPLE})},onChange:k,components:ee,scroll:{x:!0}},$))};t["a"]=ct},r5oo:function(e,t,n){"use strict";n.d(t,"d",(function(){return z})),n.d(t,"g",(function(){return G})),n.d(t,"c",(function(){return Z})),n.d(t,"f",(function(){return ae})),n.d(t,"h",(function(){return ie})),n.d(t,"e",(function(){return ue})),n.d(t,"a",(function(){return fe})),n.d(t,"b",(function(){return be}));var a=n("PpiC"),i=(n("IzEo"),n("bx4M")),r=(n("+L6B"),n("2/Rp")),c=(n("y8nQ"),n("Vl3Y")),o=(n("nRaC"),n("5RzL")),s=n("tJVT"),l=(n("Q9mQ"),n("diRs")),d=(n("P2fV"),n("NJEC")),u=(n("DYRE"),n("zeV3")),p=(n("/zsF"),n("PArb")),f=(n("5Dmo"),n("3S7+")),m=n("oBTY"),b=(n("FJo9"),n("L41K")),j=(n("2qtc"),n("kLXV")),h=n("k1fw"),_=(n("miYZ"),n("tsqr")),O=n("q1tI"),x=n.n(O),g=n("9kvl"),v=n("sy1d"),y=n("Drea"),E=n("+YFz"),S=n("Ue1A"),C=n("jrDe"),I=n("Icgb"),D=n("Lyp1"),k=n("/Faj"),w=n("IKrn"),P=n("k5nK"),T=n("+5D9"),M=n("bRQS"),A=n("6ZR6"),R=n("79+z"),N=n("WTWM"),L=n("mDHv"),B=n("1qKY"),K=n("MzlM"),F=n("RfA7"),U=n("nKUr"),W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t)for(var n=t.split(","),a=0;a<n.length;a+=1)if(n[a]===e)return!0;return!1},V=function(e){return!(e.indexOf("\u4e0d")>=0||e.indexOf("\u6682")>=0||e.indexOf("\u7ec8")>=0||e.indexOf("\u9000")>=0)},q=function(e){var t=e.actEndActName;return t?V(t)?"approve":"reject":(_["default"].error("\u5ba1\u6279\u6d41\u7a0b\u7684\u7ed3\u675f\u6ca1\u6709\u8bbe\u7f6e\u540d\u79f0\uff01"),"approve")},z=function(e,t){return!!e.userLimit.approve&&e.userLimit.approve.start&&t&&t.creater===g["b"].username},G=function(e){return!!e.actProcInstId},J=function(e){return"\u5ba1\u6279\u4e2d"===e.actProcState||"\u5ba1\u6838\u4e2d"===e.actProcState},H=function(e){return!!e.actEndTime},Y=function(e){return"2"===e.actProcInstState},Z=function(e){return!Y(e)&&e.actAssignee===g["b"].userid},Q=function(e){return!Y(e)&&!e.actAssignee&&W(g["b"].userid,e.actCandidate)},$=function(e){return!Y(e)&&e.actAssignee===g["b"].userid&&W(g["b"].userid,e.actCandidate)},X=function(e,t,n){if(!["VActAllRuTask","VActAllFinishTask"].includes(e)){var a=Object(N["x"])(e),i=t[a.primarykey],r=t[a.namefield],c="claim",o="\u63a5\u53d7";(Q(t)||$(t))&&($(t)&&(c="unclaim",o="\u9000\u56de"),Object(v["default"])("".concat(v["API_HEAD"],"/platform/workflow/runtime/").concat(c,".do"),{params:{objectName:e,id:i,name:r,taskId:t.actExecuteTaskId}}).then((function(a){if(a.success){_["default"].success("\u300e".concat(r,"\u300f\u7684\u5ba1\u6279\u6d41\u7a0b\u5df2").concat(o,"!"));var i=Object(h["a"])({},t);i.actAssignee=i.actAssignee?null:g["b"].userid,n({type:"modules/updateRecord",payload:{moduleName:e,record:i}}),Object(A["b"])()}else j["a"].warning({okText:"\u77e5\u9053\u4e86",title:"".concat(r,"\u5de5\u4f5c\u6d41").concat(o,"\u5931\u8d25"),content:Object(U["jsx"])("span",{dangerouslySetInnerHTML:{__html:a.msg}})})})))}},ee=function(e,t,n){var a=e.moduleName,i=e.formState;["VActAllRuTask","VActAllFinishTask"].includes(e.moduleName)||n({type:"modules/formStateChanged",payload:{moduleName:a,formState:Object(h["a"])(Object(h["a"])({},i),{},{visible:!0,formType:"approve",currRecord:t})}})},te=30,ne=b["a"].Step,ae=function(e){var t=e.moduleState,n=e.record,a=e.dispatch,i=e.direction,r=void 0===i?"horizontal":i,c=e.breakNumber,o=void 0===c?0:c,s=e.readonly,l=void 0!==s&&s,d=e.onExecuteApprove,j=[];if(!n||!G(n))return Object(U["jsx"])("span",{children:"\u5ba1\u6279\u6d41\u7a0b\u5c1a\u672a\u542f\u52a8"});if(j.push(Object(U["jsx"])(ne,{title:"\u6d41\u7a0b\u542f\u52a8",icon:Object(U["jsx"])(y["a"],{}),subTitle:"",status:"finish",description:Object(U["jsxs"])("span",{children:["".concat(n["actStartUser.username"]||n.actStartUserName,"(").concat(Object(R["j"])(n.actStartTime),")")," "]})},"process_start")),j.push.apply(j,Object(m["a"])(n.actCompleteTaskInfo.map((function(e){return Object(U["jsx"])(ne,{title:e.taskname,subTitle:e.processresult,status:V(e.processresult)?"finish":"error",description:Object(U["jsxs"])("span",{children:["".concat(e.username,"(").concat(Object(R["j"])(e.processdate),")")," ",Object(U["jsx"])("br",{}),e.processtitle&&e.processtitle.length>te&&"horizontal"===r?Object(U["jsx"])(f["a"],{title:e.processtitle,children:Object(U["jsxs"])("span",{children:[Object(U["jsx"])(E["a"],{})," \u5ba1\u6279\u610f\u89c1"]})}):Object(U["jsx"])("span",{style:{maxWidth:"300px",display:"block"},children:e.processtitle})]})},e.taskname)})))),H(n))j.push(Object(U["jsx"])(ne,{title:n.actEndActName,icon:"approve"===q(n)?Object(U["jsx"])(S["a"],{}):Object(U["jsx"])("span",{style:{color:"red"},children:Object(U["jsx"])(C["a"],{})}),status:"finish",description:Object(U["jsxs"])("span",{children:["\u5ba1\u6279\u7ed3\u675f(".concat(Object(R["j"])(n.actEndTime),")")," "]})},"process_finished"));else{var h=n.actCurrentCandidateName;if(Q(n)&&a&&t)j.push(Object(U["jsx"])(ne,{title:n.actTaskNames,icon:Object(U["jsx"])(I["a"],{}),status:"process",description:Object(U["jsx"])("span",{children:h?Object(U["jsxs"])(U["Fragment"],{children:["\u6b63\u5728\u7b49\u5f85 ".concat(h," "),Object(U["jsx"])("a",{onClick:function(){return X(t.moduleName,n,a)},children:"\u63a5\u53d7\u4efb\u52a1"})]}):""})},"process_claim"));else if(Z(n)&&a&&t)j.push(Object(U["jsx"])(ne,{title:n.actTaskNames,icon:Object(U["jsx"])(I["a"],{}),status:"process",description:Object(U["jsxs"])("span",{children:["\u6b63\u5728\u7b49\u5f85 \u6211 \u5bf9\u4efb\u52a1\u8fdb\u884c\u5904\u7406",l&&"VActRuTask"!==t.moduleName?null:Object(U["jsx"])("a",{onClick:function(){return d?d():ee(t,n,a)},style:{marginLeft:"24px"},children:"\u5f00\u59cb\u5ba1\u6279"}),$(n)?Object(U["jsx"])("a",{style:{marginLeft:"12px"},onClick:function(){return X(t.moduleName,n,a)},children:"\u9000\u56de\u4efb\u52a1"}):null]})},"process_process"));else if(J(n)){var _=n.actCurrentAssignName,O=h?"\u63a5\u53d7\u4efb\u52a1":"\u5904\u7406\u4efb\u52a1";j.push(Object(U["jsx"])(ne,{title:n.actTaskNames,status:"process",icon:Object(U["jsx"])(I["a"],{}),description:Object(U["jsx"])("span",{children:(h?"\u6b63\u5728\u7b49\u5f85 ".concat(h," ").concat(O):"")+(_?"\u6b63\u5728\u7b49\u5f85 ".concat(_," ").concat(O):"")})},"process_".concat(h)))}}if("horizontal"===r&&o&&j.length>o){var x=Object(R["x"])(j,o);return Object(U["jsx"])(u["b"],{direction:"vertical",size:"small",split:Object(U["jsx"])(p["a"],{type:"horizontal",dashed:!0,style:{margin:"8px 0"}}),style:{width:"100%"},children:x.map((function(e){return Object(U["jsx"])(b["a"],{size:"small",direction:r,children:e})}))})}return Object(U["jsx"])(b["a"],{size:"small",direction:r,children:j})},ie=function(e,t,n){var a=e.objectname,i=t[e.primarykey],r=t[e.namefield];Object(v["default"])("".concat(v["API_HEAD"],"/platform/workflow/runtime/start.do"),{params:{objectName:a,id:i,name:r}}).then((function(e){e.success?(_["default"].success("\u300e".concat(r,"\u300f\u7684\u5ba1\u6279\u6d41\u7a0b\u5df2\u542f\u52a8!")),n({type:"modules/refreshRecord",payload:{moduleName:a,recordId:i}}),Object(A["b"])()):j["a"].warning({okText:"\u77e5\u9053\u4e86",title:"\u5ba1\u6279\u6d41\u7a0b\u542f\u52a8\u5931\u8d25",content:Object(U["jsx"])("span",{dangerouslySetInnerHTML:{__html:e.msg}})})}))},re=function(e,t,n){var a,i=Object(N["x"])(e);if(null!==(a=i.userLimit.approve)&&void 0!==a&&a.cancel){var r=t[i.primarykey],c=t[i.namefield];Object(v["default"])("".concat(v["API_HEAD"],"/platform/workflow/runtime/cancel.do"),{params:{objectName:e,id:r,name:c}}).then((function(t){t.success?(_["default"].success("\u300e".concat(c,"\u300f\u7684\u5ba1\u6279\u6d41\u7a0b\u5df2\u5168\u90e8\u53d6\u6d88")),n({type:"modules/refreshRecord",payload:{moduleName:e,recordId:r}}),Object(A["b"])()):j["a"].warning({okText:"\u77e5\u9053\u4e86",title:"\u5ba1\u6279\u6d41\u7a0b\u53d6\u6d88\u5931\u8d25",content:Object(U["jsx"])("span",{dangerouslySetInnerHTML:{__html:t.msg||t.data}})})}))}else _["default"].warn("\u4f60\u6ca1\u6709\u53d6\u6d88\u5f53\u524d\u6a21\u5757\u5ba1\u6279\u6d41\u7a0b\u7684\u6743\u9650")},ce=function(e){var t=e.moduleInfo,n=e.record,a=e.className,i=e.dispatch,r="\u300e".concat(n[t.namefield],"\u300f"),c="\u5ba1\u6279\u6d41\u7a0b\u5c1a\u672a\u542f\u52a8",o=function(){return ie(t,n,i)};return z(t,n)?Object(U["jsx"])(l["a"],{content:Object(U["jsxs"])("span",{children:[c,Object(U["jsx"])("span",{style:{marginLeft:"12px"},children:Object(U["jsx"])("a",{onClick:o,children:"\u542f\u52a8\u6d41\u7a0b"})})]}),children:Object(U["jsx"])(d["a"],{icon:Object(U["jsx"])(D["a"],{style:{color:"red"}}),title:"\u8981\u542f\u52a8 ".concat(r," \u7684\u5ba1\u6279\u6d41\u7a0b\u5417?"),onConfirm:o,children:Object(U["jsx"])("a",{children:Object(U["jsx"])("span",{className:a})})})}):Object(U["jsx"])(l["a"],{placement:"rightTop",trigger:"hover",content:c,children:Object(U["jsx"])("span",{className:a})})},oe=function(e){var t=e.moduleName,n=e.record,a=e.className,i=e.tips,r=e.dispatch;return Object(U["jsx"])(l["a"],{content:i,children:Object(U["jsx"])("a",{onClick:function(){return X(t,n,r)},children:Object(U["jsx"])("span",{className:a})})})},se=function(e){var t=e.moduleState,n=e.record,a=e.className,i=e.tips,r=e.dispatch;return Object(U["jsx"])(l["a"],{content:i,children:Object(U["jsx"])("a",{onClick:function(){return ee(t,n,r)},children:Object(U["jsx"])("span",{className:a})})})},le=new Map,de=function(e){return le.has(e)||le.set(e,Object(v["syncRequest"])("".concat(v["API_HEAD"],"/platform/workflowdesign/getsvg.do"),{params:{procDefId:e}})),le.get(e)||""},ue=function(e,t){return G(t)?Q(t)?"approveaction x-fa fa-inbox fa-fw":Z(t)?"approveaction x-fa fa-pencil fa-fw":t.actProcState?"\u5ba1\u6279\u4e2d"===t.actProcState||"\u5ba1\u6838\u4e2d"===t.actProcState?"actionblue x-fa fa-sign-in fa-rotate-90 fa-fw":"\u5df2\u6682\u505c"===t.actProcState?"approvepause fa-fw":0===t.actProcState.indexOf("\u5df2\u7ed3\u675f")?"reject"===q(t)?"approveno x-fa fa-ban fa-rotate-90 fa-fw":"actionblue x-fa fa-check fa-fw":"":G(t)?"actionblue x-fa fa-sign-in fa-rotate-90 fa-fw":"":z(e,t)?"approveaction x-fa fa-play fa-fw":"actionyellow x-fa fa-exclamation-triangle fa-fw"},pe=function(e){var t,n,a=e.record,p=e.moduleState,m=e.dispatch,b=p.moduleName,j=Object(N["x"])(b),h=ue(j,a),x="\u300e".concat(a[j.namefield],"\u300f"),g=Object(O["useState"])(!1),y=Object(s["a"])(g,2),E=y[0],S=y[1];if(!G(a))return ce({moduleInfo:j,record:a,className:h,dispatch:m});var R=function(){var e=function e(t){return t.map((function(t){return{value:t.objectid||"",label:t.text,key:t.objectid,isLeaf:t.leaf,disabled:!t.leaf,children:t.children&&t.children.length>0?e(t.children):void 0}}))},t=e(Object(N["v"])("FUser"));return Object(U["jsxs"])(c["a"],{autoComplete:"off",onFinish:function(e){Object(v["default"])("".concat(v["API_HEAD"],"/platform/workflow/task/changeassign.do"),{params:{taskid:a.actTasks,assignid:e.user}}).then((function(e){e.success?(_["default"].info("".concat(a.actTaskNames," \u7684\u5ba1\u6279\u4eba\u5458\u5df2\u66f4\u6362\uff01")),S(!1),Object(A["b"])(),m({type:"modules/refreshRecord",payload:{moduleName:b,recordId:a[j.primarykey]}})):_["default"].error("".concat(a.actTaskNames," \u7684\u5ba1\u6279\u4eba\u5458\u66f4\u6362\u5931\u8d25\uff01"))}))},children:[Object(U["jsx"])(c["a"].Item,{label:"\u5ba1\u6279\u7528\u6237",name:"user",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u5ba1\u6279\u7528\u6237"}],children:Object(U["jsx"])(o["a"],{style:{width:"300px"},treeDefaultExpandAll:!0,allowClear:!0,showSearch:!0,treeNodeFilterProp:"label",treeData:t,getPopupContainer:function(e){return e.parentNode}})}),Object(U["jsx"])(c["a"].Item,{wrapperCol:{offset:10,span:16},children:Object(U["jsx"])(r["a"],{type:"primary",htmlType:"submit",children:"\u786e\u5b9a\u66f4\u6362"})})]})},L=Object(U["jsx"])(i["a"],{title:Object(U["jsxs"])(U["Fragment"],{children:[Object(U["jsx"])(k["a"],{})," \u6d41\u7a0b\u5ba1\u6279\u8bb0\u5f55"]}),extra:Object(U["jsxs"])(u["b"],{size:"middle",children:[Object(U["jsx"])(f["a"],{title:"\u663e\u793a\u5ba1\u6279\u6d41\u7a0b\u56fe",placement:"bottom",children:Object(U["jsx"])(l["a"],{title:Object(U["jsxs"])(u["b"],{children:[Object(U["jsx"])(k["a"],{}),"".concat(j.title,"\u7684\u5ba1\u6279\u6d41\u7a0b\u56fe")]}),content:Object(U["jsx"])("div",{children:Object(U["jsx"])("span",{dangerouslySetInnerHTML:{__html:de(a.actProcDefId)}})}),trigger:"click",children:Object(U["jsx"])(w["a"],{})})}),null!==(t=j.userLimit.approve)&&void 0!==t&&t.cancel?Object(U["jsx"])(f["a"],{title:"\u53d6\u6d88\u5f53\u524d\u8bb0\u5f55\u7684\u6240\u6709\u5ba1\u6279\u4fe1\u606f",placement:"bottom",children:Object(U["jsx"])(d["a"],{icon:Object(U["jsx"])(D["a"],{style:{color:"red"}}),title:"\u8981\u53d6\u6d88 ".concat(x," \u7684\u6240\u6709\u5ba1\u6279\u4fe1\u606f\u5417?"),onConfirm:function(){return re(b,a,m)},children:Object(U["jsx"])(P["a"],{})})},"cancelapprove"):null,null!==(n=j.userLimit.approve)&&void 0!==n&&n.changeassign&&a.actTasks?Object(U["jsx"])(l["a"],{visible:E,onVisibleChange:function(e){return S(e)},trigger:"click",title:"\u66f4\u6362 ".concat(a.actTaskNames," \u7684\u5ba1\u6279\u4eba\u5458"),content:R(),children:Object(U["jsx"])(f["a"],{title:"\u66f4\u6362\u5f53\u524d\u4efb\u52a1\u7684\u5ba1\u6279\u4eba\u5458",placement:"bottom",children:Object(U["jsx"])(T["a"],{})},"changeassign")}):null]}),children:ae({moduleState:p,record:a,dispatch:m,direction:"vertical"})});return Q(a)?oe({moduleName:b,record:a,className:h,tips:L,dispatch:m}):Z(a)?se({moduleState:p,record:a,className:h,tips:L,dispatch:m}):H(a)?Object(U["jsx"])(l["a"],{placement:"rightTop",trigger:"hover",content:L,children:"approve"===q(a)?Object(U["jsx"])(M["a"],{}):Object(U["jsx"])("span",{style:{color:"red"},children:Object(U["jsx"])(C["a"],{})})}):Object(U["jsx"])(l["a"],{placement:"rightTop",trigger:"hover",content:L,children:Object(U["jsx"])(I["a"],{})})},fe=function(e){var t=e.record,n=Object(a["a"])(e,["record"]);return t?Object(U["jsx"])(pe,Object(h["a"])({record:t},n)):null},me=function(e){var t=e.record,n=e.moduleState,a=e.dispatch,r=t.objectname,c=Object(N["x"])(r),o=ue(c,t),s=Object(O["useContext"])(B["a"]),d=s.moduleState,p=s.dispatch,m=d.formState,b=function(){var e=Object(F["y"])({objectname:d.moduleName,id:t.actBusinessKey}),n=e.data;p({type:"modules/formStateChanged",payload:{moduleName:r,formState:Object(h["a"])(Object(h["a"])({},m),{},{visible:!0,formType:"approve",currRecord:n})}})},j=Object(U["jsx"])(i["a"],{title:Object(U["jsxs"])(U["Fragment"],{children:[Object(U["jsx"])(k["a"],{})," \u6d41\u7a0b\u5ba1\u6279\u8bb0\u5f55"]}),extra:Object(U["jsx"])(f["a"],{title:"\u663e\u793a\u5ba1\u6279\u6d41\u7a0b\u56fe",placement:"bottom",children:Object(U["jsx"])(l["a"],{title:Object(U["jsxs"])(u["b"],{children:[Object(U["jsx"])(k["a"],{}),"".concat(c.title,"\u7684\u5ba1\u6279\u6d41\u7a0b\u56fe")]}),content:Object(U["jsx"])("div",{children:Object(U["jsx"])("span",{dangerouslySetInnerHTML:{__html:de(t.actProcDefId)}})}),trigger:"click",children:Object(U["jsx"])(w["a"],{})})}),children:ae({moduleState:n,record:t,dispatch:a,direction:"vertical",readonly:!0,onExecuteApprove:b})});if(Q(t))return oe({moduleName:n.moduleName,record:t,className:o,tips:j,dispatch:a});if(Z(t)){var _=function(){return Object(U["jsxs"])(x.a.Fragment,{children:[Object(U["jsx"])(l["a"],{content:j,children:Object(U["jsx"])("a",{onClick:b,children:Object(U["jsx"])("span",{className:o})},"button-".concat(t.actExecuteTaskId))}),Object(U["jsx"])(K["a"],{moduleInfo:c,moduleState:d,dispatch:p,callback:function(){a({type:"modules/fetchData",payload:{moduleName:"VActRuTask",forceUpdate:!0}})}})]})};return Object(U["jsx"])(_,{})}return H(t)?Object(U["jsx"])(l["a"],{placement:"rightTop",trigger:"hover",content:j,children:"approve"===q(t)?Object(U["jsx"])(M["a"],{}):Object(U["jsx"])("span",{style:{color:"red"},children:Object(U["jsx"])(C["a"],{})})}):Object(U["jsx"])(l["a"],{placement:"rightTop",trigger:"hover",content:j,children:Object(U["jsx"])(I["a"],{})})},be=function(e){var t=e.record,n=e.moduleState,a=e.dispatch,i=t.objectname;return Object(U["jsx"])(L["a"],{moduleName:i,parentFilter:void 0,children:Object(U["jsx"])(me,{moduleState:n,dispatch:a,record:t,value:null,_recno:0})},t.actExecuteTaskId)}},rMKe:function(e,t,n){e.exports={celltypegroup:"celltypegroup___1AdhE",eye:"eye___3SoXs",dragover:"dragover___2WTDQ",filtertitle:"filtertitle___3oYZU",parentcolumnheader:"parentcolumnheader___3Wr1k",rowcellselected:"rowcellselected___2nasn",selected:"selected___3RNlC",leafcolumnheader:"leafcolumnheader___3nSHC",categorycolumn:"categorycolumn___1YBFS",groupregion:"groupregion___2VafX",groupregiontitle:"groupregiontitle___9ryCn",groupregindeephead:"groupregindeephead___36SXi",groupregionbody:"groupregionbody____vUku",tool:"tool___TkrL7",dataminingcard:"dataminingcard___3GDcT",dataminingcardintab:"dataminingcardintab___s0SUQ",dataminingcardintabonlytable:"dataminingcardintabonlytable___2-CZL"}},rRzd:function(e,t,n){"use strict";n.d(t,"b",(function(){return O}));n("lUTK");var a=n("BvKs"),i=(n("5Dmo"),n("3S7+")),r=(n("+L6B"),n("2/Rp")),c=n("tJVT"),o=n("oBTY"),s=n("k1fw"),l=n("Mo4S"),d=n("4g1a"),u=n("79+z"),p=n("RfA7"),f=n("YW4E"),m=n("ma4E"),b=n("WTWM"),j=n("nKUr"),h="gridmodeexcelexport",_="treemodeexcelexport",O=function(e){var t=e.moduleState,n=e.key,a=e.topdf,i=e.onlyselected,r=t.moduleName,l=t.gridExportSetting,d=t.sorts,j=t.groups,O=Object(b["x"])(r),x={moduleName:r,columns:JSON.stringify(Object(f["b"])(r)),page:1,start:0,limit:1e6,conditions:JSON.stringify([]),topdf:a,sort:d.length?JSON.stringify(d):null};if(x.monetaryUnit=t.monetary.monetaryUnit,x.monetaryText=t.monetary.monetaryText,Object(u["d"])(x,l),i){var g=Object(s["a"])({},t.filters);g.columnfilter=g.columnfilter?Object(o["a"])(g.columnfilter):[],g.columnfilter.push({property:O.primarykey,operator:"in",value:t.selectedTextValue.map((function(e){return e.value}))}),Object(u["d"])(x,Object(m["b"])(g,t))}else Object(u["d"])(x,Object(m["b"])(t.filters,t));var v=Object(m["c"])(t);if(i&&v.push({property:"\u9009\u4e2d\u7684",operator:"".concat(t.selectedTextValue.length),value:"\u6761\u8bb0\u5f55"}),x.conditions=JSON.stringify(v),n.startsWith(h)||n.startsWith(_)){var y=n.split("||"),E=Object(c["a"])(y,3);x.formschemeid=E[1],x.formschemetitle=E[2]}if(1===j.length){var S=Object(s["a"])({},j[0]),C=Object(b["n"])(S.property,O);if(C)if(C.isManyToOne){var I=Object(b["x"])(C.fieldtype);S.property=S.property+"."+I.namefield}else C.fDictionaryid&&(S.property=S.property+"_dictname");x.group=JSON.stringify(S)}Object(p["d"])(x)},x=function(e){var t=e.moduleState,n=e.setVisible,c=e.onlyselected,o=t.moduleName,s=Object(b["x"])(o),u=function(){var e=s.formschemes,o=[],u=e.filter((function(e){return[h,_].includes(e.formtype)})).map((function(e){var o="".concat(e.formtype,"||").concat(e.formschemeid,"||").concat(e.schemename);return Object(j["jsxs"])(a["a"].Item,{icon:Object(j["jsx"])(l["a"],{}),onClick:function(){O({moduleState:t,key:o,topdf:!1,onlyselected:c})},title:e.schemename,children:[e.schemename,Object(j["jsx"])(i["a"],{title:"\u5bfc\u51fapdf\u6587\u4ef6",placement:"topRight",children:Object(j["jsx"])(r["a"],{style:{float:"right",paddingRight:"0px"},type:"link",size:"small",onClick:function(e){e.stopPropagation(),n(!1),O({moduleState:t,key:o,topdf:!0,onlyselected:c})},children:Object(j["jsx"])(d["a"],{style:{marginLeft:"10px"}})})})]},o)}));return u.length>0&&(o.push(Object(j["jsx"])(a["a"].ItemGroup,{title:"\u5217\u8868\u5bfc\u51fa\u65b9\u6848",children:u},"_export_grid_key_")),o.push(Object(j["jsx"])(a["a"].Divider,{},"_export_grid_key_div"))),o};return u()};t["a"]=x},rzUZ:function(e,t,n){e.exports={editingTools:"editingTools___3sOH8",controlList:"controlList___1Hi6F",control:"control___18D86",openFile:"openFile___15t9v",line:"line___1Fotv",zoom:"zoom___2S5f3",zoomIn:"zoomIn___vPqIr",zoomOut:"zoomOut___3O7-1",undo:"undo___7sSKZ",redo:"redo___4F3F2",save:"save___1Yysd",download:"download___piUAQ",image:"image___1F3lY",open:"open___2anIL",preview:"preview___3t5WT"}},sAbR:function(e,t,n){"use strict";n("5Dmo");var a=n("3S7+"),i=(n("+L6B"),n("2/Rp")),r=n("J+ur"),c=n("0owl"),o=n("nKUr"),s=function(e){var t=e.moduleState,n=e.dispatch,s=t.moduleName,l=t.currSetting.userFilterRegionVisible,d=function(){n({type:"modules/toggleUserFilter",payload:{moduleName:s}})};return Object(o["jsx"])(a["a"],{title:l?"\u9690\u85cf\u81ea\u5b9a\u4e49\u7b5b\u9009\u6761\u4ef6":"\u663e\u793a\u81ea\u5b9a\u4e49\u7b5b\u9009\u6761\u4ef6",children:Object(o["jsxs"])(i["a"],{type:l?"link":"text",size:"small",onClick:d,children:[l?Object(o["jsx"])(r["a"],{}):Object(o["jsx"])(c["a"],{})," \u7b5b\u9009"]})})};t["a"]=s},tLJN:function(e,t,n){"use strict";var a=n("emvA").getBusinessObject,i=n("emvA").is,r=n("6BL2"),c=n("Z97y"),o=n("hfUJ"),s=n("mRsi"),l=n("3OWR");function d(e){var t=a(e),n=t.get("calledElement"),i=t.get("activiti:caseRef"),r="";return"undefined"!==typeof n?r="bpmn":"undefined"!==typeof i&&(r="cmmn"),r}var u={calledElement:void 0,"activiti:calledElementBinding":"latest","activiti:calledElementVersion":void 0,"activiti:calledElementTenantId":void 0,"activiti:variableMappingClass":void 0,"activiti:variableMappingDelegateExpression":void 0,"activiti:caseRef":void 0,"activiti:caseBinding":"latest","activiti:caseVersion":void 0,"activiti:caseTenantId":void 0};e.exports=function(e,t,n,a){i(t,"activiti:CallActivity")&&(e.entries.push(r.selectBox({id:"callActivity",label:a("CallActivity Type"),selectOptions:[{name:"BPMN",value:"bpmn"},{name:"CMMN",value:"cmmn"}],emptyParameter:!0,modelProperty:"callActivityType",get:function(e,t){return{callActivityType:d(e)}},set:function(e,t,n){var a=t.callActivityType,i=l({},u);return"bpmn"===a?i.calledElement="":"cmmn"===a&&(i["activiti:caseRef"]=""),o.updateProperties(e,i)}})),e.entries.push(c(t,n,{getCallableType:d},a)),e.entries=s(e.entries))}},tSj1:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DesignUserFilter}));var _Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("k1fw"),antd_es_row_style__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("14J3"),antd_es_row__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("BMrR"),antd_es_space_style__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("DYRE"),antd_es_space__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("zeV3"),antd_es_card_style__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("IzEo"),antd_es_card__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("bx4M"),antd_es_tree_style__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ozfa"),antd_es_tree__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("MJZm"),antd_es_col_style__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("jCWc"),antd_es_col__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("kPKH"),_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("oBTY"),_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("tJVT"),antd_es_modal_style__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("2qtc"),antd_es_modal__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("kLXV"),antd_es_message_style__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("miYZ"),antd_es_message__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("tsqr"),react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("q1tI"),react__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_17__),_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("eVqf"),_utils_utils__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("79+z"),_ant_design_icons__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("G3dp"),_ant_design_icons__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("9jjd"),_ant_design_icons__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("ga3A"),_service__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("RfA7"),_widget_ModuleHierarchyChart__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("mzdz"),_DesignUserFilterField__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("OvOj"),_designForm_css__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("Snfz"),_designForm_css__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(_designForm_css__WEBPACK_IMPORTED_MODULE_26__),_moduleUtils__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("jE+T"),_modules__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("WTWM"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("nKUr"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__),getTitle=function(e,t){return e.cls?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])("span",{className:e.cls,children:t||e.text}):t||e.text},farray=["xtype","rows","cols","widths","rowspan","colspan","filtertype","operator","hiddenoperator","othersetting","remark"],getChildNodesArray=function e(t){var n=[];return t.children.forEach((function(t){var a={text:t.text};t.udftitle&&(a.title=t.udftitle),!t.children&&t.itemId&&(a.itemId=t.itemId),farray.forEach((function(e){t[e]&&(a[e]=t[e])})),t.children&&t.children.length&&(a.children=e(t)),(t.itemId||t.children&&t.children.length)&&n.push(a)})),n},saveFilterScheme=function(e,t){var n=t["FDataobject.objectid"];Object(_service__WEBPACK_IMPORTED_MODULE_23__["E"])({dataObjectId:n,filterSchemeId:t.filterschemeid,filterSchemeName:t.schemename,schemeDefine:JSON.stringify(getChildNodesArray(e[0]))}).then((function(e){e.success?(antd_es_message__WEBPACK_IMPORTED_MODULE_16__["default"].success("\u7b5b\u9009\u65b9\u6848\u300e".concat(t.schemename,"\u300f\u5df2\u4fdd\u5b58\u3002")),Object(_modules__WEBPACK_IMPORTED_MODULE_28__["L"])(n)):antd_es_modal__WEBPACK_IMPORTED_MODULE_14__["a"].error({title:"\u7b5b\u9009\u65b9\u6848\u4fdd\u5b58\u5931\u8d25\uff01",width:500,content:e.msg})}))},DesignUserFilter=function DesignUserFilter(_ref){var filterScheme=_ref.filterScheme,moduleName=filterScheme["FDataobject.objectid"],filterschemeid=filterScheme.filterschemeid,hierarchyRef=Object(react__WEBPACK_IMPORTED_MODULE_17__["useRef"])(),form=Object(react__WEBPACK_IMPORTED_MODULE_17__["useRef"])(),_useState=Object(react__WEBPACK_IMPORTED_MODULE_17__["useState"])([]),_useState2=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__["a"])(_useState,2),canSelectTree=_useState2[0],setCanSelectTree=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_17__["useState"])([]),_useState4=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__["a"])(_useState3,2),canSelectTreeCheckedkey=_useState4[0],setCanSelectTreeCheckedkey=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_17__["useState"])([]),_useState6=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__["a"])(_useState5,2),canSelectTreeExpandKey=_useState6[0],setCanSelectTreeExpandKey=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_17__["useState"])([]),_useState8=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__["a"])(_useState7,2),canSelectTreeSelectedKey=_useState8[0],setCanSelectTreeSelectedKey=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_17__["useState"])([]),_useState10=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__["a"])(_useState9,2),details=_useState10[0],setDetails=_useState10[1],_useState11=Object(react__WEBPACK_IMPORTED_MODULE_17__["useState"])([]),_useState12=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__["a"])(_useState11,2),detailsExpandKey=_useState12[0],setDetailsExpandKey=_useState12[1],_useState13=Object(react__WEBPACK_IMPORTED_MODULE_17__["useState"])([]),_useState14=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__["a"])(_useState13,2),detailsSelectedKey=_useState14[0],setDetailsSelectedKey=_useState14[1],_useState15=Object(react__WEBPACK_IMPORTED_MODULE_17__["useState"])({}),_useState16=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__["a"])(_useState15,2),currModule=_useState16[0],setCurrModule=_useState16[1],_useState17=Object(react__WEBPACK_IMPORTED_MODULE_17__["useState"])(!1),_useState18=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__["a"])(_useState17,2),modalVisible=_useState18[0],setModalVisible=_useState18[1],_useState19=Object(react__WEBPACK_IMPORTED_MODULE_17__["useState"])({}),_useState20=Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_12__["a"])(_useState19,2),editRecord=_useState20[0],setEditRecord=_useState20[1],fetchSelectedModuleFields=function(e,t){e!==currModule?(setCurrModule(e),e.moduleName&&Object(_service__WEBPACK_IMPORTED_MODULE_23__["m"])({moduleName:e.moduleName,isChildModule:!!e.isChild,modulePath:e.itemId}).then((function(e){var n=[];e.forEach((function(e){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["d"])(e,{key:e.text,title:getTitle(e)}),n.push(e.key),e.children&&e.children.forEach((function(t){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["d"])(t,{key:t.itemId,title:getTitle(t),parent:e}),t.children&&(n.push(t.key),t.children.forEach((function(e){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["d"])(e,{key:e.itemId,title:getTitle(e),parent:t})})))}))})),setCanSelectTreeCheckedkey([]),setCanSelectTreeExpandKey(n),setCanSelectTree(e),setCanSelectTreeSelectedKey(t||detailsSelectedKey)}))):setCanSelectTreeSelectedKey(t||[])},deleteNode=function(){if(detailsSelectedKey.length){if("root"===detailsSelectedKey[0])return void antd_es_message__WEBPACK_IMPORTED_MODULE_16__["default"].warn("\u4e0d\u80fd\u5220\u9664\u6839\u8282\u70b9\uff01");var e=Object(_moduleUtils__WEBPACK_IMPORTED_MODULE_27__["g"])(details[0].children),t=e.find((function(e){return e.key===detailsSelectedKey[0]}));if(t){if(t.children&&t.children.length)return void antd_es_message__WEBPACK_IMPORTED_MODULE_16__["default"].warn("\u8bf7\u5148\u5220\u9664\u5f53\u524d\u8282\u70b9\u7684\u6240\u6709\u5b50\u8282\u70b9\uff01");if(t.itemId)return void antd_es_message__WEBPACK_IMPORTED_MODULE_16__["default"].warn("\u8bf7\u5728\u53ef\u4f9b\u9009\u62e9\u7684\u5b57\u6bb5\u4e2d\u53d6\u6d88\u52fe\u9009\uff01");var n=t.parent.children;n.splice(n.findIndex((function(e){return e===t})),1),setDetailsSelectedKey([]),setDetails(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_11__["a"])(details))}}else antd_es_message__WEBPACK_IMPORTED_MODULE_16__["default"].warn("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u8282\u70b9\uff01")},getEditTitle=function(e,t){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsxs"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["Fragment"],{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])("span",{className:e.cls,children:t||e.udftitle||e.text}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])(_ant_design_icons__WEBPACK_IMPORTED_MODULE_20__["a"],{className:"editbutton",onClick:function(){setEditRecord(e),setModalVisible(!0)}})]})},changeTextToTitle=function e(t){Array.isArray(t)?t.forEach((function(t){return e(t)})):"[object Object]"===Object.prototype.toString.call(t)&&("root"!==t.key&&(t.title&&Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["d"])(t,{udftitle:t.title}),Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["d"])(t,{title:getEditTitle(t)})),t.children&&(t.children.forEach((function(e){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["d"])(e,{parent:t})})),e(t.children)))},syncSelected=function(e,t){setCanSelectTreeCheckedkey(e),t.checkedNodes.filter((function(e){return!e.children})).forEach((function(e){if(!Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_18__["g"])(details,"itemId").includes(e.itemId)){var t=e.text;currModule.isParent?t="".concat(currModule.qtip,"--").concat(t):currModule.isChild&&(t="".concat(currModule.qtip,"--").concat(e.parent.text,"--").concat(t));var n={key:e.itemId,itemId:e.itemId,text:t,iconCls:e.iconCls,cls:e.cls,icon:e.icon,leaf:!0};n.title=getEditTitle(n,t);var a=details[0].children.find((function(t){return t.text===e.parent.text&&!t.itemId}));a?(a.children||(a.children=[]),n.parent=a,a.children.push(n)):(a={key:Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["I"])(),text:e.parent.text||e.parent.title,udftitle:e.parent.text||e.parent.title,leaf:!1,expanded:!0,xtype:"fieldset",children:[n],parent:details[0]},a.title=getEditTitle(a),n.parent=a,detailsExpandKey.push(a.key),details[0].children.push(a))}})),Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_18__["e"])(canSelectTree).filter((function(e){return!t.checkedNodes.find((function(t){return t===e}))})).forEach((function(e){var t=Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_18__["e"])(details).find((function(t){return t.itemId===e.itemId}));if(t){var n=t.parent.children;n.splice(n.findIndex((function(e){return e.itemId===t.itemId})),1)}})),setDetails(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_11__["a"])(details))};return Object(react__WEBPACK_IMPORTED_MODULE_17__["useEffect"])((function(){var e=Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_18__["g"])(canSelectTree,"itemId"),t=Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_18__["g"])(details,"itemId"),n=e.filter((function(e){return t.find((function(t){return t===e}))}));setCanSelectTreeCheckedkey(n)}),[canSelectTree]),Object(react__WEBPACK_IMPORTED_MODULE_17__["useEffect"])((function(){Object(_service__WEBPACK_IMPORTED_MODULE_23__["j"])({filterSchemeId:filterschemeid}).then((function(e){var t=[{key:"root",children:e.children,title:"\u5df2\u7ecf\u9009\u62e9\u7684\u5b57\u6bb5"}];changeTextToTitle(t),setDetailsExpandKey(Object(_pages_datamining_utils__WEBPACK_IMPORTED_MODULE_18__["f"])(t,"key")),setDetails(t),fetchSelectedModuleFields({moduleName:moduleName})}))}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsxs"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["Fragment"],{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsxs"])(antd_es_row__WEBPACK_IMPORTED_MODULE_2__["a"],{gutter:16,style:{height:"calc(100% )"},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])(antd_es_col__WEBPACK_IMPORTED_MODULE_10__["a"],{lg:12,md:24,sm:24,xs:24,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])(_widget_ModuleHierarchyChart__WEBPACK_IMPORTED_MODULE_24__["a"],{moduleName:moduleName,onClick:function(e){fetchSelectedModuleFields(e)},ref:hierarchyRef})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])(antd_es_col__WEBPACK_IMPORTED_MODULE_10__["a"],{lg:5,md:12,sm:12,xs:24,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])(antd_es_card__WEBPACK_IMPORTED_MODULE_6__["a"],{title:"\u53ef\u4f9b\u9009\u62e9\u7684\u5b57\u6bb5",size:"small",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])(antd_es_tree__WEBPACK_IMPORTED_MODULE_8__["a"],{style:{height:"calc(100vh - 149px)",overflow:"auto"},checkable:!0,showIcon:!0,icon:function(e){return e.iconCls?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])("span",{className:e.iconCls}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])(_ant_design_icons__WEBPACK_IMPORTED_MODULE_21__["a"],{})},treeData:canSelectTree,checkedKeys:canSelectTreeCheckedkey,onCheck:function(e,t){syncSelected(e,t)},expandedKeys:canSelectTreeExpandKey,onExpand:function(e){return setCanSelectTreeExpandKey(e)},selectedKeys:canSelectTreeSelectedKey,onSelect:function(e){setCanSelectTreeSelectedKey(e),setDetailsSelectedKey(e)}})})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])(antd_es_col__WEBPACK_IMPORTED_MODULE_10__["a"],{lg:7,md:12,sm:12,xs:24,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])(antd_es_card__WEBPACK_IMPORTED_MODULE_6__["a"],{title:"\u5df2\u7ecf\u8bbe\u7f6e\u7684\u5206\u7ec4\u548c\u5b57\u6bb5",size:"small",extra:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsxs"])(antd_es_space__WEBPACK_IMPORTED_MODULE_4__["b"],{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])("a",{href:"#",onClick:function(){var e={key:Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["I"])(),udftitle:"\u65b0\u589e\u7684\u5b57\u6bb5\u7ec4",xtype:"fieldset",parent:details[0]};e.title=getEditTitle(e),details[0].children.push(e),setDetails(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_11__["a"])(details))},children:"\u65b0\u589e"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])("a",{href:"#",onClick:function(){return deleteNode()},children:"\u5220\u9664"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])("span",{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])("a",{href:"#",onClick:function(){return saveFilterScheme(details,filterScheme)},children:"\u4fdd\u5b58"})]}),children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])(antd_es_tree__WEBPACK_IMPORTED_MODULE_8__["a"],{className:"selectedgroupandfield",style:{height:"calc(100vh - 149px)",overflow:"auto"},checkable:!1,showLine:!1,showIcon:!0,icon:function(e){return e.iconCls?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])("span",{className:e.iconCls}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])(_ant_design_icons__WEBPACK_IMPORTED_MODULE_21__["a"],{})},draggable:!0,treeData:details,expandedKeys:detailsExpandKey,onExpand:function(e){return setDetailsExpandKey(e)},selectedKeys:detailsSelectedKey,onSelect:function(e,t){setDetailsSelectedKey(e);var n=t.node,a=n.itemId;if(t.selected&&a){var i=a.substring(0,a.indexOf("|"));fetchSelectedModuleFields(hierarchyRef.current.getNodeFromItemId(i),e)}},onDrop:function(e){var t=e.node.key;e.dropToGap&&"root"!==t||e.node.itemId?Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["z"])(details,t,(function(t,n){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["z"])(details,e.dragNode.key,(function(e,a){e.parent.children.splice(a,1),Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["d"])(e,{parent:t.parent}),t.parent.children.splice(n+1,0,e)}))})):Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["z"])(details,t,(function(t){Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["z"])(details,e.dragNode.key,(function(e,n){e.parent.children.splice(n,1),Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["d"])(e,{parent:t}),t.children||(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["d"])(t,{children:[]}),setDetailsExpandKey([].concat(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_11__["a"])(detailsExpandKey),[t.key]))),t.children.unshift(e)}))})),setDetails(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_11__["a"])(details))}})})})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])(antd_es_modal__WEBPACK_IMPORTED_MODULE_14__["a"],{width:820,title:"\u7f16\u8f91\u7b5b\u9009\u5b57\u6bb5\uff1a".concat(editRecord.udftitle||editRecord.text),visible:modalVisible,onCancel:function(){setModalVisible(!1)},okText:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsxs"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["Fragment"],{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])(_ant_design_icons__WEBPACK_IMPORTED_MODULE_22__["a"],{})," \u4fdd\u5b58"]}),onOk:function onOk(){var _form$current$getValu=form.current.getValues(),othersetting=_form$current$getValu.othersetting;if(othersetting){var s=othersetting.startsWith("{")?"".concat(othersetting):"{".concat(othersetting,"}");try{eval("(".concat(s,")"))}catch(e){return void alert("\u9644\u52a0\u8bbe\u7f6e\u89e3\u6790\u9519\u8bef\uff1a".concat(s))}}setModalVisible(!1),Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["d"])(editRecord,form.current.getValues()),editRecord.itemId||Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["d"])(editRecord,{text:editRecord.udftitle}),Object(_utils_utils__WEBPACK_IMPORTED_MODULE_19__["d"])(editRecord,{title:getEditTitle(editRecord)}),setDetails(Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_11__["a"])(details))},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__["jsx"])(_DesignUserFilterField__WEBPACK_IMPORTED_MODULE_25__["a"],{ref:form,moduleName:moduleName,init:Object(_Users_qbs_Documents_quick_build_antd_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},editRecord)})})]})}},"tW+H":function(e,t,n){"use strict";n.r(t),n.d(t,"dataminingList",(function(){return r}));n("q1tI");var a=n("mqE+"),i=n("nKUr"),r=[];t["default"]=function(){return Object(i["jsx"])("div",{style:{margin:"-24px"},children:Object(i["jsx"])(a["b"],{type:"02"})})}},uZXw:function(e,t,n){"use strict";var a=n("k1fw"),i=(n("qVdP"),n("jsC+")),r=n("PpiC"),c=(n("q1tI"),n("TSYQ")),o=n.n(c),s=n("2Fcx"),l=n.n(s),d=n("nKUr"),u=function(e){var t=e.overlayClassName,n=Object(r["a"])(e,["overlayClassName"]);return Object(d["jsx"])(i["a"],Object(a["a"])({overlayClassName:o()(l.a.container,t)},n))};t["a"]=u},vtLx:function(e,t,n){"use strict";var a=n("emvA").getBusinessObject,i=n("emvA").is,r=n("bNQv"),c={};e.exports=c,c.getEventDefinition=function(e,t){var n=a(e),c=null;return n.eventDefinitions&&r(n.eventDefinitions,(function(e){i(e,t)&&(c=e)})),c},c.getTimerEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:TimerEventDefinition")},c.getMessageEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:MessageEventDefinition")},c.getSignalEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:SignalEventDefinition")},c.getErrorEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:ErrorEventDefinition")},c.getEscalationEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:EscalationEventDefinition")},c.getCompensateEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:CompensateEventDefinition")},c.getLinkEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:LinkEventDefinition")},c.getConditionalEventDefinition=function(e){return this.getEventDefinition(e,"bpmn:ConditionalEventDefinition")}},wLFW:function(e,t,n){"use strict";var a=n("6BL2"),i=n("emvA").is,r=n("asz2").getTemplate,c=n("asz2").getTemplateId,o=n("J2m7"),s=n("asz2").TEMPLATE_ATTR;function l(e,t){return t.reduce((function(t,n){return t||i(e,n)}),!1)}function d(e,t,n){var a=r(e,n),i=n.get(t);if(a!==i)return{cmd:"propertiesPanel.flowable.changeTemplate",context:{element:e,oldTemplate:a,newTemplate:i}}}function u(e,t,n){var a=c(e),i={name:"",value:""},r=t.getAll().reduce((function(t,a){return l(e,a.appliesTo)?t.concat({name:n(a.name),value:a.id,isDefault:a.isDefault}):t}),[i]),s=o(r,(function(e){return f(e)})),d=o(r,(function(e){return e.value===a}));if(a&&!d&&(d=p(a,n),r.push(d)),!s)return r;var u=[];return a||u.push({name:"",value:""}),d&&d!==s&&u.push(d),u.push(s),u}function p(e,t){return{name:t("[unknown template: {templateId}]",{templateId:e}),value:e}}function f(e){return e.isDefault}e.exports=function(e,t,n,i){var c=u(t,n,i);(1!==c.length||c[0].isDefault)&&e.entries.push(a.selectBox({id:"elementTemplate-chooser",label:i("Element Template"),modelProperty:"activiti:modelerTemplate",selectOptions:c,set:function(e,t){return d(e,t[s],n)},disabled:function(){var e=r(t,n);return e&&f(e)}}))}},we3Y:function(e,t,n){"use strict";n.d(t,"e",(function(){return S})),n.d(t,"b",(function(){return I})),n.d(t,"c",(function(){return D})),n.d(t,"a",(function(){return k})),n.d(t,"d",(function(){return P}));n("DYRE");var a=n("zeV3"),i=n("oBTY"),r=(n("P2fV"),n("NJEC")),c=(n("2qtc"),n("kLXV")),o=n("tJVT"),s=n("k1fw"),l=(n("5Dmo"),n("3S7+")),d=(n("miYZ"),n("tsqr")),u=(n("tU7J"),n("wFql")),p=n("q1tI"),f=n("FKDb"),m=n("lkk+"),b=n("G3dp"),j=n("Lyp1"),h=n("/MfK"),_=n("RfA7"),O=n("WTWM"),x=n("zVf2"),g=n("TtZX"),v=n("nKUr"),y=u["a"].Text,E=function(e){var t=1,n=e.additionFunctions;return n.forEach((function(e){1!==e.minselectrecordnum||1!==e.maxselectrecordnum||e.menuname||(t+=1)})),Object(O["E"])(e)&&(t+=1),Object(O["D"])(e)&&(t+=1),t},S=function(e){var t=e.moduleInfo,n=e.moduleState,a=e.dispatch,i=e.record,r=t.additionFunctions,c=[];return r.forEach((function(e){1!==e.minselectrecordnum||1!==e.maxselectrecordnum||e.menuname||c.push(Object(v["jsx"])(l["a"],{title:e.title,children:Object(v["jsx"])("a",{children:Object(v["jsx"])("span",{className:e.iconcls,onClick:function(){var r={moduleInfo:t,moduleState:n,dispatch:a,funcDefine:e,record:i};x["a"][e.fcode]?x["a"][e.fcode](r):d["default"].error("".concat(t.title,"\u529f\u80fd\u300e").concat(e.title,"\u300f\u7684\u6267\u884c\u51fd\u6570\u201c").concat(e.fcode,"\u201d\u6ca1\u6709\u627e\u5230\uff01"))}})})},e.fcode))})),c},C=function(e){var t=e.moduleInfo,n=e.record,a=t.modulename,i=t.recordPrintSchemes;return i&&i.length>0?i.filter((function(e){return e.inActions})).map((function(e){return Object(v["jsx"])(l["a"],{title:"\u6253\u5370".concat(e.title),children:Object(v["jsx"])("a",{children:Object(v["jsx"])(f["a"],{onClick:function(){Object(g["b"])({moduleName:a,scheme:e,record:n})}})})},"".concat(e.schemeid,"_printrecord_"))})):[]},I=function(e){var t=e.dispatch,n=e.moduleState,a=e.record,i=n.formState,r=n.moduleName;return Object(v["jsx"])("a",{onClick:function(){t({type:"modules/formStateChanged",payload:{moduleName:r,formState:Object(s["a"])(Object(s["a"])({},i),{},{visible:!0,formType:"display",currRecord:a})}})},children:Object(v["jsx"])(m["a"],{})},"recorddisplay")},D=function(e){var t=e.moduleInfo,n=e.moduleState,a=e.dispatch,i=e.record,r=n.formState,c=n.moduleName,o=Object(O["f"])(t,i);return o.canEdit?Object(v["jsx"])("a",{onClick:function(){a({type:"modules/formStateChanged",payload:{moduleName:c,formState:Object(s["a"])(Object(s["a"])({},r),{},{visible:!0,formType:"edit",currRecord:i})}})},children:Object(v["jsx"])(b["a"],{})},"recordedit"):Object(v["jsx"])(l["a"],{title:o.message,children:Object(v["jsx"])(y,{type:"secondary",style:{cursor:"not-allowed"},children:Object(v["jsx"])(b["a"],{})})},"recorddontedit")},k=function(e){var t=e.moduleInfo,n=e.dispatch,a=e.record,i=Object(p["useState"])(!1),s=Object(o["a"])(i,2),u=s[0],f=s[1],m=Object(p["useState"])(!1),b=Object(o["a"])(m,2),x=b[0],g=b[1],E=a[t.namefield],S=Object(v["jsxs"])("span",{children:[t.title,E?Object(v["jsxs"])(v["Fragment"],{children:["\u300e ",Object(v["jsxs"])("b",{children:[" ",a[t.namefield]]}),"\u300f"]}):""]}),C=function(){var e=t.modulename,i=t.primarykey,r=function(e){return Object(v["jsxs"])("span",{children:[S," ",e]})};g(!0),f(!0),Object(_["b"])({moduleName:e,recordId:a[i]}).then((function(t){return f(!1),g(!1),0===t.resultCode?(d["default"].success(r("\u5df2\u6210\u529f\u5220\u9664\uff01")),n({type:"modules/fetchData",payload:{moduleName:e,forceUpdate:!0}}),!0):(c["a"].warning({okText:"\u77e5\u9053\u4e86",title:r("\u5220\u9664\u5931\u8d25"),content:Object(v["jsx"])("span",{dangerouslySetInnerHTML:{__html:t.message}}),width:500}),null)})).finally((function(){}))},I=Object(O["e"])(t,a);return I.canDelete?Object(v["jsx"])(r["a"],{visible:x,trigger:"click",placement:"topRight",onVisibleChange:function(e){return g(e)},okButtonProps:{loading:u},okType:"danger",okText:"\u5220\u9664",onConfirm:C,onCancel:function(){return g(!1)},icon:Object(v["jsx"])(j["a"],{style:{color:"red"}}),title:Object(v["jsxs"])("span",{style:{paddingBottom:"15px"},children:[" \u786e\u5b9a\u8981\u5220\u9664",S,"\u5417?"]}),children:Object(v["jsx"])("a",{children:Object(v["jsx"])(h["a"],{})})},"recorddelete"):Object(v["jsx"])(l["a"],{title:I.message,children:Object(v["jsx"])(y,{type:"secondary",style:{cursor:"not-allowed"},children:Object(v["jsx"])(h["a"],{})})},"recordnotdelete")},w=function(e){var t=e.moduleInfo,n=S(e);return n.push.apply(n,Object(i["a"])(C(e))),n.push(I(e)),Object(O["E"])(t)&&n.push(D(e)),Object(O["D"])(t)&&n.push(k(e)),Object(v["jsx"])(a["b"],{children:n})},P=function(e){return{title:Object(v["jsx"])("span",{style:{whiteSpace:"nowrap"},children:"\u64cd\u4f5c"}),width:22*E(e.moduleInfo)+20,align:"center",key:"action",fixed:"right",render:function(t,n,a){return Object(v["jsx"])(w,Object(s["a"])(Object(s["a"])({},e),{},{value:t,record:n,recno:a}))}}}},x14f:function(e,t,n){"use strict";var a=n("emvA").is,i=n("emvA").getBusinessObject,r=n("fhoV");e.exports=function(e,t,n,c){var o=i(t);(a(t,"activiti:Process")||a(t,"bpmn:Participant")&&o.get("processRef"))&&(e.entries=e.entries.concat(r(t,n,{getBusinessObject:function(e){var t=i(e);return a(t,"bpmn:Participant")?t.get("processRef"):t}},c)))}},"xB/3":function(e,t,n){"use strict";var a=n("q1tI"),i=n("Lmng"),r=n("kvAW"),c=n("qJlv"),o=n("nKUr"),s=Object(i["b"])(c["a"]),l=function(e){var t=Object(a["useRef"])(s);return Object(o["jsx"])(r["a"],{manager:t.current.dragDropManager,children:e.children})};t["a"]=l},xyw5:function(e,t,n){"use strict";var a=n("emvA").is,i=n("FF3N").isAny,r=n("emvA").getBusinessObject,c=n("ihRo").escapeHTML,o=n("5QZp").query,s=n("hfUJ"),l=n("EWYV"),d=n("vtLx"),u=n("bW/S");e.exports=function(e,t,n,i){var p=r(t);if(p){var m=d.getConditionalEventDefinition(t);if(a(t,"bpmn:SequenceFlow")&&f(t.source)||m){var b=u("language","body",!0,i);e.entries.push({id:"condition",label:i("Condition"),html:'<div class="bpp-row"><label for="cam-condition-type">'+c(i("Condition Type"))+'</label><div class="bpp-field-wrapper"><select id="cam-condition-type" name="conditionType" data-value><option value="expression">'+c(i("Expression"))+'</option><option value="script">'+c(i("Script"))+'</option><option value="" selected></option></select></div></div><div class="bpp-row"><label for="cam-condition" data-show="isExpression">'+c(i("Expression"))+'</label><div class="bpp-field-wrapper" data-show="isExpression"><input id="cam-condition" type="text" name="condition" /><button class="clear" data-action="clear" data-show="canClear"><span>X</span></button></div><div data-show="isScript">'+b.template+"</div></div>",get:function(e,t){var n=d.getConditionalEventDefinition(e),a=n?n.condition:p.conditionExpression,i={},r="";if(a){var c=a.language;"undefined"!==typeof c?(r="script",i=b.get(e,a)):(r="expression",i.condition=a.get("body"))}return i.conditionType=r,i},set:function(e,t,a){var i,r=t.conditionType,c=[],o={body:void 0};if("script"===r)o=b.set(e,t,a);else{var d=t.condition;o.body=d}if(r){i=l.createElement("bpmn:FormalExpression",o,m||p,n);var u=e.source;u&&u.businessObject.default===p&&c.push(s.updateProperties(u,{default:void 0}))}var f=m?{condition:i}:{conditionExpression:i};return c.push(s.updateBusinessObject(e,m||p,f)),c},validate:function(e,t){var n={};return t.condition||"expression"!==t.conditionType?"script"===t.conditionType&&(n=b.validate(e,t)):n.condition=i("Must provide a value"),n},isExpression:function(e,t){var n=o("select[name=conditionType]",t);if(n.selectedIndex>=0)return"expression"===n.options[n.selectedIndex].value},isScript:function(e,t){var n=o("select[name=conditionType]",t);if(n.selectedIndex>=0)return"script"===n.options[n.selectedIndex].value},clear:function(e,t){return o("input[name=condition]",t).value="",!0},canClear:function(e,t){var n=o("input[name=condition]",t);return""!==n.value},script:b,cssClasses:["bpp-textfield"]})}}};var p=["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:ComplexGateway"];function f(e){return i(e,p)}},y2gs:function(e,t,n){"use strict";var a=n("Nw6e"),i=n("EWYV"),r=n("hfUJ"),c=n("ihRo"),o=n("6BL2"),s=n("jd30"),l=n("emvA"),d=l.getBusinessObject,u=n("3OWR"),p={stringValue:void 0,string:void 0,expression:void 0},f="activiti:Field";e.exports=function(e,t,n,l){l=l||{};var m=!!l.insideListener,b=l.idPrefix||"",j=l.getSelectedListener,h=l.businessObject||d(e),_=[],O=function(e,t){return x(e,t)};function x(e,t){var n=I.getSelected(e,t.parentNode);if(-1!==n.idx){var a=g(e,t);return a[n.idx]}}function g(e,t){return m?v(e,t):h&&a.getExtensionElements(h,f)||[]}function v(e,t){var n=j(e,t);return n&&n.fields||[]}function y(e){var t="string",n=e&&e.expression,a=e&&(e.string||e.stringValue);return"undefined"!==typeof a?t="string":"undefined"!==typeof n&&(t="expression"),t}var E=function(){return function(e,t,n,a,i,r){var c=g(e,t),o=c[r];i=o.name?o.name:"<empty>";var s=r+" : "+i;n.text=s}},S=function(){return function(e,n,a,c){var o,s={name:"",string:""};if(m){var l=j(e,c);return o=i.createElement(f,s,l,t),r.addElementsTolist(e,l,"fields",[o])}return o=i.createElement(f,s,n,t),r.addElementsTolist(e,n,"values",[o])}},C=function(){return function(e,t,n,i,c){var o=g(e,c),s=o[i];if(s){if(!m)return a.removeEntry(h,e,s);var l=j(e,c);return r.removeElementsFromList(e,l,"fields",null,[s])}}},I=s(e,t,{id:b+"fields",label:n("Fields"),modelProperty:"fieldName",idGeneration:"false",businessObject:h,createExtensionElement:S(),removeExtensionElement:C(),getExtensionElements:function(e,t){return g(e,t)},setOptionLabelValue:E()});_.push(I),_.push(o.validationAwareTextField({id:b+"field-name",label:n("Name"),modelProperty:"fieldName",getProperty:function(e,t){return(x(e,t)||{}).name},setProperty:function(e,t,n){var a=x(e,n);return r.updateBusinessObject(e,a,{name:t.fieldName})},validate:function(e,t,a){var i=x(e,a),r={};if(i){var o=t.fieldName;o?c.containsSpace(o)&&(r.fieldName=n("Name must not contain spaces")):r.fieldName=n("Parameter must have a name")}return r},hidden:function(e,t){return!O(e,t)}}));var D=[{name:n("String"),value:"string"},{name:n("Expression"),value:"expression"}];return _.push(o.selectBox({id:b+"field-type",label:n("Type"),selectOptions:D,modelProperty:"fieldType",get:function(e,t){var n=x(e,t),a=y(n);return{fieldType:a}},set:function(e,t,n){var a=u({},p),i=t.fieldType;return"string"===i?a.string="":"expression"===i&&(a.expression=""),r.updateBusinessObject(e,x(e,n),a)},hidden:function(e,t){return!O(e,t)}})),_.push(o.textBox({id:b+"field-value",label:n("Value"),modelProperty:"fieldValue",get:function(e,t){var n,a=x(e,t),i=y(a);return"string"===i?n=a&&(a.string||a.stringValue):"expression"===i&&(n=a&&a.expression),{fieldValue:n}},set:function(e,t,n){var a=x(e,n),i=y(a),c=u({},p),o=t.fieldValue||void 0;return"string"===i?c.string=o:"expression"===i&&(c.expression=o),r.updateBusinessObject(e,a,c)},validate:function(e,t,a){var i=x(e,a),r={};return i&&(t.fieldValue||(r.fieldValue=n("Must provide a value"))),r},show:function(e,t){return O(e,t)}})),_}},"yOq+":function(e,t,n){"use strict";var a=n("emvA").is,i=n("vtLx"),r=n("kQYD"),c=n("bNQv");e.exports=function(e,t,n,o){var s=["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:EndEvent"];c(s,(function(c){if(a(t,c)){var s=i.getErrorEventDefinition(t);if(s){var l=a(t,"bpmn:StartEvent")||a(t,"bpmn:BoundaryEvent"),d=l,u=l;r(e,t,n,s,d,u,o)}}}))}},zCwN:function(e,t,n){e.exports={list:"list___1Bcfk",item:"item___1UQri",meta:"meta___17ay5",avatar:"avatar___35uD6",iconElement:"iconElement___2YWai",read:"read___Querz",title:"title___6FQVY",description:"description___2ifEu",datetime:"datetime___IKrkR",extra:"extra___1_Nu2",loadMore:"loadMore___12o4h",loadedAll:"loadedAll___3qZ2d",notFound:"notFound___1yAup",bottomBar:"bottomBar___1SPVP"}},zOnR:function(e,t,n){"use strict";var a=n("emvA").is,i=n("6BL2"),r=n("f6n2"),c=n("EWYV"),o=n("vtLx"),s=n("hfUJ");function l(e){return r.isAsyncBefore(e)}function d(e){return r.isAsyncAfter(e)}function u(e){return r.getFailedJobRetryTimeCycle(e)}function p(e,t){return r.removeFailedJobRetryTimeCycle(e,t)}function f(e,t){return c.createElement("bpmn:ExtensionElements",{values:[]},e,t)}function m(e,t,n){return c.createElement("activiti:FailedJobRetryTimeCycle",{body:n},e,t)}e.exports=function(e,t,n,r){var c=n.getBusinessObject,b=n.idPrefix||"",j=n.labelPrefix||"",h=i.textField({id:b+"retryTimeCycle",label:j+r("Retry Time Cycle"),modelProperty:"cycle",get:function(e,t){var n=u(c(e)),a=n&&n.get("body");return{cycle:a}},set:function(e,n,a){var i=n.cycle,r=c(e);if(""===i||"undefined"===typeof i)return p(r,e);var o=u(r);if(!o){var l=[],d=r.get("extensionElements");return d||(d=f(r,t),l.push(s.updateBusinessObject(e,r,{extensionElements:d}))),o=m(d,t,i),l.push(s.addAndRemoveElementsFromList(e,d,"values","extensionElements",[o],[])),l}return s.updateBusinessObject(e,o,{body:i})},hidden:function(e){var t=c(e);return(!t||!l(t)&&!d(t))&&(!a(e,"bpmn:Event")||!o.getTimerEventDefinition(e))}});return[h]}},zVf2:function(e,t,n){"use strict";n.d(t,"a",(function(){return Gt}));var a=n("tJVT"),i=(n("IzEo"),n("bx4M")),r=(n("miYZ"),n("tsqr")),c=(n("2qtc"),n("kLXV")),o=n("RCxd"),s=n("G3dp"),l=n("sy1d"),d=n("79+z"),u=n("bx7e"),p=n("L8Vn"),f=n.n(p),m=n("OOGe"),b=n("4kom"),j=(n("/xke"),n("TeRw")),h=n("cCTX"),_=n("h/KA"),O=n("P7XM"),x=n.n(O),g={"Activate the global connect tool":"\u6fc0\u6d3b\u5168\u5c40\u8fde\u63a5\u5de5\u5177",Append:"\u8ffd\u52a0","Append {type}":"\u6dfb\u52a0 {type}","Append EndEvent":"\u8ffd\u52a0 \u7ed3\u675f\u4e8b\u4ef6 ","Append Task":"\u8ffd\u52a0 \u4efb\u52a1","Append Gateway":"\u8ffd\u52a0 \u7f51\u5173","Append Intermediate/Boundary Event":"\u8ffd\u52a0 \u4e2d\u95f4/\u8fb9\u754c \u4e8b\u4ef6","Add Lane above":"\u5728\u4e0a\u9762\u6dfb\u52a0\u9053","Divide into two Lanes":"\u5206\u5272\u6210\u4e24\u4e2a\u9053","Divide into three Lanes":"\u5206\u5272\u6210\u4e09\u4e2a\u9053","Add Lane below":"\u5728\u4e0b\u9762\u6dfb\u52a0\u9053","Append compensation activity":"\u8ffd\u52a0\u8865\u507f\u6d3b\u52a8","Change type":"\u4fee\u6539\u7c7b\u578b","Connect using Association":"\u4f7f\u7528\u5173\u8054\u8fde\u63a5","Connect using Sequence/MessageFlow or Association":"\u4f7f\u7528\u987a\u5e8f/\u6d88\u606f\u6d41\u6216\u8005\u5173\u8054\u8fde\u63a5","Connect using DataInputAssociation":"\u4f7f\u7528\u6570\u636e\u8f93\u5165\u5173\u8054\u8fde\u63a5",Remove:"\u79fb\u9664","Activate the hand tool":"\u6fc0\u6d3b\u6293\u624b\u5de5\u5177","Activate the lasso tool":"\u6fc0\u6d3b\u5957\u7d22\u5de5\u5177","Activate the create/remove space tool":"\u6fc0\u6d3b\u521b\u5efa/\u5220\u9664\u7a7a\u95f4\u5de5\u5177","Create expanded SubProcess":"\u521b\u5efa\u6269\u5c55\u5b50\u8fc7\u7a0b","Create IntermediateThrowEvent/BoundaryEvent":"\u521b\u5efa\u4e2d\u95f4\u629b\u51fa\u4e8b\u4ef6/\u8fb9\u754c\u4e8b\u4ef6","Create Pool/Participant":"\u521b\u5efa\u6c60/\u53c2\u4e0e\u8005","Parallel Multi Instance":"\u5e76\u884c\u591a\u91cd\u4e8b\u4ef6","Sequential Multi Instance":"\u65f6\u5e8f\u591a\u91cd\u4e8b\u4ef6",DataObjectReference:"\u6570\u636e\u5bf9\u8c61\u53c2\u8003",DataStoreReference:"\u6570\u636e\u5b58\u50a8\u53c2\u8003",Loop:"\u5faa\u73af","Ad-hoc":"\u5373\u5e2d","Create {type}":"\u521b\u5efa {type}","Create Group":"\u521b\u5efa\u7ec4",Task:"\u4efb\u52a1",Process:"\u6d41\u7a0b",UserTask:"\u7528\u6237\u4efb\u52a1","Send Task":"\u53d1\u9001\u4efb\u52a1","Receive Task":"\u63a5\u6536\u4efb\u52a1","User Task":"\u7528\u6237\u4efb\u52a1","Manual Task":"\u624b\u5de5\u4efb\u52a1","Business Rule Task":"\u4e1a\u52a1\u89c4\u5219\u4efb\u52a1","Service Task":"\u670d\u52a1\u4efb\u52a1","Script Task":"\u811a\u672c\u4efb\u52a1","Call Activity":"\u8c03\u7528\u6d3b\u52a8",CallActivity:"\u8c03\u7528\u6d3b\u52a8","Sub Process (collapsed)":"\u5b50\u6d41\u7a0b\uff08\u6298\u53e0\u7684\uff09","Sub Process (expanded)":"\u5b50\u6d41\u7a0b\uff08\u5c55\u5f00\u7684\uff09","Start Event":"\u5f00\u59cb\u4e8b\u4ef6",StartEvent:"\u5f00\u59cb\u4e8b\u4ef6","Intermediate Throw Event":"\u4e2d\u95f4\u4e8b\u4ef6","End Event":"\u7ed3\u675f\u4e8b\u4ef6",EndEvent:"\u7ed3\u675f\u4e8b\u4ef6","Create Gateway":"\u521b\u5efa\u7f51\u5173",GateWay:"\u7f51\u5173","Create Intermediate/Boundary Event":"\u521b\u5efa\u4e2d\u95f4/\u8fb9\u754c\u4e8b\u4ef6","Message Start Event":"\u6d88\u606f\u5f00\u59cb\u4e8b\u4ef6","Timer Start Event":"\u5b9a\u65f6\u5f00\u59cb\u4e8b\u4ef6","Conditional Start Event":"\u6761\u4ef6\u5f00\u59cb\u4e8b\u4ef6","Signal Start Event":"\u4fe1\u53f7\u5f00\u59cb\u4e8b\u4ef6","Error Start Event":"\u9519\u8bef\u5f00\u59cb\u4e8b\u4ef6","Escalation Start Event":"\u5347\u7ea7\u5f00\u59cb\u4e8b\u4ef6","Compensation Start Event":"\u8865\u507f\u5f00\u59cb\u4e8b\u4ef6","Message Start Event (non-interrupting)":"\u6d88\u606f\u5f00\u59cb\u4e8b\u4ef6\uff08\u975e\u4e2d\u65ad\uff09","Timer Start Event (non-interrupting)":"\u5b9a\u65f6\u5f00\u59cb\u4e8b\u4ef6\uff08\u975e\u4e2d\u65ad\uff09","Conditional Start Event (non-interrupting)":"\u6761\u4ef6\u5f00\u59cb\u4e8b\u4ef6\uff08\u975e\u4e2d\u65ad\uff09","Signal Start Event (non-interrupting)":"\u4fe1\u53f7\u5f00\u59cb\u4e8b\u4ef6\uff08\u975e\u4e2d\u65ad\uff09","Escalation Start Event (non-interrupting)":"\u5347\u7ea7\u5f00\u59cb\u4e8b\u4ef6\uff08\u975e\u4e2d\u65ad\uff09","Message Intermediate Catch Event":"\u6d88\u606f\u4e2d\u95f4\u6355\u83b7\u4e8b\u4ef6","Message Intermediate Throw Event":"\u6d88\u606f\u4e2d\u95f4\u629b\u51fa\u4e8b\u4ef6","Timer Intermediate Catch Event":"\u5b9a\u65f6\u4e2d\u95f4\u6355\u83b7\u4e8b\u4ef6","Escalation Intermediate Throw Event":"\u5347\u7ea7\u4e2d\u95f4\u629b\u51fa\u4e8b\u4ef6","Conditional Intermediate Catch Event":"\u6761\u4ef6\u4e2d\u95f4\u6355\u83b7\u4e8b\u4ef6","Link Intermediate Catch Event":"\u94fe\u63a5\u4e2d\u95f4\u6355\u83b7\u4e8b\u4ef6","Link Intermediate Throw Event":"\u94fe\u63a5\u4e2d\u95f4\u629b\u51fa\u4e8b\u4ef6","Compensation Intermediate Throw Event":"\u8865\u507f\u4e2d\u95f4\u629b\u51fa\u4e8b\u4ef6","Signal Intermediate Catch Event":"\u4fe1\u53f7\u4e2d\u95f4\u6355\u83b7\u4e8b\u4ef6","Signal Intermediate Throw Event":"\u4fe1\u53f7\u4e2d\u95f4\u629b\u51fa\u4e8b\u4ef6","Message End Event":"\u6d88\u606f\u7ed3\u675f\u4e8b\u4ef6","Escalation End Event":"\u5b9a\u65f6\u7ed3\u675f\u4e8b\u4ef6","Error End Event":"\u9519\u8bef\u7ed3\u675f\u4e8b\u4ef6","Cancel End Event":"\u53d6\u6d88\u7ed3\u675f\u4e8b\u4ef6","Compensation End Event":"\u8865\u507f\u7ed3\u675f\u4e8b\u4ef6","Signal End Event":"\u4fe1\u53f7\u7ed3\u675f\u4e8b\u4ef6","Terminate End Event":"\u7ec8\u6b62\u7ed3\u675f\u4e8b\u4ef6","Message Boundary Event":"\u6d88\u606f\u8fb9\u754c\u4e8b\u4ef6","Message Boundary Event (non-interrupting)":"\u6d88\u606f\u8fb9\u754c\u4e8b\u4ef6\uff08\u975e\u4e2d\u65ad\uff09","Timer Boundary Event":"\u5b9a\u65f6\u8fb9\u754c\u4e8b\u4ef6","Timer Boundary Event (non-interrupting)":"\u5b9a\u65f6\u8fb9\u754c\u4e8b\u4ef6\uff08\u975e\u4e2d\u65ad\uff09","Escalation Boundary Event":"\u5347\u7ea7\u8fb9\u754c\u4e8b\u4ef6","Escalation Boundary Event (non-interrupting)":"\u5347\u7ea7\u8fb9\u754c\u4e8b\u4ef6\uff08\u975e\u4e2d\u65ad\uff09","Conditional Boundary Event":"\u6761\u4ef6\u8fb9\u754c\u4e8b\u4ef6","Conditional Boundary Event (non-interrupting)":"\u6761\u4ef6\u8fb9\u754c\u4e8b\u4ef6\uff08\u975e\u4e2d\u65ad\uff09","Error Boundary Event":"\u9519\u8bef\u8fb9\u754c\u4e8b\u4ef6","Cancel Boundary Event":"\u53d6\u6d88\u8fb9\u754c\u4e8b\u4ef6","Signal Boundary Event":"\u4fe1\u53f7\u8fb9\u754c\u4e8b\u4ef6","Signal Boundary Event (non-interrupting)":"\u4fe1\u53f7\u8fb9\u754c\u4e8b\u4ef6\uff08\u975e\u4e2d\u65ad\uff09","Compensation Boundary Event":"\u8865\u507f\u8fb9\u754c\u4e8b\u4ef6","Exclusive Gateway":"\u4e92\u65a5\u7f51\u5173",ExclusiveGateway:"\u4e92\u65a5\u7f51\u5173","Parallel Gateway":"\u5e76\u884c\u7f51\u5173",ParallelGateway:"\u5e76\u884c\u7f51\u5173","Inclusive Gateway":"\u76f8\u5bb9\u7f51\u5173",InclusiveGateway:"\u76f8\u5bb9\u7f51\u5173","Complex Gateway":"\u590d\u6742\u7f51\u5173","Event based Gateway":"\u4e8b\u4ef6\u7f51\u5173",Transaction:"\u8f6c\u8fd0","Sub Process":"\u5b50\u6d41\u7a0b","Event Sub Process":"\u4e8b\u4ef6\u5b50\u6d41\u7a0b","Collapsed Pool":"\u6298\u53e0\u6c60","Expanded Pool":"\u5c55\u5f00\u6c60","no parent for {element} in {parent}":"\u5728{parent}\u91cc\uff0c{element}\u6ca1\u6709\u7236\u7c7b","no shape type specified":"\u6ca1\u6709\u6307\u5b9a\u7684\u5f62\u72b6\u7c7b\u578b","flow elements must be children of pools/participants":"\u6d41\u5143\u7d20\u5fc5\u987b\u662f\u6c60/\u53c2\u4e0e\u8005\u7684\u5b50\u7c7b","out of bounds release":"out of bounds release","more than {count} child lanes":"\u5b50\u9053\u5927\u4e8e{count} ","element required":"\u5143\u7d20\u4e0d\u80fd\u4e3a\u7a7a","diagram not part of bpmn:Definitions":"\u6d41\u7a0b\u56fe\u4e0d\u7b26\u5408bpmn\u89c4\u8303","no diagram to display":"\u6ca1\u6709\u53ef\u5c55\u793a\u7684\u6d41\u7a0b\u56fe","no process or collaboration to display":"\u6ca1\u6709\u53ef\u5c55\u793a\u7684\u6d41\u7a0b/\u534f\u4f5c","element {element} referenced by {referenced}#{property} not yet drawn":"\u7531{referenced}#{property}\u5f15\u7528\u7684{element}\u5143\u7d20\u4ecd\u672a\u7ed8\u5236","already rendered {element}":"{element} \u5df2\u88ab\u6e32\u67d3","failed to import {element}":"\u5bfc\u5165{element}\u5931\u8d25",Id:"\u7f16\u53f7",Name:"\u540d\u79f0",General:"\u5e38\u89c4",Details:"\u8be6\u60c5","Message Name":"\u6d88\u606f\u540d\u79f0",Message:"\u6d88\u606f",Initiator:"\u521b\u5efa\u8005","Asynchronous Continuations":"\u6301\u7eed\u5f02\u6b65","Asynchronous Before":"\u5f02\u6b65\u524d","Asynchronous After":"\u5f02\u6b65\u540e","Job Configuration":"\u5de5\u4f5c\u914d\u7f6e",Exclusive:"\u6392\u9664","Job Priority":"\u5de5\u4f5c\u4f18\u5148\u7ea7","Retry Time Cycle":"\u91cd\u8bd5\u65f6\u95f4\u5468\u671f",Documentation:"\u6587\u6863","Element Documentation":"\u5143\u7d20\u6587\u6863","History Configuration":"\u5386\u53f2\u914d\u7f6e","History Time To Live":"\u5386\u53f2\u7684\u751f\u5b58\u65f6\u95f4","Start Time":"\u5f00\u59cb\u65f6\u95f4",continuedTime:"\u6301\u7eed\u65f6\u95f4","create class":"\u4efb\u52a1\u521b\u5efa\u76d1\u542c\u7c7b","Listener Id":"\u76d1\u542c\u5668\u7f16\u53f7",create_delegateExpression:"\u4efb\u52a1\u521b\u5efa\u76d1\u542c\u59d4\u6258\u8868\u8fbe\u5f0f",assignmentClass:"\u5206\u914d\u76d1\u542c\u7c7b",assignmentDelegateExpression:"\u5206\u914d\u76d1\u542c\u59d4\u6258\u8868\u8fbe\u5f0f",completeClassEntry:"\u5b8c\u6210\u76d1\u542c\u7c7b",completeDelegateExpression:"\u5b8c\u6210\u76d1\u542c\u59d4\u6258\u8868\u8fbe\u5f0f",deleteClass:"\u5220\u9664\u76d1\u542c\u7c7b",deleteDelegateExpression:"\u5220\u9664\u76d1\u542c\u59d4\u6258\u8868\u8fbe\u5f0f","Execution Class":"\u6267\u884c\u7c7b",expression:"\u8868\u8fbe\u5f0f","delegate Expression":"\u59d4\u6258\u8868\u8fbe\u5f0f",approvalBtn:"\u5ba1\u6279\u610f\u89c1\u7c7b\u578b","assignee List":"\u6267\u884c\u4eba","node Type":"\u8282\u70b9\u7c7b\u578b",transConditions:"\u81ea\u52a8\u8f6c\u624b\u52a8\u8f6c\u6362\u6761\u4ef6",loopTime:"\u5faa\u73af\u65f6\u95f4","start Configuration":"\u542f\u52a8\u914d\u7f6e","end Configuration":"\u7ed3\u675f\u914d\u7f6e","service Task":"\u670d\u52a1\u4efb\u52a1\u914d\u7f6e",Forms:"\u8868\u5355","Form Key":"\u8868\u5355key","Form Fields":"\u8868\u5355\u5b57\u6bb5","Business Key":"\u4e1a\u52a1key","Form Field":"\u8868\u5355\u5b57\u6bb5",ID:"\u7f16\u53f7",Type:"\u7c7b\u578b",Label:"\u540d\u79f0","Default Value":"\u9ed8\u8ba4\u503c",Validation:"\u6821\u9a8c","Add Constraint":"\u6dfb\u52a0\u7ea6\u675f",Config:"\u914d\u7f6e",Properties:"\u5c5e\u6027","Add Property":"\u6dfb\u52a0\u5c5e\u6027",Value:"\u503c",Add:"\u6dfb\u52a0",Values:"\u503c","Add Value":"\u6dfb\u52a0\u503c",Listeners:"\u76d1\u542c\u5668","Execution Listener":"\u6267\u884c\u76d1\u542c","Event Type":"\u4e8b\u4ef6\u7c7b\u578b","Listener Type":"\u76d1\u542c\u5668\u7c7b\u578b","Java Class":"Java\u7c7b",Expression:"\u8868\u8fbe\u5f0f","Must provide a value":"\u5fc5\u987b\u63d0\u4f9b\u4e00\u4e2a\u503c","Delegate Expression":"\u4ee3\u7406\u8868\u8fbe\u5f0f",Script:"\u811a\u672c","Script Format":"\u811a\u672c\u683c\u5f0f","Script Type":"\u811a\u672c\u7c7b\u578b","Inline Script":"\u5185\u8054\u811a\u672c","External Script":"\u5916\u90e8\u811a\u672c","External Resource":"\u5916\u90e8\u8d44\u6e90",Resource:"\u8d44\u6e90","Field Injection":"\u5b57\u6bb5\u6ce8\u5165",Extensions:"\u6269\u5c55","Input/Output":"\u8f93\u5165/\u8f93\u51fa","event Configure":"\u4e8b\u4ef6\u914d\u7f6e","Input Parameters":"\u8f93\u5165\u53c2\u6570","Output Parameters":"\u8f93\u51fa\u53c2\u6570",Parameters:"\u53c2\u6570","Output Parameter":"\u8f93\u51fa\u53c2\u6570","Timer Definition Type":"\u5b9a\u65f6\u5668\u5b9a\u4e49\u7c7b\u578b","Timer Definition":"\u5b9a\u65f6\u5668\u5b9a\u4e49",Date:"\u65e5\u671f",Duration:"\u6301\u7eed",Cycle:"\u5faa\u73af",Signal:"\u4fe1\u53f7","Signal Name":"\u4fe1\u53f7\u540d\u79f0",Escalation:"\u5347\u7ea7",Error:"\u9519\u8bef","Link Name":"\u94fe\u63a5\u540d\u79f0",Condition:"\u6761\u4ef6\u540d\u79f0","Variable Name":"\u53d8\u91cf\u540d\u79f0","Variable Event":"\u53d8\u91cf\u4e8b\u4ef6","Specify more than one variable change event as a comma separated list.":"\u591a\u4e2a\u53d8\u91cf\u4e8b\u4ef6\u4ee5\u9017\u53f7\u9694\u5f00","Wait for Completion":"\u7b49\u5f85\u5b8c\u6210","Activity Ref":"\u6d3b\u52a8\u53c2\u8003","Version Tag":"\u7248\u672c\u6807\u7b7e","end configure":"\u7ed3\u675f\u914d\u7f6e",Executable:"\u53ef\u6267\u884c\u6587\u4ef6","External Task Configuration":"\u6269\u5c55\u4efb\u52a1\u914d\u7f6e","Task Priority":"\u4efb\u52a1\u4f18\u5148\u7ea7",External:"\u5916\u90e8",Connector:"\u8fde\u63a5\u5668","Must configure Connector":"\u5fc5\u987b\u914d\u7f6e\u8fde\u63a5\u5668","Connector Id":"\u8fde\u63a5\u5668\u7f16\u53f7",Implementation:"\u5b9e\u73b0\u65b9\u5f0f","Field Injections":"\u5b57\u6bb5\u6ce8\u5165",Fields:"\u5b57\u6bb5","Result Variable":"\u7ed3\u679c\u53d8\u91cf",Topic:"\u4e3b\u9898","Configure Connector":"\u914d\u7f6e\u8fde\u63a5\u5668","Input Parameter":"\u8f93\u5165\u53c2\u6570",Assignee:"\u4ee3\u7406\u4eba","Candidate Users":"\u5019\u9009\u7528\u6237","Candidate Groups":"\u5019\u9009\u7ec4(\u5373\u5c97\u4f4d)","Due Date":"\u5230\u671f\u65f6\u95f4","Follow Up Date":"\u8ddf\u8e2a\u65e5\u671f",Priority:"\u4f18\u5148\u7ea7","The follow up date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"\u8ddf\u8e2a\u65e5\u671f\u5fc5\u987b\u7b26\u5408EL\u8868\u8fbe\u5f0f\uff0c\u5982\uff1a ${someDate} ,\u6216\u8005\u4e00\u4e2aISO\u6807\u51c6\u65e5\u671f\uff0c\u5982\uff1a2015-06-26T09:54:00","The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"\u8ddf\u8e2a\u65e5\u671f\u5fc5\u987b\u7b26\u5408EL\u8868\u8fbe\u5f0f\uff0c\u5982\uff1a ${someDate} ,\u6216\u8005\u4e00\u4e2aISO\u6807\u51c6\u65e5\u671f\uff0c\u5982\uff1a2015-06-26T09:54:00",Variables:"\u53d8\u91cf","Candidate Starter Configuration":"\u5019\u9009\u5f00\u59cb\u914d\u7f6e","Task Listener":"\u4efb\u52a1\u76d1\u542c\u5668","Candidate Starter Groups":"\u5019\u9009\u5f00\u59cb\u7ec4","Candidate Starter Users":"\u5019\u9009\u5f00\u59cb\u7528\u6237","Tasklist Configuration":"\u4efb\u52a1\u5217\u8868\u914d\u7f6e",Startable:"\u542f\u52a8","Specify more than one group as a comma separated list.":"\u6307\u5b9a\u591a\u4e2a\u7ec4,\u7528\u9017\u53f7\u5206\u9694","Specify more than one user as a comma separated list.":"\u6307\u5b9a\u591a\u4e2a\u7528\u6237,\u7528\u9017\u53f7\u5206\u9694","Specify more than one user as a comma separated list..":"\u6307\u5b9a\u591a\u4e2a\u6267\u884c\u4eba,\u7528\u9017\u53f7\u5206\u9694(\u624b\u52a8\u7c7b\u578b)","This maps to the process definition key.":"\u8fd9\u4f1a\u6620\u5c04\u4e3a\u6d41\u7a0b\u5b9a\u4e49\u7684\u952e(\u8bf7\u52ff\u4fee\u6539)","CallActivity Type":"\u8c03\u7528\u6d3b\u52a8\u7c7b\u578b","Create CallActivity":"\u521b\u5efa\u8c03\u7528\u6d3b\u52a8","Called Element":"\u8c03\u7528\u5143\u7d20","Create DataObjectReference":"\u521b\u5efa\u6570\u636e\u5bf9\u8c61\u5f15\u7528","Create DataStoreReference":"\u521b\u5efa\u6570\u636e\u5b58\u50a8\u5f15\u7528","Multi Instance":"\u591a\u5b9e\u4f8b","Loop Cardinality":"\u5b9e\u4f8b\u6570\u91cf",Collection:"\u4efb\u52a1\u53c2\u4e0e\u4eba\u5217\u8868","Element Variable":"\u5143\u7d20\u53d8\u91cf","Completion Condition":"\u5b8c\u6210\u6761\u4ef6","Append CallActivity":"\u8ffd\u52a0 \u8c03\u7528\u6d3b\u52a8",Binding:"\u7ed1\u5b9a","Tenant Id":"\u79df\u6237ID","This maps to the task definition key.":"\u8fd9\u4f1a\u6620\u5c04\u4e3a\u4efb\u52a1\u5b9a\u4e49\u7684key","Form field id must not be empty":"\u8868\u5355\u5b57\u6bb5\u4e0d\u80fd\u4e3a\u7a7a","Form field id already used in form data.":"\u8868\u5355\u4e2d\u5df2\u7ecf\u5b58\u5728\u8be5\u5b57\u6bb5","Must provide either loop cardinality or collection":"\u5fc5\u987b\u63d0\u4f9b\u5b9e\u4f8b\u6570\u91cf\u6216\u8005\u4efb\u52a1\u53c2\u4e0e\u4eba\u5217\u8868","Select UserTask":"\u9009\u62e9\u4e00\u4e2a\u5df2\u7ecf\u914d\u7f6e\u7684\u7528\u6237\u4efb\u52a1","Element must have an unique id.":"\u5143\u7d20\u5fc5\u987b\u8981\u6709\u4e00\u4e2a\u552f\u4e00\u7684id",create:"\u521b\u5efa",assignment:"\u4ee3\u7406",complete:"\u5b8c\u6210",delete:"\u5220\u9664",update:"\u66f4\u65b0",timeout:"\u8d85\u65f6",start:"\u5f00\u59cb",end:"\u7ed3\u675f",save:"\u4fdd\u5b58",Tools:"\u5de5\u5177",FlowGateway:"\u6d41\u7a0b\u7f51\u5173",ProcessControl:"\u6d41\u7a0b\u8282\u70b9","Create StartEvent":"\u5f00\u59cb\u8282\u70b9","Create EndEvent":"\u7ed3\u675f\u8282\u70b9","Create ExclusiveGateway":"\u4e92\u65a5\u7f51\u5173","Create ParallelGateway":"\u5e76\u884c\u7f51\u5173","Create InclusiveGateway":"\u5305\u5bb9\u6027\u7f51\u5173","Create Task":"\u4efb\u52a1\u8282\u70b9","Create UserTask":"\u7528\u6237\u4efb\u52a1\u8282\u70b9","Create ServiceTask":"\u670d\u52a1\u4efb\u52a1\u8282\u70b9","Condition Type":"\u6761\u4ef6\u7c7b\u578b","Sequence flow is missing condition":"\u6d41\u7a0b\u7ebf\u7f3a\u5c11\u6d41\u7a0b\u6761\u4ef6"," is missing end event":"\u7f3a\u5c11\u7ed3\u675f\u8282\u70b9","Start event is missing event definition":"\u5f00\u59cb\u4e8b\u4ef6\u7f3a\u5c11\u4e8b\u4ef6\u5b9a\u4e49","Incoming flows do not join":"\u4f20\u5165\u6d41\u6ca1\u5408\u5e76","Element is missing label/name":"\u5143\u7d20\u7f3a\u5c11\u6807\u7b7e/\u540d\u79f0","Element has disallowed type":"\u5143\u7d20\u5177\u6709\u4e0d\u5141\u8bb8\u7684\u7c7b\u578b","Element is not connected":"\u5143\u7d20\u672a\u8fde\u63a5","Element is not left connected":"\u5143\u7d20\u6ca1\u6709\u5de6\u8fde\u63a5","Element is not right connected":"\u5143\u7d20\u6ca1\u6709\u53f3\u8fde\u63a5","SequenceFlow is a duplicate":"SequenceFlow\u662f\u91cd\u590d\u7684","Duplicate outgoing sequence flows":"\u91cd\u590d\u7684\u4f20\u51fa\u5e8f\u5217\u6d41","Duplicate incoming sequence flows":"\u91cd\u590d\u7684\u4f20\u5165\u5e8f\u5217\u6d41","Gateway forks and joins":"\u540c\u65f6\u5206\u53c9\u548c\u5408\u5e76\u7684\u7f51\u5173","Flow splits implicitly":"\u6d41\u9690\u5f0f\u62c6\u5206"," has multiple blank start events":"\u6709\u591a\u4e2a\u7a7a\u5f00\u59cb\u4e8b\u4ef6","Event has multiple event definitions":"\u4e8b\u4ef6\u5177\u6709\u591a\u4e2a\u4e8b\u4ef6\u5b9a\u4e49"," is missing start event":"\u7f3a\u5c11\u5f00\u59cb\u4e8b\u4ef6","Start event must be blank":"\u5f00\u59cb\u4e8b\u4ef6\u5fc5\u987b\u4e3a\u7a7a","Gateway is superfluous. It only has one source and target.":"\u7f51\u5173\u662f\u591a\u4f59\u7684\u3002\u5b83\u53ea\u6709\u4e00\u4e2a\u6e90\u548c\u76ee\u6807","":""};function v(e,t){return t=t||{},e=g[e]||e,e.replace(/{([^}]+)}/g,(function(e,n){return t[n]||"{".concat(n,"}")}))}var y={__init__:["translate"],translate:["value",v]};function E(e){h["a"].call(this,e),this.customElements=[]}function S(e){return"custom:connection"===e.type}x()(E,h["a"]),E.prototype._modules=[].concat(E.prototype._modules,[y]),E.prototype.addCustomShape=function(e){this.customElements.push(e);var t=this.get("canvas"),n=this.get("elementFactory"),a=Object(_["assign"])({businessObject:e},e),i=n.create("shape",a);return t.addShape(i)},E.prototype.addCustomConnection=function(e){this.customElements.push(e);var t=this.get("canvas"),n=this.get("elementFactory"),a=this.get("elementRegistry"),i=Object(_["assign"])({businessObject:e},e),r=n.create("connection",Object(_["assign"])(i,{source:a.get(e.source),target:a.get(e.target)}),a.get(e.source).parent);return t.addConnection(r)},E.prototype.addCustomElements=function(e){if(!Object(_["isArray"])(e))throw new Error("argument must be an array");var t=[],n=[];e.forEach((function(e){S(e)?n.push(e):t.push(e)})),t.forEach(this.addCustomShape,this),n.forEach(this.addCustomConnection,this)},E.prototype.getCustomElements=function(){return this.customElements};n("+RAA"),n("LBNl"),n("5/YH"),n("Hp7O"),n("4ngf"),n("Ti6Z");function C(e,t){var n='<?xml version="1.0" encoding="UTF-8"?>\n    <definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" \n\t    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" \n\t    xmlns:xsd="http://www.w3.org/2001/XMLSchema" \n\t    xmlns:activiti="http://activiti.org/bpmn" \n\t    xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" \n\t    xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" \n\t    xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" \n\t    typeLanguage="http://www.w3.org/2001/XMLSchema" \n\t    expressionLanguage="http://www.w3.org/1999/XPath" \n\t    targetNamespace="http://www.activiti.org/test">\n      <process id="'.concat(e,'" name="').concat(t,'" isExecutable="true">\n      </process>\n      <bpmndi:BPMNDiagram id="BPMNDiagram_1" >\n        <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">\n        </bpmndi:BPMNPlane>\n      </bpmndi:BPMNDiagram>\n    </definitions>');return n}var I=n("fWQN"),D=n("mtLc"),k=n("yKVA"),w=n("879j"),P=n("q1tI"),T=n("rzUZ"),M=n.n(T),A=n("nKUr"),R=function(e){Object(k["a"])(n,e);var t=Object(w["a"])(n);function n(){var e;Object(I["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),e.handleOpen=function(){e.file.click()},e}return Object(D["a"])(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onOpenFIle,a=t.onZoomIn,i=t.onZoomOut,r=t.onZoomReset,c=t.onUndo,o=t.onRedo,s=t.onDownloadXml,l=t.onDownloadSvg;t.onPreviewXml;return Object(A["jsx"])("div",{className:M.a.editingTools,children:Object(A["jsxs"])("ul",{className:M.a.controlList,children:[Object(A["jsxs"])("li",{className:"".concat(M.a.control," ").concat(M.a.line),children:[Object(A["jsx"])("input",{ref:function(t){e.file=t},className:M.a.openFile,type:"file",onChange:n}),Object(A["jsx"])("button",{type:"button",title:"\u6253\u5f00BPMN\u6587\u4ef6",onClick:this.handleOpen,children:Object(A["jsx"])("i",{className:M.a.open})})]}),Object(A["jsx"])("li",{className:M.a.control,children:Object(A["jsx"])("button",{type:"button",title:"\u64a4\u9500",onClick:c,children:Object(A["jsx"])("i",{className:M.a.undo})})}),Object(A["jsx"])("li",{className:"".concat(M.a.control," ").concat(M.a.line),children:Object(A["jsx"])("button",{type:"button",title:"\u6062\u590d",onClick:o,children:Object(A["jsx"])("i",{className:M.a.redo})})}),Object(A["jsx"])("li",{className:M.a.control,children:Object(A["jsx"])("button",{type:"button",title:"\u91cd\u7f6e\u5927\u5c0f",onClick:r,children:Object(A["jsx"])("i",{className:M.a.zoom})})}),Object(A["jsx"])("li",{className:M.a.control,children:Object(A["jsx"])("button",{type:"button",title:"\u653e\u5927",onClick:a,children:Object(A["jsx"])("i",{className:M.a.zoomIn})})}),Object(A["jsx"])("li",{className:"".concat(M.a.control," ").concat(M.a.line),children:Object(A["jsx"])("button",{type:"button",title:"\u7f29\u5c0f",onClick:i,children:Object(A["jsx"])("i",{className:M.a.zoomOut})})}),Object(A["jsx"])("li",{className:M.a.control,children:Object(A["jsx"])("button",{type:"button",title:"\u4e0b\u8f7dBPMN\u6587\u4ef6",onClick:s,children:Object(A["jsx"])("i",{className:M.a.download})})}),Object(A["jsx"])("li",{className:M.a.control,children:Object(A["jsx"])("button",{type:"button",title:"\u4e0b\u8f7d\u6d41\u7a0b\u56fe\u7247",onClick:l,children:Object(A["jsx"])("i",{className:M.a.image})})})]})})}}]),n}(P["Component"]),N=R,L=n("RfA7"),B=n("HNxq"),K=n("N7gI"),F=n("fhDF"),U=1,W=function(e){U=e},V=function(e){var t,n=e.record,a=e.dispatch,i=function(e,t,a){var i="xml"===e?"bpmn":"svg",r=document.createElement("a");r.setAttribute("href","data:application/bpmn20-xml;charset=UTF-8,".concat(encodeURIComponent(t))),r.setAttribute("target","_blank"),r.setAttribute("dataTrack","diagram:download-".concat(i)),r.setAttribute("download",a||"".concat(n.name,"\u7684\u6d41\u7a0b.").concat(i)),document.body.appendChild(r),r.click(),document.body.removeChild(r)},o=function(e){t.importXML(e,(function(e){e&&j["default"].error({message:"\u6d41\u7a0b\u6587\u4ef6\u5bfc\u5165",description:"\u6d41\u7a0b\u6587\u4ef6\u5bfc\u5165\u5931\u8d25\uff1a".concat(e)})}))},s=function(e){if(e.target.files.length>0){var t=e.target.files[0],n=new FileReader,a="";n.readAsText(t),n.onload=function(e){a=e.target.result,o(a)}}},l=function(){var e="FWorkflowdesign";if(n.deployTime)r["default"].warn("\u300e".concat(n.name,"\u300f\u7684\u5ba1\u6279\u6d41\u7a0b\u5df2\u53d1\u5e03\uff0c\u4e0d\u5141\u8bb8\u4fdd\u5b58"));else{var i=null,o=null;t.saveXML({format:!0}).then((function(s){var l=s.xml;i=l,t.saveSVG({format:!0}).then((function(t){var s=t.svg;o=s,Object(L["I"])({moduleName:e,opertype:"edit",data:{workflowid:n.workflowid,bpmnxml:i,bpmnsvg:o}}).then((function(t){var i=t.data;if(t.success)r["default"].success("\u300e".concat(n.name,"\u300f\u7684\u5ba1\u6279\u6d41\u7a0b\u4fdd\u5b58\u6210\u529f\uff01")),a({type:"modules/updateRecord",payload:{moduleName:e,record:i}});else{var o=t.message?[Object(A["jsx"])("div",{children:Object(A["jsx"])("li",{children:"string"===typeof t.message?t.message:JSON.stringify(t.message)})})]:[];c["a"].error({width:500,title:"\u8bb0\u5f55\u4fdd\u5b58\u65f6\u53d1\u751f\u9519\u8bef",content:Object(A["jsx"])("ul",{style:{listStyle:"decimal"},children:o})})}}))}))}))}},d=function(){t.get("commandStack").redo()},p=function(){t.get("commandStack").undo()},f=function(){t.saveSVG({format:!0},(function(e,t){i("svg",t,"")}))},m=function(){t.saveXML({format:!0},(function(e,t){i("xml",t,"")}))},b=function(e){0===e&&(W(1),t.get("canvas").zoom(1));var n=U+e<=.2?.2:U+e;W(n),t.get("canvas").zoom(n)};setTimeout((function(){t=new E({container:"#js-canvas",propertiesPanel:{parent:"#js-properties-panel"},additionalModules:[K,B],moddleExtensions:{activiti:F}});var e=n.bpmnxml?n.bpmnxml:C(n.procDefKey,n.name);t.importXML(e,(function(e){if(e)c["a"].error({width:500,title:"\u8bfb\u53d6\u6d41\u7a0b\u6587\u4ef6\u65f6\u53d1\u751f\u9519\u8bef",content:e});else{var n=t.get("canvas");n.zoom("fit-viewport"),b(0)}}))}),0),Object(u["setGlobalModalProps"])({onCancel:function(){return Object(u["setGlobalModalProps"])((function(){return{visible:!1}}))},zIndex:120,destroyOnClose:!0,visible:!0,centered:!0,okText:"\u4fdd\u5b58",onOk:l,width:"100%",title:"".concat(n.name," \u5ba1\u6279\u6d41\u7a0b\u8bbe\u8ba1"),bodyStyle:{padding:0},children:Object(A["jsx"])("div",{children:Object(A["jsxs"])("div",{style:{height:"".concat(document.documentElement.clientHeight-56-52,"px")},className:"content with-diagram",children:[Object(A["jsx"])("div",{className:"canvas",id:"js-canvas"}),Object(A["jsx"])("div",{className:"properties-panel-parent",id:"js-properties-panel"}),Object(A["jsx"])(N,{onOpenFIle:s,onUndo:p,onRedo:d,onDownloadSvg:f,onDownloadXml:m,onZoomIn:function(){return b(.1)},onZoomOut:function(){return b(-.1)},onZoomReset:function(){return b(0)}})]})})})},q=n("oNIl"),z=(n("14J3"),n("BMrR")),G=(n("g9YV"),n("wCAj")),J=(n("jCWc"),n("kPKH")),H=(n("ozfa"),n("MJZm")),Y=(n("DYRE"),n("zeV3")),Z=(n("OaEy"),n("2fM7")),Q=(n("5Dmo"),n("3S7+")),$=(n("+L6B"),n("2/Rp")),X=(n("sRBo"),n("kaz8")),ee=n("oBTY"),te=(n("5NDa"),n("5rEg")),ne=(n("y8nQ"),n("Vl3Y")),ae=(n("fu2T"),n("gK9i")),ie=(n("tU7J"),n("wFql")),re=n("mPcc"),ce=n("WTWM"),oe=n("DkMg"),se=n("gGBh"),le=se.sm4,de=Object(A["jsx"])(ae["a"],{defaultActiveKey:["remark"],style:{marginBottom:"16px"},children:Object(A["jsx"])(ae["a"].Panel,{header:"\u8f6c\u5165\u76f8\u5173\u8bf4\u660e",children:Object(A["jsx"])(ie["a"],{children:Object(A["jsxs"])("ul",{children:[Object(A["jsx"])("li",{children:"\u8868\u540d\u8f6c\u6362\u6210\u6a21\u5757\u540d\u4ee5\u53ca\u5b57\u6bb5\u540d\u7684\u8f6c\u6362\u90fd\u662f\u6309\u7167\u9a7c\u5cf0\u547d\u540d\u89c4\u5219\u8fdb\u884c,\u5982\u679c\u6709\u5b9e\u4f53bean,\u5b9e\u4f53bean\u91cc\u7684\u5b57\u6bb5\u540d\u5fc5\u987b\u548c\u5b57\u6bb5\u8868\u91cc\u7684\u540d\u79f0\u4e00\u81f4\uff1b"}),Object(A["jsx"])("li",{children:"\u8868\u5fc5\u987b\u6709\u552f\u4e00\u4e3b\u952e,\u4e0d\u80fd\u6709\u590d\u5408\u4e3b\u952e; \u89c6\u56fe\u4e5f\u5fc5\u987b\u6709\u552f\u4e00\u4e3b\u952e,\u4e3b\u952e\u8bbe\u7f6e\u53ef\u4ee5\u5728\u5bfc\u5165\u8868\u4fe1\u606f\u540e\u81ea\u884c\u8bbe\u7f6e; \u5fc5\u987b\u6709\u540d\u79f0\u5b57\u6bb5\uff0c\u5982\u679c\u6ca1\u6709\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u4e3b\u952e\u5b57\u6bb5;"}),Object(A["jsx"])("li",{children:"\u5404\u8868\u4e4b\u95f4\u7684\u5173\u8054\u5173\u7cfb\u662f\u6811\u72b6\u7ed3\u6784\uff0c\u4e0d\u8bb8\u6709\u5faa\u73af\u5f15\u7528;\u8868\u81ea\u9876\u5411\u4e0b\u5bfc\u5165;\u6240\u6709\u89c6\u56fe\u7684\u5173\u8054\u5173\u7cfb\u9700\u8981\u81ea\u5df1\u8bbe\u7f6e\u3002"}),Object(A["jsx"])("li",{children:"\u5982\u679c\u4e1a\u52a1\u6570\u636e\u5e93\u7684\u8868\u4ec5\u7528\u4e8e\u67e5\u8be2\uff0c\u5219\u4e0d\u7528\u5efa\u7acb\u5b9e\u4f53bean;"}),Object(A["jsx"])("li",{children:"\u5bfc\u5165\u8868\u4fe1\u606f\u540e\uff0c\u8bf7\u8fdb\u884c\u68c0\u67e5beanname,\u5982\u679c\u4e0d\u5bf9\u6216\u8005\u6ca1\u627e\u5230\u7cfb\u7edf\u4e2d\u5df2\u6709\u7684bean\u8bf7\u81ea\u884c\u4fee\u6b63;"}),Object(A["jsx"])("li",{children:"\u5177\u6709\u6811\u5f62\u7ed3\u6784\u7684\u8868(\u4ee3\u7801\u5206\u7ea7\u6216id-pid\u7c7b\u578b)\u53ea\u80fd\u7528\u505a\u4e8e\u57fa\u7840\u6a21\u5757\uff0c\u4e0d\u80fd\u7528\u4e8e\u6709\u5927\u91cf\u6570\u636e\u7684\u4e1a\u52a1\u6a21\u5757;"})]})})},"remark")}),ue=function(){var e=Object(P["useState"])([]),t=Object(a["a"])(e,2),n=t[0],o=t[1],u=Object(P["useState"])([]),p=Object(a["a"])(u,2),f=p[0],m=p[1],b=Object(P["useState"])([]),j=Object(a["a"])(b,2),h=j[0],_=j[1],O=Object(P["useState"])(null),x=Object(a["a"])(O,2),g=x[0],v=x[1],y=Object(P["useState"])(),E=Object(a["a"])(y,2),S=E[0],C=E[1],I=Object(P["useState"])([]),D=Object(a["a"])(I,2),k=D[0],w=D[1],T=ne["a"].useForm(),M=Object(a["a"])(T,1),R=M[0],N=function(e){if(!e)return null;var t=e;return h.forEach((function(n){n.children&&n.children.forEach((function(n){n.key===e&&(t=n.comment)}))})),t},L=function(e){C(e),R.setFieldsValue({title:N(e)}),e?Object(l["default"])("".concat(l["API_HEAD"],"/platform/database/getfields.do?schema=").concat(g||"","&tablename=").concat(e)).then((function(e){w(e)})):w([])},B=[{dataIndex:"order",title:"\u5e8f\u53f7",width:"48px",align:"right",render:function(e,t,n){return n+1}},{dataIndex:"fieldname",title:"\u5b57\u6bb5\u540d"},{dataIndex:"comments",title:"\u5b57\u6bb5\u63cf\u8ff0",render:function(e,t){return Object(A["jsxs"])("div",{style:{cursor:"pointer"},onClick:function(){var n=e;c["a"].confirm({title:"\u8bf7\u8f93\u5165\u5b57\u6bb5\u63cf\u8ff0",icon:null,content:Object(A["jsx"])(ne["a"],{autoComplete:"off",children:Object(A["jsx"])(te["a"],{name:"text",defaultValue:e,maxLength:50,onChange:function(e){n=e.target.value.trim()}})}),onOk:function(){var a=t;a.comments=n||e,w(Object(ee["a"])(k))}})},children:[Object(A["jsx"])(s["a"],{})," ",e]})}},{dataIndex:"namefield",title:"\u540d\u79f0\u5b57\u6bb5",align:"center",width:"76px",render:function(e,t){return Object(A["jsx"])(X["a"],{checked:!!e,onChange:function(e){k.forEach((function(n){var a=n;a.namefield=!!e.target.checked&&a.fieldname===t.fieldname})),w(Object(ee["a"])(k))}})}},{dataIndex:"fieldtype",title:"\u5b57\u6bb5\u7c7b\u578b"},{dataIndex:"fieldlen",title:"\u957f\u5ea6"},{dataIndex:"fieldrelation",title:"\u5173\u8054\u5173\u7cfb"},{dataIndex:"jointable",title:"\u5173\u8054\u8868",render:function(e,t){return e&&t.by5?Object(A["jsx"])(Q["a"],{title:"\u8f6c\u5230\u6b64\u8868\u6216\u89c6\u56fe",children:Object(A["jsx"])($["a"],{type:"link",style:{padding:0,margin:0},onClick:function(){L(e)},children:e})}):e}},{dataIndex:"by5",title:"\u5907\u6ce8",render:function(e){return Object(A["jsx"])("span",{dangerouslySetInnerHTML:{__html:e}})},flex:1}],K=function(e){h.forEach((function(t){var n=t;n.children&&(n.children=n.children.filter((function(t){return t.key!==e})))})),_(Object(ee["a"])(h)),L(null)},F=function(){var e=R.getFieldValue("objectgroup"),t=R.getFieldValue("title"),n=null;k.forEach((function(e){e.namefield&&(n=e.fieldname)})),S?e?n?t?Object(l["default"])("".concat(l["API_HEAD"],"/platform/database/importtableorview.do"),{params:{schema:g,tablename:S,title:t,namefield:n,objectgroup:e,fields:JSON.stringify(k.map((function(e){return{name:e.fieldname,title:e.comments}})))}}).then((function(e){e.status?r["default"].error("".concat(S,"--\u8868\u4fe1\u606f\u5bfc\u5165\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u540e\u53f0\u65e5\u5fd7\uff01")):(r["default"].info("".concat(S,"--\u8868\u4fe1\u606f\u5bfc\u5165\u6210\u529f\uff01")),K(S))})):r["default"].warn("\u8bf7\u5f55\u5165\u6a21\u5757\u4e2d\u6587\u540d\u79f0\uff01"):r["default"].warn("\u6ca1\u6709\u9009\u62e9\u540d\u79f0\u5b57\u6bb5\uff0c\u8bf7\u5728\u4e0b\u9762\u7684grid\u4e2d\u9009\u62e9\u4e00\u4e2a\u540d\u79f0\u5b57\u6bb5\uff0c\u5982\u679c\u6ca1\u6709\u540d\u79f0\u5b57\u6bb5\uff0c\u5219\u9009\u62e9\u4e3b\u952e\uff01"):r["default"].warn("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u6a21\u5757\u5206\u7ec4\uff01"):r["default"].warn("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u8868\u6216\u89c6\u56fe\uff01")},U=function(e){Object(l["default"])("".concat(l["API_HEAD"],"/platform/database/getnotimporttableview.do"),{params:{schema:e}}).then((function(e){_(e.children.map((function(e){return{title:e.text,key:e.value,selectable:!1,children:e.children&&e.children.map((function(e){return{title:e.value===e.text?e.value:"".concat(e.text,"(").concat(e.value,")"),key:e.value,comment:e.text}}))}})))}))},W=Object(A["jsxs"])("div",{children:[Object(A["jsx"])(i["a"],{bodyStyle:{padding:0,margin:0},style:{marginBottom:"16px"},children:Object(A["jsxs"])(ne["a"],{form:R,style:{padding:"16px"},autoComplete:"off",children:[Object(A["jsxs"])(Y["b"],{size:"large",style:{margin:0},children:[Object(A["jsx"])(ne["a"].Item,{label:"\u9009\u62e9\u6570\u636e\u5e93\uff1a",name:"schema",style:{marginBottom:0},children:Object(A["jsx"])(Z["a"],{showSearch:!0,onChange:function(e){var t="\u9ed8\u8ba4\u6570\u636e\u5e93"===e?null:e;v(t),U(t)},style:{width:200},options:n})}),Object(A["jsx"])(ne["a"].Item,{label:"\u6a21\u5757\u4e2d\u6587\u540d\u79f0\uff1a",name:"title",style:{marginBottom:0},children:Object(A["jsx"])(te["a"],{style:{width:200}})}),Object(A["jsx"])(ne["a"].Item,{label:"\u9009\u62e9\u6a21\u5757\u5206\u7ec4\uff1a",name:"objectgroup",style:{marginBottom:0},children:Object(A["jsx"])(Z["a"],{showSearch:!0,options:f,style:{width:200}})}),Object(A["jsx"])(ne["a"].Item,{style:{marginBottom:0},children:Object(A["jsx"])($["a"],{type:"primary",onClick:F,children:"\u5bfc\u5165"})})]}),Object(A["jsxs"])(Y["b"],{style:{float:"right"},children:[Object(A["jsx"])(Q["a"],{title:"\u5728\u5f53\u524d\u6570\u636e\u5e93\u4e2d\u6267\u884cSQL\u8bed\u53e5",children:Object(A["jsx"])($["a"],{onClick:function(){var e="";c["a"].confirm({width:"50%",title:"\u8bf7\u8f93\u5165SQL\u8bed\u53e5",icon:null,okText:"\u6267\u884c",cancelText:"\u5173\u95ed",content:Object(A["jsx"])(ne["a"],{autoComplete:"off",style:{height:"200px"},children:Object(A["jsx"])(te["a"].TextArea,{style:{height:"100%"},name:"sql",onChange:function(t){e=t.target.value.trim()}})}),onOk:function(){e&&Object(l["default"])("".concat(l["API_HEAD"],"/platform/systemcommon/executesql.do"),{params:{sql:le.encrypt(e,oe["b"][0].split("").reverse().join(""))}}).then((function(e){e.success?r["default"].success("SQL\u8bed\u53e5\u6267\u884c\u6210\u529f\uff01"):c["a"].error({title:"SQL\u8bed\u53e5\u6267\u884c\u5931\u8d25!",width:500,content:e.msg})}))}})},children:"\u6267\u884cSQL\u8bed\u53e5"})}),Object(A["jsx"])(Q["a"],{title:"\u6253\u5305\u4e0b\u8f7d\u5f53\u524d\u9009\u4e2d\u6570\u636e\u5e93\u7684Java Bean\u6587\u4ef6\u3002",children:Object(A["jsx"])($["a"],{onClick:function(){Object(d["k"])("".concat(l["API_HEAD"],"/platform/database/downloadbeanfiles.do"),{schemeName:g})},children:"\u4e0b\u8f7dJavaBean\u6587\u4ef6"})})]})]})}),Object(A["jsxs"])(z["a"],{gutter:16,children:[Object(A["jsx"])(J["a"],{span:6,children:Object(A["jsx"])(i["a"],{title:"\u672a\u52a0\u5165\u5230\u7cfb\u7edf\u7684\u8868\u548c\u89c6\u56fe",size:"small",children:Object(A["jsx"])(H["a"],{treeData:h,showLine:!0,style:{height:"600px",overflowY:"auto"},expandedKeys:["table","view"],selectedKeys:[S],onSelect:function(e,t){t.selected?L(e[0]):L(null)}},"_tableviewstree")})}),Object(A["jsx"])(J["a"],{span:18,children:Object(A["jsx"])(i["a"],{title:"\u5b57\u6bb5\u4fe1\u606f",size:"small",children:Object(A["jsx"])(G["a"],{columns:B,size:"small",bordered:!0,dataSource:k,style:{height:"600px",overflowY:"auto"},pagination:!1,rowKey:"fieldname"},"_fieldtable")})})]})]});return Object(P["useEffect"])((function(){Object(l["default"])("".concat(l["API_HEAD"],"/platform/database/getschemas.do")).then((function(e){o(e.map((function(e){var t=e.text;return{label:t,value:t}}))),R.setFieldsValue({schema:e[0].text}),U(null)})),Object(l["default"])("".concat(l["API_HEAD"],"/platform/systemcommon/getobjectgroups.do")).then((function(e){m(e.map((function(e){var t=e.text,n=e.value;return{label:t,value:n}})))}))}),[]),W},pe=function(){var e={visible:!0,title:Object(A["jsxs"])(A["Fragment"],{children:[Object(d["n"])("x-fa fa-sign-in fa-rotate-90")," \u8868\u548c\u89c6\u56fe\u76f8\u5173\u4fe1\u606f\u5bfc\u5165\u7ba1\u7406"]}),width:"100%",zIndex:void 0,children:Object(A["jsxs"])("span",{children:[de,Object(A["jsx"])(ue,{})]}),onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))},bodyStyle:{backgroundColor:"#f0f2f5",padding:16}};Object(u["setGlobalDrawerProps"])(e)},fe=function(e){var t=e.moduleState,n=e.dispatch,a=Object(ce["y"])(t,"FDataobject");if(a){var i=a.text,c=a.id;Object(l["default"])("".concat(l["API_HEAD"],"/platform/database/refreshtablefields.do"),{method:"POST",data:Object(re["serialize"])({objectid:c})}).then((function(e){0===e.tag?r["default"].info("\u6a21\u5757".concat(i,"\u8868\u4e2d\u6ca1\u6709\u53d1\u73b0\u65b0\u589e\u7684\u5b57\u6bb5")):(r["default"].info("\u5df2\u6210\u529f\u5237\u65b0\u5b57\u6bb5\uff0c\u5171\u52a0\u5165\u4e86 ".concat(e.tag," \u4e2a\u5b57\u5b57\u6bb5, \u5b57\u6bb5\u540d\u79f0\u662f: ").concat(e.msg)),n({type:"modules/fetchData",payload:{moduleName:t.moduleName,forceUpdate:!0}}))}))}else r["default"].warn("\u8bf7\u5148\u5728\u5bfc\u822a\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u5b9e\u4f53\u5bf9\u8c61\uff01")},me=function(e){var t=e.record,n=e.dispatch,a=e.moduleState,i=a.moduleName;if("FDataobjectfield"!==i){var c=t.title,o=t.objectid;Object(l["default"])("".concat(l["API_HEAD"],"/platform/database/refreshtablefields.do"),{method:"POST",data:Object(re["serialize"])({objectid:o})}).then((function(e){0===e.tag?r["default"].info("\u6a21\u5757".concat(c,"\u8868\u4e2d\u6ca1\u6709\u53d1\u73b0\u65b0\u589e\u7684\u5b57\u6bb5")):(r["default"].info("\u5df2\u6210\u529f\u5237\u65b0\u5b57\u6bb5\uff0c\u5171\u52a0\u5165\u4e86 ".concat(e.tag," \u4e2a\u5b57\u5b57\u6bb5, \u5b57\u6bb5\u540d\u79f0\u662f: ").concat(e.msg)),n({type:"modules/refreshRecord",payload:{moduleName:i,recordId:o}}))}))}else fe(e)},be=function(e){var t=e.record,n=e.moduleInfo,a=t[n.primarykey];Object(l["default"])("".concat(l["API_HEAD"],"/platform/datasource/testconnect.do"),{timeout:6e4,params:{datasourceid:a}}).then((function(e){e.success?c["a"].info({width:500,title:"\u6570\u636e\u6e90\u8fde\u63a5\u6d4b\u8bd5\u6210\u529f",content:Object(A["jsx"])("span",{dangerouslySetInnerHTML:{__html:"\u8fde\u63a5\u5b57\u7b26\u4e32\uff1a".concat(e.tag)}})}):c["a"].error({width:500,title:"\u6570\u636e\u6e90\u8fde\u63a5\u6d4b\u8bd5\u5931\u8d25",content:Object(A["jsx"])("span",{dangerouslySetInnerHTML:{__html:"\u8fde\u63a5\u5b57\u7b26\u4e32\uff1a".concat(e.tag,"<br/><br/>\u9519\u8bef\u539f\u56e0\uff1a").concat(e.msg)}})})}))},je=function(e){var t=e.record,n=e.moduleInfo,a=t[n.primarykey];Object(l["default"])("".concat(l["API_HEAD"],"/platform/datasource/breakconnect.do"),{timeout:6e4,params:{datasourceid:a}}).then((function(e){e.success?r["default"].success("\u6570\u636e\u6e90\u5df2\u4ece\u540e\u53f0\u65ad\u5f00"):c["a"].error({width:500,title:"\u6570\u636e\u6e90\u65ad\u5f00\u5931\u8d25",content:Object(A["jsx"])("span",{dangerouslySetInnerHTML:{__html:"<br/>\u9519\u8bef\u539f\u56e0\uff1a".concat(e.msg)}})})}))},he=function(e){var t=e.record,n=e.moduleInfo,i=function(){var e=ne["a"].useForm(),i=Object(a["a"])(e,1),c=i[0],o=Object(P["useState"])({}),s=Object(a["a"])(o,2),d=s[0],u=s[1],p=Object(P["useState"])([]),f=Object(a["a"])(p,2),m=f[0],b=f[1],j=t[n.primarykey];return Object(P["useEffect"])((function(){Object(l["default"])("".concat(l["API_HEAD"],"/platform/datasource/getschemas.do"),{method:"POST",data:Object(re["serialize"])({datasourceid:j})}).then((function(e){b(e)}))}),[]),Object(A["jsxs"])(ne["a"],{form:c,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",children:[Object(A["jsx"])(ne["a"].Item,{label:"\u4e1a\u52a1\u6570\u636e\u5e93\u540d",name:"name",rules:[{required:!0}],children:Object(A["jsx"])(Z["a"],{dropdownStyle:{zIndex:10001},onChange:function(e){c.setFieldsValue({title:e})},children:m.map((function(e){return Object(A["jsx"])(Z["a"].Option,{value:e,children:e},e)}))})}),Object(A["jsx"])(ne["a"].Item,{label:"\u8868\u5bf9\u8c61\u524d\u7f00",name:"objectnameahead",rules:[{type:"regexp",pattern:/^[A-Za-z][\w]{0,5}$/,message:"\u5b57\u6bcd\u5f00\u5934,\u53ea\u5305\u542b\u5b57\u6bcd\u6570\u5b57\u4e0b\u5212\u7ebf"},{required:!0}],validateStatus:d.objectnameahead?"error":void 0,help:d.objectnameahead,children:Object(A["jsx"])(te["a"],{maxLength:6,placeholder:"\u7528\u4e8e\u533a\u5206\u5176\u4ed6\u6570\u636e\u5e93\u7684\u552f\u4e00\u6807\u8bc6\u7b26"})}),Object(A["jsx"])(ne["a"].Item,{label:"\u6570\u636e\u5e93\u8bf4\u660e",name:"title",help:"\u8be6\u7ec6\u63cf\u8ff0\u6b64\u4e1a\u52a1\u6570\u636e\u5e93\u7684\u7528\u9014\u7b49\u4fe1\u606f",rules:[{required:!0}],children:Object(A["jsx"])(te["a"],{maxLength:50})}),Object(A["jsx"])(ne["a"].Item,{style:{marginTop:"24px"},wrapperCol:{span:14,offset:6},children:Object(A["jsx"])($["a"],{type:"primary",onClick:function(){c.validateFields().then((function(){u({});var e=c.getFieldsValue();/^[A-Za-z][\w]{0,5}$/.test(e.objectnameahead)?Object(l["default"])("".concat(l["API_HEAD"],"/platform/datasource/addschema.do"),{params:{datasourceid:j,name:e.name,title:e.title,objectnameahead:e.objectnameahead}}).then((function(t){t.success?(r["default"].info("\u4e1a\u52a1\u6570\u636e\u5e93\u300e".concat(e.title,"\u300f\u5bfc\u5165\u6210\u529f!,\u8bf7\u53bb\u4e1a\u52a1\u6570\u636e\u5e93\u6a21\u5757\u4e2d\u5bfc\u5165\u8868\u3002")),b(m.filter((function(t){return t!==e.name}))),c.resetFields()):r["default"].error("\u5bfc\u5165\u6570\u636e\u5e93\u5931\u8d25!".concat(t.msg))})):u({objectnameahead:"\u8868\u5bf9\u8c61\u524d\u7f00\u5fc5\u987b\u4ee5\u5b57\u6bcd\u5f00\u5934,\u53ea\u5305\u542b\u5b57\u6bcd\u6570\u5b57\u4e0b\u5212\u7ebf\u3002"})}))},children:"\u5bfc\u5165"})})]})};Object(u["setGlobalModalProps"])({visible:!0,zIndex:1e4,title:"\u300e".concat(t.title,"\u300f\u4e1a\u52a1\u6570\u636e\u5e93\u5bfc\u5165"),onCancel:function(){return Object(u["setGlobalModalProps"])({visible:!1})},children:Object(A["jsx"])(i,{}),footer:null})},_e=(n("BoS7"),n("Sdc0")),Oe=Object(A["jsx"])(ae["a"],{defaultActiveKey:["remark"],style:{marginBottom:"16px"},children:Object(A["jsx"])(ae["a"].Panel,{header:"\u8f6c\u5165\u76f8\u5173\u8bf4\u660e",children:Object(A["jsx"])(ie["a"],{children:Object(A["jsxs"])("ul",{children:[Object(A["jsx"])("li",{children:"\u8868\u5bf9\u8c61\u524d\u7f00_\u6570\u636e\u5e93\u7684\u8868\u540d\u2019\u4e3a\u751f\u6210\u7684\u6a21\u5757\u540d\uff0c\u6a21\u5757\u548c\u5b57\u6bb5\u540d\u7684\u8f6c\u6362\u90fd\u662f\u6309\u7167\u9a7c\u5cf0\u547d\u540d\u89c4\u5219\u8fdb\u884c\uff1b"}),Object(A["jsx"])("li",{children:"\u8868\u5fc5\u987b\u6709\u552f\u4e00\u4e3b\u952e,\u4e0d\u80fd\u6709\u590d\u5408\u4e3b\u952e; \u89c6\u56fe\u4e5f\u5fc5\u987b\u6709\u552f\u4e00\u4e3b\u952e,\u4e3b\u952e\u8bbe\u7f6e\u53ef\u4ee5\u5728\u5bfc\u5165\u8868\u4fe1\u606f\u540e\u81ea\u884c\u8bbe\u7f6e; \u5fc5\u987b\u6709\u540d\u79f0\u5b57\u6bb5\uff0c\u5982\u679c\u6ca1\u6709\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u4e3b\u952e\u5b57\u6bb5\uff1b"}),Object(A["jsx"])("li",{children:"\u5404\u8868\u4e4b\u95f4\u7684\u5173\u8054\u5173\u7cfb\u662f\u6811\u72b6\u7ed3\u6784\uff0c\u4e0d\u8bb8\u6709\u5faa\u73af\u5f15\u7528;\u8868\u81ea\u9876\u5411\u4e0b\u5bfc\u5165;\u6240\u6709\u89c6\u56fe\u7684\u5173\u8054\u5173\u7cfb\u9700\u8981\u81ea\u5df1\u8bbe\u7f6e\uff1b"}),Object(A["jsx"])("li",{children:"\u4e1a\u52a1\u6570\u636e\u5e93\u7684\u8868\u4ec5\u7528\u4e8e\u67e5\u8be2\uff0c\u4e0d\u7528\u5efa\u7acb\u5b9e\u4f53bean\uff1b"}),Object(A["jsx"])("li",{children:"\u5177\u6709\u6811\u5f62\u7ed3\u6784\u7684\u8868(\u4ee3\u7801\u5206\u7ea7\u6216id-pid\u7c7b\u578b)\u53ea\u80fd\u7528\u505a\u4e8e\u57fa\u7840\u6a21\u5757\uff0c\u4e0d\u80fd\u7528\u4e8e\u6709\u5927\u91cf\u6570\u636e\u7684\u4e1a\u52a1\u6a21\u5757\uff1b"}),Object(A["jsx"])("li",{children:"\u8bf7\u5efa\u7acb\u4e00\u4e2a\u53ea\u8bfb\u5e10\u53f7\u6765\u64cd\u4f5c\u4e1a\u52a1\u6570\u636e\u5e93,\u786e\u4fdd\u4e1a\u52a1\u6570\u636e\u5e93\u4e0d\u53d7\u672c\u7cfb\u7edf\u7684\u5f71\u54cd\uff1b"})]})})},"remark")}),xe=function(e){var t=e.record,n=function(){var e=Object(P["useState"])([]),n=Object(a["a"])(e,2),o=n[0],u=n[1],p=Object(P["useState"])(),f=Object(a["a"])(p,2),m=f[0],b=f[1],j=Object(P["useState"])([]),h=Object(a["a"])(j,2),_=h[0],O=h[1],x=ne["a"].useForm(),g=Object(a["a"])(x,1),v=g[0],y=t.schemaid,E=function(e){if(!e)return null;var t=e;return o.forEach((function(n){n.children&&n.children.forEach((function(n){n.key===e&&(t=n.comment)}))})),t},S=function(e){b(e),v.setFieldsValue({title:E(e)}),e?Object(l["default"])("".concat(l["API_HEAD"],"/platform/datasource/getfields.do?databaseschemeid=").concat(y,"&tablename=").concat(e)).then((function(e){O(e)})):O([])},C=[{dataIndex:"order",title:"\u5e8f\u53f7",width:"48px",align:"right",render:function(e,t,n){return n+1}},{dataIndex:"fieldname",title:"\u5b57\u6bb5\u540d"},{dataIndex:"comments",title:"\u5b57\u6bb5\u63cf\u8ff0",render:function(e,t){return Object(A["jsxs"])("div",{style:{cursor:"pointer"},onClick:function(){var n=e;c["a"].confirm({title:"\u8bf7\u8f93\u5165\u5b57\u6bb5\u63cf\u8ff0",icon:null,content:Object(A["jsx"])(ne["a"],{autoComplete:"off",children:Object(A["jsx"])(te["a"],{name:"text",defaultValue:e,maxLength:50,onChange:function(e){n=e.target.value.trim()}})}),onOk:function(){var a=t;a.comments=n||e,O(Object(ee["a"])(_))}})},children:[Object(A["jsx"])(s["a"],{})," ",e]})}},{dataIndex:"namefield",title:"\u540d\u79f0\u5b57\u6bb5",align:"center",width:"76px",render:function(e,t){return Object(A["jsx"])(X["a"],{checked:!!e,onChange:function(e){_.forEach((function(n){var a=n;a.namefield=!!e.target.checked&&a.fieldname===t.fieldname})),O(Object(ee["a"])(_))}})}},{dataIndex:"fieldtype",title:"\u5b57\u6bb5\u7c7b\u578b"},{dataIndex:"fieldlen",title:"\u957f\u5ea6"},{dataIndex:"fieldrelation",title:"\u5173\u8054\u5173\u7cfb"},{dataIndex:"jointable",title:"\u5173\u8054\u8868",render:function(e,t){return e&&t.by5?Object(A["jsx"])(Q["a"],{title:"\u8f6c\u5230\u6b64\u8868\u6216\u89c6\u56fe",children:Object(A["jsx"])($["a"],{type:"link",style:{padding:0,margin:0},onClick:function(){S(e)},children:e})}):e}},{dataIndex:"by5",title:"\u5907\u6ce8",render:function(e){return Object(A["jsx"])("span",{dangerouslySetInnerHTML:{__html:e}})},flex:1}],I=function(e){o.forEach((function(t){t.children&&Object(d["d"])(t,{children:t.children.filter((function(t){return t.key!==e}))})})),u(Object(ee["a"])(o)),S(null)},D=function(){var e=v.getFieldValue("objectgroup"),t=v.getFieldValue("title"),n=null;_.forEach((function(e){e.namefield&&(n=e.fieldname)})),m?e?n?t?_.find((function(e){return!!e.by5}))?r["default"].warn("\u5c1a\u6709\u5173\u8054\u8868\u8fd8\u6ca1\u6709\u52a0\u5165\uff0c\u8bf7\u5148\u5bfc\u5165\u8be5\u8868"):Object(l["default"])("".concat(l["API_HEAD"],"/platform/datasource/importtableorview.do"),{params:{databaseschemeid:y,tablename:m,title:t,namefield:n,groupname:e,fields:JSON.stringify(_.map((function(e){return{name:e.fieldname,title:e.comments}}))),hasdatamining:!!v.getFieldValue("hasdatamining"),showkeyfield:!!v.getFieldValue("showkeyfield")}}).then((function(e){e.status?r["default"].error("".concat(m,"--\u8868\u4fe1\u606f\u5bfc\u5165\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u540e\u53f0\u65e5\u5fd7\uff01")):(r["default"].success("".concat(m,"--\u8868\u4fe1\u606f\u5bfc\u5165\u6210\u529f\uff01")),I(m))})):r["default"].warn("\u8bf7\u5f55\u5165\u6a21\u5757\u4e2d\u6587\u540d\u79f0\uff01"):r["default"].warn("\u6ca1\u6709\u9009\u62e9\u540d\u79f0\u5b57\u6bb5\uff0c\u8bf7\u5728\u4e0b\u9762\u7684grid\u4e2d\u9009\u62e9\u4e00\u4e2a\u540d\u79f0\u5b57\u6bb5\uff0c\u5982\u679c\u6ca1\u6709\u540d\u79f0\u5b57\u6bb5\uff0c\u5219\u9009\u62e9\u4e3b\u952e\uff01"):r["default"].warn("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u6a21\u5757\u5206\u7ec4\uff01"):r["default"].warn("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u8868\u6216\u89c6\u56fe\uff01")},k=Object(A["jsxs"])("div",{children:[Object(A["jsx"])(i["a"],{bodyStyle:{padding:0,margin:0},style:{marginBottom:"16px"},children:Object(A["jsx"])(ne["a"],{form:v,children:Object(A["jsxs"])(Y["b"],{size:"large",style:{padding:"16px",margin:0},children:[Object(A["jsx"])(ne["a"].Item,{label:"\u6a21\u5757\u4e2d\u6587\u540d\u79f0\uff1a",name:"title",style:{marginBottom:0},children:Object(A["jsx"])(te["a"],{style:{width:200}})}),Object(A["jsx"])(ne["a"].Item,{label:"\u6a21\u5757\u5206\u7ec4\u540d\u79f0\uff1a",name:"objectgroup",style:{marginBottom:0},children:Object(A["jsx"])(te["a"],{style:{width:200}})}),Object(A["jsx"])(ne["a"].Item,{label:"\u542f\u7528\u6a21\u5757\u6570\u636e\u5206\u6790\uff1a",name:"hasdatamining",style:{marginBottom:0},children:Object(A["jsx"])(_e["a"],{checkedChildren:"\u542f\u7528",unCheckedChildren:"\u7981\u7528"})}),Object(A["jsx"])(ne["a"].Item,{label:"\u4e3b\u952e\u5b57\u6bb5\u663e\u793a\uff1a",name:"showkeyfield",style:{marginBottom:0},children:Object(A["jsx"])(_e["a"],{checkedChildren:"\u663e\u793a",unCheckedChildren:"\u9690\u85cf"})}),Object(A["jsx"])(ne["a"].Item,{style:{marginBottom:0},children:Object(A["jsx"])($["a"],{type:"primary",onClick:D,children:"\u5bfc\u5165"})})]})})}),Object(A["jsxs"])(z["a"],{gutter:16,children:[Object(A["jsx"])(J["a"],{span:6,children:Object(A["jsx"])(i["a"],{title:"\u672a\u52a0\u5165\u5230\u7cfb\u7edf\u7684\u8868\u548c\u89c6\u56fe",size:"small",children:Object(A["jsx"])(H["a"],{treeData:o,showLine:!0,style:{height:"600px",overflowY:"auto"},expandedKeys:["table","view"],selectedKeys:[m],onSelect:function(e,t){t.selected?S(e[0]):S(null)}},"_tableviewstree")})}),Object(A["jsx"])(J["a"],{span:18,children:Object(A["jsx"])(i["a"],{title:"\u5b57\u6bb5\u4fe1\u606f",size:"small",children:Object(A["jsx"])(G["a"],{columns:C,size:"small",bordered:!0,dataSource:_,style:{height:"600px",overflowY:"auto"},pagination:!1,rowKey:"fieldname"},"_fieldtable")})})]})]}),w=function(){Object(l["default"])("".concat(l["API_HEAD"],"/platform/datasource/getnotimporttableview.do"),{params:{databaseschemeid:y}}).then((function(e){u(e.children.map((function(e){return{title:e.text,key:e.value,selectable:!1,children:e.children&&e.children.map((function(e){return{title:e.value===e.text?e.value:"".concat(e.text,"(").concat(e.value,")"),key:e.value,comment:e.text}}))}})))}))};return Object(P["useEffect"])((function(){w(),v.setFieldsValue({objectgroup:t.title})}),[]),k},o={visible:!0,title:Object(A["jsx"])(A["Fragment"],{children:"\u300e".concat(t.title,"\u300f\u6570\u636e\u5e93\u8868\u548c\u89c6\u56fe\u7684\u5bfc\u5165")}),width:"100%",zIndex:void 0,children:Object(A["jsxs"])("span",{children:[Oe,Object(A["jsx"])(n,{})]}),onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))},bodyStyle:{backgroundColor:"#f0f2f5",padding:16}};Object(u["setGlobalDrawerProps"])(o)},ge=n("4WVO"),ve=n("LpXo"),ye=(n("7Kak"),n("9yH6")),Ee=n("eVqf"),Se=n("9jjd"),Ce=n("mzdz"),Ie=(n("Snfz"),function(){return Object(ce["w"])("FFunction").map((function(e){var t=e.value,n=e.text;return{value:t,label:n}}))}),De=function(e,t){return e.cls?Object(A["jsx"])("span",{className:e.cls,children:t||e.text}):t||e.text},ke=["itemId","direction","functionid","fieldfunction"],we=function(e){var t=[];return e.children.forEach((function(e){var n={};ke.forEach((function(t){e[t]&&(n[t]=e[t])})),t.push(n)})),t},Pe=function(e,t){Object(L["D"])({dataObjectId:t.objectid,schemeDefine:JSON.stringify(we(e[0]))}).then((function(e){e.success?r["default"].success("\u6a21\u5757\u300e".concat(t.title,"\u300f\u7684\u9ed8\u8ba4\u6392\u5e8f\u65b9\u6848\u5df2\u4fdd\u5b58\u3002")):c["a"].error({title:"\u6392\u5e8f\u65b9\u6848\u4fdd\u5b58\u5931\u8d25\uff01",width:500,content:e.msg})}))},Te=function(e){var t=e.objectRecord,n=t.objectid,r=Object(P["useRef"])(),c=ne["a"].useForm(),o=Object(a["a"])(c,1),s=o[0],l=Object(P["useState"])([]),u=Object(a["a"])(l,2),p=u[0],f=u[1],m=Object(P["useState"])([]),b=Object(a["a"])(m,2),j=b[0],h=b[1],_=Object(P["useState"])([]),O=Object(a["a"])(_,2),x=O[0],g=O[1],v=Object(P["useState"])([]),y=Object(a["a"])(v,2),E=y[0],S=y[1],C=Object(P["useState"])([]),I=Object(a["a"])(C,2),D=I[0],k=I[1],w=Object(P["useState"])([]),T=Object(a["a"])(w,2),M=T[0],R=T[1],N=Object(P["useState"])([]),B=Object(a["a"])(N,2),K=B[0],F=B[1],U=Object(P["useState"])({}),W=Object(a["a"])(U,2),V=W[0],q=W[1],G=Object(P["useState"])({}),Q=Object(a["a"])(G,2),$=Q[0],X=Q[1],ae=function(e,t){e!==V?(q(e),e.moduleName&&Object(L["m"])({moduleName:e.moduleName,isChildModule:!!e.isChild,modulePath:e.itemId}).then((function(e){var n=[];e.forEach((function(e){Object(d["d"])(e,{key:e.text,title:De(e)}),n.push(e.key),e.children&&e.children.forEach((function(t){Object(d["d"])(t,{key:t.itemId,title:De(t),parent:e}),t.children&&(n.push(t.key),t.children.forEach((function(e){Object(d["d"])(e,{key:e.itemId,title:De(e),parent:t})})))}))})),h([]),g(n),f(e),S(t||K)}))):S(t||[])},ie=function e(t){Array.isArray(t)?t.forEach((function(t){return e(t)})):"[object Object]"===Object.prototype.toString.call(t)&&("root"!==t.key&&Object(d["d"])(t,{title:De(t)}),t.children&&(t.children.forEach((function(e){Object(d["d"])(e,{parent:t})})),e(t.children)))},re=function(e,t){h(e),t.checkedNodes.filter((function(e){return!e.children})).forEach((function(e){if(!Object(Ee["g"])(D,"itemId").includes(e.itemId)){var t=e.text;V.isParent?t="".concat(V.qtip,"--").concat(t):V.isChild&&(t="".concat(V.qtip,"--").concat(e.parent.text,"--").concat(t));var n={key:e.itemId,itemId:e.itemId,text:t,iconCls:e.iconCls,cls:e.cls,icon:e.icon,leaf:!0,parent:D[0]};n.title=De(n,t),D[0].children.push(n),k((function(e){return Object(ee["a"])(e)}))}})),Object(Ee["e"])(p).filter((function(e){return!t.checkedNodes.find((function(t){return t===e}))})).forEach((function(e){var t=Object(Ee["e"])(D).find((function(t){return t.itemId===e.itemId}));if(t){var n=t.parent.children;n.splice(n.findIndex((function(e){return e.itemId===t.itemId})),1)}})),k(Object(ee["a"])(D))};return Object(P["useEffect"])((function(){var e=Object(Ee["g"])(p,"itemId"),t=Object(Ee["g"])(D,"itemId"),n=e.filter((function(e){return t.find((function(t){return t===e}))}));h(n)}),[p]),Object(P["useEffect"])((function(){Object(L["h"])({dataObjectId:n}).then((function(e){var t=[{key:"root",children:e,title:"\u5df2\u7ecf\u9009\u62e9\u7684\u5b57\u6bb5"}];ie(t),R(Object(Ee["f"])(t,"key")),k(t),ae({moduleName:n})}))}),[]),Object(P["useEffect"])((function(){s.setFieldsValue({direction:$.direction,functionid:$.functionid,fieldfunction:$.fieldfunction})}),[$]),Object(A["jsx"])(A["Fragment"],{children:Object(A["jsxs"])(z["a"],{gutter:16,style:{height:"calc(100% )"},children:[Object(A["jsx"])(J["a"],{lg:12,md:24,sm:24,xs:24,children:Object(A["jsx"])(Ce["a"],{moduleName:n,onClick:function(e){ae(e)},ref:r})}),Object(A["jsx"])(J["a"],{lg:5,md:12,sm:12,xs:24,children:Object(A["jsx"])(i["a"],{title:"\u53ef\u4f9b\u9009\u62e9\u7684\u5b57\u6bb5",size:"small",children:Object(A["jsx"])(H["a"],{style:{height:"calc(100vh - 149px)",overflow:"auto"},checkable:!0,showIcon:!0,icon:function(e){return e.iconCls?Object(A["jsx"])("span",{className:e.iconCls}):Object(A["jsx"])(Se["a"],{})},treeData:p,checkedKeys:j,onCheck:function(e,t){re(e,t),X({})},expandedKeys:x,onExpand:function(e){return g(e)},selectedKeys:E,onSelect:function(e){if(S(e),F(e),X({}),1===e.length){var t=D[0].children.find((function(t){return t.key===e[0]}));t&&t.itemId&&X(t)}}})})}),Object(A["jsx"])(J["a"],{lg:7,md:12,sm:12,xs:24,children:Object(A["jsxs"])(i["a"],{title:"\u5df2\u7ecf\u8bbe\u7f6e\u7684\u5b57\u6bb5",size:"small",bodyStyle:{height:"calc(100vh - 125px)",display:"flex",flexDirection:"column"},extra:Object(A["jsx"])(Y["b"],{children:Object(A["jsx"])("a",{href:"#",onClick:function(){return Pe(D,t)},children:"\u4fdd\u5b58"})}),children:[Object(A["jsx"])("div",{style:{flex:1},children:Object(A["jsx"])(H["a"],{className:"selectedgroupandfield",style:{overflow:"auto"},checkable:!1,showLine:!1,showIcon:!0,icon:function(e){return e.iconCls?Object(A["jsx"])("span",{className:e.iconCls}):Object(A["jsx"])(Se["a"],{})},draggable:!0,treeData:D,expandedKeys:M,onExpand:function(e){return R(e)},selectedKeys:K,onSelect:function(e,t){F(e);var n=t.node,a=n.itemId;if(X({}),t.selected&&a){X(t.selectedNodes[0]);var i=a.substring(0,a.indexOf("|"));ae(r.current.getNodeFromItemId(i),e)}},onDrop:function(e){var t=e.node.key;e.dropToGap&&"root"!==t||e.node.itemId?Object(d["z"])(D,t,(function(t,n){Object(d["z"])(D,e.dragNode.key,(function(e,a){e.parent.children.splice(a,1),Object(d["d"])(e,{parent:t.parent}),t.parent.children.splice(n+1,0,e)}))})):Object(d["z"])(D,t,(function(t){Object(d["z"])(D,e.dragNode.key,(function(e,n){e.parent.children.splice(n,1),Object(d["d"])(e,{parent:t}),t.children||(Object(d["d"])(t,{children:[]}),R([].concat(Object(ee["a"])(M),[t.key]))),t.children.unshift(e)}))})),k(Object(ee["a"])(D))}})}),$.itemId?Object(A["jsx"])(i["a"],{title:"\u6392\u5e8f\u5b57\u6bb5\u5c5e\u6027",size:"small",children:Object(A["jsx"])(ne["a"],{className:"moduleform",form:s,size:"middle",autoComplete:"off",labelCol:{flex:"0 0 120px"},onValuesChange:function(e){Object(d["d"])($,e)},children:Object(A["jsxs"])(z["a"],{children:[Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u6392\u5e8f\u65b9\u5411",name:"direction",children:Object(A["jsxs"])(ye["a"].Group,{children:[Object(A["jsx"])(ye["a"],{value:"asc",children:"\u6b63\u5e8f"}),Object(A["jsx"])(ye["a"],{value:"desc",children:"\u5012\u5e8f"})]})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u7cfb\u7edf\u81ea\u5b9a\u4e49\u51fd\u6570",name:"functionid",children:Object(A["jsx"])(Z["a"],{allowClear:!0,showSearch:!0,options:Ie(),getPopupContainer:function(e){return e.parentNode},filterOption:function(e,t){return t.label&&t.label.toLowerCase().indexOf(e.toLowerCase())>=0}})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u81ea\u5b9a\u4e49\u51fd\u6570",name:"fieldfunction",children:Object(A["jsx"])(te["a"].TextArea,{autoSize:{maxRows:5},placeholder:"this \u4ee3\u8868\u5f53\u524d\u5b57\u6bb5"})})})]})})}):null]})})]})})},Me=n("xvlK"),Ae=n("/MfK"),Re=n("ga3A"),Ne=n("4i/N"),Le=n("+1av"),Be=["fieldtitle","fieldid","title","functionid","userfunction","remark"],Ke=function e(t){var n=[];return t.children.forEach((function(t){var a={};Be.forEach((function(e){t[e]&&(a[e]=t[e])})),t.children&&t.children.length&&(a.children=e(t)),n.push(a)})),n},Fe=function(e,t){Object(L["N"])({additionfieldid:t.additionfieldid,expression:JSON.stringify(Ke(e[0]))}).then((function(e){e.success?r["default"].success("\u9644\u52a0\u5b57\u6bb5\u300e".concat(t.title,"\u300f\u7684\u5b9a\u4e49\u5df2\u4fdd\u5b58\u3002")):c["a"].error({title:"\u9644\u52a0\u5b57\u6bb5\u5b9a\u4e49\u4fdd\u5b58\u5931\u8d25\uff01",width:500,content:e.msg})}))},Ue=function(e){Object(L["K"])({objectid:e["FDataobject.objectid"],additionFieldId:e.additionfieldid}).then((function(e){e.success?r["default"].success("\u9644\u52a0\u5b57\u6bb5\u53ef\u4ee5\u4f7f\u7528\u3002\u8868\u8fbe\u5f0f\u4e3a\uff1a".concat(e.msg)):c["a"].error({title:"\u5b57\u6bb5\u8868\u8fbe\u5f0f\u4e0d\u80fd\u89e3\u6790\uff01",width:500,content:e.msg})}))},We=function(e){var t=e.record,n=t["FDataobject.objectid"],c=t.additionfieldid,o=ne["a"].useForm(),s=Object(a["a"])(o,1),l=s[0],u=Object(P["useState"])([]),p=Object(a["a"])(u,2),f=p[0],m=p[1],b=Object(P["useState"])([]),j=Object(a["a"])(b,2),h=j[0],_=j[1],O=Object(P["useState"])([]),x=Object(a["a"])(O,2),g=x[0],v=x[1],y=Object(P["useState"])(null),E=Object(a["a"])(y,2),S=E[0],C=E[1],I=function(e){e&&(Object(d["d"])(e,{text:e.title||e.fieldtitle||e.text}),m((function(e){return Object(ee["a"])(e)})))},D=function e(t){Array.isArray(t)?t.forEach((function(t){return e(t)})):"[object Object]"===Object.prototype.toString.call(t)&&t.children&&(t.children.forEach((function(e){Object(d["d"])(e,{parent:t})})),e(t.children))};return Object(P["useEffect"])((function(){Object(L["i"])({additionfieldid:c}).then((function(e){var t=[{key:"root",children:e.children,text:"\u5df2\u7ecf\u8bbe\u7f6e\u7684\u5b57\u6bb5",selectable:!1}];_(Object(Ee["f"])(t,"key")),D(t),m(t)}))}),[c]),Object(P["useEffect"])((function(){l.resetFields(),S&&l.setFieldsValue({fieldtitle:S.fieldtitle,fieldid:S.fieldid,title:S.title,functionid:S.functionid,userfunction:S.userfunction,remark:S.remark})}),[S]),Object(A["jsxs"])(A["Fragment"],{children:[Object(A["jsx"])(i["a"],{size:"small",title:"\u5df2\u7ecf\u8bbe\u7f6e\u7684\u5b57\u6bb5\u8868\u8fbe\u5f0f",extra:Object(A["jsxs"])(Y["b"],{children:[Object(A["jsx"])($["a"],{size:"small",onClick:function(){f[0].children.push({text:"\u65b0\u589e\u7684\u5b57\u6bb5\u7ec4",key:Object(d["I"])(),parent:f[0]}),m((function(e){return Object(ee["a"])(e)}))},children:Object(A["jsx"])(Me["a"],{})}),Object(A["jsx"])($["a"],{size:"small",onClick:function(){1===g.length?Object(d["z"])(f,g[0],(function(e){var t=e.parent.children;t.splice(t.findIndex((function(t){return t===e})),1),v([]),m((function(e){return Object(ee["a"])(e)})),C(null)})):r["default"].warn("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u8282\u70b9\uff01")},children:Object(A["jsx"])(Ae["a"],{})}),Object(A["jsx"])(Q["a"],{title:"\u5982\u679c\u4fee\u6539\u8fc7\u5b57\u6bb5\u8868\u8fbe\u5f0f\uff0c\u8bf7\u5148\u4fdd\u5b58\u518d\u6d4b\u8bd5",children:Object(A["jsx"])($["a"],{size:"small",onClick:function(){Ue(t)},children:"\u6d4b\u8bd5\u5b57\u6bb5"})}),Object(A["jsxs"])($["a"],{size:"small",type:"primary",onClick:function(){Fe(f,t)},children:[Object(A["jsx"])(Re["a"],{}),"\u4fdd\u5b58"]})]}),children:Object(A["jsx"])(H["a"],{className:"selectedgroupandfield",showLine:!0,treeData:f,titleRender:function(e){return e.text},expandedKeys:h,onExpand:function(e){return _(e)},selectedKeys:g,onSelect:function(e){v(e),C(null),1===e.length&&Object(d["z"])(f,e[0],(function(e){C(e)}))},draggable:!0,onDrop:function(e){var t=e.node.key;e.dropToGap&&"root"!==t||e.node.fieldid?Object(d["z"])(f,t,(function(t,n){Object(d["z"])(f,e.dragNode.key,(function(e,a){e.parent.children.splice(a,1),Object(d["d"])(e,{parent:t.parent}),t.parent.children.splice(n+1,0,e)}))})):Object(d["z"])(f,t,(function(t){Object(d["z"])(f,e.dragNode.key,(function(e,n){e.parent.children.splice(n,1),Object(d["d"])(e,{parent:t}),t.children||(Object(d["d"])(t,{children:[]}),_([].concat(Object(ee["a"])(h),[t.key]))),t.children.unshift(e)}))})),m(Object(ee["a"])(f))}})}),Object(A["jsx"])(i["a"],{size:"small",title:"\u5b57\u6bb5\u8868\u8fbe\u5f0f\u5185\u5bb9\u8bbe\u7f6e",style:{marginTop:"16px"},children:Object(A["jsx"])(ne["a"],{className:"moduleform",form:l,size:"middle",autoComplete:"off",labelCol:{flex:"0 0 120px"},onValuesChange:function(e){Object(d["d"])(S,e),I(S)},children:Object(A["jsxs"])(z["a"],{children:[Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u6a21\u5757\u5b57\u6bb5",name:"fieldtitle",children:Object(A["jsx"])(te["a"],{readOnly:!0,suffix:Object(A["jsx"])(Ne["a"],{onClick:function(){var e={fieldtitle:void 0,fieldid:void 0};l.setFieldsValue(e),Object(d["d"])(S,e),I(S)}}),addonAfter:Object(A["jsx"])(Le["a"],{moduleName:n,defaultFieldId:S&&S.fieldid,callback:function(e){var t={fieldtitle:e.title,fieldid:e.fieldid};l.setFieldsValue(t),Object(d["d"])(S,t),I(S)}})})})}),Object(A["jsx"])(J["a"],{span:24,style:{display:"none"},children:Object(A["jsx"])(ne["a"].Item,{label:"\u6a21\u5757\u5b57\u6bb5",name:"fieldid",children:Object(A["jsx"])(te["a"],{readOnly:!0})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u663e\u793a\u5185\u5bb9",name:"title",children:Object(A["jsx"])(te["a"],{})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u7cfb\u7edf\u81ea\u5b9a\u4e49\u51fd\u6570",name:"functionid",children:Object(A["jsx"])(Z["a"],{allowClear:!0,showSearch:!0,options:Ie(),getPopupContainer:function(e){return e.parentNode},filterOption:function(e,t){return t.label&&t.label.toLowerCase().indexOf(e.toLowerCase())>=0}})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u81ea\u5b9a\u4e49\u51fd\u6570",name:"userfunction",children:Object(A["jsx"])(te["a"].TextArea,{autoSize:{maxRows:5},placeholder:"this \u8868\u793a\u5f53\u524d\u5b57\u6bb5, 1%,2% \u8868\u793a\u5b50\u8282\u70b9\u7684\u987a\u5e8f"})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u5907\u6ce8",name:"remark",children:Object(A["jsx"])(te["a"],{})})})]})})})]})},Ve=n("tSj1"),qe=n("k1fw"),ze=n("gx9M"),Ge=function(){return Object(ce["w"])("FFunction").map((function(e){var t=e.value,n=e.text;return{value:t,label:n}}))},Je=function(){return Object(ce["w"])("FNumbergroup").map((function(e){var t=e.value,n=e.text;return{value:t,label:n}}))},He=function(e,t){return e.cls?Object(A["jsx"])("span",{className:e.cls,children:t||e.text}):t||e.text},Ye=["fieldfunction","addparentfilter","reverseorder","collapsed","addcodelevel","iconcls","cls","functionid","numbergroupid","remark"],Ze=function(e){var t=[];return e.children.forEach((function(e){var n={title:e.udftitle,itemId:e.itemId};Ye.forEach((function(t){e[t]&&(n[t]=e[t])})),t.push(n)})),t},Qe=function(e,t){var n=t["FDataobject.objectid"];Object(L["H"])({navigateschemeid:t.schemeid,schemeDefine:JSON.stringify(Ze(e[0]))}).then((function(e){e.success?(r["default"].success("\u6a21\u5757\u300e".concat(t.title,"\u300f\u7684\u5bfc\u822a\u65b9\u6848\u5df2\u4fdd\u5b58\u3002")),Object(ce["L"])(n),Object(ze["b"])(n)):c["a"].error({title:"\u5bfc\u822a\u65b9\u6848\u4fdd\u5b58\u5931\u8d25\uff01",width:500,content:e.msg})}))},$e=function(e){var t=e.navigateScheme,n=t["FDataobject.objectid"],c=t.schemeid,o=Object(P["useRef"])(),s=ne["a"].useForm(),l=Object(a["a"])(s,1),u=l[0],p=Object(P["useState"])([]),f=Object(a["a"])(p,2),m=f[0],b=f[1],j=Object(P["useState"])([]),h=Object(a["a"])(j,2),_=h[0],O=h[1],x=Object(P["useState"])([]),g=Object(a["a"])(x,2),v=g[0],y=g[1],E=Object(P["useState"])([]),S=Object(a["a"])(E,2),C=S[0],I=S[1],D=Object(P["useState"])([]),k=Object(a["a"])(D,2),w=k[0],T=k[1],M=Object(P["useState"])([]),R=Object(a["a"])(M,2),N=R[0],B=R[1],K=Object(P["useState"])([]),F=Object(a["a"])(K,2),U=F[0],W=F[1],V=Object(P["useState"])({}),q=Object(a["a"])(V,2),G=q[0],$=q[1],ae=Object(P["useState"])({}),ie=Object(a["a"])(ae,2),re=ie[0],ce=ie[1],oe=function(){re&&re.itemId?T((function(e){return e[0].children.push(Object(qe["a"])(Object(qe["a"])({},re),{},{key:Object(d["I"])()})),Object(ee["a"])(e)})):r["default"].warn("\u8bf7\u5148\u9009\u4e2d\u4e00\u4e2a\u5b57\u6bb5\uff01")},se=function(e,t){e!==G?($(e),e.moduleName&&Object(L["m"])({moduleName:e.moduleName,isChildModule:!!e.isChild,modulePath:e.itemId}).then((function(e){var n=[];e.forEach((function(e){Object(d["d"])(e,{key:e.text,title:He(e)}),n.push(e.key),e.children&&e.children.forEach((function(t){Object(d["d"])(t,{key:t.itemId,title:He(t),parent:e}),t.children&&(n.push(t.key),t.children.forEach((function(e){Object(d["d"])(e,{key:e.itemId,title:He(e),parent:t})})))}))})),O([]),y(n),b(e),I(t||U)}))):I(t||[])},le=function e(t){Array.isArray(t)?t.forEach((function(t){return e(t)})):"[object Object]"===Object.prototype.toString.call(t)&&(Object(d["d"])(t,{udftitle:t.title}),"root"!==t.key&&Object(d["d"])(t,{title:He(t)}),t.children&&(t.children.forEach((function(e){Object(d["d"])(e,{parent:t})})),e(t.children)))},de=function(e,t){O(e),t.checkedNodes.filter((function(e){return!e.children})).forEach((function(e){if(!Object(Ee["g"])(w,"itemId").includes(e.itemId)){var t=e.text;G.isParent?t="".concat(G.qtip,"--").concat(t):G.isChild&&(t="".concat(G.qtip,"--").concat(e.parent.text,"--").concat(t));var n={key:e.itemId,itemId:e.itemId,text:t,iconCls:e.iconCls,cls:e.cls,icon:e.icon,leaf:!0,parent:w[0]};n.title=He(n,t),w[0].children.push(n),T((function(e){return Object(ee["a"])(e)}))}})),Object(Ee["e"])(m).filter((function(e){return!t.checkedNodes.find((function(t){return t===e}))})).forEach((function(e){var t=Object(Ee["e"])(w).find((function(t){return t.itemId===e.itemId}));if(t){var n=t.parent.children;n.splice(n.findIndex((function(e){return e.itemId===t.itemId})),1)}})),T(Object(ee["a"])(w))};return Object(P["useEffect"])((function(){var e=Object(Ee["g"])(m,"itemId"),t=Object(Ee["g"])(w,"itemId"),n=e.filter((function(e){return t.find((function(t){return t===e}))}));O(n)}),[m]),Object(P["useEffect"])((function(){Object(L["o"])({navigateschemeid:c}).then((function(e){var t=[{key:"root",children:e.children,title:"\u5df2\u7ecf\u9009\u62e9\u7684\u5b57\u6bb5"}];le(t),B(Object(Ee["f"])(t,"key")),T(t),se({moduleName:n})}))}),[]),Object(P["useEffect"])((function(){u.resetFields(),u.setFieldsValue(Object(d["i"])(Object(qe["a"])({},re)))}),[re]),Object(A["jsx"])(A["Fragment"],{children:Object(A["jsxs"])(z["a"],{gutter:16,style:{height:"calc(100% )"},children:[Object(A["jsx"])(J["a"],{lg:12,md:24,sm:24,xs:24,children:Object(A["jsx"])(Ce["a"],{moduleName:n,onClick:function(e){se(e)},ref:o})}),Object(A["jsx"])(J["a"],{lg:5,md:12,sm:12,xs:24,children:Object(A["jsx"])(i["a"],{title:"\u53ef\u4f9b\u9009\u62e9\u7684\u5b57\u6bb5",size:"small",children:Object(A["jsx"])(H["a"],{style:{height:"calc(100vh - 149px)",overflow:"auto"},checkable:!0,showIcon:!0,icon:function(e){return e.iconCls?Object(A["jsx"])("span",{className:e.iconCls}):Object(A["jsx"])(Se["a"],{})},treeData:m,checkedKeys:_,onCheck:function(e,t){de(e,t),ce({})},expandedKeys:v,onExpand:function(e){return y(e)},selectedKeys:C,onSelect:function(e){if(I(e),W(e),ce({}),1===e.length){var t=w[0].children.find((function(t){return t.key===e[0]}));t&&t.itemId&&ce(t)}}})})}),Object(A["jsx"])(J["a"],{lg:7,md:12,sm:12,xs:24,children:Object(A["jsxs"])(i["a"],{title:"\u5df2\u7ecf\u8bbe\u7f6e\u7684\u5b57\u6bb5",size:"small",bodyStyle:{height:"calc(100vh - 125px)",display:"flex",flexDirection:"column"},extra:Object(A["jsxs"])(Y["b"],{children:[Object(A["jsx"])(Q["a"],{title:"\u590d\u5236\u65b0\u589e\u5f53\u524d\u9009\u4e2d\u7684\u5b57\u6bb5",children:Object(A["jsx"])("a",{href:"#",onClick:function(){return oe()},children:"\u590d\u5236"})}),Object(A["jsx"])("a",{href:"#",onClick:function(){return Qe(w,t)},children:"\u4fdd\u5b58"})]}),children:[Object(A["jsx"])("div",{style:{flex:1},children:Object(A["jsx"])(H["a"],{className:"selectedgroupandfield",style:{overflow:"auto"},checkable:!1,showLine:!1,showIcon:!0,icon:function(e){return e.iconCls?Object(A["jsx"])("span",{className:e.iconCls}):Object(A["jsx"])(Se["a"],{})},draggable:!0,treeData:w,expandedKeys:N,onExpand:function(e){return B(e)},selectedKeys:U,onSelect:function(e,t){W(e);var n=t.node,a=n.itemId;if(ce({}),t.selected&&a){ce(t.selectedNodes[0]);var i=a.substring(0,a.indexOf("|"));se(o.current.getNodeFromItemId(i),e)}},onDrop:function(e){var t=e.node.key;e.dropToGap&&"root"!==t||e.node.itemId?Object(d["z"])(w,t,(function(t,n){Object(d["z"])(w,e.dragNode.key,(function(e,a){e.parent.children.splice(a,1),Object(d["d"])(e,{parent:t.parent}),t.parent.children.splice(n+1,0,e)}))})):Object(d["z"])(w,t,(function(t){Object(d["z"])(w,e.dragNode.key,(function(e,n){e.parent.children.splice(n,1),Object(d["d"])(e,{parent:t}),t.children||(Object(d["d"])(t,{children:[]}),B([].concat(Object(ee["a"])(N),[t.key]))),t.children.unshift(e)}))})),T(Object(ee["a"])(w))}})}),re.itemId?Object(A["jsx"])(i["a"],{title:"\u5bfc\u822a\u5b57\u6bb5\u5c5e\u6027",size:"small",children:Object(A["jsx"])(ne["a"],{className:"moduleform",form:u,size:"middle",autoComplete:"off",labelCol:{flex:"0 0 120px"},onValuesChange:function(e){Object(d["d"])(re,e)},children:Object(A["jsxs"])(z["a"],{children:[Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u663e\u793a\u5185\u5bb9",name:"udftitle",children:Object(A["jsx"])(te["a"],{placeholder:"\u5982\u679c\u4e3a\u9ed8\u8ba4\u663e\u793a\u5185\u5bb9\uff0c\u8bf7\u4e0d\u8981\u4fee\u6539\u6b64\u5b57\u6bb5\u3002"})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u7cfb\u7edf\u81ea\u5b9a\u4e49\u51fd\u6570",name:"functionid",children:Object(A["jsx"])(Z["a"],{allowClear:!0,showSearch:!0,options:Ge(),getPopupContainer:function(e){return e.parentNode},filterOption:function(e,t){return t.label&&t.label.toLowerCase().indexOf(e.toLowerCase())>=0}})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u81ea\u5b9a\u4e49\u51fd\u6570",name:"fieldfunction",children:Object(A["jsx"])(te["a"].TextArea,{autoSize:{maxRows:5},placeholder:"this \u4ee3\u8868\u5f53\u524d\u5b57\u6bb5"})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u6570\u503c\u5206\u7ec4",name:"numbergroupid",children:Object(A["jsx"])(Z["a"],{allowClear:!0,showSearch:!0,options:Je(),getPopupContainer:function(e){return e.parentNode},filterOption:function(e,t){return t.label&&t.label.toLowerCase().indexOf(e.toLowerCase())>=0}})})}),Object(A["jsx"])(J["a"],{span:12,children:Object(A["jsx"])(ne["a"].Item,{label:"\u52a0\u5165\u4e0a\u7ea7\u6761\u4ef6",name:"addparentfilter",valuePropName:"checked",children:Object(A["jsx"])(X["a"],{})})}),Object(A["jsx"])(J["a"],{span:12,children:Object(A["jsx"])(ne["a"].Item,{label:"\u6392\u5e8f\u5012\u5e8f",name:"reverseorder",valuePropName:"checked",children:Object(A["jsx"])(X["a"],{})})}),Object(A["jsx"])(J["a"],{span:12,children:Object(A["jsx"])(ne["a"].Item,{label:"\u9ed8\u8ba4\u6298\u53e0",name:"collapsed",valuePropName:"checked",children:Object(A["jsx"])(X["a"],{})})}),Object(A["jsx"])(J["a"],{span:12,children:Object(A["jsx"])(ne["a"].Item,{label:"\u52a0\u5165\u5206\u7ea7",name:"addcodelevel",valuePropName:"checked",children:Object(A["jsx"])(X["a"],{})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u56fe\u6807\u6837\u5f0f",name:"iconcls",children:Object(A["jsx"])(te["a"],{})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u56fe\u6807\u5730\u5740",name:"cls",children:Object(A["jsx"])(te["a"],{})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u5907\u6ce8",name:"remark",children:Object(A["jsx"])(te["a"],{})})})]})})}):null]})})]})})},Xe=function(e,t){return e.cls?Object(A["jsx"])("span",{className:e.cls,children:t||e.text}):t||e.text},et=["itemId","direction","functionid","fieldfunction"],tt=function(e){var t=[];return e.children.forEach((function(e){var n={};et.forEach((function(t){e[t]&&(n[t]=e[t])})),t.push(n)})),t},nt=function(e,t){Object(L["J"])({dataObjectId:t["FDataobject.objectid"],sortSchemeId:t.schemeid,sortSchemeName:t.title,schemeDefine:JSON.stringify(tt(e[0]))}).then((function(e){e.success?r["default"].success("\u6392\u5e8f\u65b9\u6848\u300e".concat(t.title,"\u300f\u5df2\u4fdd\u5b58\u3002")):c["a"].error({title:"\u6392\u5e8f\u65b9\u6848\u4fdd\u5b58\u5931\u8d25\uff01",width:500,content:e.msg})}))},at=function(e){var t=e.objectRecord,n=t["FDataobject.objectid"],r=t.schemeid,c=Object(P["useRef"])(),o=ne["a"].useForm(),s=Object(a["a"])(o,1),l=s[0],u=Object(P["useState"])([]),p=Object(a["a"])(u,2),f=p[0],m=p[1],b=Object(P["useState"])([]),j=Object(a["a"])(b,2),h=j[0],_=j[1],O=Object(P["useState"])([]),x=Object(a["a"])(O,2),g=x[0],v=x[1],y=Object(P["useState"])([]),E=Object(a["a"])(y,2),S=E[0],C=E[1],I=Object(P["useState"])([]),D=Object(a["a"])(I,2),k=D[0],w=D[1],T=Object(P["useState"])([]),M=Object(a["a"])(T,2),R=M[0],N=M[1],B=Object(P["useState"])([]),K=Object(a["a"])(B,2),F=K[0],U=K[1],W=Object(P["useState"])({}),V=Object(a["a"])(W,2),q=V[0],G=V[1],Q=Object(P["useState"])({}),$=Object(a["a"])(Q,2),X=$[0],ae=$[1],ie=function(e,t){e!==q?(G(e),e.moduleName&&Object(L["m"])({moduleName:e.moduleName,isChildModule:!!e.isChild,modulePath:e.itemId}).then((function(e){var n=[];e.forEach((function(e){Object(d["d"])(e,{key:e.text,title:Xe(e)}),n.push(e.key),e.children&&e.children.forEach((function(t){Object(d["d"])(t,{key:t.itemId,title:Xe(t),parent:e}),t.children&&(n.push(t.key),t.children.forEach((function(e){Object(d["d"])(e,{key:e.itemId,title:Xe(e),parent:t})})))}))})),_([]),v(n),m(e),C(t||F)}))):C(t||[])},re=function e(t){Array.isArray(t)?t.forEach((function(t){return e(t)})):"[object Object]"===Object.prototype.toString.call(t)&&("root"!==t.key&&Object(d["d"])(t,{title:Xe(t)}),t.children&&(t.children.forEach((function(e){Object(d["d"])(e,{parent:t})})),e(t.children)))},ce=function(e,t){_(e),t.checkedNodes.filter((function(e){return!e.children})).forEach((function(e){if(!Object(Ee["g"])(k,"itemId").includes(e.itemId)){var t=e.text;q.isParent?t="".concat(q.qtip,"--").concat(t):q.isChild&&(t="".concat(q.qtip,"--").concat(e.parent.text,"--").concat(t));var n={key:e.itemId,itemId:e.itemId,text:t,iconCls:e.iconCls,cls:e.cls,icon:e.icon,leaf:!0,parent:k[0]};n.title=Xe(n,t),k[0].children.push(n),w((function(e){return Object(ee["a"])(e)}))}})),Object(Ee["e"])(f).filter((function(e){return!t.checkedNodes.find((function(t){return t===e}))})).forEach((function(e){var t=Object(Ee["e"])(k).find((function(t){return t.itemId===e.itemId}));if(t){var n=t.parent.children;n.splice(n.findIndex((function(e){return e.itemId===t.itemId})),1)}})),w(Object(ee["a"])(k))};return Object(P["useEffect"])((function(){var e=Object(Ee["g"])(f,"itemId"),t=Object(Ee["g"])(k,"itemId"),n=e.filter((function(e){return t.find((function(t){return t===e}))}));_(n)}),[f]),Object(P["useEffect"])((function(){Object(L["z"])({sortSchemeId:r}).then((function(e){var t=[{key:"root",children:e.children,title:"\u5df2\u7ecf\u9009\u62e9\u7684\u5b57\u6bb5"}];re(t),N(Object(Ee["f"])(t,"key")),w(t),ie({moduleName:n})}))}),[]),Object(P["useEffect"])((function(){l.setFieldsValue({direction:X.direction,functionid:X.functionid,fieldfunction:X.fieldfunction})}),[X]),Object(A["jsx"])(A["Fragment"],{children:Object(A["jsxs"])(z["a"],{gutter:16,style:{height:"calc(100% )"},children:[Object(A["jsx"])(J["a"],{lg:12,md:24,sm:24,xs:24,children:Object(A["jsx"])(Ce["a"],{moduleName:n,onClick:function(e){ie(e)},ref:c})}),Object(A["jsx"])(J["a"],{lg:5,md:12,sm:12,xs:24,children:Object(A["jsx"])(i["a"],{title:"\u53ef\u4f9b\u9009\u62e9\u7684\u5b57\u6bb5",size:"small",children:Object(A["jsx"])(H["a"],{style:{height:"calc(100vh - 149px)",overflow:"auto"},checkable:!0,showIcon:!0,icon:function(e){return e.iconCls?Object(A["jsx"])("span",{className:e.iconCls}):Object(A["jsx"])(Se["a"],{})},treeData:f,checkedKeys:h,onCheck:function(e,t){ce(e,t),ae({})},expandedKeys:g,onExpand:function(e){return v(e)},selectedKeys:S,onSelect:function(e){if(C(e),U(e),ae({}),1===e.length){var t=k[0].children.find((function(t){return t.key===e[0]}));t&&t.itemId&&ae(t)}}})})}),Object(A["jsx"])(J["a"],{lg:7,md:12,sm:12,xs:24,children:Object(A["jsxs"])(i["a"],{title:"\u5df2\u7ecf\u8bbe\u7f6e\u7684\u5b57\u6bb5",size:"small",bodyStyle:{height:"calc(100vh - 125px)",display:"flex",flexDirection:"column"},extra:Object(A["jsx"])(Y["b"],{children:Object(A["jsx"])("a",{href:"#",onClick:function(){return nt(k,t)},children:"\u4fdd\u5b58"})}),children:[Object(A["jsx"])("div",{style:{flex:1},children:Object(A["jsx"])(H["a"],{className:"selectedgroupandfield",style:{overflow:"auto"},checkable:!1,showLine:!1,showIcon:!0,icon:function(e){return e.iconCls?Object(A["jsx"])("span",{className:e.iconCls}):Object(A["jsx"])(Se["a"],{})},draggable:!0,treeData:k,expandedKeys:R,onExpand:function(e){return N(e)},selectedKeys:F,onSelect:function(e,t){U(e);var n=t.node,a=n.itemId;if(ae({}),t.selected&&a){ae(t.selectedNodes[0]);var i=a.substring(0,a.indexOf("|"));ie(c.current.getNodeFromItemId(i),e)}},onDrop:function(e){var t=e.node.key;e.dropToGap&&"root"!==t||e.node.itemId?Object(d["z"])(k,t,(function(t,n){Object(d["z"])(k,e.dragNode.key,(function(e,a){e.parent.children.splice(a,1),Object(d["d"])(e,{parent:t.parent}),t.parent.children.splice(n+1,0,e)}))})):Object(d["z"])(k,t,(function(t){Object(d["z"])(k,e.dragNode.key,(function(e,n){e.parent.children.splice(n,1),Object(d["d"])(e,{parent:t}),t.children||(Object(d["d"])(t,{children:[]}),N([].concat(Object(ee["a"])(R),[t.key]))),t.children.unshift(e)}))})),w(Object(ee["a"])(k))}})}),X.itemId?Object(A["jsx"])(i["a"],{title:"\u6392\u5e8f\u5b57\u6bb5\u5c5e\u6027",size:"small",children:Object(A["jsx"])(ne["a"],{className:"moduleform",form:l,size:"middle",autoComplete:"off",labelCol:{flex:"0 0 120px"},onValuesChange:function(e){Object(d["d"])(X,e)},children:Object(A["jsxs"])(z["a"],{children:[Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u6392\u5e8f\u65b9\u5411",name:"direction",children:Object(A["jsxs"])(ye["a"].Group,{children:[Object(A["jsx"])(ye["a"],{value:"asc",children:"\u6b63\u5e8f"}),Object(A["jsx"])(ye["a"],{value:"desc",children:"\u5012\u5e8f"})]})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u7cfb\u7edf\u81ea\u5b9a\u4e49\u51fd\u6570",name:"functionid",children:Object(A["jsx"])(Z["a"],{allowClear:!0,showSearch:!0,options:Ie(),getPopupContainer:function(e){return e.parentNode},filterOption:function(e,t){return t.label&&t.label.toLowerCase().indexOf(e.toLowerCase())>=0}})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u81ea\u5b9a\u4e49\u51fd\u6570",name:"fieldfunction",children:Object(A["jsx"])(te["a"].TextArea,{autoSize:{maxRows:5},placeholder:"this \u4ee3\u8868\u5f53\u524d\u5b57\u6bb5"})})})]})})}):null]})})]})})},it=new Map,rt=function(e){if(!e)return[];if(!it.has(e)){var t=Object(l["syncRequest"])("".concat(l["API_HEAD"],"/platform/dataobjectfield/fetchcombodata.do"),{type:"POST",params:{fieldid:-1!==e.indexOf("|")?e.split("|")[1]:e}});it.set(e,Array.isArray(t)?t.map((function(e){return{value:e.value,label:e.text}})):[])}return it.get(e)},ct=["fieldtitle","fieldid","title","functionid","userfunction","operator","ovalue","recordids","recordnames","istreerecord","remark"],ot=[{value:"eq",label:"="},{value:"gt",label:">"},{value:"ge",label:">="},{value:"lt",label:"<"},{value:"le",label:"<="},{value:"ne",label:"<>"},{value:"in",label:"\u5217\u8868"},{value:"not in",label:"\u5217\u8868\u5916"},{value:"between",label:"\u533a\u95f4"},{value:"not between",label:"\u533a\u95f4\u5916"},{value:"like",label:"\u5305\u542b"},{value:"not like",label:"\u4e0d\u5305\u542b"},{value:"startwith",label:"\u5f00\u59cb\u4e8e"},{value:"not startwith",label:"\u4e0d\u5f00\u59cb"},{value:"regexp",label:"\u6b63\u5219"}],st=function e(t){var n=[];return t.children.forEach((function(t){var a={};ct.forEach((function(e){t[e]&&(a[e]=t[e])})),Array.isArray(t.recordids)&&t.recordids.length?a.recordids=t.recordids.join(","):delete a.recordids,t.children&&t.children.length&&(a.children=e(t)),n.push(a)})),n},lt=function(e,t,n){Object(L["M"])({id:t.conditionid||t.roleid,type:n,title:t.title,details:JSON.stringify(st(e[0]))}).then((function(e){e.success?r["default"].success("\u300e".concat(t.title||t.rolename,"\u300f\u7684\u6761\u4ef6\u8868\u8fbe\u5f0f\u5b9a\u4e49\u5df2\u4fdd\u5b58\u3002")):c["a"].error({title:"\u6761\u4ef6\u8868\u8fbe\u5f0f\u5b9a\u4e49\u4fdd\u5b58\u5931\u8d25\uff01",width:500,content:e.msg})}))},dt=function(e,t){Object(L["L"])({objectid:e["FDataobject.objectid"],id:e.conditionid||e.roleid,type:t}).then((function(e){e.success?r["default"].success("\u6761\u4ef6\u8868\u8fbe\u5f0f\u53ef\u4ee5\u4f7f\u7528\u3002\u6ee1\u8db3\u6761\u4ef6\u7684\u8bb0\u5f55\u6709".concat(e.tag,"\u6761\uff0c\u8868\u8fbe\u5f0f\u4e3a\uff1a").concat(e.msg)):c["a"].error({title:"\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e0d\u80fd\u89e3\u6790\uff01",width:500,content:e.msg})}))},ut=function(e){var t=e.record,n=e.type,c=t["FDataobject.objectid"],o=t.conditionid,s=t.roleid,l=ne["a"].useForm(),u=Object(a["a"])(l,1),p=u[0],f=Object(P["useState"])([]),m=Object(a["a"])(f,2),b=m[0],j=m[1],h=Object(P["useState"])([]),_=Object(a["a"])(h,2),O=_[0],x=_[1],g=Object(P["useState"])([]),v=Object(a["a"])(g,2),y=v[0],E=v[1],S=Object(P["useState"])(null),C=Object(a["a"])(S,2),I=C[0],D=C[1],k=Object(P["useState"])([]),w=Object(a["a"])(k,2),T=w[0],M=w[1],R=function(e){e&&(Object(d["d"])(e,{text:e.title||e.fieldtitle||e.text}),j((function(e){return Object(ee["a"])(e)})))},N=function e(t){Array.isArray(t)?t.forEach((function(t){return e(t)})):"[object Object]"===Object.prototype.toString.call(t)&&(t.recordids&&(t.recordids.startsWith("[")?Object(d["d"])(t,{recordids:JSON.parse(t.recordids)}):Object(d["d"])(t,{recordids:t.recordids.split(",")})),t.children&&(t.children.forEach((function(e){Object(d["d"])(e,{parent:t})})),e(t.children)))};return Object(P["useEffect"])((function(){Object(L["g"])({id:o||s,type:n}).then((function(e){var t=[{key:"root",children:e.children,text:"\u5df2\u7ecf\u8bbe\u7f6e\u7684\u5b57\u6bb5",selectable:!1}];x(Object(Ee["f"])(t,"key")),N(t),j(t)}))}),[o,s]),Object(P["useEffect"])((function(){p.resetFields(),I&&(p.setFieldsValue({fieldtitle:I.fieldtitle,fieldid:I.fieldid,title:I.title,functionid:I.functionid,userfunction:I.userfunction,operator:I.operator,ovalue:I.ovalue,remark:I.remark,recordids:I.recordids,recordnames:I.recordnames,istreerecord:I.istreerecord}),M(rt(I.fieldid)))}),[I]),Object(A["jsxs"])(A["Fragment"],{children:[Object(A["jsx"])(i["a"],{size:"small",title:"\u5df2\u7ecf\u8bbe\u7f6e\u7684\u6761\u4ef6\u8868\u8fbe\u5f0f",extra:Object(A["jsxs"])(Y["b"],{children:[Object(A["jsx"])($["a"],{size:"small",onClick:function(){b[0].children.push({text:"\u65b0\u589e\u7684\u5b57\u6bb5\u7ec4",key:Object(d["I"])(),parent:b[0]}),j((function(e){return Object(ee["a"])(e)}))},children:Object(A["jsx"])(Me["a"],{})}),Object(A["jsx"])($["a"],{size:"small",onClick:function(){1===y.length?Object(d["z"])(b,y[0],(function(e){var t=e.parent.children;t.splice(t.findIndex((function(t){return t===e})),1),E([]),j((function(e){return Object(ee["a"])(e)})),D(null)})):r["default"].warn("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u8282\u70b9\uff01")},children:Object(A["jsx"])(Ae["a"],{})}),Object(A["jsx"])(Q["a"],{title:"\u5982\u679c\u4fee\u6539\u8fc7\u6761\u4ef6\u8868\u8fbe\u5f0f\uff0c\u8bf7\u5148\u4fdd\u5b58\u518d\u6d4b\u8bd5",children:Object(A["jsx"])($["a"],{size:"small",onClick:function(){dt(t,n)},children:"\u6d4b\u8bd5\u8868\u8fbe\u5f0f"})}),Object(A["jsxs"])($["a"],{size:"small",type:"primary",onClick:function(){lt(b,t,n)},children:[Object(A["jsx"])(Re["a"],{}),"\u4fdd\u5b58"]})]}),children:Object(A["jsx"])(H["a"],{className:"selectedgroupandfield",showLine:!0,treeData:b,titleRender:function(e){return e.text},expandedKeys:O,onExpand:function(e){return x(e)},selectedKeys:y,onSelect:function(e){E(e),D(null),1===e.length&&Object(d["z"])(b,e[0],(function(e){D(e)}))},draggable:!0,onDrop:function(e){var t=e.node.key;e.dropToGap&&"root"!==t||e.node.fieldid?Object(d["z"])(b,t,(function(t,n){Object(d["z"])(b,e.dragNode.key,(function(e,a){e.parent.children.splice(a,1),Object(d["d"])(e,{parent:t.parent}),t.parent.children.splice(n+1,0,e)}))})):Object(d["z"])(b,t,(function(t){Object(d["z"])(b,e.dragNode.key,(function(e,n){e.parent.children.splice(n,1),Object(d["d"])(e,{parent:t}),t.children||(Object(d["d"])(t,{children:[]}),x([].concat(Object(ee["a"])(O),[t.key]))),t.children.unshift(e)}))})),j(Object(ee["a"])(b))}})}),Object(A["jsx"])(i["a"],{size:"small",title:"\u6761\u4ef6\u8868\u8fbe\u5f0f\u5185\u5bb9\u8bbe\u7f6e",style:{marginTop:"16px"},children:Object(A["jsx"])(ne["a"],{style:{visibility:I?"visible":"hidden"},className:"moduleform",form:p,size:"middle",autoComplete:"off",labelCol:{flex:"0 0 120px"},onValuesChange:function(e){Object(d["d"])(I,e),R(I)},children:Object(A["jsxs"])(z["a"],{children:[Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u6a21\u5757\u5b57\u6bb5",name:"fieldtitle",children:Object(A["jsx"])(te["a"],{readOnly:!0,suffix:Object(A["jsx"])(Ne["a"],{onClick:function(){var e={fieldtitle:void 0,fieldid:void 0};p.setFieldsValue(e),Object(d["d"])(I,e),R(I)}}),addonAfter:Object(A["jsx"])(Le["a"],{moduleName:c,defaultFieldId:I&&I.fieldid,callback:function(e){var t={fieldtitle:e.title,fieldid:e.fieldid,recordids:void 0,istreerecord:!1};M(rt(e.fieldid)),p.setFieldsValue(t),Object(d["d"])(I,t),R(I)}})})})}),Object(A["jsx"])(J["a"],{span:24,style:{display:"none"},children:Object(A["jsx"])(ne["a"].Item,{label:"\u6a21\u5757\u5b57\u6bb5",name:"fieldid",children:Object(A["jsx"])(te["a"],{readOnly:!0})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u663e\u793a\u5185\u5bb9",name:"title",children:Object(A["jsx"])(te["a"],{})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u7cfb\u7edf\u81ea\u5b9a\u4e49\u51fd\u6570",name:"functionid",children:Object(A["jsx"])(Z["a"],{allowClear:!0,showSearch:!0,options:Ie(),getPopupContainer:function(e){return e.parentNode},filterOption:function(e,t){return t.label&&t.label.toLowerCase().indexOf(e.toLowerCase())>=0}})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u81ea\u5b9a\u4e49\u51fd\u6570",name:"userfunction",children:Object(A["jsx"])(te["a"].TextArea,{autoSize:{maxRows:5},placeholder:"this \u8868\u793a\u5f53\u524d\u5b57\u6bb5, 1%,2% \u8868\u793a\u5b50\u8282\u70b9\u7684\u987a\u5e8f"})})}),Object(A["jsx"])(J["a"],{span:8,children:Object(A["jsx"])(ne["a"].Item,{label:"\u6bd4\u8f83\u7b26",name:"operator",children:Object(A["jsx"])(Z["a"],{allowClear:!0,showSearch:!0,options:ot,getPopupContainer:function(e){return e.parentNode},filterOption:function(e,t){return t.label&&t.label.toLowerCase().indexOf(e.toLowerCase())>=0}})})}),Object(A["jsx"])(J["a"],{span:16,children:Object(A["jsx"])(ne["a"].Item,{label:"\u6bd4\u8f83\u503c",name:"ovalue",children:Object(A["jsx"])(te["a"].TextArea,{autoSize:{maxRows:5}})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u9009\u62e9\u7684\u8bb0\u5f55\u503c",name:"recordids",children:Object(A["jsx"])(Z["a"],{mode:"tags",options:T,disabled:0===T.length})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u6811\u5f62\u8bb0\u5f55\u503c",name:"istreerecord",valuePropName:"checked",children:Object(A["jsx"])(X["a"],{disabled:0===T.length})})}),Object(A["jsx"])(J["a"],{span:24,children:Object(A["jsx"])(ne["a"].Item,{label:"\u5907\u6ce8",name:"remark",children:Object(A["jsx"])(te["a"],{})})})]})})})]})},pt=n("5X+9"),ft=n("mqE+"),mt=function(e){var t=e.dispatch,n=e.moduleName,a=e.key;t({type:"modules/refreshRecord",payload:{moduleName:n,recordId:a}})},bt=function(e){var t=e.record,n=e.moduleInfo,a=n.primarykey,i=n.namefield,s=t[i];c["a"].confirm({title:"\u786e\u5b9a\u8981\u91cd\u7f6e\u7528\u6237\u300e".concat(s,"\u300f\u7684\u5bc6\u7801\u5417?"),icon:Object(A["jsx"])(o["a"],{}),onOk:function(){Object(m["c"])({userid:t[a]}).then((function(e){e.success?r["default"].success("\u7528\u6237\u300e".concat(s,"\u300f\u7684\u5bc6\u7801\u5df2\u91cd\u7f6e\u4e3a\u201c123456\u201d\u8bf7\u901a\u77e5\u5176\u5c3d\u5feb\u4fee\u6539!")):r["default"].error("\u7528\u6237\u300e".concat(s,"\u300f\u7684\u5bc6\u7801\u5df2\u91cd\u7f6e\u5931\u8d25!"))}))}})},jt=function(e){var t=e.record,n=e.moduleInfo,a=n.primarykey,i=n.namefield,r=n.modulename,o=e.dispatch;Object(m["b"])({personnelid:t[a]}).then((function(e){var n="\u4eba\u5458\u300e".concat(t[i],"\u300f\u521b\u5efa\u7528\u6237");e.success?(c["a"].info({title:"".concat(n,"\u6210\u529f!"),width:500,content:Object(A["jsx"])("span",{dangerouslySetInnerHTML:{__html:"<br/>".concat(e.message,"<br/><br/>\u8bf7\u5c3d\u5feb\u901a\u77e5\u5176\u4fee\u6539\u5bc6\u7801\uff0c\u5e76\u5728\u7528\u6237\u6a21\u5757\u4e2d\u7ed9\u5176\u8bbe\u7f6e\u6743\u9650\uff01")}})}),mt({dispatch:o,moduleName:r,key:t[a]})):c["a"].error({title:"".concat(n,"\u5931\u8d25!"),width:500,content:e.message})}))},ht=function(e){var t=e.record,n=e.moduleInfo,a=n.primarykey,i=n.namefield,s="\u5c06\u300e".concat(t[i],"\u300f\u66f4\u65b0\u5230\u516c\u53f8\u7684\u6a21\u5757\u529f\u80fd\u91cc");c["a"].confirm({title:"\u786e\u5b9a\u8981".concat(s,"\u5417?"),icon:Object(A["jsx"])(o["a"],{}),onOk:function(){Object(m["i"])({functionid:t[a]}).then((function(e){e.success?r["default"].success("".concat((e.msg||"").replaceAll("<br/>",""),"\u66f4\u65b0\u6210\u529f\uff01")):r["default"].error("\u66f4\u65b0\u5931\u8d25\uff1a".concat(e.msg))}))}})},_t=function(e){var t=e.record,n=e.moduleInfo,a=n.primarykey,i=n.namefield,s="\u5c06\u300e".concat(t[i],"\u300f\u52a0\u5165\u5230\u5230\u516c\u53f8\u6a21\u5757");c["a"].confirm({title:"\u786e\u5b9a\u8981".concat(s,"\u5417?"),width:500,icon:Object(A["jsx"])(o["a"],{}),onOk:function(){Object(m["a"])({homepageschemeid:t[a]}).then((function(e){e.success?e.msg?r["default"].success("".concat((e.msg||"").replaceAll("<br/>",""),"\u52a0\u5165\u6210\u529f\uff01")):r["default"].success("\u672c\u5206\u6790\u9875\u65b9\u6848\u539f\u5148\u5df2\u7ecf\u52a0\u5165\u5230\u516c\u53f8\u6a21\u5757\u4e86\uff01"):r["default"].error("\u52a0\u5165\u5931\u8d25\uff1a".concat(e.msg))}))}})},Ot=function(e){var t=e.moduleInfo,n=e.records,a=t.primarykey,i=null===n||void 0===n?void 0:n.map((function(e){return e[a]}));Object(d["k"])("".concat(l["API_HEAD"],"/platform/dataobjectexport/exportexceltemplate.do"),{fieldids:i})},xt=function(e){var t=e.record,n=e.moduleInfo,a=n.primarykey,i=n.namefield,r=e.funcDefine,c={visible:!0,title:Object(A["jsxs"])(A["Fragment"],{children:[Object(A["jsx"])("span",{className:r.iconcls})," \u7528\u6237\u300e".concat(t[i],"\u300f\u7684\u64cd\u4f5c\u6743\u9650")]}),width:"60%",children:Object(A["jsx"])(b["a"],{userid:t[a],timestramp:(new Date).getTime()}),onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))}};Object(u["setGlobalDrawerProps"])(c)},gt=function(e){var t=e.record,n=e.moduleInfo,a=n.primarykey,i=n.namefield,r=e.funcDefine,c="\u7528\u6237\u300e".concat(t[i],"\u300f\u64cd\u4f5c\u6743\u9650\u8bbe\u7f6e"),o={visible:!0,title:Object(A["jsxs"])(A["Fragment"],{children:[Object(A["jsx"])("span",{className:r.iconcls})," ",c]}),width:"500px",children:Object(A["jsxs"])(A["Fragment"],{children:[Object(A["jsx"])("div",{style:{margin:"0px 12px 12px"},children:"\u6ce8\u610f\uff1a\u6b64\u64cd\u4f5c\u6743\u9650\u8bbe\u7f6e\u4ec5\u4f5c\u4e3a\u7528\u6237\u89d2\u8272\u8bbe\u7f6e\u7684\u8f85\u52a9\uff0c\u53ea\u6709\u67d0\u4e9b\u7528\u6237\u6709\u7279\u6b8a\u6743\u9650\u65f6\u624d\u8fdb\u884c\u8bbe\u7f6e\uff0c \u5426\u5219\u8bf7\u4f7f\u7528\u7528\u6237\u89d2\u8272\u63a7\u5236\u6743\u9650\u3002(\u6b64\u64cd\u4f5c\u6743\u9650\u4f1a\u548c\u7528\u6237\u89d2\u8272\u4e2d\u7684\u6743\u9650\u53e0\u52a0)"}),Object(A["jsx"])(b["c"],{userid:t[a],msg:c,timestramp:(new Date).getTime()})]}),onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))}};Object(u["setGlobalDrawerProps"])(o)},vt=function(e){var t=e.record,n=e.moduleInfo,a=n.primarykey,i=n.namefield,r=e.funcDefine,c="\u7cfb\u7edf\u64cd\u4f5c\u89d2\u8272\u300e".concat(t[i],"\u300f\u7684\u64cd\u4f5c\u6743\u9650"),o={visible:!0,title:Object(A["jsxs"])(A["Fragment"],{children:[Object(A["jsx"])("span",{className:r.iconcls})," ",c]}),width:"500px",children:Object(A["jsx"])(b["b"],{display:!0,roleid:t[a],msg:c,timestramp:(new Date).getTime()}),onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))}};Object(u["setGlobalDrawerProps"])(o)},yt=function(e){var t=e.record,n=e.moduleInfo,a=n.primarykey,i=n.namefield,r=e.funcDefine,c="\u7cfb\u7edf\u64cd\u4f5c\u89d2\u8272\u300e".concat(t[i],"\u300f\u64cd\u4f5c\u6743\u9650\u8bbe\u7f6e"),o={visible:!0,title:Object(A["jsxs"])(A["Fragment"],{children:[Object(A["jsx"])("span",{className:r.iconcls})," ",c]}),width:"500px",children:Object(A["jsx"])(b["b"],{display:!1,roleid:t[a],msg:c,timestramp:(new Date).getTime()}),onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))}};Object(u["setGlobalDrawerProps"])(o)},Et=function(e){var t=e.record,n=e.dispatch;V({record:t,dispatch:n})},St=function(e){var t=e.record,n=e.moduleInfo,a=n.primarykey,i=n.namefield,o=n.modulename,s=e.dispatch,d=t[a];Object(l["default"])("".concat(l["API_HEAD"],"/platform/workflowdesign/setvalid.do"),{params:{workflowid:d}}).then((function(e){e.success?(r["default"].success("\u300e".concat(t[i],"\u300f\u5df2\u8bbe\u7f6e\u4e3a\u5f53\u524d\u751f\u6548\u7684\u5ba1\u6279\u6d41\u7a0b")),s({type:"modules/fetchData",payload:{moduleName:o,forceUpdate:!0}})):c["a"].error({width:500,title:"\u8bb0\u5f55\u4fdd\u5b58\u65f6\u53d1\u751f\u9519\u8bef",content:e.msg})}))},Ct=function(e){var t=e.record,n=e.moduleInfo,a=n.primarykey,i=n.namefield,o=n.modulename,s=e.dispatch,d=t[a];Object(l["default"])("".concat(l["API_HEAD"],"/platform/workflowdesign/deploy.do"),{params:{workflowid:d}}).then((function(e){e.success?(r["default"].success("\u300e".concat(t[i],"\u300f\u5ba1\u6279\u6d41\u7a0b\u53d1\u5e03\u6210\u529f")),s({type:"modules/refreshRecord",payload:{moduleName:o,recordId:d}})):c["a"].error({width:500,title:"\u8bb0\u5f55\u4fdd\u5b58\u65f6\u53d1\u751f\u9519\u8bef",content:e.msg})}))},It=function(e){var t=e.record;Object(u["setGlobalDrawerProps"])({onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))},zIndex:120,destroyOnClose:!0,visible:!0,width:"100%",title:Object(A["jsxs"])(A["Fragment"],{children:[Object(A["jsx"])(s["a"],{})," \u8bbe\u8ba1".concat(t["FDataobject.title"],"\u7684\u300e").concat(t.schemename,"\u300f\u8868\u5355\u65b9\u6848")]}),bodyStyle:{padding:"16px 16px 16px 16px",backgroundColor:"#f0f2f5"},children:Object(A["jsx"])(ge["a"],{formScheme:t})})},Dt=function(e){var t=e.record;Object(u["setGlobalDrawerProps"])({onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))},zIndex:120,destroyOnClose:!0,visible:!0,width:"100%",title:Object(A["jsxs"])(A["Fragment"],{children:[Object(A["jsx"])(s["a"],{})," \u8bbe\u8ba1".concat(t["FDataobject.title"],"\u7684\u300e").concat(t.schemename,"\u300f\u5217\u8868\u65b9\u6848")]}),bodyStyle:{padding:"16px 16px 16px 16px",backgroundColor:"#f0f2f5"},children:Object(A["jsx"])(ve["a"],{gridScheme:t})})},kt=function(e){var t=e.record;Object(u["setGlobalDrawerProps"])({onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))},zIndex:120,destroyOnClose:!0,visible:!0,width:"100%",title:Object(A["jsxs"])(A["Fragment"],{children:[Object(A["jsx"])(s["a"],{})," \u8bbe\u8ba1".concat(t["FDataobject.title"],"\u7684\u300e").concat(t.schemename,"\u300f\u7b5b\u9009\u65b9\u6848")]}),bodyStyle:{padding:"16px 16px 16px 16px",backgroundColor:"#f0f2f5"},children:Object(A["jsx"])(Ve["a"],{filterScheme:t})})},wt=function(e){var t=e.record;Object(u["setGlobalDrawerProps"])({onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))},zIndex:120,destroyOnClose:!0,visible:!0,width:"100%",title:Object(A["jsxs"])(A["Fragment"],{children:[Object(A["jsx"])(s["a"],{})," \u8bbe\u8ba1".concat(t["FDataobject.title"],"\u7684\u300e").concat(t.title,"\u300f\u5bfc\u822a\u65b9\u6848")]}),bodyStyle:{padding:"16px 16px 16px 16px",backgroundColor:"#f0f2f5"},children:Object(A["jsx"])($e,{navigateScheme:t})})},Pt=function(e){var t=e.record;Object(u["setGlobalDrawerProps"])({onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))},zIndex:120,destroyOnClose:!0,visible:!0,width:"100%",title:Object(A["jsxs"])(A["Fragment"],{children:[Object(A["jsx"])(s["a"],{})," \u8bbe\u8ba1\u300e".concat(t.title,"\u300f\u7684\u9ed8\u8ba4\u6392\u5e8f\u65b9\u6848")]}),bodyStyle:{padding:"16px 16px 16px 16px",backgroundColor:"#f0f2f5"},children:Object(A["jsx"])(Te,{objectRecord:t})})},Tt=function(e){var t=e.record;Object(u["setGlobalDrawerProps"])({onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))},zIndex:120,destroyOnClose:!0,visible:!0,width:"100%",title:Object(A["jsxs"])(A["Fragment"],{children:[Object(d["n"])("x-fa fa-sitemap")," \u5bf9\u8c61\u300e".concat(t.title,"\u300f\u7684\u5173\u8054\u5173\u7cfb\u56fe")]}),bodyStyle:{padding:"16px",backgroundColor:"#f0f2f5"},children:Object(A["jsx"])(Ce["a"],{moduleName:t.objectname,ref:null})})},Mt=function(e){var t=e.moduleState,n=function(e){var t=e.nodeData,n=t.id,a=t.orgname;return Object(A["jsxs"])("div",{children:[Object(A["jsxs"])("div",{className:"base",style:{textAlign:"left"},children:["\xa0\xa0",n]}),Object(A["jsx"])("div",{className:"type",children:a})]})},a=function e(t){return t.map((function(t){var n={id:t.orgcode,orgname:t.orgname};return t.children&&t.children.length&&(n.children=e(t.children)),n}))};t.dataSource.length?Object(u["setGlobalDrawerProps"])({onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))},zIndex:120,destroyOnClose:!0,visible:!0,width:"100%",title:Object(A["jsxs"])(A["Fragment"],{children:[Object(d["n"])("x-fa fa-sitemap")," \u673a\u6784\u7ec4\u7ec7\u67b6\u6784\u56fe"]}),bodyStyle:{padding:"16px",backgroundColor:"#f0f2f5"},children:Object(A["jsx"])(i["a"],{style:{height:"100%"},bodyStyle:{height:"100%"},children:Object(A["jsx"])(f.a,{datasource:a(t.dataSource)[0],direction:"b2t",collapsible:!0,chartClass:"moduleChart",NodeTemplate:n})})}):r["default"].warn("\u6682\u65e0\u7ec4\u7ec7\u673a\u6784\u53ef\u4f9b\u663e\u793a\uff01")},At=function(e){var t=e.record;Object(u["setGlobalDrawerProps"])({onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))},zIndex:120,destroyOnClose:!0,visible:!0,width:"100%",title:Object(A["jsxs"])(A["Fragment"],{children:[Object(A["jsx"])(s["a"],{})," \u8bbe\u8ba1".concat(t["FDataobject.title"],"\u7684\u300e").concat(t.title,"\u300f\u6392\u5e8f\u65b9\u6848")]}),bodyStyle:{padding:"16px 16px 16px 16px",backgroundColor:"#f0f2f5"},children:Object(A["jsx"])(at,{objectRecord:t})})},Rt=function(e){var t=e.record;Object(u["setGlobalModalProps"])({onCancel:function(){return Object(u["setGlobalModalProps"])((function(){return{visible:!1}}))},zIndex:120,destroyOnClose:!0,visible:!0,width:"900px",footer:null,title:Object(A["jsxs"])(A["Fragment"],{children:[Object(A["jsx"])(s["a"],{})," \u8bbe\u8ba1 ".concat(t["FDataobject.title"]," \u9644\u52a0\u5b57\u6bb5\u300e").concat(t.title,"\u300f\u7684\u5b57\u6bb5\u8868\u8fbe\u5f0f")]}),bodyStyle:{padding:"16px 16px 16px 16px",backgroundColor:"#f0f2f5"},children:Object(A["jsx"])(We,{record:t})})},Nt=function(e,t,n){var a=e.record;Object(u["setGlobalModalProps"])({onCancel:function(){return Object(u["setGlobalModalProps"])((function(){return{visible:!1}}))},zIndex:120,destroyOnClose:!0,visible:!0,width:"900px",footer:null,title:Object(A["jsxs"])(A["Fragment"],{children:[Object(A["jsx"])(s["a"],{})," \u8bbe\u8ba1 ".concat(a["FDataobject.title"]," ").concat(t,"\u300e").concat(a.title||a.rolename,"\u300f\u7684\u8868\u8fbe\u5f0f")]}),bodyStyle:{padding:"16px 16px 16px 16px",backgroundColor:"#f0f2f5"},children:Object(A["jsx"])(ut,{record:a,type:n})})},Lt=function(e){Nt(e,"\u81ea\u5b9a\u4e49\u6761\u4ef6","condition")},Bt=function(e){Nt(e,"\u6570\u636e\u89d2\u8272","datarole")},Kt=function(e){Nt(e,"\u53ef\u9009\u6570\u636e\u89d2\u8272","canselectrole")},Ft=function(e){var t="\u6240\u6709\u914d\u7f6e\u8bbe\u7f6e\u7a0b\u5e8f",n={visible:!0,title:Object(A["jsxs"])("span",{children:[Object(A["jsx"])("span",{className:"x-fa fa-link",style:{marginRight:"8px"}}),t]}),width:"100%",zIndex:void 0,children:Object(A["jsx"])("iframe",{title:t,width:"100%",height:"100%",src:e.funcDefine.remark}),onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))},bodyStyle:{backgroundColor:"#f0f2f5",padding:0,margin:0}};Object(u["setGlobalDrawerProps"])(n)},Ut=function(e){var t=e.record;if(t.fieldrelation&&"manytoone"===t.fieldrelation.toLowerCase()){var n="\u6a21\u5757\u300e".concat(t.fieldtitle,"\u300f\u4e2d\u5efa\u7acb\u300e").concat(t["FDataobject.title"],"\u300f\u7684\u4e00\u5bf9\u591a\u5173\u7cfb");c["a"].confirm({title:"\u786e\u5b9a\u8981\u5728".concat(n,"\u5417?"),width:500,icon:Object(A["jsx"])(o["a"],{}),onOk:function(){Object(l["default"])("".concat(l["API_HEAD"],"/platform/dataobjectfield/createonetomanyfield.do"),{method:"POST",params:{fieldid:t.fieldid}}).then((function(e){e.success?r["default"].success("".concat(n,"\u5df2\u6210\u529f!")):c["a"].error({width:500,title:"\u64cd\u4f5c\u5931\u8d25",content:e.msg})}))}})}else r["default"].warn("\u8bf7\u9009\u62e9\u4e00\u4e2a\u591a\u5bf9\u4e00(manytoone)\u7684\u5b57\u6bb5\uff01")},Wt=function(e){var t=e.records,n=t,i=Object(a["a"])(n,2),s=i[0],d=i[1];if(s["FDataobject.objectid"]===d["FDataobject.objectid"])if(s.fieldrelation&&"manytoone"===s.fieldrelation.toLowerCase()&&d.fieldrelation&&"manytoone"===d.fieldrelation.toLowerCase()){var u="\u6a21\u5757\u300e".concat(s.fieldtitle,"\u300f\u548c\u300e").concat(d.fieldtitle,"\u300f\u4e4b\u95f4\u5efa\u7acb\u591a\u5bf9\u591a\u5173\u7cfb");c["a"].confirm({title:"\u786e\u5b9a\u8981\u5728".concat(u,"\u5417?"),icon:Object(A["jsx"])(o["a"],{}),onOk:function(){Object(l["default"])("".concat(l["API_HEAD"],"/platform/dataobjectfield/createmanytomanyfield.do"),{method:"POST",params:{fieldid1:s.fieldid,fieldid2:d.fieldid,linkedobjectid:s["FDataobject.objectid"]}}).then((function(e){e.success?r["default"].success("".concat(u,"\u5df2\u6210\u529f!")):c["a"].error({width:500,title:"\u64cd\u4f5c\u5931\u8d25",content:e.msg})}))}})}else r["default"].warn("\u8bf7\u9009\u62e9\u4e8c\u4e2a\u591a\u5bf9\u4e00(manytoone)\u7684\u5b57\u6bb5\uff01");else r["default"].warn("\u8bf7\u9009\u62e9\u76f8\u540c\u6a21\u5757\u4e0b\u7684\u4e8c\u4e2a\u5b57\u6bb5\uff01")},Vt=function(e){var t=e.record;Object(u["setGlobalModalProps"])({onCancel:function(){return Object(u["setGlobalModalProps"])((function(){return{visible:!1}}))},zIndex:1200,destroyOnClose:!0,visible:!0,width:"60%",footer:null,title:"\u9884\u89c8 ".concat(t["fDataobject.title"],"\u300e").concat(t.title,"\u300f\u7684\u7ec4\u4ef6"),bodyStyle:{padding:"16px 16px 16px 16px",backgroundColor:"#f0f2f5"},children:Object(A["jsx"])(pt["a"],{widget:Object(l["syncRequest"])("".concat(l["API_HEAD"],"/platform/systemcommon/widgetdefine.do"),{params:{widgetid:t.widgetid}})})})},qt=function(e){var t=e.record,n=Object(l["syncRequest"])("".concat(l["API_HEAD"],"/platform/systemcommon/homepageschemedefine.do"),{params:{homepageschemeid:t.homepageschemeid}});Object(u["setGlobalDrawerProps"])({onClose:function(){return Object(u["setGlobalDrawerProps"])((function(){return{visible:!1}}))},zIndex:120,destroyOnClose:!0,visible:!0,width:"90%",footer:null,title:"\u5206\u6790\u9875\u65b9\u6848\u300e".concat(t.schemename,"\u300f\u7684\u9884\u89c8"),bodyStyle:{padding:"16px 16px 16px 16px",backgroundColor:"#f0f2f5"},children:Object(A["jsx"])(ft["a"],{block:n.items[0]},n.items[0].detailid)})},zt=function(e){var t=e.moduleState,n=e.dispatch,a=Object(ce["y"])(t,"FDataobject");if(a){var i=a.text,c=a.id;Object(l["default"])("".concat(l["API_HEAD"],"/platform/datamining/importexpandgroup.do"),{params:{dataobjectid:c}}).then((function(e){0===e.tag?r["default"].info("\u6a21\u5757\u300e".concat(i,"\u300f\u4e2d\u6ca1\u6709\u53d1\u73b0\u65b0\u7684\u53ef\u5206\u7ec4\u5b57\u6bb5")):(r["default"].info("\u6a21\u5757\u300e".concat(i,"\u300f\u7684\u6240\u6709\u53ef\u5206\u7ec4\u5b57\u6bb5\u5bfc\u5165\u6210\u529f\uff0c\u5171\u52a0\u5165\u4e86 ").concat(e.tag," \u6761\u8bb0\u5f55\uff01")),n({type:"modules/fetchData",payload:{moduleName:t.moduleName,forceUpdate:!0}}))}))}else r["default"].warn("\u8bf7\u5148\u5728\u5bfc\u822a\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u5b9e\u4f53\u5bf9\u8c61\uff01")},Gt=Object(d["d"])({createPersonnelUser:jt,resetpassword:bt,displayuserlimit:xt,setuserlimit:gt,exportExcelTemplate:Ot,displayrolelimit:vt,setrolelimit:yt,designworkflow:Et,setWorkflowValid:St,deployworkflow:Ct,importtableandview:pe,extjsSetting:Ft,refreshfields:me,testDataSource:be,breakDataSource:je,importSchema:he,importSchemaTable:xe,updatetocompanymodulefunction:ht,addHomePageToModule:_t,designform:It,designGrid:Dt,designUserFilter:kt,designNavigate:wt,setdefaultorder:Pt,designSort:At,showOrganizationGraph:Mt,showModuleHierarchy:Tt,setadditionfieldexpression:Rt,setConditionExpression:Lt,setDataFilterRoleLimit:Bt,setDataCanSelectFilterRoleLimit:Kt,createonetomanyfield:Ut,createmanytomanyfield:Wt,previewWidget:Vt,previewHopepageScheme:qt,importDataminingExpandGroup:zt},q["b"])},zjkv:function(e,t,n){"use strict";var a=n("3OWR"),i=n("6BL2"),r=n("emvA").getBusinessObject,c=n("asz2").getTemplate,o=n("hfUJ"),s=n("EWYV"),l=n("asz2").findExtension,d=n("asz2").findExtensions,u=n("asz2").findInputParameter,p=n("asz2").findOutputParameter,f=n("asz2").findFlowableProperty,m=n("asz2").findFlowableInOut,b=n("aUXt").createFlowableProperty,j=n("aUXt").createInputParameter,h=n("aUXt").createOutputParameter,_=n("aUXt").createFlowableIn,O=n("aUXt").createFlowableOut,x=n("aUXt").createFlowableInWithBusinessKey,g=n("aUXt").createFlowableFieldInjection,v="activiti:property",y="activiti:inputParameter",E="activiti:outputParameter",S="activiti:in",C="activiti:out",I="activiti:in:businessKey",D="activiti:executionListener",k="activiti:field",w=["Boolean","Integer","String"],P=[v,y,E,S,C,I,k],T=[y,E],M=[S,C,I];function A(e,t){return function(n){var a=L(n,t);return U(e,a)}}function R(e,t,n){return function(a,i){var r=i[e];return B(a,t,r,n)}}function N(e,t,n){return function(a,i){var r=i[e],c=K(r,t,n);if(c)return U(e,c)}}function L(e,t){var n,a,i,c,o,s,b,j=r(e),h=t.binding,_=t.scope,O=h.type,x=h.name,g=t.value||"";if(_&&(j=l(j,_.name),!j))return g;if("property"===O){var w=j.get(x);return"conditionExpression"===x?w?w.body:g:"undefined"!==typeof w?w:g}if(O===v)return n=_?j.get("properties"):l(j,"activiti:Properties"),n&&(a=f(n,h),a)?a.value:g;if(-1!==T.indexOf(O)&&(i=_?j.get("inputOutput"):l(j,"activiti:InputOutput"),!i))return g;if(O===y){if(c=u(i,h),c){if(!h.scriptFormat)return c.value||"";if(c.definition)return c.definition.value}return g}if(h.type===E)return c=p(i,h),c?c.name:g;if(-1!=M.indexOf(O)){if(o=m(j,h),o){if(O===I)return o.businessKey;if(O===C)return o.target;if(O===S)return o[h.expression?"sourceExpression":"source"]}return g}if(O===D)return s=_?j.get("executionListener"):l(j,"activiti:ExecutionListener"),s.script.value;if(k===O){var P=d(j,["activiti:Field"]);return P.forEach((function(e){e.name===h.name&&(b=e)})),b?b.string||b.expression:""}throw q(t)}function B(e,t,n,a){var i,c,I,D,A,R,N,L,B,K,F=r(e),W=t.binding,V=t.scope,q=W.type,z=W.name,G=[];if(-1!==P.indexOf(q)&&(c=F.get("extensionElements"),c||(c=s.createElement("bpmn:ExtensionElements",null,e,a),G.push(o.updateBusinessObject(e,F,U("extensionElements",c))))),V&&(F=l(F,V.name),F||(F=s.createElement(V.name,null,e,a),G.push(o.addElementsTolist(F,c,"values",[F])))),"property"===q){if("conditionExpression"===z)i=s.createElement("bpmn:FormalExpression",{body:n,language:W.scriptFormat},F,a);else{var J=F.$descriptor.propertiesByName[z],H=J.type;if(-1===w.indexOf(H))throw new Error("cannot set moddle type <"+H+">");"Boolean"===H?i=!!n:"Integer"===H?(i=parseInt(n,10),isNaN(i)&&(i=void 0)):i=n}void 0!==i&&G.push(o.updateBusinessObject(e,F,U(z,i)))}if(q===v&&(I=V?F.get("properties"):l(c,"activiti:Properties"),I||(I=s.createElement("activiti:Properties",null,F,a),V?G.push(o.updateBusinessObject(e,F,{properties:I})):G.push(o.addElementsTolist(e,c,"values",[I]))),D=f(I,W),A=b(W,n,a),G.push(o.addAndRemoveElementsFromList(e,I,"values",null,[A],D?[D]:[]))),-1!==T.indexOf(q)&&(R=V?F.get("inputOutput"):l(c,"activiti:InputOutput"),R||(R=s.createElement("activiti:InputOutput",null,F,a),V?G.push(o.updateBusinessObject(e,F,{inputOutput:R})):G.push(o.addElementsTolist(e,c,"values",R)))),q===y&&(N=u(R,W),L=j(W,n,a),G.push(o.addAndRemoveElementsFromList(e,R,"inputParameters",null,[L],N?[N]:[]))),q===E&&(N=p(R,W),L=h(W,n,a),G.push(o.addAndRemoveElementsFromList(e,R,"outputParameters",null,[L],N?[N]:[]))),-1!==M.indexOf(q)&&(B=m(F,W),K=q===S?_(W,n,a):q===C?O(W,n,a):x(W,n,a),G.push(o.addAndRemoveElementsFromList(e,c,"values",null,[K],B?[B]:[]))),q===k){var Y=d(F,["activiti:Field"]),Z=[];Y.length>0?Y.forEach((function(e){e.name===W.name?Z.push(g(W,n,a)):Z.push(e)})):Z.push(g(W,n,a)),G.push(o.addAndRemoveElementsFromList(e,c,"values",null,Z,Y||[]))}if(G.length)return G;console.warn("no update",e,t,n)}function K(e,t,n){var a=t.constraints||{};if(a.notEmpty&&V(e))return n("Must not be empty");if(a.maxLength&&e.length>a.maxLength)return n("Must have max length {length}",{length:a.maxLength});if(a.minLength&&e.length<a.minLength)return n("Must have min length {length}",{length:a.minLength});var i,r=a.pattern;return r&&("string"!==typeof r&&(i=r.message,r=r.value),!W(e,r))?i||n("Must match pattern {pattern}",{pattern:r}):void 0}function F(e,t){return t?a({},e,{scope:{name:t}}):e}function U(e,t){var n={};return n[e]=t,n}function W(e,t){var n=new RegExp(t);return n.test(e)}function V(e){return!e||/^\s*$/.test(e)}function q(e){var t=e.binding;return new Error("unknown binding: <"+t.type+">")}e.exports=function(e,t,n,a){var r=c(e,t);if(!r)return[];var o,s,l=function(e,t,r){var c,o=t.type,s={id:e,description:t.description,label:t.label?a(t.label):t.label,modelProperty:e,get:A(e,t),set:R(e,t,n),validate:N(e,t,a)};return"Boolean"===o&&(c=i.checkbox(s)),"String"===o&&(c=i.textField(s)),"Text"===o&&(c=i.textBox(s)),"Dropdown"===o&&(s.selectOptions=t.choices,c=i.selectBox(s)),c},d=[],u={id:"customField",label:a("Custom Fields"),entries:[]};if(r.properties.forEach((function(e,t){o="custom-"+r.id+"-"+t,s=l(o,e,t),s&&u.entries.push(s)})),u.entries.length>0&&d.push(u),r.scopes)for(var p in r.scopes){var f=r.scopes[p],m=p.replace(/:/g,"_"),b={id:"customField-"+m,label:a("Custom Fields for scope: ")+p,entries:[]};f.properties.forEach((function(e,t){var n="custom-"+r.id+"-"+m+"-"+t,a=F(e,p);s=l(n,a,t),s&&b.entries.push(s)})),b.entries.length>0&&d.push(b)}return d},e.exports.getPropertyValue=L,e.exports.setPropertyValue=B}}]);